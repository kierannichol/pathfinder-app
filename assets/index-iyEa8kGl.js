var Qn=Object.defineProperty;var Xn=(d,c,et)=>c in d?Qn(d,c,{enumerable:!0,configurable:!0,writable:!0,value:et}):d[c]=et;var cn=(d,c,et)=>(Xn(d,typeof c!="symbol"?c+"":c,et),et);function _mergeNamespaces(d,c){for(var et=0;et<c.length;et++){const _e=c[et];if(typeof _e!="string"&&!Array.isArray(_e)){for(const tt in _e)if(tt!=="default"&&!(tt in d)){const nt=Object.getOwnPropertyDescriptor(_e,tt);nt&&Object.defineProperty(d,tt,nt.get?nt:{enumerable:!0,get:()=>_e[tt]})}}}return Object.freeze(Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}))}(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const tt of document.querySelectorAll('link[rel="modulepreload"]'))_e(tt);new MutationObserver(tt=>{for(const nt of tt)if(nt.type==="childList")for(const rt of nt.addedNodes)rt.tagName==="LINK"&&rt.rel==="modulepreload"&&_e(rt)}).observe(document,{childList:!0,subtree:!0});function et(tt){const nt={};return tt.integrity&&(nt.integrity=tt.integrity),tt.referrerPolicy&&(nt.referrerPolicy=tt.referrerPolicy),tt.crossOrigin==="use-credentials"?nt.credentials="include":tt.crossOrigin==="anonymous"?nt.credentials="omit":nt.credentials="same-origin",nt}function _e(tt){if(tt.ep)return;tt.ep=!0;const nt=et(tt);fetch(tt.href,nt)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$2=Symbol.for("react.portal"),p$4=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t$1=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(d){return d===null||typeof d!="object"?null:(d=z$2&&d[z$2]||d["@@iterator"],typeof d=="function"?d:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$2(d,c,et){this.props=d,this.context=c,this.refs=D$2,this.updater=et||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(d,c){if(typeof d!="object"&&typeof d!="function"&&d!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,d,c,"setState")};E$2.prototype.forceUpdate=function(d){this.updater.enqueueForceUpdate(this,d,"forceUpdate")};function F$1(){}F$1.prototype=E$2.prototype;function G$2(d,c,et){this.props=d,this.context=c,this.refs=D$2,this.updater=et||B$2}var H$2=G$2.prototype=new F$1;H$2.constructor=G$2;C$2(H$2,E$2.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2(d,c,et){var _e,tt={},nt=null,rt=null;if(c!=null)for(_e in c.ref!==void 0&&(rt=c.ref),c.key!==void 0&&(nt=""+c.key),c)J$1.call(c,_e)&&!L$2.hasOwnProperty(_e)&&(tt[_e]=c[_e]);var it=arguments.length-2;if(it===1)tt.children=et;else if(1<it){for(var ot=Array(it),st=0;st<it;st++)ot[st]=arguments[st+2];tt.children=ot}if(d&&d.defaultProps)for(_e in it=d.defaultProps,it)tt[_e]===void 0&&(tt[_e]=it[_e]);return{$$typeof:l$2,type:d,key:nt,ref:rt,props:tt,_owner:K$2.current}}function N$2(d,c){return{$$typeof:l$2,type:d.type,key:c,ref:d.ref,props:d.props,_owner:d._owner}}function O$2(d){return typeof d=="object"&&d!==null&&d.$$typeof===l$2}function escape(d){var c={"=":"=0",":":"=2"};return"$"+d.replace(/[=:]/g,function(et){return c[et]})}var P$2=/\/+/g;function Q$2(d,c){return typeof d=="object"&&d!==null&&d.key!=null?escape(""+d.key):c.toString(36)}function R$2(d,c,et,_e,tt){var nt=typeof d;(nt==="undefined"||nt==="boolean")&&(d=null);var rt=!1;if(d===null)rt=!0;else switch(nt){case"string":case"number":rt=!0;break;case"object":switch(d.$$typeof){case l$2:case n$2:rt=!0}}if(rt)return rt=d,tt=tt(rt),d=_e===""?"."+Q$2(rt,0):_e,I$2(tt)?(et="",d!=null&&(et=d.replace(P$2,"$&/")+"/"),R$2(tt,c,et,"",function(st){return st})):tt!=null&&(O$2(tt)&&(tt=N$2(tt,et+(!tt.key||rt&&rt.key===tt.key?"":(""+tt.key).replace(P$2,"$&/")+"/")+d)),c.push(tt)),1;if(rt=0,_e=_e===""?".":_e+":",I$2(d))for(var it=0;it<d.length;it++){nt=d[it];var ot=_e+Q$2(nt,it);rt+=R$2(nt,c,et,ot,tt)}else if(ot=A$2(d),typeof ot=="function")for(d=ot.call(d),it=0;!(nt=d.next()).done;)nt=nt.value,ot=_e+Q$2(nt,it++),rt+=R$2(nt,c,et,ot,tt);else if(nt==="object")throw c=String(d),Error("Objects are not valid as a React child (found: "+(c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c)+"). If you meant to render a collection of children, use an array instead.");return rt}function S$2(d,c,et){if(d==null)return d;var _e=[],tt=0;return R$2(d,_e,"","",function(nt){return c.call(et,nt,tt++)}),_e}function T$2(d){if(d._status===-1){var c=d._result;c=c(),c.then(function(et){(d._status===0||d._status===-1)&&(d._status=1,d._result=et)},function(et){(d._status===0||d._status===-1)&&(d._status=2,d._result=et)}),d._status===-1&&(d._status=0,d._result=c)}if(d._status===1)return d._result.default;throw d._result}var U$2={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};react_production_min.Children={map:S$2,forEach:function(d,c,et){S$2(d,function(){c.apply(this,arguments)},et)},count:function(d){var c=0;return S$2(d,function(){c++}),c},toArray:function(d){return S$2(d,function(c){return c})||[]},only:function(d){if(!O$2(d))throw Error("React.Children.only expected to receive a single React element child.");return d}};react_production_min.Component=E$2;react_production_min.Fragment=p$4;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.cloneElement=function(d,c,et){if(d==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+d+".");var _e=C$2({},d.props),tt=d.key,nt=d.ref,rt=d._owner;if(c!=null){if(c.ref!==void 0&&(nt=c.ref,rt=K$2.current),c.key!==void 0&&(tt=""+c.key),d.type&&d.type.defaultProps)var it=d.type.defaultProps;for(ot in c)J$1.call(c,ot)&&!L$2.hasOwnProperty(ot)&&(_e[ot]=c[ot]===void 0&&it!==void 0?it[ot]:c[ot])}var ot=arguments.length-2;if(ot===1)_e.children=et;else if(1<ot){it=Array(ot);for(var st=0;st<ot;st++)it[st]=arguments[st+2];_e.children=it}return{$$typeof:l$2,type:d.type,key:tt,ref:nt,props:_e,_owner:rt}};react_production_min.createContext=function(d){return d={$$typeof:u$1,_currentValue:d,_currentValue2:d,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},d.Provider={$$typeof:t$1,_context:d},d.Consumer=d};react_production_min.createElement=M$2;react_production_min.createFactory=function(d){var c=M$2.bind(null,d);return c.type=d,c};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(d){return{$$typeof:v$2,render:d}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(d){return{$$typeof:y$1,_payload:{_status:-1,_result:d},_init:T$2}};react_production_min.memo=function(d,c){return{$$typeof:x$1,type:d,compare:c===void 0?null:c}};react_production_min.startTransition=function(d){var c=V$2.transition;V$2.transition={};try{d()}finally{V$2.transition=c}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(d,c){return U$2.current.useCallback(d,c)};react_production_min.useContext=function(d){return U$2.current.useContext(d)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(d){return U$2.current.useDeferredValue(d)};react_production_min.useEffect=function(d,c){return U$2.current.useEffect(d,c)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(d,c,et){return U$2.current.useImperativeHandle(d,c,et)};react_production_min.useInsertionEffect=function(d,c){return U$2.current.useInsertionEffect(d,c)};react_production_min.useLayoutEffect=function(d,c){return U$2.current.useLayoutEffect(d,c)};react_production_min.useMemo=function(d,c){return U$2.current.useMemo(d,c)};react_production_min.useReducer=function(d,c,et){return U$2.current.useReducer(d,c,et)};react_production_min.useRef=function(d){return U$2.current.useRef(d)};react_production_min.useState=function(d){return U$2.current.useState(d)};react_production_min.useSyncExternalStore=function(d,c,et){return U$2.current.useSyncExternalStore(d,c,et)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k$1=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n$1=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$3={key:!0,ref:!0,__self:!0,__source:!0};function q$1(d,c,et){var _e,tt={},nt=null,rt=null;et!==void 0&&(nt=""+et),c.key!==void 0&&(nt=""+c.key),c.ref!==void 0&&(rt=c.ref);for(_e in c)m$2.call(c,_e)&&!p$3.hasOwnProperty(_e)&&(tt[_e]=c[_e]);if(d&&d.defaultProps)for(_e in c=d.defaultProps,c)tt[_e]===void 0&&(tt[_e]=c[_e]);return{$$typeof:k$1,type:d,key:nt,ref:rt,props:tt,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(d){function c(Ot,Pt){var Lt=Ot.length;Ot.push(Pt);e:for(;0<Lt;){var Qt=Lt-1>>>1,Wt=Ot[Qt];if(0<tt(Wt,Pt))Ot[Qt]=Pt,Ot[Lt]=Wt,Lt=Qt;else break e}}function et(Ot){return Ot.length===0?null:Ot[0]}function _e(Ot){if(Ot.length===0)return null;var Pt=Ot[0],Lt=Ot.pop();if(Lt!==Pt){Ot[0]=Lt;e:for(var Qt=0,Wt=Ot.length,sn=Wt>>>1;Qt<sn;){var zt=2*(Qt+1)-1,en=Ot[zt],rn=zt+1,mn=Ot[rn];if(0>tt(en,Lt))rn<Wt&&0>tt(mn,en)?(Ot[Qt]=mn,Ot[rn]=Lt,Qt=rn):(Ot[Qt]=en,Ot[zt]=Lt,Qt=zt);else if(rn<Wt&&0>tt(mn,Lt))Ot[Qt]=mn,Ot[rn]=Lt,Qt=rn;else break e}}return Pt}function tt(Ot,Pt){var Lt=Ot.sortIndex-Pt.sortIndex;return Lt!==0?Lt:Ot.id-Pt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var nt=performance;d.unstable_now=function(){return nt.now()}}else{var rt=Date,it=rt.now();d.unstable_now=function(){return rt.now()-it}}var ot=[],st=[],at=1,lt=null,ct=3,ut=!1,dt=!1,ht=!1,yt=typeof setTimeout=="function"?setTimeout:null,gt=typeof clearTimeout=="function"?clearTimeout:null,ft=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function mt(Ot){for(var Pt=et(st);Pt!==null;){if(Pt.callback===null)_e(st);else if(Pt.startTime<=Ot)_e(st),Pt.sortIndex=Pt.expirationTime,c(ot,Pt);else break;Pt=et(st)}}function pt(Ot){if(ht=!1,mt(Ot),!dt)if(et(ot)!==null)dt=!0,Kt(xt);else{var Pt=et(st);Pt!==null&&qt(pt,Pt.startTime-Ot)}}function xt(Ot,Pt){dt=!1,ht&&(ht=!1,gt(_t),_t=-1),ut=!0;var Lt=ct;try{for(mt(Pt),lt=et(ot);lt!==null&&(!(lt.expirationTime>Pt)||Ot&&!$t());){var Qt=lt.callback;if(typeof Qt=="function"){lt.callback=null,ct=lt.priorityLevel;var Wt=Qt(lt.expirationTime<=Pt);Pt=d.unstable_now(),typeof Wt=="function"?lt.callback=Wt:lt===et(ot)&&_e(ot),mt(Pt)}else _e(ot);lt=et(ot)}if(lt!==null)var sn=!0;else{var zt=et(st);zt!==null&&qt(pt,zt.startTime-Pt),sn=!1}return sn}finally{lt=null,ct=Lt,ut=!1}}var vt=!1,Et=null,_t=-1,wt=5,bt=-1;function $t(){return!(d.unstable_now()-bt<wt)}function kt(){if(Et!==null){var Ot=d.unstable_now();bt=Ot;var Pt=!0;try{Pt=Et(!0,Ot)}finally{Pt?Nt():(vt=!1,Et=null)}}else vt=!1}var Nt;if(typeof ft=="function")Nt=function(){ft(kt)};else if(typeof MessageChannel<"u"){var At=new MessageChannel,Gt=At.port2;At.port1.onmessage=kt,Nt=function(){Gt.postMessage(null)}}else Nt=function(){yt(kt,0)};function Kt(Ot){Et=Ot,vt||(vt=!0,Nt())}function qt(Ot,Pt){_t=yt(function(){Ot(d.unstable_now())},Pt)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(Ot){Ot.callback=null},d.unstable_continueExecution=function(){dt||ut||(dt=!0,Kt(xt))},d.unstable_forceFrameRate=function(Ot){0>Ot||125<Ot?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):wt=0<Ot?Math.floor(1e3/Ot):5},d.unstable_getCurrentPriorityLevel=function(){return ct},d.unstable_getFirstCallbackNode=function(){return et(ot)},d.unstable_next=function(Ot){switch(ct){case 1:case 2:case 3:var Pt=3;break;default:Pt=ct}var Lt=ct;ct=Pt;try{return Ot()}finally{ct=Lt}},d.unstable_pauseExecution=function(){},d.unstable_requestPaint=function(){},d.unstable_runWithPriority=function(Ot,Pt){switch(Ot){case 1:case 2:case 3:case 4:case 5:break;default:Ot=3}var Lt=ct;ct=Ot;try{return Pt()}finally{ct=Lt}},d.unstable_scheduleCallback=function(Ot,Pt,Lt){var Qt=d.unstable_now();switch(typeof Lt=="object"&&Lt!==null?(Lt=Lt.delay,Lt=typeof Lt=="number"&&0<Lt?Qt+Lt:Qt):Lt=Qt,Ot){case 1:var Wt=-1;break;case 2:Wt=250;break;case 5:Wt=1073741823;break;case 4:Wt=1e4;break;default:Wt=5e3}return Wt=Lt+Wt,Ot={id:at++,callback:Pt,priorityLevel:Ot,startTime:Lt,expirationTime:Wt,sortIndex:-1},Lt>Qt?(Ot.sortIndex=Lt,c(st,Ot),et(ot)===null&&Ot===et(st)&&(ht?(gt(_t),_t=-1):ht=!0,qt(pt,Lt-Qt))):(Ot.sortIndex=Wt,c(ot,Ot),dt||ut||(dt=!0,Kt(xt))),Ot},d.unstable_shouldYield=$t,d.unstable_wrapCallback=function(Ot){var Pt=ct;return function(){var Lt=ct;ct=Pt;try{return Ot.apply(this,arguments)}finally{ct=Lt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$2(d){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+d,et=1;et<arguments.length;et++)c+="&args[]="+encodeURIComponent(arguments[et]);return"Minified React error #"+d+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(d,c){ha(d,c),ha(d+"Capture",c)}function ha(d,c){for(ea[d]=c,d=0;d<c.length;d++)da.add(c[d])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(d){return ja.call(ma,d)?!0:ja.call(la,d)?!1:ka.test(d)?ma[d]=!0:(la[d]=!0,!1)}function pa(d,c,et,_e){if(et!==null&&et.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return _e?!1:et!==null?!et.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function qa(d,c,et,_e){if(c===null||typeof c>"u"||pa(d,c,et,_e))return!0;if(_e)return!1;if(et!==null)switch(et.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function v$1(d,c,et,_e,tt,nt,rt){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=_e,this.attributeNamespace=tt,this.mustUseProperty=et,this.propertyName=d,this.type=c,this.sanitizeURL=nt,this.removeEmptyString=rt}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){z$1[d]=new v$1(d,0,!1,d,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var c=d[0];z$1[c]=new v$1(c,1,!1,d[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(d){z$1[d]=new v$1(d,2,!1,d.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){z$1[d]=new v$1(d,2,!1,d,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){z$1[d]=new v$1(d,3,!1,d.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(d){z$1[d]=new v$1(d,3,!0,d,null,!1,!1)});["capture","download"].forEach(function(d){z$1[d]=new v$1(d,4,!1,d,null,!1,!1)});["cols","rows","size","span"].forEach(function(d){z$1[d]=new v$1(d,6,!1,d,null,!1,!1)});["rowSpan","start"].forEach(function(d){z$1[d]=new v$1(d,5,!1,d.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var c=d.replace(ra,sa);z$1[c]=new v$1(c,1,!1,d,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var c=d.replace(ra,sa);z$1[c]=new v$1(c,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(d){var c=d.replace(ra,sa);z$1[c]=new v$1(c,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(d){z$1[d]=new v$1(d,1,!1,d.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(d){z$1[d]=new v$1(d,1,!1,d.toLowerCase(),null,!0,!0)});function ta(d,c,et,_e){var tt=z$1.hasOwnProperty(c)?z$1[c]:null;(tt!==null?tt.type!==0:_e||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(qa(c,et,tt,_e)&&(et=null),_e||tt===null?oa(c)&&(et===null?d.removeAttribute(c):d.setAttribute(c,""+et)):tt.mustUseProperty?d[tt.propertyName]=et===null?tt.type===3?!1:"":et:(c=tt.attributeName,_e=tt.attributeNamespace,et===null?d.removeAttribute(c):(tt=tt.type,et=tt===3||tt===4&&et===!0?"":""+et,_e?d.setAttributeNS(_e,c,et):d.setAttribute(c,et))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(d){return d===null||typeof d!="object"?null:(d=Ja&&d[Ja]||d["@@iterator"],typeof d=="function"?d:null)}var A$1=Object.assign,La;function Ma(d){if(La===void 0)try{throw Error()}catch(et){var c=et.stack.trim().match(/\n( *(at )?)/);La=c&&c[1]||""}return`
`+La+d}var Na=!1;function Oa(d,c){if(!d||Na)return"";Na=!0;var et=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(st){var _e=st}Reflect.construct(d,[],c)}else{try{c.call()}catch(st){_e=st}d.call(c.prototype)}else{try{throw Error()}catch(st){_e=st}d()}}catch(st){if(st&&_e&&typeof st.stack=="string"){for(var tt=st.stack.split(`
`),nt=_e.stack.split(`
`),rt=tt.length-1,it=nt.length-1;1<=rt&&0<=it&&tt[rt]!==nt[it];)it--;for(;1<=rt&&0<=it;rt--,it--)if(tt[rt]!==nt[it]){if(rt!==1||it!==1)do if(rt--,it--,0>it||tt[rt]!==nt[it]){var ot=`
`+tt[rt].replace(" at new "," at ");return d.displayName&&ot.includes("<anonymous>")&&(ot=ot.replace("<anonymous>",d.displayName)),ot}while(1<=rt&&0<=it);break}}}finally{Na=!1,Error.prepareStackTrace=et}return(d=d?d.displayName||d.name:"")?Ma(d):""}function Pa(d){switch(d.tag){case 5:return Ma(d.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return d=Oa(d.type,!1),d;case 11:return d=Oa(d.type.render,!1),d;case 1:return d=Oa(d.type,!0),d;default:return""}}function Qa(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case Ca:return(d.displayName||"Context")+".Consumer";case Ba:return(d._context.displayName||"Context")+".Provider";case Da:var c=d.render;return d=d.displayName,d||(d=c.displayName||c.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case Ga:return c=d.displayName||null,c!==null?c:Qa(d.type)||"Memo";case Ha:c=d._payload,d=d._init;try{return Qa(d(c))}catch{}}return null}function Ra(d){var c=d.type;switch(d.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=c.render,d=d.displayName||d.name||"",c.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(c);case 8:return c===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Sa(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function Ta(d){var c=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ua(d){var c=Ta(d)?"checked":"value",et=Object.getOwnPropertyDescriptor(d.constructor.prototype,c),_e=""+d[c];if(!d.hasOwnProperty(c)&&typeof et<"u"&&typeof et.get=="function"&&typeof et.set=="function"){var tt=et.get,nt=et.set;return Object.defineProperty(d,c,{configurable:!0,get:function(){return tt.call(this)},set:function(rt){_e=""+rt,nt.call(this,rt)}}),Object.defineProperty(d,c,{enumerable:et.enumerable}),{getValue:function(){return _e},setValue:function(rt){_e=""+rt},stopTracking:function(){d._valueTracker=null,delete d[c]}}}}function Va(d){d._valueTracker||(d._valueTracker=Ua(d))}function Wa(d){if(!d)return!1;var c=d._valueTracker;if(!c)return!0;var et=c.getValue(),_e="";return d&&(_e=Ta(d)?d.checked?"true":"false":d.value),d=_e,d!==et?(c.setValue(d),!0):!1}function Xa(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function Ya(d,c){var et=c.checked;return A$1({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:et??d._wrapperState.initialChecked})}function Za(d,c){var et=c.defaultValue==null?"":c.defaultValue,_e=c.checked!=null?c.checked:c.defaultChecked;et=Sa(c.value!=null?c.value:et),d._wrapperState={initialChecked:_e,initialValue:et,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function ab(d,c){c=c.checked,c!=null&&ta(d,"checked",c,!1)}function bb(d,c){ab(d,c);var et=Sa(c.value),_e=c.type;if(et!=null)_e==="number"?(et===0&&d.value===""||d.value!=et)&&(d.value=""+et):d.value!==""+et&&(d.value=""+et);else if(_e==="submit"||_e==="reset"){d.removeAttribute("value");return}c.hasOwnProperty("value")?cb(d,c.type,et):c.hasOwnProperty("defaultValue")&&cb(d,c.type,Sa(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(d.defaultChecked=!!c.defaultChecked)}function db$1(d,c,et){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var _e=c.type;if(!(_e!=="submit"&&_e!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+d._wrapperState.initialValue,et||c===d.value||(d.value=c),d.defaultValue=c}et=d.name,et!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,et!==""&&(d.name=et)}function cb(d,c,et){(c!=="number"||Xa(d.ownerDocument)!==d)&&(et==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+et&&(d.defaultValue=""+et))}var eb=Array.isArray;function fb(d,c,et,_e){if(d=d.options,c){c={};for(var tt=0;tt<et.length;tt++)c["$"+et[tt]]=!0;for(et=0;et<d.length;et++)tt=c.hasOwnProperty("$"+d[et].value),d[et].selected!==tt&&(d[et].selected=tt),tt&&_e&&(d[et].defaultSelected=!0)}else{for(et=""+Sa(et),c=null,tt=0;tt<d.length;tt++){if(d[tt].value===et){d[tt].selected=!0,_e&&(d[tt].defaultSelected=!0);return}c!==null||d[tt].disabled||(c=d[tt])}c!==null&&(c.selected=!0)}}function gb(d,c){if(c.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A$1({},c,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function hb(d,c){var et=c.value;if(et==null){if(et=c.children,c=c.defaultValue,et!=null){if(c!=null)throw Error(p$2(92));if(eb(et)){if(1<et.length)throw Error(p$2(93));et=et[0]}c=et}c==null&&(c=""),et=c}d._wrapperState={initialValue:Sa(et)}}function ib(d,c){var et=Sa(c.value),_e=Sa(c.defaultValue);et!=null&&(et=""+et,et!==d.value&&(d.value=et),c.defaultValue==null&&d.defaultValue!==et&&(d.defaultValue=et)),_e!=null&&(d.defaultValue=""+_e)}function jb(d){var c=d.textContent;c===d._wrapperState.initialValue&&c!==""&&c!==null&&(d.value=c)}function kb(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(d,c){return d==null||d==="http://www.w3.org/1999/xhtml"?kb(c):d==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var mb,nb=function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,et,_e,tt){MSApp.execUnsafeLocalFunction(function(){return d(c,et,_e,tt)})}:d}(function(d,c){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=c;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=mb.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;c.firstChild;)d.appendChild(c.firstChild)}});function ob(d,c){if(c){var et=d.firstChild;if(et&&et===d.lastChild&&et.nodeType===3){et.nodeValue=c;return}}d.textContent=c}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(d){qb.forEach(function(c){c=c+d.charAt(0).toUpperCase()+d.substring(1),pb[c]=pb[d]})});function rb(d,c,et){return c==null||typeof c=="boolean"||c===""?"":et||typeof c!="number"||c===0||pb.hasOwnProperty(d)&&pb[d]?(""+c).trim():c+"px"}function sb(d,c){d=d.style;for(var et in c)if(c.hasOwnProperty(et)){var _e=et.indexOf("--")===0,tt=rb(et,c[et],_e);et==="float"&&(et="cssFloat"),_e?d.setProperty(et,tt):d[et]=tt}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(d,c){if(c){if(tb[d]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(p$2(137,d));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(p$2(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(p$2(61))}if(c.style!=null&&typeof c.style!="object")throw Error(p$2(62))}}function vb(d,c){if(d.indexOf("-")===-1)return typeof c.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var yb=null,zb=null,Ab=null;function Bb(d){if(d=Cb(d)){if(typeof yb!="function")throw Error(p$2(280));var c=d.stateNode;c&&(c=Db(c),yb(d.stateNode,d.type,c))}}function Eb(d){zb?Ab?Ab.push(d):Ab=[d]:zb=d}function Fb(){if(zb){var d=zb,c=Ab;if(Ab=zb=null,Bb(d),c)for(d=0;d<c.length;d++)Bb(c[d])}}function Gb(d,c){return d(c)}function Hb(){}var Ib=!1;function Jb(d,c,et){if(Ib)return d(c,et);Ib=!0;try{return Gb(d,c,et)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(d,c){var et=d.stateNode;if(et===null)return null;var _e=Db(et);if(_e===null)return null;et=_e[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_e=!_e.disabled)||(d=d.type,_e=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!_e;break e;default:d=!1}if(d)return null;if(et&&typeof et!="function")throw Error(p$2(231,c,typeof et));return et}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(d,c,et,_e,tt,nt,rt,it,ot){var st=Array.prototype.slice.call(arguments,3);try{c.apply(et,st)}catch(at){this.onError(at)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(d){Ob=!0,Pb=d}};function Tb(d,c,et,_e,tt,nt,rt,it,ot){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(d,c,et,_e,tt,nt,rt,it,ot){if(Tb.apply(this,arguments),Ob){if(Ob){var st=Pb;Ob=!1,Pb=null}else throw Error(p$2(198));Qb||(Qb=!0,Rb=st)}}function Vb(d){var c=d,et=d;if(d.alternate)for(;c.return;)c=c.return;else{d=c;do c=d,c.flags&4098&&(et=c.return),d=c.return;while(d)}return c.tag===3?et:null}function Wb(d){if(d.tag===13){var c=d.memoizedState;if(c===null&&(d=d.alternate,d!==null&&(c=d.memoizedState)),c!==null)return c.dehydrated}return null}function Xb(d){if(Vb(d)!==d)throw Error(p$2(188))}function Yb(d){var c=d.alternate;if(!c){if(c=Vb(d),c===null)throw Error(p$2(188));return c!==d?null:d}for(var et=d,_e=c;;){var tt=et.return;if(tt===null)break;var nt=tt.alternate;if(nt===null){if(_e=tt.return,_e!==null){et=_e;continue}break}if(tt.child===nt.child){for(nt=tt.child;nt;){if(nt===et)return Xb(tt),d;if(nt===_e)return Xb(tt),c;nt=nt.sibling}throw Error(p$2(188))}if(et.return!==_e.return)et=tt,_e=nt;else{for(var rt=!1,it=tt.child;it;){if(it===et){rt=!0,et=tt,_e=nt;break}if(it===_e){rt=!0,_e=tt,et=nt;break}it=it.sibling}if(!rt){for(it=nt.child;it;){if(it===et){rt=!0,et=nt,_e=tt;break}if(it===_e){rt=!0,_e=nt,et=tt;break}it=it.sibling}if(!rt)throw Error(p$2(189))}}if(et.alternate!==_e)throw Error(p$2(190))}if(et.tag!==3)throw Error(p$2(188));return et.stateNode.current===et?d:c}function Zb(d){return d=Yb(d),d!==null?$b(d):null}function $b(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var c=$b(d);if(c!==null)return c;d=d.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(d){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,d,void 0,(d.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(d){return d>>>=0,d===0?32:31-(pc(d)/qc|0)|0}var rc=64,sc=4194304;function tc(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function uc(d,c){var et=d.pendingLanes;if(et===0)return 0;var _e=0,tt=d.suspendedLanes,nt=d.pingedLanes,rt=et&268435455;if(rt!==0){var it=rt&~tt;it!==0?_e=tc(it):(nt&=rt,nt!==0&&(_e=tc(nt)))}else rt=et&~tt,rt!==0?_e=tc(rt):nt!==0&&(_e=tc(nt));if(_e===0)return 0;if(c!==0&&c!==_e&&!(c&tt)&&(tt=_e&-_e,nt=c&-c,tt>=nt||tt===16&&(nt&4194240)!==0))return c;if(_e&4&&(_e|=et&16),c=d.entangledLanes,c!==0)for(d=d.entanglements,c&=_e;0<c;)et=31-oc(c),tt=1<<et,_e|=d[et],c&=~tt;return _e}function vc(d,c){switch(d){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(d,c){for(var et=d.suspendedLanes,_e=d.pingedLanes,tt=d.expirationTimes,nt=d.pendingLanes;0<nt;){var rt=31-oc(nt),it=1<<rt,ot=tt[rt];ot===-1?(!(it&et)||it&_e)&&(tt[rt]=vc(it,c)):ot<=c&&(d.expiredLanes|=it),nt&=~it}}function xc(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function yc(){var d=rc;return rc<<=1,!(rc&4194240)&&(rc=64),d}function zc(d){for(var c=[],et=0;31>et;et++)c.push(d);return c}function Ac(d,c,et){d.pendingLanes|=c,c!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,c=31-oc(c),d[c]=et}function Bc(d,c){var et=d.pendingLanes&~c;d.pendingLanes=c,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=c,d.mutableReadLanes&=c,d.entangledLanes&=c,c=d.entanglements;var _e=d.eventTimes;for(d=d.expirationTimes;0<et;){var tt=31-oc(et),nt=1<<tt;c[tt]=0,_e[tt]=-1,d[tt]=-1,et&=~nt}}function Cc(d,c){var et=d.entangledLanes|=c;for(d=d.entanglements;et;){var _e=31-oc(et),tt=1<<_e;tt&c|d[_e]&c&&(d[_e]|=c),et&=~tt}}var C$1=0;function Dc(d){return d&=-d,1<d?4<d?d&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(d,c){switch(d){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(c.pointerId)}}function Tc(d,c,et,_e,tt,nt){return d===null||d.nativeEvent!==nt?(d={blockedOn:c,domEventName:et,eventSystemFlags:_e,nativeEvent:nt,targetContainers:[tt]},c!==null&&(c=Cb(c),c!==null&&Fc(c)),d):(d.eventSystemFlags|=_e,c=d.targetContainers,tt!==null&&c.indexOf(tt)===-1&&c.push(tt),d)}function Uc(d,c,et,_e,tt){switch(c){case"focusin":return Lc=Tc(Lc,d,c,et,_e,tt),!0;case"dragenter":return Mc=Tc(Mc,d,c,et,_e,tt),!0;case"mouseover":return Nc=Tc(Nc,d,c,et,_e,tt),!0;case"pointerover":var nt=tt.pointerId;return Oc.set(nt,Tc(Oc.get(nt)||null,d,c,et,_e,tt)),!0;case"gotpointercapture":return nt=tt.pointerId,Pc.set(nt,Tc(Pc.get(nt)||null,d,c,et,_e,tt)),!0}return!1}function Vc(d){var c=Wc(d.target);if(c!==null){var et=Vb(c);if(et!==null){if(c=et.tag,c===13){if(c=Wb(et),c!==null){d.blockedOn=c,Ic(d.priority,function(){Gc(et)});return}}else if(c===3&&et.stateNode.current.memoizedState.isDehydrated){d.blockedOn=et.tag===3?et.stateNode.containerInfo:null;return}}}d.blockedOn=null}function Xc(d){if(d.blockedOn!==null)return!1;for(var c=d.targetContainers;0<c.length;){var et=Yc(d.domEventName,d.eventSystemFlags,c[0],d.nativeEvent);if(et===null){et=d.nativeEvent;var _e=new et.constructor(et.type,et);wb=_e,et.target.dispatchEvent(_e),wb=null}else return c=Cb(et),c!==null&&Fc(c),d.blockedOn=et,!1;c.shift()}return!0}function Zc(d,c,et){Xc(d)&&et.delete(c)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(d,c){d.blockedOn===c&&(d.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(d){function c(tt){return ad(tt,d)}if(0<Kc.length){ad(Kc[0],d);for(var et=1;et<Kc.length;et++){var _e=Kc[et];_e.blockedOn===d&&(_e.blockedOn=null)}}for(Lc!==null&&ad(Lc,d),Mc!==null&&ad(Mc,d),Nc!==null&&ad(Nc,d),Oc.forEach(c),Pc.forEach(c),et=0;et<Qc.length;et++)_e=Qc[et],_e.blockedOn===d&&(_e.blockedOn=null);for(;0<Qc.length&&(et=Qc[0],et.blockedOn===null);)Vc(et),et.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(d,c,et,_e){var tt=C$1,nt=cd.transition;cd.transition=null;try{C$1=1,fd(d,c,et,_e)}finally{C$1=tt,cd.transition=nt}}function gd(d,c,et,_e){var tt=C$1,nt=cd.transition;cd.transition=null;try{C$1=4,fd(d,c,et,_e)}finally{C$1=tt,cd.transition=nt}}function fd(d,c,et,_e){if(dd){var tt=Yc(d,c,et,_e);if(tt===null)hd(d,c,_e,id,et),Sc(d,_e);else if(Uc(tt,d,c,et,_e))_e.stopPropagation();else if(Sc(d,_e),c&4&&-1<Rc.indexOf(d)){for(;tt!==null;){var nt=Cb(tt);if(nt!==null&&Ec(nt),nt=Yc(d,c,et,_e),nt===null&&hd(d,c,_e,id,et),nt===tt)break;tt=nt}tt!==null&&_e.stopPropagation()}else hd(d,c,_e,null,et)}}var id=null;function Yc(d,c,et,_e){if(id=null,d=xb(_e),d=Wc(d),d!==null)if(c=Vb(d),c===null)d=null;else if(et=c.tag,et===13){if(d=Wb(c),d!==null)return d;d=null}else if(et===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;d=null}else c!==d&&(d=null);return id=d,null}function jd(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var d,c=ld,et=c.length,_e,tt="value"in kd?kd.value:kd.textContent,nt=tt.length;for(d=0;d<et&&c[d]===tt[d];d++);var rt=et-d;for(_e=1;_e<=rt&&c[et-_e]===tt[nt-_e];_e++);return md=tt.slice(d,1<_e?1-_e:void 0)}function od(d){var c=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&c===13&&(d=13)):d=c,d===10&&(d=13),32<=d||d===13?d:0}function pd(){return!0}function qd(){return!1}function rd(d){function c(et,_e,tt,nt,rt){this._reactName=et,this._targetInst=tt,this.type=_e,this.nativeEvent=nt,this.target=rt,this.currentTarget=null;for(var it in d)d.hasOwnProperty(it)&&(et=d[it],this[it]=et?et(nt):nt[it]);return this.isDefaultPrevented=(nt.defaultPrevented!=null?nt.defaultPrevented:nt.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var et=this.nativeEvent;et&&(et.preventDefault?et.preventDefault():typeof et.returnValue!="unknown"&&(et.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var et=this.nativeEvent;et&&(et.stopPropagation?et.stopPropagation():typeof et.cancelBubble!="unknown"&&(et.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),c}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==yd&&(yd&&d.type==="mousemove"?(wd=d.screenX-yd.screenX,xd=d.screenY-yd.screenY):xd=wd=0,yd=d),wd)},movementY:function(d){return"movementY"in d?d.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(d){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(d):(d=Od[d])?!!c[d]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(d){if(d.key){var c=Md[d.key]||d.key;if(c!=="Unidentified")return c}return d.type==="keypress"?(d=od(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Nd[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(d){return d.type==="keypress"?od(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?od(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be,de=ia&&(!ae$1||be&&8<be&&11>=be),ee$1=" ",fe$1=!1;function ge(d,c){switch(d){case"keyup":return $d.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var ie$1=!1;function je(d,c){switch(d){case"compositionend":return he$1(c);case"keypress":return c.which!==32?null:(fe$1=!0,ee$1);case"textInput":return d=c.data,d===ee$1&&fe$1?null:d;default:return null}}function ke(d,c){if(ie$1)return d==="compositionend"||!ae$1&&ge(d,c)?(d=nd(),md=ld=kd=null,ie$1=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return de&&c.locale!=="ko"?null:c.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(d){var c=d&&d.nodeName&&d.nodeName.toLowerCase();return c==="input"?!!le$1[d.type]:c==="textarea"}function ne$1(d,c,et,_e){Eb(_e),c=oe$1(c,"onChange"),0<c.length&&(et=new td("onChange","change",null,et,_e),d.push({event:et,listeners:c}))}var pe$1=null,qe=null;function re$1(d){se$1(d,0)}function te$1(d){var c=ue$1(d);if(Wa(c))return d}function ve(d,c){if(d==="change")return c}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe$1&&(pe$1.detachEvent("onpropertychange",Be),qe=pe$1=null)}function Be(d){if(d.propertyName==="value"&&te$1(qe)){var c=[];ne$1(c,qe,d,xb(d)),Jb(re$1,c)}}function Ce(d,c,et){d==="focusin"?(Ae(),pe$1=c,qe=et,pe$1.attachEvent("onpropertychange",Be)):d==="focusout"&&Ae()}function De(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return te$1(qe)}function Ee(d,c){if(d==="click")return te$1(c)}function Fe(d,c){if(d==="input"||d==="change")return te$1(c)}function Ge(d,c){return d===c&&(d!==0||1/d===1/c)||d!==d&&c!==c}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(d,c){if(He(d,c))return!0;if(typeof d!="object"||d===null||typeof c!="object"||c===null)return!1;var et=Object.keys(d),_e=Object.keys(c);if(et.length!==_e.length)return!1;for(_e=0;_e<et.length;_e++){var tt=et[_e];if(!ja.call(c,tt)||!He(d[tt],c[tt]))return!1}return!0}function Je(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function Ke(d,c){var et=Je(d);d=0;for(var _e;et;){if(et.nodeType===3){if(_e=d+et.textContent.length,d<=c&&_e>=c)return{node:et,offset:c-d};d=_e}e:{for(;et;){if(et.nextSibling){et=et.nextSibling;break e}et=et.parentNode}et=void 0}et=Je(et)}}function Le(d,c){return d&&c?d===c?!0:d&&d.nodeType===3?!1:c&&c.nodeType===3?Le(d,c.parentNode):"contains"in d?d.contains(c):d.compareDocumentPosition?!!(d.compareDocumentPosition(c)&16):!1:!1}function Me(){for(var d=window,c=Xa();c instanceof d.HTMLIFrameElement;){try{var et=typeof c.contentWindow.location.href=="string"}catch{et=!1}if(et)d=c.contentWindow;else break;c=Xa(d.document)}return c}function Ne(d){var c=d&&d.nodeName&&d.nodeName.toLowerCase();return c&&(c==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||c==="textarea"||d.contentEditable==="true")}function Oe(d){var c=Me(),et=d.focusedElem,_e=d.selectionRange;if(c!==et&&et&&et.ownerDocument&&Le(et.ownerDocument.documentElement,et)){if(_e!==null&&Ne(et)){if(c=_e.start,d=_e.end,d===void 0&&(d=c),"selectionStart"in et)et.selectionStart=c,et.selectionEnd=Math.min(d,et.value.length);else if(d=(c=et.ownerDocument||document)&&c.defaultView||window,d.getSelection){d=d.getSelection();var tt=et.textContent.length,nt=Math.min(_e.start,tt);_e=_e.end===void 0?nt:Math.min(_e.end,tt),!d.extend&&nt>_e&&(tt=_e,_e=nt,nt=tt),tt=Ke(et,nt);var rt=Ke(et,_e);tt&&rt&&(d.rangeCount!==1||d.anchorNode!==tt.node||d.anchorOffset!==tt.offset||d.focusNode!==rt.node||d.focusOffset!==rt.offset)&&(c=c.createRange(),c.setStart(tt.node,tt.offset),d.removeAllRanges(),nt>_e?(d.addRange(c),d.extend(rt.node,rt.offset)):(c.setEnd(rt.node,rt.offset),d.addRange(c)))}}for(c=[],d=et;d=d.parentNode;)d.nodeType===1&&c.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof et.focus=="function"&&et.focus(),et=0;et<c.length;et++)d=c[et],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(d,c,et){var _e=et.window===et?et.document:et.nodeType===9?et:et.ownerDocument;Te||Qe==null||Qe!==Xa(_e)||(_e=Qe,"selectionStart"in _e&&Ne(_e)?_e={start:_e.selectionStart,end:_e.selectionEnd}:(_e=(_e.ownerDocument&&_e.ownerDocument.defaultView||window).getSelection(),_e={anchorNode:_e.anchorNode,anchorOffset:_e.anchorOffset,focusNode:_e.focusNode,focusOffset:_e.focusOffset}),Se&&Ie(Se,_e)||(Se=_e,_e=oe$1(Re,"onSelect"),0<_e.length&&(c=new td("onSelect","select",null,c,et),d.push({event:c,listeners:_e}),c.target=Qe)))}function Ve(d,c){var et={};return et[d.toLowerCase()]=c.toLowerCase(),et["Webkit"+d]="webkit"+c,et["Moz"+d]="moz"+c,et}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(d){if(Xe[d])return Xe[d];if(!We[d])return d;var c=We[d],et;for(et in c)if(c.hasOwnProperty(et)&&et in Ye)return Xe[d]=c[et];return d}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(d,c){df.set(d,c),fa(c,[d])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(d,c,et){var _e=d.type||"unknown-event";d.currentTarget=et,Ub(_e,c,void 0,d),d.currentTarget=null}function se$1(d,c){c=(c&4)!==0;for(var et=0;et<d.length;et++){var _e=d[et],tt=_e.event;_e=_e.listeners;e:{var nt=void 0;if(c)for(var rt=_e.length-1;0<=rt;rt--){var it=_e[rt],ot=it.instance,st=it.currentTarget;if(it=it.listener,ot!==nt&&tt.isPropagationStopped())break e;nf(tt,it,st),nt=ot}else for(rt=0;rt<_e.length;rt++){if(it=_e[rt],ot=it.instance,st=it.currentTarget,it=it.listener,ot!==nt&&tt.isPropagationStopped())break e;nf(tt,it,st),nt=ot}}}if(Qb)throw d=Rb,Qb=!1,Rb=null,d}function D$1(d,c){var et=c[of];et===void 0&&(et=c[of]=new Set);var _e=d+"__bubble";et.has(_e)||(pf(c,d,2,!1),et.add(_e))}function qf(d,c,et){var _e=0;c&&(_e|=4),pf(et,d,_e,c)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(d){if(!d[rf]){d[rf]=!0,da.forEach(function(et){et!=="selectionchange"&&(mf.has(et)||qf(et,!1,d),qf(et,!0,d))});var c=d.nodeType===9?d:d.ownerDocument;c===null||c[rf]||(c[rf]=!0,qf("selectionchange",!1,c))}}function pf(d,c,et,_e){switch(jd(c)){case 1:var tt=ed;break;case 4:tt=gd;break;default:tt=fd}et=tt.bind(null,c,et,d),tt=void 0,!Lb||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(tt=!0),_e?tt!==void 0?d.addEventListener(c,et,{capture:!0,passive:tt}):d.addEventListener(c,et,!0):tt!==void 0?d.addEventListener(c,et,{passive:tt}):d.addEventListener(c,et,!1)}function hd(d,c,et,_e,tt){var nt=_e;if(!(c&1)&&!(c&2)&&_e!==null)e:for(;;){if(_e===null)return;var rt=_e.tag;if(rt===3||rt===4){var it=_e.stateNode.containerInfo;if(it===tt||it.nodeType===8&&it.parentNode===tt)break;if(rt===4)for(rt=_e.return;rt!==null;){var ot=rt.tag;if((ot===3||ot===4)&&(ot=rt.stateNode.containerInfo,ot===tt||ot.nodeType===8&&ot.parentNode===tt))return;rt=rt.return}for(;it!==null;){if(rt=Wc(it),rt===null)return;if(ot=rt.tag,ot===5||ot===6){_e=nt=rt;continue e}it=it.parentNode}}_e=_e.return}Jb(function(){var st=nt,at=xb(et),lt=[];e:{var ct=df.get(d);if(ct!==void 0){var ut=td,dt=d;switch(d){case"keypress":if(od(et)===0)break e;case"keydown":case"keyup":ut=Rd;break;case"focusin":dt="focus",ut=Fd;break;case"focusout":dt="blur",ut=Fd;break;case"beforeblur":case"afterblur":ut=Fd;break;case"click":if(et.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ut=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ut=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ut=Vd;break;case $e:case af:case bf:ut=Hd;break;case cf:ut=Xd;break;case"scroll":ut=vd;break;case"wheel":ut=Zd;break;case"copy":case"cut":case"paste":ut=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ut=Td}var ht=(c&4)!==0,yt=!ht&&d==="scroll",gt=ht?ct!==null?ct+"Capture":null:ct;ht=[];for(var ft=st,mt;ft!==null;){mt=ft;var pt=mt.stateNode;if(mt.tag===5&&pt!==null&&(mt=pt,gt!==null&&(pt=Kb(ft,gt),pt!=null&&ht.push(tf(ft,pt,mt)))),yt)break;ft=ft.return}0<ht.length&&(ct=new ut(ct,dt,null,et,at),lt.push({event:ct,listeners:ht}))}}if(!(c&7)){e:{if(ct=d==="mouseover"||d==="pointerover",ut=d==="mouseout"||d==="pointerout",ct&&et!==wb&&(dt=et.relatedTarget||et.fromElement)&&(Wc(dt)||dt[uf]))break e;if((ut||ct)&&(ct=at.window===at?at:(ct=at.ownerDocument)?ct.defaultView||ct.parentWindow:window,ut?(dt=et.relatedTarget||et.toElement,ut=st,dt=dt?Wc(dt):null,dt!==null&&(yt=Vb(dt),dt!==yt||dt.tag!==5&&dt.tag!==6)&&(dt=null)):(ut=null,dt=st),ut!==dt)){if(ht=Bd,pt="onMouseLeave",gt="onMouseEnter",ft="mouse",(d==="pointerout"||d==="pointerover")&&(ht=Td,pt="onPointerLeave",gt="onPointerEnter",ft="pointer"),yt=ut==null?ct:ue$1(ut),mt=dt==null?ct:ue$1(dt),ct=new ht(pt,ft+"leave",ut,et,at),ct.target=yt,ct.relatedTarget=mt,pt=null,Wc(at)===st&&(ht=new ht(gt,ft+"enter",dt,et,at),ht.target=mt,ht.relatedTarget=yt,pt=ht),yt=pt,ut&&dt)t:{for(ht=ut,gt=dt,ft=0,mt=ht;mt;mt=vf(mt))ft++;for(mt=0,pt=gt;pt;pt=vf(pt))mt++;for(;0<ft-mt;)ht=vf(ht),ft--;for(;0<mt-ft;)gt=vf(gt),mt--;for(;ft--;){if(ht===gt||gt!==null&&ht===gt.alternate)break t;ht=vf(ht),gt=vf(gt)}ht=null}else ht=null;ut!==null&&wf(lt,ct,ut,ht,!1),dt!==null&&yt!==null&&wf(lt,yt,dt,ht,!0)}}e:{if(ct=st?ue$1(st):window,ut=ct.nodeName&&ct.nodeName.toLowerCase(),ut==="select"||ut==="input"&&ct.type==="file")var xt=ve;else if(me(ct))if(we)xt=Fe;else{xt=De;var vt=Ce}else(ut=ct.nodeName)&&ut.toLowerCase()==="input"&&(ct.type==="checkbox"||ct.type==="radio")&&(xt=Ee);if(xt&&(xt=xt(d,st))){ne$1(lt,xt,et,at);break e}vt&&vt(d,ct,st),d==="focusout"&&(vt=ct._wrapperState)&&vt.controlled&&ct.type==="number"&&cb(ct,"number",ct.value)}switch(vt=st?ue$1(st):window,d){case"focusin":(me(vt)||vt.contentEditable==="true")&&(Qe=vt,Re=st,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(lt,et,at);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(lt,et,at)}var Et;if(ae$1)e:{switch(d){case"compositionstart":var _t="onCompositionStart";break e;case"compositionend":_t="onCompositionEnd";break e;case"compositionupdate":_t="onCompositionUpdate";break e}_t=void 0}else ie$1?ge(d,et)&&(_t="onCompositionEnd"):d==="keydown"&&et.keyCode===229&&(_t="onCompositionStart");_t&&(de&&et.locale!=="ko"&&(ie$1||_t!=="onCompositionStart"?_t==="onCompositionEnd"&&ie$1&&(Et=nd()):(kd=at,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),vt=oe$1(st,_t),0<vt.length&&(_t=new Ld(_t,d,null,et,at),lt.push({event:_t,listeners:vt}),Et?_t.data=Et:(Et=he$1(et),Et!==null&&(_t.data=Et)))),(Et=ce$1?je(d,et):ke(d,et))&&(st=oe$1(st,"onBeforeInput"),0<st.length&&(at=new Ld("onBeforeInput","beforeinput",null,et,at),lt.push({event:at,listeners:st}),at.data=Et))}se$1(lt,c)})}function tf(d,c,et){return{instance:d,listener:c,currentTarget:et}}function oe$1(d,c){for(var et=c+"Capture",_e=[];d!==null;){var tt=d,nt=tt.stateNode;tt.tag===5&&nt!==null&&(tt=nt,nt=Kb(d,et),nt!=null&&_e.unshift(tf(d,nt,tt)),nt=Kb(d,c),nt!=null&&_e.push(tf(d,nt,tt))),d=d.return}return _e}function vf(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function wf(d,c,et,_e,tt){for(var nt=c._reactName,rt=[];et!==null&&et!==_e;){var it=et,ot=it.alternate,st=it.stateNode;if(ot!==null&&ot===_e)break;it.tag===5&&st!==null&&(it=st,tt?(ot=Kb(et,nt),ot!=null&&rt.unshift(tf(et,ot,it))):tt||(ot=Kb(et,nt),ot!=null&&rt.push(tf(et,ot,it)))),et=et.return}rt.length!==0&&d.push({event:c,listeners:rt})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(d){return(typeof d=="string"?d:""+d).replace(xf,`
`).replace(yf,"")}function Af(d,c,et){if(c=zf(c),zf(d)!==c&&et)throw Error(p$2(425))}function Bf(){}var Cf=null,Df=null;function Ef(d,c){return d==="textarea"||d==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(d){return Hf.resolve(null).then(d).catch(If)}:Ff;function If(d){setTimeout(function(){throw d})}function Kf(d,c){var et=c,_e=0;do{var tt=et.nextSibling;if(d.removeChild(et),tt&&tt.nodeType===8)if(et=tt.data,et==="/$"){if(_e===0){d.removeChild(tt),bd(c);return}_e--}else et!=="$"&&et!=="$?"&&et!=="$!"||_e++;et=tt}while(et);bd(c)}function Lf(d){for(;d!=null;d=d.nextSibling){var c=d.nodeType;if(c===1||c===3)break;if(c===8){if(c=d.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return d}function Mf(d){d=d.previousSibling;for(var c=0;d;){if(d.nodeType===8){var et=d.data;if(et==="$"||et==="$!"||et==="$?"){if(c===0)return d;c--}else et==="/$"&&c++}d=d.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(d){var c=d[Of];if(c)return c;for(var et=d.parentNode;et;){if(c=et[uf]||et[Of]){if(et=c.alternate,c.child!==null||et!==null&&et.child!==null)for(d=Mf(d);d!==null;){if(et=d[Of])return et;d=Mf(d)}return c}d=et,et=d.parentNode}return null}function Cb(d){return d=d[Of]||d[uf],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function ue$1(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(p$2(33))}function Db(d){return d[Pf]||null}var Sf=[],Tf=-1;function Uf(d){return{current:d}}function E$1(d){0>Tf||(d.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(d,c){Tf++,Sf[Tf]=d.current,d.current=c}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(d,c){var et=d.type.contextTypes;if(!et)return Vf;var _e=d.stateNode;if(_e&&_e.__reactInternalMemoizedUnmaskedChildContext===c)return _e.__reactInternalMemoizedMaskedChildContext;var tt={},nt;for(nt in et)tt[nt]=c[nt];return _e&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=c,d.__reactInternalMemoizedMaskedChildContext=tt),tt}function Zf(d){return d=d.childContextTypes,d!=null}function $f(){E$1(Wf),E$1(H$1)}function ag(d,c,et){if(H$1.current!==Vf)throw Error(p$2(168));G$1(H$1,c),G$1(Wf,et)}function bg(d,c,et){var _e=d.stateNode;if(c=c.childContextTypes,typeof _e.getChildContext!="function")return et;_e=_e.getChildContext();for(var tt in _e)if(!(tt in c))throw Error(p$2(108,Ra(d)||"Unknown",tt));return A$1({},et,_e)}function cg(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G$1(H$1,d),G$1(Wf,Wf.current),!0}function dg(d,c,et){var _e=d.stateNode;if(!_e)throw Error(p$2(169));et?(d=bg(d,c,Xf),_e.__reactInternalMemoizedMergedChildContext=d,E$1(Wf),E$1(H$1),G$1(H$1,d)):E$1(Wf),G$1(Wf,et)}var eg=null,fg=!1,gg=!1;function hg(d){eg===null?eg=[d]:eg.push(d)}function ig(d){fg=!0,hg(d)}function jg(){if(!gg&&eg!==null){gg=!0;var d=0,c=C$1;try{var et=eg;for(C$1=1;d<et.length;d++){var _e=et[d];do _e=_e(!0);while(_e!==null)}eg=null,fg=!1}catch(tt){throw eg!==null&&(eg=eg.slice(d+1)),ac(fc,jg),tt}finally{C$1=c,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(d,c){kg[lg++]=ng,kg[lg++]=mg,mg=d,ng=c}function ug(d,c,et){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=d;var _e=rg;d=sg;var tt=32-oc(_e)-1;_e&=~(1<<tt),et+=1;var nt=32-oc(c)+tt;if(30<nt){var rt=tt-tt%5;nt=(_e&(1<<rt)-1).toString(32),_e>>=rt,tt-=rt,rg=1<<32-oc(c)+tt|et<<tt|_e,sg=nt+d}else rg=1<<nt|et<<tt|_e,sg=d}function vg(d){d.return!==null&&(tg(d,1),ug(d,1,0))}function wg(d){for(;d===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;d===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(d,c){var et=Bg(5,null,null,0);et.elementType="DELETED",et.stateNode=c,et.return=d,c=d.deletions,c===null?(d.deletions=[et],d.flags|=16):c.push(et)}function Cg(d,c){switch(d.tag){case 5:var et=d.type;return c=c.nodeType!==1||et.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(d.stateNode=c,xg=d,yg=Lf(c.firstChild),!0):!1;case 6:return c=d.pendingProps===""||c.nodeType!==3?null:c,c!==null?(d.stateNode=c,xg=d,yg=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(et=qg!==null?{id:rg,overflow:sg}:null,d.memoizedState={dehydrated:c,treeContext:et,retryLane:1073741824},et=Bg(18,null,null,0),et.stateNode=c,et.return=d,d.child=et,xg=d,yg=null,!0):!1;default:return!1}}function Dg(d){return(d.mode&1)!==0&&(d.flags&128)===0}function Eg(d){if(I$1){var c=yg;if(c){var et=c;if(!Cg(d,c)){if(Dg(d))throw Error(p$2(418));c=Lf(et.nextSibling);var _e=xg;c&&Cg(d,c)?Ag(_e,et):(d.flags=d.flags&-4097|2,I$1=!1,xg=d)}}else{if(Dg(d))throw Error(p$2(418));d.flags=d.flags&-4097|2,I$1=!1,xg=d}}}function Fg(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;xg=d}function Gg(d){if(d!==xg)return!1;if(!I$1)return Fg(d),I$1=!0,!1;var c;if((c=d.tag!==3)&&!(c=d.tag!==5)&&(c=d.type,c=c!=="head"&&c!=="body"&&!Ef(d.type,d.memoizedProps)),c&&(c=yg)){if(Dg(d))throw Hg(),Error(p$2(418));for(;c;)Ag(d,c),c=Lf(c.nextSibling)}if(Fg(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(p$2(317));e:{for(d=d.nextSibling,c=0;d;){if(d.nodeType===8){var et=d.data;if(et==="/$"){if(c===0){yg=Lf(d.nextSibling);break e}c--}else et!=="$"&&et!=="$!"&&et!=="$?"||c++}d=d.nextSibling}yg=null}}else yg=xg?Lf(d.stateNode.nextSibling):null;return!0}function Hg(){for(var d=yg;d;)d=Lf(d.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(d){zg===null?zg=[d]:zg.push(d)}var Kg=ua.ReactCurrentBatchConfig;function Lg(d,c){if(d&&d.defaultProps){c=A$1({},c),d=d.defaultProps;for(var et in d)c[et]===void 0&&(c[et]=d[et]);return c}return c}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(d){var c=Mg.current;E$1(Mg),d._currentValue=c}function Sg(d,c,et){for(;d!==null;){var _e=d.alternate;if((d.childLanes&c)!==c?(d.childLanes|=c,_e!==null&&(_e.childLanes|=c)):_e!==null&&(_e.childLanes&c)!==c&&(_e.childLanes|=c),d===et)break;d=d.return}}function Tg(d,c){Ng=d,Pg=Og=null,d=d.dependencies,d!==null&&d.firstContext!==null&&(d.lanes&c&&(Ug=!0),d.firstContext=null)}function Vg(d){var c=d._currentValue;if(Pg!==d)if(d={context:d,memoizedValue:c,next:null},Og===null){if(Ng===null)throw Error(p$2(308));Og=d,Ng.dependencies={lanes:0,firstContext:d}}else Og=Og.next=d;return c}var Wg=null;function Xg(d){Wg===null?Wg=[d]:Wg.push(d)}function Yg(d,c,et,_e){var tt=c.interleaved;return tt===null?(et.next=et,Xg(c)):(et.next=tt.next,tt.next=et),c.interleaved=et,Zg(d,_e)}function Zg(d,c){d.lanes|=c;var et=d.alternate;for(et!==null&&(et.lanes|=c),et=d,d=d.return;d!==null;)d.childLanes|=c,et=d.alternate,et!==null&&(et.childLanes|=c),et=d,d=d.return;return et.tag===3?et.stateNode:null}var $g=!1;function ah(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(d,c){d=d.updateQueue,c.updateQueue===d&&(c.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function ch(d,c){return{eventTime:d,lane:c,tag:0,payload:null,callback:null,next:null}}function dh(d,c,et){var _e=d.updateQueue;if(_e===null)return null;if(_e=_e.shared,K$1&2){var tt=_e.pending;return tt===null?c.next=c:(c.next=tt.next,tt.next=c),_e.pending=c,Zg(d,et)}return tt=_e.interleaved,tt===null?(c.next=c,Xg(_e)):(c.next=tt.next,tt.next=c),_e.interleaved=c,Zg(d,et)}function eh(d,c,et){if(c=c.updateQueue,c!==null&&(c=c.shared,(et&4194240)!==0)){var _e=c.lanes;_e&=d.pendingLanes,et|=_e,c.lanes=et,Cc(d,et)}}function fh(d,c){var et=d.updateQueue,_e=d.alternate;if(_e!==null&&(_e=_e.updateQueue,et===_e)){var tt=null,nt=null;if(et=et.firstBaseUpdate,et!==null){do{var rt={eventTime:et.eventTime,lane:et.lane,tag:et.tag,payload:et.payload,callback:et.callback,next:null};nt===null?tt=nt=rt:nt=nt.next=rt,et=et.next}while(et!==null);nt===null?tt=nt=c:nt=nt.next=c}else tt=nt=c;et={baseState:_e.baseState,firstBaseUpdate:tt,lastBaseUpdate:nt,shared:_e.shared,effects:_e.effects},d.updateQueue=et;return}d=et.lastBaseUpdate,d===null?et.firstBaseUpdate=c:d.next=c,et.lastBaseUpdate=c}function gh(d,c,et,_e){var tt=d.updateQueue;$g=!1;var nt=tt.firstBaseUpdate,rt=tt.lastBaseUpdate,it=tt.shared.pending;if(it!==null){tt.shared.pending=null;var ot=it,st=ot.next;ot.next=null,rt===null?nt=st:rt.next=st,rt=ot;var at=d.alternate;at!==null&&(at=at.updateQueue,it=at.lastBaseUpdate,it!==rt&&(it===null?at.firstBaseUpdate=st:it.next=st,at.lastBaseUpdate=ot))}if(nt!==null){var lt=tt.baseState;rt=0,at=st=ot=null,it=nt;do{var ct=it.lane,ut=it.eventTime;if((_e&ct)===ct){at!==null&&(at=at.next={eventTime:ut,lane:0,tag:it.tag,payload:it.payload,callback:it.callback,next:null});e:{var dt=d,ht=it;switch(ct=c,ut=et,ht.tag){case 1:if(dt=ht.payload,typeof dt=="function"){lt=dt.call(ut,lt,ct);break e}lt=dt;break e;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=ht.payload,ct=typeof dt=="function"?dt.call(ut,lt,ct):dt,ct==null)break e;lt=A$1({},lt,ct);break e;case 2:$g=!0}}it.callback!==null&&it.lane!==0&&(d.flags|=64,ct=tt.effects,ct===null?tt.effects=[it]:ct.push(it))}else ut={eventTime:ut,lane:ct,tag:it.tag,payload:it.payload,callback:it.callback,next:null},at===null?(st=at=ut,ot=lt):at=at.next=ut,rt|=ct;if(it=it.next,it===null){if(it=tt.shared.pending,it===null)break;ct=it,it=ct.next,ct.next=null,tt.lastBaseUpdate=ct,tt.shared.pending=null}}while(!0);if(at===null&&(ot=lt),tt.baseState=ot,tt.firstBaseUpdate=st,tt.lastBaseUpdate=at,c=tt.shared.interleaved,c!==null){tt=c;do rt|=tt.lane,tt=tt.next;while(tt!==c)}else nt===null&&(tt.shared.lanes=0);hh|=rt,d.lanes=rt,d.memoizedState=lt}}function ih(d,c,et){if(d=c.effects,c.effects=null,d!==null)for(c=0;c<d.length;c++){var _e=d[c],tt=_e.callback;if(tt!==null){if(_e.callback=null,_e=et,typeof tt!="function")throw Error(p$2(191,tt));tt.call(_e)}}}var jh=new aa.Component().refs;function kh(d,c,et,_e){c=d.memoizedState,et=et(_e,c),et=et==null?c:A$1({},c,et),d.memoizedState=et,d.lanes===0&&(d.updateQueue.baseState=et)}var nh={isMounted:function(d){return(d=d._reactInternals)?Vb(d)===d:!1},enqueueSetState:function(d,c,et){d=d._reactInternals;var _e=L$1(),tt=lh(d),nt=ch(_e,tt);nt.payload=c,et!=null&&(nt.callback=et),c=dh(d,nt,tt),c!==null&&(mh(c,d,tt,_e),eh(c,d,tt))},enqueueReplaceState:function(d,c,et){d=d._reactInternals;var _e=L$1(),tt=lh(d),nt=ch(_e,tt);nt.tag=1,nt.payload=c,et!=null&&(nt.callback=et),c=dh(d,nt,tt),c!==null&&(mh(c,d,tt,_e),eh(c,d,tt))},enqueueForceUpdate:function(d,c){d=d._reactInternals;var et=L$1(),_e=lh(d),tt=ch(et,_e);tt.tag=2,c!=null&&(tt.callback=c),c=dh(d,tt,_e),c!==null&&(mh(c,d,_e,et),eh(c,d,_e))}};function oh(d,c,et,_e,tt,nt,rt){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(_e,nt,rt):c.prototype&&c.prototype.isPureReactComponent?!Ie(et,_e)||!Ie(tt,nt):!0}function ph(d,c,et){var _e=!1,tt=Vf,nt=c.contextType;return typeof nt=="object"&&nt!==null?nt=Vg(nt):(tt=Zf(c)?Xf:H$1.current,_e=c.contextTypes,nt=(_e=_e!=null)?Yf(d,tt):Vf),c=new c(et,nt),d.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=nh,d.stateNode=c,c._reactInternals=d,_e&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=tt,d.__reactInternalMemoizedMaskedChildContext=nt),c}function qh(d,c,et,_e){d=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(et,_e),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(et,_e),c.state!==d&&nh.enqueueReplaceState(c,c.state,null)}function rh(d,c,et,_e){var tt=d.stateNode;tt.props=et,tt.state=d.memoizedState,tt.refs=jh,ah(d);var nt=c.contextType;typeof nt=="object"&&nt!==null?tt.context=Vg(nt):(nt=Zf(c)?Xf:H$1.current,tt.context=Yf(d,nt)),tt.state=d.memoizedState,nt=c.getDerivedStateFromProps,typeof nt=="function"&&(kh(d,c,nt,et),tt.state=d.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof tt.getSnapshotBeforeUpdate=="function"||typeof tt.UNSAFE_componentWillMount!="function"&&typeof tt.componentWillMount!="function"||(c=tt.state,typeof tt.componentWillMount=="function"&&tt.componentWillMount(),typeof tt.UNSAFE_componentWillMount=="function"&&tt.UNSAFE_componentWillMount(),c!==tt.state&&nh.enqueueReplaceState(tt,tt.state,null),gh(d,et,tt,_e),tt.state=d.memoizedState),typeof tt.componentDidMount=="function"&&(d.flags|=4194308)}function sh(d,c,et){if(d=et.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(et._owner){if(et=et._owner,et){if(et.tag!==1)throw Error(p$2(309));var _e=et.stateNode}if(!_e)throw Error(p$2(147,d));var tt=_e,nt=""+d;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===nt?c.ref:(c=function(rt){var it=tt.refs;it===jh&&(it=tt.refs={}),rt===null?delete it[nt]:it[nt]=rt},c._stringRef=nt,c)}if(typeof d!="string")throw Error(p$2(284));if(!et._owner)throw Error(p$2(290,d))}return d}function th(d,c){throw d=Object.prototype.toString.call(c),Error(p$2(31,d==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":d))}function uh(d){var c=d._init;return c(d._payload)}function vh(d){function c(gt,ft){if(d){var mt=gt.deletions;mt===null?(gt.deletions=[ft],gt.flags|=16):mt.push(ft)}}function et(gt,ft){if(!d)return null;for(;ft!==null;)c(gt,ft),ft=ft.sibling;return null}function _e(gt,ft){for(gt=new Map;ft!==null;)ft.key!==null?gt.set(ft.key,ft):gt.set(ft.index,ft),ft=ft.sibling;return gt}function tt(gt,ft){return gt=wh(gt,ft),gt.index=0,gt.sibling=null,gt}function nt(gt,ft,mt){return gt.index=mt,d?(mt=gt.alternate,mt!==null?(mt=mt.index,mt<ft?(gt.flags|=2,ft):mt):(gt.flags|=2,ft)):(gt.flags|=1048576,ft)}function rt(gt){return d&&gt.alternate===null&&(gt.flags|=2),gt}function it(gt,ft,mt,pt){return ft===null||ft.tag!==6?(ft=xh(mt,gt.mode,pt),ft.return=gt,ft):(ft=tt(ft,mt),ft.return=gt,ft)}function ot(gt,ft,mt,pt){var xt=mt.type;return xt===ya?at(gt,ft,mt.props.children,pt,mt.key):ft!==null&&(ft.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===Ha&&uh(xt)===ft.type)?(pt=tt(ft,mt.props),pt.ref=sh(gt,ft,mt),pt.return=gt,pt):(pt=yh(mt.type,mt.key,mt.props,null,gt.mode,pt),pt.ref=sh(gt,ft,mt),pt.return=gt,pt)}function st(gt,ft,mt,pt){return ft===null||ft.tag!==4||ft.stateNode.containerInfo!==mt.containerInfo||ft.stateNode.implementation!==mt.implementation?(ft=zh(mt,gt.mode,pt),ft.return=gt,ft):(ft=tt(ft,mt.children||[]),ft.return=gt,ft)}function at(gt,ft,mt,pt,xt){return ft===null||ft.tag!==7?(ft=Ah(mt,gt.mode,pt,xt),ft.return=gt,ft):(ft=tt(ft,mt),ft.return=gt,ft)}function lt(gt,ft,mt){if(typeof ft=="string"&&ft!==""||typeof ft=="number")return ft=xh(""+ft,gt.mode,mt),ft.return=gt,ft;if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case va:return mt=yh(ft.type,ft.key,ft.props,null,gt.mode,mt),mt.ref=sh(gt,null,ft),mt.return=gt,mt;case wa:return ft=zh(ft,gt.mode,mt),ft.return=gt,ft;case Ha:var pt=ft._init;return lt(gt,pt(ft._payload),mt)}if(eb(ft)||Ka(ft))return ft=Ah(ft,gt.mode,mt,null),ft.return=gt,ft;th(gt,ft)}return null}function ct(gt,ft,mt,pt){var xt=ft!==null?ft.key:null;if(typeof mt=="string"&&mt!==""||typeof mt=="number")return xt!==null?null:it(gt,ft,""+mt,pt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case va:return mt.key===xt?ot(gt,ft,mt,pt):null;case wa:return mt.key===xt?st(gt,ft,mt,pt):null;case Ha:return xt=mt._init,ct(gt,ft,xt(mt._payload),pt)}if(eb(mt)||Ka(mt))return xt!==null?null:at(gt,ft,mt,pt,null);th(gt,mt)}return null}function ut(gt,ft,mt,pt,xt){if(typeof pt=="string"&&pt!==""||typeof pt=="number")return gt=gt.get(mt)||null,it(ft,gt,""+pt,xt);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case va:return gt=gt.get(pt.key===null?mt:pt.key)||null,ot(ft,gt,pt,xt);case wa:return gt=gt.get(pt.key===null?mt:pt.key)||null,st(ft,gt,pt,xt);case Ha:var vt=pt._init;return ut(gt,ft,mt,vt(pt._payload),xt)}if(eb(pt)||Ka(pt))return gt=gt.get(mt)||null,at(ft,gt,pt,xt,null);th(ft,pt)}return null}function dt(gt,ft,mt,pt){for(var xt=null,vt=null,Et=ft,_t=ft=0,wt=null;Et!==null&&_t<mt.length;_t++){Et.index>_t?(wt=Et,Et=null):wt=Et.sibling;var bt=ct(gt,Et,mt[_t],pt);if(bt===null){Et===null&&(Et=wt);break}d&&Et&&bt.alternate===null&&c(gt,Et),ft=nt(bt,ft,_t),vt===null?xt=bt:vt.sibling=bt,vt=bt,Et=wt}if(_t===mt.length)return et(gt,Et),I$1&&tg(gt,_t),xt;if(Et===null){for(;_t<mt.length;_t++)Et=lt(gt,mt[_t],pt),Et!==null&&(ft=nt(Et,ft,_t),vt===null?xt=Et:vt.sibling=Et,vt=Et);return I$1&&tg(gt,_t),xt}for(Et=_e(gt,Et);_t<mt.length;_t++)wt=ut(Et,gt,_t,mt[_t],pt),wt!==null&&(d&&wt.alternate!==null&&Et.delete(wt.key===null?_t:wt.key),ft=nt(wt,ft,_t),vt===null?xt=wt:vt.sibling=wt,vt=wt);return d&&Et.forEach(function($t){return c(gt,$t)}),I$1&&tg(gt,_t),xt}function ht(gt,ft,mt,pt){var xt=Ka(mt);if(typeof xt!="function")throw Error(p$2(150));if(mt=xt.call(mt),mt==null)throw Error(p$2(151));for(var vt=xt=null,Et=ft,_t=ft=0,wt=null,bt=mt.next();Et!==null&&!bt.done;_t++,bt=mt.next()){Et.index>_t?(wt=Et,Et=null):wt=Et.sibling;var $t=ct(gt,Et,bt.value,pt);if($t===null){Et===null&&(Et=wt);break}d&&Et&&$t.alternate===null&&c(gt,Et),ft=nt($t,ft,_t),vt===null?xt=$t:vt.sibling=$t,vt=$t,Et=wt}if(bt.done)return et(gt,Et),I$1&&tg(gt,_t),xt;if(Et===null){for(;!bt.done;_t++,bt=mt.next())bt=lt(gt,bt.value,pt),bt!==null&&(ft=nt(bt,ft,_t),vt===null?xt=bt:vt.sibling=bt,vt=bt);return I$1&&tg(gt,_t),xt}for(Et=_e(gt,Et);!bt.done;_t++,bt=mt.next())bt=ut(Et,gt,_t,bt.value,pt),bt!==null&&(d&&bt.alternate!==null&&Et.delete(bt.key===null?_t:bt.key),ft=nt(bt,ft,_t),vt===null?xt=bt:vt.sibling=bt,vt=bt);return d&&Et.forEach(function(kt){return c(gt,kt)}),I$1&&tg(gt,_t),xt}function yt(gt,ft,mt,pt){if(typeof mt=="object"&&mt!==null&&mt.type===ya&&mt.key===null&&(mt=mt.props.children),typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case va:e:{for(var xt=mt.key,vt=ft;vt!==null;){if(vt.key===xt){if(xt=mt.type,xt===ya){if(vt.tag===7){et(gt,vt.sibling),ft=tt(vt,mt.props.children),ft.return=gt,gt=ft;break e}}else if(vt.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===Ha&&uh(xt)===vt.type){et(gt,vt.sibling),ft=tt(vt,mt.props),ft.ref=sh(gt,vt,mt),ft.return=gt,gt=ft;break e}et(gt,vt);break}else c(gt,vt);vt=vt.sibling}mt.type===ya?(ft=Ah(mt.props.children,gt.mode,pt,mt.key),ft.return=gt,gt=ft):(pt=yh(mt.type,mt.key,mt.props,null,gt.mode,pt),pt.ref=sh(gt,ft,mt),pt.return=gt,gt=pt)}return rt(gt);case wa:e:{for(vt=mt.key;ft!==null;){if(ft.key===vt)if(ft.tag===4&&ft.stateNode.containerInfo===mt.containerInfo&&ft.stateNode.implementation===mt.implementation){et(gt,ft.sibling),ft=tt(ft,mt.children||[]),ft.return=gt,gt=ft;break e}else{et(gt,ft);break}else c(gt,ft);ft=ft.sibling}ft=zh(mt,gt.mode,pt),ft.return=gt,gt=ft}return rt(gt);case Ha:return vt=mt._init,yt(gt,ft,vt(mt._payload),pt)}if(eb(mt))return dt(gt,ft,mt,pt);if(Ka(mt))return ht(gt,ft,mt,pt);th(gt,mt)}return typeof mt=="string"&&mt!==""||typeof mt=="number"?(mt=""+mt,ft!==null&&ft.tag===6?(et(gt,ft.sibling),ft=tt(ft,mt),ft.return=gt,gt=ft):(et(gt,ft),ft=xh(mt,gt.mode,pt),ft.return=gt,gt=ft),rt(gt)):et(gt,ft)}return yt}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(d){if(d===Dh)throw Error(p$2(174));return d}function Ih(d,c){switch(G$1(Gh,c),G$1(Fh,d),G$1(Eh,Dh),d=c.nodeType,d){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:lb(null,"");break;default:d=d===8?c.parentNode:c,c=d.namespaceURI||null,d=d.tagName,c=lb(c,d)}E$1(Eh),G$1(Eh,c)}function Jh(){E$1(Eh),E$1(Fh),E$1(Gh)}function Kh(d){Hh(Gh.current);var c=Hh(Eh.current),et=lb(c,d.type);c!==et&&(G$1(Fh,d),G$1(Eh,et))}function Lh(d){Fh.current===d&&(E$1(Eh),E$1(Fh))}var M$1=Uf(0);function Mh(d){for(var c=d;c!==null;){if(c.tag===13){var et=c.memoizedState;if(et!==null&&(et=et.dehydrated,et===null||et.data==="$?"||et.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break;for(;c.sibling===null;){if(c.return===null||c.return===d)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Nh=[];function Oh(){for(var d=0;d<Nh.length;d++)Nh[d]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$1=null,O$1=null,P$1=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$1(){throw Error(p$2(321))}function Wh(d,c){if(c===null)return!1;for(var et=0;et<c.length&&et<d.length;et++)if(!He(d[et],c[et]))return!1;return!0}function Xh(d,c,et,_e,tt,nt){if(Rh=nt,N$1=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Ph.current=d===null||d.memoizedState===null?Yh:Zh,d=et(_e,tt),Th){nt=0;do{if(Th=!1,Uh=0,25<=nt)throw Error(p$2(301));nt+=1,P$1=O$1=null,c.updateQueue=null,Ph.current=$h,d=et(_e,tt)}while(Th)}if(Ph.current=ai,c=O$1!==null&&O$1.next!==null,Rh=0,P$1=O$1=N$1=null,Sh=!1,c)throw Error(p$2(300));return d}function bi(){var d=Uh!==0;return Uh=0,d}function ci(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$1===null?N$1.memoizedState=P$1=d:P$1=P$1.next=d,P$1}function di(){if(O$1===null){var d=N$1.alternate;d=d!==null?d.memoizedState:null}else d=O$1.next;var c=P$1===null?N$1.memoizedState:P$1.next;if(c!==null)P$1=c,O$1=d;else{if(d===null)throw Error(p$2(310));O$1=d,d={memoizedState:O$1.memoizedState,baseState:O$1.baseState,baseQueue:O$1.baseQueue,queue:O$1.queue,next:null},P$1===null?N$1.memoizedState=P$1=d:P$1=P$1.next=d}return P$1}function ei(d,c){return typeof c=="function"?c(d):c}function fi(d){var c=di(),et=c.queue;if(et===null)throw Error(p$2(311));et.lastRenderedReducer=d;var _e=O$1,tt=_e.baseQueue,nt=et.pending;if(nt!==null){if(tt!==null){var rt=tt.next;tt.next=nt.next,nt.next=rt}_e.baseQueue=tt=nt,et.pending=null}if(tt!==null){nt=tt.next,_e=_e.baseState;var it=rt=null,ot=null,st=nt;do{var at=st.lane;if((Rh&at)===at)ot!==null&&(ot=ot.next={lane:0,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),_e=st.hasEagerState?st.eagerState:d(_e,st.action);else{var lt={lane:at,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null};ot===null?(it=ot=lt,rt=_e):ot=ot.next=lt,N$1.lanes|=at,hh|=at}st=st.next}while(st!==null&&st!==nt);ot===null?rt=_e:ot.next=it,He(_e,c.memoizedState)||(Ug=!0),c.memoizedState=_e,c.baseState=rt,c.baseQueue=ot,et.lastRenderedState=_e}if(d=et.interleaved,d!==null){tt=d;do nt=tt.lane,N$1.lanes|=nt,hh|=nt,tt=tt.next;while(tt!==d)}else tt===null&&(et.lanes=0);return[c.memoizedState,et.dispatch]}function gi(d){var c=di(),et=c.queue;if(et===null)throw Error(p$2(311));et.lastRenderedReducer=d;var _e=et.dispatch,tt=et.pending,nt=c.memoizedState;if(tt!==null){et.pending=null;var rt=tt=tt.next;do nt=d(nt,rt.action),rt=rt.next;while(rt!==tt);He(nt,c.memoizedState)||(Ug=!0),c.memoizedState=nt,c.baseQueue===null&&(c.baseState=nt),et.lastRenderedState=nt}return[nt,_e]}function hi(){}function ii(d,c){var et=N$1,_e=di(),tt=c(),nt=!He(_e.memoizedState,tt);if(nt&&(_e.memoizedState=tt,Ug=!0),_e=_e.queue,ji(ki.bind(null,et,_e,d),[d]),_e.getSnapshot!==c||nt||P$1!==null&&P$1.memoizedState.tag&1){if(et.flags|=2048,li(9,mi.bind(null,et,_e,tt,c),void 0,null),R$1===null)throw Error(p$2(349));Rh&30||ni(et,c,tt)}return tt}function ni(d,c,et){d.flags|=16384,d={getSnapshot:c,value:et},c=N$1.updateQueue,c===null?(c={lastEffect:null,stores:null},N$1.updateQueue=c,c.stores=[d]):(et=c.stores,et===null?c.stores=[d]:et.push(d))}function mi(d,c,et,_e){c.value=et,c.getSnapshot=_e,oi(c)&&pi(d)}function ki(d,c,et){return et(function(){oi(c)&&pi(d)})}function oi(d){var c=d.getSnapshot;d=d.value;try{var et=c();return!He(d,et)}catch{return!0}}function pi(d){var c=Zg(d,1);c!==null&&mh(c,d,1,-1)}function qi(d){var c=ci();return typeof d=="function"&&(d=d()),c.memoizedState=c.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:d},c.queue=d,d=d.dispatch=ri.bind(null,N$1,d),[c.memoizedState,d]}function li(d,c,et,_e){return d={tag:d,create:c,destroy:et,deps:_e,next:null},c=N$1.updateQueue,c===null?(c={lastEffect:null,stores:null},N$1.updateQueue=c,c.lastEffect=d.next=d):(et=c.lastEffect,et===null?c.lastEffect=d.next=d:(_e=et.next,et.next=d,d.next=_e,c.lastEffect=d)),d}function si(){return di().memoizedState}function ti(d,c,et,_e){var tt=ci();N$1.flags|=d,tt.memoizedState=li(1|c,et,void 0,_e===void 0?null:_e)}function ui(d,c,et,_e){var tt=di();_e=_e===void 0?null:_e;var nt=void 0;if(O$1!==null){var rt=O$1.memoizedState;if(nt=rt.destroy,_e!==null&&Wh(_e,rt.deps)){tt.memoizedState=li(c,et,nt,_e);return}}N$1.flags|=d,tt.memoizedState=li(1|c,et,nt,_e)}function vi(d,c){return ti(8390656,8,d,c)}function ji(d,c){return ui(2048,8,d,c)}function wi(d,c){return ui(4,2,d,c)}function xi(d,c){return ui(4,4,d,c)}function yi(d,c){if(typeof c=="function")return d=d(),c(d),function(){c(null)};if(c!=null)return d=d(),c.current=d,function(){c.current=null}}function zi(d,c,et){return et=et!=null?et.concat([d]):null,ui(4,4,yi.bind(null,c,d),et)}function Ai(){}function Bi(d,c){var et=di();c=c===void 0?null:c;var _e=et.memoizedState;return _e!==null&&c!==null&&Wh(c,_e[1])?_e[0]:(et.memoizedState=[d,c],d)}function Ci(d,c){var et=di();c=c===void 0?null:c;var _e=et.memoizedState;return _e!==null&&c!==null&&Wh(c,_e[1])?_e[0]:(d=d(),et.memoizedState=[d,c],d)}function Di(d,c,et){return Rh&21?(He(et,c)||(et=yc(),N$1.lanes|=et,hh|=et,d.baseState=!0),c):(d.baseState&&(d.baseState=!1,Ug=!0),d.memoizedState=et)}function Ei(d,c){var et=C$1;C$1=et!==0&&4>et?et:4,d(!0);var _e=Qh.transition;Qh.transition={};try{d(!1),c()}finally{C$1=et,Qh.transition=_e}}function Fi(){return di().memoizedState}function Gi(d,c,et){var _e=lh(d);if(et={lane:_e,action:et,hasEagerState:!1,eagerState:null,next:null},Hi(d))Ii(c,et);else if(et=Yg(d,c,et,_e),et!==null){var tt=L$1();mh(et,d,_e,tt),Ji(et,c,_e)}}function ri(d,c,et){var _e=lh(d),tt={lane:_e,action:et,hasEagerState:!1,eagerState:null,next:null};if(Hi(d))Ii(c,tt);else{var nt=d.alternate;if(d.lanes===0&&(nt===null||nt.lanes===0)&&(nt=c.lastRenderedReducer,nt!==null))try{var rt=c.lastRenderedState,it=nt(rt,et);if(tt.hasEagerState=!0,tt.eagerState=it,He(it,rt)){var ot=c.interleaved;ot===null?(tt.next=tt,Xg(c)):(tt.next=ot.next,ot.next=tt),c.interleaved=tt;return}}catch{}finally{}et=Yg(d,c,tt,_e),et!==null&&(tt=L$1(),mh(et,d,_e,tt),Ji(et,c,_e))}}function Hi(d){var c=d.alternate;return d===N$1||c!==null&&c===N$1}function Ii(d,c){Th=Sh=!0;var et=d.pending;et===null?c.next=c:(c.next=et.next,et.next=c),d.pending=c}function Ji(d,c,et){if(et&4194240){var _e=c.lanes;_e&=d.pendingLanes,et|=_e,c.lanes=et,Cc(d,et)}}var ai={readContext:Vg,useCallback:Q$1,useContext:Q$1,useEffect:Q$1,useImperativeHandle:Q$1,useInsertionEffect:Q$1,useLayoutEffect:Q$1,useMemo:Q$1,useReducer:Q$1,useRef:Q$1,useState:Q$1,useDebugValue:Q$1,useDeferredValue:Q$1,useTransition:Q$1,useMutableSource:Q$1,useSyncExternalStore:Q$1,useId:Q$1,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(d,c){return ci().memoizedState=[d,c===void 0?null:c],d},useContext:Vg,useEffect:vi,useImperativeHandle:function(d,c,et){return et=et!=null?et.concat([d]):null,ti(4194308,4,yi.bind(null,c,d),et)},useLayoutEffect:function(d,c){return ti(4194308,4,d,c)},useInsertionEffect:function(d,c){return ti(4,2,d,c)},useMemo:function(d,c){var et=ci();return c=c===void 0?null:c,d=d(),et.memoizedState=[d,c],d},useReducer:function(d,c,et){var _e=ci();return c=et!==void 0?et(c):c,_e.memoizedState=_e.baseState=c,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:c},_e.queue=d,d=d.dispatch=Gi.bind(null,N$1,d),[_e.memoizedState,d]},useRef:function(d){var c=ci();return d={current:d},c.memoizedState=d},useState:qi,useDebugValue:Ai,useDeferredValue:function(d){return ci().memoizedState=d},useTransition:function(){var d=qi(!1),c=d[0];return d=Ei.bind(null,d[1]),ci().memoizedState=d,[c,d]},useMutableSource:function(){},useSyncExternalStore:function(d,c,et){var _e=N$1,tt=ci();if(I$1){if(et===void 0)throw Error(p$2(407));et=et()}else{if(et=c(),R$1===null)throw Error(p$2(349));Rh&30||ni(_e,c,et)}tt.memoizedState=et;var nt={value:et,getSnapshot:c};return tt.queue=nt,vi(ki.bind(null,_e,nt,d),[d]),_e.flags|=2048,li(9,mi.bind(null,_e,nt,et,c),void 0,null),et},useId:function(){var d=ci(),c=R$1.identifierPrefix;if(I$1){var et=sg,_e=rg;et=(_e&~(1<<32-oc(_e)-1)).toString(32)+et,c=":"+c+"R"+et,et=Uh++,0<et&&(c+="H"+et.toString(32)),c+=":"}else et=Vh++,c=":"+c+"r"+et.toString(32)+":";return d.memoizedState=c},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(d){var c=di();return Di(c,O$1.memoizedState,d)},useTransition:function(){var d=fi(ei)[0],c=di().memoizedState;return[d,c]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(d){var c=di();return O$1===null?c.memoizedState=d:Di(c,O$1.memoizedState,d)},useTransition:function(){var d=gi(ei)[0],c=di().memoizedState;return[d,c]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(d,c){try{var et="",_e=c;do et+=Pa(_e),_e=_e.return;while(_e);var tt=et}catch(nt){tt=`
Error generating stack: `+nt.message+`
`+nt.stack}return{value:d,source:c,stack:tt,digest:null}}function Li(d,c,et){return{value:d,source:null,stack:et??null,digest:c??null}}function Mi(d,c){try{console.error(c.value)}catch(et){setTimeout(function(){throw et})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(d,c,et){et=ch(-1,et),et.tag=3,et.payload={element:null};var _e=c.value;return et.callback=function(){Pi||(Pi=!0,Qi=_e),Mi(d,c)},et}function Ri(d,c,et){et=ch(-1,et),et.tag=3;var _e=d.type.getDerivedStateFromError;if(typeof _e=="function"){var tt=c.value;et.payload=function(){return _e(tt)},et.callback=function(){Mi(d,c)}}var nt=d.stateNode;return nt!==null&&typeof nt.componentDidCatch=="function"&&(et.callback=function(){Mi(d,c),typeof _e!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var rt=c.stack;this.componentDidCatch(c.value,{componentStack:rt!==null?rt:""})}),et}function Ti(d,c,et){var _e=d.pingCache;if(_e===null){_e=d.pingCache=new Ni;var tt=new Set;_e.set(c,tt)}else tt=_e.get(c),tt===void 0&&(tt=new Set,_e.set(c,tt));tt.has(et)||(tt.add(et),d=Ui.bind(null,d,c,et),c.then(d,d))}function Vi(d){do{var c;if((c=d.tag===13)&&(c=d.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return d;d=d.return}while(d!==null);return null}function Wi(d,c,et,_e,tt){return d.mode&1?(d.flags|=65536,d.lanes=tt,d):(d===c?d.flags|=65536:(d.flags|=128,et.flags|=131072,et.flags&=-52805,et.tag===1&&(et.alternate===null?et.tag=17:(c=ch(-1,1),c.tag=2,dh(et,c,1))),et.lanes|=1),d)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(d,c,et,_e){c.child=d===null?Ch(c,null,et,_e):Bh(c,d.child,et,_e)}function Zi(d,c,et,_e,tt){et=et.render;var nt=c.ref;return Tg(c,tt),_e=Xh(d,c,et,_e,nt,tt),et=bi(),d!==null&&!Ug?(c.updateQueue=d.updateQueue,c.flags&=-2053,d.lanes&=~tt,$i(d,c,tt)):(I$1&&et&&vg(c),c.flags|=1,Yi(d,c,_e,tt),c.child)}function aj(d,c,et,_e,tt){if(d===null){var nt=et.type;return typeof nt=="function"&&!bj(nt)&&nt.defaultProps===void 0&&et.compare===null&&et.defaultProps===void 0?(c.tag=15,c.type=nt,cj(d,c,nt,_e,tt)):(d=yh(et.type,null,_e,c,c.mode,tt),d.ref=c.ref,d.return=c,c.child=d)}if(nt=d.child,!(d.lanes&tt)){var rt=nt.memoizedProps;if(et=et.compare,et=et!==null?et:Ie,et(rt,_e)&&d.ref===c.ref)return $i(d,c,tt)}return c.flags|=1,d=wh(nt,_e),d.ref=c.ref,d.return=c,c.child=d}function cj(d,c,et,_e,tt){if(d!==null){var nt=d.memoizedProps;if(Ie(nt,_e)&&d.ref===c.ref)if(Ug=!1,c.pendingProps=_e=nt,(d.lanes&tt)!==0)d.flags&131072&&(Ug=!0);else return c.lanes=d.lanes,$i(d,c,tt)}return dj(d,c,et,_e,tt)}function ej(d,c,et){var _e=c.pendingProps,tt=_e.children,nt=d!==null?d.memoizedState:null;if(_e.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj,gj),gj|=et;else{if(!(et&1073741824))return d=nt!==null?nt.baseLanes|et:et,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:d,cachePool:null,transitions:null},c.updateQueue=null,G$1(fj,gj),gj|=d,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e=nt!==null?nt.baseLanes:et,G$1(fj,gj),gj|=_e}else nt!==null?(_e=nt.baseLanes|et,c.memoizedState=null):_e=et,G$1(fj,gj),gj|=_e;return Yi(d,c,tt,et),c.child}function hj(d,c){var et=c.ref;(d===null&&et!==null||d!==null&&d.ref!==et)&&(c.flags|=512,c.flags|=2097152)}function dj(d,c,et,_e,tt){var nt=Zf(et)?Xf:H$1.current;return nt=Yf(c,nt),Tg(c,tt),et=Xh(d,c,et,_e,nt,tt),_e=bi(),d!==null&&!Ug?(c.updateQueue=d.updateQueue,c.flags&=-2053,d.lanes&=~tt,$i(d,c,tt)):(I$1&&_e&&vg(c),c.flags|=1,Yi(d,c,et,tt),c.child)}function ij(d,c,et,_e,tt){if(Zf(et)){var nt=!0;cg(c)}else nt=!1;if(Tg(c,tt),c.stateNode===null)jj(d,c),ph(c,et,_e),rh(c,et,_e,tt),_e=!0;else if(d===null){var rt=c.stateNode,it=c.memoizedProps;rt.props=it;var ot=rt.context,st=et.contextType;typeof st=="object"&&st!==null?st=Vg(st):(st=Zf(et)?Xf:H$1.current,st=Yf(c,st));var at=et.getDerivedStateFromProps,lt=typeof at=="function"||typeof rt.getSnapshotBeforeUpdate=="function";lt||typeof rt.UNSAFE_componentWillReceiveProps!="function"&&typeof rt.componentWillReceiveProps!="function"||(it!==_e||ot!==st)&&qh(c,rt,_e,st),$g=!1;var ct=c.memoizedState;rt.state=ct,gh(c,_e,rt,tt),ot=c.memoizedState,it!==_e||ct!==ot||Wf.current||$g?(typeof at=="function"&&(kh(c,et,at,_e),ot=c.memoizedState),(it=$g||oh(c,et,it,_e,ct,ot,st))?(lt||typeof rt.UNSAFE_componentWillMount!="function"&&typeof rt.componentWillMount!="function"||(typeof rt.componentWillMount=="function"&&rt.componentWillMount(),typeof rt.UNSAFE_componentWillMount=="function"&&rt.UNSAFE_componentWillMount()),typeof rt.componentDidMount=="function"&&(c.flags|=4194308)):(typeof rt.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=_e,c.memoizedState=ot),rt.props=_e,rt.state=ot,rt.context=st,_e=it):(typeof rt.componentDidMount=="function"&&(c.flags|=4194308),_e=!1)}else{rt=c.stateNode,bh(d,c),it=c.memoizedProps,st=c.type===c.elementType?it:Lg(c.type,it),rt.props=st,lt=c.pendingProps,ct=rt.context,ot=et.contextType,typeof ot=="object"&&ot!==null?ot=Vg(ot):(ot=Zf(et)?Xf:H$1.current,ot=Yf(c,ot));var ut=et.getDerivedStateFromProps;(at=typeof ut=="function"||typeof rt.getSnapshotBeforeUpdate=="function")||typeof rt.UNSAFE_componentWillReceiveProps!="function"&&typeof rt.componentWillReceiveProps!="function"||(it!==lt||ct!==ot)&&qh(c,rt,_e,ot),$g=!1,ct=c.memoizedState,rt.state=ct,gh(c,_e,rt,tt);var dt=c.memoizedState;it!==lt||ct!==dt||Wf.current||$g?(typeof ut=="function"&&(kh(c,et,ut,_e),dt=c.memoizedState),(st=$g||oh(c,et,st,_e,ct,dt,ot)||!1)?(at||typeof rt.UNSAFE_componentWillUpdate!="function"&&typeof rt.componentWillUpdate!="function"||(typeof rt.componentWillUpdate=="function"&&rt.componentWillUpdate(_e,dt,ot),typeof rt.UNSAFE_componentWillUpdate=="function"&&rt.UNSAFE_componentWillUpdate(_e,dt,ot)),typeof rt.componentDidUpdate=="function"&&(c.flags|=4),typeof rt.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof rt.componentDidUpdate!="function"||it===d.memoizedProps&&ct===d.memoizedState||(c.flags|=4),typeof rt.getSnapshotBeforeUpdate!="function"||it===d.memoizedProps&&ct===d.memoizedState||(c.flags|=1024),c.memoizedProps=_e,c.memoizedState=dt),rt.props=_e,rt.state=dt,rt.context=ot,_e=st):(typeof rt.componentDidUpdate!="function"||it===d.memoizedProps&&ct===d.memoizedState||(c.flags|=4),typeof rt.getSnapshotBeforeUpdate!="function"||it===d.memoizedProps&&ct===d.memoizedState||(c.flags|=1024),_e=!1)}return kj(d,c,et,_e,nt,tt)}function kj(d,c,et,_e,tt,nt){hj(d,c);var rt=(c.flags&128)!==0;if(!_e&&!rt)return tt&&dg(c,et,!1),$i(d,c,nt);_e=c.stateNode,Xi.current=c;var it=rt&&typeof et.getDerivedStateFromError!="function"?null:_e.render();return c.flags|=1,d!==null&&rt?(c.child=Bh(c,d.child,null,nt),c.child=Bh(c,null,it,nt)):Yi(d,c,it,nt),c.memoizedState=_e.state,tt&&dg(c,et,!0),c.child}function lj(d){var c=d.stateNode;c.pendingContext?ag(d,c.pendingContext,c.pendingContext!==c.context):c.context&&ag(d,c.context,!1),Ih(d,c.containerInfo)}function mj(d,c,et,_e,tt){return Ig(),Jg(tt),c.flags|=256,Yi(d,c,et,_e),c.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(d){return{baseLanes:d,cachePool:null,transitions:null}}function pj(d,c,et){var _e=c.pendingProps,tt=M$1.current,nt=!1,rt=(c.flags&128)!==0,it;if((it=rt)||(it=d!==null&&d.memoizedState===null?!1:(tt&2)!==0),it?(nt=!0,c.flags&=-129):(d===null||d.memoizedState!==null)&&(tt|=1),G$1(M$1,tt&1),d===null)return Eg(c),d=c.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?(c.mode&1?d.data==="$!"?c.lanes=8:c.lanes=1073741824:c.lanes=1,null):(rt=_e.children,d=_e.fallback,nt?(_e=c.mode,nt=c.child,rt={mode:"hidden",children:rt},!(_e&1)&&nt!==null?(nt.childLanes=0,nt.pendingProps=rt):nt=qj(rt,_e,0,null),d=Ah(d,_e,et,null),nt.return=c,d.return=c,nt.sibling=d,c.child=nt,c.child.memoizedState=oj(et),c.memoizedState=nj,d):rj(c,rt));if(tt=d.memoizedState,tt!==null&&(it=tt.dehydrated,it!==null))return sj(d,c,rt,_e,it,tt,et);if(nt){nt=_e.fallback,rt=c.mode,tt=d.child,it=tt.sibling;var ot={mode:"hidden",children:_e.children};return!(rt&1)&&c.child!==tt?(_e=c.child,_e.childLanes=0,_e.pendingProps=ot,c.deletions=null):(_e=wh(tt,ot),_e.subtreeFlags=tt.subtreeFlags&14680064),it!==null?nt=wh(it,nt):(nt=Ah(nt,rt,et,null),nt.flags|=2),nt.return=c,_e.return=c,_e.sibling=nt,c.child=_e,_e=nt,nt=c.child,rt=d.child.memoizedState,rt=rt===null?oj(et):{baseLanes:rt.baseLanes|et,cachePool:null,transitions:rt.transitions},nt.memoizedState=rt,nt.childLanes=d.childLanes&~et,c.memoizedState=nj,_e}return nt=d.child,d=nt.sibling,_e=wh(nt,{mode:"visible",children:_e.children}),!(c.mode&1)&&(_e.lanes=et),_e.return=c,_e.sibling=null,d!==null&&(et=c.deletions,et===null?(c.deletions=[d],c.flags|=16):et.push(d)),c.child=_e,c.memoizedState=null,_e}function rj(d,c){return c=qj({mode:"visible",children:c},d.mode,0,null),c.return=d,d.child=c}function tj(d,c,et,_e){return _e!==null&&Jg(_e),Bh(c,d.child,null,et),d=rj(c,c.pendingProps.children),d.flags|=2,c.memoizedState=null,d}function sj(d,c,et,_e,tt,nt,rt){if(et)return c.flags&256?(c.flags&=-257,_e=Li(Error(p$2(422))),tj(d,c,rt,_e)):c.memoizedState!==null?(c.child=d.child,c.flags|=128,null):(nt=_e.fallback,tt=c.mode,_e=qj({mode:"visible",children:_e.children},tt,0,null),nt=Ah(nt,tt,rt,null),nt.flags|=2,_e.return=c,nt.return=c,_e.sibling=nt,c.child=_e,c.mode&1&&Bh(c,d.child,null,rt),c.child.memoizedState=oj(rt),c.memoizedState=nj,nt);if(!(c.mode&1))return tj(d,c,rt,null);if(tt.data==="$!"){if(_e=tt.nextSibling&&tt.nextSibling.dataset,_e)var it=_e.dgst;return _e=it,nt=Error(p$2(419)),_e=Li(nt,_e,void 0),tj(d,c,rt,_e)}if(it=(rt&d.childLanes)!==0,Ug||it){if(_e=R$1,_e!==null){switch(rt&-rt){case 4:tt=2;break;case 16:tt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:tt=32;break;case 536870912:tt=268435456;break;default:tt=0}tt=tt&(_e.suspendedLanes|rt)?0:tt,tt!==0&&tt!==nt.retryLane&&(nt.retryLane=tt,Zg(d,tt),mh(_e,d,tt,-1))}return uj(),_e=Li(Error(p$2(421))),tj(d,c,rt,_e)}return tt.data==="$?"?(c.flags|=128,c.child=d.child,c=vj.bind(null,d),tt._reactRetry=c,null):(d=nt.treeContext,yg=Lf(tt.nextSibling),xg=c,I$1=!0,zg=null,d!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=d.id,sg=d.overflow,qg=c),c=rj(c,_e.children),c.flags|=4096,c)}function wj(d,c,et){d.lanes|=c;var _e=d.alternate;_e!==null&&(_e.lanes|=c),Sg(d.return,c,et)}function xj(d,c,et,_e,tt){var nt=d.memoizedState;nt===null?d.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:_e,tail:et,tailMode:tt}:(nt.isBackwards=c,nt.rendering=null,nt.renderingStartTime=0,nt.last=_e,nt.tail=et,nt.tailMode=tt)}function yj(d,c,et){var _e=c.pendingProps,tt=_e.revealOrder,nt=_e.tail;if(Yi(d,c,_e.children,et),_e=M$1.current,_e&2)_e=_e&1|2,c.flags|=128;else{if(d!==null&&d.flags&128)e:for(d=c.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&wj(d,et,c);else if(d.tag===19)wj(d,et,c);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break e;for(;d.sibling===null;){if(d.return===null||d.return===c)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}_e&=1}if(G$1(M$1,_e),!(c.mode&1))c.memoizedState=null;else switch(tt){case"forwards":for(et=c.child,tt=null;et!==null;)d=et.alternate,d!==null&&Mh(d)===null&&(tt=et),et=et.sibling;et=tt,et===null?(tt=c.child,c.child=null):(tt=et.sibling,et.sibling=null),xj(c,!1,tt,et,nt);break;case"backwards":for(et=null,tt=c.child,c.child=null;tt!==null;){if(d=tt.alternate,d!==null&&Mh(d)===null){c.child=tt;break}d=tt.sibling,tt.sibling=et,et=tt,tt=d}xj(c,!0,et,null,nt);break;case"together":xj(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function jj(d,c){!(c.mode&1)&&d!==null&&(d.alternate=null,c.alternate=null,c.flags|=2)}function $i(d,c,et){if(d!==null&&(c.dependencies=d.dependencies),hh|=c.lanes,!(et&c.childLanes))return null;if(d!==null&&c.child!==d.child)throw Error(p$2(153));if(c.child!==null){for(d=c.child,et=wh(d,d.pendingProps),c.child=et,et.return=c;d.sibling!==null;)d=d.sibling,et=et.sibling=wh(d,d.pendingProps),et.return=c;et.sibling=null}return c.child}function zj(d,c,et){switch(c.tag){case 3:lj(c),Ig();break;case 5:Kh(c);break;case 1:Zf(c.type)&&cg(c);break;case 4:Ih(c,c.stateNode.containerInfo);break;case 10:var _e=c.type._context,tt=c.memoizedProps.value;G$1(Mg,_e._currentValue),_e._currentValue=tt;break;case 13:if(_e=c.memoizedState,_e!==null)return _e.dehydrated!==null?(G$1(M$1,M$1.current&1),c.flags|=128,null):et&c.child.childLanes?pj(d,c,et):(G$1(M$1,M$1.current&1),d=$i(d,c,et),d!==null?d.sibling:null);G$1(M$1,M$1.current&1);break;case 19:if(_e=(et&c.childLanes)!==0,d.flags&128){if(_e)return yj(d,c,et);c.flags|=128}if(tt=c.memoizedState,tt!==null&&(tt.rendering=null,tt.tail=null,tt.lastEffect=null),G$1(M$1,M$1.current),_e)break;return null;case 22:case 23:return c.lanes=0,ej(d,c,et)}return $i(d,c,et)}var Aj,Bj,Cj,Dj;Aj=function(d,c){for(var et=c.child;et!==null;){if(et.tag===5||et.tag===6)d.appendChild(et.stateNode);else if(et.tag!==4&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===c)break;for(;et.sibling===null;){if(et.return===null||et.return===c)return;et=et.return}et.sibling.return=et.return,et=et.sibling}};Bj=function(){};Cj=function(d,c,et,_e){var tt=d.memoizedProps;if(tt!==_e){d=c.stateNode,Hh(Eh.current);var nt=null;switch(et){case"input":tt=Ya(d,tt),_e=Ya(d,_e),nt=[];break;case"select":tt=A$1({},tt,{value:void 0}),_e=A$1({},_e,{value:void 0}),nt=[];break;case"textarea":tt=gb(d,tt),_e=gb(d,_e),nt=[];break;default:typeof tt.onClick!="function"&&typeof _e.onClick=="function"&&(d.onclick=Bf)}ub(et,_e);var rt;et=null;for(st in tt)if(!_e.hasOwnProperty(st)&&tt.hasOwnProperty(st)&&tt[st]!=null)if(st==="style"){var it=tt[st];for(rt in it)it.hasOwnProperty(rt)&&(et||(et={}),et[rt]="")}else st!=="dangerouslySetInnerHTML"&&st!=="children"&&st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&st!=="autoFocus"&&(ea.hasOwnProperty(st)?nt||(nt=[]):(nt=nt||[]).push(st,null));for(st in _e){var ot=_e[st];if(it=tt!=null?tt[st]:void 0,_e.hasOwnProperty(st)&&ot!==it&&(ot!=null||it!=null))if(st==="style")if(it){for(rt in it)!it.hasOwnProperty(rt)||ot&&ot.hasOwnProperty(rt)||(et||(et={}),et[rt]="");for(rt in ot)ot.hasOwnProperty(rt)&&it[rt]!==ot[rt]&&(et||(et={}),et[rt]=ot[rt])}else et||(nt||(nt=[]),nt.push(st,et)),et=ot;else st==="dangerouslySetInnerHTML"?(ot=ot?ot.__html:void 0,it=it?it.__html:void 0,ot!=null&&it!==ot&&(nt=nt||[]).push(st,ot)):st==="children"?typeof ot!="string"&&typeof ot!="number"||(nt=nt||[]).push(st,""+ot):st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&(ea.hasOwnProperty(st)?(ot!=null&&st==="onScroll"&&D$1("scroll",d),nt||it===ot||(nt=[])):(nt=nt||[]).push(st,ot))}et&&(nt=nt||[]).push("style",et);var st=nt;(c.updateQueue=st)&&(c.flags|=4)}};Dj=function(d,c,et,_e){et!==_e&&(c.flags|=4)};function Ej(d,c){if(!I$1)switch(d.tailMode){case"hidden":c=d.tail;for(var et=null;c!==null;)c.alternate!==null&&(et=c),c=c.sibling;et===null?d.tail=null:et.sibling=null;break;case"collapsed":et=d.tail;for(var _e=null;et!==null;)et.alternate!==null&&(_e=et),et=et.sibling;_e===null?c||d.tail===null?d.tail=null:d.tail.sibling=null:_e.sibling=null}}function S$1(d){var c=d.alternate!==null&&d.alternate.child===d.child,et=0,_e=0;if(c)for(var tt=d.child;tt!==null;)et|=tt.lanes|tt.childLanes,_e|=tt.subtreeFlags&14680064,_e|=tt.flags&14680064,tt.return=d,tt=tt.sibling;else for(tt=d.child;tt!==null;)et|=tt.lanes|tt.childLanes,_e|=tt.subtreeFlags,_e|=tt.flags,tt.return=d,tt=tt.sibling;return d.subtreeFlags|=_e,d.childLanes=et,c}function Fj(d,c,et){var _e=c.pendingProps;switch(wg(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(c),null;case 1:return Zf(c.type)&&$f(),S$1(c),null;case 3:return _e=c.stateNode,Jh(),E$1(Wf),E$1(H$1),Oh(),_e.pendingContext&&(_e.context=_e.pendingContext,_e.pendingContext=null),(d===null||d.child===null)&&(Gg(c)?c.flags|=4:d===null||d.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(d,c),S$1(c),null;case 5:Lh(c);var tt=Hh(Gh.current);if(et=c.type,d!==null&&c.stateNode!=null)Cj(d,c,et,_e,tt),d.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!_e){if(c.stateNode===null)throw Error(p$2(166));return S$1(c),null}if(d=Hh(Eh.current),Gg(c)){_e=c.stateNode,et=c.type;var nt=c.memoizedProps;switch(_e[Of]=c,_e[Pf]=nt,d=(c.mode&1)!==0,et){case"dialog":D$1("cancel",_e),D$1("close",_e);break;case"iframe":case"object":case"embed":D$1("load",_e);break;case"video":case"audio":for(tt=0;tt<lf.length;tt++)D$1(lf[tt],_e);break;case"source":D$1("error",_e);break;case"img":case"image":case"link":D$1("error",_e),D$1("load",_e);break;case"details":D$1("toggle",_e);break;case"input":Za(_e,nt),D$1("invalid",_e);break;case"select":_e._wrapperState={wasMultiple:!!nt.multiple},D$1("invalid",_e);break;case"textarea":hb(_e,nt),D$1("invalid",_e)}ub(et,nt),tt=null;for(var rt in nt)if(nt.hasOwnProperty(rt)){var it=nt[rt];rt==="children"?typeof it=="string"?_e.textContent!==it&&(nt.suppressHydrationWarning!==!0&&Af(_e.textContent,it,d),tt=["children",it]):typeof it=="number"&&_e.textContent!==""+it&&(nt.suppressHydrationWarning!==!0&&Af(_e.textContent,it,d),tt=["children",""+it]):ea.hasOwnProperty(rt)&&it!=null&&rt==="onScroll"&&D$1("scroll",_e)}switch(et){case"input":Va(_e),db$1(_e,nt,!0);break;case"textarea":Va(_e),jb(_e);break;case"select":case"option":break;default:typeof nt.onClick=="function"&&(_e.onclick=Bf)}_e=tt,c.updateQueue=_e,_e!==null&&(c.flags|=4)}else{rt=tt.nodeType===9?tt:tt.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=kb(et)),d==="http://www.w3.org/1999/xhtml"?et==="script"?(d=rt.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof _e.is=="string"?d=rt.createElement(et,{is:_e.is}):(d=rt.createElement(et),et==="select"&&(rt=d,_e.multiple?rt.multiple=!0:_e.size&&(rt.size=_e.size))):d=rt.createElementNS(d,et),d[Of]=c,d[Pf]=_e,Aj(d,c,!1,!1),c.stateNode=d;e:{switch(rt=vb(et,_e),et){case"dialog":D$1("cancel",d),D$1("close",d),tt=_e;break;case"iframe":case"object":case"embed":D$1("load",d),tt=_e;break;case"video":case"audio":for(tt=0;tt<lf.length;tt++)D$1(lf[tt],d);tt=_e;break;case"source":D$1("error",d),tt=_e;break;case"img":case"image":case"link":D$1("error",d),D$1("load",d),tt=_e;break;case"details":D$1("toggle",d),tt=_e;break;case"input":Za(d,_e),tt=Ya(d,_e),D$1("invalid",d);break;case"option":tt=_e;break;case"select":d._wrapperState={wasMultiple:!!_e.multiple},tt=A$1({},_e,{value:void 0}),D$1("invalid",d);break;case"textarea":hb(d,_e),tt=gb(d,_e),D$1("invalid",d);break;default:tt=_e}ub(et,tt),it=tt;for(nt in it)if(it.hasOwnProperty(nt)){var ot=it[nt];nt==="style"?sb(d,ot):nt==="dangerouslySetInnerHTML"?(ot=ot?ot.__html:void 0,ot!=null&&nb(d,ot)):nt==="children"?typeof ot=="string"?(et!=="textarea"||ot!=="")&&ob(d,ot):typeof ot=="number"&&ob(d,""+ot):nt!=="suppressContentEditableWarning"&&nt!=="suppressHydrationWarning"&&nt!=="autoFocus"&&(ea.hasOwnProperty(nt)?ot!=null&&nt==="onScroll"&&D$1("scroll",d):ot!=null&&ta(d,nt,ot,rt))}switch(et){case"input":Va(d),db$1(d,_e,!1);break;case"textarea":Va(d),jb(d);break;case"option":_e.value!=null&&d.setAttribute("value",""+Sa(_e.value));break;case"select":d.multiple=!!_e.multiple,nt=_e.value,nt!=null?fb(d,!!_e.multiple,nt,!1):_e.defaultValue!=null&&fb(d,!!_e.multiple,_e.defaultValue,!0);break;default:typeof tt.onClick=="function"&&(d.onclick=Bf)}switch(et){case"button":case"input":case"select":case"textarea":_e=!!_e.autoFocus;break e;case"img":_e=!0;break e;default:_e=!1}}_e&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return S$1(c),null;case 6:if(d&&c.stateNode!=null)Dj(d,c,d.memoizedProps,_e);else{if(typeof _e!="string"&&c.stateNode===null)throw Error(p$2(166));if(et=Hh(Gh.current),Hh(Eh.current),Gg(c)){if(_e=c.stateNode,et=c.memoizedProps,_e[Of]=c,(nt=_e.nodeValue!==et)&&(d=xg,d!==null))switch(d.tag){case 3:Af(_e.nodeValue,et,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&Af(_e.nodeValue,et,(d.mode&1)!==0)}nt&&(c.flags|=4)}else _e=(et.nodeType===9?et:et.ownerDocument).createTextNode(_e),_e[Of]=c,c.stateNode=_e}return S$1(c),null;case 13:if(E$1(M$1),_e=c.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&c.mode&1&&!(c.flags&128))Hg(),Ig(),c.flags|=98560,nt=!1;else if(nt=Gg(c),_e!==null&&_e.dehydrated!==null){if(d===null){if(!nt)throw Error(p$2(318));if(nt=c.memoizedState,nt=nt!==null?nt.dehydrated:null,!nt)throw Error(p$2(317));nt[Of]=c}else Ig(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;S$1(c),nt=!1}else zg!==null&&(Gj(zg),zg=null),nt=!0;if(!nt)return c.flags&65536?c:null}return c.flags&128?(c.lanes=et,c):(_e=_e!==null,_e!==(d!==null&&d.memoizedState!==null)&&_e&&(c.child.flags|=8192,c.mode&1&&(d===null||M$1.current&1?T$1===0&&(T$1=3):uj())),c.updateQueue!==null&&(c.flags|=4),S$1(c),null);case 4:return Jh(),Bj(d,c),d===null&&sf(c.stateNode.containerInfo),S$1(c),null;case 10:return Rg(c.type._context),S$1(c),null;case 17:return Zf(c.type)&&$f(),S$1(c),null;case 19:if(E$1(M$1),nt=c.memoizedState,nt===null)return S$1(c),null;if(_e=(c.flags&128)!==0,rt=nt.rendering,rt===null)if(_e)Ej(nt,!1);else{if(T$1!==0||d!==null&&d.flags&128)for(d=c.child;d!==null;){if(rt=Mh(d),rt!==null){for(c.flags|=128,Ej(nt,!1),_e=rt.updateQueue,_e!==null&&(c.updateQueue=_e,c.flags|=4),c.subtreeFlags=0,_e=et,et=c.child;et!==null;)nt=et,d=_e,nt.flags&=14680066,rt=nt.alternate,rt===null?(nt.childLanes=0,nt.lanes=d,nt.child=null,nt.subtreeFlags=0,nt.memoizedProps=null,nt.memoizedState=null,nt.updateQueue=null,nt.dependencies=null,nt.stateNode=null):(nt.childLanes=rt.childLanes,nt.lanes=rt.lanes,nt.child=rt.child,nt.subtreeFlags=0,nt.deletions=null,nt.memoizedProps=rt.memoizedProps,nt.memoizedState=rt.memoizedState,nt.updateQueue=rt.updateQueue,nt.type=rt.type,d=rt.dependencies,nt.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),et=et.sibling;return G$1(M$1,M$1.current&1|2),c.child}d=d.sibling}nt.tail!==null&&B$1()>Hj&&(c.flags|=128,_e=!0,Ej(nt,!1),c.lanes=4194304)}else{if(!_e)if(d=Mh(rt),d!==null){if(c.flags|=128,_e=!0,et=d.updateQueue,et!==null&&(c.updateQueue=et,c.flags|=4),Ej(nt,!0),nt.tail===null&&nt.tailMode==="hidden"&&!rt.alternate&&!I$1)return S$1(c),null}else 2*B$1()-nt.renderingStartTime>Hj&&et!==1073741824&&(c.flags|=128,_e=!0,Ej(nt,!1),c.lanes=4194304);nt.isBackwards?(rt.sibling=c.child,c.child=rt):(et=nt.last,et!==null?et.sibling=rt:c.child=rt,nt.last=rt)}return nt.tail!==null?(c=nt.tail,nt.rendering=c,nt.tail=c.sibling,nt.renderingStartTime=B$1(),c.sibling=null,et=M$1.current,G$1(M$1,_e?et&1|2:et&1),c):(S$1(c),null);case 22:case 23:return Ij(),_e=c.memoizedState!==null,d!==null&&d.memoizedState!==null!==_e&&(c.flags|=8192),_e&&c.mode&1?gj&1073741824&&(S$1(c),c.subtreeFlags&6&&(c.flags|=8192)):S$1(c),null;case 24:return null;case 25:return null}throw Error(p$2(156,c.tag))}function Jj(d,c){switch(wg(c),c.tag){case 1:return Zf(c.type)&&$f(),d=c.flags,d&65536?(c.flags=d&-65537|128,c):null;case 3:return Jh(),E$1(Wf),E$1(H$1),Oh(),d=c.flags,d&65536&&!(d&128)?(c.flags=d&-65537|128,c):null;case 5:return Lh(c),null;case 13:if(E$1(M$1),d=c.memoizedState,d!==null&&d.dehydrated!==null){if(c.alternate===null)throw Error(p$2(340));Ig()}return d=c.flags,d&65536?(c.flags=d&-65537|128,c):null;case 19:return E$1(M$1),null;case 4:return Jh(),null;case 10:return Rg(c.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$1=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Mj(d,c){var et=d.ref;if(et!==null)if(typeof et=="function")try{et(null)}catch(_e){W$1(d,c,_e)}else et.current=null}function Nj(d,c,et){try{et()}catch(_e){W$1(d,c,_e)}}var Oj=!1;function Pj(d,c){if(Cf=dd,d=Me(),Ne(d)){if("selectionStart"in d)var et={start:d.selectionStart,end:d.selectionEnd};else e:{et=(et=d.ownerDocument)&&et.defaultView||window;var _e=et.getSelection&&et.getSelection();if(_e&&_e.rangeCount!==0){et=_e.anchorNode;var tt=_e.anchorOffset,nt=_e.focusNode;_e=_e.focusOffset;try{et.nodeType,nt.nodeType}catch{et=null;break e}var rt=0,it=-1,ot=-1,st=0,at=0,lt=d,ct=null;t:for(;;){for(var ut;lt!==et||tt!==0&&lt.nodeType!==3||(it=rt+tt),lt!==nt||_e!==0&&lt.nodeType!==3||(ot=rt+_e),lt.nodeType===3&&(rt+=lt.nodeValue.length),(ut=lt.firstChild)!==null;)ct=lt,lt=ut;for(;;){if(lt===d)break t;if(ct===et&&++st===tt&&(it=rt),ct===nt&&++at===_e&&(ot=rt),(ut=lt.nextSibling)!==null)break;lt=ct,ct=lt.parentNode}lt=ut}et=it===-1||ot===-1?null:{start:it,end:ot}}else et=null}et=et||{start:0,end:0}}else et=null;for(Df={focusedElem:d,selectionRange:et},dd=!1,V$1=c;V$1!==null;)if(c=V$1,d=c.child,(c.subtreeFlags&1028)!==0&&d!==null)d.return=c,V$1=d;else for(;V$1!==null;){c=V$1;try{var dt=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(dt!==null){var ht=dt.memoizedProps,yt=dt.memoizedState,gt=c.stateNode,ft=gt.getSnapshotBeforeUpdate(c.elementType===c.type?ht:Lg(c.type,ht),yt);gt.__reactInternalSnapshotBeforeUpdate=ft}break;case 3:var mt=c.stateNode.containerInfo;mt.nodeType===1?mt.textContent="":mt.nodeType===9&&mt.documentElement&&mt.removeChild(mt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(pt){W$1(c,c.return,pt)}if(d=c.sibling,d!==null){d.return=c.return,V$1=d;break}V$1=c.return}return dt=Oj,Oj=!1,dt}function Qj(d,c,et){var _e=c.updateQueue;if(_e=_e!==null?_e.lastEffect:null,_e!==null){var tt=_e=_e.next;do{if((tt.tag&d)===d){var nt=tt.destroy;tt.destroy=void 0,nt!==void 0&&Nj(c,et,nt)}tt=tt.next}while(tt!==_e)}}function Rj(d,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var et=c=c.next;do{if((et.tag&d)===d){var _e=et.create;et.destroy=_e()}et=et.next}while(et!==c)}}function Sj(d){var c=d.ref;if(c!==null){var et=d.stateNode;switch(d.tag){case 5:d=et;break;default:d=et}typeof c=="function"?c(d):c.current=d}}function Tj(d){var c=d.alternate;c!==null&&(d.alternate=null,Tj(c)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(c=d.stateNode,c!==null&&(delete c[Of],delete c[Pf],delete c[of],delete c[Qf],delete c[Rf])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function Uj(d){return d.tag===5||d.tag===3||d.tag===4}function Vj(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||Uj(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function Wj(d,c,et){var _e=d.tag;if(_e===5||_e===6)d=d.stateNode,c?et.nodeType===8?et.parentNode.insertBefore(d,c):et.insertBefore(d,c):(et.nodeType===8?(c=et.parentNode,c.insertBefore(d,et)):(c=et,c.appendChild(d)),et=et._reactRootContainer,et!=null||c.onclick!==null||(c.onclick=Bf));else if(_e!==4&&(d=d.child,d!==null))for(Wj(d,c,et),d=d.sibling;d!==null;)Wj(d,c,et),d=d.sibling}function Xj(d,c,et){var _e=d.tag;if(_e===5||_e===6)d=d.stateNode,c?et.insertBefore(d,c):et.appendChild(d);else if(_e!==4&&(d=d.child,d!==null))for(Xj(d,c,et),d=d.sibling;d!==null;)Xj(d,c,et),d=d.sibling}var X$1=null,Yj=!1;function Zj(d,c,et){for(et=et.child;et!==null;)ak(d,c,et),et=et.sibling}function ak(d,c,et){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,et)}catch{}switch(et.tag){case 5:U$1||Mj(et,c);case 6:var _e=X$1,tt=Yj;X$1=null,Zj(d,c,et),X$1=_e,Yj=tt,X$1!==null&&(Yj?(d=X$1,et=et.stateNode,d.nodeType===8?d.parentNode.removeChild(et):d.removeChild(et)):X$1.removeChild(et.stateNode));break;case 18:X$1!==null&&(Yj?(d=X$1,et=et.stateNode,d.nodeType===8?Kf(d.parentNode,et):d.nodeType===1&&Kf(d,et),bd(d)):Kf(X$1,et.stateNode));break;case 4:_e=X$1,tt=Yj,X$1=et.stateNode.containerInfo,Yj=!0,Zj(d,c,et),X$1=_e,Yj=tt;break;case 0:case 11:case 14:case 15:if(!U$1&&(_e=et.updateQueue,_e!==null&&(_e=_e.lastEffect,_e!==null))){tt=_e=_e.next;do{var nt=tt,rt=nt.destroy;nt=nt.tag,rt!==void 0&&(nt&2||nt&4)&&Nj(et,c,rt),tt=tt.next}while(tt!==_e)}Zj(d,c,et);break;case 1:if(!U$1&&(Mj(et,c),_e=et.stateNode,typeof _e.componentWillUnmount=="function"))try{_e.props=et.memoizedProps,_e.state=et.memoizedState,_e.componentWillUnmount()}catch(it){W$1(et,c,it)}Zj(d,c,et);break;case 21:Zj(d,c,et);break;case 22:et.mode&1?(U$1=(_e=U$1)||et.memoizedState!==null,Zj(d,c,et),U$1=_e):Zj(d,c,et);break;default:Zj(d,c,et)}}function bk(d){var c=d.updateQueue;if(c!==null){d.updateQueue=null;var et=d.stateNode;et===null&&(et=d.stateNode=new Lj),c.forEach(function(_e){var tt=ck.bind(null,d,_e);et.has(_e)||(et.add(_e),_e.then(tt,tt))})}}function dk(d,c){var et=c.deletions;if(et!==null)for(var _e=0;_e<et.length;_e++){var tt=et[_e];try{var nt=d,rt=c,it=rt;e:for(;it!==null;){switch(it.tag){case 5:X$1=it.stateNode,Yj=!1;break e;case 3:X$1=it.stateNode.containerInfo,Yj=!0;break e;case 4:X$1=it.stateNode.containerInfo,Yj=!0;break e}it=it.return}if(X$1===null)throw Error(p$2(160));ak(nt,rt,tt),X$1=null,Yj=!1;var ot=tt.alternate;ot!==null&&(ot.return=null),tt.return=null}catch(st){W$1(tt,c,st)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)ek(c,d),c=c.sibling}function ek(d,c){var et=d.alternate,_e=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(dk(c,d),fk(d),_e&4){try{Qj(3,d,d.return),Rj(3,d)}catch(ht){W$1(d,d.return,ht)}try{Qj(5,d,d.return)}catch(ht){W$1(d,d.return,ht)}}break;case 1:dk(c,d),fk(d),_e&512&&et!==null&&Mj(et,et.return);break;case 5:if(dk(c,d),fk(d),_e&512&&et!==null&&Mj(et,et.return),d.flags&32){var tt=d.stateNode;try{ob(tt,"")}catch(ht){W$1(d,d.return,ht)}}if(_e&4&&(tt=d.stateNode,tt!=null)){var nt=d.memoizedProps,rt=et!==null?et.memoizedProps:nt,it=d.type,ot=d.updateQueue;if(d.updateQueue=null,ot!==null)try{it==="input"&&nt.type==="radio"&&nt.name!=null&&ab(tt,nt),vb(it,rt);var st=vb(it,nt);for(rt=0;rt<ot.length;rt+=2){var at=ot[rt],lt=ot[rt+1];at==="style"?sb(tt,lt):at==="dangerouslySetInnerHTML"?nb(tt,lt):at==="children"?ob(tt,lt):ta(tt,at,lt,st)}switch(it){case"input":bb(tt,nt);break;case"textarea":ib(tt,nt);break;case"select":var ct=tt._wrapperState.wasMultiple;tt._wrapperState.wasMultiple=!!nt.multiple;var ut=nt.value;ut!=null?fb(tt,!!nt.multiple,ut,!1):ct!==!!nt.multiple&&(nt.defaultValue!=null?fb(tt,!!nt.multiple,nt.defaultValue,!0):fb(tt,!!nt.multiple,nt.multiple?[]:"",!1))}tt[Pf]=nt}catch(ht){W$1(d,d.return,ht)}}break;case 6:if(dk(c,d),fk(d),_e&4){if(d.stateNode===null)throw Error(p$2(162));tt=d.stateNode,nt=d.memoizedProps;try{tt.nodeValue=nt}catch(ht){W$1(d,d.return,ht)}}break;case 3:if(dk(c,d),fk(d),_e&4&&et!==null&&et.memoizedState.isDehydrated)try{bd(c.containerInfo)}catch(ht){W$1(d,d.return,ht)}break;case 4:dk(c,d),fk(d);break;case 13:dk(c,d),fk(d),tt=d.child,tt.flags&8192&&(nt=tt.memoizedState!==null,tt.stateNode.isHidden=nt,!nt||tt.alternate!==null&&tt.alternate.memoizedState!==null||(gk=B$1())),_e&4&&bk(d);break;case 22:if(at=et!==null&&et.memoizedState!==null,d.mode&1?(U$1=(st=U$1)||at,dk(c,d),U$1=st):dk(c,d),fk(d),_e&8192){if(st=d.memoizedState!==null,(d.stateNode.isHidden=st)&&!at&&d.mode&1)for(V$1=d,at=d.child;at!==null;){for(lt=V$1=at;V$1!==null;){switch(ct=V$1,ut=ct.child,ct.tag){case 0:case 11:case 14:case 15:Qj(4,ct,ct.return);break;case 1:Mj(ct,ct.return);var dt=ct.stateNode;if(typeof dt.componentWillUnmount=="function"){_e=ct,et=ct.return;try{c=_e,dt.props=c.memoizedProps,dt.state=c.memoizedState,dt.componentWillUnmount()}catch(ht){W$1(_e,et,ht)}}break;case 5:Mj(ct,ct.return);break;case 22:if(ct.memoizedState!==null){hk(lt);continue}}ut!==null?(ut.return=ct,V$1=ut):hk(lt)}at=at.sibling}e:for(at=null,lt=d;;){if(lt.tag===5){if(at===null){at=lt;try{tt=lt.stateNode,st?(nt=tt.style,typeof nt.setProperty=="function"?nt.setProperty("display","none","important"):nt.display="none"):(it=lt.stateNode,ot=lt.memoizedProps.style,rt=ot!=null&&ot.hasOwnProperty("display")?ot.display:null,it.style.display=rb("display",rt))}catch(ht){W$1(d,d.return,ht)}}}else if(lt.tag===6){if(at===null)try{lt.stateNode.nodeValue=st?"":lt.memoizedProps}catch(ht){W$1(d,d.return,ht)}}else if((lt.tag!==22&&lt.tag!==23||lt.memoizedState===null||lt===d)&&lt.child!==null){lt.child.return=lt,lt=lt.child;continue}if(lt===d)break e;for(;lt.sibling===null;){if(lt.return===null||lt.return===d)break e;at===lt&&(at=null),lt=lt.return}at===lt&&(at=null),lt.sibling.return=lt.return,lt=lt.sibling}}break;case 19:dk(c,d),fk(d),_e&4&&bk(d);break;case 21:break;default:dk(c,d),fk(d)}}function fk(d){var c=d.flags;if(c&2){try{e:{for(var et=d.return;et!==null;){if(Uj(et)){var _e=et;break e}et=et.return}throw Error(p$2(160))}switch(_e.tag){case 5:var tt=_e.stateNode;_e.flags&32&&(ob(tt,""),_e.flags&=-33);var nt=Vj(d);Xj(d,nt,tt);break;case 3:case 4:var rt=_e.stateNode.containerInfo,it=Vj(d);Wj(d,it,rt);break;default:throw Error(p$2(161))}}catch(ot){W$1(d,d.return,ot)}d.flags&=-3}c&4096&&(d.flags&=-4097)}function ik(d,c,et){V$1=d,jk(d)}function jk(d,c,et){for(var _e=(d.mode&1)!==0;V$1!==null;){var tt=V$1,nt=tt.child;if(tt.tag===22&&_e){var rt=tt.memoizedState!==null||Kj;if(!rt){var it=tt.alternate,ot=it!==null&&it.memoizedState!==null||U$1;it=Kj;var st=U$1;if(Kj=rt,(U$1=ot)&&!st)for(V$1=tt;V$1!==null;)rt=V$1,ot=rt.child,rt.tag===22&&rt.memoizedState!==null?kk(tt):ot!==null?(ot.return=rt,V$1=ot):kk(tt);for(;nt!==null;)V$1=nt,jk(nt),nt=nt.sibling;V$1=tt,Kj=it,U$1=st}lk(d)}else tt.subtreeFlags&8772&&nt!==null?(nt.return=tt,V$1=nt):lk(d)}}function lk(d){for(;V$1!==null;){var c=V$1;if(c.flags&8772){var et=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:U$1||Rj(5,c);break;case 1:var _e=c.stateNode;if(c.flags&4&&!U$1)if(et===null)_e.componentDidMount();else{var tt=c.elementType===c.type?et.memoizedProps:Lg(c.type,et.memoizedProps);_e.componentDidUpdate(tt,et.memoizedState,_e.__reactInternalSnapshotBeforeUpdate)}var nt=c.updateQueue;nt!==null&&ih(c,nt,_e);break;case 3:var rt=c.updateQueue;if(rt!==null){if(et=null,c.child!==null)switch(c.child.tag){case 5:et=c.child.stateNode;break;case 1:et=c.child.stateNode}ih(c,rt,et)}break;case 5:var it=c.stateNode;if(et===null&&c.flags&4){et=it;var ot=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":ot.autoFocus&&et.focus();break;case"img":ot.src&&(et.src=ot.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var st=c.alternate;if(st!==null){var at=st.memoizedState;if(at!==null){var lt=at.dehydrated;lt!==null&&bd(lt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U$1||c.flags&512&&Sj(c)}catch(ct){W$1(c,c.return,ct)}}if(c===d){V$1=null;break}if(et=c.sibling,et!==null){et.return=c.return,V$1=et;break}V$1=c.return}}function hk(d){for(;V$1!==null;){var c=V$1;if(c===d){V$1=null;break}var et=c.sibling;if(et!==null){et.return=c.return,V$1=et;break}V$1=c.return}}function kk(d){for(;V$1!==null;){var c=V$1;try{switch(c.tag){case 0:case 11:case 15:var et=c.return;try{Rj(4,c)}catch(ot){W$1(c,et,ot)}break;case 1:var _e=c.stateNode;if(typeof _e.componentDidMount=="function"){var tt=c.return;try{_e.componentDidMount()}catch(ot){W$1(c,tt,ot)}}var nt=c.return;try{Sj(c)}catch(ot){W$1(c,nt,ot)}break;case 5:var rt=c.return;try{Sj(c)}catch(ot){W$1(c,rt,ot)}}}catch(ot){W$1(c,c.return,ot)}if(c===d){V$1=null;break}var it=c.sibling;if(it!==null){it.return=c.return,V$1=it;break}V$1=c.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K$1=0,R$1=null,Y$1=null,Z$1=0,gj=0,fj=Uf(0),T$1=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$1(){return K$1&6?B$1():Bk!==-1?Bk:Bk=B$1()}function lh(d){return d.mode&1?K$1&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(d=C$1,d!==0||(d=window.event,d=d===void 0?16:jd(d.type)),d):1}function mh(d,c,et,_e){if(50<zk)throw zk=0,Ak=null,Error(p$2(185));Ac(d,et,_e),(!(K$1&2)||d!==R$1)&&(d===R$1&&(!(K$1&2)&&(rk|=et),T$1===4&&Dk(d,Z$1)),Ek(d,_e),et===1&&K$1===0&&!(c.mode&1)&&(Hj=B$1()+500,fg&&jg()))}function Ek(d,c){var et=d.callbackNode;wc(d,c);var _e=uc(d,d===R$1?Z$1:0);if(_e===0)et!==null&&bc(et),d.callbackNode=null,d.callbackPriority=0;else if(c=_e&-_e,d.callbackPriority!==c){if(et!=null&&bc(et),c===1)d.tag===0?ig(Fk.bind(null,d)):hg(Fk.bind(null,d)),Jf(function(){!(K$1&6)&&jg()}),et=null;else{switch(Dc(_e)){case 1:et=fc;break;case 4:et=gc;break;case 16:et=hc;break;case 536870912:et=jc;break;default:et=hc}et=Gk(et,Hk.bind(null,d))}d.callbackPriority=c,d.callbackNode=et}}function Hk(d,c){if(Bk=-1,Ck=0,K$1&6)throw Error(p$2(327));var et=d.callbackNode;if(Ik()&&d.callbackNode!==et)return null;var _e=uc(d,d===R$1?Z$1:0);if(_e===0)return null;if(_e&30||_e&d.expiredLanes||c)c=Jk(d,_e);else{c=_e;var tt=K$1;K$1|=2;var nt=Kk();(R$1!==d||Z$1!==c)&&(vk=null,Hj=B$1()+500,Lk(d,c));do try{Mk();break}catch(it){Nk(d,it)}while(!0);Qg(),nk.current=nt,K$1=tt,Y$1!==null?c=0:(R$1=null,Z$1=0,c=T$1)}if(c!==0){if(c===2&&(tt=xc(d),tt!==0&&(_e=tt,c=Ok(d,tt))),c===1)throw et=qk,Lk(d,0),Dk(d,_e),Ek(d,B$1()),et;if(c===6)Dk(d,_e);else{if(tt=d.current.alternate,!(_e&30)&&!Pk(tt)&&(c=Jk(d,_e),c===2&&(nt=xc(d),nt!==0&&(_e=nt,c=Ok(d,nt))),c===1))throw et=qk,Lk(d,0),Dk(d,_e),Ek(d,B$1()),et;switch(d.finishedWork=tt,d.finishedLanes=_e,c){case 0:case 1:throw Error(p$2(345));case 2:Qk(d,uk,vk);break;case 3:if(Dk(d,_e),(_e&130023424)===_e&&(c=gk+500-B$1(),10<c)){if(uc(d,0)!==0)break;if(tt=d.suspendedLanes,(tt&_e)!==_e){L$1(),d.pingedLanes|=d.suspendedLanes&tt;break}d.timeoutHandle=Ff(Qk.bind(null,d,uk,vk),c);break}Qk(d,uk,vk);break;case 4:if(Dk(d,_e),(_e&4194240)===_e)break;for(c=d.eventTimes,tt=-1;0<_e;){var rt=31-oc(_e);nt=1<<rt,rt=c[rt],rt>tt&&(tt=rt),_e&=~nt}if(_e=tt,_e=B$1()-_e,_e=(120>_e?120:480>_e?480:1080>_e?1080:1920>_e?1920:3e3>_e?3e3:4320>_e?4320:1960*mk(_e/1960))-_e,10<_e){d.timeoutHandle=Ff(Qk.bind(null,d,uk,vk),_e);break}Qk(d,uk,vk);break;case 5:Qk(d,uk,vk);break;default:throw Error(p$2(329))}}}return Ek(d,B$1()),d.callbackNode===et?Hk.bind(null,d):null}function Ok(d,c){var et=tk;return d.current.memoizedState.isDehydrated&&(Lk(d,c).flags|=256),d=Jk(d,c),d!==2&&(c=uk,uk=et,c!==null&&Gj(c)),d}function Gj(d){uk===null?uk=d:uk.push.apply(uk,d)}function Pk(d){for(var c=d;;){if(c.flags&16384){var et=c.updateQueue;if(et!==null&&(et=et.stores,et!==null))for(var _e=0;_e<et.length;_e++){var tt=et[_e],nt=tt.getSnapshot;tt=tt.value;try{if(!He(nt(),tt))return!1}catch{return!1}}}if(et=c.child,c.subtreeFlags&16384&&et!==null)et.return=c,c=et;else{if(c===d)break;for(;c.sibling===null;){if(c.return===null||c.return===d)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Dk(d,c){for(c&=~sk,c&=~rk,d.suspendedLanes|=c,d.pingedLanes&=~c,d=d.expirationTimes;0<c;){var et=31-oc(c),_e=1<<et;d[et]=-1,c&=~_e}}function Fk(d){if(K$1&6)throw Error(p$2(327));Ik();var c=uc(d,0);if(!(c&1))return Ek(d,B$1()),null;var et=Jk(d,c);if(d.tag!==0&&et===2){var _e=xc(d);_e!==0&&(c=_e,et=Ok(d,_e))}if(et===1)throw et=qk,Lk(d,0),Dk(d,c),Ek(d,B$1()),et;if(et===6)throw Error(p$2(345));return d.finishedWork=d.current.alternate,d.finishedLanes=c,Qk(d,uk,vk),Ek(d,B$1()),null}function Rk(d,c){var et=K$1;K$1|=1;try{return d(c)}finally{K$1=et,K$1===0&&(Hj=B$1()+500,fg&&jg())}}function Sk(d){xk!==null&&xk.tag===0&&!(K$1&6)&&Ik();var c=K$1;K$1|=1;var et=pk.transition,_e=C$1;try{if(pk.transition=null,C$1=1,d)return d()}finally{C$1=_e,pk.transition=et,K$1=c,!(K$1&6)&&jg()}}function Ij(){gj=fj.current,E$1(fj)}function Lk(d,c){d.finishedWork=null,d.finishedLanes=0;var et=d.timeoutHandle;if(et!==-1&&(d.timeoutHandle=-1,Gf(et)),Y$1!==null)for(et=Y$1.return;et!==null;){var _e=et;switch(wg(_e),_e.tag){case 1:_e=_e.type.childContextTypes,_e!=null&&$f();break;case 3:Jh(),E$1(Wf),E$1(H$1),Oh();break;case 5:Lh(_e);break;case 4:Jh();break;case 13:E$1(M$1);break;case 19:E$1(M$1);break;case 10:Rg(_e.type._context);break;case 22:case 23:Ij()}et=et.return}if(R$1=d,Y$1=d=wh(d.current,null),Z$1=gj=c,T$1=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(c=0;c<Wg.length;c++)if(et=Wg[c],_e=et.interleaved,_e!==null){et.interleaved=null;var tt=_e.next,nt=et.pending;if(nt!==null){var rt=nt.next;nt.next=tt,_e.next=rt}et.pending=_e}Wg=null}return d}function Nk(d,c){do{var et=Y$1;try{if(Qg(),Ph.current=ai,Sh){for(var _e=N$1.memoizedState;_e!==null;){var tt=_e.queue;tt!==null&&(tt.pending=null),_e=_e.next}Sh=!1}if(Rh=0,P$1=O$1=N$1=null,Th=!1,Uh=0,ok.current=null,et===null||et.return===null){T$1=1,qk=c,Y$1=null;break}e:{var nt=d,rt=et.return,it=et,ot=c;if(c=Z$1,it.flags|=32768,ot!==null&&typeof ot=="object"&&typeof ot.then=="function"){var st=ot,at=it,lt=at.tag;if(!(at.mode&1)&&(lt===0||lt===11||lt===15)){var ct=at.alternate;ct?(at.updateQueue=ct.updateQueue,at.memoizedState=ct.memoizedState,at.lanes=ct.lanes):(at.updateQueue=null,at.memoizedState=null)}var ut=Vi(rt);if(ut!==null){ut.flags&=-257,Wi(ut,rt,it,nt,c),ut.mode&1&&Ti(nt,st,c),c=ut,ot=st;var dt=c.updateQueue;if(dt===null){var ht=new Set;ht.add(ot),c.updateQueue=ht}else dt.add(ot);break e}else{if(!(c&1)){Ti(nt,st,c),uj();break e}ot=Error(p$2(426))}}else if(I$1&&it.mode&1){var yt=Vi(rt);if(yt!==null){!(yt.flags&65536)&&(yt.flags|=256),Wi(yt,rt,it,nt,c),Jg(Ki(ot,it));break e}}nt=ot=Ki(ot,it),T$1!==4&&(T$1=2),tk===null?tk=[nt]:tk.push(nt),nt=rt;do{switch(nt.tag){case 3:nt.flags|=65536,c&=-c,nt.lanes|=c;var gt=Oi(nt,ot,c);fh(nt,gt);break e;case 1:it=ot;var ft=nt.type,mt=nt.stateNode;if(!(nt.flags&128)&&(typeof ft.getDerivedStateFromError=="function"||mt!==null&&typeof mt.componentDidCatch=="function"&&(Si===null||!Si.has(mt)))){nt.flags|=65536,c&=-c,nt.lanes|=c;var pt=Ri(nt,it,c);fh(nt,pt);break e}}nt=nt.return}while(nt!==null)}Tk(et)}catch(xt){c=xt,Y$1===et&&et!==null&&(Y$1=et=et.return);continue}break}while(!0)}function Kk(){var d=nk.current;return nk.current=ai,d===null?ai:d}function uj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),R$1===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$1,Z$1)}function Jk(d,c){var et=K$1;K$1|=2;var _e=Kk();(R$1!==d||Z$1!==c)&&(vk=null,Lk(d,c));do try{Uk();break}catch(tt){Nk(d,tt)}while(!0);if(Qg(),K$1=et,nk.current=_e,Y$1!==null)throw Error(p$2(261));return R$1=null,Z$1=0,T$1}function Uk(){for(;Y$1!==null;)Vk(Y$1)}function Mk(){for(;Y$1!==null&&!cc();)Vk(Y$1)}function Vk(d){var c=Wk(d.alternate,d,gj);d.memoizedProps=d.pendingProps,c===null?Tk(d):Y$1=c,ok.current=null}function Tk(d){var c=d;do{var et=c.alternate;if(d=c.return,c.flags&32768){if(et=Jj(et,c),et!==null){et.flags&=32767,Y$1=et;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{T$1=6,Y$1=null;return}}else if(et=Fj(et,c,gj),et!==null){Y$1=et;return}if(c=c.sibling,c!==null){Y$1=c;return}Y$1=c=d}while(c!==null);T$1===0&&(T$1=5)}function Qk(d,c,et){var _e=C$1,tt=pk.transition;try{pk.transition=null,C$1=1,Xk(d,c,et,_e)}finally{pk.transition=tt,C$1=_e}return null}function Xk(d,c,et,_e){do Ik();while(xk!==null);if(K$1&6)throw Error(p$2(327));et=d.finishedWork;var tt=d.finishedLanes;if(et===null)return null;if(d.finishedWork=null,d.finishedLanes=0,et===d.current)throw Error(p$2(177));d.callbackNode=null,d.callbackPriority=0;var nt=et.lanes|et.childLanes;if(Bc(d,nt),d===R$1&&(Y$1=R$1=null,Z$1=0),!(et.subtreeFlags&2064)&&!(et.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),nt=(et.flags&15990)!==0,et.subtreeFlags&15990||nt){nt=pk.transition,pk.transition=null;var rt=C$1;C$1=1;var it=K$1;K$1|=4,ok.current=null,Pj(d,et),ek(et,d),Oe(Df),dd=!!Cf,Df=Cf=null,d.current=et,ik(et),dc(),K$1=it,C$1=rt,pk.transition=nt}else d.current=et;if(wk&&(wk=!1,xk=d,yk=tt),nt=d.pendingLanes,nt===0&&(Si=null),mc(et.stateNode),Ek(d,B$1()),c!==null)for(_e=d.onRecoverableError,et=0;et<c.length;et++)tt=c[et],_e(tt.value,{componentStack:tt.stack,digest:tt.digest});if(Pi)throw Pi=!1,d=Qi,Qi=null,d;return yk&1&&d.tag!==0&&Ik(),nt=d.pendingLanes,nt&1?d===Ak?zk++:(zk=0,Ak=d):zk=0,jg(),null}function Ik(){if(xk!==null){var d=Dc(yk),c=pk.transition,et=C$1;try{if(pk.transition=null,C$1=16>d?16:d,xk===null)var _e=!1;else{if(d=xk,xk=null,yk=0,K$1&6)throw Error(p$2(331));var tt=K$1;for(K$1|=4,V$1=d.current;V$1!==null;){var nt=V$1,rt=nt.child;if(V$1.flags&16){var it=nt.deletions;if(it!==null){for(var ot=0;ot<it.length;ot++){var st=it[ot];for(V$1=st;V$1!==null;){var at=V$1;switch(at.tag){case 0:case 11:case 15:Qj(8,at,nt)}var lt=at.child;if(lt!==null)lt.return=at,V$1=lt;else for(;V$1!==null;){at=V$1;var ct=at.sibling,ut=at.return;if(Tj(at),at===st){V$1=null;break}if(ct!==null){ct.return=ut,V$1=ct;break}V$1=ut}}}var dt=nt.alternate;if(dt!==null){var ht=dt.child;if(ht!==null){dt.child=null;do{var yt=ht.sibling;ht.sibling=null,ht=yt}while(ht!==null)}}V$1=nt}}if(nt.subtreeFlags&2064&&rt!==null)rt.return=nt,V$1=rt;else e:for(;V$1!==null;){if(nt=V$1,nt.flags&2048)switch(nt.tag){case 0:case 11:case 15:Qj(9,nt,nt.return)}var gt=nt.sibling;if(gt!==null){gt.return=nt.return,V$1=gt;break e}V$1=nt.return}}var ft=d.current;for(V$1=ft;V$1!==null;){rt=V$1;var mt=rt.child;if(rt.subtreeFlags&2064&&mt!==null)mt.return=rt,V$1=mt;else e:for(rt=ft;V$1!==null;){if(it=V$1,it.flags&2048)try{switch(it.tag){case 0:case 11:case 15:Rj(9,it)}}catch(xt){W$1(it,it.return,xt)}if(it===rt){V$1=null;break e}var pt=it.sibling;if(pt!==null){pt.return=it.return,V$1=pt;break e}V$1=it.return}}if(K$1=tt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,d)}catch{}_e=!0}return _e}finally{C$1=et,pk.transition=c}}return!1}function Yk(d,c,et){c=Ki(et,c),c=Oi(d,c,1),d=dh(d,c,1),c=L$1(),d!==null&&(Ac(d,1,c),Ek(d,c))}function W$1(d,c,et){if(d.tag===3)Yk(d,d,et);else for(;c!==null;){if(c.tag===3){Yk(c,d,et);break}else if(c.tag===1){var _e=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof _e.componentDidCatch=="function"&&(Si===null||!Si.has(_e))){d=Ki(et,d),d=Ri(c,d,1),c=dh(c,d,1),d=L$1(),c!==null&&(Ac(c,1,d),Ek(c,d));break}}c=c.return}}function Ui(d,c,et){var _e=d.pingCache;_e!==null&&_e.delete(c),c=L$1(),d.pingedLanes|=d.suspendedLanes&et,R$1===d&&(Z$1&et)===et&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B$1()-gk?Lk(d,0):sk|=et),Ek(d,c)}function Zk(d,c){c===0&&(d.mode&1?(c=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):c=1);var et=L$1();d=Zg(d,c),d!==null&&(Ac(d,c,et),Ek(d,et))}function vj(d){var c=d.memoizedState,et=0;c!==null&&(et=c.retryLane),Zk(d,et)}function ck(d,c){var et=0;switch(d.tag){case 13:var _e=d.stateNode,tt=d.memoizedState;tt!==null&&(et=tt.retryLane);break;case 19:_e=d.stateNode;break;default:throw Error(p$2(314))}_e!==null&&_e.delete(c),Zk(d,et)}var Wk;Wk=function(d,c,et){if(d!==null)if(d.memoizedProps!==c.pendingProps||Wf.current)Ug=!0;else{if(!(d.lanes&et)&&!(c.flags&128))return Ug=!1,zj(d,c,et);Ug=!!(d.flags&131072)}else Ug=!1,I$1&&c.flags&1048576&&ug(c,ng,c.index);switch(c.lanes=0,c.tag){case 2:var _e=c.type;jj(d,c),d=c.pendingProps;var tt=Yf(c,H$1.current);Tg(c,et),tt=Xh(null,c,_e,d,tt,et);var nt=bi();return c.flags|=1,typeof tt=="object"&&tt!==null&&typeof tt.render=="function"&&tt.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Zf(_e)?(nt=!0,cg(c)):nt=!1,c.memoizedState=tt.state!==null&&tt.state!==void 0?tt.state:null,ah(c),tt.updater=nh,c.stateNode=tt,tt._reactInternals=c,rh(c,_e,d,et),c=kj(null,c,_e,!0,nt,et)):(c.tag=0,I$1&&nt&&vg(c),Yi(null,c,tt,et),c=c.child),c;case 16:_e=c.elementType;e:{switch(jj(d,c),d=c.pendingProps,tt=_e._init,_e=tt(_e._payload),c.type=_e,tt=c.tag=$k(_e),d=Lg(_e,d),tt){case 0:c=dj(null,c,_e,d,et);break e;case 1:c=ij(null,c,_e,d,et);break e;case 11:c=Zi(null,c,_e,d,et);break e;case 14:c=aj(null,c,_e,Lg(_e.type,d),et);break e}throw Error(p$2(306,_e,""))}return c;case 0:return _e=c.type,tt=c.pendingProps,tt=c.elementType===_e?tt:Lg(_e,tt),dj(d,c,_e,tt,et);case 1:return _e=c.type,tt=c.pendingProps,tt=c.elementType===_e?tt:Lg(_e,tt),ij(d,c,_e,tt,et);case 3:e:{if(lj(c),d===null)throw Error(p$2(387));_e=c.pendingProps,nt=c.memoizedState,tt=nt.element,bh(d,c),gh(c,_e,null,et);var rt=c.memoizedState;if(_e=rt.element,nt.isDehydrated)if(nt={element:_e,isDehydrated:!1,cache:rt.cache,pendingSuspenseBoundaries:rt.pendingSuspenseBoundaries,transitions:rt.transitions},c.updateQueue.baseState=nt,c.memoizedState=nt,c.flags&256){tt=Ki(Error(p$2(423)),c),c=mj(d,c,_e,et,tt);break e}else if(_e!==tt){tt=Ki(Error(p$2(424)),c),c=mj(d,c,_e,et,tt);break e}else for(yg=Lf(c.stateNode.containerInfo.firstChild),xg=c,I$1=!0,zg=null,et=Ch(c,null,_e,et),c.child=et;et;)et.flags=et.flags&-3|4096,et=et.sibling;else{if(Ig(),_e===tt){c=$i(d,c,et);break e}Yi(d,c,_e,et)}c=c.child}return c;case 5:return Kh(c),d===null&&Eg(c),_e=c.type,tt=c.pendingProps,nt=d!==null?d.memoizedProps:null,rt=tt.children,Ef(_e,tt)?rt=null:nt!==null&&Ef(_e,nt)&&(c.flags|=32),hj(d,c),Yi(d,c,rt,et),c.child;case 6:return d===null&&Eg(c),null;case 13:return pj(d,c,et);case 4:return Ih(c,c.stateNode.containerInfo),_e=c.pendingProps,d===null?c.child=Bh(c,null,_e,et):Yi(d,c,_e,et),c.child;case 11:return _e=c.type,tt=c.pendingProps,tt=c.elementType===_e?tt:Lg(_e,tt),Zi(d,c,_e,tt,et);case 7:return Yi(d,c,c.pendingProps,et),c.child;case 8:return Yi(d,c,c.pendingProps.children,et),c.child;case 12:return Yi(d,c,c.pendingProps.children,et),c.child;case 10:e:{if(_e=c.type._context,tt=c.pendingProps,nt=c.memoizedProps,rt=tt.value,G$1(Mg,_e._currentValue),_e._currentValue=rt,nt!==null)if(He(nt.value,rt)){if(nt.children===tt.children&&!Wf.current){c=$i(d,c,et);break e}}else for(nt=c.child,nt!==null&&(nt.return=c);nt!==null;){var it=nt.dependencies;if(it!==null){rt=nt.child;for(var ot=it.firstContext;ot!==null;){if(ot.context===_e){if(nt.tag===1){ot=ch(-1,et&-et),ot.tag=2;var st=nt.updateQueue;if(st!==null){st=st.shared;var at=st.pending;at===null?ot.next=ot:(ot.next=at.next,at.next=ot),st.pending=ot}}nt.lanes|=et,ot=nt.alternate,ot!==null&&(ot.lanes|=et),Sg(nt.return,et,c),it.lanes|=et;break}ot=ot.next}}else if(nt.tag===10)rt=nt.type===c.type?null:nt.child;else if(nt.tag===18){if(rt=nt.return,rt===null)throw Error(p$2(341));rt.lanes|=et,it=rt.alternate,it!==null&&(it.lanes|=et),Sg(rt,et,c),rt=nt.sibling}else rt=nt.child;if(rt!==null)rt.return=nt;else for(rt=nt;rt!==null;){if(rt===c){rt=null;break}if(nt=rt.sibling,nt!==null){nt.return=rt.return,rt=nt;break}rt=rt.return}nt=rt}Yi(d,c,tt.children,et),c=c.child}return c;case 9:return tt=c.type,_e=c.pendingProps.children,Tg(c,et),tt=Vg(tt),_e=_e(tt),c.flags|=1,Yi(d,c,_e,et),c.child;case 14:return _e=c.type,tt=Lg(_e,c.pendingProps),tt=Lg(_e.type,tt),aj(d,c,_e,tt,et);case 15:return cj(d,c,c.type,c.pendingProps,et);case 17:return _e=c.type,tt=c.pendingProps,tt=c.elementType===_e?tt:Lg(_e,tt),jj(d,c),c.tag=1,Zf(_e)?(d=!0,cg(c)):d=!1,Tg(c,et),ph(c,_e,tt),rh(c,_e,tt,et),kj(null,c,_e,!0,d,et);case 19:return yj(d,c,et);case 22:return ej(d,c,et)}throw Error(p$2(156,c.tag))};function Gk(d,c){return ac(d,c)}function al(d,c,et,_e){this.tag=d,this.key=et,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_e,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(d,c,et,_e){return new al(d,c,et,_e)}function bj(d){return d=d.prototype,!(!d||!d.isReactComponent)}function $k(d){if(typeof d=="function")return bj(d)?1:0;if(d!=null){if(d=d.$$typeof,d===Da)return 11;if(d===Ga)return 14}return 2}function wh(d,c){var et=d.alternate;return et===null?(et=Bg(d.tag,c,d.key,d.mode),et.elementType=d.elementType,et.type=d.type,et.stateNode=d.stateNode,et.alternate=d,d.alternate=et):(et.pendingProps=c,et.type=d.type,et.flags=0,et.subtreeFlags=0,et.deletions=null),et.flags=d.flags&14680064,et.childLanes=d.childLanes,et.lanes=d.lanes,et.child=d.child,et.memoizedProps=d.memoizedProps,et.memoizedState=d.memoizedState,et.updateQueue=d.updateQueue,c=d.dependencies,et.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},et.sibling=d.sibling,et.index=d.index,et.ref=d.ref,et}function yh(d,c,et,_e,tt,nt){var rt=2;if(_e=d,typeof d=="function")bj(d)&&(rt=1);else if(typeof d=="string")rt=5;else e:switch(d){case ya:return Ah(et.children,tt,nt,c);case za:rt=8,tt|=8;break;case Aa:return d=Bg(12,et,c,tt|2),d.elementType=Aa,d.lanes=nt,d;case Ea:return d=Bg(13,et,c,tt),d.elementType=Ea,d.lanes=nt,d;case Fa:return d=Bg(19,et,c,tt),d.elementType=Fa,d.lanes=nt,d;case Ia:return qj(et,tt,nt,c);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case Ba:rt=10;break e;case Ca:rt=9;break e;case Da:rt=11;break e;case Ga:rt=14;break e;case Ha:rt=16,_e=null;break e}throw Error(p$2(130,d==null?d:typeof d,""))}return c=Bg(rt,et,c,tt),c.elementType=d,c.type=_e,c.lanes=nt,c}function Ah(d,c,et,_e){return d=Bg(7,d,_e,c),d.lanes=et,d}function qj(d,c,et,_e){return d=Bg(22,d,_e,c),d.elementType=Ia,d.lanes=et,d.stateNode={isHidden:!1},d}function xh(d,c,et){return d=Bg(6,d,null,c),d.lanes=et,d}function zh(d,c,et){return c=Bg(4,d.children!==null?d.children:[],d.key,c),c.lanes=et,c.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},c}function bl(d,c,et,_e,tt){this.tag=c,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=_e,this.onRecoverableError=tt,this.mutableSourceEagerHydrationData=null}function cl(d,c,et,_e,tt,nt,rt,it,ot){return d=new bl(d,c,et,it,ot),c===1?(c=1,nt===!0&&(c|=8)):c=0,nt=Bg(3,null,null,c),d.current=nt,nt.stateNode=d,nt.memoizedState={element:_e,isDehydrated:et,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(nt),d}function dl(d,c,et){var _e=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:_e==null?null:""+_e,children:d,containerInfo:c,implementation:et}}function el(d){if(!d)return Vf;d=d._reactInternals;e:{if(Vb(d)!==d||d.tag!==1)throw Error(p$2(170));var c=d;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Zf(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(p$2(171))}if(d.tag===1){var et=d.type;if(Zf(et))return bg(d,et,c)}return c}function fl(d,c,et,_e,tt,nt,rt,it,ot){return d=cl(et,_e,!0,d,tt,nt,rt,it,ot),d.context=el(null),et=d.current,_e=L$1(),tt=lh(et),nt=ch(_e,tt),nt.callback=c??null,dh(et,nt,tt),d.current.lanes=tt,Ac(d,tt,_e),Ek(d,_e),d}function gl(d,c,et,_e){var tt=c.current,nt=L$1(),rt=lh(tt);return et=el(et),c.context===null?c.context=et:c.pendingContext=et,c=ch(nt,rt),c.payload={element:d},_e=_e===void 0?null:_e,_e!==null&&(c.callback=_e),d=dh(tt,c,rt),d!==null&&(mh(d,tt,rt,nt),eh(d,tt,rt)),rt}function hl(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function il(d,c){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var et=d.retryLane;d.retryLane=et!==0&&et<c?et:c}}function jl(d,c){il(d,c),(d=d.alternate)&&il(d,c)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(d){console.error(d)};function ml(d){this._internalRoot=d}nl.prototype.render=ml.prototype.render=function(d){var c=this._internalRoot;if(c===null)throw Error(p$2(409));gl(d,c,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var c=d.containerInfo;Sk(function(){gl(null,d,null,null)}),c[uf]=null}};function nl(d){this._internalRoot=d}nl.prototype.unstable_scheduleHydration=function(d){if(d){var c=Hc();d={blockedOn:null,target:d,priority:c};for(var et=0;et<Qc.length&&c!==0&&c<Qc[et].priority;et++);Qc.splice(et,0,d),et===0&&Vc(d)}};function ol(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function pl(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(d,c,et,_e,tt){if(tt){if(typeof _e=="function"){var nt=_e;_e=function(){var st=hl(rt);nt.call(st)}}var rt=fl(c,_e,d,0,null,!1,!1,"",ql);return d._reactRootContainer=rt,d[uf]=rt.current,sf(d.nodeType===8?d.parentNode:d),Sk(),rt}for(;tt=d.lastChild;)d.removeChild(tt);if(typeof _e=="function"){var it=_e;_e=function(){var st=hl(ot);it.call(st)}}var ot=cl(d,0,!1,null,null,!1,!1,"",ql);return d._reactRootContainer=ot,d[uf]=ot.current,sf(d.nodeType===8?d.parentNode:d),Sk(function(){gl(c,ot,et,_e)}),ot}function sl(d,c,et,_e,tt){var nt=et._reactRootContainer;if(nt){var rt=nt;if(typeof tt=="function"){var it=tt;tt=function(){var ot=hl(rt);it.call(ot)}}gl(c,rt,d,tt)}else rt=rl(et,c,d,tt,_e);return hl(rt)}Ec=function(d){switch(d.tag){case 3:var c=d.stateNode;if(c.current.memoizedState.isDehydrated){var et=tc(c.pendingLanes);et!==0&&(Cc(c,et|1),Ek(c,B$1()),!(K$1&6)&&(Hj=B$1()+500,jg()))}break;case 13:Sk(function(){var _e=Zg(d,1);if(_e!==null){var tt=L$1();mh(_e,d,1,tt)}}),jl(d,1)}};Fc=function(d){if(d.tag===13){var c=Zg(d,134217728);if(c!==null){var et=L$1();mh(c,d,134217728,et)}jl(d,134217728)}};Gc=function(d){if(d.tag===13){var c=lh(d),et=Zg(d,c);if(et!==null){var _e=L$1();mh(et,d,c,_e)}jl(d,c)}};Hc=function(){return C$1};Ic=function(d,c){var et=C$1;try{return C$1=d,c()}finally{C$1=et}};yb=function(d,c,et){switch(c){case"input":if(bb(d,et),c=et.name,et.type==="radio"&&c!=null){for(et=d;et.parentNode;)et=et.parentNode;for(et=et.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<et.length;c++){var _e=et[c];if(_e!==d&&_e.form===d.form){var tt=Db(_e);if(!tt)throw Error(p$2(90));Wa(_e),bb(_e,tt)}}}break;case"textarea":ib(d,et);break;case"select":c=et.value,c!=null&&fb(d,!!et.multiple,c,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=Zb(d),d===null?null:d.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(d,c){var et=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(c))throw Error(p$2(200));return dl(d,c,null,et)};reactDom_production_min.createRoot=function(d,c){if(!ol(d))throw Error(p$2(299));var et=!1,_e="",tt=ll;return c!=null&&(c.unstable_strictMode===!0&&(et=!0),c.identifierPrefix!==void 0&&(_e=c.identifierPrefix),c.onRecoverableError!==void 0&&(tt=c.onRecoverableError)),c=cl(d,1,!1,null,null,et,!1,_e,tt),d[uf]=c.current,sf(d.nodeType===8?d.parentNode:d),new ml(c)};reactDom_production_min.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var c=d._reactInternals;if(c===void 0)throw typeof d.render=="function"?Error(p$2(188)):(d=Object.keys(d).join(","),Error(p$2(268,d)));return d=Zb(c),d=d===null?null:d.stateNode,d};reactDom_production_min.flushSync=function(d){return Sk(d)};reactDom_production_min.hydrate=function(d,c,et){if(!pl(c))throw Error(p$2(200));return sl(null,d,c,!0,et)};reactDom_production_min.hydrateRoot=function(d,c,et){if(!ol(d))throw Error(p$2(405));var _e=et!=null&&et.hydratedSources||null,tt=!1,nt="",rt=ll;if(et!=null&&(et.unstable_strictMode===!0&&(tt=!0),et.identifierPrefix!==void 0&&(nt=et.identifierPrefix),et.onRecoverableError!==void 0&&(rt=et.onRecoverableError)),c=fl(c,null,d,1,et??null,tt,!1,nt,rt),d[uf]=c.current,sf(d),_e)for(d=0;d<_e.length;d++)et=_e[d],tt=et._getVersion,tt=tt(et._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[et,tt]:c.mutableSourceEagerHydrationData.push(et,tt);return new nl(c)};reactDom_production_min.render=function(d,c,et){if(!pl(c))throw Error(p$2(200));return sl(null,d,c,!1,et)};reactDom_production_min.unmountComponentAtNode=function(d){if(!pl(d))throw Error(p$2(40));return d._reactRootContainer?(Sk(function(){sl(null,null,d,!1,function(){d._reactRootContainer=null,d[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(d,c,et,_e){if(!pl(et))throw Error(p$2(200));if(d==null||d._reactInternals===void 0)throw Error(p$2(38));return sl(d,c,et,!1,_e)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(d){console.error(d)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var m$1=reactDomExports;client.createRoot=m$1.createRoot,client.hydrateRoot=m$1.hydrateRoot;/**
 * @remix-run/router v1.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(d){for(var c=1;c<arguments.length;c++){var et=arguments[c];for(var _e in et)Object.prototype.hasOwnProperty.call(et,_e)&&(d[_e]=et[_e])}return d},_extends$9.apply(this,arguments)}var Action$1;(function(d){d.Pop="POP",d.Push="PUSH",d.Replace="REPLACE"})(Action$1||(Action$1={}));const PopStateEventType="popstate";function createHashHistory(d){d===void 0&&(d={});function c(tt,nt){let{pathname:rt="/",search:it="",hash:ot=""}=parsePath(tt.location.hash.substr(1));return!rt.startsWith("/")&&!rt.startsWith(".")&&(rt="/"+rt),createLocation("",{pathname:rt,search:it,hash:ot},nt.state&&nt.state.usr||null,nt.state&&nt.state.key||"default")}function et(tt,nt){let rt=tt.document.querySelector("base"),it="";if(rt&&rt.getAttribute("href")){let ot=tt.location.href,st=ot.indexOf("#");it=st===-1?ot:ot.slice(0,st)}return it+"#"+(typeof nt=="string"?nt:createPath(nt))}function _e(tt,nt){warning$2(tt.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(nt)+")")}return getUrlBasedHistory(c,et,_e,d)}function invariant$2(d,c){if(d===!1||d===null||typeof d>"u")throw new Error(c)}function warning$2(d,c){if(!d){typeof console<"u"&&console.warn(c);try{throw new Error(c)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(d,c){return{usr:d.state,key:d.key,idx:c}}function createLocation(d,c,et,_e){return et===void 0&&(et=null),_extends$9({pathname:typeof d=="string"?d:d.pathname,search:"",hash:""},typeof c=="string"?parsePath(c):c,{state:et,key:c&&c.key||_e||createKey()})}function createPath(d){let{pathname:c="/",search:et="",hash:_e=""}=d;return et&&et!=="?"&&(c+=et.charAt(0)==="?"?et:"?"+et),_e&&_e!=="#"&&(c+=_e.charAt(0)==="#"?_e:"#"+_e),c}function parsePath(d){let c={};if(d){let et=d.indexOf("#");et>=0&&(c.hash=d.substr(et),d=d.substr(0,et));let _e=d.indexOf("?");_e>=0&&(c.search=d.substr(_e),d=d.substr(0,_e)),d&&(c.pathname=d)}return c}function getUrlBasedHistory(d,c,et,_e){_e===void 0&&(_e={});let{window:tt=document.defaultView,v5Compat:nt=!1}=_e,rt=tt.history,it=Action$1.Pop,ot=null,st=at();st==null&&(st=0,rt.replaceState(_extends$9({},rt.state,{idx:st}),""));function at(){return(rt.state||{idx:null}).idx}function lt(){it=Action$1.Pop;let yt=at(),gt=yt==null?null:yt-st;st=yt,ot&&ot({action:it,location:ht.location,delta:gt})}function ct(yt,gt){it=Action$1.Push;let ft=createLocation(ht.location,yt,gt);et&&et(ft,yt),st=at()+1;let mt=getHistoryState(ft,st),pt=ht.createHref(ft);try{rt.pushState(mt,"",pt)}catch(xt){if(xt instanceof DOMException&&xt.name==="DataCloneError")throw xt;tt.location.assign(pt)}nt&&ot&&ot({action:it,location:ht.location,delta:1})}function ut(yt,gt){it=Action$1.Replace;let ft=createLocation(ht.location,yt,gt);et&&et(ft,yt),st=at();let mt=getHistoryState(ft,st),pt=ht.createHref(ft);rt.replaceState(mt,"",pt),nt&&ot&&ot({action:it,location:ht.location,delta:0})}function dt(yt){let gt=tt.location.origin!=="null"?tt.location.origin:tt.location.href,ft=typeof yt=="string"?yt:createPath(yt);return invariant$2(gt,"No window.location.(origin|href) available to create URL for href: "+ft),new URL(ft,gt)}let ht={get action(){return it},get location(){return d(tt,rt)},listen(yt){if(ot)throw new Error("A history only accepts one active listener");return tt.addEventListener(PopStateEventType,lt),ot=yt,()=>{tt.removeEventListener(PopStateEventType,lt),ot=null}},createHref(yt){return c(tt,yt)},createURL:dt,encodeLocation(yt){let gt=dt(yt);return{pathname:gt.pathname,search:gt.search,hash:gt.hash}},push:ct,replace:ut,go(yt){return rt.go(yt)}};return ht}var ResultType;(function(d){d.data="data",d.deferred="deferred",d.redirect="redirect",d.error="error"})(ResultType||(ResultType={}));const immutableRouteKeys=new Set(["lazy","caseSensitive","path","id","index","children"]);function isIndexRoute(d){return d.index===!0}function convertRoutesToDataRoutes(d,c,et,_e){return et===void 0&&(et=[]),_e===void 0&&(_e={}),d.map((tt,nt)=>{let rt=[...et,nt],it=typeof tt.id=="string"?tt.id:rt.join("-");if(invariant$2(tt.index!==!0||!tt.children,"Cannot specify children on an index route"),invariant$2(!_e[it],'Found a route id collision on id "'+it+`".  Route id's must be globally unique within Data Router usages`),isIndexRoute(tt)){let ot=_extends$9({},tt,c(tt),{id:it});return _e[it]=ot,ot}else{let ot=_extends$9({},tt,c(tt),{id:it,children:void 0});return _e[it]=ot,tt.children&&(ot.children=convertRoutesToDataRoutes(tt.children,c,rt,_e)),ot}})}function matchRoutes(d,c,et){et===void 0&&(et="/");let _e=typeof c=="string"?parsePath(c):c,tt=stripBasename(_e.pathname||"/",et);if(tt==null)return null;let nt=flattenRoutes(d);rankRouteBranches(nt);let rt=null;for(let it=0;rt==null&&it<nt.length;++it)rt=matchRouteBranch(nt[it],safelyDecodeURI(tt));return rt}function flattenRoutes(d,c,et,_e){c===void 0&&(c=[]),et===void 0&&(et=[]),_e===void 0&&(_e="");let tt=(nt,rt,it)=>{let ot={relativePath:it===void 0?nt.path||"":it,caseSensitive:nt.caseSensitive===!0,childrenIndex:rt,route:nt};ot.relativePath.startsWith("/")&&(invariant$2(ot.relativePath.startsWith(_e),'Absolute route path "'+ot.relativePath+'" nested under path '+('"'+_e+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),ot.relativePath=ot.relativePath.slice(_e.length));let st=joinPaths([_e,ot.relativePath]),at=et.concat(ot);nt.children&&nt.children.length>0&&(invariant$2(nt.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+st+'".')),flattenRoutes(nt.children,c,at,st)),!(nt.path==null&&!nt.index)&&c.push({path:st,score:computeScore(st,nt.index),routesMeta:at})};return d.forEach((nt,rt)=>{var it;if(nt.path===""||!((it=nt.path)!=null&&it.includes("?")))tt(nt,rt);else for(let ot of explodeOptionalSegments(nt.path))tt(nt,rt,ot)}),c}function explodeOptionalSegments(d){let c=d.split("/");if(c.length===0)return[];let[et,..._e]=c,tt=et.endsWith("?"),nt=et.replace(/\?$/,"");if(_e.length===0)return tt?[nt,""]:[nt];let rt=explodeOptionalSegments(_e.join("/")),it=[];return it.push(...rt.map(ot=>ot===""?nt:[nt,ot].join("/"))),tt&&it.push(...rt),it.map(ot=>d.startsWith("/")&&ot===""?"/":ot)}function rankRouteBranches(d){d.sort((c,et)=>c.score!==et.score?et.score-c.score:compareIndexes(c.routesMeta.map(_e=>_e.childrenIndex),et.routesMeta.map(_e=>_e.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=d=>d==="*";function computeScore(d,c){let et=d.split("/"),_e=et.length;return et.some(isSplat)&&(_e+=splatPenalty),c&&(_e+=indexRouteValue),et.filter(tt=>!isSplat(tt)).reduce((tt,nt)=>tt+(paramRe.test(nt)?dynamicSegmentValue:nt===""?emptySegmentValue:staticSegmentValue),_e)}function compareIndexes(d,c){return d.length===c.length&&d.slice(0,-1).every((_e,tt)=>_e===c[tt])?d[d.length-1]-c[c.length-1]:0}function matchRouteBranch(d,c){let{routesMeta:et}=d,_e={},tt="/",nt=[];for(let rt=0;rt<et.length;++rt){let it=et[rt],ot=rt===et.length-1,st=tt==="/"?c:c.slice(tt.length)||"/",at=matchPath({path:it.relativePath,caseSensitive:it.caseSensitive,end:ot},st);if(!at)return null;Object.assign(_e,at.params);let lt=it.route;nt.push({params:_e,pathname:joinPaths([tt,at.pathname]),pathnameBase:normalizePathname(joinPaths([tt,at.pathnameBase])),route:lt}),at.pathnameBase!=="/"&&(tt=joinPaths([tt,at.pathnameBase]))}return nt}function matchPath(d,c){typeof d=="string"&&(d={path:d,caseSensitive:!1,end:!0});let[et,_e]=compilePath(d.path,d.caseSensitive,d.end),tt=c.match(et);if(!tt)return null;let nt=tt[0],rt=nt.replace(/(.)\/+$/,"$1"),it=tt.slice(1);return{params:_e.reduce((st,at,lt)=>{if(at==="*"){let ct=it[lt]||"";rt=nt.slice(0,nt.length-ct.length).replace(/(.)\/+$/,"$1")}return st[at]=safelyDecodeURIComponent(it[lt]||"",at),st},{}),pathname:nt,pathnameBase:rt,pattern:d}}function compilePath(d,c,et){c===void 0&&(c=!1),et===void 0&&(et=!0),warning$2(d==="*"||!d.endsWith("*")||d.endsWith("/*"),'Route path "'+d+'" will be treated as if it were '+('"'+d.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+d.replace(/\*$/,"/*")+'".'));let _e=[],tt="^"+d.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(rt,it)=>(_e.push(it),"/([^\\/]+)"));return d.endsWith("*")?(_e.push("*"),tt+=d==="*"||d==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):et?tt+="\\/*$":d!==""&&d!=="/"&&(tt+="(?:(?=\\/|$))"),[new RegExp(tt,c?void 0:"i"),_e]}function safelyDecodeURI(d){try{return decodeURI(d)}catch(c){return warning$2(!1,'The URL path "'+d+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+c+").")),d}}function safelyDecodeURIComponent(d,c){try{return decodeURIComponent(d)}catch(et){return warning$2(!1,'The value for the URL param "'+c+'" will not be decoded because'+(' the string "'+d+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+et+").")),d}}function stripBasename(d,c){if(c==="/")return d;if(!d.toLowerCase().startsWith(c.toLowerCase()))return null;let et=c.endsWith("/")?c.length-1:c.length,_e=d.charAt(et);return _e&&_e!=="/"?null:d.slice(et)||"/"}function resolvePath(d,c){c===void 0&&(c="/");let{pathname:et,search:_e="",hash:tt=""}=typeof d=="string"?parsePath(d):d;return{pathname:et?et.startsWith("/")?et:resolvePathname(et,c):c,search:normalizeSearch(_e),hash:normalizeHash(tt)}}function resolvePathname(d,c){let et=c.replace(/\/+$/,"").split("/");return d.split("/").forEach(tt=>{tt===".."?et.length>1&&et.pop():tt!=="."&&et.push(tt)}),et.length>1?et.join("/"):"/"}function getInvalidPathError(d,c,et,_e){return"Cannot include a '"+d+"' character in a manually specified "+("`to."+c+"` field ["+JSON.stringify(_e)+"].  Please separate it out to the ")+("`to."+et+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(d){return d.filter((c,et)=>et===0||c.route.path&&c.route.path.length>0)}function resolveTo(d,c,et,_e){_e===void 0&&(_e=!1);let tt;typeof d=="string"?tt=parsePath(d):(tt=_extends$9({},d),invariant$2(!tt.pathname||!tt.pathname.includes("?"),getInvalidPathError("?","pathname","search",tt)),invariant$2(!tt.pathname||!tt.pathname.includes("#"),getInvalidPathError("#","pathname","hash",tt)),invariant$2(!tt.search||!tt.search.includes("#"),getInvalidPathError("#","search","hash",tt)));let nt=d===""||tt.pathname==="",rt=nt?"/":tt.pathname,it;if(_e||rt==null)it=et;else{let lt=c.length-1;if(rt.startsWith("..")){let ct=rt.split("/");for(;ct[0]==="..";)ct.shift(),lt-=1;tt.pathname=ct.join("/")}it=lt>=0?c[lt]:"/"}let ot=resolvePath(tt,it),st=rt&&rt!=="/"&&rt.endsWith("/"),at=(nt||rt===".")&&et.endsWith("/");return!ot.pathname.endsWith("/")&&(st||at)&&(ot.pathname+="/"),ot}const joinPaths=d=>d.join("/").replace(/\/\/+/g,"/"),normalizePathname=d=>d.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=d=>!d||d==="?"?"":d.startsWith("?")?d:"?"+d,normalizeHash=d=>!d||d==="#"?"":d.startsWith("#")?d:"#"+d;class ErrorResponse{constructor(c,et,_e,tt){tt===void 0&&(tt=!1),this.status=c,this.statusText=et||"",this.internal=tt,_e instanceof Error?(this.data=_e.toString(),this.error=_e):this.data=_e}}function isRouteErrorResponse(d){return d!=null&&typeof d.status=="number"&&typeof d.statusText=="string"&&typeof d.internal=="boolean"&&"data"in d}const validMutationMethodsArr=["post","put","patch","delete"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["get",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ABSOLUTE_URL_REGEX$1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,defaultMapRouteProperties=d=>({hasErrorBoundary:!!d.hasErrorBoundary});function createRouter(d){const c=d.window?d.window:typeof window<"u"?window:void 0,et=typeof c<"u"&&typeof c.document<"u"&&typeof c.document.createElement<"u",_e=!et;invariant$2(d.routes.length>0,"You must provide a non-empty routes array to createRouter");let tt;if(d.mapRouteProperties)tt=d.mapRouteProperties;else if(d.detectErrorBoundary){let St=d.detectErrorBoundary;tt=Ct=>({hasErrorBoundary:St(Ct)})}else tt=defaultMapRouteProperties;let nt={},rt=convertRoutesToDataRoutes(d.routes,tt,void 0,nt),it,ot=d.basename||"/",st=_extends$9({v7_normalizeFormMethod:!1,v7_prependBasename:!1},d.future),at=null,lt=new Set,ct=null,ut=null,dt=null,ht=d.hydrationData!=null,yt=matchRoutes(rt,d.history.location,ot),gt=null;if(yt==null){let St=getInternalRouterError(404,{pathname:d.history.location.pathname}),{matches:Ct,route:It}=getShortCircuitMatches(rt);yt=Ct,gt={[It.id]:St}}let ft=!yt.some(St=>St.route.lazy)&&(!yt.some(St=>St.route.loader)||d.hydrationData!=null),mt,pt={historyAction:d.history.action,location:d.history.location,matches:yt,initialized:ft,navigation:IDLE_NAVIGATION,restoreScrollPosition:d.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:d.hydrationData&&d.hydrationData.loaderData||{},actionData:d.hydrationData&&d.hydrationData.actionData||null,errors:d.hydrationData&&d.hydrationData.errors||gt,fetchers:new Map,blockers:new Map},xt=Action$1.Pop,vt=!1,Et,_t=!1,wt=!1,bt=[],$t=[],kt=new Map,Nt=0,At=-1,Gt=new Map,Kt=new Set,qt=new Map,Ot=new Map,Pt=new Map,Lt=!1;function Qt(){return at=d.history.listen(St=>{let{action:Ct,location:It,delta:Ut}=St;if(Lt){Lt=!1;return}warning$2(Pt.size===0||Ut!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Xt=_n({currentLocation:pt.location,nextLocation:It,historyAction:Ct});if(Xt&&Ut!=null){Lt=!0,d.history.go(Ut*-1),En(Xt,{state:"blocked",location:It,proceed(){En(Xt,{state:"proceeding",proceed:void 0,reset:void 0,location:It}),d.history.go(Ut)},reset(){let Yt=new Map(pt.blockers);Yt.set(Xt,IDLE_BLOCKER),zt({blockers:Yt})}});return}return Zt(Ct,It)}),pt.initialized||Zt(Action$1.Pop,pt.location),mt}function Wt(){at&&at(),lt.clear(),Et&&Et.abort(),pt.fetchers.forEach((St,Ct)=>$n(Ct)),pt.blockers.forEach((St,Ct)=>on(Ct))}function sn(St){return lt.add(St),()=>lt.delete(St)}function zt(St){pt=_extends$9({},pt,St),lt.forEach(Ct=>Ct(pt))}function en(St,Ct){var It,Ut;let Xt=pt.actionData!=null&&pt.navigation.formMethod!=null&&isMutationMethod(pt.navigation.formMethod)&&pt.navigation.state==="loading"&&((It=St.state)==null?void 0:It._isRedirect)!==!0,Yt;Ct.actionData?Object.keys(Ct.actionData).length>0?Yt=Ct.actionData:Yt=null:Xt?Yt=pt.actionData:Yt=null;let Jt=Ct.loaderData?mergeLoaderData(pt.loaderData,Ct.loaderData,Ct.matches||[],Ct.errors):pt.loaderData,Bt=pt.blockers;Bt.size>0&&(Bt=new Map(Bt),Bt.forEach((tn,pn)=>Bt.set(pn,IDLE_BLOCKER)));let Ft=vt===!0||pt.navigation.formMethod!=null&&isMutationMethod(pt.navigation.formMethod)&&((Ut=St.state)==null?void 0:Ut._isRedirect)!==!0;it&&(rt=it,it=void 0),_t||xt===Action$1.Pop||(xt===Action$1.Push?d.history.push(St,St.state):xt===Action$1.Replace&&d.history.replace(St,St.state)),zt(_extends$9({},Ct,{actionData:Yt,loaderData:Jt,historyAction:xt,location:St,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:Vn(St,Ct.matches||pt.matches),preventScrollReset:Ft,blockers:Bt})),xt=Action$1.Pop,vt=!1,_t=!1,wt=!1,bt=[],$t=[]}async function rn(St,Ct){if(typeof St=="number"){d.history.go(St);return}let It=normalizeTo(pt.location,pt.matches,ot,st.v7_prependBasename,St,Ct==null?void 0:Ct.fromRouteId,Ct==null?void 0:Ct.relative),{path:Ut,submission:Xt,error:Yt}=normalizeNavigateOptions(st.v7_normalizeFormMethod,!1,It,Ct),Jt=pt.location,Bt=createLocation(pt.location,Ut,Ct&&Ct.state);Bt=_extends$9({},Bt,d.history.encodeLocation(Bt));let Ft=Ct&&Ct.replace!=null?Ct.replace:void 0,tn=Action$1.Push;Ft===!0?tn=Action$1.Replace:Ft===!1||Xt!=null&&isMutationMethod(Xt.formMethod)&&Xt.formAction===pt.location.pathname+pt.location.search&&(tn=Action$1.Replace);let pn=Ct&&"preventScrollReset"in Ct?Ct.preventScrollReset===!0:void 0,nn=_n({currentLocation:Jt,nextLocation:Bt,historyAction:tn});if(nn){En(nn,{state:"blocked",location:Bt,proceed(){En(nn,{state:"proceeding",proceed:void 0,reset:void 0,location:Bt}),rn(St,Ct)},reset(){let an=new Map(pt.blockers);an.set(nn,IDLE_BLOCKER),zt({blockers:an})}});return}return await Zt(tn,Bt,{submission:Xt,pendingError:Yt,preventScrollReset:pn,replace:Ct&&Ct.replace})}function mn(){if(un(),zt({revalidation:"loading"}),pt.navigation.state!=="submitting"){if(pt.navigation.state==="idle"){Zt(pt.historyAction,pt.location,{startUninterruptedRevalidation:!0});return}Zt(xt||pt.historyAction,pt.navigation.location,{overrideNavigation:pt.navigation})}}async function Zt(St,Ct,It){Et&&Et.abort(),Et=null,xt=St,_t=(It&&It.startUninterruptedRevalidation)===!0,jn(pt.location,pt.matches),vt=(It&&It.preventScrollReset)===!0;let Ut=it||rt,Xt=It&&It.overrideNavigation,Yt=matchRoutes(Ut,Ct,ot);if(!Yt){let an=getInternalRouterError(404,{pathname:Ct.pathname}),{matches:dn,route:Sn}=getShortCircuitMatches(Ut);Cn(),en(Ct,{matches:dn,loaderData:{},errors:{[Sn.id]:an}});return}if(pt.initialized&&!wt&&isHashChangeOnly(pt.location,Ct)&&!(It&&It.submission&&isMutationMethod(It.submission.formMethod))){en(Ct,{matches:Yt});return}Et=new AbortController;let Jt=createClientSideRequest(d.history,Ct,Et.signal,It&&It.submission),Bt,Ft;if(It&&It.pendingError)Ft={[findNearestBoundary(Yt).route.id]:It.pendingError};else if(It&&It.submission&&isMutationMethod(It.submission.formMethod)){let an=await Tt(Jt,Ct,It.submission,Yt,{replace:It.replace});if(an.shortCircuited)return;Bt=an.pendingActionData,Ft=an.pendingActionError,Xt=getLoadingNavigation(Ct,It.submission),Jt=new Request(Jt.url,{signal:Jt.signal})}let{shortCircuited:tn,loaderData:pn,errors:nn}=await Rt(Jt,Ct,Yt,Xt,It&&It.submission,It&&It.fetcherSubmission,It&&It.replace,Bt,Ft);tn||(Et=null,en(Ct,_extends$9({matches:Yt},Bt?{actionData:Bt}:{},{loaderData:pn,errors:nn})))}async function Tt(St,Ct,It,Ut,Xt){Xt===void 0&&(Xt={}),un();let Yt=getSubmittingNavigation(Ct,It);zt({navigation:Yt});let Jt,Bt=getTargetMatch(Ut,Ct);if(!Bt.route.action&&!Bt.route.lazy)Jt={type:ResultType.error,error:getInternalRouterError(405,{method:St.method,pathname:Ct.pathname,routeId:Bt.route.id})};else if(Jt=await callLoaderOrAction("action",St,Bt,Ut,nt,tt,ot),St.signal.aborted)return{shortCircuited:!0};if(isRedirectResult(Jt)){let Ft;return Xt&&Xt.replace!=null?Ft=Xt.replace:Ft=Jt.location===pt.location.pathname+pt.location.search,await Ht(pt,Jt,{submission:It,replace:Ft}),{shortCircuited:!0}}if(isErrorResult(Jt)){let Ft=findNearestBoundary(Ut,Bt.route.id);return(Xt&&Xt.replace)!==!0&&(xt=Action$1.Push),{pendingActionData:{},pendingActionError:{[Ft.route.id]:Jt.error}}}if(isDeferredResult(Jt))throw getInternalRouterError(400,{type:"defer-action"});return{pendingActionData:{[Bt.route.id]:Jt.data}}}async function Rt(St,Ct,It,Ut,Xt,Yt,Jt,Bt,Ft){let tn=Ut||getLoadingNavigation(Ct,Xt),pn=Xt||Yt||getSubmissionFromNavigation(tn),nn=it||rt,[an,dn]=getMatchesToLoad(d.history,pt,It,pn,Ct,wt,bt,$t,qt,Kt,nn,ot,Bt,Ft);if(Cn(fn=>!(It&&It.some(Nn=>Nn.route.id===fn))||an&&an.some(Nn=>Nn.route.id===fn)),At=++Nt,an.length===0&&dn.length===0){let fn=Tn();return en(Ct,_extends$9({matches:It,loaderData:{},errors:Ft||null},Bt?{actionData:Bt}:{},fn?{fetchers:new Map(pt.fetchers)}:{})),{shortCircuited:!0}}if(!_t){dn.forEach(Nn=>{let Mn=pt.fetchers.get(Nn.key),Kn=getLoadingFetcher(void 0,Mn?Mn.data:void 0);pt.fetchers.set(Nn.key,Kn)});let fn=Bt||pt.actionData;zt(_extends$9({navigation:tn},fn?Object.keys(fn).length===0?{actionData:null}:{actionData:fn}:{},dn.length>0?{fetchers:new Map(pt.fetchers)}:{}))}dn.forEach(fn=>{kt.has(fn.key)&&ln(fn.key),fn.controller&&kt.set(fn.key,fn.controller)});let Sn=()=>dn.forEach(fn=>ln(fn.key));Et&&Et.signal.addEventListener("abort",Sn);let{results:yn,loaderResults:On,fetcherResults:An}=await hn(pt.matches,It,an,dn,St);if(St.signal.aborted)return{shortCircuited:!0};Et&&Et.signal.removeEventListener("abort",Sn),dn.forEach(fn=>kt.delete(fn.key));let bn=findRedirect(yn);if(bn){if(bn.idx>=an.length){let fn=dn[bn.idx-an.length].key;Kt.add(fn)}return await Ht(pt,bn.result,{replace:Jt}),{shortCircuited:!0}}let{loaderData:Rn,errors:Fn}=processLoaderData(pt,It,an,On,Ft,dn,An,Ot);Ot.forEach((fn,Nn)=>{fn.subscribe(Mn=>{(Mn||fn.done)&&Ot.delete(Nn)})});let Dn=Tn(),Pn=kn(At),Bn=Dn||Pn||dn.length>0;return _extends$9({loaderData:Rn,errors:Fn},Bn?{fetchers:new Map(pt.fetchers)}:{})}function jt(St){return pt.fetchers.get(St)||IDLE_FETCHER}function Dt(St,Ct,It,Ut){if(_e)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");kt.has(St)&&ln(St);let Xt=it||rt,Yt=normalizeTo(pt.location,pt.matches,ot,st.v7_prependBasename,It,Ct,Ut==null?void 0:Ut.relative),Jt=matchRoutes(Xt,Yt,ot);if(!Jt){xn(St,Ct,getInternalRouterError(404,{pathname:Yt}));return}let{path:Bt,submission:Ft,error:tn}=normalizeNavigateOptions(st.v7_normalizeFormMethod,!0,Yt,Ut);if(tn){xn(St,Ct,tn);return}let pn=getTargetMatch(Jt,Bt);if(vt=(Ut&&Ut.preventScrollReset)===!0,Ft&&isMutationMethod(Ft.formMethod)){Mt(St,Ct,Bt,pn,Jt,Ft);return}qt.set(St,{routeId:Ct,path:Bt}),Vt(St,Ct,Bt,pn,Jt,Ft)}async function Mt(St,Ct,It,Ut,Xt,Yt){if(un(),qt.delete(St),!Ut.route.action&&!Ut.route.lazy){let vn=getInternalRouterError(405,{method:Yt.formMethod,pathname:It,routeId:Ct});xn(St,Ct,vn);return}let Jt=pt.fetchers.get(St),Bt=getSubmittingFetcher(Yt,Jt);pt.fetchers.set(St,Bt),zt({fetchers:new Map(pt.fetchers)});let Ft=new AbortController,tn=createClientSideRequest(d.history,It,Ft.signal,Yt);kt.set(St,Ft);let pn=Nt,nn=await callLoaderOrAction("action",tn,Ut,Xt,nt,tt,ot);if(tn.signal.aborted){kt.get(St)===Ft&&kt.delete(St);return}if(isRedirectResult(nn))if(kt.delete(St),At>pn){let vn=getDoneFetcher(void 0);pt.fetchers.set(St,vn),zt({fetchers:new Map(pt.fetchers)});return}else{Kt.add(St);let vn=getLoadingFetcher(Yt);return pt.fetchers.set(St,vn),zt({fetchers:new Map(pt.fetchers)}),Ht(pt,nn,{submission:Yt,isFetchActionRedirect:!0})}if(isErrorResult(nn)){xn(St,Ct,nn.error);return}if(isDeferredResult(nn))throw getInternalRouterError(400,{type:"defer-action"});let an=pt.navigation.location||pt.location,dn=createClientSideRequest(d.history,an,Ft.signal),Sn=it||rt,yn=pt.navigation.state!=="idle"?matchRoutes(Sn,pt.navigation.location,ot):pt.matches;invariant$2(yn,"Didn't find any matches after fetcher action");let On=++Nt;Gt.set(St,On);let An=getLoadingFetcher(Yt,nn.data);pt.fetchers.set(St,An);let[bn,Rn]=getMatchesToLoad(d.history,pt,yn,Yt,an,wt,bt,$t,qt,Kt,Sn,ot,{[Ut.route.id]:nn.data},void 0);Rn.filter(vn=>vn.key!==St).forEach(vn=>{let Wn=vn.key,Yn=pt.fetchers.get(Wn),Jn=getLoadingFetcher(void 0,Yn?Yn.data:void 0);pt.fetchers.set(Wn,Jn),kt.has(Wn)&&ln(Wn),vn.controller&&kt.set(Wn,vn.controller)}),zt({fetchers:new Map(pt.fetchers)});let Fn=()=>Rn.forEach(vn=>ln(vn.key));Ft.signal.addEventListener("abort",Fn);let{results:Dn,loaderResults:Pn,fetcherResults:Bn}=await hn(pt.matches,yn,bn,Rn,dn);if(Ft.signal.aborted)return;Ft.signal.removeEventListener("abort",Fn),Gt.delete(St),kt.delete(St),Rn.forEach(vn=>kt.delete(vn.key));let fn=findRedirect(Dn);if(fn){if(fn.idx>=bn.length){let vn=Rn[fn.idx-bn.length].key;Kt.add(vn)}return Ht(pt,fn.result)}let{loaderData:Nn,errors:Mn}=processLoaderData(pt,pt.matches,bn,Pn,void 0,Rn,Bn,Ot);if(pt.fetchers.has(St)){let vn=getDoneFetcher(nn.data);pt.fetchers.set(St,vn)}let Kn=kn(On);pt.navigation.state==="loading"&&On>At?(invariant$2(xt,"Expected pending action"),Et&&Et.abort(),en(pt.navigation.location,{matches:yn,loaderData:Nn,errors:Mn,fetchers:new Map(pt.fetchers)})):(zt(_extends$9({errors:Mn,loaderData:mergeLoaderData(pt.loaderData,Nn,yn,Mn)},Kn||Rn.length>0?{fetchers:new Map(pt.fetchers)}:{})),wt=!1)}async function Vt(St,Ct,It,Ut,Xt,Yt){let Jt=pt.fetchers.get(St),Bt=getLoadingFetcher(Yt,Jt?Jt.data:void 0);pt.fetchers.set(St,Bt),zt({fetchers:new Map(pt.fetchers)});let Ft=new AbortController,tn=createClientSideRequest(d.history,It,Ft.signal);kt.set(St,Ft);let pn=Nt,nn=await callLoaderOrAction("loader",tn,Ut,Xt,nt,tt,ot);if(isDeferredResult(nn)&&(nn=await resolveDeferredData(nn,tn.signal,!0)||nn),kt.get(St)===Ft&&kt.delete(St),tn.signal.aborted)return;if(isRedirectResult(nn))if(At>pn){let dn=getDoneFetcher(void 0);pt.fetchers.set(St,dn),zt({fetchers:new Map(pt.fetchers)});return}else{Kt.add(St),await Ht(pt,nn);return}if(isErrorResult(nn)){let dn=findNearestBoundary(pt.matches,Ct);pt.fetchers.delete(St),zt({fetchers:new Map(pt.fetchers),errors:{[dn.route.id]:nn.error}});return}invariant$2(!isDeferredResult(nn),"Unhandled fetcher deferred data");let an=getDoneFetcher(nn.data);pt.fetchers.set(St,an),zt({fetchers:new Map(pt.fetchers)})}async function Ht(St,Ct,It){let{submission:Ut,replace:Xt,isFetchActionRedirect:Yt}=It===void 0?{}:It;Ct.revalidate&&(wt=!0);let Jt=createLocation(St.location,Ct.location,_extends$9({_isRedirect:!0},Yt?{_isFetchActionRedirect:!0}:{}));if(invariant$2(Jt,"Expected a location on the redirect navigation"),et){let tn=!1;if(Ct.reloadDocument)tn=!0;else if(ABSOLUTE_URL_REGEX$1.test(Ct.location)){const pn=d.history.createURL(Ct.location);tn=pn.origin!==c.location.origin||stripBasename(pn.pathname,ot)==null}if(tn){Xt?c.location.replace(Ct.location):c.location.assign(Ct.location);return}}Et=null;let Bt=Xt===!0?Action$1.Replace:Action$1.Push,Ft=Ut||getSubmissionFromNavigation(St.navigation);if(redirectPreserveMethodStatusCodes.has(Ct.status)&&Ft&&isMutationMethod(Ft.formMethod))await Zt(Bt,Jt,{submission:_extends$9({},Ft,{formAction:Ct.location}),preventScrollReset:vt});else if(Yt)await Zt(Bt,Jt,{overrideNavigation:getLoadingNavigation(Jt),fetcherSubmission:Ft,preventScrollReset:vt});else{let tn=getLoadingNavigation(Jt,Ft);await Zt(Bt,Jt,{overrideNavigation:tn,preventScrollReset:vt})}}async function hn(St,Ct,It,Ut,Xt){let Yt=await Promise.all([...It.map(Ft=>callLoaderOrAction("loader",Xt,Ft,Ct,nt,tt,ot)),...Ut.map(Ft=>Ft.matches&&Ft.match&&Ft.controller?callLoaderOrAction("loader",createClientSideRequest(d.history,Ft.path,Ft.controller.signal),Ft.match,Ft.matches,nt,tt,ot):{type:ResultType.error,error:getInternalRouterError(404,{pathname:Ft.path})})]),Jt=Yt.slice(0,It.length),Bt=Yt.slice(It.length);return await Promise.all([resolveDeferredResults(St,It,Jt,Jt.map(()=>Xt.signal),!1,pt.loaderData),resolveDeferredResults(St,Ut.map(Ft=>Ft.match),Bt,Ut.map(Ft=>Ft.controller?Ft.controller.signal:null),!0)]),{results:Yt,loaderResults:Jt,fetcherResults:Bt}}function un(){wt=!0,bt.push(...Cn()),qt.forEach((St,Ct)=>{kt.has(Ct)&&($t.push(Ct),ln(Ct))})}function xn(St,Ct,It){let Ut=findNearestBoundary(pt.matches,Ct);$n(St),zt({errors:{[Ut.route.id]:It},fetchers:new Map(pt.fetchers)})}function $n(St){let Ct=pt.fetchers.get(St);kt.has(St)&&!(Ct&&Ct.state==="loading"&&Gt.has(St))&&ln(St),qt.delete(St),Gt.delete(St),Kt.delete(St),pt.fetchers.delete(St)}function ln(St){let Ct=kt.get(St);invariant$2(Ct,"Expected fetch controller: "+St),Ct.abort(),kt.delete(St)}function wn(St){for(let Ct of St){let It=jt(Ct),Ut=getDoneFetcher(It.data);pt.fetchers.set(Ct,Ut)}}function Tn(){let St=[],Ct=!1;for(let It of Kt){let Ut=pt.fetchers.get(It);invariant$2(Ut,"Expected fetcher: "+It),Ut.state==="loading"&&(Kt.delete(It),St.push(It),Ct=!0)}return wn(St),Ct}function kn(St){let Ct=[];for(let[It,Ut]of Gt)if(Ut<St){let Xt=pt.fetchers.get(It);invariant$2(Xt,"Expected fetcher: "+It),Xt.state==="loading"&&(ln(It),Gt.delete(It),Ct.push(It))}return wn(Ct),Ct.length>0}function In(St,Ct){let It=pt.blockers.get(St)||IDLE_BLOCKER;return Pt.get(St)!==Ct&&Pt.set(St,Ct),It}function on(St){pt.blockers.delete(St),Pt.delete(St)}function En(St,Ct){let It=pt.blockers.get(St)||IDLE_BLOCKER;invariant$2(It.state==="unblocked"&&Ct.state==="blocked"||It.state==="blocked"&&Ct.state==="blocked"||It.state==="blocked"&&Ct.state==="proceeding"||It.state==="blocked"&&Ct.state==="unblocked"||It.state==="proceeding"&&Ct.state==="unblocked","Invalid blocker state transition: "+It.state+" -> "+Ct.state);let Ut=new Map(pt.blockers);Ut.set(St,Ct),zt({blockers:Ut})}function _n(St){let{currentLocation:Ct,nextLocation:It,historyAction:Ut}=St;if(Pt.size===0)return;Pt.size>1&&warning$2(!1,"A router only supports one blocker at a time");let Xt=Array.from(Pt.entries()),[Yt,Jt]=Xt[Xt.length-1],Bt=pt.blockers.get(Yt);if(!(Bt&&Bt.state==="proceeding")&&Jt({currentLocation:Ct,nextLocation:It,historyAction:Ut}))return Yt}function Cn(St){let Ct=[];return Ot.forEach((It,Ut)=>{(!St||St(Ut))&&(It.cancel(),Ct.push(Ut),Ot.delete(Ut))}),Ct}function Ln(St,Ct,It){if(ct=St,dt=Ct,ut=It||null,!ht&&pt.navigation===IDLE_NAVIGATION){ht=!0;let Ut=Vn(pt.location,pt.matches);Ut!=null&&zt({restoreScrollPosition:Ut})}return()=>{ct=null,dt=null,ut=null}}function Un(St,Ct){return ut&&ut(St,Ct.map(Ut=>createUseMatchesMatch(Ut,pt.loaderData)))||St.key}function jn(St,Ct){if(ct&&dt){let It=Un(St,Ct);ct[It]=dt()}}function Vn(St,Ct){if(ct){let It=Un(St,Ct),Ut=ct[It];if(typeof Ut=="number")return Ut}return null}function qn(St){nt={},it=convertRoutesToDataRoutes(St,tt,void 0,nt)}return mt={get basename(){return ot},get state(){return pt},get routes(){return rt},initialize:Qt,subscribe:sn,enableScrollRestoration:Ln,navigate:rn,fetch:Dt,revalidate:mn,createHref:St=>d.history.createHref(St),encodeLocation:St=>d.history.encodeLocation(St),getFetcher:jt,deleteFetcher:$n,dispose:Wt,getBlocker:In,deleteBlocker:on,_internalFetchControllers:kt,_internalActiveDeferreds:Ot,_internalSetRoutes:qn},mt}function isSubmissionNavigation(d){return d!=null&&("formData"in d&&d.formData!=null||"body"in d&&d.body!==void 0)}function normalizeTo(d,c,et,_e,tt,nt,rt){let it,ot;if(nt!=null&&rt!=="path"){it=[];for(let at of c)if(it.push(at),at.route.id===nt){ot=at;break}}else it=c,ot=c[c.length-1];let st=resolveTo(tt||".",getPathContributingMatches(it).map(at=>at.pathnameBase),stripBasename(d.pathname,et)||d.pathname,rt==="path");return tt==null&&(st.search=d.search,st.hash=d.hash),(tt==null||tt===""||tt===".")&&ot&&ot.route.index&&!hasNakedIndexQuery(st.search)&&(st.search=st.search?st.search.replace(/^\?/,"?index&"):"?index"),_e&&et!=="/"&&(st.pathname=st.pathname==="/"?et:joinPaths([et,st.pathname])),createPath(st)}function normalizeNavigateOptions(d,c,et,_e){if(!_e||!isSubmissionNavigation(_e))return{path:et};if(_e.formMethod&&!isValidMethod(_e.formMethod))return{path:et,error:getInternalRouterError(405,{method:_e.formMethod})};let tt=()=>({path:et,error:getInternalRouterError(400,{type:"invalid-body"})}),nt=_e.formMethod||"get",rt=d?nt.toUpperCase():nt.toLowerCase(),it=stripHashFromPath(et);if(_e.body!==void 0){if(_e.formEncType==="text/plain"){if(!isMutationMethod(rt))return tt();let ct=typeof _e.body=="string"?_e.body:_e.body instanceof FormData||_e.body instanceof URLSearchParams?Array.from(_e.body.entries()).reduce((ut,dt)=>{let[ht,yt]=dt;return""+ut+ht+"="+yt+`
`},""):String(_e.body);return{path:et,submission:{formMethod:rt,formAction:it,formEncType:_e.formEncType,formData:void 0,json:void 0,text:ct}}}else if(_e.formEncType==="application/json"){if(!isMutationMethod(rt))return tt();try{let ct=typeof _e.body=="string"?JSON.parse(_e.body):_e.body;return{path:et,submission:{formMethod:rt,formAction:it,formEncType:_e.formEncType,formData:void 0,json:ct,text:void 0}}}catch{return tt()}}}invariant$2(typeof FormData=="function","FormData is not available in this environment");let ot,st;if(_e.formData)ot=convertFormDataToSearchParams(_e.formData),st=_e.formData;else if(_e.body instanceof FormData)ot=convertFormDataToSearchParams(_e.body),st=_e.body;else if(_e.body instanceof URLSearchParams)ot=_e.body,st=convertSearchParamsToFormData(ot);else if(_e.body==null)ot=new URLSearchParams,st=new FormData;else try{ot=new URLSearchParams(_e.body),st=convertSearchParamsToFormData(ot)}catch{return tt()}let at={formMethod:rt,formAction:it,formEncType:_e&&_e.formEncType||"application/x-www-form-urlencoded",formData:st,json:void 0,text:void 0};if(isMutationMethod(at.formMethod))return{path:et,submission:at};let lt=parsePath(et);return c&&lt.search&&hasNakedIndexQuery(lt.search)&&ot.append("index",""),lt.search="?"+ot,{path:createPath(lt),submission:at}}function getLoaderMatchesUntilBoundary(d,c){let et=d;if(c){let _e=d.findIndex(tt=>tt.route.id===c);_e>=0&&(et=d.slice(0,_e))}return et}function getMatchesToLoad(d,c,et,_e,tt,nt,rt,it,ot,st,at,lt,ct,ut){let dt=ut?Object.values(ut)[0]:ct?Object.values(ct)[0]:void 0,ht=d.createURL(c.location),yt=d.createURL(tt),gt=ut?Object.keys(ut)[0]:void 0,mt=getLoaderMatchesUntilBoundary(et,gt).filter((xt,vt)=>{if(xt.route.lazy)return!0;if(xt.route.loader==null)return!1;if(isNewLoader(c.loaderData,c.matches[vt],xt)||rt.some(wt=>wt===xt.route.id))return!0;let Et=c.matches[vt],_t=xt;return shouldRevalidateLoader(xt,_extends$9({currentUrl:ht,currentParams:Et.params,nextUrl:yt,nextParams:_t.params},_e,{actionResult:dt,defaultShouldRevalidate:nt||ht.pathname+ht.search===yt.pathname+yt.search||ht.search!==yt.search||isNewRouteInstance(Et,_t)}))}),pt=[];return ot.forEach((xt,vt)=>{if(!et.some($t=>$t.route.id===xt.routeId))return;let Et=matchRoutes(at,xt.path,lt);if(!Et){pt.push({key:vt,routeId:xt.routeId,path:xt.path,matches:null,match:null,controller:null});return}let _t=c.fetchers.get(vt),wt=getTargetMatch(Et,xt.path),bt=!1;st.has(vt)?bt=!1:it.includes(vt)?bt=!0:_t&&_t.state!=="idle"&&_t.data===void 0?bt=nt:bt=shouldRevalidateLoader(wt,_extends$9({currentUrl:ht,currentParams:c.matches[c.matches.length-1].params,nextUrl:yt,nextParams:et[et.length-1].params},_e,{actionResult:dt,defaultShouldRevalidate:nt})),bt&&pt.push({key:vt,routeId:xt.routeId,path:xt.path,matches:Et,match:wt,controller:new AbortController})}),[mt,pt]}function isNewLoader(d,c,et){let _e=!c||et.route.id!==c.route.id,tt=d[et.route.id]===void 0;return _e||tt}function isNewRouteInstance(d,c){let et=d.route.path;return d.pathname!==c.pathname||et!=null&&et.endsWith("*")&&d.params["*"]!==c.params["*"]}function shouldRevalidateLoader(d,c){if(d.route.shouldRevalidate){let et=d.route.shouldRevalidate(c);if(typeof et=="boolean")return et}return c.defaultShouldRevalidate}async function loadLazyRouteModule(d,c,et){if(!d.lazy)return;let _e=await d.lazy();if(!d.lazy)return;let tt=et[d.id];invariant$2(tt,"No route found in manifest");let nt={};for(let rt in _e){let ot=tt[rt]!==void 0&&rt!=="hasErrorBoundary";warning$2(!ot,'Route "'+tt.id+'" has a static property "'+rt+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+rt+'" will be ignored.')),!ot&&!immutableRouteKeys.has(rt)&&(nt[rt]=_e[rt])}Object.assign(tt,nt),Object.assign(tt,_extends$9({},c(tt),{lazy:void 0}))}async function callLoaderOrAction(d,c,et,_e,tt,nt,rt,it){it===void 0&&(it={});let ot,st,at,lt=dt=>{let ht,yt=new Promise((gt,ft)=>ht=ft);return at=()=>ht(),c.signal.addEventListener("abort",at),Promise.race([dt({request:c,params:et.params,context:it.requestContext}),yt])};try{let dt=et.route[d];if(et.route.lazy)if(dt)st=(await Promise.all([lt(dt),loadLazyRouteModule(et.route,nt,tt)]))[0];else if(await loadLazyRouteModule(et.route,nt,tt),dt=et.route[d],dt)st=await lt(dt);else if(d==="action"){let ht=new URL(c.url),yt=ht.pathname+ht.search;throw getInternalRouterError(405,{method:c.method,pathname:yt,routeId:et.route.id})}else return{type:ResultType.data,data:void 0};else if(dt)st=await lt(dt);else{let ht=new URL(c.url),yt=ht.pathname+ht.search;throw getInternalRouterError(404,{pathname:yt})}invariant$2(st!==void 0,"You defined "+(d==="action"?"an action":"a loader")+" for route "+('"'+et.route.id+"\" but didn't return anything from your `"+d+"` ")+"function. Please return a value or `null`.")}catch(dt){ot=ResultType.error,st=dt}finally{at&&c.signal.removeEventListener("abort",at)}if(isResponse(st)){let dt=st.status;if(redirectStatusCodes.has(dt)){let gt=st.headers.get("Location");if(invariant$2(gt,"Redirects returned/thrown from loaders/actions must have a Location header"),!ABSOLUTE_URL_REGEX$1.test(gt))gt=normalizeTo(new URL(c.url),_e.slice(0,_e.indexOf(et)+1),rt,!0,gt);else if(!it.isStaticRequest){let ft=new URL(c.url),mt=gt.startsWith("//")?new URL(ft.protocol+gt):new URL(gt),pt=stripBasename(mt.pathname,rt)!=null;mt.origin===ft.origin&&pt&&(gt=mt.pathname+mt.search+mt.hash)}if(it.isStaticRequest)throw st.headers.set("Location",gt),st;return{type:ResultType.redirect,status:dt,location:gt,revalidate:st.headers.get("X-Remix-Revalidate")!==null,reloadDocument:st.headers.get("X-Remix-Reload-Document")!==null}}if(it.isRouteRequest)throw{type:ot===ResultType.error?ResultType.error:ResultType.data,response:st};let ht,yt=st.headers.get("Content-Type");return yt&&/\bapplication\/json\b/.test(yt)?ht=await st.json():ht=await st.text(),ot===ResultType.error?{type:ot,error:new ErrorResponse(dt,st.statusText,ht),headers:st.headers}:{type:ResultType.data,data:ht,statusCode:st.status,headers:st.headers}}if(ot===ResultType.error)return{type:ot,error:st};if(isDeferredData(st)){var ct,ut;return{type:ResultType.deferred,deferredData:st,statusCode:(ct=st.init)==null?void 0:ct.status,headers:((ut=st.init)==null?void 0:ut.headers)&&new Headers(st.init.headers)}}return{type:ResultType.data,data:st}}function createClientSideRequest(d,c,et,_e){let tt=d.createURL(stripHashFromPath(c)).toString(),nt={signal:et};if(_e&&isMutationMethod(_e.formMethod)){let{formMethod:rt,formEncType:it}=_e;nt.method=rt.toUpperCase(),it==="application/json"?(nt.headers=new Headers({"Content-Type":it}),nt.body=JSON.stringify(_e.json)):it==="text/plain"?nt.body=_e.text:it==="application/x-www-form-urlencoded"&&_e.formData?nt.body=convertFormDataToSearchParams(_e.formData):nt.body=_e.formData}return new Request(tt,nt)}function convertFormDataToSearchParams(d){let c=new URLSearchParams;for(let[et,_e]of d.entries())c.append(et,typeof _e=="string"?_e:_e.name);return c}function convertSearchParamsToFormData(d){let c=new FormData;for(let[et,_e]of d.entries())c.append(et,_e);return c}function processRouteLoaderData(d,c,et,_e,tt){let nt={},rt=null,it,ot=!1,st={};return et.forEach((at,lt)=>{let ct=c[lt].route.id;if(invariant$2(!isRedirectResult(at),"Cannot handle redirect results in processLoaderData"),isErrorResult(at)){let ut=findNearestBoundary(d,ct),dt=at.error;_e&&(dt=Object.values(_e)[0],_e=void 0),rt=rt||{},rt[ut.route.id]==null&&(rt[ut.route.id]=dt),nt[ct]=void 0,ot||(ot=!0,it=isRouteErrorResponse(at.error)?at.error.status:500),at.headers&&(st[ct]=at.headers)}else isDeferredResult(at)?(tt.set(ct,at.deferredData),nt[ct]=at.deferredData.data):nt[ct]=at.data,at.statusCode!=null&&at.statusCode!==200&&!ot&&(it=at.statusCode),at.headers&&(st[ct]=at.headers)}),_e&&(rt=_e,nt[Object.keys(_e)[0]]=void 0),{loaderData:nt,errors:rt,statusCode:it||200,loaderHeaders:st}}function processLoaderData(d,c,et,_e,tt,nt,rt,it){let{loaderData:ot,errors:st}=processRouteLoaderData(c,et,_e,tt,it);for(let at=0;at<nt.length;at++){let{key:lt,match:ct,controller:ut}=nt[at];invariant$2(rt!==void 0&&rt[at]!==void 0,"Did not find corresponding fetcher result");let dt=rt[at];if(!(ut&&ut.signal.aborted))if(isErrorResult(dt)){let ht=findNearestBoundary(d.matches,ct==null?void 0:ct.route.id);st&&st[ht.route.id]||(st=_extends$9({},st,{[ht.route.id]:dt.error})),d.fetchers.delete(lt)}else if(isRedirectResult(dt))invariant$2(!1,"Unhandled fetcher revalidation redirect");else if(isDeferredResult(dt))invariant$2(!1,"Unhandled fetcher deferred data");else{let ht=getDoneFetcher(dt.data);d.fetchers.set(lt,ht)}}return{loaderData:ot,errors:st}}function mergeLoaderData(d,c,et,_e){let tt=_extends$9({},c);for(let nt of et){let rt=nt.route.id;if(c.hasOwnProperty(rt)?c[rt]!==void 0&&(tt[rt]=c[rt]):d[rt]!==void 0&&nt.route.loader&&(tt[rt]=d[rt]),_e&&_e.hasOwnProperty(rt))break}return tt}function findNearestBoundary(d,c){return(c?d.slice(0,d.findIndex(_e=>_e.route.id===c)+1):[...d]).reverse().find(_e=>_e.route.hasErrorBoundary===!0)||d[0]}function getShortCircuitMatches(d){let c=d.find(et=>et.index||!et.path||et.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:c}],route:c}}function getInternalRouterError(d,c){let{pathname:et,routeId:_e,method:tt,type:nt}=c===void 0?{}:c,rt="Unknown Server Error",it="Unknown @remix-run/router error";return d===400?(rt="Bad Request",tt&&et&&_e?it="You made a "+tt+' request to "'+et+'" but '+('did not provide a `loader` for route "'+_e+'", ')+"so there is no way to handle the request.":nt==="defer-action"?it="defer() is not supported in actions":nt==="invalid-body"&&(it="Unable to encode submission body")):d===403?(rt="Forbidden",it='Route "'+_e+'" does not match URL "'+et+'"'):d===404?(rt="Not Found",it='No route matches URL "'+et+'"'):d===405&&(rt="Method Not Allowed",tt&&et&&_e?it="You made a "+tt.toUpperCase()+' request to "'+et+'" but '+('did not provide an `action` for route "'+_e+'", ')+"so there is no way to handle the request.":tt&&(it='Invalid request method "'+tt.toUpperCase()+'"')),new ErrorResponse(d||500,rt,new Error(it),!0)}function findRedirect(d){for(let c=d.length-1;c>=0;c--){let et=d[c];if(isRedirectResult(et))return{result:et,idx:c}}}function stripHashFromPath(d){let c=typeof d=="string"?parsePath(d):d;return createPath(_extends$9({},c,{hash:""}))}function isHashChangeOnly(d,c){return d.pathname!==c.pathname||d.search!==c.search?!1:d.hash===""?c.hash!=="":d.hash===c.hash?!0:c.hash!==""}function isDeferredResult(d){return d.type===ResultType.deferred}function isErrorResult(d){return d.type===ResultType.error}function isRedirectResult(d){return(d&&d.type)===ResultType.redirect}function isDeferredData(d){let c=d;return c&&typeof c=="object"&&typeof c.data=="object"&&typeof c.subscribe=="function"&&typeof c.cancel=="function"&&typeof c.resolveData=="function"}function isResponse(d){return d!=null&&typeof d.status=="number"&&typeof d.statusText=="string"&&typeof d.headers=="object"&&typeof d.body<"u"}function isValidMethod(d){return validRequestMethods.has(d.toLowerCase())}function isMutationMethod(d){return validMutationMethods.has(d.toLowerCase())}async function resolveDeferredResults(d,c,et,_e,tt,nt){for(let rt=0;rt<et.length;rt++){let it=et[rt],ot=c[rt];if(!ot)continue;let st=d.find(lt=>lt.route.id===ot.route.id),at=st!=null&&!isNewRouteInstance(st,ot)&&(nt&&nt[ot.route.id])!==void 0;if(isDeferredResult(it)&&(tt||at)){let lt=_e[rt];invariant$2(lt,"Expected an AbortSignal for revalidating fetcher deferred result"),await resolveDeferredData(it,lt,tt).then(ct=>{ct&&(et[rt]=ct||et[rt])})}}}async function resolveDeferredData(d,c,et){if(et===void 0&&(et=!1),!await d.deferredData.resolveData(c)){if(et)try{return{type:ResultType.data,data:d.deferredData.unwrappedData}}catch(tt){return{type:ResultType.error,error:tt}}return{type:ResultType.data,data:d.deferredData.data}}}function hasNakedIndexQuery(d){return new URLSearchParams(d).getAll("index").some(c=>c==="")}function createUseMatchesMatch(d,c){let{route:et,pathname:_e,params:tt}=d;return{id:et.id,pathname:_e,params:tt,data:c[et.id],handle:et.handle}}function getTargetMatch(d,c){let et=typeof c=="string"?parsePath(c).search:c.search;if(d[d.length-1].route.index&&hasNakedIndexQuery(et||""))return d[d.length-1];let _e=getPathContributingMatches(d);return _e[_e.length-1]}function getSubmissionFromNavigation(d){let{formMethod:c,formAction:et,formEncType:_e,text:tt,formData:nt,json:rt}=d;if(!(!c||!et||!_e)){if(tt!=null)return{formMethod:c,formAction:et,formEncType:_e,formData:void 0,json:void 0,text:tt};if(nt!=null)return{formMethod:c,formAction:et,formEncType:_e,formData:nt,json:void 0,text:void 0};if(rt!==void 0)return{formMethod:c,formAction:et,formEncType:_e,formData:void 0,json:rt,text:void 0}}}function getLoadingNavigation(d,c){return c?{state:"loading",location:d,formMethod:c.formMethod,formAction:c.formAction,formEncType:c.formEncType,formData:c.formData,json:c.json,text:c.text}:{state:"loading",location:d,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function getSubmittingNavigation(d,c){return{state:"submitting",location:d,formMethod:c.formMethod,formAction:c.formAction,formEncType:c.formEncType,formData:c.formData,json:c.json,text:c.text}}function getLoadingFetcher(d,c){return d?{state:"loading",formMethod:d.formMethod,formAction:d.formAction,formEncType:d.formEncType,formData:d.formData,json:d.json,text:d.text,data:c," _hasFetcherDoneAnything ":!0}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:c," _hasFetcherDoneAnything ":!0}}function getSubmittingFetcher(d,c){return{state:"submitting",formMethod:d.formMethod,formAction:d.formAction,formEncType:d.formEncType,formData:d.formData,json:d.json,text:d.text,data:c?c.data:void 0," _hasFetcherDoneAnything ":!0}}function getDoneFetcher(d){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:d," _hasFetcherDoneAnything ":!0}}/**
 * React Router v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(d){for(var c=1;c<arguments.length;c++){var et=arguments[c];for(var _e in et)Object.prototype.hasOwnProperty.call(et,_e)&&(d[_e]=et[_e])}return d},_extends$8.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(d,c){let{relative:et}=c===void 0?{}:c;useInRouterContext()||invariant$2(!1);let{basename:_e,navigator:tt}=reactExports.useContext(NavigationContext),{hash:nt,pathname:rt,search:it}=useResolvedPath(d,{relative:et}),ot=rt;return _e!=="/"&&(ot=rt==="/"?_e:joinPaths([_e,rt])),tt.createHref({pathname:ot,search:it,hash:nt})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$2(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$1(d){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(d)}function useNavigate(){let{isDataRoute:d}=reactExports.useContext(RouteContext);return d?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$2(!1);let d=reactExports.useContext(DataRouterContext),{basename:c,navigator:et}=reactExports.useContext(NavigationContext),{matches:_e}=reactExports.useContext(RouteContext),{pathname:tt}=useLocation(),nt=JSON.stringify(getPathContributingMatches(_e).map(ot=>ot.pathnameBase)),rt=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{rt.current=!0}),reactExports.useCallback(function(ot,st){if(st===void 0&&(st={}),!rt.current)return;if(typeof ot=="number"){et.go(ot);return}let at=resolveTo(ot,JSON.parse(nt),tt,st.relative==="path");d==null&&c!=="/"&&(at.pathname=at.pathname==="/"?c:joinPaths([c,at.pathname])),(st.replace?et.replace:et.push)(at,st.state,st)},[c,et,nt,tt,d])}const OutletContext=reactExports.createContext(null);function useOutlet(d){let c=reactExports.useContext(RouteContext).outlet;return c&&reactExports.createElement(OutletContext.Provider,{value:d},c)}function useResolvedPath(d,c){let{relative:et}=c===void 0?{}:c,{matches:_e}=reactExports.useContext(RouteContext),{pathname:tt}=useLocation(),nt=JSON.stringify(getPathContributingMatches(_e).map(rt=>rt.pathnameBase));return reactExports.useMemo(()=>resolveTo(d,JSON.parse(nt),tt,et==="path"),[d,nt,tt,et])}function useRoutesImpl(d,c,et){useInRouterContext()||invariant$2(!1);let{navigator:_e}=reactExports.useContext(NavigationContext),{matches:tt}=reactExports.useContext(RouteContext),nt=tt[tt.length-1],rt=nt?nt.params:{};nt&&nt.pathname;let it=nt?nt.pathnameBase:"/";nt&&nt.route;let ot=useLocation(),st;if(c){var at;let ht=typeof c=="string"?parsePath(c):c;it==="/"||(at=ht.pathname)!=null&&at.startsWith(it)||invariant$2(!1),st=ht}else st=ot;let lt=st.pathname||"/",ct=it==="/"?lt:lt.slice(it.length)||"/",ut=matchRoutes(d,{pathname:ct}),dt=_renderMatches(ut&&ut.map(ht=>Object.assign({},ht,{params:Object.assign({},rt,ht.params),pathname:joinPaths([it,_e.encodeLocation?_e.encodeLocation(ht.pathname).pathname:ht.pathname]),pathnameBase:ht.pathnameBase==="/"?it:joinPaths([it,_e.encodeLocation?_e.encodeLocation(ht.pathnameBase).pathname:ht.pathnameBase])})),tt,et);return c&&dt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$8({pathname:"/",search:"",hash:"",state:null,key:"default"},st),navigationType:Action$1.Pop}},dt):dt}function DefaultErrorComponent(){let d=useRouteError(),c=isRouteErrorResponse(d)?d.status+" "+d.statusText:d instanceof Error?d.message:JSON.stringify(d),et=d instanceof Error?d.stack:null,tt={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},c),et?reactExports.createElement("pre",{style:tt},et):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(c){super(c),this.state={location:c.location,revalidation:c.revalidation,error:c.error}}static getDerivedStateFromError(c){return{error:c}}static getDerivedStateFromProps(c,et){return et.location!==c.location||et.revalidation!=="idle"&&c.revalidation==="idle"?{error:c.error,location:c.location,revalidation:c.revalidation}:{error:c.error||et.error,location:et.location,revalidation:c.revalidation||et.revalidation}}componentDidCatch(c,et){console.error("React Router caught the following error during render",c,et)}render(){return this.state.error?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(d){let{routeContext:c,match:et,children:_e}=d,tt=reactExports.useContext(DataRouterContext);return tt&&tt.static&&tt.staticContext&&(et.route.errorElement||et.route.ErrorBoundary)&&(tt.staticContext._deepestRenderedBoundaryId=et.route.id),reactExports.createElement(RouteContext.Provider,{value:c},_e)}function _renderMatches(d,c,et){var _e;if(c===void 0&&(c=[]),et===void 0&&(et=null),d==null){var tt;if((tt=et)!=null&&tt.errors)d=et.matches;else return null}let nt=d,rt=(_e=et)==null?void 0:_e.errors;if(rt!=null){let it=nt.findIndex(ot=>ot.route.id&&(rt==null?void 0:rt[ot.route.id]));it>=0||invariant$2(!1),nt=nt.slice(0,Math.min(nt.length,it+1))}return nt.reduceRight((it,ot,st)=>{let at=ot.route.id?rt==null?void 0:rt[ot.route.id]:null,lt=null;et&&(lt=ot.route.errorElement||defaultErrorElement);let ct=c.concat(nt.slice(0,st+1)),ut=()=>{let dt;return at?dt=lt:ot.route.Component?dt=reactExports.createElement(ot.route.Component,null):ot.route.element?dt=ot.route.element:dt=it,reactExports.createElement(RenderedRoute,{match:ot,routeContext:{outlet:it,matches:ct,isDataRoute:et!=null},children:dt})};return et&&(ot.route.ErrorBoundary||ot.route.errorElement||st===0)?reactExports.createElement(RenderErrorBoundary,{location:et.location,revalidation:et.revalidation,component:lt,error:at,children:ut(),routeContext:{outlet:null,matches:ct,isDataRoute:!0}}):ut()},null)}var DataRouterHook$1=function(d){return d.UseBlocker="useBlocker",d.UseRevalidator="useRevalidator",d.UseNavigateStable="useNavigate",d}(DataRouterHook$1||{}),DataRouterStateHook$1=function(d){return d.UseBlocker="useBlocker",d.UseLoaderData="useLoaderData",d.UseActionData="useActionData",d.UseRouteError="useRouteError",d.UseNavigation="useNavigation",d.UseRouteLoaderData="useRouteLoaderData",d.UseMatches="useMatches",d.UseRevalidator="useRevalidator",d.UseNavigateStable="useNavigate",d.UseRouteId="useRouteId",d}(DataRouterStateHook$1||{});function useDataRouterContext(d){let c=reactExports.useContext(DataRouterContext);return c||invariant$2(!1),c}function useDataRouterState(d){let c=reactExports.useContext(DataRouterStateContext);return c||invariant$2(!1),c}function useRouteContext(d){let c=reactExports.useContext(RouteContext);return c||invariant$2(!1),c}function useCurrentRouteId(d){let c=useRouteContext(),et=c.matches[c.matches.length-1];return et.route.id||invariant$2(!1),et.route.id}function useLoaderData(){let d=useDataRouterState(DataRouterStateHook$1.UseLoaderData),c=useCurrentRouteId(DataRouterStateHook$1.UseLoaderData);if(d.errors&&d.errors[c]!=null){console.error("You cannot `useLoaderData` in an errorElement (routeId: "+c+")");return}return d.loaderData[c]}function useRouteError(){var d;let c=reactExports.useContext(RouteErrorContext),et=useDataRouterState(DataRouterStateHook$1.UseRouteError),_e=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return c||((d=et.errors)==null?void 0:d[_e])}function useNavigateStable(){let{router:d}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),c=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),et=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{et.current=!0}),reactExports.useCallback(function(tt,nt){nt===void 0&&(nt={}),et.current&&(typeof tt=="number"?d.navigate(tt):d.navigate(tt,_extends$8({fromRouteId:c},nt)))},[d,c])}const START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION];function RouterProvider(d){let{fallbackElement:c,router:et,future:_e}=d,[tt,nt]=reactExports.useState(et.state),{v7_startTransition:rt}=_e||{},it=reactExports.useCallback(lt=>{rt&&startTransitionImpl?startTransitionImpl(()=>nt(lt)):nt(lt)},[nt,rt]);reactExports.useLayoutEffect(()=>et.subscribe(it),[et,it]);let ot=reactExports.useMemo(()=>({createHref:et.createHref,encodeLocation:et.encodeLocation,go:lt=>et.navigate(lt),push:(lt,ct,ut)=>et.navigate(lt,{state:ct,preventScrollReset:ut==null?void 0:ut.preventScrollReset}),replace:(lt,ct,ut)=>et.navigate(lt,{replace:!0,state:ct,preventScrollReset:ut==null?void 0:ut.preventScrollReset})}),[et]),st=et.basename||"/",at=reactExports.useMemo(()=>({router:et,navigator:ot,static:!1,basename:st}),[et,ot,st]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:at},reactExports.createElement(DataRouterStateContext.Provider,{value:tt},reactExports.createElement(Router,{basename:st,location:tt.location,navigationType:tt.historyAction,navigator:ot},tt.initialized?reactExports.createElement(DataRoutes,{routes:et.routes,state:tt}):c))),null)}function DataRoutes(d){let{routes:c,state:et}=d;return useRoutesImpl(c,void 0,et)}function Navigate(d){let{to:c,replace:et,state:_e,relative:tt}=d;useInRouterContext()||invariant$2(!1);let{matches:nt}=reactExports.useContext(RouteContext),{pathname:rt}=useLocation(),it=useNavigate(),ot=resolveTo(c,getPathContributingMatches(nt).map(at=>at.pathnameBase),rt,tt==="path"),st=JSON.stringify(ot);return reactExports.useEffect(()=>it(JSON.parse(st),{replace:et,state:_e,relative:tt}),[it,st,tt,et,_e]),null}function Outlet(d){return useOutlet(d.context)}function Router(d){let{basename:c="/",children:et=null,location:_e,navigationType:tt=Action$1.Pop,navigator:nt,static:rt=!1}=d;useInRouterContext()&&invariant$2(!1);let it=c.replace(/^\/*/,"/"),ot=reactExports.useMemo(()=>({basename:it,navigator:nt,static:rt}),[it,nt,rt]);typeof _e=="string"&&(_e=parsePath(_e));let{pathname:st="/",search:at="",hash:lt="",state:ct=null,key:ut="default"}=_e,dt=reactExports.useMemo(()=>{let ht=stripBasename(st,it);return ht==null?null:{location:{pathname:ht,search:at,hash:lt,state:ct,key:ut},navigationType:tt}},[it,st,at,lt,ct,ut,tt]);return dt==null?null:reactExports.createElement(NavigationContext.Provider,{value:ot},reactExports.createElement(LocationContext.Provider,{children:et,value:dt}))}new Promise(()=>{});function mapRouteProperties(d){let c={hasErrorBoundary:d.ErrorBoundary!=null||d.errorElement!=null};return d.Component&&Object.assign(c,{element:reactExports.createElement(d.Component),Component:void 0}),d.ErrorBoundary&&Object.assign(c,{errorElement:reactExports.createElement(d.ErrorBoundary),ErrorBoundary:void 0}),c}/**
 * React Router DOM v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(d){for(var c=1;c<arguments.length;c++){var et=arguments[c];for(var _e in et)Object.prototype.hasOwnProperty.call(et,_e)&&(d[_e]=et[_e])}return d},_extends$7.apply(this,arguments)}function _objectWithoutPropertiesLoose$d(d,c){if(d==null)return{};var et={},_e=Object.keys(d),tt,nt;for(nt=0;nt<_e.length;nt++)tt=_e[nt],!(c.indexOf(tt)>=0)&&(et[tt]=d[tt]);return et}function isModifiedEvent$1(d){return!!(d.metaKey||d.altKey||d.ctrlKey||d.shiftKey)}function shouldProcessLinkClick(d,c){return d.button===0&&(!c||c==="_self")&&!isModifiedEvent$1(d)}const _excluded$c=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function createHashRouter(d,c){return createRouter({basename:c==null?void 0:c.basename,future:_extends$7({},c==null?void 0:c.future,{v7_prependBasename:!0}),history:createHashHistory({window:c==null?void 0:c.window}),hydrationData:(c==null?void 0:c.hydrationData)||parseHydrationData(),routes:d,mapRouteProperties}).initialize()}function parseHydrationData(){var d;let c=(d=window)==null?void 0:d.__staticRouterHydrationData;return c&&c.errors&&(c=_extends$7({},c,{errors:deserializeErrors(c.errors)})),c}function deserializeErrors(d){if(!d)return null;let c=Object.entries(d),et={};for(let[_e,tt]of c)if(tt&&tt.__type==="RouteErrorResponse")et[_e]=new ErrorResponse(tt.status,tt.statusText,tt.data,tt.internal===!0);else if(tt&&tt.__type==="Error"){if(tt.__subType){let nt=window[tt.__subType];if(typeof nt=="function")try{let rt=new nt(tt.message);rt.stack="",et[_e]=rt}catch{}}if(et[_e]==null){let nt=new Error(tt.message);nt.stack="",et[_e]=nt}}else et[_e]=tt;return et}const isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link$1=reactExports.forwardRef(function(c,et){let{onClick:_e,relative:tt,reloadDocument:nt,replace:rt,state:it,target:ot,to:st,preventScrollReset:at}=c,lt=_objectWithoutPropertiesLoose$d(c,_excluded$c),{basename:ct}=reactExports.useContext(NavigationContext),ut,dt=!1;if(typeof st=="string"&&ABSOLUTE_URL_REGEX.test(st)&&(ut=st,isBrowser))try{let ft=new URL(window.location.href),mt=st.startsWith("//")?new URL(ft.protocol+st):new URL(st),pt=stripBasename(mt.pathname,ct);mt.origin===ft.origin&&pt!=null?st=pt+mt.search+mt.hash:dt=!0}catch{}let ht=useHref(st,{relative:tt}),yt=useLinkClickHandler(st,{replace:rt,state:it,target:ot,preventScrollReset:at,relative:tt});function gt(ft){_e&&_e(ft),ft.defaultPrevented||yt(ft)}return reactExports.createElement("a",_extends$7({},lt,{href:ut||ht,onClick:dt||nt?_e:gt,ref:et,target:ot}))});var DataRouterHook;(function(d){d.UseScrollRestoration="useScrollRestoration",d.UseSubmit="useSubmit",d.UseSubmitFetcher="useSubmitFetcher",d.UseFetcher="useFetcher"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(d){d.UseFetchers="useFetchers",d.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(d,c){let{target:et,replace:_e,state:tt,preventScrollReset:nt,relative:rt}=c===void 0?{}:c,it=useNavigate(),ot=useLocation(),st=useResolvedPath(d,{relative:rt});return reactExports.useCallback(at=>{if(shouldProcessLinkClick(at,et)){at.preventDefault();let lt=_e!==void 0?_e:createPath(ot)===createPath(st);it(d,{replace:lt,state:tt,preventScrollReset:nt,relative:rt})}},[ot,it,st,_e,tt,et,d,nt,rt])}var define_process_env_default$1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const assert=function(d,c){if(!d)throw assertionError(c)},assertionError=function(d){return new Error("Firebase Database ("+CONSTANTS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+d)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(d){const c=[];let et=0;for(let _e=0;_e<d.length;_e++){let tt=d.charCodeAt(_e);tt<128?c[et++]=tt:tt<2048?(c[et++]=tt>>6|192,c[et++]=tt&63|128):(tt&64512)===55296&&_e+1<d.length&&(d.charCodeAt(_e+1)&64512)===56320?(tt=65536+((tt&1023)<<10)+(d.charCodeAt(++_e)&1023),c[et++]=tt>>18|240,c[et++]=tt>>12&63|128,c[et++]=tt>>6&63|128,c[et++]=tt&63|128):(c[et++]=tt>>12|224,c[et++]=tt>>6&63|128,c[et++]=tt&63|128)}return c},byteArrayToString=function(d){const c=[];let et=0,_e=0;for(;et<d.length;){const tt=d[et++];if(tt<128)c[_e++]=String.fromCharCode(tt);else if(tt>191&&tt<224){const nt=d[et++];c[_e++]=String.fromCharCode((tt&31)<<6|nt&63)}else if(tt>239&&tt<365){const nt=d[et++],rt=d[et++],it=d[et++],ot=((tt&7)<<18|(nt&63)<<12|(rt&63)<<6|it&63)-65536;c[_e++]=String.fromCharCode(55296+(ot>>10)),c[_e++]=String.fromCharCode(56320+(ot&1023))}else{const nt=d[et++],rt=d[et++];c[_e++]=String.fromCharCode((tt&15)<<12|(nt&63)<<6|rt&63)}}return c.join("")},base64$2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(d,c){if(!Array.isArray(d))throw Error("encodeByteArray takes an array as a parameter");this.init_();const et=c?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let tt=0;tt<d.length;tt+=3){const nt=d[tt],rt=tt+1<d.length,it=rt?d[tt+1]:0,ot=tt+2<d.length,st=ot?d[tt+2]:0,at=nt>>2,lt=(nt&3)<<4|it>>4;let ct=(it&15)<<2|st>>6,ut=st&63;ot||(ut=64,rt||(ct=64)),_e.push(et[at],et[lt],et[ct],et[ut])}return _e.join("")},encodeString(d,c){return this.HAS_NATIVE_SUPPORT&&!c?btoa(d):this.encodeByteArray(stringToByteArray$1(d),c)},decodeString(d,c){return this.HAS_NATIVE_SUPPORT&&!c?atob(d):byteArrayToString(this.decodeStringToByteArray(d,c))},decodeStringToByteArray(d,c){this.init_();const et=c?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let tt=0;tt<d.length;){const nt=et[d.charAt(tt++)],it=tt<d.length?et[d.charAt(tt)]:0;++tt;const st=tt<d.length?et[d.charAt(tt)]:64;++tt;const lt=tt<d.length?et[d.charAt(tt)]:64;if(++tt,nt==null||it==null||st==null||lt==null)throw new DecodeBase64StringError;const ct=nt<<2|it>>4;if(_e.push(ct),st!==64){const ut=it<<4&240|st>>2;if(_e.push(ut),lt!==64){const dt=st<<6&192|lt;_e.push(dt)}}}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let d=0;d<this.ENCODED_VALS.length;d++)this.byteToCharMap_[d]=this.ENCODED_VALS.charAt(d),this.charToByteMap_[this.byteToCharMap_[d]]=d,this.byteToCharMapWebSafe_[d]=this.ENCODED_VALS_WEBSAFE.charAt(d),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[d]]=d,d>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(d)]=d,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(d)]=d)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(d){const c=stringToByteArray$1(d);return base64$2.encodeByteArray(c,!0)},base64urlEncodeWithoutPadding=function(d){return base64Encode(d).replace(/\./g,"")},base64Decode=function(d){try{return base64$2.decodeString(d,!0)}catch(c){console.error("base64Decode failed: ",c)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function deepCopy(d){return deepExtend(void 0,d)}function deepExtend(d,c){if(!(c instanceof Object))return c;switch(c.constructor){case Date:const et=c;return new Date(et.getTime());case Object:d===void 0&&(d={});break;case Array:d=[];break;default:return c}for(const et in c)!c.hasOwnProperty(et)||!isValidKey$1(et)||(d[et]=deepExtend(d[et],c[et]));return d}function isValidKey$1(d){return d!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default$1>"u")return;const d=define_process_env_default$1.__FIREBASE_DEFAULTS__;if(d)return JSON.parse(d)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let d;try{d=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const c=d&&base64Decode(d[1]);return c&&JSON.parse(c)},getDefaults=()=>{try{return getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(d){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${d}`);return}},getDefaultEmulatorHost=d=>{var c,et;return(et=(c=getDefaults())===null||c===void 0?void 0:c.emulatorHosts)===null||et===void 0?void 0:et[d]},getDefaultEmulatorHostnameAndPort=d=>{const c=getDefaultEmulatorHost(d);if(!c)return;const et=c.lastIndexOf(":");if(et<=0||et+1===c.length)throw new Error(`Invalid host ${c} with no separate hostname and port!`);const _e=parseInt(c.substring(et+1),10);return c[0]==="["?[c.substring(1,et-1),_e]:[c.substring(0,et),_e]},getDefaultAppConfig=()=>{var d;return(d=getDefaults())===null||d===void 0?void 0:d.config},getExperimentalSetting=d=>{var c;return(c=getDefaults())===null||c===void 0?void 0:c[`_${d}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((c,et)=>{this.resolve=c,this.reject=et})}wrapCallback(c){return(et,_e)=>{et?this.reject(et):this.resolve(_e),typeof c=="function"&&(this.promise.catch(()=>{}),c.length===1?c(et):c(et,_e))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(d,c){if(d.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const et={alg:"none",type:"JWT"},_e=c||"demo-project",tt=d.iat||0,nt=d.sub||d.user_id;if(!nt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const rt=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:tt,exp:tt+3600,auth_time:tt,sub:nt,user_id:nt,firebase:{sign_in_provider:"custom",identities:{}}},d);return[base64urlEncodeWithoutPadding(JSON.stringify(et)),base64urlEncodeWithoutPadding(JSON.stringify(rt)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isBrowserExtension(){const d=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof d=="object"&&d.id!==void 0}function isReactNative$1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const d=getUA();return d.indexOf("MSIE ")>=0||d.indexOf("Trident/")>=0}function isNodeSdk(){return CONSTANTS.NODE_ADMIN===!0}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((d,c)=>{try{let et=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",tt=self.indexedDB.open(_e);tt.onsuccess=()=>{tt.result.close(),et||self.indexedDB.deleteDatabase(_e),d(!0)},tt.onupgradeneeded=()=>{et=!1},tt.onerror=()=>{var nt;c(((nt=tt.error)===null||nt===void 0?void 0:nt.message)||"")}}catch(et){c(et)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(c,et,_e){super(et),this.code=c,this.customData=_e,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(c,et,_e){this.service=c,this.serviceName=et,this.errors=_e}create(c,...et){const _e=et[0]||{},tt=`${this.service}/${c}`,nt=this.errors[c],rt=nt?replaceTemplate(nt,_e):"Error",it=`${this.serviceName}: ${rt} (${tt}).`;return new FirebaseError(tt,it,_e)}}function replaceTemplate(d,c){return d.replace(PATTERN,(et,_e)=>{const tt=c[_e];return tt!=null?String(tt):`<${_e}?>`})}const PATTERN=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jsonEval(d){return JSON.parse(d)}function stringify(d){return JSON.stringify(d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const decode=function(d){let c={},et={},_e={},tt="";try{const nt=d.split(".");c=jsonEval(base64Decode(nt[0])||""),et=jsonEval(base64Decode(nt[1])||""),tt=nt[2],_e=et.d||{},delete et.d}catch{}return{header:c,claims:et,data:_e,signature:tt}},isValidFormat=function(d){const c=decode(d),et=c.claims;return!!et&&typeof et=="object"&&et.hasOwnProperty("iat")},isAdmin=function(d){const c=decode(d).claims;return typeof c=="object"&&c.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function contains$2(d,c){return Object.prototype.hasOwnProperty.call(d,c)}function safeGet(d,c){if(Object.prototype.hasOwnProperty.call(d,c))return d[c]}function isEmpty(d){for(const c in d)if(Object.prototype.hasOwnProperty.call(d,c))return!1;return!0}function map$1(d,c,et){const _e={};for(const tt in d)Object.prototype.hasOwnProperty.call(d,tt)&&(_e[tt]=c.call(et,d[tt],tt,d));return _e}function deepEqual(d,c){if(d===c)return!0;const et=Object.keys(d),_e=Object.keys(c);for(const tt of et){if(!_e.includes(tt))return!1;const nt=d[tt],rt=c[tt];if(isObject(nt)&&isObject(rt)){if(!deepEqual(nt,rt))return!1}else if(nt!==rt)return!1}for(const tt of _e)if(!et.includes(tt))return!1;return!0}function isObject(d){return d!==null&&typeof d=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(d){const c=[];for(const[et,_e]of Object.entries(d))Array.isArray(_e)?_e.forEach(tt=>{c.push(encodeURIComponent(et)+"="+encodeURIComponent(tt))}):c.push(encodeURIComponent(et)+"="+encodeURIComponent(_e));return c.length?"&"+c.join("&"):""}function querystringDecode(d){const c={};return d.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[tt,nt]=_e.split("=");c[decodeURIComponent(tt)]=decodeURIComponent(nt)}}),c}function extractQuerystring(d){const c=d.indexOf("?");if(!c)return"";const et=d.indexOf("#",c);return d.substring(c,et>0?et:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sha1{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let c=1;c<this.blockSize;++c)this.pad_[c]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(c,et){et||(et=0);const _e=this.W_;if(typeof c=="string")for(let lt=0;lt<16;lt++)_e[lt]=c.charCodeAt(et)<<24|c.charCodeAt(et+1)<<16|c.charCodeAt(et+2)<<8|c.charCodeAt(et+3),et+=4;else for(let lt=0;lt<16;lt++)_e[lt]=c[et]<<24|c[et+1]<<16|c[et+2]<<8|c[et+3],et+=4;for(let lt=16;lt<80;lt++){const ct=_e[lt-3]^_e[lt-8]^_e[lt-14]^_e[lt-16];_e[lt]=(ct<<1|ct>>>31)&4294967295}let tt=this.chain_[0],nt=this.chain_[1],rt=this.chain_[2],it=this.chain_[3],ot=this.chain_[4],st,at;for(let lt=0;lt<80;lt++){lt<40?lt<20?(st=it^nt&(rt^it),at=1518500249):(st=nt^rt^it,at=1859775393):lt<60?(st=nt&rt|it&(nt|rt),at=2400959708):(st=nt^rt^it,at=3395469782);const ct=(tt<<5|tt>>>27)+st+ot+at+_e[lt]&4294967295;ot=it,it=rt,rt=(nt<<30|nt>>>2)&4294967295,nt=tt,tt=ct}this.chain_[0]=this.chain_[0]+tt&4294967295,this.chain_[1]=this.chain_[1]+nt&4294967295,this.chain_[2]=this.chain_[2]+rt&4294967295,this.chain_[3]=this.chain_[3]+it&4294967295,this.chain_[4]=this.chain_[4]+ot&4294967295}update(c,et){if(c==null)return;et===void 0&&(et=c.length);const _e=et-this.blockSize;let tt=0;const nt=this.buf_;let rt=this.inbuf_;for(;tt<et;){if(rt===0)for(;tt<=_e;)this.compress_(c,tt),tt+=this.blockSize;if(typeof c=="string"){for(;tt<et;)if(nt[rt]=c.charCodeAt(tt),++rt,++tt,rt===this.blockSize){this.compress_(nt),rt=0;break}}else for(;tt<et;)if(nt[rt]=c[tt],++rt,++tt,rt===this.blockSize){this.compress_(nt),rt=0;break}}this.inbuf_=rt,this.total_+=et}digest(){const c=[];let et=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let tt=this.blockSize-1;tt>=56;tt--)this.buf_[tt]=et&255,et/=256;this.compress_(this.buf_);let _e=0;for(let tt=0;tt<5;tt++)for(let nt=24;nt>=0;nt-=8)c[_e]=this.chain_[tt]>>nt&255,++_e;return c}}function createSubscribe(d,c){const et=new ObserverProxy(d,c);return et.subscribe.bind(et)}class ObserverProxy{constructor(c,et){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=et,this.task.then(()=>{c(this)}).catch(_e=>{this.error(_e)})}next(c){this.forEachObserver(et=>{et.next(c)})}error(c){this.forEachObserver(et=>{et.error(c)}),this.close(c)}complete(){this.forEachObserver(c=>{c.complete()}),this.close()}subscribe(c,et,_e){let tt;if(c===void 0&&et===void 0&&_e===void 0)throw new Error("Missing Observer.");implementsAnyMethods(c,["next","error","complete"])?tt=c:tt={next:c,error:et,complete:_e},tt.next===void 0&&(tt.next=noop$7),tt.error===void 0&&(tt.error=noop$7),tt.complete===void 0&&(tt.complete=noop$7);const nt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?tt.error(this.finalError):tt.complete()}catch{}}),this.observers.push(tt),nt}unsubscribeOne(c){this.observers===void 0||this.observers[c]===void 0||(delete this.observers[c],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(c){if(!this.finalized)for(let et=0;et<this.observers.length;et++)this.sendOne(et,c)}sendOne(c,et){this.task.then(()=>{if(this.observers!==void 0&&this.observers[c]!==void 0)try{et(this.observers[c])}catch(_e){typeof console<"u"&&console.error&&console.error(_e)}})}close(c){this.finalized||(this.finalized=!0,c!==void 0&&(this.finalError=c),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(d,c){if(typeof d!="object"||d===null)return!1;for(const et of c)if(et in d&&typeof d[et]=="function")return!0;return!1}function noop$7(){}function errorPrefix(d,c){return`${d} failed: ${c} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray=function(d){const c=[];let et=0;for(let _e=0;_e<d.length;_e++){let tt=d.charCodeAt(_e);if(tt>=55296&&tt<=56319){const nt=tt-55296;_e++,assert(_e<d.length,"Surrogate pair missing trail surrogate.");const rt=d.charCodeAt(_e)-56320;tt=65536+(nt<<10)+rt}tt<128?c[et++]=tt:tt<2048?(c[et++]=tt>>6|192,c[et++]=tt&63|128):tt<65536?(c[et++]=tt>>12|224,c[et++]=tt>>6&63|128,c[et++]=tt&63|128):(c[et++]=tt>>18|240,c[et++]=tt>>12&63|128,c[et++]=tt>>6&63|128,c[et++]=tt&63|128)}return c},stringLength=function(d){let c=0;for(let et=0;et<d.length;et++){const _e=d.charCodeAt(et);_e<128?c++:_e<2048?c+=2:_e>=55296&&_e<=56319?(c+=4,et++):c+=3}return c};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(d){return d&&d._delegate?d._delegate:d}class Component{constructor(c,et,_e){this.name=c,this.instanceFactory=et,this.type=_e,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(c){return this.instantiationMode=c,this}setMultipleInstances(c){return this.multipleInstances=c,this}setServiceProps(c){return this.serviceProps=c,this}setInstanceCreatedCallback(c){return this.onInstanceCreated=c,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(c,et){this.name=c,this.container=et,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(c){const et=this.normalizeInstanceIdentifier(c);if(!this.instancesDeferred.has(et)){const _e=new Deferred;if(this.instancesDeferred.set(et,_e),this.isInitialized(et)||this.shouldAutoInitialize())try{const tt=this.getOrInitializeService({instanceIdentifier:et});tt&&_e.resolve(tt)}catch{}}return this.instancesDeferred.get(et).promise}getImmediate(c){var et;const _e=this.normalizeInstanceIdentifier(c==null?void 0:c.identifier),tt=(et=c==null?void 0:c.optional)!==null&&et!==void 0?et:!1;if(this.isInitialized(_e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:_e})}catch(nt){if(tt)return null;throw nt}else{if(tt)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(c){if(c.name!==this.name)throw Error(`Mismatching Component ${c.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=c,!!this.shouldAutoInitialize()){if(isComponentEager(c))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[et,_e]of this.instancesDeferred.entries()){const tt=this.normalizeInstanceIdentifier(et);try{const nt=this.getOrInitializeService({instanceIdentifier:tt});_e.resolve(nt)}catch{}}}}clearInstance(c=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(c),this.instancesOptions.delete(c),this.instances.delete(c)}async delete(){const c=Array.from(this.instances.values());await Promise.all([...c.filter(et=>"INTERNAL"in et).map(et=>et.INTERNAL.delete()),...c.filter(et=>"_delete"in et).map(et=>et._delete())])}isComponentSet(){return this.component!=null}isInitialized(c=DEFAULT_ENTRY_NAME$1){return this.instances.has(c)}getOptions(c=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(c)||{}}initialize(c={}){const{options:et={}}=c,_e=this.normalizeInstanceIdentifier(c.instanceIdentifier);if(this.isInitialized(_e))throw Error(`${this.name}(${_e}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const tt=this.getOrInitializeService({instanceIdentifier:_e,options:et});for(const[nt,rt]of this.instancesDeferred.entries()){const it=this.normalizeInstanceIdentifier(nt);_e===it&&rt.resolve(tt)}return tt}onInit(c,et){var _e;const tt=this.normalizeInstanceIdentifier(et),nt=(_e=this.onInitCallbacks.get(tt))!==null&&_e!==void 0?_e:new Set;nt.add(c),this.onInitCallbacks.set(tt,nt);const rt=this.instances.get(tt);return rt&&c(rt,tt),()=>{nt.delete(c)}}invokeOnInitCallbacks(c,et){const _e=this.onInitCallbacks.get(et);if(_e)for(const tt of _e)try{tt(c,et)}catch{}}getOrInitializeService({instanceIdentifier:c,options:et={}}){let _e=this.instances.get(c);if(!_e&&this.component&&(_e=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(c),options:et}),this.instances.set(c,_e),this.instancesOptions.set(c,et),this.invokeOnInitCallbacks(_e,c),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,c,_e)}catch{}return _e||null}normalizeInstanceIdentifier(c=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?c:DEFAULT_ENTRY_NAME$1:c}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(d){return d===DEFAULT_ENTRY_NAME$1?void 0:d}function isComponentEager(d){return d.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(c){this.name=c,this.providers=new Map}addComponent(c){const et=this.getProvider(c.name);if(et.isComponentSet())throw new Error(`Component ${c.name} has already been registered with ${this.name}`);et.setComponent(c)}addOrOverwriteComponent(c){this.getProvider(c.name).isComponentSet()&&this.providers.delete(c.name),this.addComponent(c)}getProvider(c){if(this.providers.has(c))return this.providers.get(c);const et=new Provider(c,this);return this.providers.set(c,et),et}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(d){d[d.DEBUG=0]="DEBUG",d[d.VERBOSE=1]="VERBOSE",d[d.INFO=2]="INFO",d[d.WARN=3]="WARN",d[d.ERROR=4]="ERROR",d[d.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(d,c,...et)=>{if(c<d.logLevel)return;const _e=new Date().toISOString(),tt=ConsoleMethod[c];if(tt)console[tt](`[${_e}]  ${d.name}:`,...et);else throw new Error(`Attempted to log a message with an invalid logType (value: ${c})`)};class Logger{constructor(c){this.name=c,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(c){if(!(c in LogLevel))throw new TypeError(`Invalid value "${c}" assigned to \`logLevel\``);this._logLevel=c}setLogLevel(c){this._logLevel=typeof c=="string"?levelStringToEnum[c]:c}get logHandler(){return this._logHandler}set logHandler(c){if(typeof c!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=c}get userLogHandler(){return this._userLogHandler}set userLogHandler(c){this._userLogHandler=c}debug(...c){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...c),this._logHandler(this,LogLevel.DEBUG,...c)}log(...c){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...c),this._logHandler(this,LogLevel.VERBOSE,...c)}info(...c){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...c),this._logHandler(this,LogLevel.INFO,...c)}warn(...c){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...c),this._logHandler(this,LogLevel.WARN,...c)}error(...c){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...c),this._logHandler(this,LogLevel.ERROR,...c)}}const instanceOfAny=(d,c)=>c.some(et=>d instanceof et);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(d){const c=new Promise((et,_e)=>{const tt=()=>{d.removeEventListener("success",nt),d.removeEventListener("error",rt)},nt=()=>{et(wrap(d.result)),tt()},rt=()=>{_e(d.error),tt()};d.addEventListener("success",nt),d.addEventListener("error",rt)});return c.then(et=>{et instanceof IDBCursor&&cursorRequestMap.set(et,d)}).catch(()=>{}),reverseTransformCache.set(c,d),c}function cacheDonePromiseForTransaction(d){if(transactionDoneMap.has(d))return;const c=new Promise((et,_e)=>{const tt=()=>{d.removeEventListener("complete",nt),d.removeEventListener("error",rt),d.removeEventListener("abort",rt)},nt=()=>{et(),tt()},rt=()=>{_e(d.error||new DOMException("AbortError","AbortError")),tt()};d.addEventListener("complete",nt),d.addEventListener("error",rt),d.addEventListener("abort",rt)});transactionDoneMap.set(d,c)}let idbProxyTraps={get(d,c,et){if(d instanceof IDBTransaction){if(c==="done")return transactionDoneMap.get(d);if(c==="objectStoreNames")return d.objectStoreNames||transactionStoreNamesMap.get(d);if(c==="store")return et.objectStoreNames[1]?void 0:et.objectStore(et.objectStoreNames[0])}return wrap(d[c])},set(d,c,et){return d[c]=et,!0},has(d,c){return d instanceof IDBTransaction&&(c==="done"||c==="store")?!0:c in d}};function replaceTraps(d){idbProxyTraps=d(idbProxyTraps)}function wrapFunction(d){return d===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(c,...et){const _e=d.call(unwrap(this),c,...et);return transactionStoreNamesMap.set(_e,c.sort?c.sort():[c]),wrap(_e)}:getCursorAdvanceMethods().includes(d)?function(...c){return d.apply(unwrap(this),c),wrap(cursorRequestMap.get(this))}:function(...c){return wrap(d.apply(unwrap(this),c))}}function transformCachableValue(d){return typeof d=="function"?wrapFunction(d):(d instanceof IDBTransaction&&cacheDonePromiseForTransaction(d),instanceOfAny(d,getIdbProxyableTypes())?new Proxy(d,idbProxyTraps):d)}function wrap(d){if(d instanceof IDBRequest)return promisifyRequest(d);if(transformCache.has(d))return transformCache.get(d);const c=transformCachableValue(d);return c!==d&&(transformCache.set(d,c),reverseTransformCache.set(c,d)),c}const unwrap=d=>reverseTransformCache.get(d);function openDB(d,c,{blocked:et,upgrade:_e,blocking:tt,terminated:nt}={}){const rt=indexedDB.open(d,c),it=wrap(rt);return _e&&rt.addEventListener("upgradeneeded",ot=>{_e(wrap(rt.result),ot.oldVersion,ot.newVersion,wrap(rt.transaction),ot)}),et&&rt.addEventListener("blocked",ot=>et(ot.oldVersion,ot.newVersion,ot)),it.then(ot=>{nt&&ot.addEventListener("close",()=>nt()),tt&&ot.addEventListener("versionchange",st=>tt(st.oldVersion,st.newVersion,st))}).catch(()=>{}),it}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(d,c){if(!(d instanceof IDBDatabase&&!(c in d)&&typeof c=="string"))return;if(cachedMethods.get(c))return cachedMethods.get(c);const et=c.replace(/FromIndex$/,""),_e=c!==et,tt=writeMethods.includes(et);if(!(et in(_e?IDBIndex:IDBObjectStore).prototype)||!(tt||readMethods.includes(et)))return;const nt=async function(rt,...it){const ot=this.transaction(rt,tt?"readwrite":"readonly");let st=ot.store;return _e&&(st=st.index(it.shift())),(await Promise.all([st[et](...it),tt&&ot.done]))[0]};return cachedMethods.set(c,nt),nt}replaceTraps(d=>({...d,get:(c,et,_e)=>getMethod(c,et)||d.get(c,et,_e),has:(c,et)=>!!getMethod(c,et)||d.has(c,et)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(c){this.container=c}getPlatformInfoString(){return this.container.getProviders().map(et=>{if(isVersionServiceProvider(et)){const _e=et.getImmediate();return`${_e.library}/${_e.version}`}else return null}).filter(et=>et).join(" ")}}function isVersionServiceProvider(d){const c=d.getComponent();return(c==null?void 0:c.type)==="VERSION"}const name$o="@firebase/app",version$1$1="0.9.15";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger$1=new Logger("@firebase/app"),name$n="@firebase/app-compat",name$m="@firebase/analytics-compat",name$l="@firebase/analytics",name$k="@firebase/app-check-compat",name$j="@firebase/app-check",name$i="@firebase/auth",name$h="@firebase/auth-compat",name$g="@firebase/database",name$f="@firebase/database-compat",name$e="@firebase/functions",name$d="@firebase/functions-compat",name$c="@firebase/installations",name$b="@firebase/installations-compat",name$a="@firebase/messaging",name$9="@firebase/messaging-compat",name$8="@firebase/performance",name$7="@firebase/performance-compat",name$6="@firebase/remote-config",name$5="@firebase/remote-config-compat",name$4="@firebase/storage",name$3="@firebase/storage-compat",name$2$1="@firebase/firestore",name$1$1="@firebase/firestore-compat",name$p="firebase",version$3="10.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$o]:"fire-core",[name$n]:"fire-core-compat",[name$l]:"fire-analytics",[name$m]:"fire-analytics-compat",[name$j]:"fire-app-check",[name$k]:"fire-app-check-compat",[name$i]:"fire-auth",[name$h]:"fire-auth-compat",[name$g]:"fire-rtdb",[name$f]:"fire-rtdb-compat",[name$e]:"fire-fn",[name$d]:"fire-fn-compat",[name$c]:"fire-iid",[name$b]:"fire-iid-compat",[name$a]:"fire-fcm",[name$9]:"fire-fcm-compat",[name$8]:"fire-perf",[name$7]:"fire-perf-compat",[name$6]:"fire-rc",[name$5]:"fire-rc-compat",[name$4]:"fire-gcs",[name$3]:"fire-gcs-compat",[name$2$1]:"fire-fst",[name$1$1]:"fire-fst-compat","fire-js":"fire-js",[name$p]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_components=new Map;function _addComponent(d,c){try{d.container.addComponent(c)}catch(et){logger$1.debug(`Component ${c.name} failed to register with FirebaseApp ${d.name}`,et)}}function _registerComponent(d){const c=d.name;if(_components.has(c))return logger$1.debug(`There were multiple attempts to register component ${c}.`),!1;_components.set(c,d);for(const et of _apps.values())_addComponent(et,d);return!0}function _getProvider(d,c){const et=d.container.getProvider("heartbeat").getImmediate({optional:!0});return et&&et.triggerHeartbeat(),d.container.getProvider(c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(c,et,_e){this._isDeleted=!1,this._options=Object.assign({},c),this._config=Object.assign({},et),this._name=et.name,this._automaticDataCollectionEnabled=et.automaticDataCollectionEnabled,this._container=_e,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(c){this.checkDestroyed(),this._automaticDataCollectionEnabled=c}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(c){this._isDeleted=c}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION$1=version$3;function initializeApp(d,c={}){let et=d;typeof c!="object"&&(c={name:c});const _e=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!1},c),tt=_e.name;if(typeof tt!="string"||!tt)throw ERROR_FACTORY.create("bad-app-name",{appName:String(tt)});if(et||(et=getDefaultAppConfig()),!et)throw ERROR_FACTORY.create("no-options");const nt=_apps.get(tt);if(nt){if(deepEqual(et,nt.options)&&deepEqual(_e,nt.config))return nt;throw ERROR_FACTORY.create("duplicate-app",{appName:tt})}const rt=new ComponentContainer(tt);for(const ot of _components.values())rt.addComponent(ot);const it=new FirebaseAppImpl(et,_e,rt);return _apps.set(tt,it),it}function getApp(d=DEFAULT_ENTRY_NAME){const c=_apps.get(d);if(!c&&d===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!c)throw ERROR_FACTORY.create("no-app",{appName:d});return c}function registerVersion(d,c,et){var _e;let tt=(_e=PLATFORM_LOG_STRING[d])!==null&&_e!==void 0?_e:d;et&&(tt+=`-${et}`);const nt=tt.match(/\s|\//),rt=c.match(/\s|\//);if(nt||rt){const it=[`Unable to register library "${tt}" with version "${c}":`];nt&&it.push(`library name "${tt}" contains illegal characters (whitespace or "/")`),nt&&rt&&it.push("and"),rt&&it.push(`version name "${c}" contains illegal characters (whitespace or "/")`),logger$1.warn(it.join(" "));return}_registerComponent(new Component(`${tt}-version`,()=>({library:tt,version:c}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(d,c)=>{switch(c){case 0:d.createObjectStore(STORE_NAME)}}}).catch(d=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:d.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(d){try{return await(await getDbPromise()).transaction(STORE_NAME).objectStore(STORE_NAME).get(computeKey(d))}catch(c){if(c instanceof FirebaseError)logger$1.warn(c.message);else{const et=ERROR_FACTORY.create("idb-get",{originalErrorMessage:c==null?void 0:c.message});logger$1.warn(et.message)}}}async function writeHeartbeatsToIndexedDB(d,c){try{const _e=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await _e.objectStore(STORE_NAME).put(c,computeKey(d)),await _e.done}catch(et){if(et instanceof FirebaseError)logger$1.warn(et.message);else{const _e=ERROR_FACTORY.create("idb-set",{originalErrorMessage:et==null?void 0:et.message});logger$1.warn(_e.message)}}}function computeKey(d){return`${d.name}!${d.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,STORED_HEARTBEAT_RETENTION_MAX_MILLIS=30*24*60*60*1e3;class HeartbeatServiceImpl{constructor(c){this.container=c,this._heartbeatsCache=null;const et=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(et),this._heartbeatsCachePromise=this._storage.read().then(_e=>(this._heartbeatsCache=_e,_e))}async triggerHeartbeat(){const et=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),_e=getUTCDateString();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===_e||this._heartbeatsCache.heartbeats.some(tt=>tt.date===_e)))return this._heartbeatsCache.heartbeats.push({date:_e,agent:et}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(tt=>{const nt=new Date(tt.date).valueOf();return Date.now()-nt<=STORED_HEARTBEAT_RETENTION_MAX_MILLIS}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const c=getUTCDateString(),{heartbeatsToSend:et,unsentEntries:_e}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),tt=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:et}));return this._heartbeatsCache.lastSentHeartbeatDate=c,_e.length>0?(this._heartbeatsCache.heartbeats=_e,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),tt}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(d,c=MAX_HEADER_BYTES){const et=[];let _e=d.slice();for(const tt of d){const nt=et.find(rt=>rt.agent===tt.agent);if(nt){if(nt.dates.push(tt.date),countBytes(et)>c){nt.dates.pop();break}}else if(et.push({agent:tt.agent,dates:[tt.date]}),countBytes(et)>c){et.pop();break}_e=_e.slice(1)}return{heartbeatsToSend:et,unsentEntries:_e}}class HeartbeatStorageImpl{constructor(c){this.app=c,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await readHeartbeatsFromIndexedDB(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(c){var et;if(await this._canUseIndexedDBPromise){const tt=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(et=c.lastSentHeartbeatDate)!==null&&et!==void 0?et:tt.lastSentHeartbeatDate,heartbeats:c.heartbeats})}else return}async add(c){var et;if(await this._canUseIndexedDBPromise){const tt=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(et=c.lastSentHeartbeatDate)!==null&&et!==void 0?et:tt.lastSentHeartbeatDate,heartbeats:[...tt.heartbeats,...c.heartbeats]})}else return}}function countBytes(d){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:d})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(d){_registerComponent(new Component("platform-logger",c=>new PlatformLoggerServiceImpl(c),"PRIVATE")),_registerComponent(new Component("heartbeat",c=>new HeartbeatServiceImpl(c),"PRIVATE")),registerVersion(name$o,version$1$1,d),registerVersion(name$o,version$1$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");function __rest$1(d,c){var et={};for(var _e in d)Object.prototype.hasOwnProperty.call(d,_e)&&c.indexOf(_e)<0&&(et[_e]=d[_e]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var tt=0,_e=Object.getOwnPropertySymbols(d);tt<_e.length;tt++)c.indexOf(_e[tt])<0&&Object.prototype.propertyIsEnumerable.call(d,_e[tt])&&(et[_e[tt]]=d[_e[tt]]);return et}typeof SuppressedError=="function"&&SuppressedError;function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap()),AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient$1=new Logger("@firebase/auth");function _logWarn(d,...c){logClient$1.logLevel<=LogLevel.WARN&&logClient$1.warn(`Auth (${SDK_VERSION$1}): ${d}`,...c)}function _logError(d,...c){logClient$1.logLevel<=LogLevel.ERROR&&logClient$1.error(`Auth (${SDK_VERSION$1}): ${d}`,...c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(d,...c){throw createErrorInternal(d,...c)}function _createError(d,...c){return createErrorInternal(d,...c)}function _errorWithCustomMessage(d,c,et){const _e=Object.assign(Object.assign({},prodErrorMap()),{[c]:et});return new ErrorFactory("auth","Firebase",_e).create(c,{appName:d.name})}function _assertInstanceOf(d,c,et){const _e=et;if(!(c instanceof _e))throw _e.name!==c.constructor.name&&_fail(d,"argument-error"),_errorWithCustomMessage(d,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function createErrorInternal(d,...c){if(typeof d!="string"){const et=c[0],_e=[...c.slice(1)];return _e[0]&&(_e[0].appName=d.name),d._errorFactory.create(et,..._e)}return _DEFAULT_AUTH_ERROR_FACTORY.create(d,...c)}function _assert(d,c,...et){if(!d)throw createErrorInternal(c,...et)}function debugFail(d){const c="INTERNAL ASSERTION FAILED: "+d;throw _logError(c),new Error(c)}function debugAssert(d,c){d||debugFail(c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){var d;return typeof self<"u"&&((d=self.location)===null||d===void 0?void 0:d.href)||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){var d;return typeof self<"u"&&((d=self.location)===null||d===void 0?void 0:d.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const d=navigator;return d.languages&&d.languages[0]||d.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(c,et){this.shortDelay=c,this.longDelay=et,debugAssert(et>c,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative$1()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(d,c){debugAssert(d.emulator,"Emulator should always be set here");const{url:et}=d.emulator;return c?`${et}${c.startsWith("/")?c.slice(1):c}`:et}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(c,et,_e){this.fetchImpl=c,et&&(this.headersImpl=et),_e&&(this.responseImpl=_e)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(d,c){return d.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:d.tenantId}):c}async function _performApiRequest(d,c,et,_e,tt={}){return _performFetchWithErrorHandling(d,tt,async()=>{let nt={},rt={};_e&&(c==="GET"?rt=_e:nt={body:JSON.stringify(_e)});const it=querystring(Object.assign({key:d.config.apiKey},rt)).slice(1),ot=await d._getAdditionalHeaders();return ot["Content-Type"]="application/json",d.languageCode&&(ot["X-Firebase-Locale"]=d.languageCode),FetchProvider.fetch()(_getFinalTarget(d,d.config.apiHost,et,it),Object.assign({method:c,headers:ot,referrerPolicy:"no-referrer"},nt))})}async function _performFetchWithErrorHandling(d,c,et){d._canInitEmulator=!1;const _e=Object.assign(Object.assign({},SERVER_ERROR_MAP),c);try{const tt=new NetworkTimeout(d),nt=await Promise.race([et(),tt.promise]);tt.clearNetworkTimeout();const rt=await nt.json();if("needConfirmation"in rt)throw _makeTaggedError(d,"account-exists-with-different-credential",rt);if(nt.ok&&!("errorMessage"in rt))return rt;{const it=nt.ok?rt.errorMessage:rt.error.message,[ot,st]=it.split(" : ");if(ot==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(d,"credential-already-in-use",rt);if(ot==="EMAIL_EXISTS")throw _makeTaggedError(d,"email-already-in-use",rt);if(ot==="USER_DISABLED")throw _makeTaggedError(d,"user-disabled",rt);const at=_e[ot]||ot.toLowerCase().replace(/[_\s]+/g,"-");if(st)throw _errorWithCustomMessage(d,at,st);_fail(d,at)}}catch(tt){if(tt instanceof FirebaseError)throw tt;_fail(d,"network-request-failed",{message:String(tt)})}}async function _performSignInRequest(d,c,et,_e,tt={}){const nt=await _performApiRequest(d,c,et,_e,tt);return"mfaPendingCredential"in nt&&_fail(d,"multi-factor-auth-required",{_serverResponse:nt}),nt}function _getFinalTarget(d,c,et,_e){const tt=`${c}${et}?${_e}`;return d.config.emulator?_emulatorUrl(d.config,tt):`${d.config.apiScheme}://${tt}`}class NetworkTimeout{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((et,_e)=>{this.timer=setTimeout(()=>_e(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _makeTaggedError(d,c,et){const _e={appName:d.name};et.email&&(_e.email=et.email),et.phoneNumber&&(_e.phoneNumber=et.phoneNumber);const tt=_createError(d,c,_e);return tt.customData._tokenResponse=et,tt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(d,c){return _performApiRequest(d,"POST","/v1/accounts:delete",c)}async function getAccountInfo(d,c){return _performApiRequest(d,"POST","/v1/accounts:lookup",c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(d){if(d)try{const c=new Date(Number(d));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}async function getIdTokenResult(d,c=!1){const et=getModularInstance(d),_e=await et.getIdToken(c),tt=_parseToken(_e);_assert(tt&&tt.exp&&tt.auth_time&&tt.iat,et.auth,"internal-error");const nt=typeof tt.firebase=="object"?tt.firebase:void 0,rt=nt==null?void 0:nt.sign_in_provider;return{claims:tt,token:_e,authTime:utcTimestampToDateString(secondsStringToMilliseconds(tt.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(tt.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(tt.exp)),signInProvider:rt||null,signInSecondFactor:(nt==null?void 0:nt.sign_in_second_factor)||null}}function secondsStringToMilliseconds(d){return Number(d)*1e3}function _parseToken(d){const[c,et,_e]=d.split(".");if(c===void 0||et===void 0||_e===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const tt=base64Decode(et);return tt?JSON.parse(tt):(_logError("Failed to decode base64 JWT payload"),null)}catch(tt){return _logError("Caught error parsing JWT payload as JSON",tt==null?void 0:tt.toString()),null}}function _tokenExpiresIn(d){const c=_parseToken(d);return _assert(c,"internal-error"),_assert(typeof c.exp<"u","internal-error"),_assert(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(d,c,et=!1){if(et)return c;try{return await c}catch(_e){throw _e instanceof FirebaseError&&isUserInvalidated(_e)&&d.auth.currentUser===d&&await d.auth.signOut(),_e}}function isUserInvalidated({code:d}){return d==="auth/user-disabled"||d==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(c){var et;if(c){const _e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),_e}else{this.errorBackoff=3e4;const tt=((et=this.user.stsTokenManager.expirationTime)!==null&&et!==void 0?et:0)-Date.now()-3e5;return Math.max(0,tt)}}schedule(c=!1){if(!this.isRunning)return;const et=this.getInterval(c);this.timerId=setTimeout(async()=>{await this.iteration()},et)}async iteration(){try{await this.user.getIdToken(!0)}catch(c){(c==null?void 0:c.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(c,et){this.createdAt=c,this.lastLoginAt=et,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(d){var c;const et=d.auth,_e=await d.getIdToken(),tt=await _logoutIfInvalidated(d,getAccountInfo(et,{idToken:_e}));_assert(tt==null?void 0:tt.users.length,et,"internal-error");const nt=tt.users[0];d._notifyReloadListener(nt);const rt=!((c=nt.providerUserInfo)===null||c===void 0)&&c.length?extractProviderData(nt.providerUserInfo):[],it=mergeProviderData(d.providerData,rt),ot=d.isAnonymous,st=!(d.email&&nt.passwordHash)&&!(it!=null&&it.length),at=ot?st:!1,lt={uid:nt.localId,displayName:nt.displayName||null,photoURL:nt.photoUrl||null,email:nt.email||null,emailVerified:nt.emailVerified||!1,phoneNumber:nt.phoneNumber||null,tenantId:nt.tenantId||null,providerData:it,metadata:new UserMetadata(nt.createdAt,nt.lastLoginAt),isAnonymous:at};Object.assign(d,lt)}async function reload(d){const c=getModularInstance(d);await _reloadWithoutSaving(c),await c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)}function mergeProviderData(d,c){return[...d.filter(_e=>!c.some(tt=>tt.providerId===_e.providerId)),...c]}function extractProviderData(d){return d.map(c=>{var{providerId:et}=c,_e=__rest$1(c,["providerId"]);return{providerId:et,uid:_e.rawId||"",displayName:_e.displayName||null,email:_e.email||null,phoneNumber:_e.phoneNumber||null,photoURL:_e.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(d,c){const et=await _performFetchWithErrorHandling(d,{},async()=>{const _e=querystring({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:tt,apiKey:nt}=d.config,rt=_getFinalTarget(d,tt,"/v1/token",`key=${nt}`),it=await d._getAdditionalHeaders();return it["Content-Type"]="application/x-www-form-urlencoded",FetchProvider.fetch()(rt,{method:"POST",headers:it,body:_e})});return{accessToken:et.access_token,expiresIn:et.expires_in,refreshToken:et.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){_assert(c.idToken,"internal-error"),_assert(typeof c.idToken<"u","internal-error"),_assert(typeof c.refreshToken<"u","internal-error");const et="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):_tokenExpiresIn(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,et)}async getToken(c,et=!1){return _assert(!this.accessToken||this.refreshToken,c,"user-token-expired"),!et&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(c,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(c,et){const{accessToken:_e,refreshToken:tt,expiresIn:nt}=await requestStsToken(c,et);this.updateTokensAndExpiration(_e,tt,Number(nt))}updateTokensAndExpiration(c,et,_e){this.refreshToken=et||null,this.accessToken=c||null,this.expirationTime=Date.now()+_e*1e3}static fromJSON(c,et){const{refreshToken:_e,accessToken:tt,expirationTime:nt}=et,rt=new StsTokenManager;return _e&&(_assert(typeof _e=="string","internal-error",{appName:c}),rt.refreshToken=_e),tt&&(_assert(typeof tt=="string","internal-error",{appName:c}),rt.accessToken=tt),nt&&(_assert(typeof nt=="number","internal-error",{appName:c}),rt.expirationTime=nt),rt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(d,c){_assert(typeof d=="string"||typeof d>"u","internal-error",{appName:c})}class UserImpl{constructor(c){var{uid:et,auth:_e,stsTokenManager:tt}=c,nt=__rest$1(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=et,this.auth=_e,this.stsTokenManager=tt,this.accessToken=tt.accessToken,this.displayName=nt.displayName||null,this.email=nt.email||null,this.emailVerified=nt.emailVerified||!1,this.phoneNumber=nt.phoneNumber||null,this.photoURL=nt.photoURL||null,this.isAnonymous=nt.isAnonymous||!1,this.tenantId=nt.tenantId||null,this.providerData=nt.providerData?[...nt.providerData]:[],this.metadata=new UserMetadata(nt.createdAt||void 0,nt.lastLoginAt||void 0)}async getIdToken(c){const et=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,c));return _assert(et,this.auth,"internal-error"),this.accessToken!==et&&(this.accessToken=et,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),et}getIdTokenResult(c){return getIdTokenResult(this,c)}reload(){return reload(this)}_assign(c){this!==c&&(_assert(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(et=>Object.assign({},et)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const et=new UserImpl(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return et.metadata._copy(this.metadata),et}_onReload(c){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(c,et=!1){let _e=!1;c.idToken&&c.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(c),_e=!0),et&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),_e&&this.auth._notifyListenersIfCurrent(this)}async delete(){const c=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:c})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,et){var _e,tt,nt,rt,it,ot,st,at;const lt=(_e=et.displayName)!==null&&_e!==void 0?_e:void 0,ct=(tt=et.email)!==null&&tt!==void 0?tt:void 0,ut=(nt=et.phoneNumber)!==null&&nt!==void 0?nt:void 0,dt=(rt=et.photoURL)!==null&&rt!==void 0?rt:void 0,ht=(it=et.tenantId)!==null&&it!==void 0?it:void 0,yt=(ot=et._redirectEventId)!==null&&ot!==void 0?ot:void 0,gt=(st=et.createdAt)!==null&&st!==void 0?st:void 0,ft=(at=et.lastLoginAt)!==null&&at!==void 0?at:void 0,{uid:mt,emailVerified:pt,isAnonymous:xt,providerData:vt,stsTokenManager:Et}=et;_assert(mt&&Et,c,"internal-error");const _t=StsTokenManager.fromJSON(this.name,Et);_assert(typeof mt=="string",c,"internal-error"),assertStringOrUndefined(lt,c.name),assertStringOrUndefined(ct,c.name),_assert(typeof pt=="boolean",c,"internal-error"),_assert(typeof xt=="boolean",c,"internal-error"),assertStringOrUndefined(ut,c.name),assertStringOrUndefined(dt,c.name),assertStringOrUndefined(ht,c.name),assertStringOrUndefined(yt,c.name),assertStringOrUndefined(gt,c.name),assertStringOrUndefined(ft,c.name);const wt=new UserImpl({uid:mt,auth:c,email:ct,emailVerified:pt,displayName:lt,isAnonymous:xt,photoURL:dt,phoneNumber:ut,tenantId:ht,stsTokenManager:_t,createdAt:gt,lastLoginAt:ft});return vt&&Array.isArray(vt)&&(wt.providerData=vt.map(bt=>Object.assign({},bt))),yt&&(wt._redirectEventId=yt),wt}static async _fromIdTokenResponse(c,et,_e=!1){const tt=new StsTokenManager;tt.updateFromServerResponse(et);const nt=new UserImpl({uid:et.localId,auth:c,stsTokenManager:tt,isAnonymous:_e});return await _reloadWithoutSaving(nt),nt}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(d){debugAssert(d instanceof Function,"Expected a class definition");let c=instanceCache.get(d);return c?(debugAssert(c instanceof d,"Instance stored in cache mismatched with class"),c):(c=new d,instanceCache.set(d,c),c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(c,et){this.storage[c]=et}async _get(c){const et=this.storage[c];return et===void 0?null:et}async _remove(c){delete this.storage[c]}_addListener(c,et){}_removeListener(c,et){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(d,c,et){return`firebase:${d}:${c}:${et}`}class PersistenceUserManager{constructor(c,et,_e){this.persistence=c,this.auth=et,this.userKey=_e;const{config:tt,name:nt}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,tt.apiKey,nt),this.fullPersistenceKey=_persistenceKeyName("persistence",tt.apiKey,nt),this.boundEventHandler=et._onStorageEvent.bind(et),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}async getCurrentUser(){const c=await this.persistence._get(this.fullUserKey);return c?UserImpl._fromJSON(this.auth,c):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(c){if(this.persistence===c)return;const et=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=c,et)return this.setCurrentUser(et)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(c,et,_e="authUser"){if(!et.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),c,_e);const tt=(await Promise.all(et.map(async st=>{if(await st._isAvailable())return st}))).filter(st=>st);let nt=tt[0]||_getInstance(inMemoryPersistence);const rt=_persistenceKeyName(_e,c.config.apiKey,c.name);let it=null;for(const st of et)try{const at=await st._get(rt);if(at){const lt=UserImpl._fromJSON(c,at);st!==nt&&(it=lt),nt=st;break}}catch{}const ot=tt.filter(st=>st._shouldAllowMigration);return!nt._shouldAllowMigration||!ot.length?new PersistenceUserManager(nt,c,_e):(nt=ot[0],it&&await nt._set(rt,it.toJSON()),await Promise.all(et.map(async st=>{if(st!==nt)try{await st._remove(rt)}catch{}})),new PersistenceUserManager(nt,c,_e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(d){const c=d.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(_isIEMobile(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(_isFirefox(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(_isBlackBerry(c))return"Blackberry";if(_isWebOS(c))return"Webos";if(_isSafari(c))return"Safari";if((c.includes("chrome/")||_isChromeIOS(c))&&!c.includes("edge/"))return"Chrome";if(_isAndroid(c))return"Android";{const et=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,_e=d.match(et);if((_e==null?void 0:_e.length)===2)return _e[1]}return"Other"}function _isFirefox(d=getUA()){return/firefox\//i.test(d)}function _isSafari(d=getUA()){const c=d.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function _isChromeIOS(d=getUA()){return/crios\//i.test(d)}function _isIEMobile(d=getUA()){return/iemobile/i.test(d)}function _isAndroid(d=getUA()){return/android/i.test(d)}function _isBlackBerry(d=getUA()){return/blackberry/i.test(d)}function _isWebOS(d=getUA()){return/webos/i.test(d)}function _isIOS(d=getUA()){return/iphone|ipad|ipod/i.test(d)||/macintosh/i.test(d)&&/mobile/i.test(d)}function _isIOSStandalone(d=getUA()){var c;return _isIOS(d)&&!!(!((c=window.navigator)===null||c===void 0)&&c.standalone)}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(d=getUA()){return _isIOS(d)||_isAndroid(d)||_isWebOS(d)||_isBlackBerry(d)||/windows phone/i.test(d)||_isIEMobile(d)}function _isIframe(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(d,c=[]){let et;switch(d){case"Browser":et=_getBrowserName(getUA());break;case"Worker":et=`${_getBrowserName(getUA())}-${d}`;break;default:et=d}const _e=c.length?c.join(","):"FirebaseCore-web";return`${et}/JsCore/${SDK_VERSION$1}/${_e}`}async function getRecaptchaConfig(d,c){return _performApiRequest(d,"GET","/v2/recaptchaConfig",_addTidIfNecessary(d,c))}function isEnterprise(d){return d!==void 0&&d.enterprise!==void 0}class RecaptchaConfig{constructor(c){if(this.siteKey="",this.emailPasswordEnabled=!1,c.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.emailPasswordEnabled=c.recaptchaEnforcementState.some(et=>et.provider==="EMAIL_PASSWORD_PROVIDER"&&et.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getScriptParentElement(){var d,c;return(c=(d=document.getElementsByTagName("head"))===null||d===void 0?void 0:d[0])!==null&&c!==void 0?c:document}function _loadJS(d){return new Promise((c,et)=>{const _e=document.createElement("script");_e.setAttribute("src",d),_e.onload=c,_e.onerror=tt=>{const nt=_createError("internal-error");nt.customData=tt,et(nt)},_e.type="text/javascript",_e.charset="UTF-8",getScriptParentElement().appendChild(_e)})}function _generateCallbackName(d){return`__${d}${Math.floor(Math.random()*1e6)}`}const RECAPTCHA_ENTERPRISE_URL="https://www.google.com/recaptcha/enterprise.js?render=",RECAPTCHA_ENTERPRISE_VERIFIER_TYPE="recaptcha-enterprise",FAKE_TOKEN="NO_RECAPTCHA";class RecaptchaEnterpriseVerifier{constructor(c){this.type=RECAPTCHA_ENTERPRISE_VERIFIER_TYPE,this.auth=_castAuth(c)}async verify(c="verify",et=!1){async function _e(nt){if(!et){if(nt.tenantId==null&&nt._agentRecaptchaConfig!=null)return nt._agentRecaptchaConfig.siteKey;if(nt.tenantId!=null&&nt._tenantRecaptchaConfigs[nt.tenantId]!==void 0)return nt._tenantRecaptchaConfigs[nt.tenantId].siteKey}return new Promise(async(rt,it)=>{getRecaptchaConfig(nt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ot=>{if(ot.recaptchaKey===void 0)it(new Error("recaptcha Enterprise site key undefined"));else{const st=new RecaptchaConfig(ot);return nt.tenantId==null?nt._agentRecaptchaConfig=st:nt._tenantRecaptchaConfigs[nt.tenantId]=st,rt(st.siteKey)}}).catch(ot=>{it(ot)})})}function tt(nt,rt,it){const ot=window.grecaptcha;isEnterprise(ot)?ot.enterprise.ready(()=>{ot.enterprise.execute(nt,{action:c}).then(st=>{rt(st)}).catch(()=>{rt(FAKE_TOKEN)})}):it(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((nt,rt)=>{_e(this.auth).then(it=>{if(!et&&isEnterprise(window.grecaptcha))tt(it,nt,rt);else{if(typeof window>"u"){rt(new Error("RecaptchaVerifier is only supported in browser"));return}_loadJS(RECAPTCHA_ENTERPRISE_URL+it).then(()=>{tt(it,nt,rt)}).catch(ot=>{rt(ot)})}}).catch(it=>{rt(it)})})}}async function injectRecaptchaFields(d,c,et,_e=!1){const tt=new RecaptchaEnterpriseVerifier(d);let nt;try{nt=await tt.verify(et)}catch{nt=await tt.verify(et,!0)}const rt=Object.assign({},c);return _e?Object.assign(rt,{captchaResp:nt}):Object.assign(rt,{captchaResponse:nt}),Object.assign(rt,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(rt,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),rt}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,et){const _e=nt=>new Promise((rt,it)=>{try{const ot=c(nt);rt(ot)}catch(ot){it(ot)}});_e.onAbort=et,this.queue.push(_e);const tt=this.queue.length-1;return()=>{this.queue[tt]=()=>Promise.resolve()}}async runMiddleware(c){if(this.auth.currentUser===c)return;const et=[];try{for(const _e of this.queue)await _e(c),_e.onAbort&&et.push(_e.onAbort)}catch(_e){et.reverse();for(const tt of et)try{tt()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:_e==null?void 0:_e.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(c,et,_e,tt){this.app=c,this.heartbeatServiceProvider=et,this.appCheckServiceProvider=_e,this.config=tt,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=tt.sdkClientVersion}_initializeWithPersistence(c,et){return et&&(this._popupRedirectResolver=_getInstance(et)),this._initializationPromise=this.queue(async()=>{var _e,tt;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,c),!this._deleted)){if(!((_e=this._popupRedirectResolver)===null||_e===void 0)&&_e._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(et),this.lastNotifiedUid=((tt=this.currentUser)===null||tt===void 0?void 0:tt.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const c=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!c)){if(this.currentUser&&c&&this.currentUser.uid===c.uid){this._currentUser._assign(c),await this.currentUser.getIdToken();return}await this._updateCurrentUser(c,!0)}}async initializeCurrentUser(c){var et;const _e=await this.assertedPersistence.getCurrentUser();let tt=_e,nt=!1;if(c&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const rt=(et=this.redirectUser)===null||et===void 0?void 0:et._redirectEventId,it=tt==null?void 0:tt._redirectEventId,ot=await this.tryRedirectSignIn(c);(!rt||rt===it)&&(ot!=null&&ot.user)&&(tt=ot.user,nt=!0)}if(!tt)return this.directlySetCurrentUser(null);if(!tt._redirectEventId){if(nt)try{await this.beforeStateQueue.runMiddleware(tt)}catch(rt){tt=_e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(rt))}return tt?this.reloadAndSetCurrentUserOrClear(tt):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===tt._redirectEventId?this.directlySetCurrentUser(tt):this.reloadAndSetCurrentUserOrClear(tt)}async tryRedirectSignIn(c){let et=null;try{et=await this._popupRedirectResolver._completeRedirectFn(this,c,!0)}catch{await this._setRedirectUser(null)}return et}async reloadAndSetCurrentUserOrClear(c){try{await _reloadWithoutSaving(c)}catch(et){if((et==null?void 0:et.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(c)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(c){const et=c?getModularInstance(c):null;return et&&_assert(et.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(et&&et._clone(this))}async _updateCurrentUser(c,et=!1){if(!this._deleted)return c&&_assert(this.tenantId===c.tenantId,this,"tenant-id-mismatch"),et||await this.beforeStateQueue.runMiddleware(c),this.queue(async()=>{await this.directlySetCurrentUser(c),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(c){return this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(c))})}async initializeRecaptchaConfig(){const c=await getRecaptchaConfig(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),et=new RecaptchaConfig(c);this.tenantId==null?this._agentRecaptchaConfig=et:this._tenantRecaptchaConfigs[this.tenantId]=et,et.emailPasswordEnabled&&new RecaptchaEnterpriseVerifier(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new ErrorFactory("auth","Firebase",c())}onAuthStateChanged(c,et,_e){return this.registerStateListener(this.authStateSubscription,c,et,_e)}beforeAuthStateChanged(c,et){return this.beforeStateQueue.pushCallback(c,et)}onIdTokenChanged(c,et,_e){return this.registerStateListener(this.idTokenSubscription,c,et,_e)}authStateReady(){return new Promise((c,et)=>{if(this.currentUser)c();else{const _e=this.onAuthStateChanged(()=>{_e(),c()},et)}})}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(c=this._currentUser)===null||c===void 0?void 0:c.toJSON()}}async _setRedirectUser(c,et){const _e=await this.getOrInitRedirectPersistenceManager(et);return c===null?_e.removeCurrentUser():_e.setCurrentUser(c)}async getOrInitRedirectPersistenceManager(c){if(!this.redirectPersistenceManager){const et=c&&_getInstance(c)||this._popupRedirectResolver;_assert(et,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(et._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(c){var et,_e;return this._isInitialized&&await this.queue(async()=>{}),((et=this._currentUser)===null||et===void 0?void 0:et._redirectEventId)===c?this._currentUser:((_e=this.redirectUser)===null||_e===void 0?void 0:_e._redirectEventId)===c?this.redirectUser:null}async _persistUserIfCurrent(c){if(c===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(c))}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,et;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _e=(et=(c=this.currentUser)===null||c===void 0?void 0:c.uid)!==null&&et!==void 0?et:null;this.lastNotifiedUid!==_e&&(this.lastNotifiedUid=_e,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,et,_e,tt){if(this._deleted)return()=>{};const nt=typeof et=="function"?et:et.next.bind(et),rt=this._isInitialized?Promise.resolve():this._initializationPromise;return _assert(rt,this,"internal-error"),rt.then(()=>nt(this.currentUser)),typeof et=="function"?c.addObserver(et,_e,tt):c.addObserver(et)}async directlySetCurrentUser(c){this.currentUser&&this.currentUser!==c&&this._currentUser._stopProactiveRefresh(),c&&this.isProactiveRefreshEnabled&&c._startProactiveRefresh(),this.currentUser=c,c?await this.assertedPersistence.setCurrentUser(c):await this.assertedPersistence.removeCurrentUser()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var c;const et={"X-Client-Version":this.clientVersion};this.app.options.appId&&(et["X-Firebase-gmpid"]=this.app.options.appId);const _e=await((c=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||c===void 0?void 0:c.getHeartbeatsHeader());_e&&(et["X-Firebase-Client"]=_e);const tt=await this._getAppCheckToken();return tt&&(et["X-Firebase-AppCheck"]=tt),et}async _getAppCheckToken(){var c;const et=await((c=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||c===void 0?void 0:c.getToken());return et!=null&&et.error&&_logWarn(`Error while retrieving App Check token: ${et.error}`),et==null?void 0:et.token}}function _castAuth(d){return getModularInstance(d)}class Subscription{constructor(c){this.auth=c,this.observer=null,this.addObserver=createSubscribe(et=>this.observer=et)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(d,c){const et=_getProvider(d,"auth");if(et.isInitialized()){const tt=et.getImmediate(),nt=et.getOptions();if(deepEqual(nt,c??{}))return tt;_fail(tt,"already-initialized")}return et.initialize({options:c})}function _initializeAuthInstance(d,c){const et=(c==null?void 0:c.persistence)||[],_e=(Array.isArray(et)?et:[et]).map(_getInstance);c!=null&&c.errorMap&&d._updateErrorMap(c.errorMap),d._initializeWithPersistence(_e,c==null?void 0:c.popupRedirectResolver)}function connectAuthEmulator(d,c,et){const _e=_castAuth(d);_assert(_e._canInitEmulator,_e,"emulator-config-failed"),_assert(/^https?:\/\//.test(c),_e,"invalid-emulator-scheme");const tt=!!(et!=null&&et.disableWarnings),nt=extractProtocol(c),{host:rt,port:it}=extractHostAndPort(c),ot=it===null?"":`:${it}`;_e.config.emulator={url:`${nt}//${rt}${ot}/`},_e.settings.appVerificationDisabledForTesting=!0,_e.emulatorConfig=Object.freeze({host:rt,port:it,protocol:nt.replace(":",""),options:Object.freeze({disableWarnings:tt})}),tt||emitEmulatorWarning()}function extractProtocol(d){const c=d.indexOf(":");return c<0?"":d.substr(0,c+1)}function extractHostAndPort(d){const c=extractProtocol(d),et=/(\/\/)?([^?#/]+)/.exec(d.substr(c.length));if(!et)return{host:"",port:null};const _e=et[2].split("@").pop()||"",tt=/^(\[[^\]]+\])(:|$)/.exec(_e);if(tt){const nt=tt[1];return{host:nt,port:parsePort(_e.substr(nt.length+1))}}else{const[nt,rt]=_e.split(":");return{host:nt,port:parsePort(rt)}}}function parsePort(d){if(!d)return null;const c=Number(d);return isNaN(c)?null:c}function emitEmulatorWarning(){function d(){const c=document.createElement("p"),et=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",et.position="fixed",et.width="100%",et.backgroundColor="#ffffff",et.border=".1em solid #000000",et.color="#b50000",et.bottom="0px",et.left="0px",et.margin="0px",et.zIndex="10000",et.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(c,et){this.providerId=c,this.signInMethod=et}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(c){return debugFail("not implemented")}_linkToIdToken(c,et){return debugFail("not implemented")}_getReauthenticationResolver(c){return debugFail("not implemented")}}async function updateEmailPassword(d,c){return _performApiRequest(d,"POST","/v1/accounts:update",c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithPassword(d,c){return _performSignInRequest(d,"POST","/v1/accounts:signInWithPassword",_addTidIfNecessary(d,c))}async function sendOobCode(d,c){return _performApiRequest(d,"POST","/v1/accounts:sendOobCode",_addTidIfNecessary(d,c))}async function sendPasswordResetEmail$1(d,c){return sendOobCode(d,c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithEmailLink$1(d,c){return _performSignInRequest(d,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(d,c))}async function signInWithEmailLinkForLinking(d,c){return _performSignInRequest(d,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(d,c))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthCredential extends AuthCredential{constructor(c,et,_e,tt=null){super("password",_e),this._email=c,this._password=et,this._tenantId=tt}static _fromEmailAndPassword(c,et){return new EmailAuthCredential(c,et,"password")}static _fromEmailAndCode(c,et,_e=null){return new EmailAuthCredential(c,et,"emailLink",_e)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const et=typeof c=="string"?JSON.parse(c):c;if(et!=null&&et.email&&(et!=null&&et.password)){if(et.signInMethod==="password")return this._fromEmailAndPassword(et.email,et.password);if(et.signInMethod==="emailLink")return this._fromEmailAndCode(et.email,et.password,et.tenantId)}return null}async _getIdTokenResponse(c){var et;switch(this.signInMethod){case"password":const _e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((et=c._getRecaptchaConfig())===null||et===void 0)&&et.emailPasswordEnabled){const tt=await injectRecaptchaFields(c,_e,"signInWithPassword");return signInWithPassword(c,tt)}else return signInWithPassword(c,_e).catch(async tt=>{if(tt.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const nt=await injectRecaptchaFields(c,_e,"signInWithPassword");return signInWithPassword(c,nt)}else return Promise.reject(tt)});case"emailLink":return signInWithEmailLink$1(c,{email:this._email,oobCode:this._password});default:_fail(c,"internal-error")}}async _linkToIdToken(c,et){switch(this.signInMethod){case"password":return updateEmailPassword(c,{idToken:et,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return signInWithEmailLinkForLinking(c,{idToken:et,email:this._email,oobCode:this._password});default:_fail(c,"internal-error")}}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(d,c){return _performSignInRequest(d,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(d,c))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const et=new OAuthCredential(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(et.idToken=c.idToken),c.accessToken&&(et.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(et.nonce=c.nonce),c.pendingToken&&(et.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(et.accessToken=c.oauthToken,et.secret=c.oauthTokenSecret):_fail("argument-error"),et}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const et=typeof c=="string"?JSON.parse(c):c,{providerId:_e,signInMethod:tt}=et,nt=__rest$1(et,["providerId","signInMethod"]);if(!_e||!tt)return null;const rt=new OAuthCredential(_e,tt);return rt.idToken=nt.idToken||void 0,rt.accessToken=nt.accessToken||void 0,rt.secret=nt.secret,rt.nonce=nt.nonce,rt.pendingToken=nt.pendingToken||null,rt}_getIdTokenResponse(c){const et=this.buildRequest();return signInWithIdp(c,et)}_linkToIdToken(c,et){const _e=this.buildRequest();return _e.idToken=et,signInWithIdp(c,_e)}_getReauthenticationResolver(c){const et=this.buildRequest();return et.autoCreate=!1,signInWithIdp(c,et)}buildRequest(){const c={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const et={};this.idToken&&(et.id_token=this.idToken),this.accessToken&&(et.access_token=this.accessToken),this.secret&&(et.oauth_token_secret=this.secret),et.providerId=this.providerId,this.nonce&&!this.pendingToken&&(et.nonce=this.nonce),c.postBody=querystring(et)}return c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parseMode(d){switch(d){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function parseDeepLink(d){const c=querystringDecode(extractQuerystring(d)).link,et=c?querystringDecode(extractQuerystring(c)).deep_link_id:null,_e=querystringDecode(extractQuerystring(d)).deep_link_id;return(_e?querystringDecode(extractQuerystring(_e)).link:null)||_e||et||c||d}class ActionCodeURL{constructor(c){var et,_e,tt,nt,rt,it;const ot=querystringDecode(extractQuerystring(c)),st=(et=ot.apiKey)!==null&&et!==void 0?et:null,at=(_e=ot.oobCode)!==null&&_e!==void 0?_e:null,lt=parseMode((tt=ot.mode)!==null&&tt!==void 0?tt:null);_assert(st&&at&&lt,"argument-error"),this.apiKey=st,this.operation=lt,this.code=at,this.continueUrl=(nt=ot.continueUrl)!==null&&nt!==void 0?nt:null,this.languageCode=(rt=ot.languageCode)!==null&&rt!==void 0?rt:null,this.tenantId=(it=ot.tenantId)!==null&&it!==void 0?it:null}static parseLink(c){const et=parseDeepLink(c);try{return new ActionCodeURL(et)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthProvider{constructor(){this.providerId=EmailAuthProvider.PROVIDER_ID}static credential(c,et){return EmailAuthCredential._fromEmailAndPassword(c,et)}static credentialWithLink(c,et){const _e=ActionCodeURL.parseLink(et);return _assert(_e,"argument-error"),EmailAuthCredential._fromEmailAndCode(c,_e.code,_e.tenantId)}}EmailAuthProvider.PROVIDER_ID="password";EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD="password";EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(c){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:c})}static credentialFromResult(c){return FacebookAuthProvider.credentialFromTaggedObject(c)}static credentialFromError(c){return FacebookAuthProvider.credentialFromTaggedObject(c.customData||{})}static credentialFromTaggedObject({_tokenResponse:c}){if(!c||!("oauthAccessToken"in c)||!c.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(c.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(c,et){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:c,accessToken:et})}static credentialFromResult(c){return GoogleAuthProvider.credentialFromTaggedObject(c)}static credentialFromError(c){return GoogleAuthProvider.credentialFromTaggedObject(c.customData||{})}static credentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:et,oauthAccessToken:_e}=c;if(!et&&!_e)return null;try{return GoogleAuthProvider.credential(et,_e)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(c){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:c})}static credentialFromResult(c){return GithubAuthProvider.credentialFromTaggedObject(c)}static credentialFromError(c){return GithubAuthProvider.credentialFromTaggedObject(c.customData||{})}static credentialFromTaggedObject({_tokenResponse:c}){if(!c||!("oauthAccessToken"in c)||!c.oauthAccessToken)return null;try{return GithubAuthProvider.credential(c.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(c,et){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:c,oauthTokenSecret:et})}static credentialFromResult(c){return TwitterAuthProvider.credentialFromTaggedObject(c)}static credentialFromError(c){return TwitterAuthProvider.credentialFromTaggedObject(c.customData||{})}static credentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthAccessToken:et,oauthTokenSecret:_e}=c;if(!et||!_e)return null;try{return TwitterAuthProvider.credential(et,_e)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signUp(d,c){return _performSignInRequest(d,"POST","/v1/accounts:signUp",_addTidIfNecessary(d,c))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static async _fromIdTokenResponse(c,et,_e,tt=!1){const nt=await UserImpl._fromIdTokenResponse(c,_e,tt),rt=providerIdForResponse(_e);return new UserCredentialImpl({user:nt,providerId:rt,_tokenResponse:_e,operationType:et})}static async _forOperation(c,et,_e){await c._updateTokensIfNecessary(_e,!0);const tt=providerIdForResponse(_e);return new UserCredentialImpl({user:c,providerId:tt,_tokenResponse:_e,operationType:et})}}function providerIdForResponse(d){return d.providerId?d.providerId:"phoneNumber"in d?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(c,et,_e,tt){var nt;super(et.code,et.message),this.operationType=_e,this.user=tt,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:c.name,tenantId:(nt=c.tenantId)!==null&&nt!==void 0?nt:void 0,_serverResponse:et.customData._serverResponse,operationType:_e}}static _fromErrorAndOperation(c,et,_e,tt){return new MultiFactorError(c,et,_e,tt)}}function _processCredentialSavingMfaContextIfNecessary(d,c,et,_e){return(c==="reauthenticate"?et._getReauthenticationResolver(d):et._getIdTokenResponse(d)).catch(nt=>{throw nt.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(d,nt,c,_e):nt})}async function _link$1(d,c,et=!1){const _e=await _logoutIfInvalidated(d,c._linkToIdToken(d.auth,await d.getIdToken()),et);return UserCredentialImpl._forOperation(d,"link",_e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(d,c,et=!1){const{auth:_e}=d,tt="reauthenticate";try{const nt=await _logoutIfInvalidated(d,_processCredentialSavingMfaContextIfNecessary(_e,tt,c,d),et);_assert(nt.idToken,_e,"internal-error");const rt=_parseToken(nt.idToken);_assert(rt,_e,"internal-error");const{sub:it}=rt;return _assert(d.uid===it,_e,"user-mismatch"),UserCredentialImpl._forOperation(d,tt,nt)}catch(nt){throw(nt==null?void 0:nt.code)==="auth/user-not-found"&&_fail(_e,"user-mismatch"),nt}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(d,c,et=!1){const _e="signIn",tt=await _processCredentialSavingMfaContextIfNecessary(d,_e,c),nt=await UserCredentialImpl._fromIdTokenResponse(d,_e,tt);return et||await d._updateCurrentUser(nt.user),nt}async function signInWithCredential(d,c){return _signInWithCredential(_castAuth(d),c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _setActionCodeSettingsOnRequest(d,c,et){var _e;_assert(((_e=et.url)===null||_e===void 0?void 0:_e.length)>0,d,"invalid-continue-uri"),_assert(typeof et.dynamicLinkDomain>"u"||et.dynamicLinkDomain.length>0,d,"invalid-dynamic-link-domain"),c.continueUrl=et.url,c.dynamicLinkDomain=et.dynamicLinkDomain,c.canHandleCodeInApp=et.handleCodeInApp,et.iOS&&(_assert(et.iOS.bundleId.length>0,d,"missing-ios-bundle-id"),c.iOSBundleId=et.iOS.bundleId),et.android&&(_assert(et.android.packageName.length>0,d,"missing-android-pkg-name"),c.androidInstallApp=et.android.installApp,c.androidMinimumVersionCode=et.android.minimumVersion,c.androidPackageName=et.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sendPasswordResetEmail(d,c,et){var _e;const tt=_castAuth(d),nt={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};if(!((_e=tt._getRecaptchaConfig())===null||_e===void 0)&&_e.emailPasswordEnabled){const rt=await injectRecaptchaFields(tt,nt,"getOobCode",!0);et&&_setActionCodeSettingsOnRequest(tt,rt,et),await sendPasswordResetEmail$1(tt,rt)}else et&&_setActionCodeSettingsOnRequest(tt,nt,et),await sendPasswordResetEmail$1(tt,nt).catch(async rt=>{if(rt.code==="auth/missing-recaptcha-token"){console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const it=await injectRecaptchaFields(tt,nt,"getOobCode",!0);et&&_setActionCodeSettingsOnRequest(tt,it,et),await sendPasswordResetEmail$1(tt,it)}else return Promise.reject(rt)})}async function createUserWithEmailAndPassword(d,c,et){var _e;const tt=_castAuth(d),nt={returnSecureToken:!0,email:c,password:et,clientType:"CLIENT_TYPE_WEB"};let rt;if(!((_e=tt._getRecaptchaConfig())===null||_e===void 0)&&_e.emailPasswordEnabled){const st=await injectRecaptchaFields(tt,nt,"signUpPassword");rt=signUp(tt,st)}else rt=signUp(tt,nt).catch(async st=>{if(st.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const at=await injectRecaptchaFields(tt,nt,"signUpPassword");return signUp(tt,at)}else return Promise.reject(st)});const it=await rt.catch(st=>Promise.reject(st)),ot=await UserCredentialImpl._fromIdTokenResponse(tt,"signIn",it);return await tt._updateCurrentUser(ot.user),ot}function signInWithEmailAndPassword(d,c,et){return signInWithCredential(getModularInstance(d),EmailAuthProvider.credential(c,et))}function onIdTokenChanged(d,c,et,_e){return getModularInstance(d).onIdTokenChanged(c,et,_e)}function beforeAuthStateChanged(d,c,et){return getModularInstance(d).beforeAuthStateChanged(c,et)}function signOut(d){return getModularInstance(d).signOut()}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(c,et){this.storageRetriever=c,this.type=et}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,et){return this.storage.setItem(c,JSON.stringify(et)),Promise.resolve()}_get(c){const et=this.storage.getItem(c);return Promise.resolve(et?JSON.parse(et):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _iframeCannotSyncWebStorage(){const d=getUA();return _isSafari(d)||_isIOS(d)}const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(c,et)=>this.onStorageEvent(c,et),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=_iframeCannotSyncWebStorage()&&_isIframe(),this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(c){for(const et of Object.keys(this.listeners)){const _e=this.storage.getItem(et),tt=this.localCache[et];_e!==tt&&c(et,tt,_e)}}onStorageEvent(c,et=!1){if(!c.key){this.forAllChangedKeys((rt,it,ot)=>{this.notifyListeners(rt,ot)});return}const _e=c.key;if(et?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const rt=this.storage.getItem(_e);if(c.newValue!==rt)c.newValue!==null?this.storage.setItem(_e,c.newValue):this.storage.removeItem(_e);else if(this.localCache[_e]===c.newValue&&!et)return}const tt=()=>{const rt=this.storage.getItem(_e);!et&&this.localCache[_e]===rt||this.notifyListeners(_e,rt)},nt=this.storage.getItem(_e);_isIE10()&&nt!==c.newValue&&c.newValue!==c.oldValue?setTimeout(tt,IE10_LOCAL_STORAGE_SYNC_DELAY):tt()}notifyListeners(c,et){this.localCache[c]=et;const _e=this.listeners[c];if(_e)for(const tt of Array.from(_e))tt(et&&JSON.parse(et))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((c,et,_e)=>{this.onStorageEvent(new StorageEvent("storage",{key:c,oldValue:et,newValue:_e}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(c,et){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[c]||(this.listeners[c]=new Set,this.localCache[c]=this.storage.getItem(c)),this.listeners[c].add(et)}_removeListener(c,et){this.listeners[c]&&(this.listeners[c].delete(et),this.listeners[c].size===0&&delete this.listeners[c]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(c,et){await super._set(c,et),this.localCache[c]=JSON.stringify(et)}async _get(c){const et=await super._get(c);return this.localCache[c]=JSON.stringify(et),et}async _remove(c){await super._remove(c),delete this.localCache[c]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(c,et){}_removeListener(c,et){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(d){return Promise.all(d.map(async c=>{try{return{fulfilled:!0,value:await c}}catch(et){return{fulfilled:!1,reason:et}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(c){this.eventTarget=c,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(c){const et=this.receivers.find(tt=>tt.isListeningto(c));if(et)return et;const _e=new Receiver(c);return this.receivers.push(_e),_e}isListeningto(c){return this.eventTarget===c}async handleEvent(c){const et=c,{eventId:_e,eventType:tt,data:nt}=et.data,rt=this.handlersMap[tt];if(!(rt!=null&&rt.size))return;et.ports[0].postMessage({status:"ack",eventId:_e,eventType:tt});const it=Array.from(rt).map(async st=>st(et.origin,nt)),ot=await _allSettled(it);et.ports[0].postMessage({status:"done",eventId:_e,eventType:tt,response:ot})}_subscribe(c,et){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[c]||(this.handlersMap[c]=new Set),this.handlersMap[c].add(et)}_unsubscribe(c,et){this.handlersMap[c]&&et&&this.handlersMap[c].delete(et),(!et||this.handlersMap[c].size===0)&&delete this.handlersMap[c],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(d="",c=10){let et="";for(let _e=0;_e<c;_e++)et+=Math.floor(Math.random()*10);return d+et}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}async _send(c,et,_e=50){const tt=typeof MessageChannel<"u"?new MessageChannel:null;if(!tt)throw new Error("connection_unavailable");let nt,rt;return new Promise((it,ot)=>{const st=_generateEventId("",20);tt.port1.start();const at=setTimeout(()=>{ot(new Error("unsupported_event"))},_e);rt={messageChannel:tt,onMessage(lt){const ct=lt;if(ct.data.eventId===st)switch(ct.data.status){case"ack":clearTimeout(at),nt=setTimeout(()=>{ot(new Error("timeout"))},3e3);break;case"done":clearTimeout(nt),it(ct.data.response);break;default:clearTimeout(at),clearTimeout(nt),ot(new Error("invalid_response"));break}}},this.handlers.add(rt),tt.port1.addEventListener("message",rt.onMessage),this.target.postMessage({eventType:c,eventId:st,data:et},[tt.port2])}).finally(()=>{rt&&this.removeMessageHandler(rt)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(d){_window().location.href=d}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){var d;return((d=navigator==null?void 0:navigator.serviceWorker)===null||d===void 0?void 0:d.controller)||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(c){this.request=c}toPromise(){return new Promise((c,et)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{et(this.request.error)})})}}function getObjectStore(d,c){return d.transaction([DB_OBJECTSTORE_NAME],c?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const d=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(d).toPromise()}function _openDatabase(){const d=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((c,et)=>{d.addEventListener("error",()=>{et(d.error)}),d.addEventListener("upgradeneeded",()=>{const _e=d.result;try{_e.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(tt){et(tt)}}),d.addEventListener("success",async()=>{const _e=d.result;_e.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?c(_e):(_e.close(),await _deleteDatabase(),c(await _openDatabase()))})})}async function _putObject(d,c,et){const _e=getObjectStore(d,!0).put({[DB_DATA_KEYPATH]:c,value:et});return new DBPromise(_e).toPromise()}async function getObject(d,c){const et=getObjectStore(d,!1).get(c),_e=await new DBPromise(et).toPromise();return _e===void 0?null:_e.value}function _deleteObject(d,c){const et=getObjectStore(d,!0).delete(c);return new DBPromise(et).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(c){let et=0;for(;;)try{const _e=await this._openDb();return await c(_e)}catch(_e){if(et++>_TRANSACTION_RETRY_COUNT)throw _e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(c,et)=>({keyProcessed:(await this._poll()).includes(et.key)})),this.receiver._subscribe("ping",async(c,et)=>["keyChanged"])}async initializeSender(){var c,et;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const _e=await this.sender._send("ping",{},800);_e&&!((c=_e[0])===null||c===void 0)&&c.fulfilled&&!((et=_e[0])===null||et===void 0)&&et.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(c){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:c},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const c=await _openDatabase();return await _putObject(c,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(c,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(c){this.pendingWrites++;try{await c()}finally{this.pendingWrites--}}async _set(c,et){return this._withPendingWrite(async()=>(await this._withRetries(_e=>_putObject(_e,c,et)),this.localCache[c]=et,this.notifyServiceWorker(c)))}async _get(c){const et=await this._withRetries(_e=>getObject(_e,c));return this.localCache[c]=et,et}async _remove(c){return this._withPendingWrite(async()=>(await this._withRetries(et=>_deleteObject(et,c)),delete this.localCache[c],this.notifyServiceWorker(c)))}async _poll(){const c=await this._withRetries(tt=>{const nt=getObjectStore(tt,!1).getAll();return new DBPromise(nt).toPromise()});if(!c)return[];if(this.pendingWrites!==0)return[];const et=[],_e=new Set;for(const{fbase_key:tt,value:nt}of c)_e.add(tt),JSON.stringify(this.localCache[tt])!==JSON.stringify(nt)&&(this.notifyListeners(tt,nt),et.push(tt));for(const tt of Object.keys(this.localCache))this.localCache[tt]&&!_e.has(tt)&&(this.notifyListeners(tt,null),et.push(tt));return et}notifyListeners(c,et){this.localCache[c]=et;const _e=this.listeners[c];if(_e)for(const tt of Array.from(_e))tt(et)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(c,et){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[c]||(this.listeners[c]=new Set,this._get(c)),this.listeners[c].add(et)}_removeListener(c,et){this.listeners[c]&&(this.listeners[c].delete(et),this.listeners[c].size===0&&delete this.listeners[c]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;new Delay(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(d,c){return c?_getInstance(c):(_assert(d._popupRedirectResolver,d,"argument-error"),d._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return signInWithIdp(c,this._buildIdpRequest())}_linkToIdToken(c,et){return signInWithIdp(c,this._buildIdpRequest(et))}_getReauthenticationResolver(c){return signInWithIdp(c,this._buildIdpRequest())}_buildIdpRequest(c){const et={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(et.idToken=c),et}}function _signIn(d){return _signInWithCredential(d.auth,new IdpCredential(d),d.bypassAuthState)}function _reauth(d){const{auth:c,user:et}=d;return _assert(et,c,"internal-error"),_reauthenticate(et,new IdpCredential(d),d.bypassAuthState)}async function _link(d){const{auth:c,user:et}=d;return _assert(et,c,"internal-error"),_link$1(et,new IdpCredential(d),d.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(c,et,_e,tt,nt=!1){this.auth=c,this.resolver=_e,this.user=tt,this.bypassAuthState=nt,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(et)?et:[et]}execute(){return new Promise(async(c,et)=>{this.pendingPromise={resolve:c,reject:et};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(_e){this.reject(_e)}})}async onAuthEvent(c){const{urlResponse:et,sessionId:_e,postBody:tt,tenantId:nt,error:rt,type:it}=c;if(rt){this.reject(rt);return}const ot={auth:this.auth,requestUri:et,sessionId:_e,tenantId:nt||void 0,postBody:tt||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(it)(ot))}catch(st){this.reject(st)}}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(c){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);async function signInWithPopup(d,c,et){const _e=_castAuth(d);_assertInstanceOf(d,c,FederatedAuthProvider);const tt=_withDefaultResolver(_e,et);return new PopupOperation(_e,"signInViaPopup",c,tt).executeNotNull()}class PopupOperation extends AbstractPopupRedirectOperation{constructor(c,et,_e,tt,nt){super(c,et,tt,nt),this.provider=_e,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const c=await this.execute();return _assert(c,this.auth,"internal-error"),c}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const c=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],c),this.authWindow.associatedEvent=c,this.resolver._originValidation(this.auth).catch(et=>{this.reject(et)}),this.resolver._isIframeWebStorageSupported(this.auth,et=>{et||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var c;return((c=this.authWindow)===null||c===void 0?void 0:c.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const c=()=>{var et,_e;if(!((_e=(et=this.authWindow)===null||et===void 0?void 0:et.window)===null||_e===void 0)&&_e.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(c,_POLL_WINDOW_CLOSE_TIMEOUT.get())};c()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(c,et,_e=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],et,void 0,_e),this.eventId=null}async execute(){let c=redirectOutcomeMap.get(this.auth._key());if(!c){try{const _e=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;c=()=>Promise.resolve(_e)}catch(et){c=()=>Promise.reject(et)}redirectOutcomeMap.set(this.auth._key(),c)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),c()}async onAuthEvent(c){if(c.type==="signInViaRedirect")return super.onAuthEvent(c);if(c.type==="unknown"){this.resolve(null);return}if(c.eventId){const et=await this.auth._redirectUserForId(c.eventId);if(et)return this.user=et,super.onAuthEvent(c);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(d,c){const et=pendingRedirectKey(c),_e=resolverPersistence(d);if(!await _e._isAvailable())return!1;const tt=await _e._get(et)==="true";return await _e._remove(et),tt}function _overrideRedirectResult(d,c){redirectOutcomeMap.set(d._key(),c)}function resolverPersistence(d){return _getInstance(d._redirectPersistence)}function pendingRedirectKey(d){return _persistenceKeyName(PENDING_REDIRECT_KEY,d.config.apiKey,d.name)}async function getRedirectResult(d,c){return await _castAuth(d)._initializationPromise,_getRedirectResult(d,c,!1)}async function _getRedirectResult(d,c,et=!1){const _e=_castAuth(d),tt=_withDefaultResolver(_e,c),rt=await new RedirectAction(_e,tt,et).execute();return rt&&!et&&(delete rt.user._redirectEventId,await _e._persistUserIfCurrent(rt.user),await _e._setRedirectUser(null,c)),rt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=10*60*1e3;class AuthEventManager{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let et=!1;return this.consumers.forEach(_e=>{this.isEventForConsumer(c,_e)&&(et=!0,this.sendToConsumer(c,_e),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!isRedirectEvent(c)||(this.hasHandledPotentialRedirect=!0,et||(this.queuedRedirectEvent=c,et=!0)),et}sendToConsumer(c,et){var _e;if(c.error&&!isNullRedirectEvent(c)){const tt=((_e=c.error.code)===null||_e===void 0?void 0:_e.split("auth/")[1])||"internal-error";et.onError(_createError(this.auth,tt))}else et.onAuthEvent(c)}isEventForConsumer(c,et){const _e=et.eventId===null||!!c.eventId&&c.eventId===et.eventId;return et.filter.includes(c.type)&&_e}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(c))}saveEventToCache(c){this.cachedEventUids.add(eventUid(c)),this.lastProcessedEventTime=Date.now()}}function eventUid(d){return[d.type,d.eventId,d.sessionId,d.tenantId].filter(c=>c).join("-")}function isNullRedirectEvent({type:d,error:c}){return d==="unknown"&&(c==null?void 0:c.code)==="auth/no-auth-event"}function isRedirectEvent(d){switch(d.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(d);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(d,c={}){return _performApiRequest(d,"GET","/v1/projects",c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(d){if(d.config.emulator)return;const{authorizedDomains:c}=await _getProjectConfig(d);for(const et of c)try{if(matchDomain(et))return}catch{}_fail(d,"unauthorized-domain")}function matchDomain(d){const c=_getCurrentUrl(),{protocol:et,hostname:_e}=new URL(c);if(d.startsWith("chrome-extension://")){const rt=new URL(d);return rt.hostname===""&&_e===""?et==="chrome-extension:"&&d.replace("chrome-extension://","")===c.replace("chrome-extension://",""):et==="chrome-extension:"&&rt.hostname===_e}if(!HTTP_REGEX.test(et))return!1;if(IP_ADDRESS_REGEX.test(d))return _e===d;const tt=d.replace(/\./g,"\\.");return new RegExp("^(.+\\."+tt+"|"+tt+")$","i").test(_e)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const d=_window().___jsl;if(d!=null&&d.H){for(const c of Object.keys(d.H))if(d.H[c].r=d.H[c].r||[],d.H[c].L=d.H[c].L||[],d.H[c].r=[...d.H[c].L],d.CP)for(let et=0;et<d.CP.length;et++)d.CP[et]=null}}function loadGapi(d){return new Promise((c,et)=>{var _e,tt,nt;function rt(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),et(_createError(d,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(!((tt=(_e=_window().gapi)===null||_e===void 0?void 0:_e.iframes)===null||tt===void 0)&&tt.Iframe)c(gapi.iframes.getContext());else if(!((nt=_window().gapi)===null||nt===void 0)&&nt.load)rt();else{const it=_generateCallbackName("iframefcb");return _window()[it]=()=>{gapi.load?rt():et(_createError(d,"network-request-failed"))},_loadJS(`https://apis.google.com/js/api.js?onload=${it}`).catch(ot=>et(ot))}}).catch(c=>{throw cachedGApiLoader=null,c})}let cachedGApiLoader=null;function _loadGapi(d){return cachedGApiLoader=cachedGApiLoader||loadGapi(d),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(d){const c=d.config;_assert(c.authDomain,d,"auth-domain-config-required");const et=c.emulator?_emulatorUrl(c,EMULATED_IFRAME_PATH):`https://${d.config.authDomain}/${IFRAME_PATH}`,_e={apiKey:c.apiKey,appName:d.name,v:SDK_VERSION$1},tt=EID_FROM_APIHOST.get(d.config.apiHost);tt&&(_e.eid=tt);const nt=d._getFrameworks();return nt.length&&(_e.fw=nt.join(",")),`${et}?${querystring(_e).slice(1)}`}async function _openIframe(d){const c=await _loadGapi(d),et=_window().gapi;return _assert(et,d,"internal-error"),c.open({where:document.body,url:getIframeUrl(d),messageHandlersFilter:et.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},_e=>new Promise(async(tt,nt)=>{await _e.restyle({setHideOnLeave:!1});const rt=_createError(d,"network-request-failed"),it=_window().setTimeout(()=>{nt(rt)},PING_TIMEOUT.get());function ot(){_window().clearTimeout(it),tt(_e)}_e.ping(ot).then(ot,()=>{nt(rt)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(d,c,et,_e=DEFAULT_WIDTH,tt=DEFAULT_HEIGHT){const nt=Math.max((window.screen.availHeight-tt)/2,0).toString(),rt=Math.max((window.screen.availWidth-_e)/2,0).toString();let it="";const ot=Object.assign(Object.assign({},BASE_POPUP_OPTIONS),{width:_e.toString(),height:tt.toString(),top:nt,left:rt}),st=getUA().toLowerCase();et&&(it=_isChromeIOS(st)?TARGET_BLANK:et),_isFirefox(st)&&(c=c||FIREFOX_EMPTY_URL,ot.scrollbars="yes");const at=Object.entries(ot).reduce((ct,[ut,dt])=>`${ct}${ut}=${dt},`,"");if(_isIOSStandalone(st)&&it!=="_self")return openAsNewWindowIOS(c||"",it),new AuthPopup(null);const lt=window.open(c||"",it,at);_assert(lt,d,"popup-blocked");try{lt.focus()}catch{}return new AuthPopup(lt)}function openAsNewWindowIOS(d,c){const et=document.createElement("a");et.href=d,et.target=c;const _e=document.createEvent("MouseEvent");_e.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),et.dispatchEvent(_e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(d,c,et,_e,tt,nt){_assert(d.config.authDomain,d,"auth-domain-config-required"),_assert(d.config.apiKey,d,"invalid-api-key");const rt={apiKey:d.config.apiKey,appName:d.name,authType:et,redirectUrl:_e,v:SDK_VERSION$1,eventId:tt};if(c instanceof FederatedAuthProvider){c.setDefaultLanguage(d.languageCode),rt.providerId=c.providerId||"",isEmpty(c.getCustomParameters())||(rt.customParameters=JSON.stringify(c.getCustomParameters()));for(const[at,lt]of Object.entries(nt||{}))rt[at]=lt}if(c instanceof BaseOAuthProvider){const at=c.getScopes().filter(lt=>lt!=="");at.length>0&&(rt.scopes=at.join(","))}d.tenantId&&(rt.tid=d.tenantId);const it=rt;for(const at of Object.keys(it))it[at]===void 0&&delete it[at];const ot=await d._getAppCheckToken(),st=ot?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(ot)}`:"";return`${getHandlerBase(d)}?${querystring(it).slice(1)}${st}`}function getHandlerBase({config:d}){return d.emulator?_emulatorUrl(d,EMULATOR_WIDGET_PATH):`https://${d.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(c,et,_e,tt){var nt;debugAssert((nt=this.eventManagers[c._key()])===null||nt===void 0?void 0:nt.manager,"_initialize() not called before _openPopup()");const rt=await _getRedirectUrl(c,et,_e,_getCurrentUrl(),tt);return _open(c,rt,_generateEventId())}async _openRedirect(c,et,_e,tt){await this._originValidation(c);const nt=await _getRedirectUrl(c,et,_e,_getCurrentUrl(),tt);return _setWindowLocation(nt),new Promise(()=>{})}_initialize(c){const et=c._key();if(this.eventManagers[et]){const{manager:tt,promise:nt}=this.eventManagers[et];return tt?Promise.resolve(tt):(debugAssert(nt,"If manager is not set, promise should be"),nt)}const _e=this.initAndGetManager(c);return this.eventManagers[et]={promise:_e},_e.catch(()=>{delete this.eventManagers[et]}),_e}async initAndGetManager(c){const et=await _openIframe(c),_e=new AuthEventManager(c);return et.register("authEvent",tt=>(_assert(tt==null?void 0:tt.authEvent,c,"invalid-auth-event"),{status:_e.onEvent(tt.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[c._key()]={manager:_e},this.iframes[c._key()]=et,_e}_isIframeWebStorageSupported(c,et){this.iframes[c._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},tt=>{var nt;const rt=(nt=tt==null?void 0:tt[0])===null||nt===void 0?void 0:nt[WEB_STORAGE_SUPPORT_KEY];rt!==void 0&&et(!!rt),_fail(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const et=c._key();return this.originValidationPromises[et]||(this.originValidationPromises[et]=_validateOrigin(c)),this.originValidationPromises[et]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$2="@firebase/auth",version$2="1.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),((c=this.auth.currentUser)===null||c===void 0?void 0:c.uid)||null}async getToken(c){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(c)}:null}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const et=this.auth.onIdTokenChanged(_e=>{c((_e==null?void 0:_e.stsTokenManager.accessToken)||null)});this.internalListeners.set(c,et),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const et=this.internalListeners.get(c);et&&(this.internalListeners.delete(c),et(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(d){switch(d){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function registerAuth(d){_registerComponent(new Component("auth",(c,{options:et})=>{const _e=c.getProvider("app").getImmediate(),tt=c.getProvider("heartbeat"),nt=c.getProvider("app-check-internal"),{apiKey:rt,authDomain:it}=_e.options;_assert(rt&&!rt.includes(":"),"invalid-api-key",{appName:_e.name});const ot={apiKey:rt,authDomain:it,clientPlatform:d,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(d)},st=new AuthImpl(_e,tt,nt,ot);return _initializeAuthInstance(st,et),st},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,et,_e)=>{c.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",c=>{const et=_castAuth(c.getProvider("auth").getImmediate());return(_e=>new AuthInterop(_e))(et)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$2,version$2,getVersionForPlatform(d)),registerVersion(name$2,version$2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=5*60,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=d=>async c=>{const et=c&&await c.getIdTokenResult(),_e=et&&(new Date().getTime()-Date.parse(et.issuedAtTime))/1e3;if(_e&&_e>authIdTokenMaxAge)return;const tt=et==null?void 0:et.token;lastPostedIdToken!==tt&&(lastPostedIdToken=tt,await fetch(d,{method:tt?"POST":"DELETE",headers:tt?{Authorization:`Bearer ${tt}`}:{}}))};function getAuth(d=getApp()){const c=_getProvider(d,"auth");if(c.isInitialized())return c.getImmediate();const et=initializeAuth(d,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),_e=getExperimentalSetting("authTokenSyncURL");if(_e){const nt=mintCookieFactory(_e);beforeAuthStateChanged(et,nt,()=>nt(et.currentUser)),onIdTokenChanged(et,rt=>nt(rt))}const tt=getDefaultEmulatorHost("auth");return tt&&connectAuthEmulator(et,`http://${tt}`),et}registerAuth("Browser");var name$1="firebase",version$1="10.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name$1,version$1,"app");var define_process_env_default={};const name="@firebase/database",version="1.0.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SDK_VERSION="";function setSDKVersion(d){SDK_VERSION=d}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DOMStorageWrapper{constructor(c){this.domStorage_=c,this.prefix_="firebase:"}set(c,et){et==null?this.domStorage_.removeItem(this.prefixedName_(c)):this.domStorage_.setItem(this.prefixedName_(c),stringify(et))}get(c){const et=this.domStorage_.getItem(this.prefixedName_(c));return et==null?null:jsonEval(et)}remove(c){this.domStorage_.removeItem(this.prefixedName_(c))}prefixedName_(c){return this.prefix_+c}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MemoryStorage{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(c,et){et==null?delete this.cache_[c]:this.cache_[c]=et}get(c){return contains$2(this.cache_,c)?this.cache_[c]:null}remove(c){delete this.cache_[c]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const createStoragefor=function(d){try{if(typeof window<"u"&&typeof window[d]<"u"){const c=window[d];return c.setItem("firebase:sentinel","cache"),c.removeItem("firebase:sentinel"),new DOMStorageWrapper(c)}}catch{}return new MemoryStorage},PersistentStorage=createStoragefor("localStorage"),SessionStorage=createStoragefor("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/database"),LUIDGenerator=function(){let d=1;return function(){return d++}}(),sha1=function(d){const c=stringToByteArray(d),et=new Sha1;et.update(c);const _e=et.digest();return base64$2.encodeByteArray(_e)},buildLogMessage_=function(...d){let c="";for(let et=0;et<d.length;et++){const _e=d[et];Array.isArray(_e)||_e&&typeof _e=="object"&&typeof _e.length=="number"?c+=buildLogMessage_.apply(null,_e):typeof _e=="object"?c+=stringify(_e):c+=_e,c+=" "}return c};let logger=null,firstLog_=!0;const enableLogging$1=function(d,c){assert(!c||d===!0||d===!1,"Can't turn on custom loggers persistently."),d===!0?(logClient.logLevel=LogLevel.VERBOSE,logger=logClient.log.bind(logClient),c&&SessionStorage.set("logging_enabled",!0)):typeof d=="function"?logger=d:(logger=null,SessionStorage.remove("logging_enabled"))},log=function(...d){if(firstLog_===!0&&(firstLog_=!1,logger===null&&SessionStorage.get("logging_enabled")===!0&&enableLogging$1(!0)),logger){const c=buildLogMessage_.apply(null,d);logger(c)}},logWrapper=function(d){return function(...c){log(d,...c)}},error$1=function(...d){const c="FIREBASE INTERNAL ERROR: "+buildLogMessage_(...d);logClient.error(c)},fatal=function(...d){const c=`FIREBASE FATAL ERROR: ${buildLogMessage_(...d)}`;throw logClient.error(c),new Error(c)},warn=function(...d){const c="FIREBASE WARNING: "+buildLogMessage_(...d);logClient.warn(c)},warnIfPageIsSecure=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&warn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},isInvalidJSONNumber=function(d){return typeof d=="number"&&(d!==d||d===Number.POSITIVE_INFINITY||d===Number.NEGATIVE_INFINITY)},executeWhenDOMReady=function(d){if(document.readyState==="complete")d();else{let c=!1;const et=function(){if(!document.body){setTimeout(et,Math.floor(10));return}c||(c=!0,d())};document.addEventListener?(document.addEventListener("DOMContentLoaded",et,!1),window.addEventListener("load",et,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&et()}),window.attachEvent("onload",et))}},MIN_NAME="[MIN_NAME]",MAX_NAME="[MAX_NAME]",nameCompare=function(d,c){if(d===c)return 0;if(d===MIN_NAME||c===MAX_NAME)return-1;if(c===MIN_NAME||d===MAX_NAME)return 1;{const et=tryParseInt(d),_e=tryParseInt(c);return et!==null?_e!==null?et-_e===0?d.length-c.length:et-_e:-1:_e!==null?1:d<c?-1:1}},stringCompare=function(d,c){return d===c?0:d<c?-1:1},requireKey=function(d,c){if(c&&d in c)return c[d];throw new Error("Missing required key ("+d+") in object: "+stringify(c))},ObjectToUniqueKey=function(d){if(typeof d!="object"||d===null)return stringify(d);const c=[];for(const _e in d)c.push(_e);c.sort();let et="{";for(let _e=0;_e<c.length;_e++)_e!==0&&(et+=","),et+=stringify(c[_e]),et+=":",et+=ObjectToUniqueKey(d[c[_e]]);return et+="}",et},splitStringBySize=function(d,c){const et=d.length;if(et<=c)return[d];const _e=[];for(let tt=0;tt<et;tt+=c)tt+c>et?_e.push(d.substring(tt,et)):_e.push(d.substring(tt,tt+c));return _e};function each(d,c){for(const et in d)d.hasOwnProperty(et)&&c(et,d[et])}const doubleToIEEE754String=function(d){assert(!isInvalidJSONNumber(d),"Invalid JSON number");const c=11,et=52,_e=(1<<c-1)-1;let tt,nt,rt,it,ot;d===0?(nt=0,rt=0,tt=1/d===-1/0?1:0):(tt=d<0,d=Math.abs(d),d>=Math.pow(2,1-_e)?(it=Math.min(Math.floor(Math.log(d)/Math.LN2),_e),nt=it+_e,rt=Math.round(d*Math.pow(2,et-it)-Math.pow(2,et))):(nt=0,rt=Math.round(d/Math.pow(2,1-_e-et))));const st=[];for(ot=et;ot;ot-=1)st.push(rt%2?1:0),rt=Math.floor(rt/2);for(ot=c;ot;ot-=1)st.push(nt%2?1:0),nt=Math.floor(nt/2);st.push(tt?1:0),st.reverse();const at=st.join("");let lt="";for(ot=0;ot<64;ot+=8){let ct=parseInt(at.substr(ot,8),2).toString(16);ct.length===1&&(ct="0"+ct),lt=lt+ct}return lt.toLowerCase()},isChromeExtensionContentScript=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},isWindowsStoreApp=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function errorForServerCode(d,c){let et="Unknown Error";d==="too_big"?et="The data requested exceeds the maximum size that can be accessed with a single request.":d==="permission_denied"?et="Client doesn't have permission to access the desired data.":d==="unavailable"&&(et="The service is unavailable");const _e=new Error(d+" at "+c._path.toString()+": "+et);return _e.code=d.toUpperCase(),_e}const INTEGER_REGEXP_=new RegExp("^-?(0*)\\d{1,10}$"),INTEGER_32_MIN=-2147483648,INTEGER_32_MAX=2147483647,tryParseInt=function(d){if(INTEGER_REGEXP_.test(d)){const c=Number(d);if(c>=INTEGER_32_MIN&&c<=INTEGER_32_MAX)return c}return null},exceptionGuard=function(d){try{d()}catch(c){setTimeout(()=>{const et=c.stack||"";throw warn("Exception was thrown by user callback.",et),c},Math.floor(0))}},beingCrawled=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},setTimeoutNonBlocking=function(d,c){const et=setTimeout(d,c);return typeof et=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(et):typeof et=="object"&&et.unref&&et.unref(),et};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AppCheckTokenProvider{constructor(c,et){this.appName_=c,this.appCheckProvider=et,this.appCheck=et==null?void 0:et.getImmediate({optional:!0}),this.appCheck||et==null||et.get().then(_e=>this.appCheck=_e)}getToken(c){return this.appCheck?this.appCheck.getToken(c):new Promise((et,_e)=>{setTimeout(()=>{this.appCheck?this.getToken(c).then(et,_e):et(null)},0)})}addTokenChangeListener(c){var et;(et=this.appCheckProvider)===null||et===void 0||et.get().then(_e=>_e.addTokenListener(c))}notifyForInvalidToken(){warn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAuthTokenProvider{constructor(c,et,_e){this.appName_=c,this.firebaseOptions_=et,this.authProvider_=_e,this.auth_=null,this.auth_=_e.getImmediate({optional:!0}),this.auth_||_e.onInit(tt=>this.auth_=tt)}getToken(c){return this.auth_?this.auth_.getToken(c).catch(et=>et&&et.code==="auth/token-not-initialized"?(log("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(et)):new Promise((et,_e)=>{setTimeout(()=>{this.auth_?this.getToken(c).then(et,_e):et(null)},0)})}addTokenChangeListener(c){this.auth_?this.auth_.addAuthTokenListener(c):this.authProvider_.get().then(et=>et.addAuthTokenListener(c))}removeTokenChangeListener(c){this.authProvider_.get().then(et=>et.removeAuthTokenListener(c))}notifyForInvalidToken(){let c='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?c+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?c+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':c+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',warn(c)}}class EmulatorTokenProvider{constructor(c){this.accessToken=c}getToken(c){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(c){c(this.accessToken)}removeTokenChangeListener(c){}notifyForInvalidToken(){}}EmulatorTokenProvider.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PROTOCOL_VERSION="5",VERSION_PARAM="v",TRANSPORT_SESSION_PARAM="s",REFERER_PARAM="r",FORGE_REF="f",FORGE_DOMAIN_RE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,LAST_SESSION_PARAM="ls",APPLICATION_ID_PARAM="p",APP_CHECK_TOKEN_PARAM="ac",WEBSOCKET="websocket",LONG_POLLING="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RepoInfo{constructor(c,et,_e,tt,nt=!1,rt="",it=!1,ot=!1){this.secure=et,this.namespace=_e,this.webSocketOnly=tt,this.nodeAdmin=nt,this.persistenceKey=rt,this.includeNamespaceInQueryParams=it,this.isUsingEmulator=ot,this._host=c.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=PersistentStorage.get("host:"+c)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(c){c!==this.internalHost&&(this.internalHost=c,this.isCacheableHost()&&PersistentStorage.set("host:"+this._host,this.internalHost))}toString(){let c=this.toURLString();return this.persistenceKey&&(c+="<"+this.persistenceKey+">"),c}toURLString(){const c=this.secure?"https://":"http://",et=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${c}${this.host}/${et}`}}function repoInfoNeedsQueryParam(d){return d.host!==d.internalHost||d.isCustomHost()||d.includeNamespaceInQueryParams}function repoInfoConnectionURL(d,c,et){assert(typeof c=="string","typeof type must == string"),assert(typeof et=="object","typeof params must == object");let _e;if(c===WEBSOCKET)_e=(d.secure?"wss://":"ws://")+d.internalHost+"/.ws?";else if(c===LONG_POLLING)_e=(d.secure?"https://":"http://")+d.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+c);repoInfoNeedsQueryParam(d)&&(et.ns=d.namespace);const tt=[];return each(et,(nt,rt)=>{tt.push(nt+"="+rt)}),_e+tt.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StatsCollection{constructor(){this.counters_={}}incrementCounter(c,et=1){contains$2(this.counters_,c)||(this.counters_[c]=0),this.counters_[c]+=et}get(){return deepCopy(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const collections={},reporters={};function statsManagerGetCollection(d){const c=d.toString();return collections[c]||(collections[c]=new StatsCollection),collections[c]}function statsManagerGetOrCreateReporter(d,c){const et=d.toString();return reporters[et]||(reporters[et]=c()),reporters[et]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PacketReceiver{constructor(c){this.onMessage_=c,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(c,et){this.closeAfterResponse=c,this.onClose=et,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(c,et){for(this.pendingResponses[c]=et;this.pendingResponses[this.currentResponseNum];){const _e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let tt=0;tt<_e.length;++tt)_e[tt]&&exceptionGuard(()=>{this.onMessage_(_e[tt])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FIREBASE_LONGPOLL_START_PARAM="start",FIREBASE_LONGPOLL_CLOSE_COMMAND="close",FIREBASE_LONGPOLL_COMMAND_CB_NAME="pLPCommand",FIREBASE_LONGPOLL_DATA_CB_NAME="pRTLPCB",FIREBASE_LONGPOLL_ID_PARAM="id",FIREBASE_LONGPOLL_PW_PARAM="pw",FIREBASE_LONGPOLL_SERIAL_PARAM="ser",FIREBASE_LONGPOLL_CALLBACK_ID_PARAM="cb",FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM="seg",FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET="ts",FIREBASE_LONGPOLL_DATA_PARAM="d",FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM="dframe",MAX_URL_DATA_SIZE=1870,SEG_HEADER_SIZE=30,MAX_PAYLOAD_SIZE=MAX_URL_DATA_SIZE-SEG_HEADER_SIZE,KEEPALIVE_REQUEST_INTERVAL=25e3,LP_CONNECT_TIMEOUT=3e4;class BrowserPollConnection{constructor(c,et,_e,tt,nt,rt,it){this.connId=c,this.repoInfo=et,this.applicationId=_e,this.appCheckToken=tt,this.authToken=nt,this.transportSessionId=rt,this.lastSessionId=it,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=logWrapper(c),this.stats_=statsManagerGetCollection(et),this.urlFn=ot=>(this.appCheckToken&&(ot[APP_CHECK_TOKEN_PARAM]=this.appCheckToken),repoInfoConnectionURL(et,LONG_POLLING,ot))}open(c,et){this.curSegmentNum=0,this.onDisconnect_=et,this.myPacketOrderer=new PacketReceiver(c),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(LP_CONNECT_TIMEOUT)),executeWhenDOMReady(()=>{if(this.isClosed_)return;this.scriptTagHolder=new FirebaseIFrameScriptHolder((...nt)=>{const[rt,it,ot,st,at]=nt;if(this.incrementIncomingBytes_(nt),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,rt===FIREBASE_LONGPOLL_START_PARAM)this.id=it,this.password=ot;else if(rt===FIREBASE_LONGPOLL_CLOSE_COMMAND)it?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(it,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+rt)},(...nt)=>{const[rt,it]=nt;this.incrementIncomingBytes_(nt),this.myPacketOrderer.handleResponse(rt,it)},()=>{this.onClosed_()},this.urlFn);const _e={};_e[FIREBASE_LONGPOLL_START_PARAM]="t",_e[FIREBASE_LONGPOLL_SERIAL_PARAM]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(_e[FIREBASE_LONGPOLL_CALLBACK_ID_PARAM]=this.scriptTagHolder.uniqueCallbackIdentifier),_e[VERSION_PARAM]=PROTOCOL_VERSION,this.transportSessionId&&(_e[TRANSPORT_SESSION_PARAM]=this.transportSessionId),this.lastSessionId&&(_e[LAST_SESSION_PARAM]=this.lastSessionId),this.applicationId&&(_e[APPLICATION_ID_PARAM]=this.applicationId),this.appCheckToken&&(_e[APP_CHECK_TOKEN_PARAM]=this.appCheckToken),typeof location<"u"&&location.hostname&&FORGE_DOMAIN_RE.test(location.hostname)&&(_e[REFERER_PARAM]=FORGE_REF);const tt=this.urlFn(_e);this.log_("Connecting via long-poll to "+tt),this.scriptTagHolder.addTag(tt,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){BrowserPollConnection.forceAllow_=!0}static forceDisallow(){BrowserPollConnection.forceDisallow_=!0}static isAvailable(){return BrowserPollConnection.forceAllow_?!0:!BrowserPollConnection.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!isChromeExtensionContentScript()&&!isWindowsStoreApp()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(c){const et=stringify(c);this.bytesSent+=et.length,this.stats_.incrementCounter("bytes_sent",et.length);const _e=base64Encode(et),tt=splitStringBySize(_e,MAX_PAYLOAD_SIZE);for(let nt=0;nt<tt.length;nt++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,tt.length,tt[nt]),this.curSegmentNum++}addDisconnectPingFrame(c,et){this.myDisconnFrame=document.createElement("iframe");const _e={};_e[FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM]="t",_e[FIREBASE_LONGPOLL_ID_PARAM]=c,_e[FIREBASE_LONGPOLL_PW_PARAM]=et,this.myDisconnFrame.src=this.urlFn(_e),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(c){const et=stringify(c).length;this.bytesReceived+=et,this.stats_.incrementCounter("bytes_received",et)}}class FirebaseIFrameScriptHolder{constructor(c,et,_e,tt){this.onDisconnect=_e,this.urlFn=tt,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=LUIDGenerator(),window[FIREBASE_LONGPOLL_COMMAND_CB_NAME+this.uniqueCallbackIdentifier]=c,window[FIREBASE_LONGPOLL_DATA_CB_NAME+this.uniqueCallbackIdentifier]=et,this.myIFrame=FirebaseIFrameScriptHolder.createIFrame_();let nt="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(nt='<script>document.domain="'+document.domain+'";<\/script>');const rt="<html><body>"+nt+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(rt),this.myIFrame.doc.close()}catch(it){log("frame writing exception"),it.stack&&log(it.stack),log(it)}}}static createIFrame_(){const c=document.createElement("iframe");if(c.style.display="none",document.body){document.body.appendChild(c);try{c.contentWindow.document||log("No IE domain setting required")}catch{const _e=document.domain;c.src="javascript:void((function(){document.open();document.domain='"+_e+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return c.contentDocument?c.doc=c.contentDocument:c.contentWindow?c.doc=c.contentWindow.document:c.document&&(c.doc=c.document),c}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const c=this.onDisconnect;c&&(this.onDisconnect=null,c())}startLongPoll(c,et){for(this.myID=c,this.myPW=et,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const c={};c[FIREBASE_LONGPOLL_ID_PARAM]=this.myID,c[FIREBASE_LONGPOLL_PW_PARAM]=this.myPW,c[FIREBASE_LONGPOLL_SERIAL_PARAM]=this.currentSerial;let et=this.urlFn(c),_e="",tt=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+SEG_HEADER_SIZE+_e.length<=MAX_URL_DATA_SIZE;){const rt=this.pendingSegs.shift();_e=_e+"&"+FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM+tt+"="+rt.seg+"&"+FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET+tt+"="+rt.ts+"&"+FIREBASE_LONGPOLL_DATA_PARAM+tt+"="+rt.d,tt++}return et=et+_e,this.addLongPollTag_(et,this.currentSerial),!0}else return!1}enqueueSegment(c,et,_e){this.pendingSegs.push({seg:c,ts:et,d:_e}),this.alive&&this.newRequest_()}addLongPollTag_(c,et){this.outstandingRequests.add(et);const _e=()=>{this.outstandingRequests.delete(et),this.newRequest_()},tt=setTimeout(_e,Math.floor(KEEPALIVE_REQUEST_INTERVAL)),nt=()=>{clearTimeout(tt),_e()};this.addTag(c,nt)}addTag(c,et){setTimeout(()=>{try{if(!this.sendNewPolls)return;const _e=this.myIFrame.doc.createElement("script");_e.type="text/javascript",_e.async=!0,_e.src=c,_e.onload=_e.onreadystatechange=function(){const tt=_e.readyState;(!tt||tt==="loaded"||tt==="complete")&&(_e.onload=_e.onreadystatechange=null,_e.parentNode&&_e.parentNode.removeChild(_e),et())},_e.onerror=()=>{log("Long-poll script failed to load: "+c),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(_e)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEBSOCKET_MAX_FRAME_SIZE=16384,WEBSOCKET_KEEPALIVE_INTERVAL=45e3;let WebSocketImpl=null;typeof MozWebSocket<"u"?WebSocketImpl=MozWebSocket:typeof WebSocket<"u"&&(WebSocketImpl=WebSocket);class WebSocketConnection{constructor(c,et,_e,tt,nt,rt,it){this.connId=c,this.applicationId=_e,this.appCheckToken=tt,this.authToken=nt,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=logWrapper(this.connId),this.stats_=statsManagerGetCollection(et),this.connURL=WebSocketConnection.connectionURL_(et,rt,it,tt,_e),this.nodeAdmin=et.nodeAdmin}static connectionURL_(c,et,_e,tt,nt){const rt={};return rt[VERSION_PARAM]=PROTOCOL_VERSION,typeof location<"u"&&location.hostname&&FORGE_DOMAIN_RE.test(location.hostname)&&(rt[REFERER_PARAM]=FORGE_REF),et&&(rt[TRANSPORT_SESSION_PARAM]=et),_e&&(rt[LAST_SESSION_PARAM]=_e),tt&&(rt[APP_CHECK_TOKEN_PARAM]=tt),nt&&(rt[APPLICATION_ID_PARAM]=nt),repoInfoConnectionURL(c,WEBSOCKET,rt)}open(c,et){this.onDisconnect=et,this.onMessage=c,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,PersistentStorage.set("previous_websocket_failure",!0);try{let _e;isNodeSdk(),this.mySock=new WebSocketImpl(this.connURL,[],_e)}catch(_e){this.log_("Error instantiating WebSocket.");const tt=_e.message||_e.data;tt&&this.log_(tt),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=_e=>{this.handleIncomingFrame(_e)},this.mySock.onerror=_e=>{this.log_("WebSocket error.  Closing connection.");const tt=_e.message||_e.data;tt&&this.log_(tt),this.onClosed_()}}start(){}static forceDisallow(){WebSocketConnection.forceDisallow_=!0}static isAvailable(){let c=!1;if(typeof navigator<"u"&&navigator.userAgent){const et=/Android ([0-9]{0,}\.[0-9]{0,})/,_e=navigator.userAgent.match(et);_e&&_e.length>1&&parseFloat(_e[1])<4.4&&(c=!0)}return!c&&WebSocketImpl!==null&&!WebSocketConnection.forceDisallow_}static previouslyFailed(){return PersistentStorage.isInMemoryStorage||PersistentStorage.get("previous_websocket_failure")===!0}markConnectionHealthy(){PersistentStorage.remove("previous_websocket_failure")}appendFrame_(c){if(this.frames.push(c),this.frames.length===this.totalFrames){const et=this.frames.join("");this.frames=null;const _e=jsonEval(et);this.onMessage(_e)}}handleNewFrameCount_(c){this.totalFrames=c,this.frames=[]}extractFrameCount_(c){if(assert(this.frames===null,"We already have a frame buffer"),c.length<=6){const et=Number(c);if(!isNaN(et))return this.handleNewFrameCount_(et),null}return this.handleNewFrameCount_(1),c}handleIncomingFrame(c){if(this.mySock===null)return;const et=c.data;if(this.bytesReceived+=et.length,this.stats_.incrementCounter("bytes_received",et.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(et);else{const _e=this.extractFrameCount_(et);_e!==null&&this.appendFrame_(_e)}}send(c){this.resetKeepAlive();const et=stringify(c);this.bytesSent+=et.length,this.stats_.incrementCounter("bytes_sent",et.length);const _e=splitStringBySize(et,WEBSOCKET_MAX_FRAME_SIZE);_e.length>1&&this.sendString_(String(_e.length));for(let tt=0;tt<_e.length;tt++)this.sendString_(_e[tt])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(WEBSOCKET_KEEPALIVE_INTERVAL))}sendString_(c){try{this.mySock.send(c)}catch(et){this.log_("Exception thrown from WebSocket.send():",et.message||et.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}WebSocketConnection.responsesRequiredToBeHealthy=2;WebSocketConnection.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransportManager{constructor(c){this.initTransports_(c)}static get ALL_TRANSPORTS(){return[BrowserPollConnection,WebSocketConnection]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(c){const et=WebSocketConnection&&WebSocketConnection.isAvailable();let _e=et&&!WebSocketConnection.previouslyFailed();if(c.webSocketOnly&&(et||warn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),_e=!0),_e)this.transports_=[WebSocketConnection];else{const tt=this.transports_=[];for(const nt of TransportManager.ALL_TRANSPORTS)nt&&nt.isAvailable()&&tt.push(nt);TransportManager.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}TransportManager.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UPGRADE_TIMEOUT=6e4,DELAY_BEFORE_SENDING_EXTRA_REQUESTS=5e3,BYTES_SENT_HEALTHY_OVERRIDE=10*1024,BYTES_RECEIVED_HEALTHY_OVERRIDE=100*1024,MESSAGE_TYPE="t",MESSAGE_DATA="d",CONTROL_SHUTDOWN="s",CONTROL_RESET="r",CONTROL_ERROR="e",CONTROL_PONG="o",SWITCH_ACK="a",END_TRANSMISSION="n",PING="p",SERVER_HELLO="h";class Connection{constructor(c,et,_e,tt,nt,rt,it,ot,st,at){this.id=c,this.repoInfo_=et,this.applicationId_=_e,this.appCheckToken_=tt,this.authToken_=nt,this.onMessage_=rt,this.onReady_=it,this.onDisconnect_=ot,this.onKill_=st,this.lastSessionId=at,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=logWrapper("c:"+this.id+":"),this.transportManager_=new TransportManager(et),this.log_("Connection created"),this.start_()}start_(){const c=this.transportManager_.initialTransport();this.conn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const et=this.connReceiver_(this.conn_),_e=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(et,_e)},Math.floor(0));const tt=c.healthyTimeout||0;tt>0&&(this.healthyTimeout_=setTimeoutNonBlocking(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>BYTES_RECEIVED_HEALTHY_OVERRIDE?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>BYTES_SENT_HEALTHY_OVERRIDE?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(tt)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(c){return et=>{c===this.conn_?this.onConnectionLost_(et):c===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(c){return et=>{this.state_!==2&&(c===this.rx_?this.onPrimaryMessageReceived_(et):c===this.secondaryConn_?this.onSecondaryMessageReceived_(et):this.log_("message on old connection"))}}sendRequest(c){const et={t:"d",d:c};this.sendData_(et)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(c){if(MESSAGE_TYPE in c){const et=c[MESSAGE_TYPE];et===SWITCH_ACK?this.upgradeIfSecondaryHealthy_():et===CONTROL_RESET?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):et===CONTROL_PONG&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(c){const et=requireKey("t",c),_e=requireKey("d",c);if(et==="c")this.onSecondaryControl_(_e);else if(et==="d")this.pendingDataMessages.push(_e);else throw new Error("Unknown protocol layer: "+et)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:PING,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:SWITCH_ACK,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:END_TRANSMISSION,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(c){const et=requireKey("t",c),_e=requireKey("d",c);et==="c"?this.onControl_(_e):et==="d"&&this.onDataMessage_(_e)}onDataMessage_(c){this.onPrimaryResponse_(),this.onMessage_(c)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(c){const et=requireKey(MESSAGE_TYPE,c);if(MESSAGE_DATA in c){const _e=c[MESSAGE_DATA];if(et===SERVER_HELLO){const tt=Object.assign({},_e);this.repoInfo_.isUsingEmulator&&(tt.h=this.repoInfo_.host),this.onHandshake_(tt)}else if(et===END_TRANSMISSION){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let tt=0;tt<this.pendingDataMessages.length;++tt)this.onDataMessage_(this.pendingDataMessages[tt]);this.pendingDataMessages=[],this.tryCleanupConnection()}else et===CONTROL_SHUTDOWN?this.onConnectionShutdown_(_e):et===CONTROL_RESET?this.onReset_(_e):et===CONTROL_ERROR?error$1("Server Error: "+_e):et===CONTROL_PONG?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):error$1("Unknown control packet command: "+et)}}onHandshake_(c){const et=c.ts,_e=c.v,tt=c.h;this.sessionId=c.s,this.repoInfo_.host=tt,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,et),PROTOCOL_VERSION!==_e&&warn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const c=this.transportManager_.upgradeTransport();c&&this.startUpgrade_(c)}startUpgrade_(c){this.secondaryConn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const et=this.connReceiver_(this.secondaryConn_),_e=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(et,_e),setTimeoutNonBlocking(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(UPGRADE_TIMEOUT))}onReset_(c){this.log_("Reset packet received.  New host: "+c),this.repoInfo_.host=c,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(c,et){this.log_("Realtime connection established."),this.conn_=c,this.state_=1,this.onReady_&&(this.onReady_(et,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):setTimeoutNonBlocking(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(DELAY_BEFORE_SENDING_EXTRA_REQUESTS))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:PING,d:{}}}))}onSecondaryConnectionLost_(){const c=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===c||this.rx_===c)&&this.close()}onConnectionLost_(c){this.conn_=null,!c&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(PersistentStorage.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(c){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(c),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(c){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(c)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ServerActions{put(c,et,_e,tt){}merge(c,et,_e,tt){}refreshAuthToken(c){}refreshAppCheckToken(c){}onDisconnectPut(c,et,_e){}onDisconnectMerge(c,et,_e){}onDisconnectCancel(c,et){}reportStats(c){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EventEmitter$1=class{constructor(c){this.allowedEvents_=c,this.listeners_={},assert(Array.isArray(c)&&c.length>0,"Requires a non-empty array")}trigger(c,...et){if(Array.isArray(this.listeners_[c])){const _e=[...this.listeners_[c]];for(let tt=0;tt<_e.length;tt++)_e[tt].callback.apply(_e[tt].context,et)}}on(c,et,_e){this.validateEventType_(c),this.listeners_[c]=this.listeners_[c]||[],this.listeners_[c].push({callback:et,context:_e});const tt=this.getInitialEvent(c);tt&&et.apply(_e,tt)}off(c,et,_e){this.validateEventType_(c);const tt=this.listeners_[c]||[];for(let nt=0;nt<tt.length;nt++)if(tt[nt].callback===et&&(!_e||_e===tt[nt].context)){tt.splice(nt,1);return}}validateEventType_(c){assert(this.allowedEvents_.find(et=>et===c),"Unknown event: "+c)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OnlineMonitor extends EventEmitter$1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!isMobileCordova()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new OnlineMonitor}getInitialEvent(c){return assert(c==="online","Unknown event type: "+c),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_PATH_DEPTH=32,MAX_PATH_LENGTH_BYTES=768;let Path$1=class{constructor(c,et){if(et===void 0){this.pieces_=c.split("/");let _e=0;for(let tt=0;tt<this.pieces_.length;tt++)this.pieces_[tt].length>0&&(this.pieces_[_e]=this.pieces_[tt],_e++);this.pieces_.length=_e,this.pieceNum_=0}else this.pieces_=c,this.pieceNum_=et}toString(){let c="";for(let et=this.pieceNum_;et<this.pieces_.length;et++)this.pieces_[et]!==""&&(c+="/"+this.pieces_[et]);return c||"/"}};function newEmptyPath(){return new Path$1("")}function pathGetFront(d){return d.pieceNum_>=d.pieces_.length?null:d.pieces_[d.pieceNum_]}function pathGetLength(d){return d.pieces_.length-d.pieceNum_}function pathPopFront(d){let c=d.pieceNum_;return c<d.pieces_.length&&c++,new Path$1(d.pieces_,c)}function pathGetBack(d){return d.pieceNum_<d.pieces_.length?d.pieces_[d.pieces_.length-1]:null}function pathToUrlEncodedString(d){let c="";for(let et=d.pieceNum_;et<d.pieces_.length;et++)d.pieces_[et]!==""&&(c+="/"+encodeURIComponent(String(d.pieces_[et])));return c||"/"}function pathSlice(d,c=0){return d.pieces_.slice(d.pieceNum_+c)}function pathParent(d){if(d.pieceNum_>=d.pieces_.length)return null;const c=[];for(let et=d.pieceNum_;et<d.pieces_.length-1;et++)c.push(d.pieces_[et]);return new Path$1(c,0)}function pathChild(d,c){const et=[];for(let _e=d.pieceNum_;_e<d.pieces_.length;_e++)et.push(d.pieces_[_e]);if(c instanceof Path$1)for(let _e=c.pieceNum_;_e<c.pieces_.length;_e++)et.push(c.pieces_[_e]);else{const _e=c.split("/");for(let tt=0;tt<_e.length;tt++)_e[tt].length>0&&et.push(_e[tt])}return new Path$1(et,0)}function pathIsEmpty(d){return d.pieceNum_>=d.pieces_.length}function newRelativePath(d,c){const et=pathGetFront(d),_e=pathGetFront(c);if(et===null)return c;if(et===_e)return newRelativePath(pathPopFront(d),pathPopFront(c));throw new Error("INTERNAL ERROR: innerPath ("+c+") is not within outerPath ("+d+")")}function pathEquals(d,c){if(pathGetLength(d)!==pathGetLength(c))return!1;for(let et=d.pieceNum_,_e=c.pieceNum_;et<=d.pieces_.length;et++,_e++)if(d.pieces_[et]!==c.pieces_[_e])return!1;return!0}function pathContains(d,c){let et=d.pieceNum_,_e=c.pieceNum_;if(pathGetLength(d)>pathGetLength(c))return!1;for(;et<d.pieces_.length;){if(d.pieces_[et]!==c.pieces_[_e])return!1;++et,++_e}return!0}class ValidationPath{constructor(c,et){this.errorPrefix_=et,this.parts_=pathSlice(c,0),this.byteLength_=Math.max(1,this.parts_.length);for(let _e=0;_e<this.parts_.length;_e++)this.byteLength_+=stringLength(this.parts_[_e]);validationPathCheckValid(this)}}function validationPathPush(d,c){d.parts_.length>0&&(d.byteLength_+=1),d.parts_.push(c),d.byteLength_+=stringLength(c),validationPathCheckValid(d)}function validationPathPop(d){const c=d.parts_.pop();d.byteLength_-=stringLength(c),d.parts_.length>0&&(d.byteLength_-=1)}function validationPathCheckValid(d){if(d.byteLength_>MAX_PATH_LENGTH_BYTES)throw new Error(d.errorPrefix_+"has a key path longer than "+MAX_PATH_LENGTH_BYTES+" bytes ("+d.byteLength_+").");if(d.parts_.length>MAX_PATH_DEPTH)throw new Error(d.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+MAX_PATH_DEPTH+") or object contains a cycle "+validationPathToErrorString(d))}function validationPathToErrorString(d){return d.parts_.length===0?"":"in property '"+d.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VisibilityMonitor extends EventEmitter$1{constructor(){super(["visible"]);let c,et;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(et="visibilitychange",c="hidden"):typeof document.mozHidden<"u"?(et="mozvisibilitychange",c="mozHidden"):typeof document.msHidden<"u"?(et="msvisibilitychange",c="msHidden"):typeof document.webkitHidden<"u"&&(et="webkitvisibilitychange",c="webkitHidden")),this.visible_=!0,et&&document.addEventListener(et,()=>{const _e=!document[c];_e!==this.visible_&&(this.visible_=_e,this.trigger("visible",_e))},!1)}static getInstance(){return new VisibilityMonitor}getInitialEvent(c){return assert(c==="visible","Unknown event type: "+c),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RECONNECT_MIN_DELAY=1e3,RECONNECT_MAX_DELAY_DEFAULT=60*5*1e3,RECONNECT_MAX_DELAY_FOR_ADMINS=30*1e3,RECONNECT_DELAY_MULTIPLIER=1.3,RECONNECT_DELAY_RESET_TIMEOUT=3e4,SERVER_KILL_INTERRUPT_REASON="server_kill",INVALID_TOKEN_THRESHOLD=3;class PersistentConnection extends ServerActions{constructor(c,et,_e,tt,nt,rt,it,ot){if(super(),this.repoInfo_=c,this.applicationId_=et,this.onDataUpdate_=_e,this.onConnectStatus_=tt,this.onServerInfoUpdate_=nt,this.authTokenProvider_=rt,this.appCheckTokenProvider_=it,this.authOverride_=ot,this.id=PersistentConnection.nextPersistentConnectionId_++,this.log_=logWrapper("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=RECONNECT_MIN_DELAY,this.maxReconnectDelay_=RECONNECT_MAX_DELAY_DEFAULT,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,ot&&!isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");VisibilityMonitor.getInstance().on("visible",this.onVisible_,this),c.host.indexOf("fblocal")===-1&&OnlineMonitor.getInstance().on("online",this.onOnline_,this)}sendRequest(c,et,_e){const tt=++this.requestNumber_,nt={r:tt,a:c,b:et};this.log_(stringify(nt)),assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(nt),_e&&(this.requestCBHash_[tt]=_e)}get(c){this.initConnection_();const et=new Deferred,tt={action:"g",request:{p:c._path.toString(),q:c._queryObject},onComplete:rt=>{const it=rt.d;rt.s==="ok"?et.resolve(it):et.reject(it)}};this.outstandingGets_.push(tt),this.outstandingGetCount_++;const nt=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(nt),et.promise}listen(c,et,_e,tt){this.initConnection_();const nt=c._queryIdentifier,rt=c._path.toString();this.log_("Listen called for "+rt+" "+nt),this.listens.has(rt)||this.listens.set(rt,new Map),assert(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"listen() called for non-default but complete query"),assert(!this.listens.get(rt).has(nt),"listen() called twice for same path/queryId.");const it={onComplete:tt,hashFn:et,query:c,tag:_e};this.listens.get(rt).set(nt,it),this.connected_&&this.sendListen_(it)}sendGet_(c){const et=this.outstandingGets_[c];this.sendRequest("g",et.request,_e=>{delete this.outstandingGets_[c],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),et.onComplete&&et.onComplete(_e)})}sendListen_(c){const et=c.query,_e=et._path.toString(),tt=et._queryIdentifier;this.log_("Listen on "+_e+" for "+tt);const nt={p:_e},rt="q";c.tag&&(nt.q=et._queryObject,nt.t=c.tag),nt.h=c.hashFn(),this.sendRequest(rt,nt,it=>{const ot=it.d,st=it.s;PersistentConnection.warnOnListenWarnings_(ot,et),(this.listens.get(_e)&&this.listens.get(_e).get(tt))===c&&(this.log_("listen response",it),st!=="ok"&&this.removeListen_(_e,tt),c.onComplete&&c.onComplete(st,ot))})}static warnOnListenWarnings_(c,et){if(c&&typeof c=="object"&&contains$2(c,"w")){const _e=safeGet(c,"w");if(Array.isArray(_e)&&~_e.indexOf("no_index")){const tt='".indexOn": "'+et._queryParams.getIndex().toString()+'"',nt=et._path.toString();warn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${tt} at ${nt} to your security rules for better performance.`)}}}refreshAuthToken(c){this.authToken_=c,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(c)}reduceReconnectDelayIfAdminCredential_(c){(c&&c.length===40||isAdmin(c))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=RECONNECT_MAX_DELAY_FOR_ADMINS)}refreshAppCheckToken(c){this.appCheckToken_=c,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const c=this.authToken_,et=isValidFormat(c)?"auth":"gauth",_e={cred:c};this.authOverride_===null?_e.noauth=!0:typeof this.authOverride_=="object"&&(_e.authvar=this.authOverride_),this.sendRequest(et,_e,tt=>{const nt=tt.s,rt=tt.d||"error";this.authToken_===c&&(nt==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(nt,rt))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},c=>{const et=c.s,_e=c.d||"error";et==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(et,_e)})}unlisten(c,et){const _e=c._path.toString(),tt=c._queryIdentifier;this.log_("Unlisten called for "+_e+" "+tt),assert(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(_e,tt)&&this.connected_&&this.sendUnlisten_(_e,tt,c._queryObject,et)}sendUnlisten_(c,et,_e,tt){this.log_("Unlisten on "+c+" for "+et);const nt={p:c},rt="n";tt&&(nt.q=_e,nt.t=tt),this.sendRequest(rt,nt)}onDisconnectPut(c,et,_e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",c,et,_e):this.onDisconnectRequestQueue_.push({pathString:c,action:"o",data:et,onComplete:_e})}onDisconnectMerge(c,et,_e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",c,et,_e):this.onDisconnectRequestQueue_.push({pathString:c,action:"om",data:et,onComplete:_e})}onDisconnectCancel(c,et){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",c,null,et):this.onDisconnectRequestQueue_.push({pathString:c,action:"oc",data:null,onComplete:et})}sendOnDisconnect_(c,et,_e,tt){const nt={p:et,d:_e};this.log_("onDisconnect "+c,nt),this.sendRequest(c,nt,rt=>{tt&&setTimeout(()=>{tt(rt.s,rt.d)},Math.floor(0))})}put(c,et,_e,tt){this.putInternal("p",c,et,_e,tt)}merge(c,et,_e,tt){this.putInternal("m",c,et,_e,tt)}putInternal(c,et,_e,tt,nt){this.initConnection_();const rt={p:et,d:_e};nt!==void 0&&(rt.h=nt),this.outstandingPuts_.push({action:c,request:rt,onComplete:tt}),this.outstandingPutCount_++;const it=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(it):this.log_("Buffering put: "+et)}sendPut_(c){const et=this.outstandingPuts_[c].action,_e=this.outstandingPuts_[c].request,tt=this.outstandingPuts_[c].onComplete;this.outstandingPuts_[c].queued=this.connected_,this.sendRequest(et,_e,nt=>{this.log_(et+" response",nt),delete this.outstandingPuts_[c],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),tt&&tt(nt.s,nt.d)})}reportStats(c){if(this.connected_){const et={c};this.log_("reportStats",et),this.sendRequest("s",et,_e=>{if(_e.s!=="ok"){const nt=_e.d;this.log_("reportStats","Error sending stats: "+nt)}})}}onDataMessage_(c){if("r"in c){this.log_("from server: "+stringify(c));const et=c.r,_e=this.requestCBHash_[et];_e&&(delete this.requestCBHash_[et],_e(c.b))}else{if("error"in c)throw"A server-side error has occurred: "+c.error;"a"in c&&this.onDataPush_(c.a,c.b)}}onDataPush_(c,et){this.log_("handleServerMessage",c,et),c==="d"?this.onDataUpdate_(et.p,et.d,!1,et.t):c==="m"?this.onDataUpdate_(et.p,et.d,!0,et.t):c==="c"?this.onListenRevoked_(et.p,et.q):c==="ac"?this.onAuthRevoked_(et.s,et.d):c==="apc"?this.onAppCheckRevoked_(et.s,et.d):c==="sd"?this.onSecurityDebugPacket_(et):error$1("Unrecognized action received from server: "+stringify(c)+`
Are you using the latest client?`)}onReady_(c,et){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(c),this.lastSessionId=et,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(c){assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(c))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(c){c&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0)),this.visible_=c}onOnline_(c){c?(this.log_("Browser went online."),this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>RECONNECT_DELAY_RESET_TIMEOUT&&(this.reconnectDelay_=RECONNECT_MIN_DELAY),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const c=new Date().getTime()-this.lastConnectionAttemptTime_;let et=Math.max(0,this.reconnectDelay_-c);et=Math.random()*et,this.log_("Trying to reconnect in "+et+"ms"),this.scheduleConnect_(et),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*RECONNECT_DELAY_MULTIPLIER)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const c=this.onDataMessage_.bind(this),et=this.onReady_.bind(this),_e=this.onRealtimeDisconnect_.bind(this),tt=this.id+":"+PersistentConnection.nextConnectionId_++,nt=this.lastSessionId;let rt=!1,it=null;const ot=function(){it?it.close():(rt=!0,_e())},st=function(lt){assert(it,"sendRequest call when we're not connected not allowed."),it.sendRequest(lt)};this.realtime_={close:ot,sendRequest:st};const at=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[lt,ct]=await Promise.all([this.authTokenProvider_.getToken(at),this.appCheckTokenProvider_.getToken(at)]);rt?log("getToken() completed but was canceled"):(log("getToken() completed. Creating connection."),this.authToken_=lt&&lt.accessToken,this.appCheckToken_=ct&&ct.token,it=new Connection(tt,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,c,et,_e,ut=>{warn(ut+" ("+this.repoInfo_.toString()+")"),this.interrupt(SERVER_KILL_INTERRUPT_REASON)},nt))}catch(lt){this.log_("Failed to get token: "+lt),rt||(this.repoInfo_.nodeAdmin&&warn(lt),ot())}}}interrupt(c){log("Interrupting connection for reason: "+c),this.interruptReasons_[c]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(c){log("Resuming connection for reason: "+c),delete this.interruptReasons_[c],isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(c){const et=c-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:et})}cancelSentTransactions_(){for(let c=0;c<this.outstandingPuts_.length;c++){const et=this.outstandingPuts_[c];et&&"h"in et.request&&et.queued&&(et.onComplete&&et.onComplete("disconnect"),delete this.outstandingPuts_[c],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(c,et){let _e;et?_e=et.map(nt=>ObjectToUniqueKey(nt)).join("$"):_e="default";const tt=this.removeListen_(c,_e);tt&&tt.onComplete&&tt.onComplete("permission_denied")}removeListen_(c,et){const _e=new Path$1(c).toString();let tt;if(this.listens.has(_e)){const nt=this.listens.get(_e);tt=nt.get(et),nt.delete(et),nt.size===0&&this.listens.delete(_e)}else tt=void 0;return tt}onAuthRevoked_(c,et){log("Auth token revoked: "+c+"/"+et),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(c==="invalid_token"||c==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=INVALID_TOKEN_THRESHOLD&&(this.reconnectDelay_=RECONNECT_MAX_DELAY_FOR_ADMINS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(c,et){log("App check token revoked: "+c+"/"+et),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(c==="invalid_token"||c==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=INVALID_TOKEN_THRESHOLD&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(c){this.securityDebugCallback_?this.securityDebugCallback_(c):"msg"in c&&console.log("FIREBASE: "+c.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const c of this.listens.values())for(const et of c.values())this.sendListen_(et);for(let c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){const c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}for(let c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)}sendConnectStats_(){const c={};let et="js";c["sdk."+et+"."+SDK_VERSION.replace(/\./g,"-")]=1,isMobileCordova()?c["framework.cordova"]=1:isReactNative$1()&&(c["framework.reactnative"]=1),this.reportStats(c)}shouldReconnect_(){const c=OnlineMonitor.getInstance().currentlyOnline();return isEmpty(this.interruptReasons_)&&c}}PersistentConnection.nextPersistentConnectionId_=0;PersistentConnection.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NamedNode{constructor(c,et){this.name=c,this.node=et}static Wrap(c,et){return new NamedNode(c,et)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Index{getCompare(){return this.compare.bind(this)}indexedValueChanged(c,et){const _e=new NamedNode(MIN_NAME,c),tt=new NamedNode(MIN_NAME,et);return this.compare(_e,tt)!==0}minPost(){return NamedNode.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __EMPTY_NODE;class KeyIndex extends Index{static get __EMPTY_NODE(){return __EMPTY_NODE}static set __EMPTY_NODE(c){__EMPTY_NODE=c}compare(c,et){return nameCompare(c.name,et.name)}isDefinedOn(c){throw assertionError("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(c,et){return!1}minPost(){return NamedNode.MIN}maxPost(){return new NamedNode(MAX_NAME,__EMPTY_NODE)}makePost(c,et){return assert(typeof c=="string","KeyIndex indexValue must always be a string."),new NamedNode(c,__EMPTY_NODE)}toString(){return".key"}}const KEY_INDEX=new KeyIndex;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMapIterator{constructor(c,et,_e,tt,nt=null){this.isReverse_=tt,this.resultGenerator_=nt,this.nodeStack_=[];let rt=1;for(;!c.isEmpty();)if(c=c,rt=et?_e(c.key,et):1,tt&&(rt*=-1),rt<0)this.isReverse_?c=c.left:c=c.right;else if(rt===0){this.nodeStack_.push(c);break}else this.nodeStack_.push(c),this.isReverse_?c=c.right:c=c.left}getNext(){if(this.nodeStack_.length===0)return null;let c=this.nodeStack_.pop(),et;if(this.resultGenerator_?et=this.resultGenerator_(c.key,c.value):et={key:c.key,value:c.value},this.isReverse_)for(c=c.left;!c.isEmpty();)this.nodeStack_.push(c),c=c.right;else for(c=c.right;!c.isEmpty();)this.nodeStack_.push(c),c=c.left;return et}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const c=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value}}}class LLRBNode{constructor(c,et,_e,tt,nt){this.key=c,this.value=et,this.color=_e??LLRBNode.RED,this.left=tt??SortedMap.EMPTY_NODE,this.right=nt??SortedMap.EMPTY_NODE}copy(c,et,_e,tt,nt){return new LLRBNode(c??this.key,et??this.value,_e??this.color,tt??this.left,nt??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(c){return this.left.inorderTraversal(c)||!!c(this.key,this.value)||this.right.inorderTraversal(c)}reverseTraversal(c){return this.right.reverseTraversal(c)||c(this.key,this.value)||this.left.reverseTraversal(c)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(c,et,_e){let tt=this;const nt=_e(c,tt.key);return nt<0?tt=tt.copy(null,null,null,tt.left.insert(c,et,_e),null):nt===0?tt=tt.copy(null,et,null,null,null):tt=tt.copy(null,null,null,null,tt.right.insert(c,et,_e)),tt.fixUp_()}removeMin_(){if(this.left.isEmpty())return SortedMap.EMPTY_NODE;let c=this;return!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.removeMin_(),null),c.fixUp_()}remove(c,et){let _e,tt;if(_e=this,et(c,_e.key)<0)!_e.left.isEmpty()&&!_e.left.isRed_()&&!_e.left.left.isRed_()&&(_e=_e.moveRedLeft_()),_e=_e.copy(null,null,null,_e.left.remove(c,et),null);else{if(_e.left.isRed_()&&(_e=_e.rotateRight_()),!_e.right.isEmpty()&&!_e.right.isRed_()&&!_e.right.left.isRed_()&&(_e=_e.moveRedRight_()),et(c,_e.key)===0){if(_e.right.isEmpty())return SortedMap.EMPTY_NODE;tt=_e.right.min_(),_e=_e.copy(tt.key,tt.value,null,null,_e.right.removeMin_())}_e=_e.copy(null,null,null,null,_e.right.remove(c,et))}return _e.fixUp_()}isRed_(){return this.color}fixUp_(){let c=this;return c.right.isRed_()&&!c.left.isRed_()&&(c=c.rotateLeft_()),c.left.isRed_()&&c.left.left.isRed_()&&(c=c.rotateRight_()),c.left.isRed_()&&c.right.isRed_()&&(c=c.colorFlip_()),c}moveRedLeft_(){let c=this.colorFlip_();return c.right.left.isRed_()&&(c=c.copy(null,null,null,null,c.right.rotateRight_()),c=c.rotateLeft_(),c=c.colorFlip_()),c}moveRedRight_(){let c=this.colorFlip_();return c.left.left.isRed_()&&(c=c.rotateRight_(),c=c.colorFlip_()),c}rotateLeft_(){const c=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,c,null)}rotateRight_(){const c=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,c)}colorFlip_(){const c=this.left.copy(null,null,!this.left.color,null,null),et=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,c,et)}checkMaxDepth_(){const c=this.check_();return Math.pow(2,c)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const c=this.left.check_();if(c!==this.right.check_())throw new Error("Black depths differ");return c+(this.isRed_()?0:1)}}LLRBNode.RED=!0;LLRBNode.BLACK=!1;class LLRBEmptyNode{copy(c,et,_e,tt,nt){return this}insert(c,et,_e){return new LLRBNode(c,et,null)}remove(c,et){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(c){return!1}reverseTraversal(c){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class SortedMap{constructor(c,et=SortedMap.EMPTY_NODE){this.comparator_=c,this.root_=et}insert(c,et){return new SortedMap(this.comparator_,this.root_.insert(c,et,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))}remove(c){return new SortedMap(this.comparator_,this.root_.remove(c,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))}get(c){let et,_e=this.root_;for(;!_e.isEmpty();){if(et=this.comparator_(c,_e.key),et===0)return _e.value;et<0?_e=_e.left:et>0&&(_e=_e.right)}return null}getPredecessorKey(c){let et,_e=this.root_,tt=null;for(;!_e.isEmpty();)if(et=this.comparator_(c,_e.key),et===0){if(_e.left.isEmpty())return tt?tt.key:null;for(_e=_e.left;!_e.right.isEmpty();)_e=_e.right;return _e.key}else et<0?_e=_e.left:et>0&&(tt=_e,_e=_e.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(c){return this.root_.inorderTraversal(c)}reverseTraversal(c){return this.root_.reverseTraversal(c)}getIterator(c){return new SortedMapIterator(this.root_,null,this.comparator_,!1,c)}getIteratorFrom(c,et){return new SortedMapIterator(this.root_,c,this.comparator_,!1,et)}getReverseIteratorFrom(c,et){return new SortedMapIterator(this.root_,c,this.comparator_,!0,et)}getReverseIterator(c){return new SortedMapIterator(this.root_,null,this.comparator_,!0,c)}}SortedMap.EMPTY_NODE=new LLRBEmptyNode;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NAME_ONLY_COMPARATOR(d,c){return nameCompare(d.name,c.name)}function NAME_COMPARATOR(d,c){return nameCompare(d,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MAX_NODE$2;function setMaxNode$1(d){MAX_NODE$2=d}const priorityHashText=function(d){return typeof d=="number"?"number:"+doubleToIEEE754String(d):"string:"+d},validatePriorityNode=function(d){if(d.isLeafNode()){const c=d.val();assert(typeof c=="string"||typeof c=="number"||typeof c=="object"&&contains$2(c,".sv"),"Priority must be a string or number.")}else assert(d===MAX_NODE$2||d.isEmpty(),"priority of unexpected type.");assert(d===MAX_NODE$2||d.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __childrenNodeConstructor;class LeafNode{constructor(c,et=LeafNode.__childrenNodeConstructor.EMPTY_NODE){this.value_=c,this.priorityNode_=et,this.lazyHash_=null,assert(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),validatePriorityNode(this.priorityNode_)}static set __childrenNodeConstructor(c){__childrenNodeConstructor=c}static get __childrenNodeConstructor(){return __childrenNodeConstructor}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(c){return new LeafNode(this.value_,c)}getImmediateChild(c){return c===".priority"?this.priorityNode_:LeafNode.__childrenNodeConstructor.EMPTY_NODE}getChild(c){return pathIsEmpty(c)?this:pathGetFront(c)===".priority"?this.priorityNode_:LeafNode.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(c,et){return null}updateImmediateChild(c,et){return c===".priority"?this.updatePriority(et):et.isEmpty()&&c!==".priority"?this:LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(c,et).updatePriority(this.priorityNode_)}updateChild(c,et){const _e=pathGetFront(c);return _e===null?et:et.isEmpty()&&_e!==".priority"?this:(assert(_e!==".priority"||pathGetLength(c)===1,".priority must be the last token in a path"),this.updateImmediateChild(_e,LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateChild(pathPopFront(c),et)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(c,et){return!1}val(c){return c&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let c="";this.priorityNode_.isEmpty()||(c+="priority:"+priorityHashText(this.priorityNode_.val())+":");const et=typeof this.value_;c+=et+":",et==="number"?c+=doubleToIEEE754String(this.value_):c+=this.value_,this.lazyHash_=sha1(c)}return this.lazyHash_}getValue(){return this.value_}compareTo(c){return c===LeafNode.__childrenNodeConstructor.EMPTY_NODE?1:c instanceof LeafNode.__childrenNodeConstructor?-1:(assert(c.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(c))}compareToLeafNode_(c){const et=typeof c.value_,_e=typeof this.value_,tt=LeafNode.VALUE_TYPE_ORDER.indexOf(et),nt=LeafNode.VALUE_TYPE_ORDER.indexOf(_e);return assert(tt>=0,"Unknown leaf type: "+et),assert(nt>=0,"Unknown leaf type: "+_e),tt===nt?_e==="object"?0:this.value_<c.value_?-1:this.value_===c.value_?0:1:nt-tt}withIndex(){return this}isIndexed(){return!0}equals(c){if(c===this)return!0;if(c.isLeafNode()){const et=c;return this.value_===et.value_&&this.priorityNode_.equals(et.priorityNode_)}else return!1}}LeafNode.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nodeFromJSON$1,MAX_NODE$1;function setNodeFromJSON(d){nodeFromJSON$1=d}function setMaxNode(d){MAX_NODE$1=d}class PriorityIndex extends Index{compare(c,et){const _e=c.node.getPriority(),tt=et.node.getPriority(),nt=_e.compareTo(tt);return nt===0?nameCompare(c.name,et.name):nt}isDefinedOn(c){return!c.getPriority().isEmpty()}indexedValueChanged(c,et){return!c.getPriority().equals(et.getPriority())}minPost(){return NamedNode.MIN}maxPost(){return new NamedNode(MAX_NAME,new LeafNode("[PRIORITY-POST]",MAX_NODE$1))}makePost(c,et){const _e=nodeFromJSON$1(c);return new NamedNode(et,new LeafNode("[PRIORITY-POST]",_e))}toString(){return".priority"}}const PRIORITY_INDEX=new PriorityIndex;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LOG_2=Math.log(2);class Base12Num{constructor(c){const et=nt=>parseInt(Math.log(nt)/LOG_2,10),_e=nt=>parseInt(Array(nt+1).join("1"),2);this.count=et(c+1),this.current_=this.count-1;const tt=_e(this.count);this.bits_=c+1&tt}nextBitIsOne(){const c=!(this.bits_&1<<this.current_);return this.current_--,c}}const buildChildSet=function(d,c,et,_e){d.sort(c);const tt=function(ot,st){const at=st-ot;let lt,ct;if(at===0)return null;if(at===1)return lt=d[ot],ct=et?et(lt):lt,new LLRBNode(ct,lt.node,LLRBNode.BLACK,null,null);{const ut=parseInt(at/2,10)+ot,dt=tt(ot,ut),ht=tt(ut+1,st);return lt=d[ut],ct=et?et(lt):lt,new LLRBNode(ct,lt.node,LLRBNode.BLACK,dt,ht)}},nt=function(ot){let st=null,at=null,lt=d.length;const ct=function(dt,ht){const yt=lt-dt,gt=lt;lt-=dt;const ft=tt(yt+1,gt),mt=d[yt],pt=et?et(mt):mt;ut(new LLRBNode(pt,mt.node,ht,null,ft))},ut=function(dt){st?(st.left=dt,st=dt):(at=dt,st=dt)};for(let dt=0;dt<ot.count;++dt){const ht=ot.nextBitIsOne(),yt=Math.pow(2,ot.count-(dt+1));ht?ct(yt,LLRBNode.BLACK):(ct(yt,LLRBNode.BLACK),ct(yt,LLRBNode.RED))}return at},rt=new Base12Num(d.length),it=nt(rt);return new SortedMap(_e||c,it)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _defaultIndexMap;const fallbackObject={};class IndexMap{constructor(c,et){this.indexes_=c,this.indexSet_=et}static get Default(){return assert(fallbackObject&&PRIORITY_INDEX,"ChildrenNode.ts has not been loaded"),_defaultIndexMap=_defaultIndexMap||new IndexMap({".priority":fallbackObject},{".priority":PRIORITY_INDEX}),_defaultIndexMap}get(c){const et=safeGet(this.indexes_,c);if(!et)throw new Error("No index defined for "+c);return et instanceof SortedMap?et:null}hasIndex(c){return contains$2(this.indexSet_,c.toString())}addIndex(c,et){assert(c!==KEY_INDEX,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const _e=[];let tt=!1;const nt=et.getIterator(NamedNode.Wrap);let rt=nt.getNext();for(;rt;)tt=tt||c.isDefinedOn(rt.node),_e.push(rt),rt=nt.getNext();let it;tt?it=buildChildSet(_e,c.getCompare()):it=fallbackObject;const ot=c.toString(),st=Object.assign({},this.indexSet_);st[ot]=c;const at=Object.assign({},this.indexes_);return at[ot]=it,new IndexMap(at,st)}addToIndexes(c,et){const _e=map$1(this.indexes_,(tt,nt)=>{const rt=safeGet(this.indexSet_,nt);if(assert(rt,"Missing index implementation for "+nt),tt===fallbackObject)if(rt.isDefinedOn(c.node)){const it=[],ot=et.getIterator(NamedNode.Wrap);let st=ot.getNext();for(;st;)st.name!==c.name&&it.push(st),st=ot.getNext();return it.push(c),buildChildSet(it,rt.getCompare())}else return fallbackObject;else{const it=et.get(c.name);let ot=tt;return it&&(ot=ot.remove(new NamedNode(c.name,it))),ot.insert(c,c.node)}});return new IndexMap(_e,this.indexSet_)}removeFromIndexes(c,et){const _e=map$1(this.indexes_,tt=>{if(tt===fallbackObject)return tt;{const nt=et.get(c.name);return nt?tt.remove(new NamedNode(c.name,nt)):tt}});return new IndexMap(_e,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EMPTY_NODE;class ChildrenNode{constructor(c,et,_e){this.children_=c,this.priorityNode_=et,this.indexMap_=_e,this.lazyHash_=null,this.priorityNode_&&validatePriorityNode(this.priorityNode_),this.children_.isEmpty()&&assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return EMPTY_NODE||(EMPTY_NODE=new ChildrenNode(new SortedMap(NAME_COMPARATOR),null,IndexMap.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||EMPTY_NODE}updatePriority(c){return this.children_.isEmpty()?this:new ChildrenNode(this.children_,c,this.indexMap_)}getImmediateChild(c){if(c===".priority")return this.getPriority();{const et=this.children_.get(c);return et===null?EMPTY_NODE:et}}getChild(c){const et=pathGetFront(c);return et===null?this:this.getImmediateChild(et).getChild(pathPopFront(c))}hasChild(c){return this.children_.get(c)!==null}updateImmediateChild(c,et){if(assert(et,"We should always be passing snapshot nodes"),c===".priority")return this.updatePriority(et);{const _e=new NamedNode(c,et);let tt,nt;et.isEmpty()?(tt=this.children_.remove(c),nt=this.indexMap_.removeFromIndexes(_e,this.children_)):(tt=this.children_.insert(c,et),nt=this.indexMap_.addToIndexes(_e,this.children_));const rt=tt.isEmpty()?EMPTY_NODE:this.priorityNode_;return new ChildrenNode(tt,rt,nt)}}updateChild(c,et){const _e=pathGetFront(c);if(_e===null)return et;{assert(pathGetFront(c)!==".priority"||pathGetLength(c)===1,".priority must be the last token in a path");const tt=this.getImmediateChild(_e).updateChild(pathPopFront(c),et);return this.updateImmediateChild(_e,tt)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(c){if(this.isEmpty())return null;const et={};let _e=0,tt=0,nt=!0;if(this.forEachChild(PRIORITY_INDEX,(rt,it)=>{et[rt]=it.val(c),_e++,nt&&ChildrenNode.INTEGER_REGEXP_.test(rt)?tt=Math.max(tt,Number(rt)):nt=!1}),!c&&nt&&tt<2*_e){const rt=[];for(const it in et)rt[it]=et[it];return rt}else return c&&!this.getPriority().isEmpty()&&(et[".priority"]=this.getPriority().val()),et}hash(){if(this.lazyHash_===null){let c="";this.getPriority().isEmpty()||(c+="priority:"+priorityHashText(this.getPriority().val())+":"),this.forEachChild(PRIORITY_INDEX,(et,_e)=>{const tt=_e.hash();tt!==""&&(c+=":"+et+":"+tt)}),this.lazyHash_=c===""?"":sha1(c)}return this.lazyHash_}getPredecessorChildName(c,et,_e){const tt=this.resolveIndex_(_e);if(tt){const nt=tt.getPredecessorKey(new NamedNode(c,et));return nt?nt.name:null}else return this.children_.getPredecessorKey(c)}getFirstChildName(c){const et=this.resolveIndex_(c);if(et){const _e=et.minKey();return _e&&_e.name}else return this.children_.minKey()}getFirstChild(c){const et=this.getFirstChildName(c);return et?new NamedNode(et,this.children_.get(et)):null}getLastChildName(c){const et=this.resolveIndex_(c);if(et){const _e=et.maxKey();return _e&&_e.name}else return this.children_.maxKey()}getLastChild(c){const et=this.getLastChildName(c);return et?new NamedNode(et,this.children_.get(et)):null}forEachChild(c,et){const _e=this.resolveIndex_(c);return _e?_e.inorderTraversal(tt=>et(tt.name,tt.node)):this.children_.inorderTraversal(et)}getIterator(c){return this.getIteratorFrom(c.minPost(),c)}getIteratorFrom(c,et){const _e=this.resolveIndex_(et);if(_e)return _e.getIteratorFrom(c,tt=>tt);{const tt=this.children_.getIteratorFrom(c.name,NamedNode.Wrap);let nt=tt.peek();for(;nt!=null&&et.compare(nt,c)<0;)tt.getNext(),nt=tt.peek();return tt}}getReverseIterator(c){return this.getReverseIteratorFrom(c.maxPost(),c)}getReverseIteratorFrom(c,et){const _e=this.resolveIndex_(et);if(_e)return _e.getReverseIteratorFrom(c,tt=>tt);{const tt=this.children_.getReverseIteratorFrom(c.name,NamedNode.Wrap);let nt=tt.peek();for(;nt!=null&&et.compare(nt,c)>0;)tt.getNext(),nt=tt.peek();return tt}}compareTo(c){return this.isEmpty()?c.isEmpty()?0:-1:c.isLeafNode()||c.isEmpty()?1:c===MAX_NODE?-1:0}withIndex(c){if(c===KEY_INDEX||this.indexMap_.hasIndex(c))return this;{const et=this.indexMap_.addIndex(c,this.children_);return new ChildrenNode(this.children_,this.priorityNode_,et)}}isIndexed(c){return c===KEY_INDEX||this.indexMap_.hasIndex(c)}equals(c){if(c===this)return!0;if(c.isLeafNode())return!1;{const et=c;if(this.getPriority().equals(et.getPriority()))if(this.children_.count()===et.children_.count()){const _e=this.getIterator(PRIORITY_INDEX),tt=et.getIterator(PRIORITY_INDEX);let nt=_e.getNext(),rt=tt.getNext();for(;nt&&rt;){if(nt.name!==rt.name||!nt.node.equals(rt.node))return!1;nt=_e.getNext(),rt=tt.getNext()}return nt===null&&rt===null}else return!1;else return!1}}resolveIndex_(c){return c===KEY_INDEX?null:this.indexMap_.get(c.toString())}}ChildrenNode.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class MaxNode extends ChildrenNode{constructor(){super(new SortedMap(NAME_COMPARATOR),ChildrenNode.EMPTY_NODE,IndexMap.Default)}compareTo(c){return c===this?0:1}equals(c){return c===this}getPriority(){return this}getImmediateChild(c){return ChildrenNode.EMPTY_NODE}isEmpty(){return!1}}const MAX_NODE=new MaxNode;Object.defineProperties(NamedNode,{MIN:{value:new NamedNode(MIN_NAME,ChildrenNode.EMPTY_NODE)},MAX:{value:new NamedNode(MAX_NAME,MAX_NODE)}});KeyIndex.__EMPTY_NODE=ChildrenNode.EMPTY_NODE;LeafNode.__childrenNodeConstructor=ChildrenNode;setMaxNode$1(MAX_NODE);setMaxNode(MAX_NODE);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const USE_HINZE=!0;function nodeFromJSON(d,c=null){if(d===null)return ChildrenNode.EMPTY_NODE;if(typeof d=="object"&&".priority"in d&&(c=d[".priority"]),assert(c===null||typeof c=="string"||typeof c=="number"||typeof c=="object"&&".sv"in c,"Invalid priority type found: "+typeof c),typeof d=="object"&&".value"in d&&d[".value"]!==null&&(d=d[".value"]),typeof d!="object"||".sv"in d){const et=d;return new LeafNode(et,nodeFromJSON(c))}if(!(d instanceof Array)&&USE_HINZE){const et=[];let _e=!1;if(each(d,(rt,it)=>{if(rt.substring(0,1)!=="."){const ot=nodeFromJSON(it);ot.isEmpty()||(_e=_e||!ot.getPriority().isEmpty(),et.push(new NamedNode(rt,ot)))}}),et.length===0)return ChildrenNode.EMPTY_NODE;const nt=buildChildSet(et,NAME_ONLY_COMPARATOR,rt=>rt.name,NAME_COMPARATOR);if(_e){const rt=buildChildSet(et,PRIORITY_INDEX.getCompare());return new ChildrenNode(nt,nodeFromJSON(c),new IndexMap({".priority":rt},{".priority":PRIORITY_INDEX}))}else return new ChildrenNode(nt,nodeFromJSON(c),IndexMap.Default)}else{let et=ChildrenNode.EMPTY_NODE;return each(d,(_e,tt)=>{if(contains$2(d,_e)&&_e.substring(0,1)!=="."){const nt=nodeFromJSON(tt);(nt.isLeafNode()||!nt.isEmpty())&&(et=et.updateImmediateChild(_e,nt))}}),et.updatePriority(nodeFromJSON(c))}}setNodeFromJSON(nodeFromJSON);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PathIndex extends Index{constructor(c){super(),this.indexPath_=c,assert(!pathIsEmpty(c)&&pathGetFront(c)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(c){return c.getChild(this.indexPath_)}isDefinedOn(c){return!c.getChild(this.indexPath_).isEmpty()}compare(c,et){const _e=this.extractChild(c.node),tt=this.extractChild(et.node),nt=_e.compareTo(tt);return nt===0?nameCompare(c.name,et.name):nt}makePost(c,et){const _e=nodeFromJSON(c),tt=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,_e);return new NamedNode(et,tt)}maxPost(){const c=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,MAX_NODE);return new NamedNode(MAX_NAME,c)}toString(){return pathSlice(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ValueIndex extends Index{compare(c,et){const _e=c.node.compareTo(et.node);return _e===0?nameCompare(c.name,et.name):_e}isDefinedOn(c){return!0}indexedValueChanged(c,et){return!c.equals(et)}minPost(){return NamedNode.MIN}maxPost(){return NamedNode.MAX}makePost(c,et){const _e=nodeFromJSON(c);return new NamedNode(et,_e)}toString(){return".value"}}const VALUE_INDEX=new ValueIndex;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function changeValue(d){return{type:"value",snapshotNode:d}}function changeChildAdded(d,c){return{type:"child_added",snapshotNode:c,childName:d}}function changeChildRemoved(d,c){return{type:"child_removed",snapshotNode:c,childName:d}}function changeChildChanged(d,c,et){return{type:"child_changed",snapshotNode:c,childName:d,oldSnap:et}}function changeChildMoved(d,c){return{type:"child_moved",snapshotNode:c,childName:d}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IndexedFilter{constructor(c){this.index_=c}updateChild(c,et,_e,tt,nt,rt){assert(c.isIndexed(this.index_),"A node must be indexed if only a child is updated");const it=c.getImmediateChild(et);return it.getChild(tt).equals(_e.getChild(tt))&&it.isEmpty()===_e.isEmpty()||(rt!=null&&(_e.isEmpty()?c.hasChild(et)?rt.trackChildChange(changeChildRemoved(et,it)):assert(c.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):it.isEmpty()?rt.trackChildChange(changeChildAdded(et,_e)):rt.trackChildChange(changeChildChanged(et,_e,it))),c.isLeafNode()&&_e.isEmpty())?c:c.updateImmediateChild(et,_e).withIndex(this.index_)}updateFullNode(c,et,_e){return _e!=null&&(c.isLeafNode()||c.forEachChild(PRIORITY_INDEX,(tt,nt)=>{et.hasChild(tt)||_e.trackChildChange(changeChildRemoved(tt,nt))}),et.isLeafNode()||et.forEachChild(PRIORITY_INDEX,(tt,nt)=>{if(c.hasChild(tt)){const rt=c.getImmediateChild(tt);rt.equals(nt)||_e.trackChildChange(changeChildChanged(tt,nt,rt))}else _e.trackChildChange(changeChildAdded(tt,nt))})),et.withIndex(this.index_)}updatePriority(c,et){return c.isEmpty()?ChildrenNode.EMPTY_NODE:c.updatePriority(et)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RangedFilter{constructor(c){this.indexedFilter_=new IndexedFilter(c.getIndex()),this.index_=c.getIndex(),this.startPost_=RangedFilter.getStartPost_(c),this.endPost_=RangedFilter.getEndPost_(c),this.startIsInclusive_=!c.startAfterSet_,this.endIsInclusive_=!c.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(c){const et=this.startIsInclusive_?this.index_.compare(this.getStartPost(),c)<=0:this.index_.compare(this.getStartPost(),c)<0,_e=this.endIsInclusive_?this.index_.compare(c,this.getEndPost())<=0:this.index_.compare(c,this.getEndPost())<0;return et&&_e}updateChild(c,et,_e,tt,nt,rt){return this.matches(new NamedNode(et,_e))||(_e=ChildrenNode.EMPTY_NODE),this.indexedFilter_.updateChild(c,et,_e,tt,nt,rt)}updateFullNode(c,et,_e){et.isLeafNode()&&(et=ChildrenNode.EMPTY_NODE);let tt=et.withIndex(this.index_);tt=tt.updatePriority(ChildrenNode.EMPTY_NODE);const nt=this;return et.forEachChild(PRIORITY_INDEX,(rt,it)=>{nt.matches(new NamedNode(rt,it))||(tt=tt.updateImmediateChild(rt,ChildrenNode.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(c,tt,_e)}updatePriority(c,et){return c}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(c){if(c.hasStart()){const et=c.getIndexStartName();return c.getIndex().makePost(c.getIndexStartValue(),et)}else return c.getIndex().minPost()}static getEndPost_(c){if(c.hasEnd()){const et=c.getIndexEndName();return c.getIndex().makePost(c.getIndexEndValue(),et)}else return c.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LimitedFilter{constructor(c){this.withinDirectionalStart=et=>this.reverse_?this.withinEndPost(et):this.withinStartPost(et),this.withinDirectionalEnd=et=>this.reverse_?this.withinStartPost(et):this.withinEndPost(et),this.withinStartPost=et=>{const _e=this.index_.compare(this.rangedFilter_.getStartPost(),et);return this.startIsInclusive_?_e<=0:_e<0},this.withinEndPost=et=>{const _e=this.index_.compare(et,this.rangedFilter_.getEndPost());return this.endIsInclusive_?_e<=0:_e<0},this.rangedFilter_=new RangedFilter(c),this.index_=c.getIndex(),this.limit_=c.getLimit(),this.reverse_=!c.isViewFromLeft(),this.startIsInclusive_=!c.startAfterSet_,this.endIsInclusive_=!c.endBeforeSet_}updateChild(c,et,_e,tt,nt,rt){return this.rangedFilter_.matches(new NamedNode(et,_e))||(_e=ChildrenNode.EMPTY_NODE),c.getImmediateChild(et).equals(_e)?c:c.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(c,et,_e,tt,nt,rt):this.fullLimitUpdateChild_(c,et,_e,nt,rt)}updateFullNode(c,et,_e){let tt;if(et.isLeafNode()||et.isEmpty())tt=ChildrenNode.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<et.numChildren()&&et.isIndexed(this.index_)){tt=ChildrenNode.EMPTY_NODE.withIndex(this.index_);let nt;this.reverse_?nt=et.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):nt=et.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let rt=0;for(;nt.hasNext()&&rt<this.limit_;){const it=nt.getNext();if(this.withinDirectionalStart(it))if(this.withinDirectionalEnd(it))tt=tt.updateImmediateChild(it.name,it.node),rt++;else break;else continue}}else{tt=et.withIndex(this.index_),tt=tt.updatePriority(ChildrenNode.EMPTY_NODE);let nt;this.reverse_?nt=tt.getReverseIterator(this.index_):nt=tt.getIterator(this.index_);let rt=0;for(;nt.hasNext();){const it=nt.getNext();rt<this.limit_&&this.withinDirectionalStart(it)&&this.withinDirectionalEnd(it)?rt++:tt=tt.updateImmediateChild(it.name,ChildrenNode.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(c,tt,_e)}updatePriority(c,et){return c}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(c,et,_e,tt,nt){let rt;if(this.reverse_){const lt=this.index_.getCompare();rt=(ct,ut)=>lt(ut,ct)}else rt=this.index_.getCompare();const it=c;assert(it.numChildren()===this.limit_,"");const ot=new NamedNode(et,_e),st=this.reverse_?it.getFirstChild(this.index_):it.getLastChild(this.index_),at=this.rangedFilter_.matches(ot);if(it.hasChild(et)){const lt=it.getImmediateChild(et);let ct=tt.getChildAfterChild(this.index_,st,this.reverse_);for(;ct!=null&&(ct.name===et||it.hasChild(ct.name));)ct=tt.getChildAfterChild(this.index_,ct,this.reverse_);const ut=ct==null?1:rt(ct,ot);if(at&&!_e.isEmpty()&&ut>=0)return nt!=null&&nt.trackChildChange(changeChildChanged(et,_e,lt)),it.updateImmediateChild(et,_e);{nt!=null&&nt.trackChildChange(changeChildRemoved(et,lt));const ht=it.updateImmediateChild(et,ChildrenNode.EMPTY_NODE);return ct!=null&&this.rangedFilter_.matches(ct)?(nt!=null&&nt.trackChildChange(changeChildAdded(ct.name,ct.node)),ht.updateImmediateChild(ct.name,ct.node)):ht}}else return _e.isEmpty()?c:at&&rt(st,ot)>=0?(nt!=null&&(nt.trackChildChange(changeChildRemoved(st.name,st.node)),nt.trackChildChange(changeChildAdded(et,_e))),it.updateImmediateChild(et,_e).updateImmediateChild(st.name,ChildrenNode.EMPTY_NODE)):c}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryParams{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=PRIORITY_INDEX}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:MIN_NAME}hasEnd(){return this.endSet_}getIndexEndValue(){return assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:MAX_NAME}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return assert(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===PRIORITY_INDEX}copy(){const c=new QueryParams;return c.limitSet_=this.limitSet_,c.limit_=this.limit_,c.startSet_=this.startSet_,c.startAfterSet_=this.startAfterSet_,c.indexStartValue_=this.indexStartValue_,c.startNameSet_=this.startNameSet_,c.indexStartName_=this.indexStartName_,c.endSet_=this.endSet_,c.endBeforeSet_=this.endBeforeSet_,c.indexEndValue_=this.indexEndValue_,c.endNameSet_=this.endNameSet_,c.indexEndName_=this.indexEndName_,c.index_=this.index_,c.viewFrom_=this.viewFrom_,c}}function queryParamsGetNodeFilter(d){return d.loadsAllData()?new IndexedFilter(d.getIndex()):d.hasLimit()?new LimitedFilter(d):new RangedFilter(d)}function queryParamsToRestQueryStringParameters(d){const c={};if(d.isDefault())return c;let et;if(d.index_===PRIORITY_INDEX?et="$priority":d.index_===VALUE_INDEX?et="$value":d.index_===KEY_INDEX?et="$key":(assert(d.index_ instanceof PathIndex,"Unrecognized index type!"),et=d.index_.toString()),c.orderBy=stringify(et),d.startSet_){const _e=d.startAfterSet_?"startAfter":"startAt";c[_e]=stringify(d.indexStartValue_),d.startNameSet_&&(c[_e]+=","+stringify(d.indexStartName_))}if(d.endSet_){const _e=d.endBeforeSet_?"endBefore":"endAt";c[_e]=stringify(d.indexEndValue_),d.endNameSet_&&(c[_e]+=","+stringify(d.indexEndName_))}return d.limitSet_&&(d.isViewFromLeft()?c.limitToFirst=d.limit_:c.limitToLast=d.limit_),c}function queryParamsGetQueryObject(d){const c={};if(d.startSet_&&(c.sp=d.indexStartValue_,d.startNameSet_&&(c.sn=d.indexStartName_),c.sin=!d.startAfterSet_),d.endSet_&&(c.ep=d.indexEndValue_,d.endNameSet_&&(c.en=d.indexEndName_),c.ein=!d.endBeforeSet_),d.limitSet_){c.l=d.limit_;let et=d.viewFrom_;et===""&&(d.isViewFromLeft()?et="l":et="r"),c.vf=et}return d.index_!==PRIORITY_INDEX&&(c.i=d.index_.toString()),c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ReadonlyRestClient extends ServerActions{constructor(c,et,_e,tt){super(),this.repoInfo_=c,this.onDataUpdate_=et,this.authTokenProvider_=_e,this.appCheckTokenProvider_=tt,this.log_=logWrapper("p:rest:"),this.listens_={}}reportStats(c){throw new Error("Method not implemented.")}static getListenId_(c,et){return et!==void 0?"tag$"+et:(assert(c._queryParams.isDefault(),"should have a tag if it's not a default query."),c._path.toString())}listen(c,et,_e,tt){const nt=c._path.toString();this.log_("Listen called for "+nt+" "+c._queryIdentifier);const rt=ReadonlyRestClient.getListenId_(c,_e),it={};this.listens_[rt]=it;const ot=queryParamsToRestQueryStringParameters(c._queryParams);this.restRequest_(nt+".json",ot,(st,at)=>{let lt=at;if(st===404&&(lt=null,st=null),st===null&&this.onDataUpdate_(nt,lt,!1,_e),safeGet(this.listens_,rt)===it){let ct;st?st===401?ct="permission_denied":ct="rest_error:"+st:ct="ok",tt(ct,null)}})}unlisten(c,et){const _e=ReadonlyRestClient.getListenId_(c,et);delete this.listens_[_e]}get(c){const et=queryParamsToRestQueryStringParameters(c._queryParams),_e=c._path.toString(),tt=new Deferred;return this.restRequest_(_e+".json",et,(nt,rt)=>{let it=rt;nt===404&&(it=null,nt=null),nt===null?(this.onDataUpdate_(_e,it,!1,null),tt.resolve(it)):tt.reject(new Error(it))}),tt.promise}refreshAuthToken(c){}restRequest_(c,et={},_e){return et.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([tt,nt])=>{tt&&tt.accessToken&&(et.auth=tt.accessToken),nt&&nt.token&&(et.ac=nt.token);const rt=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+c+"?ns="+this.repoInfo_.namespace+querystring(et);this.log_("Sending REST request for "+rt);const it=new XMLHttpRequest;it.onreadystatechange=()=>{if(_e&&it.readyState===4){this.log_("REST Response for "+rt+" received. status:",it.status,"response:",it.responseText);let ot=null;if(it.status>=200&&it.status<300){try{ot=jsonEval(it.responseText)}catch{warn("Failed to parse JSON response for "+rt+": "+it.responseText)}_e(null,ot)}else it.status!==401&&it.status!==404&&warn("Got unsuccessful REST response for "+rt+" Status: "+it.status),_e(it.status);_e=null}},it.open("GET",rt,!0),it.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotHolder{constructor(){this.rootNode_=ChildrenNode.EMPTY_NODE}getNode(c){return this.rootNode_.getChild(c)}updateSnapshot(c,et){this.rootNode_=this.rootNode_.updateChild(c,et)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function newSparseSnapshotTree(){return{value:null,children:new Map}}function sparseSnapshotTreeRemember(d,c,et){if(pathIsEmpty(c))d.value=et,d.children.clear();else if(d.value!==null)d.value=d.value.updateChild(c,et);else{const _e=pathGetFront(c);d.children.has(_e)||d.children.set(_e,newSparseSnapshotTree());const tt=d.children.get(_e);c=pathPopFront(c),sparseSnapshotTreeRemember(tt,c,et)}}function sparseSnapshotTreeForEachTree(d,c,et){d.value!==null?et(c,d.value):sparseSnapshotTreeForEachChild(d,(_e,tt)=>{const nt=new Path$1(c.toString()+"/"+_e);sparseSnapshotTreeForEachTree(tt,nt,et)})}function sparseSnapshotTreeForEachChild(d,c){d.children.forEach((et,_e)=>{c(_e,et)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StatsListener{constructor(c){this.collection_=c,this.last_=null}get(){const c=this.collection_.get(),et=Object.assign({},c);return this.last_&&each(this.last_,(_e,tt)=>{et[_e]=et[_e]-tt}),this.last_=c,et}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FIRST_STATS_MIN_TIME=10*1e3,FIRST_STATS_MAX_TIME=30*1e3,REPORT_STATS_INTERVAL=5*60*1e3;class StatsReporter{constructor(c,et){this.server_=et,this.statsToReport_={},this.statsListener_=new StatsListener(c);const _e=FIRST_STATS_MIN_TIME+(FIRST_STATS_MAX_TIME-FIRST_STATS_MIN_TIME)*Math.random();setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(_e))}reportStats_(){const c=this.statsListener_.get(),et={};let _e=!1;each(c,(tt,nt)=>{nt>0&&contains$2(this.statsToReport_,tt)&&(et[tt]=nt,_e=!0)}),_e&&this.server_.reportStats(et),setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(Math.random()*2*REPORT_STATS_INTERVAL))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OperationType;(function(d){d[d.OVERWRITE=0]="OVERWRITE",d[d.MERGE=1]="MERGE",d[d.ACK_USER_WRITE=2]="ACK_USER_WRITE",d[d.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(OperationType||(OperationType={}));function newOperationSourceUser(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function newOperationSourceServer(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function newOperationSourceServerTaggedQuery(d){return{fromUser:!1,fromServer:!0,queryId:d,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AckUserWrite{constructor(c,et,_e){this.path=c,this.affectedTree=et,this.revert=_e,this.type=OperationType.ACK_USER_WRITE,this.source=newOperationSourceUser()}operationForChild(c){if(pathIsEmpty(this.path)){if(this.affectedTree.value!=null)return assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const et=this.affectedTree.subtree(new Path$1(c));return new AckUserWrite(newEmptyPath(),et,this.revert)}}else return assert(pathGetFront(this.path)===c,"operationForChild called for unrelated child."),new AckUserWrite(pathPopFront(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ListenComplete{constructor(c,et){this.source=c,this.path=et,this.type=OperationType.LISTEN_COMPLETE}operationForChild(c){return pathIsEmpty(this.path)?new ListenComplete(this.source,newEmptyPath()):new ListenComplete(this.source,pathPopFront(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overwrite{constructor(c,et,_e){this.source=c,this.path=et,this.snap=_e,this.type=OperationType.OVERWRITE}operationForChild(c){return pathIsEmpty(this.path)?new Overwrite(this.source,newEmptyPath(),this.snap.getImmediateChild(c)):new Overwrite(this.source,pathPopFront(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Merge{constructor(c,et,_e){this.source=c,this.path=et,this.children=_e,this.type=OperationType.MERGE}operationForChild(c){if(pathIsEmpty(this.path)){const et=this.children.subtree(new Path$1(c));return et.isEmpty()?null:et.value?new Overwrite(this.source,newEmptyPath(),et.value):new Merge(this.source,newEmptyPath(),et)}else return assert(pathGetFront(this.path)===c,"Can't get a merge for a child not on the path of the operation"),new Merge(this.source,pathPopFront(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CacheNode{constructor(c,et,_e){this.node_=c,this.fullyInitialized_=et,this.filtered_=_e}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(c){if(pathIsEmpty(c))return this.isFullyInitialized()&&!this.filtered_;const et=pathGetFront(c);return this.isCompleteForChild(et)}isCompleteForChild(c){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(c)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EventGenerator{constructor(c){this.query_=c,this.index_=this.query_._queryParams.getIndex()}}function eventGeneratorGenerateEventsForChanges(d,c,et,_e){const tt=[],nt=[];return c.forEach(rt=>{rt.type==="child_changed"&&d.index_.indexedValueChanged(rt.oldSnap,rt.snapshotNode)&&nt.push(changeChildMoved(rt.childName,rt.snapshotNode))}),eventGeneratorGenerateEventsForType(d,tt,"child_removed",c,_e,et),eventGeneratorGenerateEventsForType(d,tt,"child_added",c,_e,et),eventGeneratorGenerateEventsForType(d,tt,"child_moved",nt,_e,et),eventGeneratorGenerateEventsForType(d,tt,"child_changed",c,_e,et),eventGeneratorGenerateEventsForType(d,tt,"value",c,_e,et),tt}function eventGeneratorGenerateEventsForType(d,c,et,_e,tt,nt){const rt=_e.filter(it=>it.type===et);rt.sort((it,ot)=>eventGeneratorCompareChanges(d,it,ot)),rt.forEach(it=>{const ot=eventGeneratorMaterializeSingleChange(d,it,nt);tt.forEach(st=>{st.respondsTo(it.type)&&c.push(st.createEvent(ot,d.query_))})})}function eventGeneratorMaterializeSingleChange(d,c,et){return c.type==="value"||c.type==="child_removed"||(c.prevName=et.getPredecessorChildName(c.childName,c.snapshotNode,d.index_)),c}function eventGeneratorCompareChanges(d,c,et){if(c.childName==null||et.childName==null)throw assertionError("Should only compare child_ events.");const _e=new NamedNode(c.childName,c.snapshotNode),tt=new NamedNode(et.childName,et.snapshotNode);return d.index_.compare(_e,tt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function newViewCache(d,c){return{eventCache:d,serverCache:c}}function viewCacheUpdateEventSnap(d,c,et,_e){return newViewCache(new CacheNode(c,et,_e),d.serverCache)}function viewCacheUpdateServerSnap(d,c,et,_e){return newViewCache(d.eventCache,new CacheNode(c,et,_e))}function viewCacheGetCompleteEventSnap(d){return d.eventCache.isFullyInitialized()?d.eventCache.getNode():null}function viewCacheGetCompleteServerSnap(d){return d.serverCache.isFullyInitialized()?d.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let emptyChildrenSingleton;const EmptyChildren=()=>(emptyChildrenSingleton||(emptyChildrenSingleton=new SortedMap(stringCompare)),emptyChildrenSingleton);class ImmutableTree{constructor(c,et=EmptyChildren()){this.value=c,this.children=et}static fromObject(c){let et=new ImmutableTree(null);return each(c,(_e,tt)=>{et=et.set(new Path$1(_e),tt)}),et}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(c,et){if(this.value!=null&&et(this.value))return{path:newEmptyPath(),value:this.value};if(pathIsEmpty(c))return null;{const _e=pathGetFront(c),tt=this.children.get(_e);if(tt!==null){const nt=tt.findRootMostMatchingPathAndValue(pathPopFront(c),et);return nt!=null?{path:pathChild(new Path$1(_e),nt.path),value:nt.value}:null}else return null}}findRootMostValueAndPath(c){return this.findRootMostMatchingPathAndValue(c,()=>!0)}subtree(c){if(pathIsEmpty(c))return this;{const et=pathGetFront(c),_e=this.children.get(et);return _e!==null?_e.subtree(pathPopFront(c)):new ImmutableTree(null)}}set(c,et){if(pathIsEmpty(c))return new ImmutableTree(et,this.children);{const _e=pathGetFront(c),nt=(this.children.get(_e)||new ImmutableTree(null)).set(pathPopFront(c),et),rt=this.children.insert(_e,nt);return new ImmutableTree(this.value,rt)}}remove(c){if(pathIsEmpty(c))return this.children.isEmpty()?new ImmutableTree(null):new ImmutableTree(null,this.children);{const et=pathGetFront(c),_e=this.children.get(et);if(_e){const tt=_e.remove(pathPopFront(c));let nt;return tt.isEmpty()?nt=this.children.remove(et):nt=this.children.insert(et,tt),this.value===null&&nt.isEmpty()?new ImmutableTree(null):new ImmutableTree(this.value,nt)}else return this}}get(c){if(pathIsEmpty(c))return this.value;{const et=pathGetFront(c),_e=this.children.get(et);return _e?_e.get(pathPopFront(c)):null}}setTree(c,et){if(pathIsEmpty(c))return et;{const _e=pathGetFront(c),nt=(this.children.get(_e)||new ImmutableTree(null)).setTree(pathPopFront(c),et);let rt;return nt.isEmpty()?rt=this.children.remove(_e):rt=this.children.insert(_e,nt),new ImmutableTree(this.value,rt)}}fold(c){return this.fold_(newEmptyPath(),c)}fold_(c,et){const _e={};return this.children.inorderTraversal((tt,nt)=>{_e[tt]=nt.fold_(pathChild(c,tt),et)}),et(c,this.value,_e)}findOnPath(c,et){return this.findOnPath_(c,newEmptyPath(),et)}findOnPath_(c,et,_e){const tt=this.value?_e(et,this.value):!1;if(tt)return tt;if(pathIsEmpty(c))return null;{const nt=pathGetFront(c),rt=this.children.get(nt);return rt?rt.findOnPath_(pathPopFront(c),pathChild(et,nt),_e):null}}foreachOnPath(c,et){return this.foreachOnPath_(c,newEmptyPath(),et)}foreachOnPath_(c,et,_e){if(pathIsEmpty(c))return this;{this.value&&_e(et,this.value);const tt=pathGetFront(c),nt=this.children.get(tt);return nt?nt.foreachOnPath_(pathPopFront(c),pathChild(et,tt),_e):new ImmutableTree(null)}}foreach(c){this.foreach_(newEmptyPath(),c)}foreach_(c,et){this.children.inorderTraversal((_e,tt)=>{tt.foreach_(pathChild(c,_e),et)}),this.value&&et(c,this.value)}foreachChild(c){this.children.inorderTraversal((et,_e)=>{_e.value&&c(et,_e.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CompoundWrite{constructor(c){this.writeTree_=c}static empty(){return new CompoundWrite(new ImmutableTree(null))}}function compoundWriteAddWrite(d,c,et){if(pathIsEmpty(c))return new CompoundWrite(new ImmutableTree(et));{const _e=d.writeTree_.findRootMostValueAndPath(c);if(_e!=null){const tt=_e.path;let nt=_e.value;const rt=newRelativePath(tt,c);return nt=nt.updateChild(rt,et),new CompoundWrite(d.writeTree_.set(tt,nt))}else{const tt=new ImmutableTree(et),nt=d.writeTree_.setTree(c,tt);return new CompoundWrite(nt)}}}function compoundWriteAddWrites(d,c,et){let _e=d;return each(et,(tt,nt)=>{_e=compoundWriteAddWrite(_e,pathChild(c,tt),nt)}),_e}function compoundWriteRemoveWrite(d,c){if(pathIsEmpty(c))return CompoundWrite.empty();{const et=d.writeTree_.setTree(c,new ImmutableTree(null));return new CompoundWrite(et)}}function compoundWriteHasCompleteWrite(d,c){return compoundWriteGetCompleteNode(d,c)!=null}function compoundWriteGetCompleteNode(d,c){const et=d.writeTree_.findRootMostValueAndPath(c);return et!=null?d.writeTree_.get(et.path).getChild(newRelativePath(et.path,c)):null}function compoundWriteGetCompleteChildren(d){const c=[],et=d.writeTree_.value;return et!=null?et.isLeafNode()||et.forEachChild(PRIORITY_INDEX,(_e,tt)=>{c.push(new NamedNode(_e,tt))}):d.writeTree_.children.inorderTraversal((_e,tt)=>{tt.value!=null&&c.push(new NamedNode(_e,tt.value))}),c}function compoundWriteChildCompoundWrite(d,c){if(pathIsEmpty(c))return d;{const et=compoundWriteGetCompleteNode(d,c);return et!=null?new CompoundWrite(new ImmutableTree(et)):new CompoundWrite(d.writeTree_.subtree(c))}}function compoundWriteIsEmpty(d){return d.writeTree_.isEmpty()}function compoundWriteApply(d,c){return applySubtreeWrite(newEmptyPath(),d.writeTree_,c)}function applySubtreeWrite(d,c,et){if(c.value!=null)return et.updateChild(d,c.value);{let _e=null;return c.children.inorderTraversal((tt,nt)=>{tt===".priority"?(assert(nt.value!==null,"Priority writes must always be leaf nodes"),_e=nt.value):et=applySubtreeWrite(pathChild(d,tt),nt,et)}),!et.getChild(d).isEmpty()&&_e!==null&&(et=et.updateChild(pathChild(d,".priority"),_e)),et}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function writeTreeChildWrites(d,c){return newWriteTreeRef(c,d)}function writeTreeAddOverwrite(d,c,et,_e,tt){assert(_e>d.lastWriteId,"Stacking an older write on top of newer ones"),tt===void 0&&(tt=!0),d.allWrites.push({path:c,snap:et,writeId:_e,visible:tt}),tt&&(d.visibleWrites=compoundWriteAddWrite(d.visibleWrites,c,et)),d.lastWriteId=_e}function writeTreeGetWrite(d,c){for(let et=0;et<d.allWrites.length;et++){const _e=d.allWrites[et];if(_e.writeId===c)return _e}return null}function writeTreeRemoveWrite(d,c){const et=d.allWrites.findIndex(it=>it.writeId===c);assert(et>=0,"removeWrite called with nonexistent writeId.");const _e=d.allWrites[et];d.allWrites.splice(et,1);let tt=_e.visible,nt=!1,rt=d.allWrites.length-1;for(;tt&&rt>=0;){const it=d.allWrites[rt];it.visible&&(rt>=et&&writeTreeRecordContainsPath_(it,_e.path)?tt=!1:pathContains(_e.path,it.path)&&(nt=!0)),rt--}if(tt){if(nt)return writeTreeResetTree_(d),!0;if(_e.snap)d.visibleWrites=compoundWriteRemoveWrite(d.visibleWrites,_e.path);else{const it=_e.children;each(it,ot=>{d.visibleWrites=compoundWriteRemoveWrite(d.visibleWrites,pathChild(_e.path,ot))})}return!0}else return!1}function writeTreeRecordContainsPath_(d,c){if(d.snap)return pathContains(d.path,c);for(const et in d.children)if(d.children.hasOwnProperty(et)&&pathContains(pathChild(d.path,et),c))return!0;return!1}function writeTreeResetTree_(d){d.visibleWrites=writeTreeLayerTree_(d.allWrites,writeTreeDefaultFilter_,newEmptyPath()),d.allWrites.length>0?d.lastWriteId=d.allWrites[d.allWrites.length-1].writeId:d.lastWriteId=-1}function writeTreeDefaultFilter_(d){return d.visible}function writeTreeLayerTree_(d,c,et){let _e=CompoundWrite.empty();for(let tt=0;tt<d.length;++tt){const nt=d[tt];if(c(nt)){const rt=nt.path;let it;if(nt.snap)pathContains(et,rt)?(it=newRelativePath(et,rt),_e=compoundWriteAddWrite(_e,it,nt.snap)):pathContains(rt,et)&&(it=newRelativePath(rt,et),_e=compoundWriteAddWrite(_e,newEmptyPath(),nt.snap.getChild(it)));else if(nt.children){if(pathContains(et,rt))it=newRelativePath(et,rt),_e=compoundWriteAddWrites(_e,it,nt.children);else if(pathContains(rt,et))if(it=newRelativePath(rt,et),pathIsEmpty(it))_e=compoundWriteAddWrites(_e,newEmptyPath(),nt.children);else{const ot=safeGet(nt.children,pathGetFront(it));if(ot){const st=ot.getChild(pathPopFront(it));_e=compoundWriteAddWrite(_e,newEmptyPath(),st)}}}else throw assertionError("WriteRecord should have .snap or .children")}}return _e}function writeTreeCalcCompleteEventCache(d,c,et,_e,tt){if(!_e&&!tt){const nt=compoundWriteGetCompleteNode(d.visibleWrites,c);if(nt!=null)return nt;{const rt=compoundWriteChildCompoundWrite(d.visibleWrites,c);if(compoundWriteIsEmpty(rt))return et;if(et==null&&!compoundWriteHasCompleteWrite(rt,newEmptyPath()))return null;{const it=et||ChildrenNode.EMPTY_NODE;return compoundWriteApply(rt,it)}}}else{const nt=compoundWriteChildCompoundWrite(d.visibleWrites,c);if(!tt&&compoundWriteIsEmpty(nt))return et;if(!tt&&et==null&&!compoundWriteHasCompleteWrite(nt,newEmptyPath()))return null;{const rt=function(st){return(st.visible||tt)&&(!_e||!~_e.indexOf(st.writeId))&&(pathContains(st.path,c)||pathContains(c,st.path))},it=writeTreeLayerTree_(d.allWrites,rt,c),ot=et||ChildrenNode.EMPTY_NODE;return compoundWriteApply(it,ot)}}}function writeTreeCalcCompleteEventChildren(d,c,et){let _e=ChildrenNode.EMPTY_NODE;const tt=compoundWriteGetCompleteNode(d.visibleWrites,c);if(tt)return tt.isLeafNode()||tt.forEachChild(PRIORITY_INDEX,(nt,rt)=>{_e=_e.updateImmediateChild(nt,rt)}),_e;if(et){const nt=compoundWriteChildCompoundWrite(d.visibleWrites,c);return et.forEachChild(PRIORITY_INDEX,(rt,it)=>{const ot=compoundWriteApply(compoundWriteChildCompoundWrite(nt,new Path$1(rt)),it);_e=_e.updateImmediateChild(rt,ot)}),compoundWriteGetCompleteChildren(nt).forEach(rt=>{_e=_e.updateImmediateChild(rt.name,rt.node)}),_e}else{const nt=compoundWriteChildCompoundWrite(d.visibleWrites,c);return compoundWriteGetCompleteChildren(nt).forEach(rt=>{_e=_e.updateImmediateChild(rt.name,rt.node)}),_e}}function writeTreeCalcEventCacheAfterServerOverwrite(d,c,et,_e,tt){assert(_e||tt,"Either existingEventSnap or existingServerSnap must exist");const nt=pathChild(c,et);if(compoundWriteHasCompleteWrite(d.visibleWrites,nt))return null;{const rt=compoundWriteChildCompoundWrite(d.visibleWrites,nt);return compoundWriteIsEmpty(rt)?tt.getChild(et):compoundWriteApply(rt,tt.getChild(et))}}function writeTreeCalcCompleteChild(d,c,et,_e){const tt=pathChild(c,et),nt=compoundWriteGetCompleteNode(d.visibleWrites,tt);if(nt!=null)return nt;if(_e.isCompleteForChild(et)){const rt=compoundWriteChildCompoundWrite(d.visibleWrites,tt);return compoundWriteApply(rt,_e.getNode().getImmediateChild(et))}else return null}function writeTreeShadowingWrite(d,c){return compoundWriteGetCompleteNode(d.visibleWrites,c)}function writeTreeCalcIndexedSlice(d,c,et,_e,tt,nt,rt){let it;const ot=compoundWriteChildCompoundWrite(d.visibleWrites,c),st=compoundWriteGetCompleteNode(ot,newEmptyPath());if(st!=null)it=st;else if(et!=null)it=compoundWriteApply(ot,et);else return[];if(it=it.withIndex(rt),!it.isEmpty()&&!it.isLeafNode()){const at=[],lt=rt.getCompare(),ct=nt?it.getReverseIteratorFrom(_e,rt):it.getIteratorFrom(_e,rt);let ut=ct.getNext();for(;ut&&at.length<tt;)lt(ut,_e)!==0&&at.push(ut),ut=ct.getNext();return at}else return[]}function newWriteTree(){return{visibleWrites:CompoundWrite.empty(),allWrites:[],lastWriteId:-1}}function writeTreeRefCalcCompleteEventCache(d,c,et,_e){return writeTreeCalcCompleteEventCache(d.writeTree,d.treePath,c,et,_e)}function writeTreeRefCalcCompleteEventChildren(d,c){return writeTreeCalcCompleteEventChildren(d.writeTree,d.treePath,c)}function writeTreeRefCalcEventCacheAfterServerOverwrite(d,c,et,_e){return writeTreeCalcEventCacheAfterServerOverwrite(d.writeTree,d.treePath,c,et,_e)}function writeTreeRefShadowingWrite(d,c){return writeTreeShadowingWrite(d.writeTree,pathChild(d.treePath,c))}function writeTreeRefCalcIndexedSlice(d,c,et,_e,tt,nt){return writeTreeCalcIndexedSlice(d.writeTree,d.treePath,c,et,_e,tt,nt)}function writeTreeRefCalcCompleteChild(d,c,et){return writeTreeCalcCompleteChild(d.writeTree,d.treePath,c,et)}function writeTreeRefChild(d,c){return newWriteTreeRef(pathChild(d.treePath,c),d.writeTree)}function newWriteTreeRef(d,c){return{treePath:d,writeTree:c}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ChildChangeAccumulator{constructor(){this.changeMap=new Map}trackChildChange(c){const et=c.type,_e=c.childName;assert(et==="child_added"||et==="child_changed"||et==="child_removed","Only child changes supported for tracking"),assert(_e!==".priority","Only non-priority child changes can be tracked.");const tt=this.changeMap.get(_e);if(tt){const nt=tt.type;if(et==="child_added"&&nt==="child_removed")this.changeMap.set(_e,changeChildChanged(_e,c.snapshotNode,tt.snapshotNode));else if(et==="child_removed"&&nt==="child_added")this.changeMap.delete(_e);else if(et==="child_removed"&&nt==="child_changed")this.changeMap.set(_e,changeChildRemoved(_e,tt.oldSnap));else if(et==="child_changed"&&nt==="child_added")this.changeMap.set(_e,changeChildAdded(_e,c.snapshotNode));else if(et==="child_changed"&&nt==="child_changed")this.changeMap.set(_e,changeChildChanged(_e,c.snapshotNode,tt.oldSnap));else throw assertionError("Illegal combination of changes: "+c+" occurred after "+tt)}else this.changeMap.set(_e,c)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NoCompleteChildSource_{getCompleteChild(c){return null}getChildAfterChild(c,et,_e){return null}}const NO_COMPLETE_CHILD_SOURCE=new NoCompleteChildSource_;class WriteTreeCompleteChildSource{constructor(c,et,_e=null){this.writes_=c,this.viewCache_=et,this.optCompleteServerCache_=_e}getCompleteChild(c){const et=this.viewCache_.eventCache;if(et.isCompleteForChild(c))return et.getNode().getImmediateChild(c);{const _e=this.optCompleteServerCache_!=null?new CacheNode(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return writeTreeRefCalcCompleteChild(this.writes_,c,_e)}}getChildAfterChild(c,et,_e){const tt=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:viewCacheGetCompleteServerSnap(this.viewCache_),nt=writeTreeRefCalcIndexedSlice(this.writes_,tt,et,1,_e,c);return nt.length===0?null:nt[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function newViewProcessor(d){return{filter:d}}function viewProcessorAssertIndexed(d,c){assert(c.eventCache.getNode().isIndexed(d.filter.getIndex()),"Event snap not indexed"),assert(c.serverCache.getNode().isIndexed(d.filter.getIndex()),"Server snap not indexed")}function viewProcessorApplyOperation(d,c,et,_e,tt){const nt=new ChildChangeAccumulator;let rt,it;if(et.type===OperationType.OVERWRITE){const st=et;st.source.fromUser?rt=viewProcessorApplyUserOverwrite(d,c,st.path,st.snap,_e,tt,nt):(assert(st.source.fromServer,"Unknown source."),it=st.source.tagged||c.serverCache.isFiltered()&&!pathIsEmpty(st.path),rt=viewProcessorApplyServerOverwrite(d,c,st.path,st.snap,_e,tt,it,nt))}else if(et.type===OperationType.MERGE){const st=et;st.source.fromUser?rt=viewProcessorApplyUserMerge(d,c,st.path,st.children,_e,tt,nt):(assert(st.source.fromServer,"Unknown source."),it=st.source.tagged||c.serverCache.isFiltered(),rt=viewProcessorApplyServerMerge(d,c,st.path,st.children,_e,tt,it,nt))}else if(et.type===OperationType.ACK_USER_WRITE){const st=et;st.revert?rt=viewProcessorRevertUserWrite(d,c,st.path,_e,tt,nt):rt=viewProcessorAckUserWrite(d,c,st.path,st.affectedTree,_e,tt,nt)}else if(et.type===OperationType.LISTEN_COMPLETE)rt=viewProcessorListenComplete(d,c,et.path,_e,nt);else throw assertionError("Unknown operation type: "+et.type);const ot=nt.getChanges();return viewProcessorMaybeAddValueEvent(c,rt,ot),{viewCache:rt,changes:ot}}function viewProcessorMaybeAddValueEvent(d,c,et){const _e=c.eventCache;if(_e.isFullyInitialized()){const tt=_e.getNode().isLeafNode()||_e.getNode().isEmpty(),nt=viewCacheGetCompleteEventSnap(d);(et.length>0||!d.eventCache.isFullyInitialized()||tt&&!_e.getNode().equals(nt)||!_e.getNode().getPriority().equals(nt.getPriority()))&&et.push(changeValue(viewCacheGetCompleteEventSnap(c)))}}function viewProcessorGenerateEventCacheAfterServerEvent(d,c,et,_e,tt,nt){const rt=c.eventCache;if(writeTreeRefShadowingWrite(_e,et)!=null)return c;{let it,ot;if(pathIsEmpty(et))if(assert(c.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),c.serverCache.isFiltered()){const st=viewCacheGetCompleteServerSnap(c),at=st instanceof ChildrenNode?st:ChildrenNode.EMPTY_NODE,lt=writeTreeRefCalcCompleteEventChildren(_e,at);it=d.filter.updateFullNode(c.eventCache.getNode(),lt,nt)}else{const st=writeTreeRefCalcCompleteEventCache(_e,viewCacheGetCompleteServerSnap(c));it=d.filter.updateFullNode(c.eventCache.getNode(),st,nt)}else{const st=pathGetFront(et);if(st===".priority"){assert(pathGetLength(et)===1,"Can't have a priority with additional path components");const at=rt.getNode();ot=c.serverCache.getNode();const lt=writeTreeRefCalcEventCacheAfterServerOverwrite(_e,et,at,ot);lt!=null?it=d.filter.updatePriority(at,lt):it=rt.getNode()}else{const at=pathPopFront(et);let lt;if(rt.isCompleteForChild(st)){ot=c.serverCache.getNode();const ct=writeTreeRefCalcEventCacheAfterServerOverwrite(_e,et,rt.getNode(),ot);ct!=null?lt=rt.getNode().getImmediateChild(st).updateChild(at,ct):lt=rt.getNode().getImmediateChild(st)}else lt=writeTreeRefCalcCompleteChild(_e,st,c.serverCache);lt!=null?it=d.filter.updateChild(rt.getNode(),st,lt,at,tt,nt):it=rt.getNode()}}return viewCacheUpdateEventSnap(c,it,rt.isFullyInitialized()||pathIsEmpty(et),d.filter.filtersNodes())}}function viewProcessorApplyServerOverwrite(d,c,et,_e,tt,nt,rt,it){const ot=c.serverCache;let st;const at=rt?d.filter:d.filter.getIndexedFilter();if(pathIsEmpty(et))st=at.updateFullNode(ot.getNode(),_e,null);else if(at.filtersNodes()&&!ot.isFiltered()){const ut=ot.getNode().updateChild(et,_e);st=at.updateFullNode(ot.getNode(),ut,null)}else{const ut=pathGetFront(et);if(!ot.isCompleteForPath(et)&&pathGetLength(et)>1)return c;const dt=pathPopFront(et),yt=ot.getNode().getImmediateChild(ut).updateChild(dt,_e);ut===".priority"?st=at.updatePriority(ot.getNode(),yt):st=at.updateChild(ot.getNode(),ut,yt,dt,NO_COMPLETE_CHILD_SOURCE,null)}const lt=viewCacheUpdateServerSnap(c,st,ot.isFullyInitialized()||pathIsEmpty(et),at.filtersNodes()),ct=new WriteTreeCompleteChildSource(tt,lt,nt);return viewProcessorGenerateEventCacheAfterServerEvent(d,lt,et,tt,ct,it)}function viewProcessorApplyUserOverwrite(d,c,et,_e,tt,nt,rt){const it=c.eventCache;let ot,st;const at=new WriteTreeCompleteChildSource(tt,c,nt);if(pathIsEmpty(et))st=d.filter.updateFullNode(c.eventCache.getNode(),_e,rt),ot=viewCacheUpdateEventSnap(c,st,!0,d.filter.filtersNodes());else{const lt=pathGetFront(et);if(lt===".priority")st=d.filter.updatePriority(c.eventCache.getNode(),_e),ot=viewCacheUpdateEventSnap(c,st,it.isFullyInitialized(),it.isFiltered());else{const ct=pathPopFront(et),ut=it.getNode().getImmediateChild(lt);let dt;if(pathIsEmpty(ct))dt=_e;else{const ht=at.getCompleteChild(lt);ht!=null?pathGetBack(ct)===".priority"&&ht.getChild(pathParent(ct)).isEmpty()?dt=ht:dt=ht.updateChild(ct,_e):dt=ChildrenNode.EMPTY_NODE}if(ut.equals(dt))ot=c;else{const ht=d.filter.updateChild(it.getNode(),lt,dt,ct,at,rt);ot=viewCacheUpdateEventSnap(c,ht,it.isFullyInitialized(),d.filter.filtersNodes())}}}return ot}function viewProcessorCacheHasChild(d,c){return d.eventCache.isCompleteForChild(c)}function viewProcessorApplyUserMerge(d,c,et,_e,tt,nt,rt){let it=c;return _e.foreach((ot,st)=>{const at=pathChild(et,ot);viewProcessorCacheHasChild(c,pathGetFront(at))&&(it=viewProcessorApplyUserOverwrite(d,it,at,st,tt,nt,rt))}),_e.foreach((ot,st)=>{const at=pathChild(et,ot);viewProcessorCacheHasChild(c,pathGetFront(at))||(it=viewProcessorApplyUserOverwrite(d,it,at,st,tt,nt,rt))}),it}function viewProcessorApplyMerge(d,c,et){return et.foreach((_e,tt)=>{c=c.updateChild(_e,tt)}),c}function viewProcessorApplyServerMerge(d,c,et,_e,tt,nt,rt,it){if(c.serverCache.getNode().isEmpty()&&!c.serverCache.isFullyInitialized())return c;let ot=c,st;pathIsEmpty(et)?st=_e:st=new ImmutableTree(null).setTree(et,_e);const at=c.serverCache.getNode();return st.children.inorderTraversal((lt,ct)=>{if(at.hasChild(lt)){const ut=c.serverCache.getNode().getImmediateChild(lt),dt=viewProcessorApplyMerge(d,ut,ct);ot=viewProcessorApplyServerOverwrite(d,ot,new Path$1(lt),dt,tt,nt,rt,it)}}),st.children.inorderTraversal((lt,ct)=>{const ut=!c.serverCache.isCompleteForChild(lt)&&ct.value===null;if(!at.hasChild(lt)&&!ut){const dt=c.serverCache.getNode().getImmediateChild(lt),ht=viewProcessorApplyMerge(d,dt,ct);ot=viewProcessorApplyServerOverwrite(d,ot,new Path$1(lt),ht,tt,nt,rt,it)}}),ot}function viewProcessorAckUserWrite(d,c,et,_e,tt,nt,rt){if(writeTreeRefShadowingWrite(tt,et)!=null)return c;const it=c.serverCache.isFiltered(),ot=c.serverCache;if(_e.value!=null){if(pathIsEmpty(et)&&ot.isFullyInitialized()||ot.isCompleteForPath(et))return viewProcessorApplyServerOverwrite(d,c,et,ot.getNode().getChild(et),tt,nt,it,rt);if(pathIsEmpty(et)){let st=new ImmutableTree(null);return ot.getNode().forEachChild(KEY_INDEX,(at,lt)=>{st=st.set(new Path$1(at),lt)}),viewProcessorApplyServerMerge(d,c,et,st,tt,nt,it,rt)}else return c}else{let st=new ImmutableTree(null);return _e.foreach((at,lt)=>{const ct=pathChild(et,at);ot.isCompleteForPath(ct)&&(st=st.set(at,ot.getNode().getChild(ct)))}),viewProcessorApplyServerMerge(d,c,et,st,tt,nt,it,rt)}}function viewProcessorListenComplete(d,c,et,_e,tt){const nt=c.serverCache,rt=viewCacheUpdateServerSnap(c,nt.getNode(),nt.isFullyInitialized()||pathIsEmpty(et),nt.isFiltered());return viewProcessorGenerateEventCacheAfterServerEvent(d,rt,et,_e,NO_COMPLETE_CHILD_SOURCE,tt)}function viewProcessorRevertUserWrite(d,c,et,_e,tt,nt){let rt;if(writeTreeRefShadowingWrite(_e,et)!=null)return c;{const it=new WriteTreeCompleteChildSource(_e,c,tt),ot=c.eventCache.getNode();let st;if(pathIsEmpty(et)||pathGetFront(et)===".priority"){let at;if(c.serverCache.isFullyInitialized())at=writeTreeRefCalcCompleteEventCache(_e,viewCacheGetCompleteServerSnap(c));else{const lt=c.serverCache.getNode();assert(lt instanceof ChildrenNode,"serverChildren would be complete if leaf node"),at=writeTreeRefCalcCompleteEventChildren(_e,lt)}at=at,st=d.filter.updateFullNode(ot,at,nt)}else{const at=pathGetFront(et);let lt=writeTreeRefCalcCompleteChild(_e,at,c.serverCache);lt==null&&c.serverCache.isCompleteForChild(at)&&(lt=ot.getImmediateChild(at)),lt!=null?st=d.filter.updateChild(ot,at,lt,pathPopFront(et),it,nt):c.eventCache.getNode().hasChild(at)?st=d.filter.updateChild(ot,at,ChildrenNode.EMPTY_NODE,pathPopFront(et),it,nt):st=ot,st.isEmpty()&&c.serverCache.isFullyInitialized()&&(rt=writeTreeRefCalcCompleteEventCache(_e,viewCacheGetCompleteServerSnap(c)),rt.isLeafNode()&&(st=d.filter.updateFullNode(st,rt,nt)))}return rt=c.serverCache.isFullyInitialized()||writeTreeRefShadowingWrite(_e,newEmptyPath())!=null,viewCacheUpdateEventSnap(c,st,rt,d.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class View{constructor(c,et){this.query_=c,this.eventRegistrations_=[];const _e=this.query_._queryParams,tt=new IndexedFilter(_e.getIndex()),nt=queryParamsGetNodeFilter(_e);this.processor_=newViewProcessor(nt);const rt=et.serverCache,it=et.eventCache,ot=tt.updateFullNode(ChildrenNode.EMPTY_NODE,rt.getNode(),null),st=nt.updateFullNode(ChildrenNode.EMPTY_NODE,it.getNode(),null),at=new CacheNode(ot,rt.isFullyInitialized(),tt.filtersNodes()),lt=new CacheNode(st,it.isFullyInitialized(),nt.filtersNodes());this.viewCache_=newViewCache(lt,at),this.eventGenerator_=new EventGenerator(this.query_)}get query(){return this.query_}}function viewGetServerCache(d){return d.viewCache_.serverCache.getNode()}function viewGetCompleteNode(d){return viewCacheGetCompleteEventSnap(d.viewCache_)}function viewGetCompleteServerCache(d,c){const et=viewCacheGetCompleteServerSnap(d.viewCache_);return et&&(d.query._queryParams.loadsAllData()||!pathIsEmpty(c)&&!et.getImmediateChild(pathGetFront(c)).isEmpty())?et.getChild(c):null}function viewIsEmpty(d){return d.eventRegistrations_.length===0}function viewAddEventRegistration(d,c){d.eventRegistrations_.push(c)}function viewRemoveEventRegistration(d,c,et){const _e=[];if(et){assert(c==null,"A cancel should cancel all event registrations.");const tt=d.query._path;d.eventRegistrations_.forEach(nt=>{const rt=nt.createCancelEvent(et,tt);rt&&_e.push(rt)})}if(c){let tt=[];for(let nt=0;nt<d.eventRegistrations_.length;++nt){const rt=d.eventRegistrations_[nt];if(!rt.matches(c))tt.push(rt);else if(c.hasAnyCallback()){tt=tt.concat(d.eventRegistrations_.slice(nt+1));break}}d.eventRegistrations_=tt}else d.eventRegistrations_=[];return _e}function viewApplyOperation(d,c,et,_e){c.type===OperationType.MERGE&&c.source.queryId!==null&&(assert(viewCacheGetCompleteServerSnap(d.viewCache_),"We should always have a full cache before handling merges"),assert(viewCacheGetCompleteEventSnap(d.viewCache_),"Missing event cache, even though we have a server cache"));const tt=d.viewCache_,nt=viewProcessorApplyOperation(d.processor_,tt,c,et,_e);return viewProcessorAssertIndexed(d.processor_,nt.viewCache),assert(nt.viewCache.serverCache.isFullyInitialized()||!tt.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),d.viewCache_=nt.viewCache,viewGenerateEventsForChanges_(d,nt.changes,nt.viewCache.eventCache.getNode(),null)}function viewGetInitialEvents(d,c){const et=d.viewCache_.eventCache,_e=[];return et.getNode().isLeafNode()||et.getNode().forEachChild(PRIORITY_INDEX,(nt,rt)=>{_e.push(changeChildAdded(nt,rt))}),et.isFullyInitialized()&&_e.push(changeValue(et.getNode())),viewGenerateEventsForChanges_(d,_e,et.getNode(),c)}function viewGenerateEventsForChanges_(d,c,et,_e){const tt=_e?[_e]:d.eventRegistrations_;return eventGeneratorGenerateEventsForChanges(d.eventGenerator_,c,et,tt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let referenceConstructor$1;class SyncPoint{constructor(){this.views=new Map}}function syncPointSetReferenceConstructor(d){assert(!referenceConstructor$1,"__referenceConstructor has already been defined"),referenceConstructor$1=d}function syncPointGetReferenceConstructor(){return assert(referenceConstructor$1,"Reference.ts has not been loaded"),referenceConstructor$1}function syncPointIsEmpty(d){return d.views.size===0}function syncPointApplyOperation(d,c,et,_e){const tt=c.source.queryId;if(tt!==null){const nt=d.views.get(tt);return assert(nt!=null,"SyncTree gave us an op for an invalid query."),viewApplyOperation(nt,c,et,_e)}else{let nt=[];for(const rt of d.views.values())nt=nt.concat(viewApplyOperation(rt,c,et,_e));return nt}}function syncPointGetView(d,c,et,_e,tt){const nt=c._queryIdentifier,rt=d.views.get(nt);if(!rt){let it=writeTreeRefCalcCompleteEventCache(et,tt?_e:null),ot=!1;it?ot=!0:_e instanceof ChildrenNode?(it=writeTreeRefCalcCompleteEventChildren(et,_e),ot=!1):(it=ChildrenNode.EMPTY_NODE,ot=!1);const st=newViewCache(new CacheNode(it,ot,!1),new CacheNode(_e,tt,!1));return new View(c,st)}return rt}function syncPointAddEventRegistration(d,c,et,_e,tt,nt){const rt=syncPointGetView(d,c,_e,tt,nt);return d.views.has(c._queryIdentifier)||d.views.set(c._queryIdentifier,rt),viewAddEventRegistration(rt,et),viewGetInitialEvents(rt,et)}function syncPointRemoveEventRegistration(d,c,et,_e){const tt=c._queryIdentifier,nt=[];let rt=[];const it=syncPointHasCompleteView(d);if(tt==="default")for(const[ot,st]of d.views.entries())rt=rt.concat(viewRemoveEventRegistration(st,et,_e)),viewIsEmpty(st)&&(d.views.delete(ot),st.query._queryParams.loadsAllData()||nt.push(st.query));else{const ot=d.views.get(tt);ot&&(rt=rt.concat(viewRemoveEventRegistration(ot,et,_e)),viewIsEmpty(ot)&&(d.views.delete(tt),ot.query._queryParams.loadsAllData()||nt.push(ot.query)))}return it&&!syncPointHasCompleteView(d)&&nt.push(new(syncPointGetReferenceConstructor())(c._repo,c._path)),{removed:nt,events:rt}}function syncPointGetQueryViews(d){const c=[];for(const et of d.views.values())et.query._queryParams.loadsAllData()||c.push(et);return c}function syncPointGetCompleteServerCache(d,c){let et=null;for(const _e of d.views.values())et=et||viewGetCompleteServerCache(_e,c);return et}function syncPointViewForQuery(d,c){if(c._queryParams.loadsAllData())return syncPointGetCompleteView(d);{const _e=c._queryIdentifier;return d.views.get(_e)}}function syncPointViewExistsForQuery(d,c){return syncPointViewForQuery(d,c)!=null}function syncPointHasCompleteView(d){return syncPointGetCompleteView(d)!=null}function syncPointGetCompleteView(d){for(const c of d.views.values())if(c.query._queryParams.loadsAllData())return c;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let referenceConstructor;function syncTreeSetReferenceConstructor(d){assert(!referenceConstructor,"__referenceConstructor has already been defined"),referenceConstructor=d}function syncTreeGetReferenceConstructor(){return assert(referenceConstructor,"Reference.ts has not been loaded"),referenceConstructor}let syncTreeNextQueryTag_=1;class SyncTree{constructor(c){this.listenProvider_=c,this.syncPointTree_=new ImmutableTree(null),this.pendingWriteTree_=newWriteTree(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function syncTreeApplyUserOverwrite(d,c,et,_e,tt){return writeTreeAddOverwrite(d.pendingWriteTree_,c,et,_e,tt),tt?syncTreeApplyOperationToSyncPoints_(d,new Overwrite(newOperationSourceUser(),c,et)):[]}function syncTreeAckUserWrite(d,c,et=!1){const _e=writeTreeGetWrite(d.pendingWriteTree_,c);if(writeTreeRemoveWrite(d.pendingWriteTree_,c)){let nt=new ImmutableTree(null);return _e.snap!=null?nt=nt.set(newEmptyPath(),!0):each(_e.children,rt=>{nt=nt.set(new Path$1(rt),!0)}),syncTreeApplyOperationToSyncPoints_(d,new AckUserWrite(_e.path,nt,et))}else return[]}function syncTreeApplyServerOverwrite(d,c,et){return syncTreeApplyOperationToSyncPoints_(d,new Overwrite(newOperationSourceServer(),c,et))}function syncTreeApplyServerMerge(d,c,et){const _e=ImmutableTree.fromObject(et);return syncTreeApplyOperationToSyncPoints_(d,new Merge(newOperationSourceServer(),c,_e))}function syncTreeApplyListenComplete(d,c){return syncTreeApplyOperationToSyncPoints_(d,new ListenComplete(newOperationSourceServer(),c))}function syncTreeApplyTaggedListenComplete(d,c,et){const _e=syncTreeQueryKeyForTag_(d,et);if(_e){const tt=syncTreeParseQueryKey_(_e),nt=tt.path,rt=tt.queryId,it=newRelativePath(nt,c),ot=new ListenComplete(newOperationSourceServerTaggedQuery(rt),it);return syncTreeApplyTaggedOperation_(d,nt,ot)}else return[]}function syncTreeRemoveEventRegistration(d,c,et,_e,tt=!1){const nt=c._path,rt=d.syncPointTree_.get(nt);let it=[];if(rt&&(c._queryIdentifier==="default"||syncPointViewExistsForQuery(rt,c))){const ot=syncPointRemoveEventRegistration(rt,c,et,_e);syncPointIsEmpty(rt)&&(d.syncPointTree_=d.syncPointTree_.remove(nt));const st=ot.removed;if(it=ot.events,!tt){const at=st.findIndex(ct=>ct._queryParams.loadsAllData())!==-1,lt=d.syncPointTree_.findOnPath(nt,(ct,ut)=>syncPointHasCompleteView(ut));if(at&&!lt){const ct=d.syncPointTree_.subtree(nt);if(!ct.isEmpty()){const ut=syncTreeCollectDistinctViewsForSubTree_(ct);for(let dt=0;dt<ut.length;++dt){const ht=ut[dt],yt=ht.query,gt=syncTreeCreateListenerForView_(d,ht);d.listenProvider_.startListening(syncTreeQueryForListening_(yt),syncTreeTagForQuery(d,yt),gt.hashFn,gt.onComplete)}}}!lt&&st.length>0&&!_e&&(at?d.listenProvider_.stopListening(syncTreeQueryForListening_(c),null):st.forEach(ct=>{const ut=d.queryToTagMap.get(syncTreeMakeQueryKey_(ct));d.listenProvider_.stopListening(syncTreeQueryForListening_(ct),ut)}))}syncTreeRemoveTags_(d,st)}return it}function syncTreeApplyTaggedQueryOverwrite(d,c,et,_e){const tt=syncTreeQueryKeyForTag_(d,_e);if(tt!=null){const nt=syncTreeParseQueryKey_(tt),rt=nt.path,it=nt.queryId,ot=newRelativePath(rt,c),st=new Overwrite(newOperationSourceServerTaggedQuery(it),ot,et);return syncTreeApplyTaggedOperation_(d,rt,st)}else return[]}function syncTreeApplyTaggedQueryMerge(d,c,et,_e){const tt=syncTreeQueryKeyForTag_(d,_e);if(tt){const nt=syncTreeParseQueryKey_(tt),rt=nt.path,it=nt.queryId,ot=newRelativePath(rt,c),st=ImmutableTree.fromObject(et),at=new Merge(newOperationSourceServerTaggedQuery(it),ot,st);return syncTreeApplyTaggedOperation_(d,rt,at)}else return[]}function syncTreeAddEventRegistration(d,c,et,_e=!1){const tt=c._path;let nt=null,rt=!1;d.syncPointTree_.foreachOnPath(tt,(ct,ut)=>{const dt=newRelativePath(ct,tt);nt=nt||syncPointGetCompleteServerCache(ut,dt),rt=rt||syncPointHasCompleteView(ut)});let it=d.syncPointTree_.get(tt);it?(rt=rt||syncPointHasCompleteView(it),nt=nt||syncPointGetCompleteServerCache(it,newEmptyPath())):(it=new SyncPoint,d.syncPointTree_=d.syncPointTree_.set(tt,it));let ot;nt!=null?ot=!0:(ot=!1,nt=ChildrenNode.EMPTY_NODE,d.syncPointTree_.subtree(tt).foreachChild((ut,dt)=>{const ht=syncPointGetCompleteServerCache(dt,newEmptyPath());ht&&(nt=nt.updateImmediateChild(ut,ht))}));const st=syncPointViewExistsForQuery(it,c);if(!st&&!c._queryParams.loadsAllData()){const ct=syncTreeMakeQueryKey_(c);assert(!d.queryToTagMap.has(ct),"View does not exist, but we have a tag");const ut=syncTreeGetNextQueryTag_();d.queryToTagMap.set(ct,ut),d.tagToQueryMap.set(ut,ct)}const at=writeTreeChildWrites(d.pendingWriteTree_,tt);let lt=syncPointAddEventRegistration(it,c,et,at,nt,ot);if(!st&&!rt&&!_e){const ct=syncPointViewForQuery(it,c);lt=lt.concat(syncTreeSetupListener_(d,c,ct))}return lt}function syncTreeCalcCompleteEventCache(d,c,et){const tt=d.pendingWriteTree_,nt=d.syncPointTree_.findOnPath(c,(rt,it)=>{const ot=newRelativePath(rt,c),st=syncPointGetCompleteServerCache(it,ot);if(st)return st});return writeTreeCalcCompleteEventCache(tt,c,nt,et,!0)}function syncTreeGetServerValue(d,c){const et=c._path;let _e=null;d.syncPointTree_.foreachOnPath(et,(st,at)=>{const lt=newRelativePath(st,et);_e=_e||syncPointGetCompleteServerCache(at,lt)});let tt=d.syncPointTree_.get(et);tt?_e=_e||syncPointGetCompleteServerCache(tt,newEmptyPath()):(tt=new SyncPoint,d.syncPointTree_=d.syncPointTree_.set(et,tt));const nt=_e!=null,rt=nt?new CacheNode(_e,!0,!1):null,it=writeTreeChildWrites(d.pendingWriteTree_,c._path),ot=syncPointGetView(tt,c,it,nt?rt.getNode():ChildrenNode.EMPTY_NODE,nt);return viewGetCompleteNode(ot)}function syncTreeApplyOperationToSyncPoints_(d,c){return syncTreeApplyOperationHelper_(c,d.syncPointTree_,null,writeTreeChildWrites(d.pendingWriteTree_,newEmptyPath()))}function syncTreeApplyOperationHelper_(d,c,et,_e){if(pathIsEmpty(d.path))return syncTreeApplyOperationDescendantsHelper_(d,c,et,_e);{const tt=c.get(newEmptyPath());et==null&&tt!=null&&(et=syncPointGetCompleteServerCache(tt,newEmptyPath()));let nt=[];const rt=pathGetFront(d.path),it=d.operationForChild(rt),ot=c.children.get(rt);if(ot&&it){const st=et?et.getImmediateChild(rt):null,at=writeTreeRefChild(_e,rt);nt=nt.concat(syncTreeApplyOperationHelper_(it,ot,st,at))}return tt&&(nt=nt.concat(syncPointApplyOperation(tt,d,_e,et))),nt}}function syncTreeApplyOperationDescendantsHelper_(d,c,et,_e){const tt=c.get(newEmptyPath());et==null&&tt!=null&&(et=syncPointGetCompleteServerCache(tt,newEmptyPath()));let nt=[];return c.children.inorderTraversal((rt,it)=>{const ot=et?et.getImmediateChild(rt):null,st=writeTreeRefChild(_e,rt),at=d.operationForChild(rt);at&&(nt=nt.concat(syncTreeApplyOperationDescendantsHelper_(at,it,ot,st)))}),tt&&(nt=nt.concat(syncPointApplyOperation(tt,d,_e,et))),nt}function syncTreeCreateListenerForView_(d,c){const et=c.query,_e=syncTreeTagForQuery(d,et);return{hashFn:()=>(viewGetServerCache(c)||ChildrenNode.EMPTY_NODE).hash(),onComplete:tt=>{if(tt==="ok")return _e?syncTreeApplyTaggedListenComplete(d,et._path,_e):syncTreeApplyListenComplete(d,et._path);{const nt=errorForServerCode(tt,et);return syncTreeRemoveEventRegistration(d,et,null,nt)}}}}function syncTreeTagForQuery(d,c){const et=syncTreeMakeQueryKey_(c);return d.queryToTagMap.get(et)}function syncTreeMakeQueryKey_(d){return d._path.toString()+"$"+d._queryIdentifier}function syncTreeQueryKeyForTag_(d,c){return d.tagToQueryMap.get(c)}function syncTreeParseQueryKey_(d){const c=d.indexOf("$");return assert(c!==-1&&c<d.length-1,"Bad queryKey."),{queryId:d.substr(c+1),path:new Path$1(d.substr(0,c))}}function syncTreeApplyTaggedOperation_(d,c,et){const _e=d.syncPointTree_.get(c);assert(_e,"Missing sync point for query tag that we're tracking");const tt=writeTreeChildWrites(d.pendingWriteTree_,c);return syncPointApplyOperation(_e,et,tt,null)}function syncTreeCollectDistinctViewsForSubTree_(d){return d.fold((c,et,_e)=>{if(et&&syncPointHasCompleteView(et))return[syncPointGetCompleteView(et)];{let tt=[];return et&&(tt=syncPointGetQueryViews(et)),each(_e,(nt,rt)=>{tt=tt.concat(rt)}),tt}})}function syncTreeQueryForListening_(d){return d._queryParams.loadsAllData()&&!d._queryParams.isDefault()?new(syncTreeGetReferenceConstructor())(d._repo,d._path):d}function syncTreeRemoveTags_(d,c){for(let et=0;et<c.length;++et){const _e=c[et];if(!_e._queryParams.loadsAllData()){const tt=syncTreeMakeQueryKey_(_e),nt=d.queryToTagMap.get(tt);d.queryToTagMap.delete(tt),d.tagToQueryMap.delete(nt)}}}function syncTreeGetNextQueryTag_(){return syncTreeNextQueryTag_++}function syncTreeSetupListener_(d,c,et){const _e=c._path,tt=syncTreeTagForQuery(d,c),nt=syncTreeCreateListenerForView_(d,et),rt=d.listenProvider_.startListening(syncTreeQueryForListening_(c),tt,nt.hashFn,nt.onComplete),it=d.syncPointTree_.subtree(_e);if(tt)assert(!syncPointHasCompleteView(it.value),"If we're adding a query, it shouldn't be shadowed");else{const ot=it.fold((st,at,lt)=>{if(!pathIsEmpty(st)&&at&&syncPointHasCompleteView(at))return[syncPointGetCompleteView(at).query];{let ct=[];return at&&(ct=ct.concat(syncPointGetQueryViews(at).map(ut=>ut.query))),each(lt,(ut,dt)=>{ct=ct.concat(dt)}),ct}});for(let st=0;st<ot.length;++st){const at=ot[st];d.listenProvider_.stopListening(syncTreeQueryForListening_(at),syncTreeTagForQuery(d,at))}}return rt}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistingValueProvider{constructor(c){this.node_=c}getImmediateChild(c){const et=this.node_.getImmediateChild(c);return new ExistingValueProvider(et)}node(){return this.node_}}class DeferredValueProvider{constructor(c,et){this.syncTree_=c,this.path_=et}getImmediateChild(c){const et=pathChild(this.path_,c);return new DeferredValueProvider(this.syncTree_,et)}node(){return syncTreeCalcCompleteEventCache(this.syncTree_,this.path_)}}const generateWithValues=function(d){return d=d||{},d.timestamp=d.timestamp||new Date().getTime(),d},resolveDeferredLeafValue=function(d,c,et){if(!d||typeof d!="object")return d;if(assert(".sv"in d,"Unexpected leaf node or priority contents"),typeof d[".sv"]=="string")return resolveScalarDeferredValue(d[".sv"],c,et);if(typeof d[".sv"]=="object")return resolveComplexDeferredValue(d[".sv"],c);assert(!1,"Unexpected server value: "+JSON.stringify(d,null,2))},resolveScalarDeferredValue=function(d,c,et){switch(d){case"timestamp":return et.timestamp;default:assert(!1,"Unexpected server value: "+d)}},resolveComplexDeferredValue=function(d,c,et){d.hasOwnProperty("increment")||assert(!1,"Unexpected server value: "+JSON.stringify(d,null,2));const _e=d.increment;typeof _e!="number"&&assert(!1,"Unexpected increment value: "+_e);const tt=c.node();if(assert(tt!==null&&typeof tt<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!tt.isLeafNode())return _e;const rt=tt.getValue();return typeof rt!="number"?_e:rt+_e},resolveDeferredValueTree=function(d,c,et,_e){return resolveDeferredValue(c,new DeferredValueProvider(et,d),_e)},resolveDeferredValueSnapshot=function(d,c,et){return resolveDeferredValue(d,new ExistingValueProvider(c),et)};function resolveDeferredValue(d,c,et){const _e=d.getPriority().val(),tt=resolveDeferredLeafValue(_e,c.getImmediateChild(".priority"),et);let nt;if(d.isLeafNode()){const rt=d,it=resolveDeferredLeafValue(rt.getValue(),c,et);return it!==rt.getValue()||tt!==rt.getPriority().val()?new LeafNode(it,nodeFromJSON(tt)):d}else{const rt=d;return nt=rt,tt!==rt.getPriority().val()&&(nt=nt.updatePriority(new LeafNode(tt))),rt.forEachChild(PRIORITY_INDEX,(it,ot)=>{const st=resolveDeferredValue(ot,c.getImmediateChild(it),et);st!==ot&&(nt=nt.updateImmediateChild(it,st))}),nt}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tree{constructor(c="",et=null,_e={children:{},childCount:0}){this.name=c,this.parent=et,this.node=_e}}function treeSubTree(d,c){let et=c instanceof Path$1?c:new Path$1(c),_e=d,tt=pathGetFront(et);for(;tt!==null;){const nt=safeGet(_e.node.children,tt)||{children:{},childCount:0};_e=new Tree(tt,_e,nt),et=pathPopFront(et),tt=pathGetFront(et)}return _e}function treeGetValue(d){return d.node.value}function treeSetValue(d,c){d.node.value=c,treeUpdateParents(d)}function treeHasChildren(d){return d.node.childCount>0}function treeIsEmpty(d){return treeGetValue(d)===void 0&&!treeHasChildren(d)}function treeForEachChild(d,c){each(d.node.children,(et,_e)=>{c(new Tree(et,d,_e))})}function treeForEachDescendant(d,c,et,_e){et&&!_e&&c(d),treeForEachChild(d,tt=>{treeForEachDescendant(tt,c,!0,_e)}),et&&_e&&c(d)}function treeForEachAncestor(d,c,et){let _e=et?d:d.parent;for(;_e!==null;){if(c(_e))return!0;_e=_e.parent}return!1}function treeGetPath(d){return new Path$1(d.parent===null?d.name:treeGetPath(d.parent)+"/"+d.name)}function treeUpdateParents(d){d.parent!==null&&treeUpdateChild(d.parent,d.name,d)}function treeUpdateChild(d,c,et){const _e=treeIsEmpty(et),tt=contains$2(d.node.children,c);_e&&tt?(delete d.node.children[c],d.node.childCount--,treeUpdateParents(d)):!_e&&!tt&&(d.node.children[c]=et.node,d.node.childCount++,treeUpdateParents(d))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INVALID_KEY_REGEX_=/[\[\].#$\/\u0000-\u001F\u007F]/,INVALID_PATH_REGEX_=/[\[\].#$\u0000-\u001F\u007F]/,MAX_LEAF_SIZE_=10*1024*1024,isValidKey=function(d){return typeof d=="string"&&d.length!==0&&!INVALID_KEY_REGEX_.test(d)},isValidPathString=function(d){return typeof d=="string"&&d.length!==0&&!INVALID_PATH_REGEX_.test(d)},isValidRootPathString=function(d){return d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),isValidPathString(d)},validateFirebaseDataArg=function(d,c,et,_e){_e&&c===void 0||validateFirebaseData(errorPrefix(d,"value"),c,et)},validateFirebaseData=function(d,c,et){const _e=et instanceof Path$1?new ValidationPath(et,d):et;if(c===void 0)throw new Error(d+"contains undefined "+validationPathToErrorString(_e));if(typeof c=="function")throw new Error(d+"contains a function "+validationPathToErrorString(_e)+" with contents = "+c.toString());if(isInvalidJSONNumber(c))throw new Error(d+"contains "+c.toString()+" "+validationPathToErrorString(_e));if(typeof c=="string"&&c.length>MAX_LEAF_SIZE_/3&&stringLength(c)>MAX_LEAF_SIZE_)throw new Error(d+"contains a string greater than "+MAX_LEAF_SIZE_+" utf8 bytes "+validationPathToErrorString(_e)+" ('"+c.substring(0,50)+"...')");if(c&&typeof c=="object"){let tt=!1,nt=!1;if(each(c,(rt,it)=>{if(rt===".value")tt=!0;else if(rt!==".priority"&&rt!==".sv"&&(nt=!0,!isValidKey(rt)))throw new Error(d+" contains an invalid key ("+rt+") "+validationPathToErrorString(_e)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);validationPathPush(_e,rt),validateFirebaseData(d,it,_e),validationPathPop(_e)}),tt&&nt)throw new Error(d+' contains ".value" child '+validationPathToErrorString(_e)+" in addition to actual children.")}},validatePathString=function(d,c,et,_e){if(!(_e&&et===void 0)&&!isValidPathString(et))throw new Error(errorPrefix(d,c)+'was an invalid path = "'+et+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},validateRootPathString=function(d,c,et,_e){et&&(et=et.replace(/^\/*\.info(\/|$)/,"/")),validatePathString(d,c,et,_e)},validateWritablePath=function(d,c){if(pathGetFront(c)===".info")throw new Error(d+" failed = Can't modify data under /.info/")},validateUrl=function(d,c){const et=c.path.toString();if(typeof c.repoInfo.host!="string"||c.repoInfo.host.length===0||!isValidKey(c.repoInfo.namespace)&&c.repoInfo.host.split(":")[0]!=="localhost"||et.length!==0&&!isValidRootPathString(et))throw new Error(errorPrefix(d,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EventQueue{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function eventQueueQueueEvents(d,c){let et=null;for(let _e=0;_e<c.length;_e++){const tt=c[_e],nt=tt.getPath();et!==null&&!pathEquals(nt,et.path)&&(d.eventLists_.push(et),et=null),et===null&&(et={events:[],path:nt}),et.events.push(tt)}et&&d.eventLists_.push(et)}function eventQueueRaiseEventsForChangedPath(d,c,et){eventQueueQueueEvents(d,et),eventQueueRaiseQueuedEventsMatchingPredicate(d,_e=>pathContains(_e,c)||pathContains(c,_e))}function eventQueueRaiseQueuedEventsMatchingPredicate(d,c){d.recursionDepth_++;let et=!0;for(let _e=0;_e<d.eventLists_.length;_e++){const tt=d.eventLists_[_e];if(tt){const nt=tt.path;c(nt)?(eventListRaise(d.eventLists_[_e]),d.eventLists_[_e]=null):et=!1}}et&&(d.eventLists_=[]),d.recursionDepth_--}function eventListRaise(d){for(let c=0;c<d.events.length;c++){const et=d.events[c];if(et!==null){d.events[c]=null;const _e=et.getEventRunner();logger&&log("event: "+et.toString()),exceptionGuard(_e)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INTERRUPT_REASON="repo_interrupt",MAX_TRANSACTION_RETRIES=25;class Repo{constructor(c,et,_e,tt){this.repoInfo_=c,this.forceRestClient_=et,this.authTokenProvider_=_e,this.appCheckProvider_=tt,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new EventQueue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=newSparseSnapshotTree(),this.transactionQueueTree_=new Tree,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function repoStart(d,c,et){if(d.stats_=statsManagerGetCollection(d.repoInfo_),d.forceRestClient_||beingCrawled())d.server_=new ReadonlyRestClient(d.repoInfo_,(_e,tt,nt,rt)=>{repoOnDataUpdate(d,_e,tt,nt,rt)},d.authTokenProvider_,d.appCheckProvider_),setTimeout(()=>repoOnConnectStatus(d,!0),0);else{if(typeof et<"u"&&et!==null){if(typeof et!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{stringify(et)}catch(_e){throw new Error("Invalid authOverride provided: "+_e)}}d.persistentConnection_=new PersistentConnection(d.repoInfo_,c,(_e,tt,nt,rt)=>{repoOnDataUpdate(d,_e,tt,nt,rt)},_e=>{repoOnConnectStatus(d,_e)},_e=>{repoOnServerInfoUpdate(d,_e)},d.authTokenProvider_,d.appCheckProvider_,et),d.server_=d.persistentConnection_}d.authTokenProvider_.addTokenChangeListener(_e=>{d.server_.refreshAuthToken(_e)}),d.appCheckProvider_.addTokenChangeListener(_e=>{d.server_.refreshAppCheckToken(_e.token)}),d.statsReporter_=statsManagerGetOrCreateReporter(d.repoInfo_,()=>new StatsReporter(d.stats_,d.server_)),d.infoData_=new SnapshotHolder,d.infoSyncTree_=new SyncTree({startListening:(_e,tt,nt,rt)=>{let it=[];const ot=d.infoData_.getNode(_e._path);return ot.isEmpty()||(it=syncTreeApplyServerOverwrite(d.infoSyncTree_,_e._path,ot),setTimeout(()=>{rt("ok")},0)),it},stopListening:()=>{}}),repoUpdateInfo(d,"connected",!1),d.serverSyncTree_=new SyncTree({startListening:(_e,tt,nt,rt)=>(d.server_.listen(_e,nt,tt,(it,ot)=>{const st=rt(it,ot);eventQueueRaiseEventsForChangedPath(d.eventQueue_,_e._path,st)}),[]),stopListening:(_e,tt)=>{d.server_.unlisten(_e,tt)}})}function repoServerTime(d){const et=d.infoData_.getNode(new Path$1(".info/serverTimeOffset")).val()||0;return new Date().getTime()+et}function repoGenerateServerValues(d){return generateWithValues({timestamp:repoServerTime(d)})}function repoOnDataUpdate(d,c,et,_e,tt){d.dataUpdateCount++;const nt=new Path$1(c);et=d.interceptServerDataCallback_?d.interceptServerDataCallback_(c,et):et;let rt=[];if(tt)if(_e){const ot=map$1(et,st=>nodeFromJSON(st));rt=syncTreeApplyTaggedQueryMerge(d.serverSyncTree_,nt,ot,tt)}else{const ot=nodeFromJSON(et);rt=syncTreeApplyTaggedQueryOverwrite(d.serverSyncTree_,nt,ot,tt)}else if(_e){const ot=map$1(et,st=>nodeFromJSON(st));rt=syncTreeApplyServerMerge(d.serverSyncTree_,nt,ot)}else{const ot=nodeFromJSON(et);rt=syncTreeApplyServerOverwrite(d.serverSyncTree_,nt,ot)}let it=nt;rt.length>0&&(it=repoRerunTransactions(d,nt)),eventQueueRaiseEventsForChangedPath(d.eventQueue_,it,rt)}function repoOnConnectStatus(d,c){repoUpdateInfo(d,"connected",c),c===!1&&repoRunOnDisconnectEvents(d)}function repoOnServerInfoUpdate(d,c){each(c,(et,_e)=>{repoUpdateInfo(d,et,_e)})}function repoUpdateInfo(d,c,et){const _e=new Path$1("/.info/"+c),tt=nodeFromJSON(et);d.infoData_.updateSnapshot(_e,tt);const nt=syncTreeApplyServerOverwrite(d.infoSyncTree_,_e,tt);eventQueueRaiseEventsForChangedPath(d.eventQueue_,_e,nt)}function repoGetNextWriteId(d){return d.nextWriteId_++}function repoGetValue(d,c,et){const _e=syncTreeGetServerValue(d.serverSyncTree_,c);return _e!=null?Promise.resolve(_e):d.server_.get(c).then(tt=>{const nt=nodeFromJSON(tt).withIndex(c._queryParams.getIndex());syncTreeAddEventRegistration(d.serverSyncTree_,c,et,!0);let rt;if(c._queryParams.loadsAllData())rt=syncTreeApplyServerOverwrite(d.serverSyncTree_,c._path,nt);else{const it=syncTreeTagForQuery(d.serverSyncTree_,c);rt=syncTreeApplyTaggedQueryOverwrite(d.serverSyncTree_,c._path,nt,it)}return eventQueueRaiseEventsForChangedPath(d.eventQueue_,c._path,rt),syncTreeRemoveEventRegistration(d.serverSyncTree_,c,et,null,!0),nt},tt=>(repoLog(d,"get for query "+stringify(c)+" failed: "+tt),Promise.reject(new Error(tt))))}function repoSetWithPriority(d,c,et,_e,tt){repoLog(d,"set",{path:c.toString(),value:et,priority:_e});const nt=repoGenerateServerValues(d),rt=nodeFromJSON(et,_e),it=syncTreeCalcCompleteEventCache(d.serverSyncTree_,c),ot=resolveDeferredValueSnapshot(rt,it,nt),st=repoGetNextWriteId(d),at=syncTreeApplyUserOverwrite(d.serverSyncTree_,c,ot,st,!0);eventQueueQueueEvents(d.eventQueue_,at),d.server_.put(c.toString(),rt.val(!0),(ct,ut)=>{const dt=ct==="ok";dt||warn("set at "+c+" failed: "+ct);const ht=syncTreeAckUserWrite(d.serverSyncTree_,st,!dt);eventQueueRaiseEventsForChangedPath(d.eventQueue_,c,ht),repoCallOnCompleteCallback(d,tt,ct,ut)});const lt=repoAbortTransactions(d,c);repoRerunTransactions(d,lt),eventQueueRaiseEventsForChangedPath(d.eventQueue_,lt,[])}function repoRunOnDisconnectEvents(d){repoLog(d,"onDisconnectEvents");const c=repoGenerateServerValues(d),et=newSparseSnapshotTree();sparseSnapshotTreeForEachTree(d.onDisconnect_,newEmptyPath(),(tt,nt)=>{const rt=resolveDeferredValueTree(tt,nt,d.serverSyncTree_,c);sparseSnapshotTreeRemember(et,tt,rt)});let _e=[];sparseSnapshotTreeForEachTree(et,newEmptyPath(),(tt,nt)=>{_e=_e.concat(syncTreeApplyServerOverwrite(d.serverSyncTree_,tt,nt));const rt=repoAbortTransactions(d,tt);repoRerunTransactions(d,rt)}),d.onDisconnect_=newSparseSnapshotTree(),eventQueueRaiseEventsForChangedPath(d.eventQueue_,newEmptyPath(),_e)}function repoInterrupt(d){d.persistentConnection_&&d.persistentConnection_.interrupt(INTERRUPT_REASON)}function repoLog(d,...c){let et="";d.persistentConnection_&&(et=d.persistentConnection_.id+":"),log(et,...c)}function repoCallOnCompleteCallback(d,c,et,_e){c&&exceptionGuard(()=>{if(et==="ok")c(null);else{const tt=(et||"error").toUpperCase();let nt=tt;_e&&(nt+=": "+_e);const rt=new Error(nt);rt.code=tt,c(rt)}})}function repoGetLatestState(d,c,et){return syncTreeCalcCompleteEventCache(d.serverSyncTree_,c,et)||ChildrenNode.EMPTY_NODE}function repoSendReadyTransactions(d,c=d.transactionQueueTree_){if(c||repoPruneCompletedTransactionsBelowNode(d,c),treeGetValue(c)){const et=repoBuildTransactionQueue(d,c);assert(et.length>0,"Sending zero length transaction queue"),et.every(tt=>tt.status===0)&&repoSendTransactionQueue(d,treeGetPath(c),et)}else treeHasChildren(c)&&treeForEachChild(c,et=>{repoSendReadyTransactions(d,et)})}function repoSendTransactionQueue(d,c,et){const _e=et.map(st=>st.currentWriteId),tt=repoGetLatestState(d,c,_e);let nt=tt;const rt=tt.hash();for(let st=0;st<et.length;st++){const at=et[st];assert(at.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),at.status=1,at.retryCount++;const lt=newRelativePath(c,at.path);nt=nt.updateChild(lt,at.currentOutputSnapshotRaw)}const it=nt.val(!0),ot=c;d.server_.put(ot.toString(),it,st=>{repoLog(d,"transaction put response",{path:ot.toString(),status:st});let at=[];if(st==="ok"){const lt=[];for(let ct=0;ct<et.length;ct++)et[ct].status=2,at=at.concat(syncTreeAckUserWrite(d.serverSyncTree_,et[ct].currentWriteId)),et[ct].onComplete&&lt.push(()=>et[ct].onComplete(null,!0,et[ct].currentOutputSnapshotResolved)),et[ct].unwatcher();repoPruneCompletedTransactionsBelowNode(d,treeSubTree(d.transactionQueueTree_,c)),repoSendReadyTransactions(d,d.transactionQueueTree_),eventQueueRaiseEventsForChangedPath(d.eventQueue_,c,at);for(let ct=0;ct<lt.length;ct++)exceptionGuard(lt[ct])}else{if(st==="datastale")for(let lt=0;lt<et.length;lt++)et[lt].status===3?et[lt].status=4:et[lt].status=0;else{warn("transaction at "+ot.toString()+" failed: "+st);for(let lt=0;lt<et.length;lt++)et[lt].status=4,et[lt].abortReason=st}repoRerunTransactions(d,c)}},rt)}function repoRerunTransactions(d,c){const et=repoGetAncestorTransactionNode(d,c),_e=treeGetPath(et),tt=repoBuildTransactionQueue(d,et);return repoRerunTransactionQueue(d,tt,_e),_e}function repoRerunTransactionQueue(d,c,et){if(c.length===0)return;const _e=[];let tt=[];const rt=c.filter(it=>it.status===0).map(it=>it.currentWriteId);for(let it=0;it<c.length;it++){const ot=c[it],st=newRelativePath(et,ot.path);let at=!1,lt;if(assert(st!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),ot.status===4)at=!0,lt=ot.abortReason,tt=tt.concat(syncTreeAckUserWrite(d.serverSyncTree_,ot.currentWriteId,!0));else if(ot.status===0)if(ot.retryCount>=MAX_TRANSACTION_RETRIES)at=!0,lt="maxretry",tt=tt.concat(syncTreeAckUserWrite(d.serverSyncTree_,ot.currentWriteId,!0));else{const ct=repoGetLatestState(d,ot.path,rt);ot.currentInputSnapshot=ct;const ut=c[it].update(ct.val());if(ut!==void 0){validateFirebaseData("transaction failed: Data returned ",ut,ot.path);let dt=nodeFromJSON(ut);typeof ut=="object"&&ut!=null&&contains$2(ut,".priority")||(dt=dt.updatePriority(ct.getPriority()));const yt=ot.currentWriteId,gt=repoGenerateServerValues(d),ft=resolveDeferredValueSnapshot(dt,ct,gt);ot.currentOutputSnapshotRaw=dt,ot.currentOutputSnapshotResolved=ft,ot.currentWriteId=repoGetNextWriteId(d),rt.splice(rt.indexOf(yt),1),tt=tt.concat(syncTreeApplyUserOverwrite(d.serverSyncTree_,ot.path,ft,ot.currentWriteId,ot.applyLocally)),tt=tt.concat(syncTreeAckUserWrite(d.serverSyncTree_,yt,!0))}else at=!0,lt="nodata",tt=tt.concat(syncTreeAckUserWrite(d.serverSyncTree_,ot.currentWriteId,!0))}eventQueueRaiseEventsForChangedPath(d.eventQueue_,et,tt),tt=[],at&&(c[it].status=2,function(ct){setTimeout(ct,Math.floor(0))}(c[it].unwatcher),c[it].onComplete&&(lt==="nodata"?_e.push(()=>c[it].onComplete(null,!1,c[it].currentInputSnapshot)):_e.push(()=>c[it].onComplete(new Error(lt),!1,null))))}repoPruneCompletedTransactionsBelowNode(d,d.transactionQueueTree_);for(let it=0;it<_e.length;it++)exceptionGuard(_e[it]);repoSendReadyTransactions(d,d.transactionQueueTree_)}function repoGetAncestorTransactionNode(d,c){let et,_e=d.transactionQueueTree_;for(et=pathGetFront(c);et!==null&&treeGetValue(_e)===void 0;)_e=treeSubTree(_e,et),c=pathPopFront(c),et=pathGetFront(c);return _e}function repoBuildTransactionQueue(d,c){const et=[];return repoAggregateTransactionQueuesForNode(d,c,et),et.sort((_e,tt)=>_e.order-tt.order),et}function repoAggregateTransactionQueuesForNode(d,c,et){const _e=treeGetValue(c);if(_e)for(let tt=0;tt<_e.length;tt++)et.push(_e[tt]);treeForEachChild(c,tt=>{repoAggregateTransactionQueuesForNode(d,tt,et)})}function repoPruneCompletedTransactionsBelowNode(d,c){const et=treeGetValue(c);if(et){let _e=0;for(let tt=0;tt<et.length;tt++)et[tt].status!==2&&(et[_e]=et[tt],_e++);et.length=_e,treeSetValue(c,et.length>0?et:void 0)}treeForEachChild(c,_e=>{repoPruneCompletedTransactionsBelowNode(d,_e)})}function repoAbortTransactions(d,c){const et=treeGetPath(repoGetAncestorTransactionNode(d,c)),_e=treeSubTree(d.transactionQueueTree_,c);return treeForEachAncestor(_e,tt=>{repoAbortTransactionsOnNode(d,tt)}),repoAbortTransactionsOnNode(d,_e),treeForEachDescendant(_e,tt=>{repoAbortTransactionsOnNode(d,tt)}),et}function repoAbortTransactionsOnNode(d,c){const et=treeGetValue(c);if(et){const _e=[];let tt=[],nt=-1;for(let rt=0;rt<et.length;rt++)et[rt].status===3||(et[rt].status===1?(assert(nt===rt-1,"All SENT items should be at beginning of queue."),nt=rt,et[rt].status=3,et[rt].abortReason="set"):(assert(et[rt].status===0,"Unexpected transaction status in abort"),et[rt].unwatcher(),tt=tt.concat(syncTreeAckUserWrite(d.serverSyncTree_,et[rt].currentWriteId,!0)),et[rt].onComplete&&_e.push(et[rt].onComplete.bind(null,new Error("set"),!1,null))));nt===-1?treeSetValue(c,void 0):et.length=nt+1,eventQueueRaiseEventsForChangedPath(d.eventQueue_,treeGetPath(c),tt);for(let rt=0;rt<_e.length;rt++)exceptionGuard(_e[rt])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function decodePath(d){let c="";const et=d.split("/");for(let _e=0;_e<et.length;_e++)if(et[_e].length>0){let tt=et[_e];try{tt=decodeURIComponent(tt.replace(/\+/g," "))}catch{}c+="/"+tt}return c}function decodeQuery(d){const c={};d.charAt(0)==="?"&&(d=d.substring(1));for(const et of d.split("&")){if(et.length===0)continue;const _e=et.split("=");_e.length===2?c[decodeURIComponent(_e[0])]=decodeURIComponent(_e[1]):warn(`Invalid query segment '${et}' in query '${d}'`)}return c}const parseRepoInfo=function(d,c){const et=parseDatabaseURL(d),_e=et.namespace;et.domain==="firebase.com"&&fatal(et.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!_e||_e==="undefined")&&et.domain!=="localhost"&&fatal("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),et.secure||warnIfPageIsSecure();const tt=et.scheme==="ws"||et.scheme==="wss";return{repoInfo:new RepoInfo(et.host,et.secure,_e,tt,c,"",_e!==et.subdomain),path:new Path$1(et.pathString)}},parseDatabaseURL=function(d){let c="",et="",_e="",tt="",nt="",rt=!0,it="https",ot=443;if(typeof d=="string"){let st=d.indexOf("//");st>=0&&(it=d.substring(0,st-1),d=d.substring(st+2));let at=d.indexOf("/");at===-1&&(at=d.length);let lt=d.indexOf("?");lt===-1&&(lt=d.length),c=d.substring(0,Math.min(at,lt)),at<lt&&(tt=decodePath(d.substring(at,lt)));const ct=decodeQuery(d.substring(Math.min(d.length,lt)));st=c.indexOf(":"),st>=0?(rt=it==="https"||it==="wss",ot=parseInt(c.substring(st+1),10)):st=c.length;const ut=c.slice(0,st);if(ut.toLowerCase()==="localhost")et="localhost";else if(ut.split(".").length<=2)et=ut;else{const dt=c.indexOf(".");_e=c.substring(0,dt).toLowerCase(),et=c.substring(dt+1),nt=_e}"ns"in ct&&(nt=ct.ns)}return{host:c,port:ot,domain:et,subdomain:_e,secure:rt,scheme:it,pathString:tt,namespace:nt}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DataEvent{constructor(c,et,_e,tt){this.eventType=c,this.eventRegistration=et,this.snapshot=_e,this.prevName=tt}getPath(){const c=this.snapshot.ref;return this.eventType==="value"?c._path:c.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+stringify(this.snapshot.exportVal())}}class CancelEvent{constructor(c,et,_e){this.eventRegistration=c,this.error=et,this.path=_e}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CallbackContext{constructor(c,et){this.snapshotCallback=c,this.cancelCallback=et}onValue(c,et){this.snapshotCallback.call(null,c,et)}onCancel(c){return assert(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,c)}get hasCancelCallback(){return!!this.cancelCallback}matches(c){return this.snapshotCallback===c.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===c.snapshotCallback.userCallback&&this.snapshotCallback.context===c.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryImpl{constructor(c,et,_e,tt){this._repo=c,this._path=et,this._queryParams=_e,this._orderByCalled=tt}get key(){return pathIsEmpty(this._path)?null:pathGetBack(this._path)}get ref(){return new ReferenceImpl(this._repo,this._path)}get _queryIdentifier(){const c=queryParamsGetQueryObject(this._queryParams),et=ObjectToUniqueKey(c);return et==="{}"?"default":et}get _queryObject(){return queryParamsGetQueryObject(this._queryParams)}isEqual(c){if(c=getModularInstance(c),!(c instanceof QueryImpl))return!1;const et=this._repo===c._repo,_e=pathEquals(this._path,c._path),tt=this._queryIdentifier===c._queryIdentifier;return et&&_e&&tt}toJSON(){return this.toString()}toString(){return this._repo.toString()+pathToUrlEncodedString(this._path)}}class ReferenceImpl extends QueryImpl{constructor(c,et){super(c,et,new QueryParams,!1)}get parent(){const c=pathParent(this._path);return c===null?null:new ReferenceImpl(this._repo,c)}get root(){let c=this;for(;c.parent!==null;)c=c.parent;return c}}class DataSnapshot{constructor(c,et,_e){this._node=c,this.ref=et,this._index=_e}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(c){const et=new Path$1(c),_e=child(this.ref,c);return new DataSnapshot(this._node.getChild(et),_e,PRIORITY_INDEX)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(c){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(_e,tt)=>c(new DataSnapshot(tt,child(this.ref,_e),PRIORITY_INDEX)))}hasChild(c){const et=new Path$1(c);return!this._node.getChild(et).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ref(d,c){return d=getModularInstance(d),d._checkNotDeleted("ref"),c!==void 0?child(d._root,c):d._root}function child(d,c){return d=getModularInstance(d),pathGetFront(d._path)===null?validateRootPathString("child","path",c,!1):validatePathString("child","path",c,!1),new ReferenceImpl(d._repo,pathChild(d._path,c))}function remove(d){return validateWritablePath("remove",d._path),set(d,null)}function set(d,c){d=getModularInstance(d),validateWritablePath("set",d._path),validateFirebaseDataArg("set",c,d._path,!1);const et=new Deferred;return repoSetWithPriority(d._repo,d._path,c,null,et.wrapCallback(()=>{})),et.promise}function get(d){d=getModularInstance(d);const c=new CallbackContext(()=>{}),et=new ValueEventRegistration(c);return repoGetValue(d._repo,d,et).then(_e=>new DataSnapshot(_e,new ReferenceImpl(d._repo,d._path),d._queryParams.getIndex()))}class ValueEventRegistration{constructor(c){this.callbackContext=c}respondsTo(c){return c==="value"}createEvent(c,et){const _e=et._queryParams.getIndex();return new DataEvent("value",this,new DataSnapshot(c.snapshotNode,new ReferenceImpl(et._repo,et._path),_e))}getEventRunner(c){return c.getEventType()==="cancel"?()=>this.callbackContext.onCancel(c.error):()=>this.callbackContext.onValue(c.snapshot,null)}createCancelEvent(c,et){return this.callbackContext.hasCancelCallback?new CancelEvent(this,c,et):null}matches(c){return c instanceof ValueEventRegistration?!c.callbackContext||!this.callbackContext?!0:c.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}syncPointSetReferenceConstructor(ReferenceImpl);syncTreeSetReferenceConstructor(ReferenceImpl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FIREBASE_DATABASE_EMULATOR_HOST_VAR="FIREBASE_DATABASE_EMULATOR_HOST",repos={};let useRestClient=!1;function repoManagerApplyEmulatorSettings(d,c,et,_e){d.repoInfo_=new RepoInfo(`${c}:${et}`,!1,d.repoInfo_.namespace,d.repoInfo_.webSocketOnly,d.repoInfo_.nodeAdmin,d.repoInfo_.persistenceKey,d.repoInfo_.includeNamespaceInQueryParams,!0),_e&&(d.authTokenProvider_=_e)}function repoManagerDatabaseFromApp(d,c,et,_e,tt){let nt=_e||d.options.databaseURL;nt===void 0&&(d.options.projectId||fatal("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),log("Using default host for project ",d.options.projectId),nt=`${d.options.projectId}-default-rtdb.firebaseio.com`);let rt=parseRepoInfo(nt,tt),it=rt.repoInfo,ot,st;typeof process<"u"&&define_process_env_default&&(st=define_process_env_default[FIREBASE_DATABASE_EMULATOR_HOST_VAR]),st?(ot=!0,nt=`http://${st}?ns=${it.namespace}`,rt=parseRepoInfo(nt,tt),it=rt.repoInfo):ot=!rt.repoInfo.secure;const at=tt&&ot?new EmulatorTokenProvider(EmulatorTokenProvider.OWNER):new FirebaseAuthTokenProvider(d.name,d.options,c);validateUrl("Invalid Firebase Database URL",rt),pathIsEmpty(rt.path)||fatal("Database URL must point to the root of a Firebase Database (not including a child path).");const lt=repoManagerCreateRepo(it,d,at,new AppCheckTokenProvider(d.name,et));return new Database$1(lt,d)}function repoManagerDeleteRepo(d,c){const et=repos[c];(!et||et[d.key]!==d)&&fatal(`Database ${c}(${d.repoInfo_}) has already been deleted.`),repoInterrupt(d),delete et[d.key]}function repoManagerCreateRepo(d,c,et,_e){let tt=repos[c.name];tt||(tt={},repos[c.name]=tt);let nt=tt[d.toURLString()];return nt&&fatal("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),nt=new Repo(d,useRestClient,et,_e),tt[d.toURLString()]=nt,nt}let Database$1=class{constructor(c,et){this._repoInternal=c,this.app=et,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(repoStart(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ReferenceImpl(this._repo,newEmptyPath())),this._rootInternal}_delete(){return this._rootInternal!==null&&(repoManagerDeleteRepo(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(c){this._rootInternal===null&&fatal("Cannot call "+c+" on a deleted database.")}};function getDatabase(d=getApp(),c){const et=_getProvider(d,"database").getImmediate({identifier:c});if(!et._instanceStarted){const _e=getDefaultEmulatorHostnameAndPort("database");_e&&connectDatabaseEmulator(et,..._e)}return et}function connectDatabaseEmulator(d,c,et,_e={}){d=getModularInstance(d),d._checkNotDeleted("useEmulator"),d._instanceStarted&&fatal("Cannot call useEmulator() after instance has already been initialized.");const tt=d._repoInternal;let nt;if(tt.repoInfo_.nodeAdmin)_e.mockUserToken&&fatal('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),nt=new EmulatorTokenProvider(EmulatorTokenProvider.OWNER);else if(_e.mockUserToken){const rt=typeof _e.mockUserToken=="string"?_e.mockUserToken:createMockUserToken(_e.mockUserToken,d.app.options.projectId);nt=new EmulatorTokenProvider(rt)}repoManagerApplyEmulatorSettings(tt,c,et,nt)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerDatabase(d){setSDKVersion(SDK_VERSION$1),_registerComponent(new Component("database",(c,{instanceIdentifier:et})=>{const _e=c.getProvider("app").getImmediate(),tt=c.getProvider("auth-internal"),nt=c.getProvider("app-check-internal");return repoManagerDatabaseFromApp(_e,tt,nt,et)},"PUBLIC").setMultipleInstances(!0)),registerVersion(name,version,d),registerVersion(name,version,"esm2017")}PersistentConnection.prototype.simpleListen=function(d,c){this.sendRequest("q",{p:d},c)};PersistentConnection.prototype.echo=function(d,c){this.sendRequest("echo",{d},c)};registerDatabase();function array(d){return d instanceof Array?d:[d]}function onlyDefined(d){return d.filter(c=>c!=null)}function uniq(d){return Array.from(new Set(d))}function uniqById(d,c,et=(_e,tt)=>tt){const _e={};return d.forEach(tt=>{const nt=c(tt),rt=_e[nt];_e[nt]=rt===void 0?tt:et(rt,tt)}),Object.values(_e)}function isString(d){return typeof d=="string"}async function timedAsync(d,c="Action"){const et=Date.now();try{return await d()}finally{const _e=Date.now();console.log(`${c} took ${formatTime(_e-et)}`)}}function formatTime(d){return`${d.toLocaleString("en-US")} ms`}const databaseUrl="https://pathfinder-app-a4ed5-default-rtdb.firebaseio.com/",firebaseConfig={apiKey:"AIzaSyDGhIl4CO_-MdEsti5mey_n81kKLOVhEjo",authDomain:"pathfinder-app-a4ed5.firebaseapp.com",projectId:"pathfinder-app-a4ed5",storageBucket:"pathfinder-app-a4ed5.appspot.com",messagingSenderId:"716168429331",appId:"1:716168429331:web:6ebc44bc9dab5a0969a4e6",measurementId:"G-N21ZJVKPQN",databaseUrl},app=initializeApp(firebaseConfig),db=getDatabase(app),auth=getAuth(app);auth.onAuthStateChanged(d=>{setGoogleToken(d==null?void 0:d.uid)});const googleAuthProvider=new GoogleAuthProvider;async function firebaseLoginWithEmail(d,c){let et;try{et=await signInWithEmailAndPassword(auth,d,c)}catch(_e){if(_e instanceof FirebaseError)if(_e.code==="auth/user-not-found")console.error("User not found"),et=await createUserWithEmailAndPassword(auth,d,c);else throw _e}et&&setGoogleToken(et.user.uid)}function firebaseResetPassword(d){return sendPasswordResetEmail(auth,d)}function firebaseUser(){return auth.currentUser?new User(auth.currentUser.uid,()=>firebaseLogout()):void 0}async function firebaseLoginWithGoogle(){const c=(await signInWithPopup(auth,googleAuthProvider)).user;setGoogleToken(c.uid)}async function firebaseAuthResult(){const d=await getRedirectResult(auth);d&&setGoogleToken(d.user.uid)}async function firebaseLogout(){await signOut(auth),setGoogleToken(void 0)}const FirebaseRepository={loadAll:async(d,c)=>{console.log("Loading all from Firebase");const et=await get(ref(db,`u/${d}/${c}`));if(!et.exists())return;const _e=et.val();return Object.values(_e)},load:async(d,c,et)=>{console.log("Loading from Firebase");const _e=await get(ref(db,`u/${d}/${c}/${et}`));if(_e.exists())return _e.val()},save:async(d,c,et,_e)=>timedAsync(()=>set(ref(db,`u/${d}/${c}/${et}`),_e),"Saved to Firebase"),delete:async(d,c,et)=>remove(ref(db,`u/${d}/${c}/${et}`))};class User{constructor(c,et){this.id=c,this.logout=et}}let activeUser;function RequiresAuth({children:d}){return getGoogleToken()!==void 0?d:jsxRuntimeExports.jsx(Navigate,{to:"/login"})}function setGoogleToken(d){if(d===void 0){localStorage.removeItem("google-token");return}localStorage.setItem("google-token",d)}function getGoogleToken(){return localStorage.getItem("google-token")??void 0}async function logout(){await firebaseLogout(),localStorage.removeItem("google-token"),activeUser=void 0}function getActiveUser(){if(activeUser)return activeUser;const d=getGoogleToken();return activeUser=d?new User(d,logout):void 0,activeUser}function useActiveUser(){return getActiveUser()}var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(d){(function(){var c={}.hasOwnProperty;function et(){for(var _e=[],tt=0;tt<arguments.length;tt++){var nt=arguments[tt];if(nt){var rt=typeof nt;if(rt==="string"||rt==="number")_e.push(nt);else if(Array.isArray(nt)){if(nt.length){var it=et.apply(null,nt);it&&_e.push(it)}}else if(rt==="object"){if(nt.toString!==Object.prototype.toString&&!nt.toString.toString().includes("[native code]")){_e.push(nt.toString());continue}for(var ot in nt)c.call(nt,ot)&&nt[ot]&&_e.push(ot)}}}return _e.join(" ")}d.exports?(et.default=et,d.exports=et):window.classNames=et})()})(classnames);var classnamesExports=classnames.exports;const classNames$1=getDefaultExportFromCjs(classnamesExports);function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(d){for(var c=1;c<arguments.length;c++){var et=arguments[c];for(var _e in et)Object.prototype.hasOwnProperty.call(et,_e)&&(d[_e]=et[_e])}return d},_extends$6.apply(this,arguments)}function _objectWithoutPropertiesLoose$c(d,c){if(d==null)return{};var et={},_e=Object.keys(d),tt,nt;for(nt=0;nt<_e.length;nt++)tt=_e[nt],!(c.indexOf(tt)>=0)&&(et[tt]=d[tt]);return et}var invariant=function(d,c,et,_e,tt,nt,rt,it){if(!d){var ot;if(c===void 0)ot=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var st=[et,_e,tt,nt,rt,it],at=0;ot=new Error(c.replace(/%s/g,function(){return st[at++]})),ot.name="Invariant Violation"}throw ot.framesToPop=1,ot}},browser$1=invariant;const invariant$1=getDefaultExportFromCjs(browser$1);function defaultKey(d){return"default"+d.charAt(0).toUpperCase()+d.substr(1)}function _toPropertyKey(d){var c=_toPrimitive(d,"string");return typeof c=="symbol"?c:String(c)}function _toPrimitive(d,c){if(typeof d!="object"||d===null)return d;var et=d[Symbol.toPrimitive];if(et!==void 0){var _e=et.call(d,c||"default");if(typeof _e!="object")return _e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(d)}function useUncontrolledProp(d,c,et){var _e=reactExports.useRef(d!==void 0),tt=reactExports.useState(c),nt=tt[0],rt=tt[1],it=d!==void 0,ot=_e.current;return _e.current=it,!it&&ot&&nt!==c&&rt(c),[it?d:nt,reactExports.useCallback(function(st){for(var at=arguments.length,lt=new Array(at>1?at-1:0),ct=1;ct<at;ct++)lt[ct-1]=arguments[ct];et&&et.apply(void 0,[st].concat(lt)),rt(st)},[et])]}function useUncontrolled(d,c){return Object.keys(c).reduce(function(et,_e){var tt,nt=et,rt=nt[defaultKey(_e)],it=nt[_e],ot=_objectWithoutPropertiesLoose$c(nt,[defaultKey(_e),_e].map(_toPropertyKey)),st=c[_e],at=useUncontrolledProp(it,rt,d[st]),lt=at[0],ct=at[1];return _extends$6({},ot,(tt={},tt[_e]=lt,tt[st]=ct,tt))},d)}function _setPrototypeOf(d,c){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_e,tt){return _e.__proto__=tt,_e},_setPrototypeOf(d,c)}function _inheritsLoose(d,c){d.prototype=Object.create(c.prototype),d.prototype.constructor=d,_setPrototypeOf(d,c)}const DEFAULT_BREAKPOINTS=["xxl","xl","lg","md","sm","xs"],DEFAULT_MIN_BREAKPOINT="xs",ThemeContext=reactExports.createContext({prefixes:{},breakpoints:DEFAULT_BREAKPOINTS,minBreakpoint:DEFAULT_MIN_BREAKPOINT});function useBootstrapPrefix(d,c){const{prefixes:et}=reactExports.useContext(ThemeContext);return d||et[c]||c}function useBootstrapBreakpoints(){const{breakpoints:d}=reactExports.useContext(ThemeContext);return d}function useBootstrapMinBreakpoint(){const{minBreakpoint:d}=reactExports.useContext(ThemeContext);return d}function useIsRTL(){const{dir:d}=reactExports.useContext(ThemeContext);return d==="rtl"}function ownerDocument(d){return d&&d.ownerDocument||document}function ownerWindow(d){var c=ownerDocument(d);return c&&c.defaultView||window}function getComputedStyle$1(d,c){return ownerWindow(d).getComputedStyle(d,c)}var rUpper=/([A-Z])/g;function hyphenate(d){return d.replace(rUpper,"-$1").toLowerCase()}var msPattern=/^ms-/;function hyphenateStyleName(d){return hyphenate(d).replace(msPattern,"-ms-")}var supportedTransforms=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function isTransform(d){return!!(d&&supportedTransforms.test(d))}function style(d,c){var et="",_e="";if(typeof c=="string")return d.style.getPropertyValue(hyphenateStyleName(c))||getComputedStyle$1(d).getPropertyValue(hyphenateStyleName(c));Object.keys(c).forEach(function(tt){var nt=c[tt];!nt&&nt!==0?d.style.removeProperty(hyphenateStyleName(tt)):isTransform(tt)?_e+=tt+"("+nt+") ":et+=hyphenateStyleName(tt)+": "+nt+";"}),_e&&(et+="transform: "+_e+";"),d.style.cssText+=";"+et}var propTypes$3={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function d(_e,tt,nt,rt,it,ot){if(ot!==ReactPropTypesSecret){var st=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw st.name="Invariant Violation",st}}d.isRequired=d;function c(){return d}var et={array:d,bigint:d,bool:d,func:d,number:d,object:d,string:d,symbol:d,any:d,arrayOf:c,element:d,elementType:d,instanceOf:c,node:d,objectOf:c,oneOf:c,oneOfType:c,shape:c,exact:c,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return et.PropTypes=et,et};propTypes$3.exports=factoryWithThrowingShims();var propTypesExports=propTypes$3.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports),config={disabled:!1},TransitionGroupContext=React.createContext(null);var forceReflow=function(c){return c.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(d){_inheritsLoose(c,d);function c(_e,tt){var nt;nt=d.call(this,_e,tt)||this;var rt=tt,it=rt&&!rt.isMounting?_e.enter:_e.appear,ot;return nt.appearStatus=null,_e.in?it?(ot=EXITED,nt.appearStatus=ENTERING):ot=ENTERED:_e.unmountOnExit||_e.mountOnEnter?ot=UNMOUNTED:ot=EXITED,nt.state={status:ot},nt.nextCallback=null,nt}c.getDerivedStateFromProps=function(tt,nt){var rt=tt.in;return rt&&nt.status===UNMOUNTED?{status:EXITED}:null};var et=c.prototype;return et.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},et.componentDidUpdate=function(tt){var nt=null;if(tt!==this.props){var rt=this.state.status;this.props.in?rt!==ENTERING&&rt!==ENTERED&&(nt=ENTERING):(rt===ENTERING||rt===ENTERED)&&(nt=EXITING)}this.updateStatus(!1,nt)},et.componentWillUnmount=function(){this.cancelNextCallback()},et.getTimeouts=function(){var tt=this.props.timeout,nt,rt,it;return nt=rt=it=tt,tt!=null&&typeof tt!="number"&&(nt=tt.exit,rt=tt.enter,it=tt.appear!==void 0?tt.appear:rt),{exit:nt,enter:rt,appear:it}},et.updateStatus=function(tt,nt){if(tt===void 0&&(tt=!1),nt!==null)if(this.cancelNextCallback(),nt===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var rt=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);rt&&forceReflow(rt)}this.performEnter(tt)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},et.performEnter=function(tt){var nt=this,rt=this.props.enter,it=this.context?this.context.isMounting:tt,ot=this.props.nodeRef?[it]:[ReactDOM.findDOMNode(this),it],st=ot[0],at=ot[1],lt=this.getTimeouts(),ct=it?lt.appear:lt.enter;if(!tt&&!rt||config.disabled){this.safeSetState({status:ENTERED},function(){nt.props.onEntered(st)});return}this.props.onEnter(st,at),this.safeSetState({status:ENTERING},function(){nt.props.onEntering(st,at),nt.onTransitionEnd(ct,function(){nt.safeSetState({status:ENTERED},function(){nt.props.onEntered(st,at)})})})},et.performExit=function(){var tt=this,nt=this.props.exit,rt=this.getTimeouts(),it=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!nt||config.disabled){this.safeSetState({status:EXITED},function(){tt.props.onExited(it)});return}this.props.onExit(it),this.safeSetState({status:EXITING},function(){tt.props.onExiting(it),tt.onTransitionEnd(rt.exit,function(){tt.safeSetState({status:EXITED},function(){tt.props.onExited(it)})})})},et.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},et.safeSetState=function(tt,nt){nt=this.setNextCallback(nt),this.setState(tt,nt)},et.setNextCallback=function(tt){var nt=this,rt=!0;return this.nextCallback=function(it){rt&&(rt=!1,nt.nextCallback=null,tt(it))},this.nextCallback.cancel=function(){rt=!1},this.nextCallback},et.onTransitionEnd=function(tt,nt){this.setNextCallback(nt);var rt=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),it=tt==null&&!this.props.addEndListener;if(!rt||it){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var ot=this.props.nodeRef?[this.nextCallback]:[rt,this.nextCallback],st=ot[0],at=ot[1];this.props.addEndListener(st,at)}tt!=null&&setTimeout(this.nextCallback,tt)},et.render=function(){var tt=this.state.status;if(tt===UNMOUNTED)return null;var nt=this.props,rt=nt.children;nt.in,nt.mountOnEnter,nt.unmountOnExit,nt.appear,nt.enter,nt.exit,nt.timeout,nt.addEndListener,nt.onEnter,nt.onEntering,nt.onEntered,nt.onExit,nt.onExiting,nt.onExited,nt.nodeRef;var it=_objectWithoutPropertiesLoose$c(nt,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React.createElement(TransitionGroupContext.Provider,{value:null},typeof rt=="function"?rt(tt,it):React.cloneElement(React.Children.only(rt),it))},c}(React.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop$6(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$6,onEntering:noop$6,onEntered:noop$6,onExit:noop$6,onExiting:noop$6,onExited:noop$6};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;const Transition$1=Transition,canUseDOM$1=!!(typeof window<"u"&&window.document&&window.document.createElement);var optionsSupported=!1,onceSupported=!1;try{var options$1={get passive(){return optionsSupported=!0},get once(){return onceSupported=optionsSupported=!0}};canUseDOM$1&&(window.addEventListener("test",options$1,options$1),window.removeEventListener("test",options$1,!0))}catch{}function addEventListener(d,c,et,_e){if(_e&&typeof _e!="boolean"&&!onceSupported){var tt=_e.once,nt=_e.capture,rt=et;!onceSupported&&tt&&(rt=et.__once||function it(ot){this.removeEventListener(c,it,nt),et.call(this,ot)},et.__once=rt),d.addEventListener(c,rt,optionsSupported?_e:nt)}d.addEventListener(c,et,_e)}function removeEventListener(d,c,et,_e){var tt=_e&&typeof _e!="boolean"?_e.capture:_e;d.removeEventListener(c,et,tt),et.__once&&d.removeEventListener(c,et.__once,tt)}function listen(d,c,et,_e){return addEventListener(d,c,et,_e),function(){removeEventListener(d,c,et,_e)}}function triggerEvent(d,c,et,_e){if(et===void 0&&(et=!1),_e===void 0&&(_e=!0),d){var tt=document.createEvent("HTMLEvents");tt.initEvent(c,et,_e),d.dispatchEvent(tt)}}function parseDuration$1(d){var c=style(d,"transitionDuration")||"",et=c.indexOf("ms")===-1?1e3:1;return parseFloat(c)*et}function emulateTransitionEnd(d,c,et){et===void 0&&(et=5);var _e=!1,tt=setTimeout(function(){_e||triggerEvent(d,"transitionend",!0)},c+et),nt=listen(d,"transitionend",function(){_e=!0},{once:!0});return function(){clearTimeout(tt),nt()}}function transitionEnd(d,c,et,_e){et==null&&(et=parseDuration$1(d)||0);var tt=emulateTransitionEnd(d,et,_e),nt=listen(d,"transitionend",c);return function(){tt(),nt()}}function parseDuration(d,c){const et=style(d,c)||"",_e=et.indexOf("ms")===-1?1e3:1;return parseFloat(et)*_e}function transitionEndListener(d,c){const et=parseDuration(d,"transitionDuration"),_e=parseDuration(d,"transitionDelay"),tt=transitionEnd(d,nt=>{nt.target===d&&(tt(),c(nt))},et+_e)}function createChainedFunction(...d){return d.filter(c=>c!=null).reduce((c,et)=>{if(typeof et!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return c===null?et:function(...tt){c.apply(this,tt),et.apply(this,tt)}},null)}function triggerBrowserReflow(d){d.offsetHeight}const toFnRef=d=>!d||typeof d=="function"?d:c=>{d.current=c};function mergeRefs(d,c){const et=toFnRef(d),_e=toFnRef(c);return tt=>{et&&et(tt),_e&&_e(tt)}}function useMergedRefs(d,c){return reactExports.useMemo(()=>mergeRefs(d,c),[d,c])}function safeFindDOMNode(d){return d&&"setState"in d?ReactDOM.findDOMNode(d):d??null}const TransitionWrapper=React.forwardRef(({onEnter:d,onEntering:c,onEntered:et,onExit:_e,onExiting:tt,onExited:nt,addEndListener:rt,children:it,childRef:ot,...st},at)=>{const lt=reactExports.useRef(null),ct=useMergedRefs(lt,ot),ut=vt=>{ct(safeFindDOMNode(vt))},dt=vt=>Et=>{vt&&lt.current&&vt(lt.current,Et)},ht=reactExports.useCallback(dt(d),[d]),yt=reactExports.useCallback(dt(c),[c]),gt=reactExports.useCallback(dt(et),[et]),ft=reactExports.useCallback(dt(_e),[_e]),mt=reactExports.useCallback(dt(tt),[tt]),pt=reactExports.useCallback(dt(nt),[nt]),xt=reactExports.useCallback(dt(rt),[rt]);return jsxRuntimeExports.jsx(Transition$1,{ref:at,...st,onEnter:ht,onEntered:gt,onEntering:yt,onExit:ft,onExited:pt,onExiting:mt,addEndListener:xt,nodeRef:lt,children:typeof it=="function"?(vt,Et)=>it(vt,{...Et,ref:ut}):React.cloneElement(it,{ref:ut})})}),TransitionWrapper$1=TransitionWrapper,MARGINS={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function getDefaultDimensionValue(d,c){const et=`offset${d[0].toUpperCase()}${d.slice(1)}`,_e=c[et],tt=MARGINS[d];return _e+parseInt(style(c,tt[0]),10)+parseInt(style(c,tt[1]),10)}const collapseStyles={[EXITED]:"collapse",[EXITING]:"collapsing",[ENTERING]:"collapsing",[ENTERED]:"collapse show"},Collapse=React.forwardRef(({onEnter:d,onEntering:c,onEntered:et,onExit:_e,onExiting:tt,className:nt,children:rt,dimension:it="height",in:ot=!1,timeout:st=300,mountOnEnter:at=!1,unmountOnExit:lt=!1,appear:ct=!1,getDimensionValue:ut=getDefaultDimensionValue,...dt},ht)=>{const yt=typeof it=="function"?it():it,gt=reactExports.useMemo(()=>createChainedFunction(vt=>{vt.style[yt]="0"},d),[yt,d]),ft=reactExports.useMemo(()=>createChainedFunction(vt=>{const Et=`scroll${yt[0].toUpperCase()}${yt.slice(1)}`;vt.style[yt]=`${vt[Et]}px`},c),[yt,c]),mt=reactExports.useMemo(()=>createChainedFunction(vt=>{vt.style[yt]=null},et),[yt,et]),pt=reactExports.useMemo(()=>createChainedFunction(vt=>{vt.style[yt]=`${ut(yt,vt)}px`,triggerBrowserReflow(vt)},_e),[_e,ut,yt]),xt=reactExports.useMemo(()=>createChainedFunction(vt=>{vt.style[yt]=null},tt),[yt,tt]);return jsxRuntimeExports.jsx(TransitionWrapper$1,{ref:ht,addEndListener:transitionEndListener,...dt,"aria-expanded":dt.role?ot:null,onEnter:gt,onEntering:ft,onEntered:mt,onExit:pt,onExiting:xt,childRef:rt.ref,in:ot,timeout:st,mountOnEnter:at,unmountOnExit:lt,appear:ct,children:(vt,Et)=>React.cloneElement(rt,{...Et,className:classNames$1(nt,rt.props.className,collapseStyles[vt],yt==="width"&&"collapse-horizontal")})})}),Collapse$1=Collapse;function isAccordionItemSelected(d,c){return Array.isArray(d)?d.includes(c):d===c}const context$4=reactExports.createContext({});context$4.displayName="AccordionContext";const AccordionContext=context$4,AccordionCollapse=reactExports.forwardRef(({as:d="div",bsPrefix:c,className:et,children:_e,eventKey:tt,...nt},rt)=>{const{activeEventKey:it}=reactExports.useContext(AccordionContext);return c=useBootstrapPrefix(c,"accordion-collapse"),jsxRuntimeExports.jsx(Collapse$1,{ref:rt,in:isAccordionItemSelected(it,tt),...nt,className:classNames$1(et,c),children:jsxRuntimeExports.jsx(d,{children:reactExports.Children.only(_e)})})});AccordionCollapse.displayName="AccordionCollapse";const AccordionCollapse$1=AccordionCollapse,context$3=reactExports.createContext({eventKey:""});context$3.displayName="AccordionItemContext";const AccordionItemContext=context$3,AccordionBody=reactExports.forwardRef(({as:d="div",bsPrefix:c,className:et,onEnter:_e,onEntering:tt,onEntered:nt,onExit:rt,onExiting:it,onExited:ot,...st},at)=>{c=useBootstrapPrefix(c,"accordion-body");const{eventKey:lt}=reactExports.useContext(AccordionItemContext);return jsxRuntimeExports.jsx(AccordionCollapse$1,{eventKey:lt,onEnter:_e,onEntering:tt,onEntered:nt,onExit:rt,onExiting:it,onExited:ot,children:jsxRuntimeExports.jsx(d,{ref:at,...st,className:classNames$1(et,c)})})});AccordionBody.displayName="AccordionBody";const AccordionBody$1=AccordionBody;function useAccordionButton(d,c){const{activeEventKey:et,onSelect:_e,alwaysOpen:tt}=reactExports.useContext(AccordionContext);return nt=>{let rt=d===et?null:d;tt&&(Array.isArray(et)?et.includes(d)?rt=et.filter(it=>it!==d):rt=[...et,d]:rt=[d]),_e==null||_e(rt,nt),c==null||c(nt)}}const AccordionButton=reactExports.forwardRef(({as:d="button",bsPrefix:c,className:et,onClick:_e,...tt},nt)=>{c=useBootstrapPrefix(c,"accordion-button");const{eventKey:rt}=reactExports.useContext(AccordionItemContext),it=useAccordionButton(rt,_e),{activeEventKey:ot}=reactExports.useContext(AccordionContext);return d==="button"&&(tt.type="button"),jsxRuntimeExports.jsx(d,{ref:nt,onClick:it,...tt,"aria-expanded":Array.isArray(ot)?ot.includes(rt):rt===ot,className:classNames$1(et,c,!isAccordionItemSelected(ot,rt)&&"collapsed")})});AccordionButton.displayName="AccordionButton";const AccordionButton$1=AccordionButton,AccordionHeader=reactExports.forwardRef(({as:d="h2",bsPrefix:c,className:et,children:_e,onClick:tt,...nt},rt)=>(c=useBootstrapPrefix(c,"accordion-header"),jsxRuntimeExports.jsx(d,{ref:rt,...nt,className:classNames$1(et,c),children:jsxRuntimeExports.jsx(AccordionButton$1,{onClick:tt,children:_e})})));AccordionHeader.displayName="AccordionHeader";const AccordionHeader$1=AccordionHeader,AccordionItem=reactExports.forwardRef(({as:d="div",bsPrefix:c,className:et,eventKey:_e,...tt},nt)=>{c=useBootstrapPrefix(c,"accordion-item");const rt=reactExports.useMemo(()=>({eventKey:_e}),[_e]);return jsxRuntimeExports.jsx(AccordionItemContext.Provider,{value:rt,children:jsxRuntimeExports.jsx(d,{ref:nt,...tt,className:classNames$1(et,c)})})});AccordionItem.displayName="AccordionItem";const AccordionItem$1=AccordionItem,Accordion=reactExports.forwardRef((d,c)=>{const{as:et="div",activeKey:_e,bsPrefix:tt,className:nt,onSelect:rt,flush:it,alwaysOpen:ot,...st}=useUncontrolled(d,{activeKey:"onSelect"}),at=useBootstrapPrefix(tt,"accordion"),lt=reactExports.useMemo(()=>({activeEventKey:_e,onSelect:rt,alwaysOpen:ot}),[_e,rt,ot]);return jsxRuntimeExports.jsx(AccordionContext.Provider,{value:lt,children:jsxRuntimeExports.jsx(et,{ref:c,...st,className:classNames$1(nt,at,it&&`${at}-flush`)})})});Accordion.displayName="Accordion";const Accordion$1=Object.assign(Accordion,{Button:AccordionButton$1,Collapse:AccordionCollapse$1,Item:AccordionItem$1,Header:AccordionHeader$1,Body:AccordionBody$1});function useCommittedRef(d){const c=reactExports.useRef(d);return reactExports.useEffect(()=>{c.current=d},[d]),c}function useEventCallback(d){const c=useCommittedRef(d);return reactExports.useCallback(function(...et){return c.current&&c.current(...et)},[c])}function useCallbackRef(){return reactExports.useState(null)}function useMounted(){const d=reactExports.useRef(!0),c=reactExports.useRef(()=>d.current);return reactExports.useEffect(()=>(d.current=!0,()=>{d.current=!1}),[]),c.current}function usePrevious$1(d){const c=reactExports.useRef(null);return reactExports.useEffect(()=>{c.current=d}),c.current}const isReactNative=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",isDOM=typeof document<"u",useIsomorphicEffect=isDOM||isReactNative?reactExports.useLayoutEffect:reactExports.useEffect,_excluded$b=["as","disabled"];function _objectWithoutPropertiesLoose$b(d,c){if(d==null)return{};var et={},_e=Object.keys(d),tt,nt;for(nt=0;nt<_e.length;nt++)tt=_e[nt],!(c.indexOf(tt)>=0)&&(et[tt]=d[tt]);return et}function isTrivialHref$1(d){return!d||d.trim()==="#"}function useButtonProps({tagName:d,disabled:c,href:et,target:_e,rel:tt,role:nt,onClick:rt,tabIndex:it=0,type:ot}){d||(et!=null||_e!=null||tt!=null?d="a":d="button");const st={tagName:d};if(d==="button")return[{type:ot||"button",disabled:c},st];const at=ct=>{if((c||d==="a"&&isTrivialHref$1(et))&&ct.preventDefault(),c){ct.stopPropagation();return}rt==null||rt(ct)},lt=ct=>{ct.key===" "&&(ct.preventDefault(),at(ct))};return d==="a"&&(et||(et="#"),c&&(et=void 0)),[{role:nt??"button",disabled:void 0,tabIndex:c?void 0:it,href:et,target:d==="a"?_e:void 0,"aria-disabled":c||void 0,rel:d==="a"?tt:void 0,onClick:at,onKeyDown:lt},st]}const Button$2=reactExports.forwardRef((d,c)=>{let{as:et,disabled:_e}=d,tt=_objectWithoutPropertiesLoose$b(d,_excluded$b);const[nt,{tagName:rt}]=useButtonProps(Object.assign({tagName:et,disabled:_e},tt));return jsxRuntimeExports.jsx(rt,Object.assign({},tt,nt,{ref:c}))});Button$2.displayName="Button";const _excluded$a=["onKeyDown"];function _objectWithoutPropertiesLoose$a(d,c){if(d==null)return{};var et={},_e=Object.keys(d),tt,nt;for(nt=0;nt<_e.length;nt++)tt=_e[nt],!(c.indexOf(tt)>=0)&&(et[tt]=d[tt]);return et}function isTrivialHref(d){return!d||d.trim()==="#"}const Anchor=reactExports.forwardRef((d,c)=>{let{onKeyDown:et}=d,_e=_objectWithoutPropertiesLoose$a(d,_excluded$a);const[tt]=useButtonProps(Object.assign({tagName:"a"},_e)),nt=useEventCallback(rt=>{tt.onKeyDown(rt),et==null||et(rt)});return isTrivialHref(_e.href)||_e.role==="button"?jsxRuntimeExports.jsx("a",Object.assign({ref:c},_e,tt,{onKeyDown:nt})):jsxRuntimeExports.jsx("a",Object.assign({ref:c},_e,{onKeyDown:et}))});Anchor.displayName="Anchor";const Anchor$1=Anchor,fadeStyles={[ENTERING]:"show",[ENTERED]:"show"},Fade=reactExports.forwardRef(({className:d,children:c,transitionClasses:et={},onEnter:_e,...tt},nt)=>{const rt={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...tt},it=reactExports.useCallback((ot,st)=>{triggerBrowserReflow(ot),_e==null||_e(ot,st)},[_e]);return jsxRuntimeExports.jsx(TransitionWrapper$1,{ref:nt,addEndListener:transitionEndListener,...rt,onEnter:it,childRef:c.ref,children:(ot,st)=>reactExports.cloneElement(c,{...st,className:classNames$1("fade",d,c.props.className,fadeStyles[ot],et[ot])})})});Fade.displayName="Fade";const Fade$1=Fade,propTypes$2={"aria-label":PropTypes.string,onClick:PropTypes.func,variant:PropTypes.oneOf(["white"])},CloseButton=reactExports.forwardRef(({className:d,variant:c,"aria-label":et="Close",..._e},tt)=>jsxRuntimeExports.jsx("button",{ref:tt,type:"button",className:classNames$1("btn-close",c&&`btn-close-${c}`,d),"aria-label":et,..._e}));CloseButton.displayName="CloseButton";CloseButton.propTypes=propTypes$2;const CloseButton$1=CloseButton,divWithClassName=d=>reactExports.forwardRef((c,et)=>jsxRuntimeExports.jsx("div",{...c,ref:et,className:classNames$1(c.className,d)}));var rHyphen=/-(.)/g;function camelize(d){return d.replace(rHyphen,function(c,et){return et.toUpperCase()})}const pascalCase=d=>d[0].toUpperCase()+camelize(d).slice(1);function createWithBsPrefix(d,{displayName:c=pascalCase(d),Component:et,defaultProps:_e}={}){const tt=reactExports.forwardRef(({className:nt,bsPrefix:rt,as:it=et||"div",...ot},st)=>{const at={..._e,...ot},lt=useBootstrapPrefix(rt,d);return jsxRuntimeExports.jsx(it,{ref:st,className:classNames$1(nt,lt),...at})});return tt.displayName=c,tt}const DivStyledAsH4$1=divWithClassName("h4");DivStyledAsH4$1.displayName="DivStyledAsH4";const AlertHeading=createWithBsPrefix("alert-heading",{Component:DivStyledAsH4$1}),AlertLink=createWithBsPrefix("alert-link",{Component:Anchor$1}),Alert=reactExports.forwardRef((d,c)=>{const{bsPrefix:et,show:_e=!0,closeLabel:tt="Close alert",closeVariant:nt,className:rt,children:it,variant:ot="primary",onClose:st,dismissible:at,transition:lt=Fade$1,...ct}=useUncontrolled(d,{show:"onClose"}),ut=useBootstrapPrefix(et,"alert"),dt=useEventCallback(gt=>{st&&st(!1,gt)}),ht=lt===!0?Fade$1:lt,yt=jsxRuntimeExports.jsxs("div",{role:"alert",...ht?void 0:ct,ref:c,className:classNames$1(rt,ut,ot&&`${ut}-${ot}`,at&&`${ut}-dismissible`),children:[at&&jsxRuntimeExports.jsx(CloseButton$1,{onClick:dt,"aria-label":tt,variant:nt}),it]});return ht?jsxRuntimeExports.jsx(ht,{unmountOnExit:!0,...ct,ref:void 0,in:_e,children:yt}):_e?yt:null});Alert.displayName="Alert";const Alert$1=Object.assign(Alert,{Link:AlertLink,Heading:AlertHeading}),Button=reactExports.forwardRef(({as:d,bsPrefix:c,variant:et="primary",size:_e,active:tt=!1,disabled:nt=!1,className:rt,...it},ot)=>{const st=useBootstrapPrefix(c,"btn"),[at,{tagName:lt}]=useButtonProps({tagName:d,disabled:nt,...it}),ct=lt;return jsxRuntimeExports.jsx(ct,{...at,...it,ref:ot,disabled:nt,className:classNames$1(rt,st,tt&&"active",et&&`${st}-${et}`,_e&&`${st}-${_e}`,it.href&&nt&&"disabled")})});Button.displayName="Button";const Button$1=Button,ButtonGroup=reactExports.forwardRef(({bsPrefix:d,size:c,vertical:et=!1,className:_e,role:tt="group",as:nt="div",...rt},it)=>{const ot=useBootstrapPrefix(d,"btn-group");let st=ot;return et&&(st=`${ot}-vertical`),jsxRuntimeExports.jsx(nt,{...rt,ref:it,role:tt,className:classNames$1(_e,st,c&&`${ot}-${c}`)})});ButtonGroup.displayName="ButtonGroup";const ButtonGroup$1=ButtonGroup,context$2=reactExports.createContext(null);context$2.displayName="CardHeaderContext";const CardHeaderContext=context$2;function useUpdatedRef(d){const c=reactExports.useRef(d);return c.current=d,c}function useWillUnmount(d){const c=useUpdatedRef(d);reactExports.useEffect(()=>()=>c.current(),[])}const MAX_DELAY_MS=2**31-1;function setChainedTimeout(d,c,et){const _e=et-Date.now();d.current=_e<=MAX_DELAY_MS?setTimeout(c,_e):setTimeout(()=>setChainedTimeout(d,c,et),MAX_DELAY_MS)}function useTimeout(){const d=useMounted(),c=reactExports.useRef();return useWillUnmount(()=>clearTimeout(c.current)),reactExports.useMemo(()=>{const et=()=>clearTimeout(c.current);function _e(tt,nt=0){d()&&(et(),nt<=MAX_DELAY_MS?c.current=setTimeout(tt,nt):setChainedTimeout(c,tt,Date.now()+nt))}return{set:_e,clear:et}},[])}function map(d,c){let et=0;return reactExports.Children.map(d,_e=>reactExports.isValidElement(_e)?c(_e,et++):_e)}function hasChildOfType(d,c){return reactExports.Children.toArray(d).some(et=>reactExports.isValidElement(et)&&et.type===c)}function useCol({as:d,bsPrefix:c,className:et,..._e}){c=useBootstrapPrefix(c,"col");const tt=useBootstrapBreakpoints(),nt=useBootstrapMinBreakpoint(),rt=[],it=[];return tt.forEach(ot=>{const st=_e[ot];delete _e[ot];let at,lt,ct;typeof st=="object"&&st!=null?{span:at,offset:lt,order:ct}=st:at=st;const ut=ot!==nt?`-${ot}`:"";at&&rt.push(at===!0?`${c}${ut}`:`${c}${ut}-${at}`),ct!=null&&it.push(`order${ut}-${ct}`),lt!=null&&it.push(`offset${ut}-${lt}`)}),[{..._e,className:classNames$1(et,...rt,...it)},{as:d,bsPrefix:c,spans:rt}]}const Col=reactExports.forwardRef((d,c)=>{const[{className:et,..._e},{as:tt="div",bsPrefix:nt,spans:rt}]=useCol(d);return jsxRuntimeExports.jsx(tt,{..._e,ref:c,className:classNames$1(et,!rt.length&&nt)})});Col.displayName="Col";const Col$1=Col;var toArray=Function.prototype.bind.call(Function.prototype.call,[].slice);function qsa(d,c){return toArray(d.querySelectorAll(c))}function useForceUpdate(){const[,d]=reactExports.useReducer(c=>!c,!1);return d}var has=Object.prototype.hasOwnProperty;function find(d,c,et){for(et of d.keys())if(dequal(et,c))return et}function dequal(d,c){var et,_e,tt;if(d===c)return!0;if(d&&c&&(et=d.constructor)===c.constructor){if(et===Date)return d.getTime()===c.getTime();if(et===RegExp)return d.toString()===c.toString();if(et===Array){if((_e=d.length)===c.length)for(;_e--&&dequal(d[_e],c[_e]););return _e===-1}if(et===Set){if(d.size!==c.size)return!1;for(_e of d)if(tt=_e,tt&&typeof tt=="object"&&(tt=find(c,tt),!tt)||!c.has(tt))return!1;return!0}if(et===Map){if(d.size!==c.size)return!1;for(_e of d)if(tt=_e[0],tt&&typeof tt=="object"&&(tt=find(c,tt),!tt)||!dequal(_e[1],c.get(tt)))return!1;return!0}if(et===ArrayBuffer)d=new Uint8Array(d),c=new Uint8Array(c);else if(et===DataView){if((_e=d.byteLength)===c.byteLength)for(;_e--&&d.getInt8(_e)===c.getInt8(_e););return _e===-1}if(ArrayBuffer.isView(d)){if((_e=d.byteLength)===c.byteLength)for(;_e--&&d[_e]===c[_e];);return _e===-1}if(!et||typeof d=="object"){_e=0;for(et in d)if(has.call(d,et)&&++_e&&!has.call(c,et)||!(et in c)||!dequal(d[et],c[et]))return!1;return Object.keys(c).length===_e}}return d!==d&&c!==c}function useSafeState(d){const c=useMounted();return[d[0],reactExports.useCallback(et=>{if(c())return d[1](et)},[c,d[1]])]}var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(d,c){return d.concat([c+"-"+start,c+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(d,c){return d.concat([c,c+"-"+start,c+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getBasePlacement(d){return d.split("-")[0]}function getWindow$1(d){if(d==null)return window;if(d.toString()!=="[object Window]"){var c=d.ownerDocument;return c&&c.defaultView||window}return d}function isElement(d){var c=getWindow$1(d).Element;return d instanceof c||d instanceof Element}function isHTMLElement$1(d){var c=getWindow$1(d).HTMLElement;return d instanceof c||d instanceof HTMLElement}function isShadowRoot(d){if(typeof ShadowRoot>"u")return!1;var c=getWindow$1(d).ShadowRoot;return d instanceof c||d instanceof ShadowRoot}var max=Math.max,min=Math.min,round=Math.round;function getUAString(){var d=navigator.userAgentData;return d!=null&&d.brands&&Array.isArray(d.brands)?d.brands.map(function(c){return c.brand+"/"+c.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(d,c,et){c===void 0&&(c=!1),et===void 0&&(et=!1);var _e=d.getBoundingClientRect(),tt=1,nt=1;c&&isHTMLElement$1(d)&&(tt=d.offsetWidth>0&&round(_e.width)/d.offsetWidth||1,nt=d.offsetHeight>0&&round(_e.height)/d.offsetHeight||1);var rt=isElement(d)?getWindow$1(d):window,it=rt.visualViewport,ot=!isLayoutViewport()&&et,st=(_e.left+(ot&&it?it.offsetLeft:0))/tt,at=(_e.top+(ot&&it?it.offsetTop:0))/nt,lt=_e.width/tt,ct=_e.height/nt;return{width:lt,height:ct,top:at,right:st+lt,bottom:at+ct,left:st,x:st,y:at}}function getLayoutRect(d){var c=getBoundingClientRect(d),et=d.offsetWidth,_e=d.offsetHeight;return Math.abs(c.width-et)<=1&&(et=c.width),Math.abs(c.height-_e)<=1&&(_e=c.height),{x:d.offsetLeft,y:d.offsetTop,width:et,height:_e}}function contains$1(d,c){var et=c.getRootNode&&c.getRootNode();if(d.contains(c))return!0;if(et&&isShadowRoot(et)){var _e=c;do{if(_e&&d.isSameNode(_e))return!0;_e=_e.parentNode||_e.host}while(_e)}return!1}function getNodeName(d){return d?(d.nodeName||"").toLowerCase():null}function getComputedStyle(d){return getWindow$1(d).getComputedStyle(d)}function isTableElement(d){return["table","td","th"].indexOf(getNodeName(d))>=0}function getDocumentElement(d){return((isElement(d)?d.ownerDocument:d.document)||window.document).documentElement}function getParentNode(d){return getNodeName(d)==="html"?d:d.assignedSlot||d.parentNode||(isShadowRoot(d)?d.host:null)||getDocumentElement(d)}function getTrueOffsetParent(d){return!isHTMLElement$1(d)||getComputedStyle(d).position==="fixed"?null:d.offsetParent}function getContainingBlock(d){var c=/firefox/i.test(getUAString()),et=/Trident/i.test(getUAString());if(et&&isHTMLElement$1(d)){var _e=getComputedStyle(d);if(_e.position==="fixed")return null}var tt=getParentNode(d);for(isShadowRoot(tt)&&(tt=tt.host);isHTMLElement$1(tt)&&["html","body"].indexOf(getNodeName(tt))<0;){var nt=getComputedStyle(tt);if(nt.transform!=="none"||nt.perspective!=="none"||nt.contain==="paint"||["transform","perspective"].indexOf(nt.willChange)!==-1||c&&nt.willChange==="filter"||c&&nt.filter&&nt.filter!=="none")return tt;tt=tt.parentNode}return null}function getOffsetParent(d){for(var c=getWindow$1(d),et=getTrueOffsetParent(d);et&&isTableElement(et)&&getComputedStyle(et).position==="static";)et=getTrueOffsetParent(et);return et&&(getNodeName(et)==="html"||getNodeName(et)==="body"&&getComputedStyle(et).position==="static")?c:et||getContainingBlock(d)||c}function getMainAxisFromPlacement(d){return["top","bottom"].indexOf(d)>=0?"x":"y"}function within(d,c,et){return max(d,min(c,et))}function withinMaxClamp(d,c,et){var _e=within(d,c,et);return _e>et?et:_e}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(d){return Object.assign({},getFreshSideObject(),d)}function expandToHashMap(d,c){return c.reduce(function(et,_e){return et[_e]=d,et},{})}var toPaddingObject=function(c,et){return c=typeof c=="function"?c(Object.assign({},et.rects,{placement:et.placement})):c,mergePaddingObject(typeof c!="number"?c:expandToHashMap(c,basePlacements))};function arrow(d){var c,et=d.state,_e=d.name,tt=d.options,nt=et.elements.arrow,rt=et.modifiersData.popperOffsets,it=getBasePlacement(et.placement),ot=getMainAxisFromPlacement(it),st=[left,right].indexOf(it)>=0,at=st?"height":"width";if(!(!nt||!rt)){var lt=toPaddingObject(tt.padding,et),ct=getLayoutRect(nt),ut=ot==="y"?top:left,dt=ot==="y"?bottom:right,ht=et.rects.reference[at]+et.rects.reference[ot]-rt[ot]-et.rects.popper[at],yt=rt[ot]-et.rects.reference[ot],gt=getOffsetParent(nt),ft=gt?ot==="y"?gt.clientHeight||0:gt.clientWidth||0:0,mt=ht/2-yt/2,pt=lt[ut],xt=ft-ct[at]-lt[dt],vt=ft/2-ct[at]/2+mt,Et=within(pt,vt,xt),_t=ot;et.modifiersData[_e]=(c={},c[_t]=Et,c.centerOffset=Et-vt,c)}}function effect$1(d){var c=d.state,et=d.options,_e=et.element,tt=_e===void 0?"[data-popper-arrow]":_e;tt!=null&&(typeof tt=="string"&&(tt=c.elements.popper.querySelector(tt),!tt)||contains$1(c.elements.popper,tt)&&(c.elements.arrow=tt))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(d){return d.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(d,c){var et=d.x,_e=d.y,tt=c.devicePixelRatio||1;return{x:round(et*tt)/tt||0,y:round(_e*tt)/tt||0}}function mapToStyles(d){var c,et=d.popper,_e=d.popperRect,tt=d.placement,nt=d.variation,rt=d.offsets,it=d.position,ot=d.gpuAcceleration,st=d.adaptive,at=d.roundOffsets,lt=d.isFixed,ct=rt.x,ut=ct===void 0?0:ct,dt=rt.y,ht=dt===void 0?0:dt,yt=typeof at=="function"?at({x:ut,y:ht}):{x:ut,y:ht};ut=yt.x,ht=yt.y;var gt=rt.hasOwnProperty("x"),ft=rt.hasOwnProperty("y"),mt=left,pt=top,xt=window;if(st){var vt=getOffsetParent(et),Et="clientHeight",_t="clientWidth";if(vt===getWindow$1(et)&&(vt=getDocumentElement(et),getComputedStyle(vt).position!=="static"&&it==="absolute"&&(Et="scrollHeight",_t="scrollWidth")),vt=vt,tt===top||(tt===left||tt===right)&&nt===end){pt=bottom;var wt=lt&&vt===xt&&xt.visualViewport?xt.visualViewport.height:vt[Et];ht-=wt-_e.height,ht*=ot?1:-1}if(tt===left||(tt===top||tt===bottom)&&nt===end){mt=right;var bt=lt&&vt===xt&&xt.visualViewport?xt.visualViewport.width:vt[_t];ut-=bt-_e.width,ut*=ot?1:-1}}var $t=Object.assign({position:it},st&&unsetSides),kt=at===!0?roundOffsetsByDPR({x:ut,y:ht},getWindow$1(et)):{x:ut,y:ht};if(ut=kt.x,ht=kt.y,ot){var Nt;return Object.assign({},$t,(Nt={},Nt[pt]=ft?"0":"",Nt[mt]=gt?"0":"",Nt.transform=(xt.devicePixelRatio||1)<=1?"translate("+ut+"px, "+ht+"px)":"translate3d("+ut+"px, "+ht+"px, 0)",Nt))}return Object.assign({},$t,(c={},c[pt]=ft?ht+"px":"",c[mt]=gt?ut+"px":"",c.transform="",c))}function computeStyles(d){var c=d.state,et=d.options,_e=et.gpuAcceleration,tt=_e===void 0?!0:_e,nt=et.adaptive,rt=nt===void 0?!0:nt,it=et.roundOffsets,ot=it===void 0?!0:it,st={placement:getBasePlacement(c.placement),variation:getVariation(c.placement),popper:c.elements.popper,popperRect:c.rects.popper,gpuAcceleration:tt,isFixed:c.options.strategy==="fixed"};c.modifiersData.popperOffsets!=null&&(c.styles.popper=Object.assign({},c.styles.popper,mapToStyles(Object.assign({},st,{offsets:c.modifiersData.popperOffsets,position:c.options.strategy,adaptive:rt,roundOffsets:ot})))),c.modifiersData.arrow!=null&&(c.styles.arrow=Object.assign({},c.styles.arrow,mapToStyles(Object.assign({},st,{offsets:c.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:ot})))),c.attributes.popper=Object.assign({},c.attributes.popper,{"data-popper-placement":c.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(d){var c=d.state,et=d.instance,_e=d.options,tt=_e.scroll,nt=tt===void 0?!0:tt,rt=_e.resize,it=rt===void 0?!0:rt,ot=getWindow$1(c.elements.popper),st=[].concat(c.scrollParents.reference,c.scrollParents.popper);return nt&&st.forEach(function(at){at.addEventListener("scroll",et.update,passive)}),it&&ot.addEventListener("resize",et.update,passive),function(){nt&&st.forEach(function(at){at.removeEventListener("scroll",et.update,passive)}),it&&ot.removeEventListener("resize",et.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(d){return d.replace(/left|right|bottom|top/g,function(c){return hash$1[c]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(d){return d.replace(/start|end/g,function(c){return hash[c]})}function getWindowScroll(d){var c=getWindow$1(d),et=c.pageXOffset,_e=c.pageYOffset;return{scrollLeft:et,scrollTop:_e}}function getWindowScrollBarX(d){return getBoundingClientRect(getDocumentElement(d)).left+getWindowScroll(d).scrollLeft}function getViewportRect(d,c){var et=getWindow$1(d),_e=getDocumentElement(d),tt=et.visualViewport,nt=_e.clientWidth,rt=_e.clientHeight,it=0,ot=0;if(tt){nt=tt.width,rt=tt.height;var st=isLayoutViewport();(st||!st&&c==="fixed")&&(it=tt.offsetLeft,ot=tt.offsetTop)}return{width:nt,height:rt,x:it+getWindowScrollBarX(d),y:ot}}function getDocumentRect(d){var c,et=getDocumentElement(d),_e=getWindowScroll(d),tt=(c=d.ownerDocument)==null?void 0:c.body,nt=max(et.scrollWidth,et.clientWidth,tt?tt.scrollWidth:0,tt?tt.clientWidth:0),rt=max(et.scrollHeight,et.clientHeight,tt?tt.scrollHeight:0,tt?tt.clientHeight:0),it=-_e.scrollLeft+getWindowScrollBarX(d),ot=-_e.scrollTop;return getComputedStyle(tt||et).direction==="rtl"&&(it+=max(et.clientWidth,tt?tt.clientWidth:0)-nt),{width:nt,height:rt,x:it,y:ot}}function isScrollParent(d){var c=getComputedStyle(d),et=c.overflow,_e=c.overflowX,tt=c.overflowY;return/auto|scroll|overlay|hidden/.test(et+tt+_e)}function getScrollParent(d){return["html","body","#document"].indexOf(getNodeName(d))>=0?d.ownerDocument.body:isHTMLElement$1(d)&&isScrollParent(d)?d:getScrollParent(getParentNode(d))}function listScrollParents(d,c){var et;c===void 0&&(c=[]);var _e=getScrollParent(d),tt=_e===((et=d.ownerDocument)==null?void 0:et.body),nt=getWindow$1(_e),rt=tt?[nt].concat(nt.visualViewport||[],isScrollParent(_e)?_e:[]):_e,it=c.concat(rt);return tt?it:it.concat(listScrollParents(getParentNode(rt)))}function rectToClientRect(d){return Object.assign({},d,{left:d.x,top:d.y,right:d.x+d.width,bottom:d.y+d.height})}function getInnerBoundingClientRect(d,c){var et=getBoundingClientRect(d,!1,c==="fixed");return et.top=et.top+d.clientTop,et.left=et.left+d.clientLeft,et.bottom=et.top+d.clientHeight,et.right=et.left+d.clientWidth,et.width=d.clientWidth,et.height=d.clientHeight,et.x=et.left,et.y=et.top,et}function getClientRectFromMixedType(d,c,et){return c===viewport?rectToClientRect(getViewportRect(d,et)):isElement(c)?getInnerBoundingClientRect(c,et):rectToClientRect(getDocumentRect(getDocumentElement(d)))}function getClippingParents(d){var c=listScrollParents(getParentNode(d)),et=["absolute","fixed"].indexOf(getComputedStyle(d).position)>=0,_e=et&&isHTMLElement$1(d)?getOffsetParent(d):d;return isElement(_e)?c.filter(function(tt){return isElement(tt)&&contains$1(tt,_e)&&getNodeName(tt)!=="body"}):[]}function getClippingRect(d,c,et,_e){var tt=c==="clippingParents"?getClippingParents(d):[].concat(c),nt=[].concat(tt,[et]),rt=nt[0],it=nt.reduce(function(ot,st){var at=getClientRectFromMixedType(d,st,_e);return ot.top=max(at.top,ot.top),ot.right=min(at.right,ot.right),ot.bottom=min(at.bottom,ot.bottom),ot.left=max(at.left,ot.left),ot},getClientRectFromMixedType(d,rt,_e));return it.width=it.right-it.left,it.height=it.bottom-it.top,it.x=it.left,it.y=it.top,it}function computeOffsets(d){var c=d.reference,et=d.element,_e=d.placement,tt=_e?getBasePlacement(_e):null,nt=_e?getVariation(_e):null,rt=c.x+c.width/2-et.width/2,it=c.y+c.height/2-et.height/2,ot;switch(tt){case top:ot={x:rt,y:c.y-et.height};break;case bottom:ot={x:rt,y:c.y+c.height};break;case right:ot={x:c.x+c.width,y:it};break;case left:ot={x:c.x-et.width,y:it};break;default:ot={x:c.x,y:c.y}}var st=tt?getMainAxisFromPlacement(tt):null;if(st!=null){var at=st==="y"?"height":"width";switch(nt){case start:ot[st]=ot[st]-(c[at]/2-et[at]/2);break;case end:ot[st]=ot[st]+(c[at]/2-et[at]/2);break}}return ot}function detectOverflow(d,c){c===void 0&&(c={});var et=c,_e=et.placement,tt=_e===void 0?d.placement:_e,nt=et.strategy,rt=nt===void 0?d.strategy:nt,it=et.boundary,ot=it===void 0?clippingParents:it,st=et.rootBoundary,at=st===void 0?viewport:st,lt=et.elementContext,ct=lt===void 0?popper:lt,ut=et.altBoundary,dt=ut===void 0?!1:ut,ht=et.padding,yt=ht===void 0?0:ht,gt=mergePaddingObject(typeof yt!="number"?yt:expandToHashMap(yt,basePlacements)),ft=ct===popper?reference:popper,mt=d.rects.popper,pt=d.elements[dt?ft:ct],xt=getClippingRect(isElement(pt)?pt:pt.contextElement||getDocumentElement(d.elements.popper),ot,at,rt),vt=getBoundingClientRect(d.elements.reference),Et=computeOffsets({reference:vt,element:mt,strategy:"absolute",placement:tt}),_t=rectToClientRect(Object.assign({},mt,Et)),wt=ct===popper?_t:vt,bt={top:xt.top-wt.top+gt.top,bottom:wt.bottom-xt.bottom+gt.bottom,left:xt.left-wt.left+gt.left,right:wt.right-xt.right+gt.right},$t=d.modifiersData.offset;if(ct===popper&&$t){var kt=$t[tt];Object.keys(bt).forEach(function(Nt){var At=[right,bottom].indexOf(Nt)>=0?1:-1,Gt=[top,bottom].indexOf(Nt)>=0?"y":"x";bt[Nt]+=kt[Gt]*At})}return bt}function computeAutoPlacement(d,c){c===void 0&&(c={});var et=c,_e=et.placement,tt=et.boundary,nt=et.rootBoundary,rt=et.padding,it=et.flipVariations,ot=et.allowedAutoPlacements,st=ot===void 0?placements:ot,at=getVariation(_e),lt=at?it?variationPlacements:variationPlacements.filter(function(dt){return getVariation(dt)===at}):basePlacements,ct=lt.filter(function(dt){return st.indexOf(dt)>=0});ct.length===0&&(ct=lt);var ut=ct.reduce(function(dt,ht){return dt[ht]=detectOverflow(d,{placement:ht,boundary:tt,rootBoundary:nt,padding:rt})[getBasePlacement(ht)],dt},{});return Object.keys(ut).sort(function(dt,ht){return ut[dt]-ut[ht]})}function getExpandedFallbackPlacements(d){if(getBasePlacement(d)===auto)return[];var c=getOppositePlacement(d);return[getOppositeVariationPlacement(d),c,getOppositeVariationPlacement(c)]}function flip(d){var c=d.state,et=d.options,_e=d.name;if(!c.modifiersData[_e]._skip){for(var tt=et.mainAxis,nt=tt===void 0?!0:tt,rt=et.altAxis,it=rt===void 0?!0:rt,ot=et.fallbackPlacements,st=et.padding,at=et.boundary,lt=et.rootBoundary,ct=et.altBoundary,ut=et.flipVariations,dt=ut===void 0?!0:ut,ht=et.allowedAutoPlacements,yt=c.options.placement,gt=getBasePlacement(yt),ft=gt===yt,mt=ot||(ft||!dt?[getOppositePlacement(yt)]:getExpandedFallbackPlacements(yt)),pt=[yt].concat(mt).reduce(function(zt,en){return zt.concat(getBasePlacement(en)===auto?computeAutoPlacement(c,{placement:en,boundary:at,rootBoundary:lt,padding:st,flipVariations:dt,allowedAutoPlacements:ht}):en)},[]),xt=c.rects.reference,vt=c.rects.popper,Et=new Map,_t=!0,wt=pt[0],bt=0;bt<pt.length;bt++){var $t=pt[bt],kt=getBasePlacement($t),Nt=getVariation($t)===start,At=[top,bottom].indexOf(kt)>=0,Gt=At?"width":"height",Kt=detectOverflow(c,{placement:$t,boundary:at,rootBoundary:lt,altBoundary:ct,padding:st}),qt=At?Nt?right:left:Nt?bottom:top;xt[Gt]>vt[Gt]&&(qt=getOppositePlacement(qt));var Ot=getOppositePlacement(qt),Pt=[];if(nt&&Pt.push(Kt[kt]<=0),it&&Pt.push(Kt[qt]<=0,Kt[Ot]<=0),Pt.every(function(zt){return zt})){wt=$t,_t=!1;break}Et.set($t,Pt)}if(_t)for(var Lt=dt?3:1,Qt=function(en){var rn=pt.find(function(mn){var Zt=Et.get(mn);if(Zt)return Zt.slice(0,en).every(function(Tt){return Tt})});if(rn)return wt=rn,"break"},Wt=Lt;Wt>0;Wt--){var sn=Qt(Wt);if(sn==="break")break}c.placement!==wt&&(c.modifiersData[_e]._skip=!0,c.placement=wt,c.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(d,c,et){return et===void 0&&(et={x:0,y:0}),{top:d.top-c.height-et.y,right:d.right-c.width+et.x,bottom:d.bottom-c.height+et.y,left:d.left-c.width-et.x}}function isAnySideFullyClipped(d){return[top,right,bottom,left].some(function(c){return d[c]>=0})}function hide(d){var c=d.state,et=d.name,_e=c.rects.reference,tt=c.rects.popper,nt=c.modifiersData.preventOverflow,rt=detectOverflow(c,{elementContext:"reference"}),it=detectOverflow(c,{altBoundary:!0}),ot=getSideOffsets(rt,_e),st=getSideOffsets(it,tt,nt),at=isAnySideFullyClipped(ot),lt=isAnySideFullyClipped(st);c.modifiersData[et]={referenceClippingOffsets:ot,popperEscapeOffsets:st,isReferenceHidden:at,hasPopperEscaped:lt},c.attributes.popper=Object.assign({},c.attributes.popper,{"data-popper-reference-hidden":at,"data-popper-escaped":lt})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(d,c,et){var _e=getBasePlacement(d),tt=[left,top].indexOf(_e)>=0?-1:1,nt=typeof et=="function"?et(Object.assign({},c,{placement:d})):et,rt=nt[0],it=nt[1];return rt=rt||0,it=(it||0)*tt,[left,right].indexOf(_e)>=0?{x:it,y:rt}:{x:rt,y:it}}function offset(d){var c=d.state,et=d.options,_e=d.name,tt=et.offset,nt=tt===void 0?[0,0]:tt,rt=placements.reduce(function(at,lt){return at[lt]=distanceAndSkiddingToXY(lt,c.rects,nt),at},{}),it=rt[c.placement],ot=it.x,st=it.y;c.modifiersData.popperOffsets!=null&&(c.modifiersData.popperOffsets.x+=ot,c.modifiersData.popperOffsets.y+=st),c.modifiersData[_e]=rt}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(d){var c=d.state,et=d.name;c.modifiersData[et]=computeOffsets({reference:c.rects.reference,element:c.rects.popper,strategy:"absolute",placement:c.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(d){return d==="x"?"y":"x"}function preventOverflow(d){var c=d.state,et=d.options,_e=d.name,tt=et.mainAxis,nt=tt===void 0?!0:tt,rt=et.altAxis,it=rt===void 0?!1:rt,ot=et.boundary,st=et.rootBoundary,at=et.altBoundary,lt=et.padding,ct=et.tether,ut=ct===void 0?!0:ct,dt=et.tetherOffset,ht=dt===void 0?0:dt,yt=detectOverflow(c,{boundary:ot,rootBoundary:st,padding:lt,altBoundary:at}),gt=getBasePlacement(c.placement),ft=getVariation(c.placement),mt=!ft,pt=getMainAxisFromPlacement(gt),xt=getAltAxis(pt),vt=c.modifiersData.popperOffsets,Et=c.rects.reference,_t=c.rects.popper,wt=typeof ht=="function"?ht(Object.assign({},c.rects,{placement:c.placement})):ht,bt=typeof wt=="number"?{mainAxis:wt,altAxis:wt}:Object.assign({mainAxis:0,altAxis:0},wt),$t=c.modifiersData.offset?c.modifiersData.offset[c.placement]:null,kt={x:0,y:0};if(vt){if(nt){var Nt,At=pt==="y"?top:left,Gt=pt==="y"?bottom:right,Kt=pt==="y"?"height":"width",qt=vt[pt],Ot=qt+yt[At],Pt=qt-yt[Gt],Lt=ut?-_t[Kt]/2:0,Qt=ft===start?Et[Kt]:_t[Kt],Wt=ft===start?-_t[Kt]:-Et[Kt],sn=c.elements.arrow,zt=ut&&sn?getLayoutRect(sn):{width:0,height:0},en=c.modifiersData["arrow#persistent"]?c.modifiersData["arrow#persistent"].padding:getFreshSideObject(),rn=en[At],mn=en[Gt],Zt=within(0,Et[Kt],zt[Kt]),Tt=mt?Et[Kt]/2-Lt-Zt-rn-bt.mainAxis:Qt-Zt-rn-bt.mainAxis,Rt=mt?-Et[Kt]/2+Lt+Zt+mn+bt.mainAxis:Wt+Zt+mn+bt.mainAxis,jt=c.elements.arrow&&getOffsetParent(c.elements.arrow),Dt=jt?pt==="y"?jt.clientTop||0:jt.clientLeft||0:0,Mt=(Nt=$t==null?void 0:$t[pt])!=null?Nt:0,Vt=qt+Tt-Mt-Dt,Ht=qt+Rt-Mt,hn=within(ut?min(Ot,Vt):Ot,qt,ut?max(Pt,Ht):Pt);vt[pt]=hn,kt[pt]=hn-qt}if(it){var un,xn=pt==="x"?top:left,$n=pt==="x"?bottom:right,ln=vt[xt],wn=xt==="y"?"height":"width",Tn=ln+yt[xn],kn=ln-yt[$n],In=[top,left].indexOf(gt)!==-1,on=(un=$t==null?void 0:$t[xt])!=null?un:0,En=In?Tn:ln-Et[wn]-_t[wn]-on+bt.altAxis,_n=In?ln+Et[wn]+_t[wn]-on-bt.altAxis:kn,Cn=ut&&In?withinMaxClamp(En,ln,_n):within(ut?En:Tn,ln,ut?_n:kn);vt[xt]=Cn,kt[xt]=Cn-ln}c.modifiersData[_e]=kt}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(d){return{scrollLeft:d.scrollLeft,scrollTop:d.scrollTop}}function getNodeScroll(d){return d===getWindow$1(d)||!isHTMLElement$1(d)?getWindowScroll(d):getHTMLElementScroll(d)}function isElementScaled(d){var c=d.getBoundingClientRect(),et=round(c.width)/d.offsetWidth||1,_e=round(c.height)/d.offsetHeight||1;return et!==1||_e!==1}function getCompositeRect(d,c,et){et===void 0&&(et=!1);var _e=isHTMLElement$1(c),tt=isHTMLElement$1(c)&&isElementScaled(c),nt=getDocumentElement(c),rt=getBoundingClientRect(d,tt,et),it={scrollLeft:0,scrollTop:0},ot={x:0,y:0};return(_e||!_e&&!et)&&((getNodeName(c)!=="body"||isScrollParent(nt))&&(it=getNodeScroll(c)),isHTMLElement$1(c)?(ot=getBoundingClientRect(c,!0),ot.x+=c.clientLeft,ot.y+=c.clientTop):nt&&(ot.x=getWindowScrollBarX(nt))),{x:rt.left+it.scrollLeft-ot.x,y:rt.top+it.scrollTop-ot.y,width:rt.width,height:rt.height}}function order(d){var c=new Map,et=new Set,_e=[];d.forEach(function(nt){c.set(nt.name,nt)});function tt(nt){et.add(nt.name);var rt=[].concat(nt.requires||[],nt.requiresIfExists||[]);rt.forEach(function(it){if(!et.has(it)){var ot=c.get(it);ot&&tt(ot)}}),_e.push(nt)}return d.forEach(function(nt){et.has(nt.name)||tt(nt)}),_e}function orderModifiers(d){var c=order(d);return modifierPhases.reduce(function(et,_e){return et.concat(c.filter(function(tt){return tt.phase===_e}))},[])}function debounce(d){var c;return function(){return c||(c=new Promise(function(et){Promise.resolve().then(function(){c=void 0,et(d())})})),c}}function mergeByName(d){var c=d.reduce(function(et,_e){var tt=et[_e.name];return et[_e.name]=tt?Object.assign({},tt,_e,{options:Object.assign({},tt.options,_e.options),data:Object.assign({},tt.data,_e.data)}):_e,et},{});return Object.keys(c).map(function(et){return c[et]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var d=arguments.length,c=new Array(d),et=0;et<d;et++)c[et]=arguments[et];return!c.some(function(_e){return!(_e&&typeof _e.getBoundingClientRect=="function")})}function popperGenerator(d){d===void 0&&(d={});var c=d,et=c.defaultModifiers,_e=et===void 0?[]:et,tt=c.defaultOptions,nt=tt===void 0?DEFAULT_OPTIONS:tt;return function(it,ot,st){st===void 0&&(st=nt);var at={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,nt),modifiersData:{},elements:{reference:it,popper:ot},attributes:{},styles:{}},lt=[],ct=!1,ut={state:at,setOptions:function(gt){var ft=typeof gt=="function"?gt(at.options):gt;ht(),at.options=Object.assign({},nt,at.options,ft),at.scrollParents={reference:isElement(it)?listScrollParents(it):it.contextElement?listScrollParents(it.contextElement):[],popper:listScrollParents(ot)};var mt=orderModifiers(mergeByName([].concat(_e,at.options.modifiers)));return at.orderedModifiers=mt.filter(function(pt){return pt.enabled}),dt(),ut.update()},forceUpdate:function(){if(!ct){var gt=at.elements,ft=gt.reference,mt=gt.popper;if(areValidElements(ft,mt)){at.rects={reference:getCompositeRect(ft,getOffsetParent(mt),at.options.strategy==="fixed"),popper:getLayoutRect(mt)},at.reset=!1,at.placement=at.options.placement,at.orderedModifiers.forEach(function(bt){return at.modifiersData[bt.name]=Object.assign({},bt.data)});for(var pt=0;pt<at.orderedModifiers.length;pt++){if(at.reset===!0){at.reset=!1,pt=-1;continue}var xt=at.orderedModifiers[pt],vt=xt.fn,Et=xt.options,_t=Et===void 0?{}:Et,wt=xt.name;typeof vt=="function"&&(at=vt({state:at,options:_t,name:wt,instance:ut})||at)}}}},update:debounce(function(){return new Promise(function(yt){ut.forceUpdate(),yt(at)})}),destroy:function(){ht(),ct=!0}};if(!areValidElements(it,ot))return ut;ut.setOptions(st).then(function(yt){!ct&&st.onFirstUpdate&&st.onFirstUpdate(yt)});function dt(){at.orderedModifiers.forEach(function(yt){var gt=yt.name,ft=yt.options,mt=ft===void 0?{}:ft,pt=yt.effect;if(typeof pt=="function"){var xt=pt({state:at,name:gt,instance:ut,options:mt}),vt=function(){};lt.push(xt||vt)}})}function ht(){lt.forEach(function(yt){return yt()}),lt=[]}return ut}}const createPopper=popperGenerator({defaultModifiers:[hide$1,popperOffsets$1,computeStyles$1,eventListeners,offset$1,flip$1,preventOverflow$1,arrow$1]}),_excluded$9=["enabled","placement","strategy","modifiers"];function _objectWithoutPropertiesLoose$9(d,c){if(d==null)return{};var et={},_e=Object.keys(d),tt,nt;for(nt=0;nt<_e.length;nt++)tt=_e[nt],!(c.indexOf(tt)>=0)&&(et[tt]=d[tt]);return et}const disabledApplyStylesModifier={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},ariaDescribedByModifier={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:d})=>()=>{const{reference:c,popper:et}=d.elements;if("removeAttribute"in c){const _e=(c.getAttribute("aria-describedby")||"").split(",").filter(tt=>tt.trim()!==et.id);_e.length?c.setAttribute("aria-describedby",_e.join(",")):c.removeAttribute("aria-describedby")}},fn:({state:d})=>{var c;const{popper:et,reference:_e}=d.elements,tt=(c=et.getAttribute("role"))==null?void 0:c.toLowerCase();if(et.id&&tt==="tooltip"&&"setAttribute"in _e){const nt=_e.getAttribute("aria-describedby");if(nt&&nt.split(",").indexOf(et.id)!==-1)return;_e.setAttribute("aria-describedby",nt?`${nt},${et.id}`:et.id)}}},EMPTY_MODIFIERS=[];function usePopper(d,c,et={}){let{enabled:_e=!0,placement:tt="bottom",strategy:nt="absolute",modifiers:rt=EMPTY_MODIFIERS}=et,it=_objectWithoutPropertiesLoose$9(et,_excluded$9);const ot=reactExports.useRef(rt),st=reactExports.useRef(),at=reactExports.useCallback(()=>{var yt;(yt=st.current)==null||yt.update()},[]),lt=reactExports.useCallback(()=>{var yt;(yt=st.current)==null||yt.forceUpdate()},[]),[ct,ut]=useSafeState(reactExports.useState({placement:tt,update:at,forceUpdate:lt,attributes:{},styles:{popper:{},arrow:{}}})),dt=reactExports.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:yt})=>{const gt={},ft={};Object.keys(yt.elements).forEach(mt=>{gt[mt]=yt.styles[mt],ft[mt]=yt.attributes[mt]}),ut({state:yt,styles:gt,attributes:ft,update:at,forceUpdate:lt,placement:yt.placement})}}),[at,lt,ut]),ht=reactExports.useMemo(()=>(dequal(ot.current,rt)||(ot.current=rt),ot.current),[rt]);return reactExports.useEffect(()=>{!st.current||!_e||st.current.setOptions({placement:tt,strategy:nt,modifiers:[...ht,dt,disabledApplyStylesModifier]})},[nt,tt,dt,_e,ht]),reactExports.useEffect(()=>{if(!(!_e||d==null||c==null))return st.current=createPopper(d,c,Object.assign({},it,{placement:tt,strategy:nt,modifiers:[...ht,ariaDescribedByModifier,dt]})),()=>{st.current!=null&&(st.current.destroy(),st.current=void 0,ut(yt=>Object.assign({},yt,{attributes:{},styles:{popper:{}}})))}},[_e,d,c]),ct}function contains(d,c){if(d.contains)return d.contains(c);if(d.compareDocumentPosition)return d===c||!!(d.compareDocumentPosition(c)&16)}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1),noop$5=()=>{};function isLeftClickEvent(d){return d.button===0}function isModifiedEvent(d){return!!(d.metaKey||d.altKey||d.ctrlKey||d.shiftKey)}const getRefTarget=d=>d&&("current"in d?d.current:d),InitialTriggerEvents={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function useClickOutside(d,c=noop$5,{disabled:et,clickTrigger:_e="click"}={}){const tt=reactExports.useRef(!1),nt=reactExports.useRef(!1),rt=reactExports.useCallback(st=>{const at=getRefTarget(d);warning$1(!!at,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),tt.current=!at||isModifiedEvent(st)||!isLeftClickEvent(st)||!!contains(at,st.target)||nt.current,nt.current=!1},[d]),it=useEventCallback(st=>{const at=getRefTarget(d);at&&contains(at,st.target)&&(nt.current=!0)}),ot=useEventCallback(st=>{tt.current||c(st)});reactExports.useEffect(()=>{var st,at;if(et||d==null)return;const lt=ownerDocument(getRefTarget(d)),ct=lt.defaultView||window;let ut=(st=ct.event)!=null?st:(at=ct.parent)==null?void 0:at.event,dt=null;InitialTriggerEvents[_e]&&(dt=listen(lt,InitialTriggerEvents[_e],it,!0));const ht=listen(lt,_e,rt,!0),yt=listen(lt,_e,ft=>{if(ft===ut){ut=void 0;return}ot(ft)});let gt=[];return"ontouchstart"in lt.documentElement&&(gt=[].slice.call(lt.body.children).map(ft=>listen(ft,"mousemove",noop$5))),()=>{dt==null||dt(),ht(),yt(),gt.forEach(ft=>ft())}},[d,et,_e,rt,it,ot])}function toModifierMap(d){const c={};return Array.isArray(d)?(d==null||d.forEach(et=>{c[et.name]=et}),c):d||c}function toModifierArray(d={}){return Array.isArray(d)?d:Object.keys(d).map(c=>(d[c].name=c,d[c]))}function mergeOptionsWithPopperConfig({enabled:d,enableEvents:c,placement:et,flip:_e,offset:tt,fixed:nt,containerPadding:rt,arrowElement:it,popperConfig:ot={}}){var st,at,lt,ct,ut;const dt=toModifierMap(ot.modifiers);return Object.assign({},ot,{placement:et,enabled:d,strategy:nt?"fixed":ot.strategy,modifiers:toModifierArray(Object.assign({},dt,{eventListeners:{enabled:c,options:(st=dt.eventListeners)==null?void 0:st.options},preventOverflow:Object.assign({},dt.preventOverflow,{options:rt?Object.assign({padding:rt},(at=dt.preventOverflow)==null?void 0:at.options):(lt=dt.preventOverflow)==null?void 0:lt.options}),offset:{options:Object.assign({offset:tt},(ct=dt.offset)==null?void 0:ct.options)},arrow:Object.assign({},dt.arrow,{enabled:!!it,options:Object.assign({},(ut=dt.arrow)==null?void 0:ut.options,{element:it})}),flip:Object.assign({enabled:!!_e},dt.flip)}))})}const SelectableContext=reactExports.createContext(null),makeEventKey=(d,c=null)=>d!=null?String(d):c||null,SelectableContext$1=SelectableContext,NavContext=reactExports.createContext(null);NavContext.displayName="NavContext";const NavContext$1=NavContext,ATTRIBUTE_PREFIX="data-rr-ui-",PROPERTY_PREFIX="rrUi";function dataAttr(d){return`${ATTRIBUTE_PREFIX}${d}`}function dataProp(d){return`${PROPERTY_PREFIX}${d}`}const Context$1=reactExports.createContext(canUseDOM$1?window:void 0);Context$1.Provider;function useWindow(){return reactExports.useContext(Context$1)}const context$1=reactExports.createContext(null);context$1.displayName="InputGroupContext";const InputGroupContext=context$1,context=reactExports.createContext(null);context.displayName="NavbarContext";const NavbarContext=context,propTypes$1={type:PropTypes.string,tooltip:PropTypes.bool,as:PropTypes.elementType},Feedback=reactExports.forwardRef(({as:d="div",className:c,type:et="valid",tooltip:_e=!1,...tt},nt)=>jsxRuntimeExports.jsx(d,{...tt,ref:nt,className:classNames$1(c,`${et}-${_e?"tooltip":"feedback"}`)}));Feedback.displayName="Feedback";Feedback.propTypes=propTypes$1;const Feedback$1=Feedback,FormContext=reactExports.createContext({}),FormContext$1=FormContext,FormCheckInput=reactExports.forwardRef(({id:d,bsPrefix:c,className:et,type:_e="checkbox",isValid:tt=!1,isInvalid:nt=!1,as:rt="input",...it},ot)=>{const{controlId:st}=reactExports.useContext(FormContext$1);return c=useBootstrapPrefix(c,"form-check-input"),jsxRuntimeExports.jsx(rt,{...it,ref:ot,type:_e,id:d||st,className:classNames$1(et,c,tt&&"is-valid",nt&&"is-invalid")})});FormCheckInput.displayName="FormCheckInput";const FormCheckInput$1=FormCheckInput,FormCheckLabel=reactExports.forwardRef(({bsPrefix:d,className:c,htmlFor:et,..._e},tt)=>{const{controlId:nt}=reactExports.useContext(FormContext$1);return d=useBootstrapPrefix(d,"form-check-label"),jsxRuntimeExports.jsx("label",{..._e,ref:tt,htmlFor:et||nt,className:classNames$1(c,d)})});FormCheckLabel.displayName="FormCheckLabel";const FormCheckLabel$1=FormCheckLabel,FormCheck=reactExports.forwardRef(({id:d,bsPrefix:c,bsSwitchPrefix:et,inline:_e=!1,reverse:tt=!1,disabled:nt=!1,isValid:rt=!1,isInvalid:it=!1,feedbackTooltip:ot=!1,feedback:st,feedbackType:at,className:lt,style:ct,title:ut="",type:dt="checkbox",label:ht,children:yt,as:gt="input",...ft},mt)=>{c=useBootstrapPrefix(c,"form-check"),et=useBootstrapPrefix(et,"form-switch");const{controlId:pt}=reactExports.useContext(FormContext$1),xt=reactExports.useMemo(()=>({controlId:d||pt}),[pt,d]),vt=!yt&&ht!=null&&ht!==!1||hasChildOfType(yt,FormCheckLabel$1),Et=jsxRuntimeExports.jsx(FormCheckInput$1,{...ft,type:dt==="switch"?"checkbox":dt,ref:mt,isValid:rt,isInvalid:it,disabled:nt,as:gt});return jsxRuntimeExports.jsx(FormContext$1.Provider,{value:xt,children:jsxRuntimeExports.jsx("div",{style:ct,className:classNames$1(lt,vt&&c,_e&&`${c}-inline`,tt&&`${c}-reverse`,dt==="switch"&&et),children:yt||jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Et,vt&&jsxRuntimeExports.jsx(FormCheckLabel$1,{title:ut,children:ht}),st&&jsxRuntimeExports.jsx(Feedback$1,{type:at,tooltip:ot,children:st})]})})})});FormCheck.displayName="FormCheck";const FormCheck$1=Object.assign(FormCheck,{Input:FormCheckInput$1,Label:FormCheckLabel$1}),FormControl=reactExports.forwardRef(({bsPrefix:d,type:c,size:et,htmlSize:_e,id:tt,className:nt,isValid:rt=!1,isInvalid:it=!1,plaintext:ot,readOnly:st,as:at="input",...lt},ct)=>{const{controlId:ut}=reactExports.useContext(FormContext$1);d=useBootstrapPrefix(d,"form-control");let dt;return ot?dt={[`${d}-plaintext`]:!0}:dt={[d]:!0,[`${d}-${et}`]:et},jsxRuntimeExports.jsx(at,{...lt,type:c,size:_e,ref:ct,readOnly:st,id:tt||ut,className:classNames$1(nt,dt,rt&&"is-valid",it&&"is-invalid",c==="color"&&`${d}-color`)})});FormControl.displayName="FormControl";const FormControl$1=Object.assign(FormControl,{Feedback:Feedback$1}),FormFloating=createWithBsPrefix("form-floating"),FormGroup=reactExports.forwardRef(({controlId:d,as:c="div",...et},_e)=>{const tt=reactExports.useMemo(()=>({controlId:d}),[d]);return jsxRuntimeExports.jsx(FormContext$1.Provider,{value:tt,children:jsxRuntimeExports.jsx(c,{...et,ref:_e})})});FormGroup.displayName="FormGroup";const FormGroup$1=FormGroup,FormLabel=reactExports.forwardRef(({as:d="label",bsPrefix:c,column:et=!1,visuallyHidden:_e=!1,className:tt,htmlFor:nt,...rt},it)=>{const{controlId:ot}=reactExports.useContext(FormContext$1);c=useBootstrapPrefix(c,"form-label");let st="col-form-label";typeof et=="string"&&(st=`${st} ${st}-${et}`);const at=classNames$1(tt,c,_e&&"visually-hidden",et&&st);return nt=nt||ot,et?jsxRuntimeExports.jsx(Col$1,{ref:it,as:"label",className:at,htmlFor:nt,...rt}):jsxRuntimeExports.jsx(d,{ref:it,className:at,htmlFor:nt,...rt})});FormLabel.displayName="FormLabel";const FormLabel$1=FormLabel,FormRange=reactExports.forwardRef(({bsPrefix:d,className:c,id:et,..._e},tt)=>{const{controlId:nt}=reactExports.useContext(FormContext$1);return d=useBootstrapPrefix(d,"form-range"),jsxRuntimeExports.jsx("input",{..._e,type:"range",ref:tt,className:classNames$1(c,d),id:et||nt})});FormRange.displayName="FormRange";const FormRange$1=FormRange,FormSelect=reactExports.forwardRef(({bsPrefix:d,size:c,htmlSize:et,className:_e,isValid:tt=!1,isInvalid:nt=!1,id:rt,...it},ot)=>{const{controlId:st}=reactExports.useContext(FormContext$1);return d=useBootstrapPrefix(d,"form-select"),jsxRuntimeExports.jsx("select",{...it,size:et,ref:ot,className:classNames$1(_e,d,c&&`${d}-${c}`,tt&&"is-valid",nt&&"is-invalid"),id:rt||st})});FormSelect.displayName="FormSelect";const FormSelect$1=FormSelect,FormText=reactExports.forwardRef(({bsPrefix:d,className:c,as:et="small",muted:_e,...tt},nt)=>(d=useBootstrapPrefix(d,"form-text"),jsxRuntimeExports.jsx(et,{...tt,ref:nt,className:classNames$1(c,d,_e&&"text-muted")})));FormText.displayName="FormText";const FormText$1=FormText,Switch=reactExports.forwardRef((d,c)=>jsxRuntimeExports.jsx(FormCheck$1,{...d,ref:c,type:"switch"}));Switch.displayName="Switch";const Switch$1=Object.assign(Switch,{Input:FormCheck$1.Input,Label:FormCheck$1.Label}),FloatingLabel=reactExports.forwardRef(({bsPrefix:d,className:c,children:et,controlId:_e,label:tt,...nt},rt)=>(d=useBootstrapPrefix(d,"form-floating"),jsxRuntimeExports.jsxs(FormGroup$1,{ref:rt,className:classNames$1(c,d),controlId:_e,...nt,children:[et,jsxRuntimeExports.jsx("label",{htmlFor:_e,children:tt})]})));FloatingLabel.displayName="FloatingLabel";const FloatingLabel$1=FloatingLabel,propTypes={_ref:PropTypes.any,validated:PropTypes.bool,as:PropTypes.elementType},Form=reactExports.forwardRef(({className:d,validated:c,as:et="form",..._e},tt)=>jsxRuntimeExports.jsx(et,{..._e,ref:tt,className:classNames$1(d,c&&"was-validated")}));Form.displayName="Form";Form.propTypes=propTypes;const Form$1=Object.assign(Form,{Group:FormGroup$1,Control:FormControl$1,Floating:FormFloating,Check:FormCheck$1,Switch:Switch$1,Label:FormLabel$1,Text:FormText$1,Range:FormRange$1,Select:FormSelect$1,FloatingLabel:FloatingLabel$1}),Container=reactExports.forwardRef(({bsPrefix:d,fluid:c=!1,as:et="div",className:_e,...tt},nt)=>{const rt=useBootstrapPrefix(d,"container"),it=typeof c=="string"?`-${c}`:"-fluid";return jsxRuntimeExports.jsx(et,{ref:nt,...tt,className:classNames$1(_e,c?`${rt}${it}`:rt)})});Container.displayName="Container";const Container$1=Container,InputGroupText=createWithBsPrefix("input-group-text",{Component:"span"}),InputGroupCheckbox=d=>jsxRuntimeExports.jsx(InputGroupText,{children:jsxRuntimeExports.jsx(FormCheckInput$1,{type:"checkbox",...d})}),InputGroupRadio=d=>jsxRuntimeExports.jsx(InputGroupText,{children:jsxRuntimeExports.jsx(FormCheckInput$1,{type:"radio",...d})}),InputGroup=reactExports.forwardRef(({bsPrefix:d,size:c,hasValidation:et,className:_e,as:tt="div",...nt},rt)=>{d=useBootstrapPrefix(d,"input-group");const it=reactExports.useMemo(()=>({}),[]);return jsxRuntimeExports.jsx(InputGroupContext.Provider,{value:it,children:jsxRuntimeExports.jsx(tt,{ref:rt,...nt,className:classNames$1(_e,d,c&&`${d}-${c}`,et&&"has-validation")})})});InputGroup.displayName="InputGroup";const InputGroup$1=Object.assign(InputGroup,{Text:InputGroupText,Radio:InputGroupRadio,Checkbox:InputGroupCheckbox}),TabContext=reactExports.createContext(null),TabContext$1=TabContext,_excluded$8=["as","active","eventKey"];function _objectWithoutPropertiesLoose$8(d,c){if(d==null)return{};var et={},_e=Object.keys(d),tt,nt;for(nt=0;nt<_e.length;nt++)tt=_e[nt],!(c.indexOf(tt)>=0)&&(et[tt]=d[tt]);return et}function useNavItem({key:d,onClick:c,active:et,id:_e,role:tt,disabled:nt}){const rt=reactExports.useContext(SelectableContext$1),it=reactExports.useContext(NavContext$1),ot=reactExports.useContext(TabContext$1);let st=et;const at={role:tt};if(it){!tt&&it.role==="tablist"&&(at.role="tab");const lt=it.getControllerId(d??null),ct=it.getControlledId(d??null);at[dataAttr("event-key")]=d,at.id=lt||_e,st=et==null&&d!=null?it.activeKey===d:et,(st||!(ot!=null&&ot.unmountOnExit)&&!(ot!=null&&ot.mountOnEnter))&&(at["aria-controls"]=ct)}return at.role==="tab"&&(at["aria-selected"]=st,st||(at.tabIndex=-1),nt&&(at.tabIndex=-1,at["aria-disabled"]=!0)),at.onClick=useEventCallback(lt=>{nt||(c==null||c(lt),d!=null&&rt&&!lt.isPropagationStopped()&&rt(d,lt))}),[at,{isActive:st}]}const NavItem$1=reactExports.forwardRef((d,c)=>{let{as:et=Button$2,active:_e,eventKey:tt}=d,nt=_objectWithoutPropertiesLoose$8(d,_excluded$8);const[rt,it]=useNavItem(Object.assign({key:makeEventKey(tt,nt.href),active:_e},nt));return rt[dataAttr("active")]=it.isActive,jsxRuntimeExports.jsx(et,Object.assign({},nt,rt,{ref:c}))});NavItem$1.displayName="NavItem";const NavItem$2=NavItem$1,_excluded$7=["as","onSelect","activeKey","role","onKeyDown"];function _objectWithoutPropertiesLoose$7(d,c){if(d==null)return{};var et={},_e=Object.keys(d),tt,nt;for(nt=0;nt<_e.length;nt++)tt=_e[nt],!(c.indexOf(tt)>=0)&&(et[tt]=d[tt]);return et}const noop$4=()=>{},EVENT_KEY_ATTR=dataAttr("event-key"),Nav$2=reactExports.forwardRef((d,c)=>{let{as:et="div",onSelect:_e,activeKey:tt,role:nt,onKeyDown:rt}=d,it=_objectWithoutPropertiesLoose$7(d,_excluded$7);const ot=useForceUpdate(),st=reactExports.useRef(!1),at=reactExports.useContext(SelectableContext$1),lt=reactExports.useContext(TabContext$1);let ct,ut;lt&&(nt=nt||"tablist",tt=lt.activeKey,ct=lt.getControlledId,ut=lt.getControllerId);const dt=reactExports.useRef(null),ht=mt=>{const pt=dt.current;if(!pt)return null;const xt=qsa(pt,`[${EVENT_KEY_ATTR}]:not([aria-disabled=true])`),vt=pt.querySelector("[aria-selected=true]");if(!vt||vt!==document.activeElement)return null;const Et=xt.indexOf(vt);if(Et===-1)return null;let _t=Et+mt;return _t>=xt.length&&(_t=0),_t<0&&(_t=xt.length-1),xt[_t]},yt=(mt,pt)=>{mt!=null&&(_e==null||_e(mt,pt),at==null||at(mt,pt))},gt=mt=>{if(rt==null||rt(mt),!lt)return;let pt;switch(mt.key){case"ArrowLeft":case"ArrowUp":pt=ht(-1);break;case"ArrowRight":case"ArrowDown":pt=ht(1);break;default:return}pt&&(mt.preventDefault(),yt(pt.dataset[dataProp("EventKey")]||null,mt),st.current=!0,ot())};reactExports.useEffect(()=>{if(dt.current&&st.current){const mt=dt.current.querySelector(`[${EVENT_KEY_ATTR}][aria-selected=true]`);mt==null||mt.focus()}st.current=!1});const ft=useMergedRefs(c,dt);return jsxRuntimeExports.jsx(SelectableContext$1.Provider,{value:yt,children:jsxRuntimeExports.jsx(NavContext$1.Provider,{value:{role:nt,activeKey:makeEventKey(tt),getControlledId:ct||noop$4,getControllerId:ut||noop$4},children:jsxRuntimeExports.jsx(et,Object.assign({},it,{onKeyDown:gt,ref:ft,role:nt}))})})});Nav$2.displayName="Nav";const BaseNav=Object.assign(Nav$2,{Item:NavItem$2});var size$1;function scrollbarSize(d){if((!size$1&&size$1!==0||d)&&canUseDOM$1){var c=document.createElement("div");c.style.position="absolute",c.style.top="-9999px",c.style.width="50px",c.style.height="50px",c.style.overflow="scroll",document.body.appendChild(c),size$1=c.offsetWidth-c.clientWidth,document.body.removeChild(c)}return size$1}function activeElement(d){d===void 0&&(d=ownerDocument());try{var c=d.activeElement;return!c||!c.nodeName?null:c}catch{return d.body}}function getBodyScrollbarWidth(d=document){const c=d.defaultView;return Math.abs(c.innerWidth-d.documentElement.clientWidth)}const OPEN_DATA_ATTRIBUTE=dataAttr("modal-open");class ModalManager{constructor({ownerDocument:c,handleContainerOverflow:et=!0,isRTL:_e=!1}={}){this.handleContainerOverflow=et,this.isRTL=_e,this.modals=[],this.ownerDocument=c}getScrollbarWidth(){return getBodyScrollbarWidth(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(c){}removeModalAttributes(c){}setContainerStyle(c){const et={overflow:"hidden"},_e=this.isRTL?"paddingLeft":"paddingRight",tt=this.getElement();c.style={overflow:tt.style.overflow,[_e]:tt.style[_e]},c.scrollBarWidth&&(et[_e]=`${parseInt(style(tt,_e)||"0",10)+c.scrollBarWidth}px`),tt.setAttribute(OPEN_DATA_ATTRIBUTE,""),style(tt,et)}reset(){[...this.modals].forEach(c=>this.remove(c))}removeContainerStyle(c){const et=this.getElement();et.removeAttribute(OPEN_DATA_ATTRIBUTE),Object.assign(et.style,c.style)}add(c){let et=this.modals.indexOf(c);return et!==-1||(et=this.modals.length,this.modals.push(c),this.setModalAttributes(c),et!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),et}remove(c){const et=this.modals.indexOf(c);et!==-1&&(this.modals.splice(et,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(c))}isTopModal(c){return!!this.modals.length&&this.modals[this.modals.length-1]===c}}const ModalManager$1=ModalManager,resolveContainerRef=(d,c)=>canUseDOM$1?d==null?(c||ownerDocument()).body:(typeof d=="function"&&(d=d()),d&&"current"in d&&(d=d.current),d&&("nodeType"in d||d.getBoundingClientRect)?d:null):null;function useWaitForDOMRef(d,c){const et=useWindow(),[_e,tt]=reactExports.useState(()=>resolveContainerRef(d,et==null?void 0:et.document));if(!_e){const nt=resolveContainerRef(d);nt&&tt(nt)}return reactExports.useEffect(()=>{c&&_e&&c(_e)},[c,_e]),reactExports.useEffect(()=>{const nt=resolveContainerRef(d);nt!==_e&&tt(nt)},[d,_e]),_e}function NoopTransition({children:d,in:c,onExited:et,mountOnEnter:_e,unmountOnExit:tt}){const nt=reactExports.useRef(null),rt=reactExports.useRef(c),it=useEventCallback(et);reactExports.useEffect(()=>{c?rt.current=!0:it(nt.current)},[c,it]);const ot=useMergedRefs(nt,d.ref),st=reactExports.cloneElement(d,{ref:ot});return c?st:tt||!rt.current&&_e?null:st}function useTransition({in:d,onTransition:c}){const et=reactExports.useRef(null),_e=reactExports.useRef(!0),tt=useEventCallback(c);return useIsomorphicEffect(()=>{if(!et.current)return;let nt=!1;return tt({in:d,element:et.current,initial:_e.current,isStale:()=>nt}),()=>{nt=!0}},[d,tt]),useIsomorphicEffect(()=>(_e.current=!1,()=>{_e.current=!0}),[]),et}function ImperativeTransition({children:d,in:c,onExited:et,onEntered:_e,transition:tt}){const[nt,rt]=reactExports.useState(!c);c&&nt&&rt(!1);const it=useTransition({in:!!c,onTransition:st=>{const at=()=>{st.isStale()||(st.in?_e==null||_e(st.element,st.initial):(rt(!0),et==null||et(st.element)))};Promise.resolve(tt(st)).then(at,lt=>{throw st.in||rt(!0),lt})}}),ot=useMergedRefs(it,d.ref);return nt&&!c?null:reactExports.cloneElement(d,{ref:ot})}function renderTransition(d,c,et){return d?jsxRuntimeExports.jsx(d,Object.assign({},et)):c?jsxRuntimeExports.jsx(ImperativeTransition,Object.assign({},et,{transition:c})):jsxRuntimeExports.jsx(NoopTransition,Object.assign({},et))}function isEscKey(d){return d.code==="Escape"||d.keyCode===27}const _excluded$6=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function _objectWithoutPropertiesLoose$6(d,c){if(d==null)return{};var et={},_e=Object.keys(d),tt,nt;for(nt=0;nt<_e.length;nt++)tt=_e[nt],!(c.indexOf(tt)>=0)&&(et[tt]=d[tt]);return et}let manager;function getManager(d){return manager||(manager=new ModalManager$1({ownerDocument:d==null?void 0:d.document})),manager}function useModalManager(d){const c=useWindow(),et=d||getManager(c),_e=reactExports.useRef({dialog:null,backdrop:null});return Object.assign(_e.current,{add:()=>et.add(_e.current),remove:()=>et.remove(_e.current),isTopModal:()=>et.isTopModal(_e.current),setDialogRef:reactExports.useCallback(tt=>{_e.current.dialog=tt},[]),setBackdropRef:reactExports.useCallback(tt=>{_e.current.backdrop=tt},[])})}const Modal$2=reactExports.forwardRef((d,c)=>{let{show:et=!1,role:_e="dialog",className:tt,style:nt,children:rt,backdrop:it=!0,keyboard:ot=!0,onBackdropClick:st,onEscapeKeyDown:at,transition:lt,runTransition:ct,backdropTransition:ut,runBackdropTransition:dt,autoFocus:ht=!0,enforceFocus:yt=!0,restoreFocus:gt=!0,restoreFocusOptions:ft,renderDialog:mt,renderBackdrop:pt=Ht=>jsxRuntimeExports.jsx("div",Object.assign({},Ht)),manager:xt,container:vt,onShow:Et,onHide:_t=()=>{},onExit:wt,onExited:bt,onExiting:$t,onEnter:kt,onEntering:Nt,onEntered:At}=d,Gt=_objectWithoutPropertiesLoose$6(d,_excluded$6);const Kt=useWindow(),qt=useWaitForDOMRef(vt),Ot=useModalManager(xt),Pt=useMounted(),Lt=usePrevious$1(et),[Qt,Wt]=reactExports.useState(!et),sn=reactExports.useRef(null);reactExports.useImperativeHandle(c,()=>Ot,[Ot]),canUseDOM$1&&!Lt&&et&&(sn.current=activeElement(Kt==null?void 0:Kt.document)),et&&Qt&&Wt(!1);const zt=useEventCallback(()=>{if(Ot.add(),Rt.current=listen(document,"keydown",Zt),Tt.current=listen(document,"focus",()=>setTimeout(rn),!0),Et&&Et(),ht){var Ht,hn;const un=activeElement((Ht=(hn=Ot.dialog)==null?void 0:hn.ownerDocument)!=null?Ht:Kt==null?void 0:Kt.document);Ot.dialog&&un&&!contains(Ot.dialog,un)&&(sn.current=un,Ot.dialog.focus())}}),en=useEventCallback(()=>{if(Ot.remove(),Rt.current==null||Rt.current(),Tt.current==null||Tt.current(),gt){var Ht;(Ht=sn.current)==null||Ht.focus==null||Ht.focus(ft),sn.current=null}});reactExports.useEffect(()=>{!et||!qt||zt()},[et,qt,zt]),reactExports.useEffect(()=>{Qt&&en()},[Qt,en]),useWillUnmount(()=>{en()});const rn=useEventCallback(()=>{if(!yt||!Pt()||!Ot.isTopModal())return;const Ht=activeElement(Kt==null?void 0:Kt.document);Ot.dialog&&Ht&&!contains(Ot.dialog,Ht)&&Ot.dialog.focus()}),mn=useEventCallback(Ht=>{Ht.target===Ht.currentTarget&&(st==null||st(Ht),it===!0&&_t())}),Zt=useEventCallback(Ht=>{ot&&isEscKey(Ht)&&Ot.isTopModal()&&(at==null||at(Ht),Ht.defaultPrevented||_t())}),Tt=reactExports.useRef(),Rt=reactExports.useRef(),jt=(...Ht)=>{Wt(!0),bt==null||bt(...Ht)};if(!qt)return null;const Dt=Object.assign({role:_e,ref:Ot.setDialogRef,"aria-modal":_e==="dialog"?!0:void 0},Gt,{style:nt,className:tt,tabIndex:-1});let Mt=mt?mt(Dt):jsxRuntimeExports.jsx("div",Object.assign({},Dt,{children:reactExports.cloneElement(rt,{role:"document"})}));Mt=renderTransition(lt,ct,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!et,onExit:wt,onExiting:$t,onExited:jt,onEnter:kt,onEntering:Nt,onEntered:At,children:Mt});let Vt=null;return it&&(Vt=pt({ref:Ot.setBackdropRef,onClick:mn}),Vt=renderTransition(ut,dt,{in:!!et,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Vt})),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ReactDOM.createPortal(jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Vt,Mt]}),qt)})});Modal$2.displayName="Modal";const BaseModal=Object.assign(Modal$2,{Manager:ModalManager$1});function hasClass(d,c){return d.classList?!!c&&d.classList.contains(c):(" "+(d.className.baseVal||d.className)+" ").indexOf(" "+c+" ")!==-1}function addClass(d,c){d.classList?d.classList.add(c):hasClass(d,c)||(typeof d.className=="string"?d.className=d.className+" "+c:d.setAttribute("class",(d.className&&d.className.baseVal||"")+" "+c))}function replaceClassName(d,c){return d.replace(new RegExp("(^|\\s)"+c+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function removeClass(d,c){d.classList?d.classList.remove(c):typeof d.className=="string"?d.className=replaceClassName(d.className,c):d.setAttribute("class",replaceClassName(d.className&&d.className.baseVal||"",c))}const Selector={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class BootstrapModalManager extends ModalManager$1{adjustAndStore(c,et,_e){const tt=et.style[c];et.dataset[c]=tt,style(et,{[c]:`${parseFloat(style(et,c))+_e}px`})}restore(c,et){const _e=et.dataset[c];_e!==void 0&&(delete et.dataset[c],style(et,{[c]:_e}))}setContainerStyle(c){super.setContainerStyle(c);const et=this.getElement();if(addClass(et,"modal-open"),!c.scrollBarWidth)return;const _e=this.isRTL?"paddingLeft":"paddingRight",tt=this.isRTL?"marginLeft":"marginRight";qsa(et,Selector.FIXED_CONTENT).forEach(nt=>this.adjustAndStore(_e,nt,c.scrollBarWidth)),qsa(et,Selector.STICKY_CONTENT).forEach(nt=>this.adjustAndStore(tt,nt,-c.scrollBarWidth)),qsa(et,Selector.NAVBAR_TOGGLER).forEach(nt=>this.adjustAndStore(tt,nt,c.scrollBarWidth))}removeContainerStyle(c){super.removeContainerStyle(c);const et=this.getElement();removeClass(et,"modal-open");const _e=this.isRTL?"paddingLeft":"paddingRight",tt=this.isRTL?"marginLeft":"marginRight";qsa(et,Selector.FIXED_CONTENT).forEach(nt=>this.restore(_e,nt)),qsa(et,Selector.STICKY_CONTENT).forEach(nt=>this.restore(tt,nt)),qsa(et,Selector.NAVBAR_TOGGLER).forEach(nt=>this.restore(tt,nt))}}let sharedManager;function getSharedManager(d){return sharedManager||(sharedManager=new BootstrapModalManager(d)),sharedManager}const ModalBody=createWithBsPrefix("modal-body"),ModalContext=reactExports.createContext({onHide(){}}),ModalContext$1=ModalContext,ModalDialog=reactExports.forwardRef(({bsPrefix:d,className:c,contentClassName:et,centered:_e,size:tt,fullscreen:nt,children:rt,scrollable:it,...ot},st)=>{d=useBootstrapPrefix(d,"modal");const at=`${d}-dialog`,lt=typeof nt=="string"?`${d}-fullscreen-${nt}`:`${d}-fullscreen`;return jsxRuntimeExports.jsx("div",{...ot,ref:st,className:classNames$1(at,c,tt&&`${d}-${tt}`,_e&&`${at}-centered`,it&&`${at}-scrollable`,nt&&lt),children:jsxRuntimeExports.jsx("div",{className:classNames$1(`${d}-content`,et),children:rt})})});ModalDialog.displayName="ModalDialog";const ModalDialog$1=ModalDialog,ModalFooter=createWithBsPrefix("modal-footer"),AbstractModalHeader=reactExports.forwardRef(({closeLabel:d="Close",closeVariant:c,closeButton:et=!1,onHide:_e,children:tt,...nt},rt)=>{const it=reactExports.useContext(ModalContext$1),ot=useEventCallback(()=>{it==null||it.onHide(),_e==null||_e()});return jsxRuntimeExports.jsxs("div",{ref:rt,...nt,children:[tt,et&&jsxRuntimeExports.jsx(CloseButton$1,{"aria-label":d,variant:c,onClick:ot})]})}),AbstractModalHeader$1=AbstractModalHeader,ModalHeader=reactExports.forwardRef(({bsPrefix:d,className:c,closeLabel:et="Close",closeButton:_e=!1,...tt},nt)=>(d=useBootstrapPrefix(d,"modal-header"),jsxRuntimeExports.jsx(AbstractModalHeader$1,{ref:nt,...tt,className:classNames$1(c,d),closeLabel:et,closeButton:_e})));ModalHeader.displayName="ModalHeader";const ModalHeader$1=ModalHeader,DivStyledAsH4=divWithClassName("h4"),ModalTitle=createWithBsPrefix("modal-title",{Component:DivStyledAsH4});function DialogTransition$1(d){return jsxRuntimeExports.jsx(Fade$1,{...d,timeout:null})}function BackdropTransition$1(d){return jsxRuntimeExports.jsx(Fade$1,{...d,timeout:null})}const Modal=reactExports.forwardRef(({bsPrefix:d,className:c,style:et,dialogClassName:_e,contentClassName:tt,children:nt,dialogAs:rt=ModalDialog$1,"aria-labelledby":it,"aria-describedby":ot,"aria-label":st,show:at=!1,animation:lt=!0,backdrop:ct=!0,keyboard:ut=!0,onEscapeKeyDown:dt,onShow:ht,onHide:yt,container:gt,autoFocus:ft=!0,enforceFocus:mt=!0,restoreFocus:pt=!0,restoreFocusOptions:xt,onEntered:vt,onExit:Et,onExiting:_t,onEnter:wt,onEntering:bt,onExited:$t,backdropClassName:kt,manager:Nt,...At},Gt)=>{const[Kt,qt]=reactExports.useState({}),[Ot,Pt]=reactExports.useState(!1),Lt=reactExports.useRef(!1),Qt=reactExports.useRef(!1),Wt=reactExports.useRef(null),[sn,zt]=useCallbackRef(),en=useMergedRefs(Gt,zt),rn=useEventCallback(yt),mn=useIsRTL();d=useBootstrapPrefix(d,"modal");const Zt=reactExports.useMemo(()=>({onHide:rn}),[rn]);function Tt(){return Nt||getSharedManager({isRTL:mn})}function Rt(on){if(!canUseDOM$1)return;const En=Tt().getScrollbarWidth()>0,_n=on.scrollHeight>ownerDocument(on).documentElement.clientHeight;qt({paddingRight:En&&!_n?scrollbarSize():void 0,paddingLeft:!En&&_n?scrollbarSize():void 0})}const jt=useEventCallback(()=>{sn&&Rt(sn.dialog)});useWillUnmount(()=>{removeEventListener(window,"resize",jt),Wt.current==null||Wt.current()});const Dt=()=>{Lt.current=!0},Mt=on=>{Lt.current&&sn&&on.target===sn.dialog&&(Qt.current=!0),Lt.current=!1},Vt=()=>{Pt(!0),Wt.current=transitionEnd(sn.dialog,()=>{Pt(!1)})},Ht=on=>{on.target===on.currentTarget&&Vt()},hn=on=>{if(ct==="static"){Ht(on);return}if(Qt.current||on.target!==on.currentTarget){Qt.current=!1;return}yt==null||yt()},un=on=>{ut?dt==null||dt(on):(on.preventDefault(),ct==="static"&&Vt())},xn=(on,En)=>{on&&Rt(on),wt==null||wt(on,En)},$n=on=>{Wt.current==null||Wt.current(),Et==null||Et(on)},ln=(on,En)=>{bt==null||bt(on,En),addEventListener(window,"resize",jt)},wn=on=>{on&&(on.style.display=""),$t==null||$t(on),removeEventListener(window,"resize",jt)},Tn=reactExports.useCallback(on=>jsxRuntimeExports.jsx("div",{...on,className:classNames$1(`${d}-backdrop`,kt,!lt&&"show")}),[lt,kt,d]),kn={...et,...Kt};kn.display="block";const In=on=>jsxRuntimeExports.jsx("div",{role:"dialog",...on,style:kn,className:classNames$1(c,d,Ot&&`${d}-static`,!lt&&"show"),onClick:ct?hn:void 0,onMouseUp:Mt,"aria-label":st,"aria-labelledby":it,"aria-describedby":ot,children:jsxRuntimeExports.jsx(rt,{...At,onMouseDown:Dt,className:_e,contentClassName:tt,children:nt})});return jsxRuntimeExports.jsx(ModalContext$1.Provider,{value:Zt,children:jsxRuntimeExports.jsx(BaseModal,{show:at,ref:en,backdrop:ct,container:gt,keyboard:!0,autoFocus:ft,enforceFocus:mt,restoreFocus:pt,restoreFocusOptions:xt,onEscapeKeyDown:un,onShow:ht,onHide:yt,onEnter:xn,onEntering:ln,onEntered:vt,onExit:$n,onExiting:_t,onExited:wn,manager:Tt(),transition:lt?DialogTransition$1:void 0,backdropTransition:lt?BackdropTransition$1:void 0,renderBackdrop:Tn,renderDialog:In})})});Modal.displayName="Modal";const Modal$1=Object.assign(Modal,{Body:ModalBody,Header:ModalHeader$1,Title:ModalTitle,Footer:ModalFooter,Dialog:ModalDialog$1,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});var all={exports:{}},createChainableTypeChecker={exports:{}};(function(d,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=et;function et(_e){function tt(rt,it,ot,st,at,lt){var ct=st||"<<anonymous>>",ut=lt||ot;if(it[ot]==null)return rt?new Error("Required "+at+" `"+ut+"` was not specified "+("in `"+ct+"`.")):null;for(var dt=arguments.length,ht=Array(dt>6?dt-6:0),yt=6;yt<dt;yt++)ht[yt-6]=arguments[yt];return _e.apply(void 0,[it,ot,ct,at,ut].concat(ht))}var nt=tt.bind(null,!1);return nt.isRequired=tt.bind(null,!0),nt}d.exports=c.default})(createChainableTypeChecker,createChainableTypeChecker.exports);var createChainableTypeCheckerExports=createChainableTypeChecker.exports;(function(d,c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=nt;var et=createChainableTypeCheckerExports,_e=tt(et);function tt(rt){return rt&&rt.__esModule?rt:{default:rt}}function nt(){for(var rt=arguments.length,it=Array(rt),ot=0;ot<rt;ot++)it[ot]=arguments[ot];function st(){for(var at=arguments.length,lt=Array(at),ct=0;ct<at;ct++)lt[ct]=arguments[ct];var ut=null;return it.forEach(function(dt){if(ut==null){var ht=dt.apply(void 0,lt);ht!=null&&(ut=ht)}}),ut}return(0,_e.default)(st)}d.exports=c.default})(all,all.exports);const NavItem=createWithBsPrefix("nav-item"),NavLink=reactExports.forwardRef(({bsPrefix:d,className:c,as:et=Anchor$1,active:_e,eventKey:tt,disabled:nt=!1,...rt},it)=>{d=useBootstrapPrefix(d,"nav-link");const[ot,st]=useNavItem({key:makeEventKey(tt,rt.href),active:_e,disabled:nt,...rt});return jsxRuntimeExports.jsx(et,{...rt,...ot,ref:it,disabled:nt,className:classNames$1(c,d,nt&&"disabled",st.isActive&&"active")})});NavLink.displayName="NavLink";const NavLink$1=NavLink,Nav=reactExports.forwardRef((d,c)=>{const{as:et="div",bsPrefix:_e,variant:tt,fill:nt=!1,justify:rt=!1,navbar:it,navbarScroll:ot,className:st,activeKey:at,...lt}=useUncontrolled(d,{activeKey:"onSelect"}),ct=useBootstrapPrefix(_e,"nav");let ut,dt,ht=!1;const yt=reactExports.useContext(NavbarContext),gt=reactExports.useContext(CardHeaderContext);return yt?(ut=yt.bsPrefix,ht=it??!0):gt&&({cardHeaderBsPrefix:dt}=gt),jsxRuntimeExports.jsx(BaseNav,{as:et,ref:c,activeKey:at,className:classNames$1(st,{[ct]:!ht,[`${ut}-nav`]:ht,[`${ut}-nav-scroll`]:ht&&ot,[`${dt}-${tt}`]:!!dt,[`${ct}-${tt}`]:!!tt,[`${ct}-fill`]:nt,[`${ct}-justified`]:rt}),...lt})});Nav.displayName="Nav";const Nav$1=Object.assign(Nav,{Item:NavItem,Link:NavLink$1}),NavbarBrand=reactExports.forwardRef(({bsPrefix:d,className:c,as:et,..._e},tt)=>{d=useBootstrapPrefix(d,"navbar-brand");const nt=et||(_e.href?"a":"span");return jsxRuntimeExports.jsx(nt,{..._e,ref:tt,className:classNames$1(c,d)})});NavbarBrand.displayName="NavbarBrand";const NavbarBrand$1=NavbarBrand,NavbarCollapse=reactExports.forwardRef(({children:d,bsPrefix:c,...et},_e)=>{c=useBootstrapPrefix(c,"navbar-collapse");const tt=reactExports.useContext(NavbarContext);return jsxRuntimeExports.jsx(Collapse$1,{in:!!(tt&&tt.expanded),...et,children:jsxRuntimeExports.jsx("div",{ref:_e,className:c,children:d})})});NavbarCollapse.displayName="NavbarCollapse";const NavbarCollapse$1=NavbarCollapse,NavbarToggle=reactExports.forwardRef(({bsPrefix:d,className:c,children:et,label:_e="Toggle navigation",as:tt="button",onClick:nt,...rt},it)=>{d=useBootstrapPrefix(d,"navbar-toggler");const{onToggle:ot,expanded:st}=reactExports.useContext(NavbarContext)||{},at=useEventCallback(lt=>{nt&&nt(lt),ot&&ot()});return tt==="button"&&(rt.type="button"),jsxRuntimeExports.jsx(tt,{...rt,ref:it,onClick:at,"aria-label":_e,className:classNames$1(c,d,!st&&"collapsed"),children:et||jsxRuntimeExports.jsx("span",{className:`${d}-icon`})})});NavbarToggle.displayName="NavbarToggle";const NavbarToggle$1=NavbarToggle,matchersByWindow=new WeakMap,getMatcher=(d,c)=>{if(!d||!c)return;const et=matchersByWindow.get(c)||new Map;matchersByWindow.set(c,et);let _e=et.get(d);return _e||(_e=c.matchMedia(d),_e.refCount=0,et.set(_e.media,_e)),_e};function useMediaQuery(d,c=typeof window>"u"?void 0:window){const et=getMatcher(d,c),[_e,tt]=reactExports.useState(()=>et?et.matches:!1);return useIsomorphicEffect(()=>{let nt=getMatcher(d,c);if(!nt)return tt(!1);let rt=matchersByWindow.get(c);const it=()=>{tt(nt.matches)};return nt.refCount++,nt.addListener(it),it(),()=>{nt.removeListener(it),nt.refCount--,nt.refCount<=0&&(rt==null||rt.delete(nt.media)),nt=void 0}},[d]),_e}function createBreakpointHook(d){const c=Object.keys(d);function et(it,ot){return it===ot?ot:it?`${it} and ${ot}`:ot}function _e(it){return c[Math.min(c.indexOf(it)+1,c.length-1)]}function tt(it){const ot=_e(it);let st=d[ot];return typeof st=="number"?st=`${st-.2}px`:st=`calc(${st} - 0.2px)`,`(max-width: ${st})`}function nt(it){let ot=d[it];return typeof ot=="number"&&(ot=`${ot}px`),`(min-width: ${ot})`}function rt(it,ot,st){let at;typeof it=="object"?(at=it,st=ot,ot=!0):(ot=ot||!0,at={[it]:ot});let lt=reactExports.useMemo(()=>Object.entries(at).reduce((ct,[ut,dt])=>((dt==="up"||dt===!0)&&(ct=et(ct,nt(ut))),(dt==="down"||dt===!0)&&(ct=et(ct,tt(ut))),ct),""),[JSON.stringify(at)]);return useMediaQuery(lt,st)}return rt}const useBreakpoint=createBreakpointHook({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),OffcanvasBody=createWithBsPrefix("offcanvas-body"),transitionStyles={[ENTERING]:"show",[ENTERED]:"show"},OffcanvasToggling=reactExports.forwardRef(({bsPrefix:d,className:c,children:et,in:_e=!1,mountOnEnter:tt=!1,unmountOnExit:nt=!1,appear:rt=!1,...it},ot)=>(d=useBootstrapPrefix(d,"offcanvas"),jsxRuntimeExports.jsx(TransitionWrapper$1,{ref:ot,addEndListener:transitionEndListener,in:_e,mountOnEnter:tt,unmountOnExit:nt,appear:rt,...it,childRef:et.ref,children:(st,at)=>reactExports.cloneElement(et,{...at,className:classNames$1(c,et.props.className,(st===ENTERING||st===EXITING)&&`${d}-toggling`,transitionStyles[st])})})));OffcanvasToggling.displayName="OffcanvasToggling";const OffcanvasToggling$1=OffcanvasToggling,OffcanvasHeader=reactExports.forwardRef(({bsPrefix:d,className:c,closeLabel:et="Close",closeButton:_e=!1,...tt},nt)=>(d=useBootstrapPrefix(d,"offcanvas-header"),jsxRuntimeExports.jsx(AbstractModalHeader$1,{ref:nt,...tt,className:classNames$1(c,d),closeLabel:et,closeButton:_e})));OffcanvasHeader.displayName="OffcanvasHeader";const OffcanvasHeader$1=OffcanvasHeader,DivStyledAsH5=divWithClassName("h5"),OffcanvasTitle=createWithBsPrefix("offcanvas-title",{Component:DivStyledAsH5});function DialogTransition(d){return jsxRuntimeExports.jsx(OffcanvasToggling$1,{...d})}function BackdropTransition(d){return jsxRuntimeExports.jsx(Fade$1,{...d})}const Offcanvas=reactExports.forwardRef(({bsPrefix:d,className:c,children:et,"aria-labelledby":_e,placement:tt="start",responsive:nt,show:rt=!1,backdrop:it=!0,keyboard:ot=!0,scroll:st=!1,onEscapeKeyDown:at,onShow:lt,onHide:ct,container:ut,autoFocus:dt=!0,enforceFocus:ht=!0,restoreFocus:yt=!0,restoreFocusOptions:gt,onEntered:ft,onExit:mt,onExiting:pt,onEnter:xt,onEntering:vt,onExited:Et,backdropClassName:_t,manager:wt,renderStaticNode:bt=!1,...$t},kt)=>{const Nt=reactExports.useRef();d=useBootstrapPrefix(d,"offcanvas");const{onToggle:At}=reactExports.useContext(NavbarContext)||{},[Gt,Kt]=reactExports.useState(!1),qt=useBreakpoint(nt||"xs","up");reactExports.useEffect(()=>{Kt(nt?rt&&!qt:rt)},[rt,nt,qt]);const Ot=useEventCallback(()=>{At==null||At(),ct==null||ct()}),Pt=reactExports.useMemo(()=>({onHide:Ot}),[Ot]);function Lt(){return wt||(st?(Nt.current||(Nt.current=new BootstrapModalManager({handleContainerOverflow:!1})),Nt.current):getSharedManager())}const Qt=(en,...rn)=>{en&&(en.style.visibility="visible"),xt==null||xt(en,...rn)},Wt=(en,...rn)=>{en&&(en.style.visibility=""),Et==null||Et(...rn)},sn=reactExports.useCallback(en=>jsxRuntimeExports.jsx("div",{...en,className:classNames$1(`${d}-backdrop`,_t)}),[_t,d]),zt=en=>jsxRuntimeExports.jsx("div",{...en,...$t,className:classNames$1(c,nt?`${d}-${nt}`:d,`${d}-${tt}`),"aria-labelledby":_e,children:et});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!Gt&&(nt||bt)&&zt({}),jsxRuntimeExports.jsx(ModalContext$1.Provider,{value:Pt,children:jsxRuntimeExports.jsx(BaseModal,{show:Gt,ref:kt,backdrop:it,container:ut,keyboard:ot,autoFocus:dt,enforceFocus:ht&&!st,restoreFocus:yt,restoreFocusOptions:gt,onEscapeKeyDown:at,onShow:lt,onHide:Ot,onEnter:Qt,onEntering:vt,onEntered:ft,onExit:mt,onExiting:pt,onExited:Wt,manager:Lt(),transition:DialogTransition,backdropTransition:BackdropTransition,renderBackdrop:sn,renderDialog:zt})})]})});Offcanvas.displayName="Offcanvas";const Offcanvas$1=Object.assign(Offcanvas,{Body:OffcanvasBody,Header:OffcanvasHeader$1,Title:OffcanvasTitle}),NavbarOffcanvas=reactExports.forwardRef((d,c)=>{const et=reactExports.useContext(NavbarContext);return jsxRuntimeExports.jsx(Offcanvas$1,{ref:c,show:!!(et!=null&&et.expanded),...d,renderStaticNode:!0})});NavbarOffcanvas.displayName="NavbarOffcanvas";const NavbarOffcanvas$1=NavbarOffcanvas,NavbarText=createWithBsPrefix("navbar-text",{Component:"span"}),Navbar=reactExports.forwardRef((d,c)=>{const{bsPrefix:et,expand:_e=!0,variant:tt="light",bg:nt,fixed:rt,sticky:it,className:ot,as:st="nav",expanded:at,onToggle:lt,onSelect:ct,collapseOnSelect:ut=!1,...dt}=useUncontrolled(d,{expanded:"onToggle"}),ht=useBootstrapPrefix(et,"navbar"),yt=reactExports.useCallback((...mt)=>{ct==null||ct(...mt),ut&&at&&(lt==null||lt(!1))},[ct,ut,at,lt]);dt.role===void 0&&st!=="nav"&&(dt.role="navigation");let gt=`${ht}-expand`;typeof _e=="string"&&(gt=`${gt}-${_e}`);const ft=reactExports.useMemo(()=>({onToggle:()=>lt==null?void 0:lt(!at),bsPrefix:ht,expanded:!!at,expand:_e}),[ht,at,_e,lt]);return jsxRuntimeExports.jsx(NavbarContext.Provider,{value:ft,children:jsxRuntimeExports.jsx(SelectableContext$1.Provider,{value:yt,children:jsxRuntimeExports.jsx(st,{ref:c,...dt,className:classNames$1(ot,ht,_e&&gt,tt&&`${ht}-${tt}`,nt&&`bg-${nt}`,it&&`sticky-${it}`,rt&&`fixed-${rt}`)})})})});Navbar.displayName="Navbar";const Navbar$1=Object.assign(Navbar,{Brand:NavbarBrand$1,Collapse:NavbarCollapse$1,Offcanvas:NavbarOffcanvas$1,Text:NavbarText,Toggle:NavbarToggle$1}),noop$3=()=>{};function useRootClose(d,c,{disabled:et,clickTrigger:_e}={}){const tt=c||noop$3;useClickOutside(d,tt,{disabled:et,clickTrigger:_e});const nt=useEventCallback(rt=>{isEscKey(rt)&&tt(rt)});reactExports.useEffect(()=>{if(et||d==null)return;const rt=ownerDocument(getRefTarget(d));let it=(rt.defaultView||window).event;const ot=listen(rt,"keyup",st=>{if(st===it){it=void 0;return}nt(st)});return()=>{ot()}},[d,et,nt])}const Overlay$2=reactExports.forwardRef((d,c)=>{const{flip:et,offset:_e,placement:tt,containerPadding:nt,popperConfig:rt={},transition:it,runTransition:ot}=d,[st,at]=useCallbackRef(),[lt,ct]=useCallbackRef(),ut=useMergedRefs(at,c),dt=useWaitForDOMRef(d.container),ht=useWaitForDOMRef(d.target),[yt,gt]=reactExports.useState(!d.show),ft=usePopper(ht,st,mergeOptionsWithPopperConfig({placement:tt,enableEvents:!!d.show,containerPadding:nt||5,flip:et,offset:_e,arrowElement:lt,popperConfig:rt}));d.show&&yt&&gt(!1);const mt=(...$t)=>{gt(!0),d.onExited&&d.onExited(...$t)},pt=d.show||!yt;if(useRootClose(st,d.onHide,{disabled:!d.rootClose||d.rootCloseDisabled,clickTrigger:d.rootCloseEvent}),!pt)return null;const{onExit:xt,onExiting:vt,onEnter:Et,onEntering:_t,onEntered:wt}=d;let bt=d.children(Object.assign({},ft.attributes.popper,{style:ft.styles.popper,ref:ut}),{popper:ft,placement:tt,show:!!d.show,arrowProps:Object.assign({},ft.attributes.arrow,{style:ft.styles.arrow,ref:ct})});return bt=renderTransition(it,ot,{in:!!d.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:bt,onExit:xt,onExiting:vt,onExited:mt,onEnter:Et,onEntering:_t,onEntered:wt}),dt?ReactDOM.createPortal(bt,dt):null});Overlay$2.displayName="Overlay";const BaseOverlay=Overlay$2,PopoverHeader=createWithBsPrefix("popover-header"),PopoverBody=createWithBsPrefix("popover-body");function getOverlayDirection(d,c){let et=d;return d==="left"?et=c?"end":"start":d==="right"&&(et=c?"start":"end"),et}function getInitialPopperStyles(d="absolute"){return{position:d,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const Popover=reactExports.forwardRef(({bsPrefix:d,placement:c="right",className:et,style:_e,children:tt,body:nt,arrowProps:rt,hasDoneInitialMeasure:it,popper:ot,show:st,...at},lt)=>{const ct=useBootstrapPrefix(d,"popover"),ut=useIsRTL(),[dt]=(c==null?void 0:c.split("-"))||[],ht=getOverlayDirection(dt,ut);let yt=_e;return st&&!it&&(yt={..._e,...getInitialPopperStyles(ot==null?void 0:ot.strategy)}),jsxRuntimeExports.jsxs("div",{ref:lt,role:"tooltip",style:yt,"x-placement":dt,className:classNames$1(et,ct,dt&&`bs-popover-${ht}`),...at,children:[jsxRuntimeExports.jsx("div",{className:"popover-arrow",...rt}),nt?jsxRuntimeExports.jsx(PopoverBody,{children:tt}):tt]})}),Popover$1=Object.assign(Popover,{Header:PopoverHeader,Body:PopoverBody,POPPER_OFFSET:[0,8]}),Tooltip=reactExports.forwardRef(({bsPrefix:d,placement:c="right",className:et,style:_e,children:tt,arrowProps:nt,hasDoneInitialMeasure:rt,popper:it,show:ot,...st},at)=>{d=useBootstrapPrefix(d,"tooltip");const lt=useIsRTL(),[ct]=(c==null?void 0:c.split("-"))||[],ut=getOverlayDirection(ct,lt);let dt=_e;return ot&&!rt&&(dt={..._e,...getInitialPopperStyles(it==null?void 0:it.strategy)}),jsxRuntimeExports.jsxs("div",{ref:at,style:dt,role:"tooltip","x-placement":ct,className:classNames$1(et,d,`bs-tooltip-${ut}`),...st,children:[jsxRuntimeExports.jsx("div",{className:"tooltip-arrow",...nt}),jsxRuntimeExports.jsx("div",{className:`${d}-inner`,children:tt})]})});Tooltip.displayName="Tooltip";const Tooltip$1=Object.assign(Tooltip,{TOOLTIP_OFFSET:[0,6]});function useOverlayOffset(d){const c=reactExports.useRef(null),et=useBootstrapPrefix(void 0,"popover"),_e=useBootstrapPrefix(void 0,"tooltip"),tt=reactExports.useMemo(()=>({name:"offset",options:{offset:()=>{if(d)return d;if(c.current){if(hasClass(c.current,et))return Popover$1.POPPER_OFFSET;if(hasClass(c.current,_e))return Tooltip$1.TOOLTIP_OFFSET}return[0,0]}}}),[d,et,_e]);return[c,[tt]]}function wrapRefs(d,c){const{ref:et}=d,{ref:_e}=c;d.ref=et.__wrapped||(et.__wrapped=tt=>et(safeFindDOMNode(tt))),c.ref=_e.__wrapped||(_e.__wrapped=tt=>_e(safeFindDOMNode(tt)))}const Overlay=reactExports.forwardRef(({children:d,transition:c=Fade$1,popperConfig:et={},rootClose:_e=!1,placement:tt="top",show:nt=!1,...rt},it)=>{const ot=reactExports.useRef({}),[st,at]=reactExports.useState(null),[lt,ct]=useOverlayOffset(rt.offset),ut=useMergedRefs(it,lt),dt=c===!0?Fade$1:c||void 0,ht=useEventCallback(yt=>{at(yt),et==null||et.onFirstUpdate==null||et.onFirstUpdate(yt)});return useIsomorphicEffect(()=>{st&&(ot.current.scheduleUpdate==null||ot.current.scheduleUpdate())},[st]),reactExports.useEffect(()=>{nt||at(null)},[nt]),jsxRuntimeExports.jsx(BaseOverlay,{...rt,ref:ut,popperConfig:{...et,modifiers:ct.concat(et.modifiers||[]),onFirstUpdate:ht},transition:dt,rootClose:_e,placement:tt,show:nt,children:(yt,{arrowProps:gt,popper:ft,show:mt})=>{var pt,xt;wrapRefs(yt,gt);const vt=ft==null?void 0:ft.placement,Et=Object.assign(ot.current,{state:ft==null?void 0:ft.state,scheduleUpdate:ft==null?void 0:ft.update,placement:vt,outOfBoundaries:(ft==null||(pt=ft.state)==null||(xt=pt.modifiersData.hide)==null?void 0:xt.isReferenceHidden)||!1,strategy:et.strategy}),_t=!!st;return typeof d=="function"?d({...yt,placement:vt,show:mt,...!c&&mt&&{className:"show"},popper:Et,arrowProps:gt,hasDoneInitialMeasure:_t}):reactExports.cloneElement(d,{...yt,placement:vt,arrowProps:gt,popper:Et,hasDoneInitialMeasure:_t,className:classNames$1(d.props.className,!c&&mt&&"show"),style:{...d.props.style,...yt.style}})}})});Overlay.displayName="Overlay";const Overlay$1=Overlay;function normalizeDelay(d){return d&&typeof d=="object"?d:{show:d,hide:d}}function handleMouseOverOut(d,c,et){const[_e]=c,tt=_e.currentTarget,nt=_e.relatedTarget||_e.nativeEvent[et];(!nt||nt!==tt)&&!contains(tt,nt)&&d(...c)}function OverlayTrigger({trigger:d=["hover","focus"],overlay:c,children:et,popperConfig:_e={},show:tt,defaultShow:nt=!1,onToggle:rt,delay:it,placement:ot,flip:st=ot&&ot.indexOf("auto")!==-1,...at}){const lt=reactExports.useRef(null),ct=useMergedRefs(lt,et.ref),ut=useTimeout(),dt=reactExports.useRef(""),[ht,yt]=useUncontrolledProp(tt,nt,rt),gt=normalizeDelay(it),{onFocus:ft,onBlur:mt,onClick:pt}=typeof et!="function"?reactExports.Children.only(et).props:{},xt=Gt=>{ct(safeFindDOMNode(Gt))},vt=reactExports.useCallback(()=>{if(ut.clear(),dt.current="show",!gt.show){yt(!0);return}ut.set(()=>{dt.current==="show"&&yt(!0)},gt.show)},[gt.show,yt,ut]),Et=reactExports.useCallback(()=>{if(ut.clear(),dt.current="hide",!gt.hide){yt(!1);return}ut.set(()=>{dt.current==="hide"&&yt(!1)},gt.hide)},[gt.hide,yt,ut]),_t=reactExports.useCallback((...Gt)=>{vt(),ft==null||ft(...Gt)},[vt,ft]),wt=reactExports.useCallback((...Gt)=>{Et(),mt==null||mt(...Gt)},[Et,mt]),bt=reactExports.useCallback((...Gt)=>{yt(!ht),pt==null||pt(...Gt)},[pt,yt,ht]),$t=reactExports.useCallback((...Gt)=>{handleMouseOverOut(vt,Gt,"fromElement")},[vt]),kt=reactExports.useCallback((...Gt)=>{handleMouseOverOut(Et,Gt,"toElement")},[Et]),Nt=d==null?[]:[].concat(d),At={ref:xt};return Nt.indexOf("click")!==-1&&(At.onClick=bt),Nt.indexOf("focus")!==-1&&(At.onFocus=_t,At.onBlur=wt),Nt.indexOf("hover")!==-1&&(At.onMouseOver=$t,At.onMouseOut=kt),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[typeof et=="function"?et(At):reactExports.cloneElement(et,At),jsxRuntimeExports.jsx(Overlay$1,{...at,show:ht,onHide:Et,flip:st,placement:ot,popperConfig:_e,target:lt.current,children:c})]})}const Row=reactExports.forwardRef(({bsPrefix:d,className:c,as:et="div",..._e},tt)=>{const nt=useBootstrapPrefix(d,"row"),rt=useBootstrapBreakpoints(),it=useBootstrapMinBreakpoint(),ot=`${nt}-cols`,st=[];return rt.forEach(at=>{const lt=_e[at];delete _e[at];let ct;lt!=null&&typeof lt=="object"?{cols:ct}=lt:ct=lt;const ut=at!==it?`-${at}`:"";ct!=null&&st.push(`${ot}${ut}-${ct}`)}),jsxRuntimeExports.jsx(et,{ref:tt,..._e,className:classNames$1(c,nt,...st)})});Row.displayName="Row";const Row$1=Row,Table=reactExports.forwardRef(({bsPrefix:d,className:c,striped:et,bordered:_e,borderless:tt,hover:nt,size:rt,variant:it,responsive:ot,...st},at)=>{const lt=useBootstrapPrefix(d,"table"),ct=classNames$1(c,lt,it&&`${lt}-${it}`,rt&&`${lt}-${rt}`,et&&`${lt}-${typeof et=="string"?`striped-${et}`:"striped"}`,_e&&`${lt}-bordered`,tt&&`${lt}-borderless`,nt&&`${lt}-hover`),ut=jsxRuntimeExports.jsx("table",{...st,className:ct,ref:at});if(ot){let dt=`${lt}-responsive`;return typeof ot=="string"&&(dt=`${dt}-${ot}`),jsxRuntimeExports.jsx("div",{className:dt,children:ut})}return ut}),Table$1=Table,noop$2=()=>{},ToggleButton=reactExports.forwardRef(({bsPrefix:d,name:c,className:et,checked:_e,type:tt,onChange:nt,value:rt,disabled:it,id:ot,inputRef:st,...at},lt)=>(d=useBootstrapPrefix(d,"btn-check"),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{className:d,name:c,type:tt,value:rt,ref:st,autoComplete:"off",checked:!!_e,disabled:!!it,onChange:nt||noop$2,id:ot}),jsxRuntimeExports.jsx(Button$1,{...at,ref:lt,className:classNames$1(et,it&&"disabled"),type:void 0,role:void 0,as:"label",htmlFor:ot})]})));ToggleButton.displayName="ToggleButton";const ToggleButton$1=ToggleButton,ToggleButtonGroup=reactExports.forwardRef((d,c)=>{const{children:et,type:_e="radio",name:tt,value:nt,onChange:rt,vertical:it=!1,...ot}=useUncontrolled(d,{value:"onChange"}),st=()=>nt==null?[]:[].concat(nt),at=(lt,ct)=>{if(!rt)return;const ut=st(),dt=ut.indexOf(lt)!==-1;if(_e==="radio"){dt||rt(lt,ct);return}rt(dt?ut.filter(ht=>ht!==lt):[...ut,lt],ct)};return _e!=="radio"||tt||invariant$1(!1),jsxRuntimeExports.jsx(ButtonGroup$1,{...ot,ref:c,vertical:it,children:map(et,lt=>{const ct=st(),{value:ut,onChange:dt}=lt.props,ht=yt=>at(ut,yt);return reactExports.cloneElement(lt,{type:_e,name:lt.name||tt,checked:ct.indexOf(ut)!==-1,onChange:createChainedFunction(dt,ht)})})})}),ToggleButtonGroup$1=Object.assign(ToggleButtonGroup,{Button:ToggleButton$1});var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),__assign=function(){return __assign=Object.assign||function(d){for(var c,et=1,_e=arguments.length;et<_e;et++){c=arguments[et];for(var tt in c)Object.prototype.hasOwnProperty.call(c,tt)&&(d[tt]=c[tt])}return d},__assign.apply(this,arguments)},__rest=function(d,c){var et={};for(var _e in d)Object.prototype.hasOwnProperty.call(d,_e)&&c.indexOf(_e)<0&&(et[_e]=d[_e]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var tt=0,_e=Object.getOwnPropertySymbols(d);tt<_e.length;tt++)c.indexOf(_e[tt])<0&&Object.prototype.propertyIsEnumerable.call(d,_e[tt])&&(et[_e[tt]]=d[_e[tt]]);return et};function Tree2Element(d){return d&&d.map(function(c,et){return React.createElement(c.tag,__assign({key:et},c.attr),Tree2Element(c.child))})}function GenIcon(d){return function(c){return React.createElement(IconBase,__assign({attr:__assign({},d.attr)},c),Tree2Element(d.child))}}function IconBase(d){var c=function(et){var _e=d.attr,tt=d.size,nt=d.title,rt=__rest(d,["attr","size","title"]),it=tt||et.size||"1em",ot;return et.className&&(ot=et.className),d.className&&(ot=(ot?ot+" ":"")+d.className),React.createElement("svg",__assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},et.attr,_e,rt,{className:ot,style:__assign(__assign({color:d.color||et.color},et.style),d.style),height:it,width:it,xmlns:"http://www.w3.org/2000/svg"}),nt&&React.createElement("title",null,nt),d.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,function(et){return c(et)}):c(DefaultContext)}function MdLogout(d){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"}}]})(d)}function Navigation(){const d=useNavigate(),c="/equipment",et=useActiveUser();return jsxRuntimeExports.jsx(Navbar$1,{id:"primary-nav-bar",bg:"primary",variant:"dark",expand:"lg",children:jsxRuntimeExports.jsxs(Container$1,{children:[jsxRuntimeExports.jsx(Navbar$1.Brand,{className:"mb-0 h1",onClick:()=>d(c),children:"Pathfinder 1E Tools"}),jsxRuntimeExports.jsx(Navbar$1.Collapse,{id:"basic-navbar-nav",children:jsxRuntimeExports.jsx(Nav$1,{className:"me-auto",children:jsxRuntimeExports.jsx(Nav$1.Link,{onClick:()=>d(c),children:"Equipment"})})}),et&&jsxRuntimeExports.jsxs(Button$1,{className:"logout-button",variant:"link",style:{color:"white"},onClick:()=>{et==null||et.logout().then(()=>d("/login"))},children:[jsxRuntimeExports.jsx(MdLogout,{})," Logout"]})]})})}function EditorLayout(){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Navigation,{}),jsxRuntimeExports.jsx(Outlet,{})]})}function EditorLayoutRoute(){return jsxRuntimeExports.jsx(EditorLayout,{})}function useAsyncMemo(d,c,et){const[_e,tt]=reactExports.useState(et),[nt,rt]=reactExports.useState(!0),[it,ot]=reactExports.useState();return reactExports.useEffect(()=>{let st=!0;return d().then(at=>{st&&(tt(at),ot(void 0),rt(!1))}).catch(at=>{console.error(at),st&&(ot(at),rt(!1))}),()=>{st=!1}},c),[_e,nt,it]}const panel="_panel_6bp2u_1",clickable="_clickable_6bp2u_7",styles$P={panel,clickable};function Panel({className:d,children:c,onClick:et,..._e}){const tt=reactExports.useMemo(()=>{const nt=[styles$P.panel];return et&&nt.push(styles$P.clickable),d&&nt.push(d),nt.join(" ")},[d]);return jsxRuntimeExports.jsx("div",{..._e,onClick:et,className:tt,children:c})}function TextInput({value:d,id:c,onChange:et,onEnter:_e,readonly:tt=!1,placeholder:nt,autoFocus:rt=!1}){const[it,ot]=reactExports.useState(d);reactExports.useEffect(()=>ot(d),[d]);function st(at){at.key==="Enter"&&(_e==null||_e(it))}return jsxRuntimeExports.jsx("input",{id:c,type:"text",value:it,readOnly:tt,tabIndex:tt?-1:0,placeholder:nt,autoFocus:rt,onFocus:at=>at.target.select(),onChange:at=>!tt&&ot(at.target.value),onKeyUp:st,onBlur:at=>!tt&&(et==null?void 0:et(it))})}function NewCharacterDialog({show:d,onCreate:c,onCancel:et}){const[_e,tt]=reactExports.useState("");function nt(rt){c(rt)}return jsxRuntimeExports.jsxs(Modal$1,{show:d,onHide:et,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,size:"lg",scrollable:!0,className:"pf-new-character-dialog",children:[jsxRuntimeExports.jsx(Modal$1.Header,{className:"title",closeButton:!0,closeVariant:"white",children:jsxRuntimeExports.jsx(Modal$1.Title,{children:"Create Character"})}),jsxRuntimeExports.jsx(Modal$1.Body,{children:jsxRuntimeExports.jsxs(Container$1,{children:[jsxRuntimeExports.jsx("label",{children:"Character Name"}),jsxRuntimeExports.jsx(TextInput,{value:_e,onChange:tt,onEnter:nt,autoFocus:!0})]})}),jsxRuntimeExports.jsx(Modal$1.Footer,{children:jsxRuntimeExports.jsx(Button$1,{size:"lg",onClick:rt=>nt(_e),children:"Create"})})]})}const controls$1="_controls_14ooi_1",character="_character_14ooi_5",nameContainer$1="_nameContainer_14ooi_11",deleteButtonContainer$1="_deleteButtonContainer_14ooi_17",styles$O={controls:controls$1,character,nameContainer:nameContainer$1,deleteButtonContainer:deleteButtonContainer$1},loading="_loading_1hi0d_1",styles$N={loading};function LoadingBlock(){return jsxRuntimeExports.jsxs("div",{className:styles$N.loading,children:[jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{})]})}var _excluded$5=["color","size","title"];function _extends$5(){return _extends$5=Object.assign||function(d){for(var c=1;c<arguments.length;c++){var et=arguments[c];for(var _e in et)Object.prototype.hasOwnProperty.call(et,_e)&&(d[_e]=et[_e])}return d},_extends$5.apply(this,arguments)}function _objectWithoutProperties$5(d,c){if(d==null)return{};var et=_objectWithoutPropertiesLoose$5(d,c),_e,tt;if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(d);for(tt=0;tt<nt.length;tt++)_e=nt[tt],!(c.indexOf(_e)>=0)&&Object.prototype.propertyIsEnumerable.call(d,_e)&&(et[_e]=d[_e])}return et}function _objectWithoutPropertiesLoose$5(d,c){if(d==null)return{};var et={},_e=Object.keys(d),tt,nt;for(nt=0;nt<_e.length;nt++)tt=_e[nt],!(c.indexOf(tt)>=0)&&(et[tt]=d[tt]);return et}var CaretDownFill=reactExports.forwardRef(function(d,c){var et=d.color,_e=d.size,tt=d.title,nt=_objectWithoutProperties$5(d,_excluded$5);return React.createElement("svg",_extends$5({ref:c,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:_e,height:_e,fill:et},nt),tt?React.createElement("title",null,tt):null,React.createElement("path",{d:"M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"}))});CaretDownFill.propTypes={color:PropTypes.string,size:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),title:PropTypes.string};CaretDownFill.defaultProps={color:"currentColor",size:"1em",title:null};const CaretDownFill$1=CaretDownFill;var _excluded$4=["color","size","title"];function _extends$4(){return _extends$4=Object.assign||function(d){for(var c=1;c<arguments.length;c++){var et=arguments[c];for(var _e in et)Object.prototype.hasOwnProperty.call(et,_e)&&(d[_e]=et[_e])}return d},_extends$4.apply(this,arguments)}function _objectWithoutProperties$4(d,c){if(d==null)return{};var et=_objectWithoutPropertiesLoose$4(d,c),_e,tt;if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(d);for(tt=0;tt<nt.length;tt++)_e=nt[tt],!(c.indexOf(_e)>=0)&&Object.prototype.propertyIsEnumerable.call(d,_e)&&(et[_e]=d[_e])}return et}function _objectWithoutPropertiesLoose$4(d,c){if(d==null)return{};var et={},_e=Object.keys(d),tt,nt;for(nt=0;nt<_e.length;nt++)tt=_e[nt],!(c.indexOf(tt)>=0)&&(et[tt]=d[tt]);return et}var CaretRightFill=reactExports.forwardRef(function(d,c){var et=d.color,_e=d.size,tt=d.title,nt=_objectWithoutProperties$4(d,_excluded$4);return React.createElement("svg",_extends$4({ref:c,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:_e,height:_e,fill:et},nt),tt?React.createElement("title",null,tt):null,React.createElement("path",{d:"m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"}))});CaretRightFill.propTypes={color:PropTypes.string,size:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),title:PropTypes.string};CaretRightFill.defaultProps={color:"currentColor",size:"1em",title:null};const CaretRightFill$1=CaretRightFill;var _excluded$3=["color","size","title"];function _extends$3(){return _extends$3=Object.assign||function(d){for(var c=1;c<arguments.length;c++){var et=arguments[c];for(var _e in et)Object.prototype.hasOwnProperty.call(et,_e)&&(d[_e]=et[_e])}return d},_extends$3.apply(this,arguments)}function _objectWithoutProperties$3(d,c){if(d==null)return{};var et=_objectWithoutPropertiesLoose$3(d,c),_e,tt;if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(d);for(tt=0;tt<nt.length;tt++)_e=nt[tt],!(c.indexOf(_e)>=0)&&Object.prototype.propertyIsEnumerable.call(d,_e)&&(et[_e]=d[_e])}return et}function _objectWithoutPropertiesLoose$3(d,c){if(d==null)return{};var et={},_e=Object.keys(d),tt,nt;for(nt=0;nt<_e.length;nt++)tt=_e[nt],!(c.indexOf(tt)>=0)&&(et[tt]=d[tt]);return et}var Google=reactExports.forwardRef(function(d,c){var et=d.color,_e=d.size,tt=d.title,nt=_objectWithoutProperties$3(d,_excluded$3);return React.createElement("svg",_extends$3({ref:c,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:_e,height:_e,fill:et},nt),tt?React.createElement("title",null,tt):null,React.createElement("path",{d:"M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z"}))});Google.propTypes={color:PropTypes.string,size:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),title:PropTypes.string};Google.defaultProps={color:"currentColor",size:"1em",title:null};const Google$1=Google;var _excluded$2=["color","size","title"];function _extends$2(){return _extends$2=Object.assign||function(d){for(var c=1;c<arguments.length;c++){var et=arguments[c];for(var _e in et)Object.prototype.hasOwnProperty.call(et,_e)&&(d[_e]=et[_e])}return d},_extends$2.apply(this,arguments)}function _objectWithoutProperties$2(d,c){if(d==null)return{};var et=_objectWithoutPropertiesLoose$2(d,c),_e,tt;if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(d);for(tt=0;tt<nt.length;tt++)_e=nt[tt],!(c.indexOf(_e)>=0)&&Object.prototype.propertyIsEnumerable.call(d,_e)&&(et[_e]=d[_e])}return et}function _objectWithoutPropertiesLoose$2(d,c){if(d==null)return{};var et={},_e=Object.keys(d),tt,nt;for(nt=0;nt<_e.length;nt++)tt=_e[nt],!(c.indexOf(tt)>=0)&&(et[tt]=d[tt]);return et}var Lock=reactExports.forwardRef(function(d,c){var et=d.color,_e=d.size,tt=d.title,nt=_objectWithoutProperties$2(d,_excluded$2);return React.createElement("svg",_extends$2({ref:c,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:_e,height:_e,fill:et},nt),tt?React.createElement("title",null,tt):null,React.createElement("path",{d:"M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2zM5 8h6a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1z"}))});Lock.propTypes={color:PropTypes.string,size:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),title:PropTypes.string};Lock.defaultProps={color:"currentColor",size:"1em",title:null};const Lock$1=Lock;var _excluded$1=["color","size","title"];function _extends$1(){return _extends$1=Object.assign||function(d){for(var c=1;c<arguments.length;c++){var et=arguments[c];for(var _e in et)Object.prototype.hasOwnProperty.call(et,_e)&&(d[_e]=et[_e])}return d},_extends$1.apply(this,arguments)}function _objectWithoutProperties$1(d,c){if(d==null)return{};var et=_objectWithoutPropertiesLoose$1(d,c),_e,tt;if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(d);for(tt=0;tt<nt.length;tt++)_e=nt[tt],!(c.indexOf(_e)>=0)&&Object.prototype.propertyIsEnumerable.call(d,_e)&&(et[_e]=d[_e])}return et}function _objectWithoutPropertiesLoose$1(d,c){if(d==null)return{};var et={},_e=Object.keys(d),tt,nt;for(nt=0;nt<_e.length;nt++)tt=_e[nt],!(c.indexOf(tt)>=0)&&(et[tt]=d[tt]);return et}var PencilSquare=reactExports.forwardRef(function(d,c){var et=d.color,_e=d.size,tt=d.title,nt=_objectWithoutProperties$1(d,_excluded$1);return React.createElement("svg",_extends$1({ref:c,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:_e,height:_e,fill:et},nt),tt?React.createElement("title",null,tt):null,React.createElement("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}),React.createElement("path",{fillRule:"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"}))});PencilSquare.propTypes={color:PropTypes.string,size:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),title:PropTypes.string};PencilSquare.defaultProps={color:"currentColor",size:"1em",title:null};const PencilSquare$1=PencilSquare;var _excluded=["color","size","title"];function _extends(){return _extends=Object.assign||function(d){for(var c=1;c<arguments.length;c++){var et=arguments[c];for(var _e in et)Object.prototype.hasOwnProperty.call(et,_e)&&(d[_e]=et[_e])}return d},_extends.apply(this,arguments)}function _objectWithoutProperties(d,c){if(d==null)return{};var et=_objectWithoutPropertiesLoose(d,c),_e,tt;if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(d);for(tt=0;tt<nt.length;tt++)_e=nt[tt],!(c.indexOf(_e)>=0)&&Object.prototype.propertyIsEnumerable.call(d,_e)&&(et[_e]=d[_e])}return et}function _objectWithoutPropertiesLoose(d,c){if(d==null)return{};var et={},_e=Object.keys(d),tt,nt;for(nt=0;nt<_e.length;nt++)tt=_e[nt],!(c.indexOf(tt)>=0)&&(et[tt]=d[tt]);return et}var Trash=reactExports.forwardRef(function(d,c){var et=d.color,_e=d.size,tt=d.title,nt=_objectWithoutProperties(d,_excluded);return React.createElement("svg",_extends({ref:c,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:_e,height:_e,fill:et},nt),tt?React.createElement("title",null,tt):null,React.createElement("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),React.createElement("path",{fillRule:"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"}))});Trash.propTypes={color:PropTypes.string,size:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),title:PropTypes.string};Trash.defaultProps={color:"currentColor",size:"1em",title:null};const Trash$1=Trash,icon$1="_icon_bpuo8_1",styles$M={icon:icon$1};function classNames(d){return d.filter(c=>c!==void 0).join(" ")}function DeleteIcon({className:d}){return jsxRuntimeExports.jsx(Trash$1,{className:classNames([styles$M.icon,d])})}const DatabaseContext=reactExports.createContext(void 0);function useDatabase(){const d=reactExports.useContext(DatabaseContext);if(d===void 0)throw new Error("Context must be used within a Provider");return d}const ItemDatabaseContext=reactExports.createContext(void 0);function useItemDatabase(){const d=reactExports.useContext(ItemDatabaseContext);if(d===void 0)throw new Error("Context must be used within a Provider");return d}const CharacterStoreContext=reactExports.createContext(void 0);function useCharacterStore(){const d=reactExports.useContext(CharacterStoreContext);if(d===void 0)throw new Error("Context must be used within a Provider");return d}const EquipmentSetStoreContext=reactExports.createContext(void 0);function useEquipmentSetStore(){const d=reactExports.useContext(EquipmentSetStoreContext);if(d===void 0)throw new Error("Context must be used within a Provider");return d}function CharacterList(){const d=useCharacterStore(),c=useNavigate(),[et,_e]=reactExports.useState([]),[tt,nt]=useAsyncMemo(()=>d.list(),[d]);reactExports.useEffect(()=>{_e(tt)},[tt]);const rt=async ot=>{const st=await d.create({character_name:ot});c(`/character/edit/${st.id}`)},it=async ot=>{_e(et.filter(st=>st.id!==ot)),await d.delete(ot)};return jsxRuntimeExports.jsxs("main",{children:[jsxRuntimeExports.jsx("header",{children:"Characters"}),jsxRuntimeExports.jsxs("section",{children:[nt?jsxRuntimeExports.jsx(LoadingBlock,{}):jsxRuntimeExports.jsx("div",{className:styles$O.characters,children:et==null?void 0:et.map(ot=>jsxRuntimeExports.jsx(CharacterListEntry,{character:ot,onDelete:it},ot.id))}),jsxRuntimeExports.jsx("div",{className:styles$O.controls,children:jsxRuntimeExports.jsx(AddCharacterButton$1,{disabled:nt,onCreate:rt})})]})]})}function CharacterListEntry({character:d,onDelete:c}){const et=useNavigate();return jsxRuntimeExports.jsxs(Panel,{className:styles$O.character,children:[jsxRuntimeExports.jsx("div",{className:classNames([styles$O.nameContainer,"clickable"]),onClick:()=>{et(`/character/edit/${d.id}`)},children:d.name}),jsxRuntimeExports.jsx("div",{className:classNames([styles$O.deleteButtonContainer,"clickable"]),onClick:()=>{c(d.id)},children:jsxRuntimeExports.jsx(DeleteIcon,{})})]})}function AddCharacterButton$1({onCreate:d,disabled:c=!1}){const[et,_e]=reactExports.useState(!1);function tt(rt){_e(!1),d(rt)}function nt(){_e(!1)}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button$1,{disabled:c,onClick:rt=>_e(!0),size:"lg",children:"+ Character"}),et&&jsxRuntimeExports.jsx(NewCharacterDialog,{show:et,onCreate:tt,onCancel:nt})]})}class e{constructor(c){this.value=c}asText(){return this.value}asNumber(){return parseFloat(this.value)}asBoolean(){return!["false","no","0",""].includes(this.value.toLowerCase())}equals(c){return c.hasValue()&&this.value===c.asText()}toString(){return this.asText()}map(c){return c(this)}hasValue(){return!0}}class t{constructor(c){this.value=c}asText(){return this.value.toString()}asNumber(){return this.value}asBoolean(){return this.value>0}equals(c){return c.hasValue()&&this.value===c.asNumber()}toString(){return this.asText()}map(c){return c(this)}hasValue(){return!0}}class s{constructor(c){this.value=c}asBoolean(){return this.value}asNumber(){return this.value?1:0}asText(){return this.value?"true":"false"}map(c){return c(this)}hasValue(){return!0}equals(c){return c.hasValue()&&this.value===c.asBoolean()}toString(){return this.asText()}}class r{asBoolean(){return!1}asNumber(){return 0}asText(){return""}map(c){return this}hasValue(){return!1}equals(c){return!c.hasValue()}toString(){return this.asText()}}r.Instance=new r;class n{static of(c){return c===void 0?r.Instance:typeof c=="string"?new e(c):typeof c=="number"?new t(c):typeof c=="boolean"?c?n.True:n.False:void 0}}n.True=new s(!0),n.False=new s(!1),n.None=r.Instance;class a extends n{constructor(c,et){super(),this.id=c,this.value=et}asBoolean(){return this.value.asBoolean()}asNumber(){return this.value.asNumber()}asText(){return this.value.asText()}hasValue(){return this.value.hasValue()}equals(c){return this.value.equals(c)}}class o{static just(c){return c instanceof n?new o.StaticResolvable(c):new o.StaticResolvable(n.of(c))}map(c){return new o.MappedResolvable(this,c)}}o.StaticResolvable=class extends o{constructor(d){super(),this.resolved=d}resolve(d){return this.resolved}asFormula(){return this.resolved.asText()}},o.MappedResolvable=class extends o{constructor(d,c){super(),this.resolvable=d,this.mapFn=c}resolve(d){return this.mapFn(this.resolvable.resolve(d))}asFormula(){return this.resolvable.asFormula()}},o.True=new o.StaticResolvable(n.True),o.False=new o.StaticResolvable(n.False),o.None=new o.StaticResolvable(n.None);class i{constructor(c,et){this.value=c,this.name=et}asBoolean(){return this.value.asBoolean()}asNumber(){return this.value.asNumber()}asText(){return this.value.asText()}asName(){return this.name}map(c){return c(this)}equals(c){return this.value.equals(c)}hasValue(){return this.value.hasValue()}}class u{constructor(c,et,_e){this.value=c,this.prefix=et,this.suffix=_e}asBoolean(){return this.value.asBoolean()}asNumber(){return this.value.asNumber()}asText(){return this.value.asText()}asQuotedText(){return this.prefix+this.asText()+this.suffix}map(c){return c(this)}equals(c){return this.value.equals(c)}hasValue(){return this.value.hasValue()}}class h{static of(c){return new p$1(c)}}h.Empty=new class{get(d){}resolve(d){}keys(){return[]}search(d){return[]}};class l{resolve(c){var et;return(et=this.get(c))===null||et===void 0?void 0:et.resolve(this)}search(c){return f.find(this,c)}}class f{static find(c,et){const _e=new RegExp(this.escapeRegExp(et).replace(/\\\*/g,".*?"));return c.keys().filter(tt=>_e.test(tt)).map(tt=>{const nt=c.resolve(tt);if(nt!==void 0)return new a(tt,nt)}).filter(tt=>tt!==void 0).map(tt=>tt)}static escapeRegExp(c){return c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}let p$1=class extends l{constructor(c){super(),this.state=c}get(c){const et=this.state[c];return et instanceof o?et:o.just(et)}resolve(c){const et=this.state[c];return et instanceof o?et.resolve(this):n.of(et)}set(c,et){this.state[c]=et}remove(c){delete this.state[c]}keys(){return Object.keys(this.state)}rename(c,et){c in this.state&&(this.state[et]=this.state[c],delete this.state[c])}};class m extends Error{constructor(c){super(c)}}const v=["1","2","3","4","5","6","7","8","9","0"],w=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],x=[...w,...v,"_"];class b extends Error{constructor(c,et,_e){super(c),this.text=et,this.index=_e}}class g{constructor(){this.root=new E}ignoreWhitespaces(){return this.add(" ",c=>{})}add(c,et){return typeof c!="string"?(_e=c,c=Array.isArray(_e)?_e:[_e],this.addBranch(c,et)):this.addBranch([A(c)],et);var _e}addBranch(c,et){return k.of(c).chainTo(this.root,et),this}parse(c){const et=[];for(let _e=0;_e<c.length;_e++){const tt=this.root.walk(c,_e);if(!(tt.length>0))throw new b(g.generateParseErrorMessage(_e,c,`did not expect character: '${c[_e]}'`),c,_e);{const nt=tt[0],rt=nt.get();rt!==void 0&&et.push(rt),_e=nt.endIndex-1}}return et}static generateParseErrorMessage(c,et,_e){let tt=`Parse error at index ${c} of "${et}": ${_e}`;return tt+=`
${et}
${" ".repeat(c)}^`,tt}}class N{constructor(c,et,_e,tt){this.text=c,this.startIndex=et,this.endIndex=_e,this.mapper=tt}get(){return this.mapper(this.text.substring(this.startIndex,this.endIndex))}}class ${static match(c){return new L(c)}}class L extends ${constructor(c){super(),this.matcher=c}node(){return new B(this.matcher)}repeats(c=0,et=void 0){return new q(this.matcher,c,et)}optional(){return this.repeats(0,1)}not(){return new L(new j(this.matcher))}}class q extends ${constructor(c,et,_e){super(),this.matcher=c,this.minLength=et,this.maxLength=_e}node(){return new S(this.matcher,this.minLength,this.maxLength)}}class F extends ${constructor(c,et){super(),this.closeSequence=c,this.escapeSequence=et}node(){return new R(this.closeSequence,this.escapeSequence)}}class k{static of(c){return new k(c)}constructor(c){this.expressions=c}chainTo(c,et,_e=!0){let tt=c;for(let nt of this.expressions)tt=nt instanceof $?tt.add(nt.node()):nt.chainTo(tt,et,!1);if(_e){let nt=tt;if(nt.mapper!==void 0)throw new Error("Conflicting tokens");nt.mapper=et}return tt}}class T{static of(c){return new T(c)}constructor(c){this.expressions=c}chainTo(c,et,_e=!0){let tt=c;tt.mapper=et;for(let nt of this.expressions)tt=nt instanceof y?tt.add(nt):nt.chainTo(tt,et,!1);if(_e){let nt=tt;if(nt.mapper!==void 0)throw new Error("Conflicting tokens");nt.mapper=et}return tt}}class y{constructor(){this.id=y.idCounter++,this.children=void 0}add(c){this.children===void 0&&(this.children=[]);for(let et of this.children)if(et.equals(c))return et;return this.children.push(c),c}walkChildren(c,et,_e){return this.children===void 0?[]:this.children.flatMap(tt=>tt.walk(c,et,_e))}}y.idCounter=1;class E extends y{walk(c,et=0,_e=et){return this.walkChildren(c,et,_e)}equals(c){return!1}}class B extends y{constructor(c){super(),this.matcher=c,this.mapper=void 0}walk(c,et,_e){if(!this.matches(c,et,_e))return[];const tt=this.walkChildren(c,et,_e+1);return tt.length>0?tt:this.mapper!==void 0?[new N(c,et,_e+1,this.mapper)]:[]}matches(c,et,_e){const tt=c[_e];return tt!==void 0&&this.matcher.matches(tt)}equals(c){return c instanceof B&&this.matcher.equals(c.matcher)}}class S extends y{constructor(c,et,_e){super(),this.matcher=c,this.minLength=et,this.maxLength=_e,this.mapper=void 0}walk(c,et,_e){const tt=this.minLength,nt=this.calculateMaxLength(c,_e);let rt=0;for(let ot=c[_e];ot!==void 0&&this.matcher.matches(ot)&&rt<nt;ot=c[_e])_e++,rt++;if(rt<tt)return[];const it=this.walkChildren(c,et,_e);return rt>nt||it.length>0?it:this.mapper!==void 0?[new N(c,et,_e,this.mapper)]:[]}equals(c){return c instanceof S&&this.matcher.equals(c.matcher)&&this.minLength===c.minLength&&this.maxLength===c.maxLength}calculateMaxLength(c,et){const _e=c.length-et;return this.maxLength!==void 0?Math.min(this.maxLength,_e):_e}}class R extends y{constructor(c,et){super(),this.closeSequence=c,this.escapeSequence=et,this.mapper=void 0}walk(c,et,_e){for(;_e<c.length;_e++)for(let tt=0;tt<this.closeSequence.length&&c[_e+tt]===this.closeSequence[tt]&&!this.isEscaped(c,_e);tt++)if(tt===this.closeSequence.length-1){const nt=this.walkChildren(c,et,_e);return nt.length>0?nt:this.mapper!==void 0&&_e>et?[new N(c,et,_e,this.mapper)]:[]}return this.mapper!==void 0&&_e===c.length?[new N(c,et,_e,this.mapper)]:[]}isEscaped(c,et){if(this.escapeSequence===void 0)return!1;for(let _e=et-this.escapeSequence.length+1,tt=0;tt<this.escapeSequence.length;_e++,tt++)if(_e<0&&_e>=et||c[_e]!==this.escapeSequence[tt])return!1;return!0}equals(c){return c instanceof R&&this.closeSequence===c.closeSequence}}class M{constructor(c){this.character=c}matches(c){return this.character===c}equals(c){return c instanceof M&&this.character===c.character}}class V{constructor(c){this.allowed=c}matches(c){return this.allowed.includes(c)}equals(c){return c instanceof V&&function(et,_e){if(et.length!==_e.length)return!1;for(let tt=0;tt<et.length;tt++)if(et[tt]!==_e[tt])return!1;return!0}(this.allowed,c.allowed)}}class I{matches(c){return c!==void 0}equals(c){return c instanceof V}}class j{constructor(c){this.matcher=c}matches(c){return!this.matcher.matches(c)}equals(c){return c instanceof j&&this.matcher.equals(c.matcher)}}function C(d){return Array.isArray(d)&&d.length===1&&(d=d[0]),$.match(Array.isArray(d)?new V(d):new M(d))}function A(d){return k.of(Array.from(d).map(c=>C(c)))}function O(...d){return k.of(d.map(c=>typeof c=="string"?A(c):c))}function P(...d){return T.of([O(...d)])}function U(d,c,et=void 0){return O(A(d),function(_e,tt=void 0){return O(new F(_e,tt))}(c,et),A(c))}new class extends ${constructor(){super(),this.matcher=new I}node(){return new B(this.matcher)}except(...d){return new L(new j(new V(d)))}repeats(d=0,c=void 0){return new q(this.matcher,d,c)}optional(){return this.repeats(0,1)}not(){return new L(new j(this.matcher))}};const z=O(C(v).repeats(1));O(C(x).repeats(1));const D=O(C([...x,":",".","#","*"]).repeats(1)),Q=O(z),W=O(Q,".",z);O(Q,P(".",z));const G=C(w);function H(d,c){switch(d){case 0:return()=>n.of(c());case 1:return et=>{var _e;return n.of(c((_e=et==null?void 0:et.asNumber())!==null&&_e!==void 0?_e:0))};case 2:return(et,_e)=>{var tt,nt;return n.of(c((tt=et==null?void 0:et.asNumber())!==null&&tt!==void 0?tt:0,(nt=_e==null?void 0:_e.asNumber())!==null&&nt!==void 0?nt:0))};case 3:return(et,_e,tt)=>{var nt,rt,it;return n.of(c((nt=et==null?void 0:et.asNumber())!==null&&nt!==void 0?nt:0,(rt=_e==null?void 0:_e.asNumber())!==null&&rt!==void 0?rt:0,(it=tt==null?void 0:tt.asNumber())!==null&&it!==void 0?it:0))};default:throw new Error(`Unsupported number of operands: ${d}`)}}var J;(function(d){d[d.Left=1]="Left",d[d.Right=2]="Right"})(J||(J={}));class K{constructor(c,et,_e){this.name=c,this.operands=et,this.fn=_e}execute(c,et,_e){switch(this.operands){case 0:return this.fn();case 1:return this.fn(c);case 2:return this.fn(c,et);case 3:return this.fn(c,et,_e);default:throw new Error(`Unsupported number of operands: ${this.operands}`)}}}class X extends K{constructor(c,et,_e){super(c,et,_e)}}class Y{constructor(c,et){this.name=c,this.fn=et}execute(c){return this.fn(c)}}class Z extends K{constructor(c,et,_e,tt,nt){super(c,tt,nt),this.name=c,this.precedence=et,this.associativity=_e}}class _{constructor(c,et){this.unary=c,this.binary=et}}class ee{constructor(c,et){this.key=c,this.resolver=et}resolve(c){var et;return(et=this.resolver(c,this.key))!==null&&et!==void 0?et:n.None}toString(){return this.key}}class te{constructor(c,et){this.text=c,this.decorator=et}apply(c){return this.decorator(this.text,c)}}class se{constructor(c,et=void 0,_e=void 0){this.resolver=c,this.prefix=et,this.suffix=_e}resolve(c){return this.prefix&&this.suffix?this.resolver(c).map(et=>new u(et,this.prefix,this.suffix)):this.resolver(c)}}class re{constructor(){this.bracketFn=c=>c,this.parser=new g().ignoreWhitespaces().add([Q],c=>parseInt(c)).add([W],c=>parseFloat(c)).add("(",c=>c).add(")",c=>c).add(",",c=>c).add(U('"','"','\\"'),c=>new se(()=>n.of(c.slice(1,-1)),'"','"')).add(U("'","'","\\'"),c=>new se(()=>n.of(c.slice(1,-1)),"'","'"))}operator(c,et,_e,tt,nt){return this.parser.add(c,rt=>new Z(c,et,_e,tt,nt)),this}biOperator(c,et,_e,tt,nt,rt,it){return this.parser.add(c,ot=>new _(new Z(c,et,_e,1,tt),new Z(c,nt,rt,2,it))),this}intOperator(c,et,_e,tt,nt){return this.operator(c,et,_e,tt,H(tt,nt))}function(c,et,_e){return this.parser.add(c,tt=>new X(c,et,_e)),this}varargsFunction(c,et){return this.parser.add(c,_e=>new Y(c,et)),this}intFunction(c,et,_e){return this.function(c,et,H(et,_e))}variable(c,et,_e){return this.parser.add([A(c),G,P(D),A(et)],tt=>new ee(tt,(nt,rt)=>_e(nt,rt.substring(c.length,rt.length-et.length)))),this}comment(c,et,_e=(tt,nt)=>nt){return this.parser.add(U(c,et),tt=>new te(tt.substring(c.length,tt.length-et.length),_e)),this}term(c,et){return this.parser.add([A(c)],_e=>new ee(_e,tt=>et(tt))),this}brackets(c){return this.bracketFn=c,this}parse(c){let et=[],_e=[],tt=[];const nt=this.parser.parse(c);for(let rt=0;rt<nt.length;rt++){let it=nt[rt],ot=rt>0?nt[rt-1]:void 0;if(it instanceof _){let st=it;it=st.binary,(!ot||ot instanceof Z||ot==="("||ot===",")&&(it=st.unary)}if(it instanceof Z){let st=it,at=_e.at(-1);at instanceof Z&&(st.precedence<at.precedence||st.associativity===J.Left&&st.precedence===at.precedence)&&(_e.pop(),et.push(at)),_e.push(st)}else if(it instanceof X)_e.push(it),tt.push(1);else if(it instanceof Y)_e.push(it),tt.push(1);else if(it instanceof ee)et.push(it);else if(it instanceof se)et.push(it);else if(it instanceof te)et.push(it);else switch(it){case" ":case"{":case"}":break;case",":for(tt[tt.length-1]++;_e.length>0;){let st=_e.pop();if(st==="("){_e.push(st);break}et.push(st)}break;case"(":_e.push(it);break;case")":for(;_e.length>0;){let st=_e.pop();if(st==="(")break;et.push(st)}if(_e.at(-1)instanceof X){const st=tt.pop(),at=_e.pop();if(st!==at.operands)throw new Error(`${at.name} expected ${at.operands} parameters, but got ${st}`);et.push(at)}else _e.at(-1)instanceof Y&&(et.push(tt.pop()),et.push(_e.pop()));break;default:et.push(n.of(it))}}for(;_e.length>0;)et.push(_e.pop());return new ne(et,c)}}class ne extends o{static parser(){return new re}constructor(c,et){super(),this.stack=c,this.originalFormula=et}asFormula(){return this.originalFormula}resolve(c=h.Empty){let et=[],_e=[...this.stack];for(;_e.length>0;){let tt=_e.shift();if(tt instanceof K){let nt=tt;if(nt.operands===0)et.push(nt.execute());else if(nt.operands===1){let rt=et.pop();if(rt===void 0)throw new m(`Error executing function "${nt.name}" in "${this.asFormula()}" because parameter was undefined`);et.push(nt.execute(rt))}else if(nt.operands===2){let rt=et.pop(),it=et.pop();if(it===void 0)throw new m(`Error executing function "${nt.name}" in "${this.asFormula()}" because first parameter was undefined`);if(rt===void 0)throw new m(`Error executing function "${nt.name}" in "${this.asFormula()}" because second parameter was undefined`);et.push(nt.execute(it,rt))}else{if(nt.operands!==3)throw new Error("Unsupported number of operands: "+nt.operands);{let rt=et.pop(),it=et.pop(),ot=et.pop();if(ot===void 0)throw new m(`Error executing function "${nt.name}" in "${this.asFormula()}" because first parameter was undefined`);if(it===void 0)throw new m(`Error executing function "${nt.name}" in "${this.asFormula()}" because second parameter was undefined`);if(rt===void 0)throw new m(`Error executing function "${nt.name}" in "${this.asFormula()}" because third parameter was undefined`);et.push(nt.execute(ot,it,rt))}}}else if(tt instanceof Y){let nt=tt,rt=[],it=et.pop();for(;it-- >0;)rt.push(et.pop());et.push(nt.execute(rt))}else if(tt instanceof te){const nt=et.pop();et.push(tt.apply(nt))}else if(tt instanceof se&&(tt=tt.resolve(c)),tt instanceof ee&&(tt=tt.resolve(c),tt instanceof ne)){const nt=tt.stack;for(let rt=nt.length-1;rt>=0;rt--)_e.unshift(nt[rt])}else{for(;tt instanceof o;)tt=tt.resolve(c);et.push(tt)}}return et.pop()}}function ae(d){return(...c)=>n.of(d(...c.map(ie)))}function oe(d){return(...c)=>n.of(`${d}(${c.map(ie).join(",")})`)}function ie(d){return d instanceof u?d.asQuotedText():d.asText()}class ue extends n{asNumber(){throw ue.UnsupportedException}asBoolean(){throw ue.UnsupportedException}}ue.UnsupportedException=new Error("Not available for optimization");class ce extends ue{constructor(c){super(),this.values=[],c.forEach(et=>{et instanceof ce?this.values.unshift(...et.values):this.values.unshift(et)})}asText(){return this.values.length===1?ie(this.values[0]):`any(${this.values.map(ie).join(",")})`}}class he extends ue{constructor(c){super(),this.values=[],c.forEach(et=>{et instanceof he?this.values.unshift(...et.values):this.values.unshift(et)})}asText(){return this.values.length===1?ie(this.values[0]):`all(${this.values.map(ie).join(",")})`}}class le extends ue{static create(c){return(et,_e)=>new le(c,et,_e)}constructor(c,et,_e){super(),this.operator=c,this.a=et,this.b=_e}asText(){return`(${this.asTextNoBrackets()})`}asTextNoBrackets(){return this.format(this.a)+this.operator+this.format(this.b)}format(c){if(c instanceof le)switch(this.operator){case"+":case"-":switch(c.operator){case"+":case"-":return c.asTextNoBrackets();default:return ie(c)}case"*":case"/":switch(c.operator){case"*":case"/":return c.asTextNoBrackets();default:return ie(c)}default:return ie(c)}return ie(c)}}class fe{static optimize(c){const et=this.Parser.parse(c).resolve();return et instanceof le?et.asTextNoBrackets():ie(et)}}fe.Parser=ne.parser().operator("^",4,J.Right,2,le.create("^")).operator("*",3,J.Left,2,le.create("*")).operator("/",3,J.Left,2,le.create("/")).operator("+",2,J.Left,2,le.create("+")).operator("-",2,J.Left,2,le.create("-")).operator("!",2,J.Left,1,ae(d=>`!${d}`)).operator("<",3,J.Left,2,ae((d,c)=>`${d}<${c}`)).operator("<=",3,J.Left,2,ae((d,c)=>`${d}<=${c}`)).operator(">",3,J.Left,2,ae((d,c)=>`${d}>${c}`)).operator(">=",3,J.Left,2,ae((d,c)=>`${d}>=${c}`)).operator("==",3,J.Left,2,ae((d,c)=>`${d}==${c}`)).operator("!=",3,J.Left,2,ae((d,c)=>`${d}!=${c}`)).operator("AND",1,J.Left,2,(d,c)=>new he([c,d])).operator("OR",1,J.Left,2,(d,c)=>new ce([c,d])).term("true",()=>n.of("true")).term("false",()=>n.of("false")).term("null",()=>n.of("null")).function("abs",1,oe("abs")).function("min",2,oe("min")).function("max",2,oe("max")).function("floor",1,oe("floor")).function("ceil",1,oe("ceil")).function("signed",1,oe("signed")).function("if",3,oe("if")).function("concat",2,oe("concat")).function("ordinal",1,oe("ordinal")).varargsFunction("any",d=>new ce(d)).varargsFunction("all",d=>new he(d)).variable("@","",(d,c)=>n.of(`@${c}`)).variable("@{","}",(d,c)=>n.of(`@{${c}}`)).variable("min(@",")",(d,c)=>n.of(`min(@${c})`)).variable("max(@",")",(d,c)=>n.of(`max(@${c})`)).variable("sum(@",")",(d,c)=>n.of(`sum(@${c})`)).comment("[","]",(d,c)=>new u(c,"",`[${d}]`));class pe{static parse(c){return c instanceof o?c:this.Parser.parse(c)}static optimize(c){return fe.optimize(c)}static noneIfEmpty(c){return c.length>0?c:[]}static variableFn(c,et){return c.get(et)}static minFn(c,et){return pe.noneIfEmpty(c.search(et)).reduce((_e,tt)=>_e.asNumber()<tt.asNumber()?_e:tt)}static maxFn(c,et){return pe.noneIfEmpty(c.search(et)).reduce((_e,tt)=>_e.asNumber()>tt.asNumber()?_e:tt,n.None)}static sumFn(c,et){return c.search(et).reduce((_e,tt)=>pe.addFn(_e,tt),n.None)}static addFn(c,et){return(c??n.None).equals(n.None)&&(et??n.None).equals(n.None)?n.None:n.of(c.asNumber()+et.asNumber())}}pe.Parser=ne.parser().biOperator("-",4,J.Left,d=>n.of(-d.asNumber()),2,J.Left,(d,c)=>n.of(d.asNumber()-c.asNumber())).operator("^",4,J.Right,2,(d,c)=>n.of(Math.pow(d.asNumber(),c.asNumber()))).operator("*",3,J.Left,2,(d,c)=>n.of(d.asNumber()*c.asNumber())).operator("/",3,J.Left,2,(d,c)=>n.of(d.asNumber()/c.asNumber())).operator("+",2,J.Left,2,pe.addFn).operator("!",2,J.Left,1,d=>n.of(!d.asBoolean())).operator("<",3,J.Left,2,(d,c)=>n.of(d.asNumber()<c.asNumber())).operator("<=",3,J.Left,2,(d,c)=>n.of(d.asNumber()<=c.asNumber())).operator(">",3,J.Left,2,(d,c)=>n.of(d.asNumber()>c.asNumber())).operator(">=",3,J.Left,2,(d,c)=>n.of(d.asNumber()>=c.asNumber())).operator("==",3,J.Left,2,(d,c)=>n.of(d.equals(c))).operator("!=",3,J.Left,2,(d,c)=>n.of(!d.equals(c))).operator("AND",1,J.Left,2,(d,c)=>n.of(d.asBoolean()&&c.asBoolean())).operator("OR",1,J.Left,2,(d,c)=>n.of(d.asBoolean()||c.asBoolean())).term("true",()=>n.of(!0)).term("false",()=>n.of(!1)).term("null",()=>n.None).function("abs",1,d=>n.of(Math.abs(d.asNumber()))).function("min",2,(d,c)=>n.of(Math.min(d.asNumber(),c.asNumber()))).function("max",2,(d,c)=>n.of(Math.max(d.asNumber(),c.asNumber()))).function("floor",1,d=>n.of(Math.floor(d.asNumber()))).function("ceil",1,d=>n.of(Math.ceil(d.asNumber()))).function("signed",1,d=>n.of((d.asNumber()<0?"":"+")+d.asNumber())).function("if",3,(d,c,et)=>d.asBoolean()?c:et).function("concat",2,(d,c)=>n.of(d.asText()+c.asText())).function("ordinal",1,d=>n.of(function(c){let et=["th","st","nd","rd"],_e=c%100;return c+(et[(_e-20)%10]||et[_e]||et[0])}(d.asNumber()))).varargsFunction("any",d=>n.of(d.some(c=>c.asBoolean()))).varargsFunction("all",d=>n.of(d.every(c=>c.asBoolean()))).variable("@","",pe.variableFn).variable("@{","}",pe.variableFn).variable("min(@",")",pe.minFn).variable("max(@",")",pe.maxFn).variable("sum(@",")",pe.sumFn).comment("[","]",(d,c)=>new i(c,d));const Hn=class Hn extends o{constructor(c,et){super(),this.original=c,this.parts=et}static parse(c){if(c instanceof Hn)return c;const et=[],_e=new RegExp(this.InlineRegex,"g");let tt,nt=0;for(;(tt=_e.exec(c))!==null;){let it=c.substring(nt,tt.index);it.length>0&&et.push(it.replaceAll("\\{","{").replaceAll("\\}","}")),et.push(pe.parse(tt[1])),nt=tt.index+tt[0].length}const rt=c.substring(nt).replaceAll("\\{","{").replaceAll("\\}","}");return rt.length>0&&et.push(rt),new Hn(c,et)}resolve(c){return n.of(this.parts.map(et=>{var _e;return et instanceof o?(_e=et.resolve(c))==null?void 0:_e.asText():et}).join(""))}asFormula(){return this.original}};cn(Hn,"InlineRegex",new RegExp("(?<!\\\\)\\{(.*?)}"));let Expression=Hn;class CharacterAtLevel extends l{constructor(c,et,_e=[],tt={},nt=[]){super(),this.level=c,this.character=et,this.features=_e,this.state=tt,this.choices=nt}selected(c,et){typeof c!="string"&&(c=c.path);const _e=this.character.selected(c)??"";return et===void 0?_e:array(_e)[et]}hasSelection(c){return this.selected(c)!==""}choice(c){return this.choices.find(et=>et.path===c)}choicesOfType(c){return this.choices.filter(et=>et.type===c)}modify(c){const et={...this.state};return c(et),new CharacterAtLevel(this.level,this.character,this.features,et,this.choices)}get(c){if(c.includes("{"))return Expression.parse(c);let et=this.state[c];return et===void 0?o.None:typeof et=="string"&&et.includes("{")?Expression.parse(et):et instanceof o?et:o.just(et)}has(c){return c in this.state}keys(){return Object.keys(this.state)}diff(c){var rt,it;const et={...this.state};for(const ot of c.keys()){const st=((rt=this.resolve(ot))==null?void 0:rt.asNumber())??0,at=((it=c.resolve(ot))==null?void 0:it.asNumber())??0;st-at>0||delete et[ot]}const _e=this.features.filter(ot=>et[ot.key]!==void 0),tt=new Set(c.choices.map(ot=>ot.path)),nt=this.choices.filter(ot=>!tt.has(ot.path));return new CharacterAtLevel(this.level,this.character,_e,et,nt)}without(c){const et={...this.state},_e=h.of(et),tt=_e.resolve(c),nt=(tt==null?void 0:tt.asNumber())??0;return nt===0||nt===1?_e.remove(c):_e.set(c,nt-1),new CharacterAtLevel(this.level,this.character,this.features,et,this.choices)}withoutChoice(c){return this.character.atLevel(this.level,c)}}class Path{static of(c){return c.toString().replace("#","_")}static combine(...c){return c.map(et=>et.toString()).reduce(Path.combineTwo)}static combineTwo(c,et){return c=Path.of(c),et=Path.of(et),c===""?et.toString():et==""?c.toString():c+":"+et}constructor(){}}const zn=class zn{constructor(c=[]){this.entries=c}add(c,et){return this.entries.push(new PrerequisiteValidationEntry(c,et)),this}isValid(){return this.entries.length==0?!0:this.entries.map(c=>c.valid).reduce((c,et)=>c&&et)}isEmpty(){return this.entries.length===0}};cn(zn,"Empty",new zn([]));let PrerequisiteValidation=zn;class PrerequisiteValidationEntry{constructor(c,et){this.description=c,this.valid=et}}var TreeNodeOperator=(d=>(d[d.ALL=0]="ALL",d[d.ANY=1]="ANY",d))(TreeNodeOperator||{});class FormattedValue extends n{constructor(c,et){super(),this.actual=c,this.formatted=et}asBoolean(){return this.actual.asBoolean()}asNumber(){return this.actual.asNumber()}asText(){return this.actual.asText()}asFormatted(){return this.formatted}equals(c){return!1}}class TreeNodeValue extends FormattedValue{constructor(c,et,_e){const tt=_e.map(ot=>ot instanceof FormattedValue?ot.asFormatted():ot.asText()).reverse(),nt=et===0?"; and ":", or ",rt=et===1?", ":"; ";let it=tt.length>1?tt.slice(0,-1).join(rt)+nt:"";it=it+tt[tt.length-1],super(c,it),this.operator=et,this.children=_e}mapChildren(c){return this.children.map(c)}equals(c){return!1}}function formatNumberOp(d,c,et,_e){const tt=d instanceof FormattedValue?d.asFormatted():d.asText(),nt=c instanceof FormattedValue?c.asFormatted():c.asText(),rt=et(d.asNumber(),c.asNumber()),it=_e(tt,nt);return new FormattedValue(n.of(rt),it)}function formatBooleanOp(d,c,et,_e){const tt=d instanceof FormattedValue?d.asFormatted():d.asText(),nt=c instanceof FormattedValue?c.asFormatted():(c==null?void 0:c.asText())??"",rt=et(d.asBoolean(),(c==null?void 0:c.asBoolean())??!1),it=_e(tt,nt);return new FormattedValue(n.of(rt),it)}function createTreeNode(d,...c){let et;switch(d){case 0:et=c.reduce((_e,tt)=>n.of(_e.asBoolean()&&tt.asBoolean()),n.of(!0));break;case 1:et=c.reduce((_e,tt)=>n.of(_e.asBoolean()||tt.asBoolean()),n.of(!1));break}return new TreeNodeValue(et,d,c)}class FormulaFormatter{constructor(c){cn(this,"Parser");this.lookup=c,this.Parser=ne.parser().operator("^",4,J.Right,2,(et,_e)=>n.of(Math.pow(et.asNumber(),_e.asNumber()))).operator("*",3,J.Left,2,(et,_e)=>n.of(et.asNumber()*_e.asNumber())).operator("/",3,J.Left,2,(et,_e)=>n.of(et.asNumber()/_e.asNumber())).operator("+",2,J.Left,2,(et,_e)=>n.of(et.asNumber()+_e.asNumber())).operator("-",2,J.Left,2,(et,_e)=>n.of(((et==null?void 0:et.asNumber())??0)-_e.asNumber())).operator("!",2,J.Left,1,et=>formatBooleanOp(et,void 0,_e=>!_e,_e=>`Do not already have ${_e}`)).operator("<",3,J.Left,2,(et,_e)=>formatNumberOp(et,_e,(tt,nt)=>tt>nt,(tt,nt)=>`${tt} less than ${nt}`)).operator("<=",3,J.Left,2,(et,_e)=>formatNumberOp(et,_e,(tt,nt)=>tt>=nt,(tt,nt)=>`${tt} is ${nt} or less`)).operator(">",3,J.Left,2,(et,_e)=>formatNumberOp(et,_e,(tt,nt)=>tt>nt,(tt,nt)=>`${tt} greater than ${nt}`)).operator(">=",3,J.Left,2,(et,_e)=>formatNumberOp(et,_e,(tt,nt)=>tt>=nt,(tt,nt)=>`${tt} ${nt}`)).operator("==",3,J.Left,2,(et,_e)=>formatNumberOp(et,_e,(tt,nt)=>tt===nt,(tt,nt)=>`${tt} is ${nt}`)).operator("!=",3,J.Left,2,(et,_e)=>formatNumberOp(et,_e,(tt,nt)=>tt!==nt,(tt,nt)=>`${tt} is not ${nt}`)).operator("AND",1,J.Left,2,(et,_e)=>createTreeNode(0,et,_e)).operator("OR",1,J.Left,2,(et,_e)=>createTreeNode(1,et,_e)).term("true",()=>n.of(!0)).term("false",()=>n.of(!1)).function("abs",1,et=>n.of(Math.abs(et.asNumber()))).function("min",2,(et,_e)=>n.of(Math.min(et.asNumber(),_e.asNumber()))).function("max",2,(et,_e)=>n.of(Math.max(et.asNumber(),_e.asNumber()))).function("floor",1,et=>n.of(Math.floor(et.asNumber()))).function("ceil",1,et=>n.of(Math.ceil(et.asNumber()))).function("signed",1,et=>n.of((et.asNumber()<0?"":"+")+et.asNumber())).function("if",3,(et,_e,tt)=>et.asBoolean()?_e:tt).function("concat",2,(et,_e)=>n.of(et.asText()+_e.asText())).varargsFunction("any",et=>createTreeNode(1,...et)).varargsFunction("all",et=>createTreeNode(0,...et)).variable("@","",(et,_e)=>{const tt=et.resolve(_e);return tt?new FormattedValue(tt,this.lookup(_e)):new FormattedValue(n.None,"???")}).variable("min(@",")",(et,_e)=>{const tt=FormulaFormatter.noneIfEmpty(et.search(_e)).reduce((nt,rt)=>nt.asNumber()<rt.asNumber()?nt:rt);return new FormattedValue(tt,"")}).variable("max(@",")",(et,_e)=>{const tt=FormulaFormatter.noneIfEmpty(et.search(_e)).reduce((nt,rt)=>nt.asNumber()>rt.asNumber()?nt:rt);return new FormattedValue(tt,"")}).variable("sum(@",")",(et,_e)=>{const tt=FormulaFormatter.noneIfEmpty(et.search(_e)).reduce((nt,rt)=>n.of(nt.asNumber()+rt.asNumber()));return new FormattedValue(tt,"")}).comment("[","]",(et,_e)=>new FormattedValue(_e,et))}format(c,et){if(c===void 0)return;const _e=c.asFormula();let tt=this.Parser.parse(_e).resolve(et);if(tt!==void 0)return tt instanceof TreeNodeValue?tt:new TreeNodeValue(tt,0,[tt])}static noneIfEmpty(c){return c.length>0?c:[n.None]}}class FeatureSummary{constructor(c,et,_e,tt,nt,rt){this.key=c,this.name=et,this.label=_e,this.tags=tt,this.enabledFormula=nt,this.maxStacks=rt}checkPrerequisites(c,et){var it;const _e=new PrerequisiteValidation;let tt=pe.parse(this.enabledFormula);(this.maxStacks!==null?(((it=c.resolve(this.key))==null?void 0:it.asNumber())??0)<this.maxStacks:!0)||_e.add("Must not already have this feature",!1);const rt=new FormulaFormatter(ot=>et.name(ot)).format(tt,c);return rt&&(rt.operator===TreeNodeOperator.ALL?rt.mapChildren(ot=>_e.add(this.resolvedValueText(ot),ot.asBoolean())):_e.add(rt.asFormatted(),rt.asBoolean())),_e}resolvedValueText(c){return c instanceof FormattedValue?c.asFormatted():c instanceof i?c.asName():c.asText()}isEnabled(c){var et;return((et=pe.parse(this.enabledFormula).resolve(c))==null?void 0:et.asBoolean())??!0}}class Feature extends FeatureSummary{constructor(et,_e,tt,nt,rt,it,ot,st){super(et,_e,tt,nt,rt,it);cn(this,"featureModifications");this.description=ot,this.traits=st}async resolve(et,_e){const tt=Path.combine(et,this.key),nt=await Promise.all(this.traits.map(rt=>rt.resolve(tt,_e)));return new ResolvedFeature(tt,this,nt)}}class ResolvedFeature{constructor(c,et,_e){this.path=c,this.origin=et,this.children=_e}applyTo(c){c.increment(this.origin.key),this.children.forEach(et=>et.applyTo(c))}}var ChoiceInputType=(d=>(d[d.Text=0]="Text",d[d.Select=1]="Select",d))(ChoiceInputType||{});class ResolvedChoice{}class MultiSelectChoice{constructor(c,et,_e,tt,nt,rt,it,ot){this.key=c,this.label=et,this.type=_e,this.optionTags=tt,this.featureIds=nt,this.categories=rt,this.sortBy=it,this.repeatingIndex=ot}async resolve(c,et){const _e=Path.combine(c,this.key);let tt=array(et.selection(_e)),nt=((tt==null?void 0:tt.length)??[])>0?(await Promise.all(tt.map(rt=>et.feature(rt)))).filter(rt=>rt!==void 0):[];return tt.forEach(rt=>et.register(rt)),new ResolvedMultiSelectChoice(_e,this.key,this.label,this.type,this.optionTags,this.featureIds,this.categories,this.sortBy,this.repeatingIndex,await Promise.all(nt.map(rt=>rt.resolve(c,et))))}}class BaseResolvedSelectChoice extends ResolvedChoice{constructor(){super(...arguments);cn(this,"inputType",1)}options(et,_e,tt){let nt=[...this.optionTags];return tt&&tt!==""&&(nt=nt.map(rt=>rt+"+"+tt)),[...et.query(nt),...this.featureIds.flatMap(rt=>{const it=et.feature(rt);return it!==void 0?[it]:[]})].filter(rt=>!_e||rt.name.toLowerCase().includes(_e.toLowerCase())).sort((rt,it)=>{switch(this.sortBy){case"name":return rt.name.localeCompare(it.name);default:return 0}})}}class ResolvedMultiSelectChoice extends BaseResolvedSelectChoice{constructor(et,_e,tt,nt,rt,it,ot,st,at,lt){super();cn(this,"inputType",1);this.path=et,this.key=_e,this.label=tt,this.type=nt,this.optionTags=rt,this.featureIds=it,this.categories=ot,this.sortBy=st,this.repeatingIndex=at,this.selected=lt}applyTo(et){if(et.withoutChoicePath!==this.path)return this.selected.forEach(_e=>_e.applyTo(et))}get children(){return this.selected}}class SelectChoice{constructor(c,et,_e,tt,nt,rt,it,ot){this.key=c,this.label=et,this.type=_e,this.optionTags=tt,this.featureIds=nt,this.categories=rt,this.sortBy=it,this.repeatingIndex=ot}async resolve(c,et){const _e=this.repeatingIndex===0?Path.combine(c,this.key):Path.combine(c,this.key,this.repeatingIndex);let tt=et.selection(_e),nt=tt!==void 0?await et.feature(tt):void 0;if(this.repeatingIndex>0&&nt===void 0){const it=Path.combine(c,this.key,this.repeatingIndex+1);et.swapSelections(_e,it),tt=et.selection(_e),nt=tt!==void 0?await et.feature(tt):void 0}et.register(tt);let rt;return this.repeatingIndex>0&&nt!==void 0&&(rt=await new SelectChoice(this.key,this.label,this.type,this.optionTags,this.featureIds,this.categories,this.sortBy,this.repeatingIndex+1).resolve(c,et)),new ResolvedSelectChoice(_e,this.key,this.label,this.type,this.optionTags,this.featureIds,this.categories,this.sortBy,this.repeatingIndex,await(nt==null?void 0:nt.resolve(c,et)),rt)}}class ResolvedSelectChoice extends BaseResolvedSelectChoice{constructor(et,_e,tt,nt,rt,it,ot,st,at,lt,ct){super();cn(this,"inputType",1);this.path=et,this.key=_e,this.label=tt,this.type=nt,this.optionTags=rt,this.featureIds=it,this.categories=ot,this.sortBy=st,this.repeatingIndex=at,this.selected=lt,this.repeatedChoice=ct}applyTo(et){var _e;if(et.withoutChoicePath!==this.path)return(_e=this.selected)==null?void 0:_e.applyTo(et)}get children(){return this.selected!==void 0?this.repeatedChoice!==void 0?[this.selected,this.repeatedChoice]:[this.selected]:[]}}class TextChoice{constructor(c,et,_e,tt){this.key=c,this.label=et,this.type=_e,this.repeatingIndex=tt}async resolve(c,et){const _e=Path.combine(c,this.key),tt=et.selection(_e);return new ResolvedTextChoice(_e,this.key,this.label,this.type,this.repeatingIndex,tt)}}class ResolvedTextChoice extends ResolvedChoice{constructor(et,_e,tt,nt,rt,it){super();cn(this,"inputType",0);cn(this,"children",[]);this.path=et,this.key=_e,this.label=tt,this.type=nt,this.repeatingIndex=rt,this.value=it}applyTo(et){this.value!==void 0&&et.set(this.path,this.value)}}class FeatureSelectCategory{constructor(c,et){this.label=c,this.tag=et}}class AppliedState{constructor(c=void 0){cn(this,"rawState");cn(this,"dataContext");cn(this,"stackModifications",[]);this.withoutChoicePath=c,this.rawState={},this.dataContext=h.of(this.rawState)}increment(c,et=1){const _e=this.getAsNumber(c);this.set(c,_e+et)}set(c,et){this.dataContext.set(c,et),this.modifications(c,this.getAsNumber(c)).forEach(_e=>_e.applyModification(this))}getAsNumber(c){var et;return((et=this.dataContext.resolve(c))==null?void 0:et.asNumber())??0}registerModification(c){this.stackModifications.push(c),this.getAsNumber(c.targetFeatureId)>=c.targetStackCount&&c.applyModification(this)}modifications(c,et){return this.stackModifications.filter(_e=>_e.targetFeatureId===c&&_e.targetStackCount===et)}}class Character{constructor(c,et,_e,tt,nt=void 0){cn(this,"resolvedTemplate");this.id=c,this.template=et,this.database=_e,this.selections=tt,this.resolvedTemplate=nt}get name(){return this.selected("character_name")??""}static create(c,et,_e){return new Character(c,et,_e,{},void 0)}atLevel(c,et=void 0){var st;const _e=new AppliedState(et),tt=(st=this.resolvedTemplate)==null?void 0:st.atLevel(c);tt==null||tt.applyTo(_e);const nt={},rt=[];tt==null||tt.traverse(at=>{if(at instanceof ResolvedFeature){const lt=at.origin;if(_e.getAsNumber(lt.key)<=0)return!1;nt[lt.key]=lt}return!(at instanceof ResolvedChoice&&(rt.push(at),at.path===et))});const it=Object.values(nt);return new CharacterAtLevel(c,this,it,_e.rawState,rt)}pack(){return{id:this.id,selections:this.selections}}selected(c){return this.selections[c]}async select(c,et){return this.selectAll({[c]:et})}async selectAll(c){const et={...this.selections,...c},_e=await timedAsync(()=>this.template.resolve(this.database,et),"Resolving Character");return new Character(this.id,this.template,this.database,et,_e)}}class CharacterSummary{constructor(c,et){this.id=c,this.name=et}}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let d=0;d<256;++d)byteToHex.push((d+256).toString(16).slice(1));function unsafeStringify(d,c=0){return byteToHex[d[c+0]]+byteToHex[d[c+1]]+byteToHex[d[c+2]]+byteToHex[d[c+3]]+"-"+byteToHex[d[c+4]]+byteToHex[d[c+5]]+"-"+byteToHex[d[c+6]]+byteToHex[d[c+7]]+"-"+byteToHex[d[c+8]]+byteToHex[d[c+9]]+"-"+byteToHex[d[c+10]]+byteToHex[d[c+11]]+byteToHex[d[c+12]]+byteToHex[d[c+13]]+byteToHex[d[c+14]]+byteToHex[d[c+15]]}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(d,c,et){if(native.randomUUID&&!c&&!d)return native.randomUUID();d=d||{};const _e=d.random||(d.rng||rng)();if(_e[6]=_e[6]&15|64,_e[8]=_e[8]&63|128,c){et=et||0;for(let tt=0;tt<16;++tt)c[et+tt]=_e[tt];return c}return unsafeStringify(_e)}class CharacterStore{constructor(c,et){this.template=c,this.database=et}async list(){const c=await this.loadAllPacked();return await Promise.all(c.map(et=>new CharacterSummary(et.id,et.selections.character_name)))}async load(c){const et=await this.loadPacked(c);if(et)return await this.unpack(et)}async save(c){const et=c.pack();return this.savePacked(et)}async create(c){const et=v4();let _e=Character.create(et,this.template,this.database);return _e=await _e.selectAll(c),await this.save(_e),_e}async delete(c){await this.deletePacked(c)}async unpack(c){return await Character.create(c.id,this.template,this.database).selectAll(c.selections)}}class FirebaseCharacterStore extends CharacterStore{constructor(c,et){super(c,et)}async loadPacked(c){const et=getActiveUser();if(!et){console.warn("Unable to access Firebase: no user logged in");return}const _e=await timedAsync(()=>FirebaseRepository.load(et.id,"character",c),"Loading from Firebase");if(!_e){console.warn("No character found for: "+c);return}return{id:_e.id,selections:_e.selections??_e.choices}}async loadAllPacked(){const c=getActiveUser();return c?(await FirebaseRepository.loadAll(c.id,"character")??[]).map(_e=>({id:_e.id,selections:_e.selections??_e.choices})):(console.warn("Unable to access Firebase: no user logged in"),[])}async savePacked(c){const et=getActiveUser();if(!et){console.warn("Unable to access Firebase: no user logged in");return}await FirebaseRepository.save(et.id,"character",c.id,c)}async deletePacked(c){const et=getActiveUser();if(!et){console.warn("Unable to access Firebase: no user logged in");return}await FirebaseRepository.delete(et.id,"character",c)}}var src={exports:{}},indexLight={exports:{}},indexMinimal={},minimal$1={},aspromise=asPromise$1;function asPromise$1(d,c){for(var et=new Array(arguments.length-1),_e=0,tt=2,nt=!0;tt<arguments.length;)et[_e++]=arguments[tt++];return new Promise(function(it,ot){et[_e]=function(at){if(nt)if(nt=!1,at)ot(at);else{for(var lt=new Array(arguments.length-1),ct=0;ct<lt.length;)lt[ct++]=arguments[ct];it.apply(null,lt)}};try{d.apply(c||null,et)}catch(st){nt&&(nt=!1,ot(st))}})}var base64$1={};(function(d){var c=d;c.length=function(it){var ot=it.length;if(!ot)return 0;for(var st=0;--ot%4>1&&it.charAt(ot)==="=";)++st;return Math.ceil(it.length*3)/4-st};for(var et=new Array(64),_e=new Array(123),tt=0;tt<64;)_e[et[tt]=tt<26?tt+65:tt<52?tt+71:tt<62?tt-4:tt-59|43]=tt++;c.encode=function(it,ot,st){for(var at=null,lt=[],ct=0,ut=0,dt;ot<st;){var ht=it[ot++];switch(ut){case 0:lt[ct++]=et[ht>>2],dt=(ht&3)<<4,ut=1;break;case 1:lt[ct++]=et[dt|ht>>4],dt=(ht&15)<<2,ut=2;break;case 2:lt[ct++]=et[dt|ht>>6],lt[ct++]=et[ht&63],ut=0;break}ct>8191&&((at||(at=[])).push(String.fromCharCode.apply(String,lt)),ct=0)}return ut&&(lt[ct++]=et[dt],lt[ct++]=61,ut===1&&(lt[ct++]=61)),at?(ct&&at.push(String.fromCharCode.apply(String,lt.slice(0,ct))),at.join("")):String.fromCharCode.apply(String,lt.slice(0,ct))};var nt="invalid encoding";c.decode=function(it,ot,st){for(var at=st,lt=0,ct,ut=0;ut<it.length;){var dt=it.charCodeAt(ut++);if(dt===61&&lt>1)break;if((dt=_e[dt])===void 0)throw Error(nt);switch(lt){case 0:ct=dt,lt=1;break;case 1:ot[st++]=ct<<2|(dt&48)>>4,ct=dt,lt=2;break;case 2:ot[st++]=(ct&15)<<4|(dt&60)>>2,ct=dt,lt=3;break;case 3:ot[st++]=(ct&3)<<6|dt,lt=0;break}}if(lt===1)throw Error(nt);return st-at},c.test=function(it){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(it)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(c,et,_e){return(this._listeners[c]||(this._listeners[c]=[])).push({fn:et,ctx:_e||this}),this};EventEmitter.prototype.off=function(c,et){if(c===void 0)this._listeners={};else if(et===void 0)this._listeners[c]=[];else for(var _e=this._listeners[c],tt=0;tt<_e.length;)_e[tt].fn===et?_e.splice(tt,1):++tt;return this};EventEmitter.prototype.emit=function(c){var et=this._listeners[c];if(et){for(var _e=[],tt=1;tt<arguments.length;)_e.push(arguments[tt++]);for(tt=0;tt<et.length;)et[tt].fn.apply(et[tt++].ctx,_e)}return this};var float=factory(factory);function factory(d){return typeof Float32Array<"u"?function(){var c=new Float32Array([-0]),et=new Uint8Array(c.buffer),_e=et[3]===128;function tt(ot,st,at){c[0]=ot,st[at]=et[0],st[at+1]=et[1],st[at+2]=et[2],st[at+3]=et[3]}function nt(ot,st,at){c[0]=ot,st[at]=et[3],st[at+1]=et[2],st[at+2]=et[1],st[at+3]=et[0]}d.writeFloatLE=_e?tt:nt,d.writeFloatBE=_e?nt:tt;function rt(ot,st){return et[0]=ot[st],et[1]=ot[st+1],et[2]=ot[st+2],et[3]=ot[st+3],c[0]}function it(ot,st){return et[3]=ot[st],et[2]=ot[st+1],et[1]=ot[st+2],et[0]=ot[st+3],c[0]}d.readFloatLE=_e?rt:it,d.readFloatBE=_e?it:rt}():function(){function c(_e,tt,nt,rt){var it=tt<0?1:0;if(it&&(tt=-tt),tt===0)_e(1/tt>0?0:2147483648,nt,rt);else if(isNaN(tt))_e(2143289344,nt,rt);else if(tt>34028234663852886e22)_e((it<<31|2139095040)>>>0,nt,rt);else if(tt<11754943508222875e-54)_e((it<<31|Math.round(tt/1401298464324817e-60))>>>0,nt,rt);else{var ot=Math.floor(Math.log(tt)/Math.LN2),st=Math.round(tt*Math.pow(2,-ot)*8388608)&8388607;_e((it<<31|ot+127<<23|st)>>>0,nt,rt)}}d.writeFloatLE=c.bind(null,writeUintLE),d.writeFloatBE=c.bind(null,writeUintBE);function et(_e,tt,nt){var rt=_e(tt,nt),it=(rt>>31)*2+1,ot=rt>>>23&255,st=rt&8388607;return ot===255?st?NaN:it*(1/0):ot===0?it*1401298464324817e-60*st:it*Math.pow(2,ot-150)*(st+8388608)}d.readFloatLE=et.bind(null,readUintLE),d.readFloatBE=et.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var c=new Float64Array([-0]),et=new Uint8Array(c.buffer),_e=et[7]===128;function tt(ot,st,at){c[0]=ot,st[at]=et[0],st[at+1]=et[1],st[at+2]=et[2],st[at+3]=et[3],st[at+4]=et[4],st[at+5]=et[5],st[at+6]=et[6],st[at+7]=et[7]}function nt(ot,st,at){c[0]=ot,st[at]=et[7],st[at+1]=et[6],st[at+2]=et[5],st[at+3]=et[4],st[at+4]=et[3],st[at+5]=et[2],st[at+6]=et[1],st[at+7]=et[0]}d.writeDoubleLE=_e?tt:nt,d.writeDoubleBE=_e?nt:tt;function rt(ot,st){return et[0]=ot[st],et[1]=ot[st+1],et[2]=ot[st+2],et[3]=ot[st+3],et[4]=ot[st+4],et[5]=ot[st+5],et[6]=ot[st+6],et[7]=ot[st+7],c[0]}function it(ot,st){return et[7]=ot[st],et[6]=ot[st+1],et[5]=ot[st+2],et[4]=ot[st+3],et[3]=ot[st+4],et[2]=ot[st+5],et[1]=ot[st+6],et[0]=ot[st+7],c[0]}d.readDoubleLE=_e?rt:it,d.readDoubleBE=_e?it:rt}():function(){function c(_e,tt,nt,rt,it,ot){var st=rt<0?1:0;if(st&&(rt=-rt),rt===0)_e(0,it,ot+tt),_e(1/rt>0?0:2147483648,it,ot+nt);else if(isNaN(rt))_e(0,it,ot+tt),_e(2146959360,it,ot+nt);else if(rt>17976931348623157e292)_e(0,it,ot+tt),_e((st<<31|2146435072)>>>0,it,ot+nt);else{var at;if(rt<22250738585072014e-324)at=rt/5e-324,_e(at>>>0,it,ot+tt),_e((st<<31|at/4294967296)>>>0,it,ot+nt);else{var lt=Math.floor(Math.log(rt)/Math.LN2);lt===1024&&(lt=1023),at=rt*Math.pow(2,-lt),_e(at*4503599627370496>>>0,it,ot+tt),_e((st<<31|lt+1023<<20|at*1048576&1048575)>>>0,it,ot+nt)}}}d.writeDoubleLE=c.bind(null,writeUintLE,0,4),d.writeDoubleBE=c.bind(null,writeUintBE,4,0);function et(_e,tt,nt,rt,it){var ot=_e(rt,it+tt),st=_e(rt,it+nt),at=(st>>31)*2+1,lt=st>>>20&2047,ct=4294967296*(st&1048575)+ot;return lt===2047?ct?NaN:at*(1/0):lt===0?at*5e-324*ct:at*Math.pow(2,lt-1075)*(ct+4503599627370496)}d.readDoubleLE=et.bind(null,readUintLE,0,4),d.readDoubleBE=et.bind(null,readUintBE,4,0)}(),d}function writeUintLE(d,c,et){c[et]=d&255,c[et+1]=d>>>8&255,c[et+2]=d>>>16&255,c[et+3]=d>>>24}function writeUintBE(d,c,et){c[et]=d>>>24,c[et+1]=d>>>16&255,c[et+2]=d>>>8&255,c[et+3]=d&255}function readUintLE(d,c){return(d[c]|d[c+1]<<8|d[c+2]<<16|d[c+3]<<24)>>>0}function readUintBE(d,c){return(d[c]<<24|d[c+1]<<16|d[c+2]<<8|d[c+3])>>>0}var inquire_1=inquire$1;function inquire$1(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(d){}return null}var utf8$2={};(function(d){var c=d;c.length=function(_e){for(var tt=0,nt=0,rt=0;rt<_e.length;++rt)nt=_e.charCodeAt(rt),nt<128?tt+=1:nt<2048?tt+=2:(nt&64512)===55296&&(_e.charCodeAt(rt+1)&64512)===56320?(++rt,tt+=4):tt+=3;return tt},c.read=function(_e,tt,nt){var rt=nt-tt;if(rt<1)return"";for(var it=null,ot=[],st=0,at;tt<nt;)at=_e[tt++],at<128?ot[st++]=at:at>191&&at<224?ot[st++]=(at&31)<<6|_e[tt++]&63:at>239&&at<365?(at=((at&7)<<18|(_e[tt++]&63)<<12|(_e[tt++]&63)<<6|_e[tt++]&63)-65536,ot[st++]=55296+(at>>10),ot[st++]=56320+(at&1023)):ot[st++]=(at&15)<<12|(_e[tt++]&63)<<6|_e[tt++]&63,st>8191&&((it||(it=[])).push(String.fromCharCode.apply(String,ot)),st=0);return it?(st&&it.push(String.fromCharCode.apply(String,ot.slice(0,st))),it.join("")):String.fromCharCode.apply(String,ot.slice(0,st))},c.write=function(_e,tt,nt){for(var rt=nt,it,ot,st=0;st<_e.length;++st)it=_e.charCodeAt(st),it<128?tt[nt++]=it:it<2048?(tt[nt++]=it>>6|192,tt[nt++]=it&63|128):(it&64512)===55296&&((ot=_e.charCodeAt(st+1))&64512)===56320?(it=65536+((it&1023)<<10)+(ot&1023),++st,tt[nt++]=it>>18|240,tt[nt++]=it>>12&63|128,tt[nt++]=it>>6&63|128,tt[nt++]=it&63|128):(tt[nt++]=it>>12|224,tt[nt++]=it>>6&63|128,tt[nt++]=it&63|128);return nt-rt}})(utf8$2);var pool_1=pool;function pool(d,c,et){var _e=et||8192,tt=_e>>>1,nt=null,rt=_e;return function(ot){if(ot<1||ot>tt)return d(ot);rt+ot>_e&&(nt=d(_e),rt=0);var st=c.call(nt,rt,rt+=ot);return rt&7&&(rt=(rt|7)+1),st}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=c;var d=requireMinimal();function c(nt,rt){this.lo=nt>>>0,this.hi=rt>>>0}var et=c.zero=new c(0,0);et.toNumber=function(){return 0},et.zzEncode=et.zzDecode=function(){return this},et.length=function(){return 1};var _e=c.zeroHash="\0\0\0\0\0\0\0\0";c.fromNumber=function(rt){if(rt===0)return et;var it=rt<0;it&&(rt=-rt);var ot=rt>>>0,st=(rt-ot)/4294967296>>>0;return it&&(st=~st>>>0,ot=~ot>>>0,++ot>4294967295&&(ot=0,++st>4294967295&&(st=0))),new c(ot,st)},c.from=function(rt){if(typeof rt=="number")return c.fromNumber(rt);if(d.isString(rt))if(d.Long)rt=d.Long.fromString(rt);else return c.fromNumber(parseInt(rt,10));return rt.low||rt.high?new c(rt.low>>>0,rt.high>>>0):et},c.prototype.toNumber=function(rt){if(!rt&&this.hi>>>31){var it=~this.lo+1>>>0,ot=~this.hi>>>0;return it||(ot=ot+1>>>0),-(it+ot*4294967296)}return this.lo+this.hi*4294967296},c.prototype.toLong=function(rt){return d.Long?new d.Long(this.lo|0,this.hi|0,!!rt):{low:this.lo|0,high:this.hi|0,unsigned:!!rt}};var tt=String.prototype.charCodeAt;return c.fromHash=function(rt){return rt===_e?et:new c((tt.call(rt,0)|tt.call(rt,1)<<8|tt.call(rt,2)<<16|tt.call(rt,3)<<24)>>>0,(tt.call(rt,4)|tt.call(rt,5)<<8|tt.call(rt,6)<<16|tt.call(rt,7)<<24)>>>0)},c.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},c.prototype.zzEncode=function(){var rt=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^rt)>>>0,this.lo=(this.lo<<1^rt)>>>0,this},c.prototype.zzDecode=function(){var rt=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^rt)>>>0,this.hi=(this.hi>>>1^rt)>>>0,this},c.prototype.length=function(){var rt=this.lo,it=(this.lo>>>28|this.hi<<4)>>>0,ot=this.hi>>>24;return ot===0?it===0?rt<16384?rt<128?1:2:rt<2097152?3:4:it<16384?it<128?5:6:it<2097152?7:8:ot<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(d){var c=d;c.asPromise=aspromise,c.base64=base64$1,c.EventEmitter=eventemitter,c.float=float,c.inquire=inquire_1,c.utf8=utf8$2,c.pool=pool_1,c.LongBits=requireLongbits(),c.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),c.global=c.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,c.emptyArray=Object.freeze?Object.freeze([]):[],c.emptyObject=Object.freeze?Object.freeze({}):{},c.isInteger=Number.isInteger||function(nt){return typeof nt=="number"&&isFinite(nt)&&Math.floor(nt)===nt},c.isString=function(nt){return typeof nt=="string"||nt instanceof String},c.isObject=function(nt){return nt&&typeof nt=="object"},c.isset=c.isSet=function(nt,rt){var it=nt[rt];return it!=null&&nt.hasOwnProperty(rt)?typeof it!="object"||(Array.isArray(it)?it.length:Object.keys(it).length)>0:!1},c.Buffer=function(){try{var tt=c.inquire("buffer").Buffer;return tt.prototype.utf8Write?tt:null}catch{return null}}(),c._Buffer_from=null,c._Buffer_allocUnsafe=null,c.newBuffer=function(nt){return typeof nt=="number"?c.Buffer?c._Buffer_allocUnsafe(nt):new c.Array(nt):c.Buffer?c._Buffer_from(nt):typeof Uint8Array>"u"?nt:new Uint8Array(nt)},c.Array=typeof Uint8Array<"u"?Uint8Array:Array,c.Long=c.global.dcodeIO&&c.global.dcodeIO.Long||c.global.Long||c.inquire("long"),c.key2Re=/^true|false|0|1$/,c.key32Re=/^-?(?:0|[1-9][0-9]*)$/,c.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,c.longToHash=function(nt){return nt?c.LongBits.from(nt).toHash():c.LongBits.zeroHash},c.longFromHash=function(nt,rt){var it=c.LongBits.fromHash(nt);return c.Long?c.Long.fromBits(it.lo,it.hi,rt):it.toNumber(!!rt)};function et(tt,nt,rt){for(var it=Object.keys(nt),ot=0;ot<it.length;++ot)(tt[it[ot]]===void 0||!rt)&&(tt[it[ot]]=nt[it[ot]]);return tt}c.merge=et,c.lcFirst=function(nt){return nt.charAt(0).toLowerCase()+nt.substring(1)};function _e(tt){function nt(rt,it){if(!(this instanceof nt))return new nt(rt,it);Object.defineProperty(this,"message",{get:function(){return rt}}),Error.captureStackTrace?Error.captureStackTrace(this,nt):Object.defineProperty(this,"stack",{value:new Error().stack||""}),it&&et(this,it)}return nt.prototype=Object.create(Error.prototype,{constructor:{value:nt,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return tt},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),nt}c.newError=_e,c.ProtocolError=_e("ProtocolError"),c.oneOfGetter=function(nt){for(var rt={},it=0;it<nt.length;++it)rt[nt[it]]=1;return function(){for(var ot=Object.keys(this),st=ot.length-1;st>-1;--st)if(rt[ot[st]]===1&&this[ot[st]]!==void 0&&this[ot[st]]!==null)return ot[st]}},c.oneOfSetter=function(nt){return function(rt){for(var it=0;it<nt.length;++it)nt[it]!==rt&&delete this[nt[it]]}},c.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},c._configure=function(){var tt=c.Buffer;if(!tt){c._Buffer_from=c._Buffer_allocUnsafe=null;return}c._Buffer_from=tt.from!==Uint8Array.from&&tt.from||function(rt,it){return new tt(rt,it)},c._Buffer_allocUnsafe=tt.allocUnsafe||function(rt){return new tt(rt)}}}(minimal$1)),minimal$1}var writer=Writer$1,util$7=requireMinimal(),BufferWriter$1,LongBits$1=util$7.LongBits,base64=util$7.base64,utf8$1=util$7.utf8;function Op(d,c,et){this.fn=d,this.len=c,this.next=void 0,this.val=et}function noop$1(){}function State(d){this.head=d.head,this.tail=d.tail,this.len=d.len,this.next=d.states}function Writer$1(){this.len=0,this.head=new Op(noop$1,0,0),this.tail=this.head,this.states=null}var create$1=function d(){return util$7.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function d(c){return new util$7.Array(c)};util$7.Array!==Array&&(Writer$1.alloc=util$7.pool(Writer$1.alloc,util$7.Array.prototype.subarray));Writer$1.prototype._push=function d(c,et,_e){return this.tail=this.tail.next=new Op(c,et,_e),this.len+=et,this};function writeByte(d,c,et){c[et]=d&255}function writeVarint32(d,c,et){for(;d>127;)c[et++]=d&127|128,d>>>=7;c[et]=d}function VarintOp(d,c){this.len=d,this.next=void 0,this.val=c}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function d(c){return this.len+=(this.tail=this.tail.next=new VarintOp((c=c>>>0)<128?1:c<16384?2:c<2097152?3:c<268435456?4:5,c)).len,this};Writer$1.prototype.int32=function d(c){return c<0?this._push(writeVarint64,10,LongBits$1.fromNumber(c)):this.uint32(c)};Writer$1.prototype.sint32=function d(c){return this.uint32((c<<1^c>>31)>>>0)};function writeVarint64(d,c,et){for(;d.hi;)c[et++]=d.lo&127|128,d.lo=(d.lo>>>7|d.hi<<25)>>>0,d.hi>>>=7;for(;d.lo>127;)c[et++]=d.lo&127|128,d.lo=d.lo>>>7;c[et++]=d.lo}Writer$1.prototype.uint64=function d(c){var et=LongBits$1.from(c);return this._push(writeVarint64,et.length(),et)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function d(c){var et=LongBits$1.from(c).zzEncode();return this._push(writeVarint64,et.length(),et)};Writer$1.prototype.bool=function d(c){return this._push(writeByte,1,c?1:0)};function writeFixed32(d,c,et){c[et]=d&255,c[et+1]=d>>>8&255,c[et+2]=d>>>16&255,c[et+3]=d>>>24}Writer$1.prototype.fixed32=function d(c){return this._push(writeFixed32,4,c>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function d(c){var et=LongBits$1.from(c);return this._push(writeFixed32,4,et.lo)._push(writeFixed32,4,et.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function d(c){return this._push(util$7.float.writeFloatLE,4,c)};Writer$1.prototype.double=function d(c){return this._push(util$7.float.writeDoubleLE,8,c)};var writeBytes=util$7.Array.prototype.set?function d(c,et,_e){et.set(c,_e)}:function d(c,et,_e){for(var tt=0;tt<c.length;++tt)et[_e+tt]=c[tt]};Writer$1.prototype.bytes=function d(c){var et=c.length>>>0;if(!et)return this._push(writeByte,1,0);if(util$7.isString(c)){var _e=Writer$1.alloc(et=base64.length(c));base64.decode(c,_e,0),c=_e}return this.uint32(et)._push(writeBytes,et,c)};Writer$1.prototype.string=function d(c){var et=utf8$1.length(c);return et?this.uint32(et)._push(utf8$1.write,et,c):this._push(writeByte,1,0)};Writer$1.prototype.fork=function d(){return this.states=new State(this),this.head=this.tail=new Op(noop$1,0,0),this.len=0,this};Writer$1.prototype.reset=function d(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$1,0,0),this.len=0),this};Writer$1.prototype.ldelim=function d(){var c=this.head,et=this.tail,_e=this.len;return this.reset().uint32(_e),_e&&(this.tail.next=c.next,this.tail=et,this.len+=_e),this};Writer$1.prototype.finish=function d(){for(var c=this.head.next,et=this.constructor.alloc(this.len),_e=0;c;)c.fn(c.val,et,_e),_e+=c.len,c=c.next;return et};Writer$1._configure=function(d){BufferWriter$1=d,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$6=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$6._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$6.Buffer&&util$6.Buffer.prototype instanceof Uint8Array&&util$6.Buffer.prototype.set.name==="set"?function(c,et,_e){et.set(c,_e)}:function(c,et,_e){if(c.copy)c.copy(et,_e,0,c.length);else for(var tt=0;tt<c.length;)et[_e++]=c[tt++]}};BufferWriter.prototype.bytes=function d(c){util$6.isString(c)&&(c=util$6._Buffer_from(c,"base64"));var et=c.length>>>0;return this.uint32(et),et&&this._push(BufferWriter.writeBytesBuffer,et,c),this};function writeStringBuffer(d,c,et){d.length<40?util$6.utf8.write(d,c,et):c.utf8Write?c.utf8Write(d,et):c.write(d,et)}BufferWriter.prototype.string=function d(c){var et=util$6.Buffer.byteLength(c);return this.uint32(et),et&&this._push(writeStringBuffer,et,c),this};BufferWriter._configure();var reader=Reader$1,util$5=requireMinimal(),BufferReader$1,LongBits=util$5.LongBits,utf8=util$5.utf8;function indexOutOfRange(d,c){return RangeError("index out of range: "+d.pos+" + "+(c||1)+" > "+d.len)}function Reader$1(d){this.buf=d,this.pos=0,this.len=d.length}var create_array=typeof Uint8Array<"u"?function d(c){if(c instanceof Uint8Array||Array.isArray(c))return new Reader$1(c);throw Error("illegal buffer")}:function d(c){if(Array.isArray(c))return new Reader$1(c);throw Error("illegal buffer")},create=function d(){return util$5.Buffer?function(et){return(Reader$1.create=function(tt){return util$5.Buffer.isBuffer(tt)?new BufferReader$1(tt):create_array(tt)})(et)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$5.Array.prototype.subarray||util$5.Array.prototype.slice;Reader$1.prototype.uint32=function d(){var c=4294967295;return function(){if(c=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(c=(c|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(c=(c|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(c=(c|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(c=(c|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return c;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return c}}();Reader$1.prototype.int32=function d(){return this.uint32()|0};Reader$1.prototype.sint32=function d(){var c=this.uint32();return c>>>1^-(c&1)|0};function readLongVarint(){var d=new LongBits(0,0),c=0;if(this.len-this.pos>4){for(;c<4;++c)if(d.lo=(d.lo|(this.buf[this.pos]&127)<<c*7)>>>0,this.buf[this.pos++]<128)return d;if(d.lo=(d.lo|(this.buf[this.pos]&127)<<28)>>>0,d.hi=(d.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return d;c=0}else{for(;c<3;++c){if(this.pos>=this.len)throw indexOutOfRange(this);if(d.lo=(d.lo|(this.buf[this.pos]&127)<<c*7)>>>0,this.buf[this.pos++]<128)return d}return d.lo=(d.lo|(this.buf[this.pos++]&127)<<c*7)>>>0,d}if(this.len-this.pos>4){for(;c<5;++c)if(d.hi=(d.hi|(this.buf[this.pos]&127)<<c*7+3)>>>0,this.buf[this.pos++]<128)return d}else for(;c<5;++c){if(this.pos>=this.len)throw indexOutOfRange(this);if(d.hi=(d.hi|(this.buf[this.pos]&127)<<c*7+3)>>>0,this.buf[this.pos++]<128)return d}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function d(){return this.uint32()!==0};function readFixed32_end(d,c){return(d[c-4]|d[c-3]<<8|d[c-2]<<16|d[c-1]<<24)>>>0}Reader$1.prototype.fixed32=function d(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function d(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function d(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var c=util$5.float.readFloatLE(this.buf,this.pos);return this.pos+=4,c};Reader$1.prototype.double=function d(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var c=util$5.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,c};Reader$1.prototype.bytes=function d(){var c=this.uint32(),et=this.pos,_e=this.pos+c;if(_e>this.len)throw indexOutOfRange(this,c);return this.pos+=c,Array.isArray(this.buf)?this.buf.slice(et,_e):et===_e?new this.buf.constructor(0):this._slice.call(this.buf,et,_e)};Reader$1.prototype.string=function d(){var c=this.bytes();return utf8.read(c,0,c.length)};Reader$1.prototype.skip=function d(c){if(typeof c=="number"){if(this.pos+c>this.len)throw indexOutOfRange(this,c);this.pos+=c}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(d){switch(d){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(d=this.uint32()&7)!==4;)this.skipType(d);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+d+" at offset "+this.pos)}return this};Reader$1._configure=function(d){BufferReader$1=d,Reader$1.create=create(),BufferReader$1._configure();var c=util$5.Long?"toLong":"toNumber";util$5.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[c](!1)},uint64:function(){return readLongVarint.call(this)[c](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[c](!1)},fixed64:function(){return readFixed64.call(this)[c](!0)},sfixed64:function(){return readFixed64.call(this)[c](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$4=requireMinimal();function BufferReader(d){Reader.call(this,d)}BufferReader._configure=function(){util$4.Buffer&&(BufferReader.prototype._slice=util$4.Buffer.prototype.slice)};BufferReader.prototype.string=function d(){var c=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+c,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+c,this.len))};BufferReader._configure();var rpc={},service$1=Service$1,util$3=requireMinimal();(Service$1.prototype=Object.create(util$3.EventEmitter.prototype)).constructor=Service$1;function Service$1(d,c,et){if(typeof d!="function")throw TypeError("rpcImpl must be a function");util$3.EventEmitter.call(this),this.rpcImpl=d,this.requestDelimited=!!c,this.responseDelimited=!!et}Service$1.prototype.rpcCall=function d(c,et,_e,tt,nt){if(!tt)throw TypeError("request must be specified");var rt=this;if(!nt)return util$3.asPromise(d,rt,c,et,_e,tt);if(!rt.rpcImpl){setTimeout(function(){nt(Error("already ended"))},0);return}try{return rt.rpcImpl(c,et[rt.requestDelimited?"encodeDelimited":"encode"](tt).finish(),function(ot,st){if(ot)return rt.emit("error",ot,c),nt(ot);if(st===null){rt.end(!0);return}if(!(st instanceof _e))try{st=_e[rt.responseDelimited?"decodeDelimited":"decode"](st)}catch(at){return rt.emit("error",at,c),nt(at)}return rt.emit("data",st,c),nt(null,st)})}catch(it){rt.emit("error",it,c),setTimeout(function(){nt(it)},0);return}};Service$1.prototype.end=function d(c){return this.rpcImpl&&(c||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(d){var c=d;c.Service=service$1})(rpc);var roots={};(function(d){var c=d;c.build="minimal",c.Writer=writer,c.BufferWriter=writer_buffer,c.Reader=reader,c.BufferReader=reader_buffer,c.util=requireMinimal(),c.rpc=rpc,c.roots=roots,c.configure=et;function et(){c.util._configure(),c.Writer._configure(c.BufferWriter),c.Reader._configure(c.BufferReader)}et()})(indexMinimal);var util$2={exports:{}},codegen_1=codegen;function codegen(d,c){typeof d=="string"&&(c=d,d=void 0);var et=[];function _e(nt){if(typeof nt!="string"){var rt=tt();if(codegen.verbose&&console.log("codegen: "+rt),rt="return "+rt,nt){for(var it=Object.keys(nt),ot=new Array(it.length+1),st=new Array(it.length),at=0;at<it.length;)ot[at]=it[at],st[at]=nt[it[at++]];return ot[at]=rt,Function.apply(null,ot).apply(null,st)}return Function(rt)()}for(var lt=new Array(arguments.length-1),ct=0;ct<lt.length;)lt[ct]=arguments[++ct];if(ct=0,nt=nt.replace(/%([%dfijs])/g,function(dt,ht){var yt=lt[ct++];switch(ht){case"d":case"f":return String(Number(yt));case"i":return String(Math.floor(yt));case"j":return JSON.stringify(yt);case"s":return String(yt)}return"%"}),ct!==lt.length)throw Error("parameter count mismatch");return et.push(nt),_e}function tt(nt){return"function "+(nt||c||"")+"("+(d&&d.join(",")||"")+`){
  `+et.join(`
  `)+`
}`}return _e.toString=tt,_e}codegen.verbose=!1;var fetch_1=fetch$1,asPromise=aspromise,inquire=inquire_1,fs=inquire("fs");function fetch$1(d,c,et){return typeof c=="function"?(et=c,c={}):c||(c={}),et?!c.xhr&&fs&&fs.readFile?fs.readFile(d,function(tt,nt){return tt&&typeof XMLHttpRequest<"u"?fetch$1.xhr(d,c,et):tt?et(tt):et(null,c.binary?nt:nt.toString("utf8"))}):fetch$1.xhr(d,c,et):asPromise(fetch$1,this,d,c)}fetch$1.xhr=function d(c,et,_e){var tt=new XMLHttpRequest;tt.onreadystatechange=function(){if(tt.readyState===4){if(tt.status!==0&&tt.status!==200)return _e(Error("status "+tt.status));if(et.binary){var rt=tt.response;if(!rt){rt=[];for(var it=0;it<tt.responseText.length;++it)rt.push(tt.responseText.charCodeAt(it)&255)}return _e(null,typeof Uint8Array<"u"?new Uint8Array(rt):rt)}return _e(null,tt.responseText)}},et.binary&&("overrideMimeType"in tt&&tt.overrideMimeType("text/plain; charset=x-user-defined"),tt.responseType="arraybuffer"),tt.open("GET",c),tt.send()};var path={};(function(d){var c=d,et=c.isAbsolute=function(nt){return/^(?:\/|\w+:)/.test(nt)},_e=c.normalize=function(nt){nt=nt.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var rt=nt.split("/"),it=et(nt),ot="";it&&(ot=rt.shift()+"/");for(var st=0;st<rt.length;)rt[st]===".."?st>0&&rt[st-1]!==".."?rt.splice(--st,2):it?rt.splice(st,1):++st:rt[st]==="."?rt.splice(st,1):++st;return ot+rt.join("/")};c.resolve=function(nt,rt,it){return it||(rt=_e(rt)),et(rt)?rt:(it||(nt=_e(nt)),(nt=nt.replace(/(?:\/|^)[^/]+$/,"")).length?_e(nt+"/"+rt):rt)}})(path);var types$1={},hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(d){var c=d,et=requireUtil(),_e=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function tt(nt,rt){var it=0,ot={};for(rt|=0;it<nt.length;)ot[_e[it+rt]]=nt[it++];return ot}c.basic=tt([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),c.defaults=tt([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",et.emptyArray,null]),c.long=tt([0,0,0,1,1],7),c.mapKey=tt([0,0,0,5,5,0,0,0,1,1,0,2],2),c.packed=tt([1,5,0,0,0,5,5,0,0,0,1,1,0])}(types$1)),types$1}var field,hasRequiredField;function requireField(){if(hasRequiredField)return field;hasRequiredField=1,field=rt;var d=requireObject();((rt.prototype=Object.create(d.prototype)).constructor=rt).className="Field";var c=require_enum(),et=requireTypes(),_e=requireUtil(),tt,nt=/^required|optional|repeated$/;rt.fromJSON=function(ot,st){return new rt(ot,st.id,st.type,st.rule,st.extend,st.options,st.comment)};function rt(it,ot,st,at,lt,ct,ut){if(_e.isObject(at)?(ut=lt,ct=at,at=lt=void 0):_e.isObject(lt)&&(ut=ct,ct=lt,lt=void 0),d.call(this,it,ct),!_e.isInteger(ot)||ot<0)throw TypeError("id must be a non-negative integer");if(!_e.isString(st))throw TypeError("type must be a string");if(at!==void 0&&!nt.test(at=at.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(lt!==void 0&&!_e.isString(lt))throw TypeError("extend must be a string");at==="proto3_optional"&&(at="optional"),this.rule=at&&at!=="optional"?at:void 0,this.type=st,this.id=ot,this.extend=lt||void 0,this.required=at==="required",this.optional=!this.required,this.repeated=at==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=_e.Long?et.long[st]!==void 0:!1,this.bytes=st==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=ut}return Object.defineProperty(rt.prototype,"packed",{get:function(){return this._packed===null&&(this._packed=this.getOption("packed")!==!1),this._packed}}),rt.prototype.setOption=function(ot,st,at){return ot==="packed"&&(this._packed=null),d.prototype.setOption.call(this,ot,st,at)},rt.prototype.toJSON=function(ot){var st=ot?!!ot.keepComments:!1;return _e.toObject(["rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",st?this.comment:void 0])},rt.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=et.defaults[this.type])===void 0?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof tt?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof c&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&((this.options.packed===!0||this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof c))&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=_e.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var ot;_e.base64.test(this.typeDefault)?_e.base64.decode(this.typeDefault,ot=_e.newBuffer(_e.base64.length(this.typeDefault)),0):_e.utf8.write(this.typeDefault,ot=_e.newBuffer(_e.utf8.length(this.typeDefault)),0),this.typeDefault=ot}return this.map?this.defaultValue=_e.emptyObject:this.repeated?this.defaultValue=_e.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof tt&&(this.parent.ctor.prototype[this.name]=this.defaultValue),d.prototype.resolve.call(this)},rt.d=function(ot,st,at,lt){return typeof st=="function"?st=_e.decorateType(st).name:st&&typeof st=="object"&&(st=_e.decorateEnum(st).name),function(ut,dt){_e.decorateType(ut.constructor).add(new rt(dt,ot,st,at,{default:lt}))}},rt._configure=function(ot){tt=ot},field}var oneof,hasRequiredOneof;function requireOneof(){if(hasRequiredOneof)return oneof;hasRequiredOneof=1,oneof=_e;var d=requireObject();((_e.prototype=Object.create(d.prototype)).constructor=_e).className="OneOf";var c=requireField(),et=requireUtil();function _e(nt,rt,it,ot){if(Array.isArray(rt)||(it=rt,rt=void 0),d.call(this,nt,it),!(rt===void 0||Array.isArray(rt)))throw TypeError("fieldNames must be an Array");this.oneof=rt||[],this.fieldsArray=[],this.comment=ot}_e.fromJSON=function(rt,it){return new _e(rt,it.oneof,it.options,it.comment)},_e.prototype.toJSON=function(rt){var it=rt?!!rt.keepComments:!1;return et.toObject(["options",this.options,"oneof",this.oneof,"comment",it?this.comment:void 0])};function tt(nt){if(nt.parent)for(var rt=0;rt<nt.fieldsArray.length;++rt)nt.fieldsArray[rt].parent||nt.parent.add(nt.fieldsArray[rt])}return _e.prototype.add=function(rt){if(!(rt instanceof c))throw TypeError("field must be a Field");return rt.parent&&rt.parent!==this.parent&&rt.parent.remove(rt),this.oneof.push(rt.name),this.fieldsArray.push(rt),rt.partOf=this,tt(this),this},_e.prototype.remove=function(rt){if(!(rt instanceof c))throw TypeError("field must be a Field");var it=this.fieldsArray.indexOf(rt);if(it<0)throw Error(rt+" is not a member of "+this);return this.fieldsArray.splice(it,1),it=this.oneof.indexOf(rt.name),it>-1&&this.oneof.splice(it,1),rt.partOf=null,this},_e.prototype.onAdd=function(rt){d.prototype.onAdd.call(this,rt);for(var it=this,ot=0;ot<this.oneof.length;++ot){var st=rt.get(this.oneof[ot]);st&&!st.partOf&&(st.partOf=it,it.fieldsArray.push(st))}tt(this)},_e.prototype.onRemove=function(rt){for(var it=0,ot;it<this.fieldsArray.length;++it)(ot=this.fieldsArray[it]).parent&&ot.parent.remove(ot);d.prototype.onRemove.call(this,rt)},_e.d=function(){for(var rt=new Array(arguments.length),it=0;it<arguments.length;)rt[it]=arguments[it++];return function(st,at){et.decorateType(st.constructor).add(new _e(at,rt)),Object.defineProperty(st,at,{get:et.oneOfGetter(rt),set:et.oneOfSetter(rt)})}},oneof}var namespace,hasRequiredNamespace;function requireNamespace(){if(hasRequiredNamespace)return namespace;hasRequiredNamespace=1,namespace=ot;var d=requireObject();((ot.prototype=Object.create(d.prototype)).constructor=ot).className="Namespace";var c=requireField(),et=requireUtil(),_e=requireOneof(),tt,nt,rt;ot.fromJSON=function(lt,ct){return new ot(lt,ct.options).addJSON(ct.nested)};function it(at,lt){if(at&&at.length){for(var ct={},ut=0;ut<at.length;++ut)ct[at[ut].name]=at[ut].toJSON(lt);return ct}}ot.arrayToJSON=it,ot.isReservedId=function(lt,ct){if(lt){for(var ut=0;ut<lt.length;++ut)if(typeof lt[ut]!="string"&&lt[ut][0]<=ct&&lt[ut][1]>ct)return!0}return!1},ot.isReservedName=function(lt,ct){if(lt){for(var ut=0;ut<lt.length;++ut)if(lt[ut]===ct)return!0}return!1};function ot(at,lt){d.call(this,at,lt),this.nested=void 0,this._nestedArray=null}function st(at){return at._nestedArray=null,at}return Object.defineProperty(ot.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=et.toArray(this.nested))}}),ot.prototype.toJSON=function(lt){return et.toObject(["options",this.options,"nested",it(this.nestedArray,lt)])},ot.prototype.addJSON=function(lt){var ct=this;if(lt)for(var ut=Object.keys(lt),dt=0,ht;dt<ut.length;++dt)ht=lt[ut[dt]],ct.add((ht.fields!==void 0?tt.fromJSON:ht.values!==void 0?rt.fromJSON:ht.methods!==void 0?nt.fromJSON:ht.id!==void 0?c.fromJSON:ot.fromJSON)(ut[dt],ht));return this},ot.prototype.get=function(lt){return this.nested&&this.nested[lt]||null},ot.prototype.getEnum=function(lt){if(this.nested&&this.nested[lt]instanceof rt)return this.nested[lt].values;throw Error("no such enum: "+lt)},ot.prototype.add=function(lt){if(!(lt instanceof c&&lt.extend!==void 0||lt instanceof tt||lt instanceof _e||lt instanceof rt||lt instanceof nt||lt instanceof ot))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var ct=this.get(lt.name);if(ct)if(ct instanceof ot&&lt instanceof ot&&!(ct instanceof tt||ct instanceof nt)){for(var ut=ct.nestedArray,dt=0;dt<ut.length;++dt)lt.add(ut[dt]);this.remove(ct),this.nested||(this.nested={}),lt.setOptions(ct.options,!0)}else throw Error("duplicate name '"+lt.name+"' in "+this)}return this.nested[lt.name]=lt,lt.onAdd(this),st(this)},ot.prototype.remove=function(lt){if(!(lt instanceof d))throw TypeError("object must be a ReflectionObject");if(lt.parent!==this)throw Error(lt+" is not a member of "+this);return delete this.nested[lt.name],Object.keys(this.nested).length||(this.nested=void 0),lt.onRemove(this),st(this)},ot.prototype.define=function(lt,ct){if(et.isString(lt))lt=lt.split(".");else if(!Array.isArray(lt))throw TypeError("illegal path");if(lt&&lt.length&&lt[0]==="")throw Error("path must be relative");for(var ut=this;lt.length>0;){var dt=lt.shift();if(ut.nested&&ut.nested[dt]){if(ut=ut.nested[dt],!(ut instanceof ot))throw Error("path conflicts with non-namespace objects")}else ut.add(ut=new ot(dt))}return ct&&ut.addJSON(ct),ut},ot.prototype.resolveAll=function(){for(var lt=this.nestedArray,ct=0;ct<lt.length;)lt[ct]instanceof ot?lt[ct++].resolveAll():lt[ct++].resolve();return this.resolve()},ot.prototype.lookup=function(lt,ct,ut){if(typeof ct=="boolean"?(ut=ct,ct=void 0):ct&&!Array.isArray(ct)&&(ct=[ct]),et.isString(lt)&&lt.length){if(lt===".")return this.root;lt=lt.split(".")}else if(!lt.length)return this;if(lt[0]==="")return this.root.lookup(lt.slice(1),ct);var dt=this.get(lt[0]);if(dt){if(lt.length===1){if(!ct||ct.indexOf(dt.constructor)>-1)return dt}else if(dt instanceof ot&&(dt=dt.lookup(lt.slice(1),ct,!0)))return dt}else for(var ht=0;ht<this.nestedArray.length;++ht)if(this._nestedArray[ht]instanceof ot&&(dt=this._nestedArray[ht].lookup(lt,ct,!0)))return dt;return this.parent===null||ut?null:this.parent.lookup(lt,ct)},ot.prototype.lookupType=function(lt){var ct=this.lookup(lt,[tt]);if(!ct)throw Error("no such type: "+lt);return ct},ot.prototype.lookupEnum=function(lt){var ct=this.lookup(lt,[rt]);if(!ct)throw Error("no such Enum '"+lt+"' in "+this);return ct},ot.prototype.lookupTypeOrEnum=function(lt){var ct=this.lookup(lt,[tt,rt]);if(!ct)throw Error("no such Type or Enum '"+lt+"' in "+this);return ct},ot.prototype.lookupService=function(lt){var ct=this.lookup(lt,[nt]);if(!ct)throw Error("no such Service '"+lt+"' in "+this);return ct},ot._configure=function(at,lt,ct){tt=at,nt=lt,rt=ct},namespace}var mapfield,hasRequiredMapfield;function requireMapfield(){if(hasRequiredMapfield)return mapfield;hasRequiredMapfield=1,mapfield=_e;var d=requireField();((_e.prototype=Object.create(d.prototype)).constructor=_e).className="MapField";var c=requireTypes(),et=requireUtil();function _e(tt,nt,rt,it,ot,st){if(d.call(this,tt,nt,it,void 0,void 0,ot,st),!et.isString(rt))throw TypeError("keyType must be a string");this.keyType=rt,this.resolvedKeyType=null,this.map=!0}return _e.fromJSON=function(nt,rt){return new _e(nt,rt.id,rt.keyType,rt.type,rt.options,rt.comment)},_e.prototype.toJSON=function(nt){var rt=nt?!!nt.keepComments:!1;return et.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",rt?this.comment:void 0])},_e.prototype.resolve=function(){if(this.resolved)return this;if(c.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return d.prototype.resolve.call(this)},_e.d=function(nt,rt,it){return typeof it=="function"?it=et.decorateType(it).name:it&&typeof it=="object"&&(it=et.decorateEnum(it).name),function(st,at){et.decorateType(st.constructor).add(new _e(at,nt,rt,it))}},mapfield}var method,hasRequiredMethod;function requireMethod(){if(hasRequiredMethod)return method;hasRequiredMethod=1,method=et;var d=requireObject();((et.prototype=Object.create(d.prototype)).constructor=et).className="Method";var c=requireUtil();function et(_e,tt,nt,rt,it,ot,st,at,lt){if(c.isObject(it)?(st=it,it=ot=void 0):c.isObject(ot)&&(st=ot,ot=void 0),!(tt===void 0||c.isString(tt)))throw TypeError("type must be a string");if(!c.isString(nt))throw TypeError("requestType must be a string");if(!c.isString(rt))throw TypeError("responseType must be a string");d.call(this,_e,st),this.type=tt||"rpc",this.requestType=nt,this.requestStream=it?!0:void 0,this.responseType=rt,this.responseStream=ot?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=at,this.parsedOptions=lt}return et.fromJSON=function(tt,nt){return new et(tt,nt.type,nt.requestType,nt.responseType,nt.requestStream,nt.responseStream,nt.options,nt.comment,nt.parsedOptions)},et.prototype.toJSON=function(tt){var nt=tt?!!tt.keepComments:!1;return c.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",nt?this.comment:void 0,"parsedOptions",this.parsedOptions])},et.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),d.prototype.resolve.call(this))},method}var service,hasRequiredService;function requireService(){if(hasRequiredService)return service;hasRequiredService=1,service=tt;var d=requireNamespace();((tt.prototype=Object.create(d.prototype)).constructor=tt).className="Service";var c=requireMethod(),et=requireUtil(),_e=rpc;function tt(rt,it){d.call(this,rt,it),this.methods={},this._methodsArray=null}tt.fromJSON=function(it,ot){var st=new tt(it,ot.options);if(ot.methods)for(var at=Object.keys(ot.methods),lt=0;lt<at.length;++lt)st.add(c.fromJSON(at[lt],ot.methods[at[lt]]));return ot.nested&&st.addJSON(ot.nested),st.comment=ot.comment,st},tt.prototype.toJSON=function(it){var ot=d.prototype.toJSON.call(this,it),st=it?!!it.keepComments:!1;return et.toObject(["options",ot&&ot.options||void 0,"methods",d.arrayToJSON(this.methodsArray,it)||{},"nested",ot&&ot.nested||void 0,"comment",st?this.comment:void 0])},Object.defineProperty(tt.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=et.toArray(this.methods))}});function nt(rt){return rt._methodsArray=null,rt}return tt.prototype.get=function(it){return this.methods[it]||d.prototype.get.call(this,it)},tt.prototype.resolveAll=function(){for(var it=this.methodsArray,ot=0;ot<it.length;++ot)it[ot].resolve();return d.prototype.resolve.call(this)},tt.prototype.add=function(it){if(this.get(it.name))throw Error("duplicate name '"+it.name+"' in "+this);return it instanceof c?(this.methods[it.name]=it,it.parent=this,nt(this)):d.prototype.add.call(this,it)},tt.prototype.remove=function(it){if(it instanceof c){if(this.methods[it.name]!==it)throw Error(it+" is not a member of "+this);return delete this.methods[it.name],it.parent=null,nt(this)}return d.prototype.remove.call(this,it)},tt.prototype.create=function(it,ot,st){for(var at=new _e.Service(it,ot,st),lt=0,ct;lt<this.methodsArray.length;++lt){var ut=et.lcFirst((ct=this._methodsArray[lt]).resolve().name).replace(/[^$\w_]/g,"");at[ut]=et.codegen(["r","c"],et.isReserved(ut)?ut+"_":ut)("return this.rpcCall(m,q,s,r,c)")({m:ct,q:ct.resolvedRequestType.ctor,s:ct.resolvedResponseType.ctor})}return at},service}var message=Message,util$1=requireMinimal();function Message(d){if(d)for(var c=Object.keys(d),et=0;et<c.length;++et)this[c[et]]=d[c[et]]}Message.create=function d(c){return this.$type.create(c)};Message.encode=function d(c,et){return this.$type.encode(c,et)};Message.encodeDelimited=function d(c,et){return this.$type.encodeDelimited(c,et)};Message.decode=function d(c){return this.$type.decode(c)};Message.decodeDelimited=function d(c){return this.$type.decodeDelimited(c)};Message.verify=function d(c){return this.$type.verify(c)};Message.fromObject=function d(c){return this.$type.fromObject(c)};Message.toObject=function d(c,et){return this.$type.toObject(c,et)};Message.prototype.toJSON=function d(){return this.$type.toObject(this,util$1.toJSONOptions)};var decoder_1,hasRequiredDecoder;function requireDecoder(){if(hasRequiredDecoder)return decoder_1;hasRequiredDecoder=1,decoder_1=tt;var d=require_enum(),c=requireTypes(),et=requireUtil();function _e(nt){return"missing required '"+nt.name+"'"}function tt(nt){var rt=et.codegen(["r","l"],nt.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(nt.fieldsArray.filter(function(ct){return ct.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");nt.group&&rt("if((t&7)===4)")("break"),rt("switch(t>>>3){");for(var it=0;it<nt.fieldsArray.length;++it){var ot=nt._fieldsArray[it].resolve(),st=ot.resolvedType instanceof d?"int32":ot.type,at="m"+et.safeProp(ot.name);rt("case %i: {",ot.id),ot.map?(rt("if(%s===util.emptyObject)",at)("%s={}",at)("var c2 = r.uint32()+r.pos"),c.defaults[ot.keyType]!==void 0?rt("k=%j",c.defaults[ot.keyType]):rt("k=null"),c.defaults[st]!==void 0?rt("value=%j",c.defaults[st]):rt("value=null"),rt("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",ot.keyType)("case 2:"),c.basic[st]===void 0?rt("value=types[%i].decode(r,r.uint32())",it):rt("value=r.%s()",st),rt("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),c.long[ot.keyType]!==void 0?rt('%s[typeof k==="object"?util.longToHash(k):k]=value',at):rt("%s[k]=value",at)):ot.repeated?(rt("if(!(%s&&%s.length))",at,at)("%s=[]",at),c.packed[st]!==void 0&&rt("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",at,st)("}else"),c.basic[st]===void 0?rt(ot.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",at,it):rt("%s.push(r.%s())",at,st)):c.basic[st]===void 0?rt(ot.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",at,it):rt("%s=r.%s()",at,st),rt("break")("}")}for(rt("default:")("r.skipType(t&7)")("break")("}")("}"),it=0;it<nt._fieldsArray.length;++it){var lt=nt._fieldsArray[it];lt.required&&rt("if(!m.hasOwnProperty(%j))",lt.name)("throw util.ProtocolError(%j,{instance:m})",_e(lt))}return rt("return m")}return decoder_1}var verifier_1,hasRequiredVerifier;function requireVerifier(){if(hasRequiredVerifier)return verifier_1;hasRequiredVerifier=1,verifier_1=nt;var d=require_enum(),c=requireUtil();function et(rt,it){return rt.name+": "+it+(rt.repeated&&it!=="array"?"[]":rt.map&&it!=="object"?"{k:"+rt.keyType+"}":"")+" expected"}function _e(rt,it,ot,st){if(it.resolvedType)if(it.resolvedType instanceof d){rt("switch(%s){",st)("default:")("return%j",et(it,"enum value"));for(var at=Object.keys(it.resolvedType.values),lt=0;lt<at.length;++lt)rt("case %i:",it.resolvedType.values[at[lt]]);rt("break")("}")}else rt("{")("var e=types[%i].verify(%s);",ot,st)("if(e)")("return%j+e",it.name+".")("}");else switch(it.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":rt("if(!util.isInteger(%s))",st)("return%j",et(it,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":rt("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",st,st,st,st)("return%j",et(it,"integer|Long"));break;case"float":case"double":rt('if(typeof %s!=="number")',st)("return%j",et(it,"number"));break;case"bool":rt('if(typeof %s!=="boolean")',st)("return%j",et(it,"boolean"));break;case"string":rt("if(!util.isString(%s))",st)("return%j",et(it,"string"));break;case"bytes":rt('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',st,st,st)("return%j",et(it,"buffer"));break}return rt}function tt(rt,it,ot){switch(it.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":rt("if(!util.key32Re.test(%s))",ot)("return%j",et(it,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":rt("if(!util.key64Re.test(%s))",ot)("return%j",et(it,"integer|Long key"));break;case"bool":rt("if(!util.key2Re.test(%s))",ot)("return%j",et(it,"boolean key"));break}return rt}function nt(rt){var it=c.codegen(["m"],rt.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),ot=rt.oneofsArray,st={};ot.length&&it("var p={}");for(var at=0;at<rt.fieldsArray.length;++at){var lt=rt._fieldsArray[at].resolve(),ct="m"+c.safeProp(lt.name);if(lt.optional&&it("if(%s!=null&&m.hasOwnProperty(%j)){",ct,lt.name),lt.map)it("if(!util.isObject(%s))",ct)("return%j",et(lt,"object"))("var k=Object.keys(%s)",ct)("for(var i=0;i<k.length;++i){"),tt(it,lt,"k[i]"),_e(it,lt,at,ct+"[k[i]]")("}");else if(lt.repeated)it("if(!Array.isArray(%s))",ct)("return%j",et(lt,"array"))("for(var i=0;i<%s.length;++i){",ct),_e(it,lt,at,ct+"[i]")("}");else{if(lt.partOf){var ut=c.safeProp(lt.partOf.name);st[lt.partOf.name]===1&&it("if(p%s===1)",ut)("return%j",lt.partOf.name+": multiple values"),st[lt.partOf.name]=1,it("p%s=1",ut)}_e(it,lt,at,ct)}lt.optional&&it("}")}return it("return null")}return verifier_1}var converter={},hasRequiredConverter;function requireConverter(){return hasRequiredConverter||(hasRequiredConverter=1,function(d){var c=d,et=require_enum(),_e=requireUtil();function tt(rt,it,ot,st){var at=!1;if(it.resolvedType)if(it.resolvedType instanceof et){rt("switch(d%s){",st);for(var lt=it.resolvedType.values,ct=Object.keys(lt),ut=0;ut<ct.length;++ut)lt[ct[ut]]===it.typeDefault&&!at&&(rt("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',st,st,st),it.repeated||rt("break"),at=!0),rt("case%j:",ct[ut])("case %i:",lt[ct[ut]])("m%s=%j",st,lt[ct[ut]])("break");rt("}")}else rt('if(typeof d%s!=="object")',st)("throw TypeError(%j)",it.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",st,ot,st);else{var dt=!1;switch(it.type){case"double":case"float":rt("m%s=Number(d%s)",st,st);break;case"uint32":case"fixed32":rt("m%s=d%s>>>0",st,st);break;case"int32":case"sint32":case"sfixed32":rt("m%s=d%s|0",st,st);break;case"uint64":dt=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":rt("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",st,st,dt)('else if(typeof d%s==="string")',st)("m%s=parseInt(d%s,10)",st,st)('else if(typeof d%s==="number")',st)("m%s=d%s",st,st)('else if(typeof d%s==="object")',st)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",st,st,st,dt?"true":"");break;case"bytes":rt('if(typeof d%s==="string")',st)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",st,st,st)("else if(d%s.length >= 0)",st)("m%s=d%s",st,st);break;case"string":rt("m%s=String(d%s)",st,st);break;case"bool":rt("m%s=Boolean(d%s)",st,st);break}}return rt}c.fromObject=function(it){var ot=it.fieldsArray,st=_e.codegen(["d"],it.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!ot.length)return st("return new this.ctor");st("var m=new this.ctor");for(var at=0;at<ot.length;++at){var lt=ot[at].resolve(),ct=_e.safeProp(lt.name);lt.map?(st("if(d%s){",ct)('if(typeof d%s!=="object")',ct)("throw TypeError(%j)",lt.fullName+": object expected")("m%s={}",ct)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",ct),tt(st,lt,at,ct+"[ks[i]]")("}")("}")):lt.repeated?(st("if(d%s){",ct)("if(!Array.isArray(d%s))",ct)("throw TypeError(%j)",lt.fullName+": array expected")("m%s=[]",ct)("for(var i=0;i<d%s.length;++i){",ct),tt(st,lt,at,ct+"[i]")("}")("}")):(lt.resolvedType instanceof et||st("if(d%s!=null){",ct),tt(st,lt,at,ct),lt.resolvedType instanceof et||st("}"))}return st("return m")};function nt(rt,it,ot,st){if(it.resolvedType)it.resolvedType instanceof et?rt("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",st,ot,st,st,ot,st,st):rt("d%s=types[%i].toObject(m%s,o)",st,ot,st);else{var at=!1;switch(it.type){case"double":case"float":rt("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",st,st,st,st);break;case"uint64":at=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":rt('if(typeof m%s==="number")',st)("d%s=o.longs===String?String(m%s):m%s",st,st,st)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",st,st,st,st,at?"true":"",st);break;case"bytes":rt("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",st,st,st,st,st);break;default:rt("d%s=m%s",st,st);break}}return rt}c.toObject=function(it){var ot=it.fieldsArray.slice().sort(_e.compareFieldsById);if(!ot.length)return _e.codegen()("return {}");for(var st=_e.codegen(["m","o"],it.name+"$toObject")("if(!o)")("o={}")("var d={}"),at=[],lt=[],ct=[],ut=0;ut<ot.length;++ut)ot[ut].partOf||(ot[ut].resolve().repeated?at:ot[ut].map?lt:ct).push(ot[ut]);if(at.length){for(st("if(o.arrays||o.defaults){"),ut=0;ut<at.length;++ut)st("d%s=[]",_e.safeProp(at[ut].name));st("}")}if(lt.length){for(st("if(o.objects||o.defaults){"),ut=0;ut<lt.length;++ut)st("d%s={}",_e.safeProp(lt[ut].name));st("}")}if(ct.length){for(st("if(o.defaults){"),ut=0;ut<ct.length;++ut){var dt=ct[ut],ht=_e.safeProp(dt.name);if(dt.resolvedType instanceof et)st("d%s=o.enums===String?%j:%j",ht,dt.resolvedType.valuesById[dt.typeDefault],dt.typeDefault);else if(dt.long)st("if(util.Long){")("var n=new util.Long(%i,%i,%j)",dt.typeDefault.low,dt.typeDefault.high,dt.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",ht)("}else")("d%s=o.longs===String?%j:%i",ht,dt.typeDefault.toString(),dt.typeDefault.toNumber());else if(dt.bytes){var yt="["+Array.prototype.slice.call(dt.typeDefault).join(",")+"]";st("if(o.bytes===String)d%s=%j",ht,String.fromCharCode.apply(String,dt.typeDefault))("else{")("d%s=%s",ht,yt)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",ht,ht)("}")}else st("d%s=%j",ht,dt.typeDefault)}st("}")}var gt=!1;for(ut=0;ut<ot.length;++ut){var dt=ot[ut],ft=it._fieldsArray.indexOf(dt),ht=_e.safeProp(dt.name);dt.map?(gt||(gt=!0,st("var ks2")),st("if(m%s&&(ks2=Object.keys(m%s)).length){",ht,ht)("d%s={}",ht)("for(var j=0;j<ks2.length;++j){"),nt(st,dt,ft,ht+"[ks2[j]]")("}")):dt.repeated?(st("if(m%s&&m%s.length){",ht,ht)("d%s=[]",ht)("for(var j=0;j<m%s.length;++j){",ht),nt(st,dt,ft,ht+"[j]")("}")):(st("if(m%s!=null&&m.hasOwnProperty(%j)){",ht,dt.name),nt(st,dt,ft,ht),dt.partOf&&st("if(o.oneofs)")("d%s=%j",_e.safeProp(dt.partOf.name),dt.name)),st("}")}return st("return d")}}(converter)),converter}var wrappers={};(function(d){var c=d,et=message;c[".google.protobuf.Any"]={fromObject:function(_e){if(_e&&_e["@type"]){var tt=_e["@type"].substring(_e["@type"].lastIndexOf("/")+1),nt=this.lookup(tt);if(nt){var rt=_e["@type"].charAt(0)==="."?_e["@type"].slice(1):_e["@type"];return rt.indexOf("/")===-1&&(rt="/"+rt),this.create({type_url:rt,value:nt.encode(nt.fromObject(_e)).finish()})}}return this.fromObject(_e)},toObject:function(_e,tt){var nt="type.googleapis.com/",rt="",it="";if(tt&&tt.json&&_e.type_url&&_e.value){it=_e.type_url.substring(_e.type_url.lastIndexOf("/")+1),rt=_e.type_url.substring(0,_e.type_url.lastIndexOf("/")+1);var ot=this.lookup(it);ot&&(_e=ot.decode(_e.value))}if(!(_e instanceof this.ctor)&&_e instanceof et){var st=_e.$type.toObject(_e,tt),at=_e.$type.fullName[0]==="."?_e.$type.fullName.slice(1):_e.$type.fullName;return rt===""&&(rt=nt),it=rt+at,st["@type"]=it,st}return this.toObject(_e,tt)}}})(wrappers);var type$1,hasRequiredType;function requireType(){if(hasRequiredType)return type$1;hasRequiredType=1,type$1=ht;var d=requireNamespace();((ht.prototype=Object.create(d.prototype)).constructor=ht).className="Type";var c=require_enum(),et=requireOneof(),_e=requireField(),tt=requireMapfield(),nt=requireService(),rt=message,it=reader,ot=writer,st=requireUtil(),at=requireEncoder(),lt=requireDecoder(),ct=requireVerifier(),ut=requireConverter(),dt=wrappers;function ht(gt,ft){d.call(this,gt,ft),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(ht.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var gt=Object.keys(this.fields),ft=0;ft<gt.length;++ft){var mt=this.fields[gt[ft]],pt=mt.id;if(this._fieldsById[pt])throw Error("duplicate id "+pt+" in "+this);this._fieldsById[pt]=mt}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=st.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=st.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=ht.generateConstructor(this)())},set:function(gt){var ft=gt.prototype;ft instanceof rt||((gt.prototype=new rt).constructor=gt,st.merge(gt.prototype,ft)),gt.$type=gt.prototype.$type=this,st.merge(gt,rt,!0),this._ctor=gt;for(var mt=0;mt<this.fieldsArray.length;++mt)this._fieldsArray[mt].resolve();var pt={};for(mt=0;mt<this.oneofsArray.length;++mt)pt[this._oneofsArray[mt].resolve().name]={get:st.oneOfGetter(this._oneofsArray[mt].oneof),set:st.oneOfSetter(this._oneofsArray[mt].oneof)};mt&&Object.defineProperties(gt.prototype,pt)}}}),ht.generateConstructor=function(ft){for(var mt=st.codegen(["p"],ft.name),pt=0,xt;pt<ft.fieldsArray.length;++pt)(xt=ft._fieldsArray[pt]).map?mt("this%s={}",st.safeProp(xt.name)):xt.repeated&&mt("this%s=[]",st.safeProp(xt.name));return mt("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function yt(gt){return gt._fieldsById=gt._fieldsArray=gt._oneofsArray=null,delete gt.encode,delete gt.decode,delete gt.verify,gt}return ht.fromJSON=function(ft,mt){var pt=new ht(ft,mt.options);pt.extensions=mt.extensions,pt.reserved=mt.reserved;for(var xt=Object.keys(mt.fields),vt=0;vt<xt.length;++vt)pt.add((typeof mt.fields[xt[vt]].keyType<"u"?tt.fromJSON:_e.fromJSON)(xt[vt],mt.fields[xt[vt]]));if(mt.oneofs)for(xt=Object.keys(mt.oneofs),vt=0;vt<xt.length;++vt)pt.add(et.fromJSON(xt[vt],mt.oneofs[xt[vt]]));if(mt.nested)for(xt=Object.keys(mt.nested),vt=0;vt<xt.length;++vt){var Et=mt.nested[xt[vt]];pt.add((Et.id!==void 0?_e.fromJSON:Et.fields!==void 0?ht.fromJSON:Et.values!==void 0?c.fromJSON:Et.methods!==void 0?nt.fromJSON:d.fromJSON)(xt[vt],Et))}return mt.extensions&&mt.extensions.length&&(pt.extensions=mt.extensions),mt.reserved&&mt.reserved.length&&(pt.reserved=mt.reserved),mt.group&&(pt.group=!0),mt.comment&&(pt.comment=mt.comment),pt},ht.prototype.toJSON=function(ft){var mt=d.prototype.toJSON.call(this,ft),pt=ft?!!ft.keepComments:!1;return st.toObject(["options",mt&&mt.options||void 0,"oneofs",d.arrayToJSON(this.oneofsArray,ft),"fields",d.arrayToJSON(this.fieldsArray.filter(function(xt){return!xt.declaringField}),ft)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",mt&&mt.nested||void 0,"comment",pt?this.comment:void 0])},ht.prototype.resolveAll=function(){for(var ft=this.fieldsArray,mt=0;mt<ft.length;)ft[mt++].resolve();var pt=this.oneofsArray;for(mt=0;mt<pt.length;)pt[mt++].resolve();return d.prototype.resolveAll.call(this)},ht.prototype.get=function(ft){return this.fields[ft]||this.oneofs&&this.oneofs[ft]||this.nested&&this.nested[ft]||null},ht.prototype.add=function(ft){if(this.get(ft.name))throw Error("duplicate name '"+ft.name+"' in "+this);if(ft instanceof _e&&ft.extend===void 0){if(this._fieldsById?this._fieldsById[ft.id]:this.fieldsById[ft.id])throw Error("duplicate id "+ft.id+" in "+this);if(this.isReservedId(ft.id))throw Error("id "+ft.id+" is reserved in "+this);if(this.isReservedName(ft.name))throw Error("name '"+ft.name+"' is reserved in "+this);return ft.parent&&ft.parent.remove(ft),this.fields[ft.name]=ft,ft.message=this,ft.onAdd(this),yt(this)}return ft instanceof et?(this.oneofs||(this.oneofs={}),this.oneofs[ft.name]=ft,ft.onAdd(this),yt(this)):d.prototype.add.call(this,ft)},ht.prototype.remove=function(ft){if(ft instanceof _e&&ft.extend===void 0){if(!this.fields||this.fields[ft.name]!==ft)throw Error(ft+" is not a member of "+this);return delete this.fields[ft.name],ft.parent=null,ft.onRemove(this),yt(this)}if(ft instanceof et){if(!this.oneofs||this.oneofs[ft.name]!==ft)throw Error(ft+" is not a member of "+this);return delete this.oneofs[ft.name],ft.parent=null,ft.onRemove(this),yt(this)}return d.prototype.remove.call(this,ft)},ht.prototype.isReservedId=function(ft){return d.isReservedId(this.reserved,ft)},ht.prototype.isReservedName=function(ft){return d.isReservedName(this.reserved,ft)},ht.prototype.create=function(ft){return new this.ctor(ft)},ht.prototype.setup=function(){for(var ft=this.fullName,mt=[],pt=0;pt<this.fieldsArray.length;++pt)mt.push(this._fieldsArray[pt].resolve().resolvedType);this.encode=at(this)({Writer:ot,types:mt,util:st}),this.decode=lt(this)({Reader:it,types:mt,util:st}),this.verify=ct(this)({types:mt,util:st}),this.fromObject=ut.fromObject(this)({types:mt,util:st}),this.toObject=ut.toObject(this)({types:mt,util:st});var xt=dt[ft];if(xt){var vt=Object.create(this);vt.fromObject=this.fromObject,this.fromObject=xt.fromObject.bind(vt),vt.toObject=this.toObject,this.toObject=xt.toObject.bind(vt)}return this},ht.prototype.encode=function(ft,mt){return this.setup().encode(ft,mt)},ht.prototype.encodeDelimited=function(ft,mt){return this.encode(ft,mt&&mt.len?mt.fork():mt).ldelim()},ht.prototype.decode=function(ft,mt){return this.setup().decode(ft,mt)},ht.prototype.decodeDelimited=function(ft){return ft instanceof it||(ft=it.create(ft)),this.decode(ft,ft.uint32())},ht.prototype.verify=function(ft){return this.setup().verify(ft)},ht.prototype.fromObject=function(ft){return this.setup().fromObject(ft)},ht.prototype.toObject=function(ft,mt){return this.setup().toObject(ft,mt)},ht.d=function(ft){return function(pt){st.decorateType(pt,ft)}},type$1}var root$5,hasRequiredRoot;function requireRoot(){if(hasRequiredRoot)return root$5;hasRequiredRoot=1,root$5=ot;var d=requireNamespace();((ot.prototype=Object.create(d.prototype)).constructor=ot).className="Root";var c=requireField(),et=require_enum(),_e=requireOneof(),tt=requireUtil(),nt,rt,it;function ot(ct){d.call(this,"",ct),this.deferred=[],this.files=[]}ot.fromJSON=function(ut,dt){return dt||(dt=new ot),ut.options&&dt.setOptions(ut.options),dt.addJSON(ut.nested)},ot.prototype.resolvePath=tt.path.resolve,ot.prototype.fetch=tt.fetch;function st(){}ot.prototype.load=function ct(ut,dt,ht){typeof dt=="function"&&(ht=dt,dt=void 0);var yt=this;if(!ht)return tt.asPromise(ct,yt,ut,dt);var gt=ht===st;function ft(wt,bt){if(ht){var $t=ht;if(ht=null,gt)throw wt;$t(wt,bt)}}function mt(wt){var bt=wt.lastIndexOf("google/protobuf/");if(bt>-1){var $t=wt.substring(bt);if($t in it)return $t}return null}function pt(wt,bt){try{if(tt.isString(bt)&&bt.charAt(0)==="{"&&(bt=JSON.parse(bt)),!tt.isString(bt))yt.setOptions(bt.options).addJSON(bt.nested);else{rt.filename=wt;var $t=rt(bt,yt,dt),kt,Nt=0;if($t.imports)for(;Nt<$t.imports.length;++Nt)(kt=mt($t.imports[Nt])||yt.resolvePath(wt,$t.imports[Nt]))&&xt(kt);if($t.weakImports)for(Nt=0;Nt<$t.weakImports.length;++Nt)(kt=mt($t.weakImports[Nt])||yt.resolvePath(wt,$t.weakImports[Nt]))&&xt(kt,!0)}}catch(At){ft(At)}!gt&&!vt&&ft(null,yt)}function xt(wt,bt){if(wt=mt(wt)||wt,!(yt.files.indexOf(wt)>-1)){if(yt.files.push(wt),wt in it){gt?pt(wt,it[wt]):(++vt,setTimeout(function(){--vt,pt(wt,it[wt])}));return}if(gt){var $t;try{$t=tt.fs.readFileSync(wt).toString("utf8")}catch(kt){bt||ft(kt);return}pt(wt,$t)}else++vt,yt.fetch(wt,function(kt,Nt){if(--vt,!!ht){if(kt){bt?vt||ft(null,yt):ft(kt);return}pt(wt,Nt)}})}}var vt=0;tt.isString(ut)&&(ut=[ut]);for(var Et=0,_t;Et<ut.length;++Et)(_t=yt.resolvePath("",ut[Et]))&&xt(_t);if(gt)return yt;vt||ft(null,yt)},ot.prototype.loadSync=function(ut,dt){if(!tt.isNode)throw Error("not supported");return this.load(ut,dt,st)},ot.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(ut){return"'extend "+ut.extend+"' in "+ut.parent.fullName}).join(", "));return d.prototype.resolveAll.call(this)};var at=/^[A-Z]/;function lt(ct,ut){var dt=ut.parent.lookup(ut.extend);if(dt){var ht=new c(ut.fullName,ut.id,ut.type,ut.rule,void 0,ut.options);return dt.get(ht.name)||(ht.declaringField=ut,ut.extensionField=ht,dt.add(ht)),!0}return!1}return ot.prototype._handleAdd=function(ut){if(ut instanceof c)ut.extend!==void 0&&!ut.extensionField&&(lt(this,ut)||this.deferred.push(ut));else if(ut instanceof et)at.test(ut.name)&&(ut.parent[ut.name]=ut.values);else if(!(ut instanceof _e)){if(ut instanceof nt)for(var dt=0;dt<this.deferred.length;)lt(this,this.deferred[dt])?this.deferred.splice(dt,1):++dt;for(var ht=0;ht<ut.nestedArray.length;++ht)this._handleAdd(ut._nestedArray[ht]);at.test(ut.name)&&(ut.parent[ut.name]=ut)}},ot.prototype._handleRemove=function(ut){if(ut instanceof c){if(ut.extend!==void 0)if(ut.extensionField)ut.extensionField.parent.remove(ut.extensionField),ut.extensionField=null;else{var dt=this.deferred.indexOf(ut);dt>-1&&this.deferred.splice(dt,1)}}else if(ut instanceof et)at.test(ut.name)&&delete ut.parent[ut.name];else if(ut instanceof d){for(var ht=0;ht<ut.nestedArray.length;++ht)this._handleRemove(ut._nestedArray[ht]);at.test(ut.name)&&delete ut.parent[ut.name]}},ot._configure=function(ct,ut,dt){nt=ct,rt=ut,it=dt},root$5}var hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util$2.exports;hasRequiredUtil=1;var d=util$2.exports=requireMinimal(),c=roots,et,_e;d.codegen=codegen_1,d.fetch=fetch_1,d.path=path,d.fs=d.inquire("fs"),d.toArray=function(st){if(st){for(var at=Object.keys(st),lt=new Array(at.length),ct=0;ct<at.length;)lt[ct]=st[at[ct++]];return lt}return[]},d.toObject=function(st){for(var at={},lt=0;lt<st.length;){var ct=st[lt++],ut=st[lt++];ut!==void 0&&(at[ct]=ut)}return at};var tt=/\\/g,nt=/"/g;d.isReserved=function(st){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(st)},d.safeProp=function(st){return!/^[$\w_]+$/.test(st)||d.isReserved(st)?'["'+st.replace(tt,"\\\\").replace(nt,'\\"')+'"]':"."+st},d.ucFirst=function(st){return st.charAt(0).toUpperCase()+st.substring(1)};var rt=/_([a-z])/g;d.camelCase=function(st){return st.substring(0,1)+st.substring(1).replace(rt,function(at,lt){return lt.toUpperCase()})},d.compareFieldsById=function(st,at){return st.id-at.id},d.decorateType=function(st,at){if(st.$type)return at&&st.$type.name!==at&&(d.decorateRoot.remove(st.$type),st.$type.name=at,d.decorateRoot.add(st.$type)),st.$type;et||(et=requireType());var lt=new et(at||st.name);return d.decorateRoot.add(lt),lt.ctor=st,Object.defineProperty(st,"$type",{value:lt,enumerable:!1}),Object.defineProperty(st.prototype,"$type",{value:lt,enumerable:!1}),lt};var it=0;return d.decorateEnum=function(st){if(st.$type)return st.$type;_e||(_e=require_enum());var at=new _e("Enum"+it++,st);return d.decorateRoot.add(at),Object.defineProperty(st,"$type",{value:at,enumerable:!1}),at},d.setProperty=function(st,at,lt){function ct(ut,dt,ht){var yt=dt.shift();if(yt==="__proto__"||yt==="prototype")return ut;if(dt.length>0)ut[yt]=ct(ut[yt]||{},dt,ht);else{var gt=ut[yt];gt&&(ht=[].concat(gt).concat(ht)),ut[yt]=ht}return ut}if(typeof st!="object")throw TypeError("dst must be an object");if(!at)throw TypeError("path must be specified");return at=at.split("."),ct(st,at,lt)},Object.defineProperty(d,"decorateRoot",{get:function(){return c.decorated||(c.decorated=new(requireRoot()))}}),util$2.exports}var object,hasRequiredObject;function requireObject(){if(hasRequiredObject)return object;hasRequiredObject=1,object=et,et.className="ReflectionObject";var d=requireUtil(),c;function et(_e,tt){if(!d.isString(_e))throw TypeError("name must be a string");if(tt&&!d.isObject(tt))throw TypeError("options must be an object");this.options=tt,this.parsedOptions=null,this.name=_e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}return Object.defineProperties(et.prototype,{root:{get:function(){for(var _e=this;_e.parent!==null;)_e=_e.parent;return _e}},fullName:{get:function(){for(var _e=[this.name],tt=this.parent;tt;)_e.unshift(tt.name),tt=tt.parent;return _e.join(".")}}}),et.prototype.toJSON=function(){throw Error()},et.prototype.onAdd=function(tt){this.parent&&this.parent!==tt&&this.parent.remove(this),this.parent=tt,this.resolved=!1;var nt=tt.root;nt instanceof c&&nt._handleAdd(this)},et.prototype.onRemove=function(tt){var nt=tt.root;nt instanceof c&&nt._handleRemove(this),this.parent=null,this.resolved=!1},et.prototype.resolve=function(){return this.resolved?this:(this.root instanceof c&&(this.resolved=!0),this)},et.prototype.getOption=function(tt){if(this.options)return this.options[tt]},et.prototype.setOption=function(tt,nt,rt){return(!rt||!this.options||this.options[tt]===void 0)&&((this.options||(this.options={}))[tt]=nt),this},et.prototype.setParsedOption=function(tt,nt,rt){this.parsedOptions||(this.parsedOptions=[]);var it=this.parsedOptions;if(rt){var ot=it.find(function(lt){return Object.prototype.hasOwnProperty.call(lt,tt)});if(ot){var st=ot[tt];d.setProperty(st,rt,nt)}else ot={},ot[tt]=d.setProperty({},rt,nt),it.push(ot)}else{var at={};at[tt]=nt,it.push(at)}return this},et.prototype.setOptions=function(tt,nt){if(tt)for(var rt=Object.keys(tt),it=0;it<rt.length;++it)this.setOption(rt[it],tt[rt[it]],nt);return this},et.prototype.toString=function(){var tt=this.constructor.className,nt=this.fullName;return nt.length?tt+" "+nt:tt},et._configure=function(_e){c=_e},object}var _enum,hasRequired_enum;function require_enum(){if(hasRequired_enum)return _enum;hasRequired_enum=1,_enum=_e;var d=requireObject();((_e.prototype=Object.create(d.prototype)).constructor=_e).className="Enum";var c=requireNamespace(),et=requireUtil();function _e(tt,nt,rt,it,ot,st){if(d.call(this,tt,rt),nt&&typeof nt!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=it,this.comments=ot||{},this.valuesOptions=st,this.reserved=void 0,nt)for(var at=Object.keys(nt),lt=0;lt<at.length;++lt)typeof nt[at[lt]]=="number"&&(this.valuesById[this.values[at[lt]]=nt[at[lt]]]=at[lt])}return _e.fromJSON=function(nt,rt){var it=new _e(nt,rt.values,rt.options,rt.comment,rt.comments);return it.reserved=rt.reserved,it},_e.prototype.toJSON=function(nt){var rt=nt?!!nt.keepComments:!1;return et.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",rt?this.comment:void 0,"comments",rt?this.comments:void 0])},_e.prototype.add=function(nt,rt,it,ot){if(!et.isString(nt))throw TypeError("name must be a string");if(!et.isInteger(rt))throw TypeError("id must be an integer");if(this.values[nt]!==void 0)throw Error("duplicate name '"+nt+"' in "+this);if(this.isReservedId(rt))throw Error("id "+rt+" is reserved in "+this);if(this.isReservedName(nt))throw Error("name '"+nt+"' is reserved in "+this);if(this.valuesById[rt]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+rt+" in "+this);this.values[nt]=rt}else this.valuesById[this.values[nt]=rt]=nt;return ot&&(this.valuesOptions===void 0&&(this.valuesOptions={}),this.valuesOptions[nt]=ot||null),this.comments[nt]=it||null,this},_e.prototype.remove=function(nt){if(!et.isString(nt))throw TypeError("name must be a string");var rt=this.values[nt];if(rt==null)throw Error("name '"+nt+"' does not exist in "+this);return delete this.valuesById[rt],delete this.values[nt],delete this.comments[nt],this.valuesOptions&&delete this.valuesOptions[nt],this},_e.prototype.isReservedId=function(nt){return c.isReservedId(this.reserved,nt)},_e.prototype.isReservedName=function(nt){return c.isReservedName(this.reserved,nt)},_enum}var encoder_1,hasRequiredEncoder;function requireEncoder(){if(hasRequiredEncoder)return encoder_1;hasRequiredEncoder=1,encoder_1=tt;var d=require_enum(),c=requireTypes(),et=requireUtil();function _e(nt,rt,it,ot){return rt.resolvedType.group?nt("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",it,ot,(rt.id<<3|3)>>>0,(rt.id<<3|4)>>>0):nt("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",it,ot,(rt.id<<3|2)>>>0)}function tt(nt){for(var rt=et.codegen(["m","w"],nt.name+"$encode")("if(!w)")("w=Writer.create()"),it,ot,st=nt.fieldsArray.slice().sort(et.compareFieldsById),it=0;it<st.length;++it){var at=st[it].resolve(),lt=nt._fieldsArray.indexOf(at),ct=at.resolvedType instanceof d?"int32":at.type,ut=c.basic[ct];ot="m"+et.safeProp(at.name),at.map?(rt("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",ot,at.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",ot)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(at.id<<3|2)>>>0,8|c.mapKey[at.keyType],at.keyType),ut===void 0?rt("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",lt,ot):rt(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|ut,ct,ot),rt("}")("}")):at.repeated?(rt("if(%s!=null&&%s.length){",ot,ot),at.packed&&c.packed[ct]!==void 0?rt("w.uint32(%i).fork()",(at.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",ot)("w.%s(%s[i])",ct,ot)("w.ldelim()"):(rt("for(var i=0;i<%s.length;++i)",ot),ut===void 0?_e(rt,at,lt,ot+"[i]"):rt("w.uint32(%i).%s(%s[i])",(at.id<<3|ut)>>>0,ct,ot)),rt("}")):(at.optional&&rt("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",ot,at.name),ut===void 0?_e(rt,at,lt,ot):rt("w.uint32(%i).%s(%s)",(at.id<<3|ut)>>>0,ct,ot))}return rt("return w")}return encoder_1}var protobuf$1=indexLight.exports=indexMinimal;protobuf$1.build="light";function load(d,c,et){return typeof c=="function"?(et=c,c=new protobuf$1.Root):c||(c=new protobuf$1.Root),c.load(d,et)}protobuf$1.load=load;function loadSync(d,c){return c||(c=new protobuf$1.Root),c.loadSync(d)}protobuf$1.loadSync=loadSync;protobuf$1.encoder=requireEncoder();protobuf$1.decoder=requireDecoder();protobuf$1.verifier=requireVerifier();protobuf$1.converter=requireConverter();protobuf$1.ReflectionObject=requireObject();protobuf$1.Namespace=requireNamespace();protobuf$1.Root=requireRoot();protobuf$1.Enum=require_enum();protobuf$1.Type=requireType();protobuf$1.Field=requireField();protobuf$1.OneOf=requireOneof();protobuf$1.MapField=requireMapfield();protobuf$1.Service=requireService();protobuf$1.Method=requireMethod();protobuf$1.Message=message;protobuf$1.wrappers=wrappers;protobuf$1.types=requireTypes();protobuf$1.util=requireUtil();protobuf$1.ReflectionObject._configure(protobuf$1.Root);protobuf$1.Namespace._configure(protobuf$1.Type,protobuf$1.Service,protobuf$1.Enum);protobuf$1.Root._configure(protobuf$1.Type);protobuf$1.Field._configure(protobuf$1.Type);var indexLightExports=indexLight.exports,tokenize_1=tokenize$1,delimRe=/[\s{}=;:[\],'"()<>]/g,stringDoubleRe=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,stringSingleRe=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,setCommentRe=/^ *[*/]+ */,setCommentAltRe=/^\s*\*?\/*/,setCommentSplitRe=/\n/g,whitespaceRe=/\s/,unescapeRe=/\\(.?)/g,unescapeMap={0:"\0",r:"\r",n:`
`,t:"	"};function unescape(d){return d.replace(unescapeRe,function(c,et){switch(et){case"\\":case"":return et;default:return unescapeMap[et]||""}})}tokenize$1.unescape=unescape;function tokenize$1(d,c){d=d.toString();var et=0,_e=d.length,tt=1,nt=0,rt={},it=[],ot=null;function st(pt){return Error("illegal "+pt+" (line "+tt+")")}function at(){var pt=ot==="'"?stringSingleRe:stringDoubleRe;pt.lastIndex=et-1;var xt=pt.exec(d);if(!xt)throw st("string");return et=pt.lastIndex,yt(ot),ot=null,unescape(xt[1])}function lt(pt){return d.charAt(pt)}function ct(pt,xt,vt){var Et={type:d.charAt(pt++),lineEmpty:!1,leading:vt},_t;c?_t=2:_t=3;var wt=pt-_t,bt;do if(--wt<0||(bt=d.charAt(wt))===`
`){Et.lineEmpty=!0;break}while(bt===" "||bt==="	");for(var $t=d.substring(pt,xt).split(setCommentSplitRe),kt=0;kt<$t.length;++kt)$t[kt]=$t[kt].replace(c?setCommentAltRe:setCommentRe,"").trim();Et.text=$t.join(`
`).trim(),rt[tt]=Et,nt=tt}function ut(pt){var xt=dt(pt),vt=d.substring(pt,xt),Et=/^\s*\/{1,2}/.test(vt);return Et}function dt(pt){for(var xt=pt;xt<_e&&lt(xt)!==`
`;)xt++;return xt}function ht(){if(it.length>0)return it.shift();if(ot)return at();var pt,xt,vt,Et,_t,wt=et===0;do{if(et===_e)return null;for(pt=!1;whitespaceRe.test(vt=lt(et));)if(vt===`
`&&(wt=!0,++tt),++et===_e)return null;if(lt(et)==="/"){if(++et===_e)throw st("comment");if(lt(et)==="/")if(c){if(Et=et,_t=!1,ut(et)){_t=!0;do if(et=dt(et),et===_e||(et++,!wt))break;while(ut(et))}else et=Math.min(_e,dt(et)+1);_t&&(ct(Et,et,wt),wt=!0),tt++,pt=!0}else{for(_t=lt(Et=et+1)==="/";lt(++et)!==`
`;)if(et===_e)return null;++et,_t&&(ct(Et,et-1,wt),wt=!0),++tt,pt=!0}else if((vt=lt(et))==="*"){Et=et+1,_t=c||lt(Et)==="*";do{if(vt===`
`&&++tt,++et===_e)throw st("comment");xt=vt,vt=lt(et)}while(xt!=="*"||vt!=="/");++et,_t&&(ct(Et,et-2,wt),wt=!0),pt=!0}else return"/"}}while(pt);var bt=et;delimRe.lastIndex=0;var $t=delimRe.test(lt(bt++));if(!$t)for(;bt<_e&&!delimRe.test(lt(bt));)++bt;var kt=d.substring(et,et=bt);return(kt==='"'||kt==="'")&&(ot=kt),kt}function yt(pt){it.push(pt)}function gt(){if(!it.length){var pt=ht();if(pt===null)return null;yt(pt)}return it[0]}function ft(pt,xt){var vt=gt(),Et=vt===pt;if(Et)return ht(),!0;if(!xt)throw st("token '"+vt+"', '"+pt+"' expected");return!1}function mt(pt){var xt=null,vt;return pt===void 0?(vt=rt[tt-1],delete rt[tt-1],vt&&(c||vt.type==="*"||vt.lineEmpty)&&(xt=vt.leading?vt.text:null)):(nt<pt&&gt(),vt=rt[pt],delete rt[pt],vt&&!vt.lineEmpty&&(c||vt.type==="/")&&(xt=vt.leading?null:vt.text)),xt}return Object.defineProperty({next:ht,peek:gt,push:yt,skip:ft,cmnt:mt},"line",{get:function(){return tt}})}var parse_1=parse;parse.filename=null;parse.defaults={keepCase:!1};var tokenize=tokenize_1,Root=requireRoot(),Type=requireType(),Field=requireField(),MapField=requireMapfield(),OneOf=requireOneof(),Enum=require_enum(),Service=requireService(),Method=requireMethod(),types=requireTypes(),util=requireUtil(),base10Re=/^[1-9][0-9]*$/,base10NegRe=/^-?[1-9][0-9]*$/,base16Re=/^0[x][0-9a-fA-F]+$/,base16NegRe=/^-?0[x][0-9a-fA-F]+$/,base8Re=/^0[0-7]+$/,base8NegRe=/^-?0[0-7]+$/,numberRe=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,nameRe=/^[a-zA-Z_][a-zA-Z_0-9]*$/,typeRefRe=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,fqTypeRefRe=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function parse(d,c,et){c instanceof Root||(et=c,c=new Root),et||(et=parse.defaults);var _e=et.preferTrailingComment||!1,tt=tokenize(d,et.alternateCommentMode||!1),nt=tt.next,rt=tt.push,it=tt.peek,ot=tt.skip,st=tt.cmnt,at=!0,lt,ct,ut,dt,ht=!1,yt=c,gt=et.keepCase?function(Tt){return Tt}:util.camelCase;function ft(Tt,Rt,jt){var Dt=parse.filename;return jt||(parse.filename=null),Error("illegal "+(Rt||"token")+" '"+Tt+"' ("+(Dt?Dt+", ":"")+"line "+tt.line+")")}function mt(){var Tt=[],Rt;do{if((Rt=nt())!=='"'&&Rt!=="'")throw ft(Rt);Tt.push(nt()),ot(Rt),Rt=it()}while(Rt==='"'||Rt==="'");return Tt.join("")}function pt(Tt){var Rt=nt();switch(Rt){case"'":case'"':return rt(Rt),mt();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return vt(Rt,!0)}catch{if(Tt&&typeRefRe.test(Rt))return Rt;throw ft(Rt,"value")}}function xt(Tt,Rt){var jt,Dt;do Rt&&((jt=it())==='"'||jt==="'")?Tt.push(mt()):Tt.push([Dt=Et(nt()),ot("to",!0)?Et(nt()):Dt]);while(ot(",",!0));ot(";")}function vt(Tt,Rt){var jt=1;switch(Tt.charAt(0)==="-"&&(jt=-1,Tt=Tt.substring(1)),Tt){case"inf":case"INF":case"Inf":return jt*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(base10Re.test(Tt))return jt*parseInt(Tt,10);if(base16Re.test(Tt))return jt*parseInt(Tt,16);if(base8Re.test(Tt))return jt*parseInt(Tt,8);if(numberRe.test(Tt))return jt*parseFloat(Tt);throw ft(Tt,"number",Rt)}function Et(Tt,Rt){switch(Tt){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!Rt&&Tt.charAt(0)==="-")throw ft(Tt,"id");if(base10NegRe.test(Tt))return parseInt(Tt,10);if(base16NegRe.test(Tt))return parseInt(Tt,16);if(base8NegRe.test(Tt))return parseInt(Tt,8);throw ft(Tt,"id")}function _t(){if(lt!==void 0)throw ft("package");if(lt=nt(),!typeRefRe.test(lt))throw ft(lt,"name");yt=yt.define(lt),ot(";")}function wt(){var Tt=it(),Rt;switch(Tt){case"weak":Rt=ut||(ut=[]),nt();break;case"public":nt();default:Rt=ct||(ct=[]);break}Tt=mt(),ot(";"),Rt.push(Tt)}function bt(){if(ot("="),dt=mt(),ht=dt==="proto3",!ht&&dt!=="proto2")throw ft(dt,"syntax");ot(";")}function $t(Tt,Rt){switch(Rt){case"option":return Lt(Tt,Rt),ot(";"),!0;case"message":return Nt(Tt,Rt),!0;case"enum":return Ot(Tt,Rt),!0;case"service":return en(Tt,Rt),!0;case"extend":return mn(Tt,Rt),!0}return!1}function kt(Tt,Rt,jt){var Dt=tt.line;if(Tt&&(typeof Tt.comment!="string"&&(Tt.comment=st()),Tt.filename=parse.filename),ot("{",!0)){for(var Mt;(Mt=nt())!=="}";)Rt(Mt);ot(";",!0)}else jt&&jt(),ot(";"),Tt&&(typeof Tt.comment!="string"||_e)&&(Tt.comment=st(Dt)||Tt.comment)}function Nt(Tt,Rt){if(!nameRe.test(Rt=nt()))throw ft(Rt,"type name");var jt=new Type(Rt);kt(jt,function(Mt){if(!$t(jt,Mt))switch(Mt){case"map":Kt(jt);break;case"required":case"repeated":At(jt,Mt);break;case"optional":ht?At(jt,"proto3_optional"):At(jt,"optional");break;case"oneof":qt(jt,Mt);break;case"extensions":xt(jt.extensions||(jt.extensions=[]));break;case"reserved":xt(jt.reserved||(jt.reserved=[]),!0);break;default:if(!ht||!typeRefRe.test(Mt))throw ft(Mt);rt(Mt),At(jt,"optional");break}}),Tt.add(jt)}function At(Tt,Rt,jt){var Dt=nt();if(Dt==="group"){Gt(Tt,Rt);return}for(;Dt.endsWith(".")||it().startsWith(".");)Dt+=nt();if(!typeRefRe.test(Dt))throw ft(Dt,"type");var Mt=nt();if(!nameRe.test(Mt))throw ft(Mt,"name");Mt=gt(Mt),ot("=");var Vt=new Field(Mt,Et(nt()),Dt,Rt,jt);if(kt(Vt,function(un){if(un==="option")Lt(Vt,un),ot(";");else throw ft(un)},function(){zt(Vt)}),Rt==="proto3_optional"){var Ht=new OneOf("_"+Mt);Vt.setOption("proto3_optional",!0),Ht.add(Vt),Tt.add(Ht)}else Tt.add(Vt);!ht&&Vt.repeated&&(types.packed[Dt]!==void 0||types.basic[Dt]===void 0)&&Vt.setOption("packed",!1,!0)}function Gt(Tt,Rt){var jt=nt();if(!nameRe.test(jt))throw ft(jt,"name");var Dt=util.lcFirst(jt);jt===Dt&&(jt=util.ucFirst(jt)),ot("=");var Mt=Et(nt()),Vt=new Type(jt);Vt.group=!0;var Ht=new Field(Dt,Mt,jt,Rt);Ht.filename=parse.filename,kt(Vt,function(un){switch(un){case"option":Lt(Vt,un),ot(";");break;case"required":case"repeated":At(Vt,un);break;case"optional":ht?At(Vt,"proto3_optional"):At(Vt,"optional");break;case"message":Nt(Vt,un);break;case"enum":Ot(Vt,un);break;default:throw ft(un)}}),Tt.add(Vt).add(Ht)}function Kt(Tt){ot("<");var Rt=nt();if(types.mapKey[Rt]===void 0)throw ft(Rt,"type");ot(",");var jt=nt();if(!typeRefRe.test(jt))throw ft(jt,"type");ot(">");var Dt=nt();if(!nameRe.test(Dt))throw ft(Dt,"name");ot("=");var Mt=new MapField(gt(Dt),Et(nt()),Rt,jt);kt(Mt,function(Ht){if(Ht==="option")Lt(Mt,Ht),ot(";");else throw ft(Ht)},function(){zt(Mt)}),Tt.add(Mt)}function qt(Tt,Rt){if(!nameRe.test(Rt=nt()))throw ft(Rt,"name");var jt=new OneOf(gt(Rt));kt(jt,function(Mt){Mt==="option"?(Lt(jt,Mt),ot(";")):(rt(Mt),At(jt,"optional"))}),Tt.add(jt)}function Ot(Tt,Rt){if(!nameRe.test(Rt=nt()))throw ft(Rt,"name");var jt=new Enum(Rt);kt(jt,function(Mt){switch(Mt){case"option":Lt(jt,Mt),ot(";");break;case"reserved":xt(jt.reserved||(jt.reserved=[]),!0);break;default:Pt(jt,Mt)}}),Tt.add(jt)}function Pt(Tt,Rt){if(!nameRe.test(Rt))throw ft(Rt,"name");ot("=");var jt=Et(nt(),!0),Dt={options:void 0};Dt.setOption=function(Mt,Vt){this.options===void 0&&(this.options={}),this.options[Mt]=Vt},kt(Dt,function(Vt){if(Vt==="option")Lt(Dt,Vt),ot(";");else throw ft(Vt)},function(){zt(Dt)}),Tt.add(Rt,jt,Dt.comment,Dt.options)}function Lt(Tt,Rt){var jt=ot("(",!0);if(!typeRefRe.test(Rt=nt()))throw ft(Rt,"name");var Dt=Rt,Mt=Dt,Vt;jt&&(ot(")"),Dt="("+Dt+")",Mt=Dt,Rt=it(),fqTypeRefRe.test(Rt)&&(Vt=Rt.slice(1),Dt+=Rt,nt())),ot("=");var Ht=Qt(Tt,Dt);sn(Tt,Mt,Ht,Vt)}function Qt(Tt,Rt){if(ot("{",!0)){for(var jt={};!ot("}",!0);){if(!nameRe.test(Zt=nt()))throw ft(Zt,"name");var Dt,Mt=Zt;if(ot(":",!0),it()==="{")Dt=Qt(Tt,Rt+"."+Zt);else if(it()==="["){Dt=[];var Vt;if(ot("[",!0)){do Vt=pt(!0),Dt.push(Vt);while(ot(",",!0));ot("]"),typeof Vt<"u"&&Wt(Tt,Rt+"."+Zt,Vt)}}else Dt=pt(!0),Wt(Tt,Rt+"."+Zt,Dt);var Ht=jt[Mt];Ht&&(Dt=[].concat(Ht).concat(Dt)),jt[Mt]=Dt,ot(",",!0),ot(";",!0)}return jt}var hn=pt(!0);return Wt(Tt,Rt,hn),hn}function Wt(Tt,Rt,jt){Tt.setOption&&Tt.setOption(Rt,jt)}function sn(Tt,Rt,jt,Dt){Tt.setParsedOption&&Tt.setParsedOption(Rt,jt,Dt)}function zt(Tt){if(ot("[",!0)){do Lt(Tt,"option");while(ot(",",!0));ot("]")}return Tt}function en(Tt,Rt){if(!nameRe.test(Rt=nt()))throw ft(Rt,"service name");var jt=new Service(Rt);kt(jt,function(Mt){if(!$t(jt,Mt))if(Mt==="rpc")rn(jt,Mt);else throw ft(Mt)}),Tt.add(jt)}function rn(Tt,Rt){var jt=st(),Dt=Rt;if(!nameRe.test(Rt=nt()))throw ft(Rt,"name");var Mt=Rt,Vt,Ht,hn,un;if(ot("("),ot("stream",!0)&&(Ht=!0),!typeRefRe.test(Rt=nt())||(Vt=Rt,ot(")"),ot("returns"),ot("("),ot("stream",!0)&&(un=!0),!typeRefRe.test(Rt=nt())))throw ft(Rt);hn=Rt,ot(")");var xn=new Method(Mt,Dt,Vt,hn,Ht,un);xn.comment=jt,kt(xn,function(ln){if(ln==="option")Lt(xn,ln),ot(";");else throw ft(ln)}),Tt.add(xn)}function mn(Tt,Rt){if(!typeRefRe.test(Rt=nt()))throw ft(Rt,"reference");var jt=Rt;kt(null,function(Mt){switch(Mt){case"required":case"repeated":At(Tt,Mt,jt);break;case"optional":ht?At(Tt,"proto3_optional",jt):At(Tt,"optional",jt);break;default:if(!ht||!typeRefRe.test(Mt))throw ft(Mt);rt(Mt),At(Tt,"optional",jt);break}})}for(var Zt;(Zt=nt())!==null;)switch(Zt){case"package":if(!at)throw ft(Zt);_t();break;case"import":if(!at)throw ft(Zt);wt();break;case"syntax":if(!at)throw ft(Zt);bt();break;case"option":Lt(yt,Zt),ot(";");break;default:if($t(yt,Zt)){at=!1;continue}throw ft(Zt)}return parse.filename=null,{package:lt,imports:ct,weakImports:ut,syntax:dt,root:c}}var common_1=common,commonRe=/\/|\./;function common(d,c){commonRe.test(d)||(d="google/protobuf/"+d+".proto",c={nested:{google:{nested:{protobuf:{nested:c}}}}}),common[d]=c}common("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var timeType;common("duration",{Duration:timeType={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}});common("timestamp",{Timestamp:timeType});common("empty",{Empty:{fields:{}}});common("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}});common("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}});common("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}});common.get=function d(c){return common[c]||null};var protobuf=src.exports=indexLightExports;protobuf.build="full";protobuf.tokenize=tokenize_1;protobuf.parse=parse_1;protobuf.common=common_1;protobuf.Root._configure(protobuf.Type,protobuf.parse,protobuf.common);var srcExports=src.exports,protobufjs=srcExports;async function fetchProto(d,c){d=d.startsWith("/")?d.substring(1):d,d="/pathfinder-app/"+d;const et=await protobufjs.util.fetch(d,{binary:!0});return c(et)}class Description{constructor(c,et){this.text=c,this.sections=et}static empty(){return this.of("")}static of(c){return new Description(c,{})}}class ItemDatabase{constructor(c){this.modules=c}summaries(){return uniqById(this.modules.flatMap(c=>c.summaries()),c=>c.name)}async load(c){for(let et of this.modules)if(et.item(c))return await et.load(c)}summary(c){for(let et of this.modules){const _e=et.item(c);if(_e)return _e}}options(c=void 0){const et=this.modules.flatMap(_e=>_e.options());return c?et.filter(_e=>c.includes(_e.id)):et}option(c){for(let et of this.modules){const _e=et.option(c);if(_e)return _e}}async optionDetails(c){for(let et of this.modules)if(et.option(c))return await et.optionDetails(c)}optionSet(c){for(let et of this.modules){const _e=et.optionSet(c);if(_e)return _e}}}class Database{constructor(c){this.modules=c}features(){return this.modules.flatMap(c=>c.features())}feature(c){for(let et of this.modules){const _e=et.feature(c);if(_e)return _e}}async description(c){for(let et of this.modules)if(et.feature(c))return(await et.load(c)).description;return Description.empty()}async load(c){for(let et of this.modules)if(et.feature(c))return await et.load(c)}name(c){var et;return c===void 0?"":((et=this.feature(c))==null?void 0:et.name)??""}query(c){return this.modules.flatMap(et=>et.query(c))}async itemDatabase(){return new ItemDatabase(await Promise.all(this.modules.map(c=>c.itemDatabase())))}}class SetFormulaEffect{constructor(c,et){cn(this,"children",[]);this.targetKey=c,this.formula=et}applyTo(c){try{c.set(this.targetKey,pe.parse(this.formula))}catch(et){throw console.error("Unable to parse: "+this.formula),et}}async resolve(){return this}}class SetNumberEffect{constructor(c,et){cn(this,"children",[]);this.targetKey=c,this.value=et}applyTo(c){c.set(this.targetKey,this.value)}async resolve(){return this}}class AddEffect{constructor(c,et){cn(this,"children",[]);this.targetKey=c,this.delta=et}applyTo(c){c.increment(this.targetKey,this.delta)}async resolve(){return this}}var minimal=indexMinimal;const $Reader=minimal.Reader,$Writer=minimal.Writer,$util=minimal.util,$root=minimal.roots["/Users/knichol/dev/personal/pathfinder-app/pathfinder-vite/../pathfinder-generator/src/main/proto"]||(minimal.roots["/Users/knichol/dev/personal/pathfinder-app/pathfinder-vite/../pathfinder-generator/src/main/proto"]={}),data=$root.data=(()=>{const d={};return d.ChoiceDbo=function(){function c(_e){if(_e)for(let tt=Object.keys(_e),nt=0;nt<tt.length;++nt)_e[tt[nt]]!=null&&(this[tt[nt]]=_e[tt[nt]])}c.prototype.choiceId="",c.prototype.label="",c.prototype.type="",c.prototype.repeating=!1,c.prototype.text=null,c.prototype.featureSelect=null;let et;return Object.defineProperty(c.prototype,"input",{get:$util.oneOfGetter(et=["text","featureSelect"]),set:$util.oneOfSetter(et)}),c.create=function(tt){return new c(tt)},c.encode=function(tt,nt){return nt||(nt=$Writer.create()),tt.choiceId!=null&&Object.hasOwnProperty.call(tt,"choiceId")&&nt.uint32(10).string(tt.choiceId),tt.label!=null&&Object.hasOwnProperty.call(tt,"label")&&nt.uint32(18).string(tt.label),tt.type!=null&&Object.hasOwnProperty.call(tt,"type")&&nt.uint32(26).string(tt.type),tt.repeating!=null&&Object.hasOwnProperty.call(tt,"repeating")&&nt.uint32(32).bool(tt.repeating),tt.text!=null&&Object.hasOwnProperty.call(tt,"text")&&$root.data.TextChoiceInputDbo.encode(tt.text,nt.uint32(802).fork()).ldelim(),tt.featureSelect!=null&&Object.hasOwnProperty.call(tt,"featureSelect")&&$root.data.FeatureSelectChoiceInputDbo.encode(tt.featureSelect,nt.uint32(810).fork()).ldelim(),nt},c.encodeDelimited=function(tt,nt){return this.encode(tt,nt).ldelim()},c.decode=function(tt,nt){tt instanceof $Reader||(tt=$Reader.create(tt));let rt=nt===void 0?tt.len:tt.pos+nt,it=new $root.data.ChoiceDbo;for(;tt.pos<rt;){let ot=tt.uint32();switch(ot>>>3){case 1:{it.choiceId=tt.string();break}case 2:{it.label=tt.string();break}case 3:{it.type=tt.string();break}case 4:{it.repeating=tt.bool();break}case 100:{it.text=$root.data.TextChoiceInputDbo.decode(tt,tt.uint32());break}case 101:{it.featureSelect=$root.data.FeatureSelectChoiceInputDbo.decode(tt,tt.uint32());break}default:tt.skipType(ot&7);break}}return it},c.decodeDelimited=function(tt){return tt instanceof $Reader||(tt=new $Reader(tt)),this.decode(tt,tt.uint32())},c.verify=function(tt){if(typeof tt!="object"||tt===null)return"object expected";let nt={};if(tt.choiceId!=null&&tt.hasOwnProperty("choiceId")&&!$util.isString(tt.choiceId))return"choiceId: string expected";if(tt.label!=null&&tt.hasOwnProperty("label")&&!$util.isString(tt.label))return"label: string expected";if(tt.type!=null&&tt.hasOwnProperty("type")&&!$util.isString(tt.type))return"type: string expected";if(tt.repeating!=null&&tt.hasOwnProperty("repeating")&&typeof tt.repeating!="boolean")return"repeating: boolean expected";if(tt.text!=null&&tt.hasOwnProperty("text")){nt.input=1;{let rt=$root.data.TextChoiceInputDbo.verify(tt.text);if(rt)return"text."+rt}}if(tt.featureSelect!=null&&tt.hasOwnProperty("featureSelect")){if(nt.input===1)return"input: multiple values";nt.input=1;{let rt=$root.data.FeatureSelectChoiceInputDbo.verify(tt.featureSelect);if(rt)return"featureSelect."+rt}}return null},c.fromObject=function(tt){if(tt instanceof $root.data.ChoiceDbo)return tt;let nt=new $root.data.ChoiceDbo;if(tt.choiceId!=null&&(nt.choiceId=String(tt.choiceId)),tt.label!=null&&(nt.label=String(tt.label)),tt.type!=null&&(nt.type=String(tt.type)),tt.repeating!=null&&(nt.repeating=!!tt.repeating),tt.text!=null){if(typeof tt.text!="object")throw TypeError(".data.ChoiceDbo.text: object expected");nt.text=$root.data.TextChoiceInputDbo.fromObject(tt.text)}if(tt.featureSelect!=null){if(typeof tt.featureSelect!="object")throw TypeError(".data.ChoiceDbo.featureSelect: object expected");nt.featureSelect=$root.data.FeatureSelectChoiceInputDbo.fromObject(tt.featureSelect)}return nt},c.toObject=function(tt,nt){nt||(nt={});let rt={};return nt.defaults&&(rt.choiceId="",rt.label="",rt.type="",rt.repeating=!1),tt.choiceId!=null&&tt.hasOwnProperty("choiceId")&&(rt.choiceId=tt.choiceId),tt.label!=null&&tt.hasOwnProperty("label")&&(rt.label=tt.label),tt.type!=null&&tt.hasOwnProperty("type")&&(rt.type=tt.type),tt.repeating!=null&&tt.hasOwnProperty("repeating")&&(rt.repeating=tt.repeating),tt.text!=null&&tt.hasOwnProperty("text")&&(rt.text=$root.data.TextChoiceInputDbo.toObject(tt.text,nt),nt.oneofs&&(rt.input="text")),tt.featureSelect!=null&&tt.hasOwnProperty("featureSelect")&&(rt.featureSelect=$root.data.FeatureSelectChoiceInputDbo.toObject(tt.featureSelect,nt),nt.oneofs&&(rt.input="featureSelect")),rt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(tt){return tt===void 0&&(tt="type.googleapis.com"),tt+"/data.ChoiceDbo"},c}(),d.TextChoiceInputDbo=function(){function c(et){if(et)for(let _e=Object.keys(et),tt=0;tt<_e.length;++tt)et[_e[tt]]!=null&&(this[_e[tt]]=et[_e[tt]])}return c.create=function(_e){return new c(_e)},c.encode=function(_e,tt){return tt||(tt=$Writer.create()),tt},c.encodeDelimited=function(_e,tt){return this.encode(_e,tt).ldelim()},c.decode=function(_e,tt){_e instanceof $Reader||(_e=$Reader.create(_e));let nt=tt===void 0?_e.len:_e.pos+tt,rt=new $root.data.TextChoiceInputDbo;for(;_e.pos<nt;){let it=_e.uint32();switch(it>>>3){default:_e.skipType(it&7);break}}return rt},c.decodeDelimited=function(_e){return _e instanceof $Reader||(_e=new $Reader(_e)),this.decode(_e,_e.uint32())},c.verify=function(_e){return typeof _e!="object"||_e===null?"object expected":null},c.fromObject=function(_e){return _e instanceof $root.data.TextChoiceInputDbo?_e:new $root.data.TextChoiceInputDbo},c.toObject=function(){return{}},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(_e){return _e===void 0&&(_e="type.googleapis.com"),_e+"/data.TextChoiceInputDbo"},c}(),d.FeatureSelectChoiceInputDbo=function(){function c(et){if(this.optionTags=[],this.featureIds=[],this.categories=[],et)for(let _e=Object.keys(et),tt=0;tt<_e.length;++tt)et[_e[tt]]!=null&&(this[_e[tt]]=et[_e[tt]])}return c.prototype.optionTags=$util.emptyArray,c.prototype.featureIds=$util.emptyArray,c.prototype.categories=$util.emptyArray,c.prototype.sortBy=0,c.create=function(_e){return new c(_e)},c.encode=function(_e,tt){if(tt||(tt=$Writer.create()),_e.optionTags!=null&&_e.optionTags.length)for(let nt=0;nt<_e.optionTags.length;++nt)tt.uint32(10).string(_e.optionTags[nt]);if(_e.featureIds!=null&&_e.featureIds.length)for(let nt=0;nt<_e.featureIds.length;++nt)tt.uint32(18).string(_e.featureIds[nt]);if(_e.categories!=null&&_e.categories.length)for(let nt=0;nt<_e.categories.length;++nt)$root.data.FeatureSelectChoiceCategoryDbo.encode(_e.categories[nt],tt.uint32(26).fork()).ldelim();return _e.sortBy!=null&&Object.hasOwnProperty.call(_e,"sortBy")&&tt.uint32(32).int32(_e.sortBy),tt},c.encodeDelimited=function(_e,tt){return this.encode(_e,tt).ldelim()},c.decode=function(_e,tt){_e instanceof $Reader||(_e=$Reader.create(_e));let nt=tt===void 0?_e.len:_e.pos+tt,rt=new $root.data.FeatureSelectChoiceInputDbo;for(;_e.pos<nt;){let it=_e.uint32();switch(it>>>3){case 1:{rt.optionTags&&rt.optionTags.length||(rt.optionTags=[]),rt.optionTags.push(_e.string());break}case 2:{rt.featureIds&&rt.featureIds.length||(rt.featureIds=[]),rt.featureIds.push(_e.string());break}case 3:{rt.categories&&rt.categories.length||(rt.categories=[]),rt.categories.push($root.data.FeatureSelectChoiceCategoryDbo.decode(_e,_e.uint32()));break}case 4:{rt.sortBy=_e.int32();break}default:_e.skipType(it&7);break}}return rt},c.decodeDelimited=function(_e){return _e instanceof $Reader||(_e=new $Reader(_e)),this.decode(_e,_e.uint32())},c.verify=function(_e){if(typeof _e!="object"||_e===null)return"object expected";if(_e.optionTags!=null&&_e.hasOwnProperty("optionTags")){if(!Array.isArray(_e.optionTags))return"optionTags: array expected";for(let tt=0;tt<_e.optionTags.length;++tt)if(!$util.isString(_e.optionTags[tt]))return"optionTags: string[] expected"}if(_e.featureIds!=null&&_e.hasOwnProperty("featureIds")){if(!Array.isArray(_e.featureIds))return"featureIds: array expected";for(let tt=0;tt<_e.featureIds.length;++tt)if(!$util.isString(_e.featureIds[tt]))return"featureIds: string[] expected"}if(_e.categories!=null&&_e.hasOwnProperty("categories")){if(!Array.isArray(_e.categories))return"categories: array expected";for(let tt=0;tt<_e.categories.length;++tt){let nt=$root.data.FeatureSelectChoiceCategoryDbo.verify(_e.categories[tt]);if(nt)return"categories."+nt}}if(_e.sortBy!=null&&_e.hasOwnProperty("sortBy"))switch(_e.sortBy){default:return"sortBy: enum value expected";case 0:case 1:break}return null},c.fromObject=function(_e){if(_e instanceof $root.data.FeatureSelectChoiceInputDbo)return _e;let tt=new $root.data.FeatureSelectChoiceInputDbo;if(_e.optionTags){if(!Array.isArray(_e.optionTags))throw TypeError(".data.FeatureSelectChoiceInputDbo.optionTags: array expected");tt.optionTags=[];for(let nt=0;nt<_e.optionTags.length;++nt)tt.optionTags[nt]=String(_e.optionTags[nt])}if(_e.featureIds){if(!Array.isArray(_e.featureIds))throw TypeError(".data.FeatureSelectChoiceInputDbo.featureIds: array expected");tt.featureIds=[];for(let nt=0;nt<_e.featureIds.length;++nt)tt.featureIds[nt]=String(_e.featureIds[nt])}if(_e.categories){if(!Array.isArray(_e.categories))throw TypeError(".data.FeatureSelectChoiceInputDbo.categories: array expected");tt.categories=[];for(let nt=0;nt<_e.categories.length;++nt){if(typeof _e.categories[nt]!="object")throw TypeError(".data.FeatureSelectChoiceInputDbo.categories: object expected");tt.categories[nt]=$root.data.FeatureSelectChoiceCategoryDbo.fromObject(_e.categories[nt])}}switch(_e.sortBy){default:if(typeof _e.sortBy=="number"){tt.sortBy=_e.sortBy;break}break;case"FEATURE_SELECT_CHOICE_SORTBY_NONE":case 0:tt.sortBy=0;break;case"FEATURE_SELECT_CHOICE_SORTBY_NAME":case 1:tt.sortBy=1;break}return tt},c.toObject=function(_e,tt){tt||(tt={});let nt={};if((tt.arrays||tt.defaults)&&(nt.optionTags=[],nt.featureIds=[],nt.categories=[]),tt.defaults&&(nt.sortBy=tt.enums===String?"FEATURE_SELECT_CHOICE_SORTBY_NONE":0),_e.optionTags&&_e.optionTags.length){nt.optionTags=[];for(let rt=0;rt<_e.optionTags.length;++rt)nt.optionTags[rt]=_e.optionTags[rt]}if(_e.featureIds&&_e.featureIds.length){nt.featureIds=[];for(let rt=0;rt<_e.featureIds.length;++rt)nt.featureIds[rt]=_e.featureIds[rt]}if(_e.categories&&_e.categories.length){nt.categories=[];for(let rt=0;rt<_e.categories.length;++rt)nt.categories[rt]=$root.data.FeatureSelectChoiceCategoryDbo.toObject(_e.categories[rt],tt)}return _e.sortBy!=null&&_e.hasOwnProperty("sortBy")&&(nt.sortBy=tt.enums===String?$root.data.FeatureSelectChoiceSortByDbo[_e.sortBy]===void 0?_e.sortBy:$root.data.FeatureSelectChoiceSortByDbo[_e.sortBy]:_e.sortBy),nt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(_e){return _e===void 0&&(_e="type.googleapis.com"),_e+"/data.FeatureSelectChoiceInputDbo"},c}(),d.FeatureSelectChoiceCategoryDbo=function(){function c(et){if(et)for(let _e=Object.keys(et),tt=0;tt<_e.length;++tt)et[_e[tt]]!=null&&(this[_e[tt]]=et[_e[tt]])}return c.prototype.label="",c.prototype.tag="",c.create=function(_e){return new c(_e)},c.encode=function(_e,tt){return tt||(tt=$Writer.create()),_e.label!=null&&Object.hasOwnProperty.call(_e,"label")&&tt.uint32(10).string(_e.label),_e.tag!=null&&Object.hasOwnProperty.call(_e,"tag")&&tt.uint32(18).string(_e.tag),tt},c.encodeDelimited=function(_e,tt){return this.encode(_e,tt).ldelim()},c.decode=function(_e,tt){_e instanceof $Reader||(_e=$Reader.create(_e));let nt=tt===void 0?_e.len:_e.pos+tt,rt=new $root.data.FeatureSelectChoiceCategoryDbo;for(;_e.pos<nt;){let it=_e.uint32();switch(it>>>3){case 1:{rt.label=_e.string();break}case 2:{rt.tag=_e.string();break}default:_e.skipType(it&7);break}}return rt},c.decodeDelimited=function(_e){return _e instanceof $Reader||(_e=new $Reader(_e)),this.decode(_e,_e.uint32())},c.verify=function(_e){return typeof _e!="object"||_e===null?"object expected":_e.label!=null&&_e.hasOwnProperty("label")&&!$util.isString(_e.label)?"label: string expected":_e.tag!=null&&_e.hasOwnProperty("tag")&&!$util.isString(_e.tag)?"tag: string expected":null},c.fromObject=function(_e){if(_e instanceof $root.data.FeatureSelectChoiceCategoryDbo)return _e;let tt=new $root.data.FeatureSelectChoiceCategoryDbo;return _e.label!=null&&(tt.label=String(_e.label)),_e.tag!=null&&(tt.tag=String(_e.tag)),tt},c.toObject=function(_e,tt){tt||(tt={});let nt={};return tt.defaults&&(nt.label="",nt.tag=""),_e.label!=null&&_e.hasOwnProperty("label")&&(nt.label=_e.label),_e.tag!=null&&_e.hasOwnProperty("tag")&&(nt.tag=_e.tag),nt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(_e){return _e===void 0&&(_e="type.googleapis.com"),_e+"/data.FeatureSelectChoiceCategoryDbo"},c}(),d.FeatureSelectChoiceSortByDbo=function(){const c={},et=Object.create(c);return et[c[0]="FEATURE_SELECT_CHOICE_SORTBY_NONE"]=0,et[c[1]="FEATURE_SELECT_CHOICE_SORTBY_NAME"]=1,et}(),d.StacksDbo=function(){function c(_e){if(_e)for(let tt=Object.keys(_e),nt=0;nt<tt.length;++nt)_e[tt[nt]]!=null&&(this[tt[nt]]=_e[tt[nt]])}c.prototype.fixedStack=null,c.prototype.repeatingStack=null;let et;return Object.defineProperty(c.prototype,"stackable",{get:$util.oneOfGetter(et=["fixedStack","repeatingStack"]),set:$util.oneOfSetter(et)}),c.create=function(tt){return new c(tt)},c.encode=function(tt,nt){return nt||(nt=$Writer.create()),tt.fixedStack!=null&&Object.hasOwnProperty.call(tt,"fixedStack")&&$root.data.FixedStackDbo.encode(tt.fixedStack,nt.uint32(10).fork()).ldelim(),tt.repeatingStack!=null&&Object.hasOwnProperty.call(tt,"repeatingStack")&&$root.data.StackDbo.encode(tt.repeatingStack,nt.uint32(18).fork()).ldelim(),nt},c.encodeDelimited=function(tt,nt){return this.encode(tt,nt).ldelim()},c.decode=function(tt,nt){tt instanceof $Reader||(tt=$Reader.create(tt));let rt=nt===void 0?tt.len:tt.pos+nt,it=new $root.data.StacksDbo;for(;tt.pos<rt;){let ot=tt.uint32();switch(ot>>>3){case 1:{it.fixedStack=$root.data.FixedStackDbo.decode(tt,tt.uint32());break}case 2:{it.repeatingStack=$root.data.StackDbo.decode(tt,tt.uint32());break}default:tt.skipType(ot&7);break}}return it},c.decodeDelimited=function(tt){return tt instanceof $Reader||(tt=new $Reader(tt)),this.decode(tt,tt.uint32())},c.verify=function(tt){if(typeof tt!="object"||tt===null)return"object expected";let nt={};if(tt.fixedStack!=null&&tt.hasOwnProperty("fixedStack")){nt.stackable=1;{let rt=$root.data.FixedStackDbo.verify(tt.fixedStack);if(rt)return"fixedStack."+rt}}if(tt.repeatingStack!=null&&tt.hasOwnProperty("repeatingStack")){if(nt.stackable===1)return"stackable: multiple values";nt.stackable=1;{let rt=$root.data.StackDbo.verify(tt.repeatingStack);if(rt)return"repeatingStack."+rt}}return null},c.fromObject=function(tt){if(tt instanceof $root.data.StacksDbo)return tt;let nt=new $root.data.StacksDbo;if(tt.fixedStack!=null){if(typeof tt.fixedStack!="object")throw TypeError(".data.StacksDbo.fixedStack: object expected");nt.fixedStack=$root.data.FixedStackDbo.fromObject(tt.fixedStack)}if(tt.repeatingStack!=null){if(typeof tt.repeatingStack!="object")throw TypeError(".data.StacksDbo.repeatingStack: object expected");nt.repeatingStack=$root.data.StackDbo.fromObject(tt.repeatingStack)}return nt},c.toObject=function(tt,nt){nt||(nt={});let rt={};return tt.fixedStack!=null&&tt.hasOwnProperty("fixedStack")&&(rt.fixedStack=$root.data.FixedStackDbo.toObject(tt.fixedStack,nt),nt.oneofs&&(rt.stackable="fixedStack")),tt.repeatingStack!=null&&tt.hasOwnProperty("repeatingStack")&&(rt.repeatingStack=$root.data.StackDbo.toObject(tt.repeatingStack,nt),nt.oneofs&&(rt.stackable="repeatingStack")),rt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(tt){return tt===void 0&&(tt="type.googleapis.com"),tt+"/data.StacksDbo"},c}(),d.FixedStackDbo=function(){function c(et){if(this.stacks=[],et)for(let _e=Object.keys(et),tt=0;tt<_e.length;++tt)et[_e[tt]]!=null&&(this[_e[tt]]=et[_e[tt]])}return c.prototype.stacks=$util.emptyArray,c.create=function(_e){return new c(_e)},c.encode=function(_e,tt){if(tt||(tt=$Writer.create()),_e.stacks!=null&&_e.stacks.length)for(let nt=0;nt<_e.stacks.length;++nt)$root.data.StackDbo.encode(_e.stacks[nt],tt.uint32(10).fork()).ldelim();return tt},c.encodeDelimited=function(_e,tt){return this.encode(_e,tt).ldelim()},c.decode=function(_e,tt){_e instanceof $Reader||(_e=$Reader.create(_e));let nt=tt===void 0?_e.len:_e.pos+tt,rt=new $root.data.FixedStackDbo;for(;_e.pos<nt;){let it=_e.uint32();switch(it>>>3){case 1:{rt.stacks&&rt.stacks.length||(rt.stacks=[]),rt.stacks.push($root.data.StackDbo.decode(_e,_e.uint32()));break}default:_e.skipType(it&7);break}}return rt},c.decodeDelimited=function(_e){return _e instanceof $Reader||(_e=new $Reader(_e)),this.decode(_e,_e.uint32())},c.verify=function(_e){if(typeof _e!="object"||_e===null)return"object expected";if(_e.stacks!=null&&_e.hasOwnProperty("stacks")){if(!Array.isArray(_e.stacks))return"stacks: array expected";for(let tt=0;tt<_e.stacks.length;++tt){let nt=$root.data.StackDbo.verify(_e.stacks[tt]);if(nt)return"stacks."+nt}}return null},c.fromObject=function(_e){if(_e instanceof $root.data.FixedStackDbo)return _e;let tt=new $root.data.FixedStackDbo;if(_e.stacks){if(!Array.isArray(_e.stacks))throw TypeError(".data.FixedStackDbo.stacks: array expected");tt.stacks=[];for(let nt=0;nt<_e.stacks.length;++nt){if(typeof _e.stacks[nt]!="object")throw TypeError(".data.FixedStackDbo.stacks: object expected");tt.stacks[nt]=$root.data.StackDbo.fromObject(_e.stacks[nt])}}return tt},c.toObject=function(_e,tt){tt||(tt={});let nt={};if((tt.arrays||tt.defaults)&&(nt.stacks=[]),_e.stacks&&_e.stacks.length){nt.stacks=[];for(let rt=0;rt<_e.stacks.length;++rt)nt.stacks[rt]=$root.data.StackDbo.toObject(_e.stacks[rt],tt)}return nt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(_e){return _e===void 0&&(_e="type.googleapis.com"),_e+"/data.FixedStackDbo"},c}(),d.StackDbo=function(){function c(et){if(this.effects=[],this.links=[],this.choices=[],this.featureModifications=[],et)for(let _e=Object.keys(et),tt=0;tt<_e.length;++tt)et[_e[tt]]!=null&&(this[_e[tt]]=et[_e[tt]])}return c.prototype.effects=$util.emptyArray,c.prototype.links=$util.emptyArray,c.prototype.choices=$util.emptyArray,c.prototype.featureModifications=$util.emptyArray,c.create=function(_e){return new c(_e)},c.encode=function(_e,tt){if(tt||(tt=$Writer.create()),_e.effects!=null&&_e.effects.length)for(let nt=0;nt<_e.effects.length;++nt)$root.data.EffectDbo.encode(_e.effects[nt],tt.uint32(810).fork()).ldelim();if(_e.links!=null&&_e.links.length)for(let nt=0;nt<_e.links.length;++nt)tt.uint32(818).string(_e.links[nt]);if(_e.choices!=null&&_e.choices.length)for(let nt=0;nt<_e.choices.length;++nt)$root.data.ChoiceDbo.encode(_e.choices[nt],tt.uint32(826).fork()).ldelim();if(_e.featureModifications!=null&&_e.featureModifications.length)for(let nt=0;nt<_e.featureModifications.length;++nt)$root.data.FeatureModificationDbo.encode(_e.featureModifications[nt],tt.uint32(834).fork()).ldelim();return tt},c.encodeDelimited=function(_e,tt){return this.encode(_e,tt).ldelim()},c.decode=function(_e,tt){_e instanceof $Reader||(_e=$Reader.create(_e));let nt=tt===void 0?_e.len:_e.pos+tt,rt=new $root.data.StackDbo;for(;_e.pos<nt;){let it=_e.uint32();switch(it>>>3){case 101:{rt.effects&&rt.effects.length||(rt.effects=[]),rt.effects.push($root.data.EffectDbo.decode(_e,_e.uint32()));break}case 102:{rt.links&&rt.links.length||(rt.links=[]),rt.links.push(_e.string());break}case 103:{rt.choices&&rt.choices.length||(rt.choices=[]),rt.choices.push($root.data.ChoiceDbo.decode(_e,_e.uint32()));break}case 104:{rt.featureModifications&&rt.featureModifications.length||(rt.featureModifications=[]),rt.featureModifications.push($root.data.FeatureModificationDbo.decode(_e,_e.uint32()));break}default:_e.skipType(it&7);break}}return rt},c.decodeDelimited=function(_e){return _e instanceof $Reader||(_e=new $Reader(_e)),this.decode(_e,_e.uint32())},c.verify=function(_e){if(typeof _e!="object"||_e===null)return"object expected";if(_e.effects!=null&&_e.hasOwnProperty("effects")){if(!Array.isArray(_e.effects))return"effects: array expected";for(let tt=0;tt<_e.effects.length;++tt){let nt=$root.data.EffectDbo.verify(_e.effects[tt]);if(nt)return"effects."+nt}}if(_e.links!=null&&_e.hasOwnProperty("links")){if(!Array.isArray(_e.links))return"links: array expected";for(let tt=0;tt<_e.links.length;++tt)if(!$util.isString(_e.links[tt]))return"links: string[] expected"}if(_e.choices!=null&&_e.hasOwnProperty("choices")){if(!Array.isArray(_e.choices))return"choices: array expected";for(let tt=0;tt<_e.choices.length;++tt){let nt=$root.data.ChoiceDbo.verify(_e.choices[tt]);if(nt)return"choices."+nt}}if(_e.featureModifications!=null&&_e.hasOwnProperty("featureModifications")){if(!Array.isArray(_e.featureModifications))return"featureModifications: array expected";for(let tt=0;tt<_e.featureModifications.length;++tt){let nt=$root.data.FeatureModificationDbo.verify(_e.featureModifications[tt]);if(nt)return"featureModifications."+nt}}return null},c.fromObject=function(_e){if(_e instanceof $root.data.StackDbo)return _e;let tt=new $root.data.StackDbo;if(_e.effects){if(!Array.isArray(_e.effects))throw TypeError(".data.StackDbo.effects: array expected");tt.effects=[];for(let nt=0;nt<_e.effects.length;++nt){if(typeof _e.effects[nt]!="object")throw TypeError(".data.StackDbo.effects: object expected");tt.effects[nt]=$root.data.EffectDbo.fromObject(_e.effects[nt])}}if(_e.links){if(!Array.isArray(_e.links))throw TypeError(".data.StackDbo.links: array expected");tt.links=[];for(let nt=0;nt<_e.links.length;++nt)tt.links[nt]=String(_e.links[nt])}if(_e.choices){if(!Array.isArray(_e.choices))throw TypeError(".data.StackDbo.choices: array expected");tt.choices=[];for(let nt=0;nt<_e.choices.length;++nt){if(typeof _e.choices[nt]!="object")throw TypeError(".data.StackDbo.choices: object expected");tt.choices[nt]=$root.data.ChoiceDbo.fromObject(_e.choices[nt])}}if(_e.featureModifications){if(!Array.isArray(_e.featureModifications))throw TypeError(".data.StackDbo.featureModifications: array expected");tt.featureModifications=[];for(let nt=0;nt<_e.featureModifications.length;++nt){if(typeof _e.featureModifications[nt]!="object")throw TypeError(".data.StackDbo.featureModifications: object expected");tt.featureModifications[nt]=$root.data.FeatureModificationDbo.fromObject(_e.featureModifications[nt])}}return tt},c.toObject=function(_e,tt){tt||(tt={});let nt={};if((tt.arrays||tt.defaults)&&(nt.effects=[],nt.links=[],nt.choices=[],nt.featureModifications=[]),_e.effects&&_e.effects.length){nt.effects=[];for(let rt=0;rt<_e.effects.length;++rt)nt.effects[rt]=$root.data.EffectDbo.toObject(_e.effects[rt],tt)}if(_e.links&&_e.links.length){nt.links=[];for(let rt=0;rt<_e.links.length;++rt)nt.links[rt]=_e.links[rt]}if(_e.choices&&_e.choices.length){nt.choices=[];for(let rt=0;rt<_e.choices.length;++rt)nt.choices[rt]=$root.data.ChoiceDbo.toObject(_e.choices[rt],tt)}if(_e.featureModifications&&_e.featureModifications.length){nt.featureModifications=[];for(let rt=0;rt<_e.featureModifications.length;++rt)nt.featureModifications[rt]=$root.data.FeatureModificationDbo.toObject(_e.featureModifications[rt],tt)}return nt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(_e){return _e===void 0&&(_e="type.googleapis.com"),_e+"/data.StackDbo"},c}(),d.ConditionalStackDbo=function(){function c(et){if(this.effects=[],this.links=[],this.choices=[],this.featureModifications=[],et)for(let _e=Object.keys(et),tt=0;tt<_e.length;++tt)et[_e[tt]]!=null&&(this[_e[tt]]=et[_e[tt]])}return c.prototype.conditionFormula="",c.prototype.effects=$util.emptyArray,c.prototype.links=$util.emptyArray,c.prototype.choices=$util.emptyArray,c.prototype.featureModifications=$util.emptyArray,c.create=function(_e){return new c(_e)},c.encode=function(_e,tt){if(tt||(tt=$Writer.create()),_e.conditionFormula!=null&&Object.hasOwnProperty.call(_e,"conditionFormula")&&tt.uint32(10).string(_e.conditionFormula),_e.effects!=null&&_e.effects.length)for(let nt=0;nt<_e.effects.length;++nt)$root.data.EffectDbo.encode(_e.effects[nt],tt.uint32(810).fork()).ldelim();if(_e.links!=null&&_e.links.length)for(let nt=0;nt<_e.links.length;++nt)tt.uint32(818).string(_e.links[nt]);if(_e.choices!=null&&_e.choices.length)for(let nt=0;nt<_e.choices.length;++nt)$root.data.ChoiceDbo.encode(_e.choices[nt],tt.uint32(826).fork()).ldelim();if(_e.featureModifications!=null&&_e.featureModifications.length)for(let nt=0;nt<_e.featureModifications.length;++nt)$root.data.FeatureModificationDbo.encode(_e.featureModifications[nt],tt.uint32(834).fork()).ldelim();return tt},c.encodeDelimited=function(_e,tt){return this.encode(_e,tt).ldelim()},c.decode=function(_e,tt){_e instanceof $Reader||(_e=$Reader.create(_e));let nt=tt===void 0?_e.len:_e.pos+tt,rt=new $root.data.ConditionalStackDbo;for(;_e.pos<nt;){let it=_e.uint32();switch(it>>>3){case 1:{rt.conditionFormula=_e.string();break}case 101:{rt.effects&&rt.effects.length||(rt.effects=[]),rt.effects.push($root.data.EffectDbo.decode(_e,_e.uint32()));break}case 102:{rt.links&&rt.links.length||(rt.links=[]),rt.links.push(_e.string());break}case 103:{rt.choices&&rt.choices.length||(rt.choices=[]),rt.choices.push($root.data.ChoiceDbo.decode(_e,_e.uint32()));break}case 104:{rt.featureModifications&&rt.featureModifications.length||(rt.featureModifications=[]),rt.featureModifications.push($root.data.FeatureModificationDbo.decode(_e,_e.uint32()));break}default:_e.skipType(it&7);break}}return rt},c.decodeDelimited=function(_e){return _e instanceof $Reader||(_e=new $Reader(_e)),this.decode(_e,_e.uint32())},c.verify=function(_e){if(typeof _e!="object"||_e===null)return"object expected";if(_e.conditionFormula!=null&&_e.hasOwnProperty("conditionFormula")&&!$util.isString(_e.conditionFormula))return"conditionFormula: string expected";if(_e.effects!=null&&_e.hasOwnProperty("effects")){if(!Array.isArray(_e.effects))return"effects: array expected";for(let tt=0;tt<_e.effects.length;++tt){let nt=$root.data.EffectDbo.verify(_e.effects[tt]);if(nt)return"effects."+nt}}if(_e.links!=null&&_e.hasOwnProperty("links")){if(!Array.isArray(_e.links))return"links: array expected";for(let tt=0;tt<_e.links.length;++tt)if(!$util.isString(_e.links[tt]))return"links: string[] expected"}if(_e.choices!=null&&_e.hasOwnProperty("choices")){if(!Array.isArray(_e.choices))return"choices: array expected";for(let tt=0;tt<_e.choices.length;++tt){let nt=$root.data.ChoiceDbo.verify(_e.choices[tt]);if(nt)return"choices."+nt}}if(_e.featureModifications!=null&&_e.hasOwnProperty("featureModifications")){if(!Array.isArray(_e.featureModifications))return"featureModifications: array expected";for(let tt=0;tt<_e.featureModifications.length;++tt){let nt=$root.data.FeatureModificationDbo.verify(_e.featureModifications[tt]);if(nt)return"featureModifications."+nt}}return null},c.fromObject=function(_e){if(_e instanceof $root.data.ConditionalStackDbo)return _e;let tt=new $root.data.ConditionalStackDbo;if(_e.conditionFormula!=null&&(tt.conditionFormula=String(_e.conditionFormula)),_e.effects){if(!Array.isArray(_e.effects))throw TypeError(".data.ConditionalStackDbo.effects: array expected");tt.effects=[];for(let nt=0;nt<_e.effects.length;++nt){if(typeof _e.effects[nt]!="object")throw TypeError(".data.ConditionalStackDbo.effects: object expected");tt.effects[nt]=$root.data.EffectDbo.fromObject(_e.effects[nt])}}if(_e.links){if(!Array.isArray(_e.links))throw TypeError(".data.ConditionalStackDbo.links: array expected");tt.links=[];for(let nt=0;nt<_e.links.length;++nt)tt.links[nt]=String(_e.links[nt])}if(_e.choices){if(!Array.isArray(_e.choices))throw TypeError(".data.ConditionalStackDbo.choices: array expected");tt.choices=[];for(let nt=0;nt<_e.choices.length;++nt){if(typeof _e.choices[nt]!="object")throw TypeError(".data.ConditionalStackDbo.choices: object expected");tt.choices[nt]=$root.data.ChoiceDbo.fromObject(_e.choices[nt])}}if(_e.featureModifications){if(!Array.isArray(_e.featureModifications))throw TypeError(".data.ConditionalStackDbo.featureModifications: array expected");tt.featureModifications=[];for(let nt=0;nt<_e.featureModifications.length;++nt){if(typeof _e.featureModifications[nt]!="object")throw TypeError(".data.ConditionalStackDbo.featureModifications: object expected");tt.featureModifications[nt]=$root.data.FeatureModificationDbo.fromObject(_e.featureModifications[nt])}}return tt},c.toObject=function(_e,tt){tt||(tt={});let nt={};if((tt.arrays||tt.defaults)&&(nt.effects=[],nt.links=[],nt.choices=[],nt.featureModifications=[]),tt.defaults&&(nt.conditionFormula=""),_e.conditionFormula!=null&&_e.hasOwnProperty("conditionFormula")&&(nt.conditionFormula=_e.conditionFormula),_e.effects&&_e.effects.length){nt.effects=[];for(let rt=0;rt<_e.effects.length;++rt)nt.effects[rt]=$root.data.EffectDbo.toObject(_e.effects[rt],tt)}if(_e.links&&_e.links.length){nt.links=[];for(let rt=0;rt<_e.links.length;++rt)nt.links[rt]=_e.links[rt]}if(_e.choices&&_e.choices.length){nt.choices=[];for(let rt=0;rt<_e.choices.length;++rt)nt.choices[rt]=$root.data.ChoiceDbo.toObject(_e.choices[rt],tt)}if(_e.featureModifications&&_e.featureModifications.length){nt.featureModifications=[];for(let rt=0;rt<_e.featureModifications.length;++rt)nt.featureModifications[rt]=$root.data.FeatureModificationDbo.toObject(_e.featureModifications[rt],tt)}return nt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(_e){return _e===void 0&&(_e="type.googleapis.com"),_e+"/data.ConditionalStackDbo"},c}(),d.EffectDbo=function(){function c(_e){if(_e)for(let tt=Object.keys(_e),nt=0;nt<tt.length;++nt)_e[tt[nt]]!=null&&(this[tt[nt]]=_e[tt[nt]])}c.prototype.conditionFormula=null,c.prototype.setAction=null,c.prototype.addAction=null;let et;return Object.defineProperty(c.prototype,"_conditionFormula",{get:$util.oneOfGetter(et=["conditionFormula"]),set:$util.oneOfSetter(et)}),Object.defineProperty(c.prototype,"action",{get:$util.oneOfGetter(et=["setAction","addAction"]),set:$util.oneOfSetter(et)}),c.create=function(tt){return new c(tt)},c.encode=function(tt,nt){return nt||(nt=$Writer.create()),tt.conditionFormula!=null&&Object.hasOwnProperty.call(tt,"conditionFormula")&&nt.uint32(10).string(tt.conditionFormula),tt.setAction!=null&&Object.hasOwnProperty.call(tt,"setAction")&&$root.data.EffectDbo.SetActionDbo.encode(tt.setAction,nt.uint32(18).fork()).ldelim(),tt.addAction!=null&&Object.hasOwnProperty.call(tt,"addAction")&&$root.data.EffectDbo.AddActionDbo.encode(tt.addAction,nt.uint32(26).fork()).ldelim(),nt},c.encodeDelimited=function(tt,nt){return this.encode(tt,nt).ldelim()},c.decode=function(tt,nt){tt instanceof $Reader||(tt=$Reader.create(tt));let rt=nt===void 0?tt.len:tt.pos+nt,it=new $root.data.EffectDbo;for(;tt.pos<rt;){let ot=tt.uint32();switch(ot>>>3){case 1:{it.conditionFormula=tt.string();break}case 2:{it.setAction=$root.data.EffectDbo.SetActionDbo.decode(tt,tt.uint32());break}case 3:{it.addAction=$root.data.EffectDbo.AddActionDbo.decode(tt,tt.uint32());break}default:tt.skipType(ot&7);break}}return it},c.decodeDelimited=function(tt){return tt instanceof $Reader||(tt=new $Reader(tt)),this.decode(tt,tt.uint32())},c.verify=function(tt){if(typeof tt!="object"||tt===null)return"object expected";let nt={};if(tt.conditionFormula!=null&&tt.hasOwnProperty("conditionFormula")&&(nt._conditionFormula=1,!$util.isString(tt.conditionFormula)))return"conditionFormula: string expected";if(tt.setAction!=null&&tt.hasOwnProperty("setAction")){nt.action=1;{let rt=$root.data.EffectDbo.SetActionDbo.verify(tt.setAction);if(rt)return"setAction."+rt}}if(tt.addAction!=null&&tt.hasOwnProperty("addAction")){if(nt.action===1)return"action: multiple values";nt.action=1;{let rt=$root.data.EffectDbo.AddActionDbo.verify(tt.addAction);if(rt)return"addAction."+rt}}return null},c.fromObject=function(tt){if(tt instanceof $root.data.EffectDbo)return tt;let nt=new $root.data.EffectDbo;if(tt.conditionFormula!=null&&(nt.conditionFormula=String(tt.conditionFormula)),tt.setAction!=null){if(typeof tt.setAction!="object")throw TypeError(".data.EffectDbo.setAction: object expected");nt.setAction=$root.data.EffectDbo.SetActionDbo.fromObject(tt.setAction)}if(tt.addAction!=null){if(typeof tt.addAction!="object")throw TypeError(".data.EffectDbo.addAction: object expected");nt.addAction=$root.data.EffectDbo.AddActionDbo.fromObject(tt.addAction)}return nt},c.toObject=function(tt,nt){nt||(nt={});let rt={};return tt.conditionFormula!=null&&tt.hasOwnProperty("conditionFormula")&&(rt.conditionFormula=tt.conditionFormula,nt.oneofs&&(rt._conditionFormula="conditionFormula")),tt.setAction!=null&&tt.hasOwnProperty("setAction")&&(rt.setAction=$root.data.EffectDbo.SetActionDbo.toObject(tt.setAction,nt),nt.oneofs&&(rt.action="setAction")),tt.addAction!=null&&tt.hasOwnProperty("addAction")&&(rt.addAction=$root.data.EffectDbo.AddActionDbo.toObject(tt.addAction,nt),nt.oneofs&&(rt.action="addAction")),rt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(tt){return tt===void 0&&(tt="type.googleapis.com"),tt+"/data.EffectDbo"},c.SetActionDbo=function(){function _e(nt){if(nt)for(let rt=Object.keys(nt),it=0;it<rt.length;++it)nt[rt[it]]!=null&&(this[rt[it]]=nt[rt[it]])}_e.prototype.targetKey="",_e.prototype.formula=null,_e.prototype.numberValue=null;let tt;return Object.defineProperty(_e.prototype,"value",{get:$util.oneOfGetter(tt=["formula","numberValue"]),set:$util.oneOfSetter(tt)}),_e.create=function(rt){return new _e(rt)},_e.encode=function(rt,it){return it||(it=$Writer.create()),rt.targetKey!=null&&Object.hasOwnProperty.call(rt,"targetKey")&&it.uint32(10).string(rt.targetKey),rt.formula!=null&&Object.hasOwnProperty.call(rt,"formula")&&it.uint32(18).string(rt.formula),rt.numberValue!=null&&Object.hasOwnProperty.call(rt,"numberValue")&&it.uint32(24).int32(rt.numberValue),it},_e.encodeDelimited=function(rt,it){return this.encode(rt,it).ldelim()},_e.decode=function(rt,it){rt instanceof $Reader||(rt=$Reader.create(rt));let ot=it===void 0?rt.len:rt.pos+it,st=new $root.data.EffectDbo.SetActionDbo;for(;rt.pos<ot;){let at=rt.uint32();switch(at>>>3){case 1:{st.targetKey=rt.string();break}case 2:{st.formula=rt.string();break}case 3:{st.numberValue=rt.int32();break}default:rt.skipType(at&7);break}}return st},_e.decodeDelimited=function(rt){return rt instanceof $Reader||(rt=new $Reader(rt)),this.decode(rt,rt.uint32())},_e.verify=function(rt){if(typeof rt!="object"||rt===null)return"object expected";let it={};if(rt.targetKey!=null&&rt.hasOwnProperty("targetKey")&&!$util.isString(rt.targetKey))return"targetKey: string expected";if(rt.formula!=null&&rt.hasOwnProperty("formula")&&(it.value=1,!$util.isString(rt.formula)))return"formula: string expected";if(rt.numberValue!=null&&rt.hasOwnProperty("numberValue")){if(it.value===1)return"value: multiple values";if(it.value=1,!$util.isInteger(rt.numberValue))return"numberValue: integer expected"}return null},_e.fromObject=function(rt){if(rt instanceof $root.data.EffectDbo.SetActionDbo)return rt;let it=new $root.data.EffectDbo.SetActionDbo;return rt.targetKey!=null&&(it.targetKey=String(rt.targetKey)),rt.formula!=null&&(it.formula=String(rt.formula)),rt.numberValue!=null&&(it.numberValue=rt.numberValue|0),it},_e.toObject=function(rt,it){it||(it={});let ot={};return it.defaults&&(ot.targetKey=""),rt.targetKey!=null&&rt.hasOwnProperty("targetKey")&&(ot.targetKey=rt.targetKey),rt.formula!=null&&rt.hasOwnProperty("formula")&&(ot.formula=rt.formula,it.oneofs&&(ot.value="formula")),rt.numberValue!=null&&rt.hasOwnProperty("numberValue")&&(ot.numberValue=rt.numberValue,it.oneofs&&(ot.value="numberValue")),ot},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(rt){return rt===void 0&&(rt="type.googleapis.com"),rt+"/data.EffectDbo.SetActionDbo"},_e}(),c.AddActionDbo=function(){function _e(tt){if(tt)for(let nt=Object.keys(tt),rt=0;rt<nt.length;++rt)tt[nt[rt]]!=null&&(this[nt[rt]]=tt[nt[rt]])}return _e.prototype.targetKey="",_e.prototype.numberDelta=0,_e.create=function(nt){return new _e(nt)},_e.encode=function(nt,rt){return rt||(rt=$Writer.create()),nt.targetKey!=null&&Object.hasOwnProperty.call(nt,"targetKey")&&rt.uint32(10).string(nt.targetKey),nt.numberDelta!=null&&Object.hasOwnProperty.call(nt,"numberDelta")&&rt.uint32(16).int32(nt.numberDelta),rt},_e.encodeDelimited=function(nt,rt){return this.encode(nt,rt).ldelim()},_e.decode=function(nt,rt){nt instanceof $Reader||(nt=$Reader.create(nt));let it=rt===void 0?nt.len:nt.pos+rt,ot=new $root.data.EffectDbo.AddActionDbo;for(;nt.pos<it;){let st=nt.uint32();switch(st>>>3){case 1:{ot.targetKey=nt.string();break}case 2:{ot.numberDelta=nt.int32();break}default:nt.skipType(st&7);break}}return ot},_e.decodeDelimited=function(nt){return nt instanceof $Reader||(nt=new $Reader(nt)),this.decode(nt,nt.uint32())},_e.verify=function(nt){return typeof nt!="object"||nt===null?"object expected":nt.targetKey!=null&&nt.hasOwnProperty("targetKey")&&!$util.isString(nt.targetKey)?"targetKey: string expected":nt.numberDelta!=null&&nt.hasOwnProperty("numberDelta")&&!$util.isInteger(nt.numberDelta)?"numberDelta: integer expected":null},_e.fromObject=function(nt){if(nt instanceof $root.data.EffectDbo.AddActionDbo)return nt;let rt=new $root.data.EffectDbo.AddActionDbo;return nt.targetKey!=null&&(rt.targetKey=String(nt.targetKey)),nt.numberDelta!=null&&(rt.numberDelta=nt.numberDelta|0),rt},_e.toObject=function(nt,rt){rt||(rt={});let it={};return rt.defaults&&(it.targetKey="",it.numberDelta=0),nt.targetKey!=null&&nt.hasOwnProperty("targetKey")&&(it.targetKey=nt.targetKey),nt.numberDelta!=null&&nt.hasOwnProperty("numberDelta")&&(it.numberDelta=nt.numberDelta),it},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/data.EffectDbo.AddActionDbo"},_e}(),c}(),d.FeatureModificationDbo=function(){function c(et){if(this.stackModifications=[],et)for(let _e=Object.keys(et),tt=0;tt<_e.length;++tt)et[_e[tt]]!=null&&(this[_e[tt]]=et[_e[tt]])}return c.prototype.targetFeatureId="",c.prototype.stackModifications=$util.emptyArray,c.create=function(_e){return new c(_e)},c.encode=function(_e,tt){if(tt||(tt=$Writer.create()),_e.targetFeatureId!=null&&Object.hasOwnProperty.call(_e,"targetFeatureId")&&tt.uint32(10).string(_e.targetFeatureId),_e.stackModifications!=null&&_e.stackModifications.length)for(let nt=0;nt<_e.stackModifications.length;++nt)$root.data.StackModificationDbo.encode(_e.stackModifications[nt],tt.uint32(18).fork()).ldelim();return tt},c.encodeDelimited=function(_e,tt){return this.encode(_e,tt).ldelim()},c.decode=function(_e,tt){_e instanceof $Reader||(_e=$Reader.create(_e));let nt=tt===void 0?_e.len:_e.pos+tt,rt=new $root.data.FeatureModificationDbo;for(;_e.pos<nt;){let it=_e.uint32();switch(it>>>3){case 1:{rt.targetFeatureId=_e.string();break}case 2:{rt.stackModifications&&rt.stackModifications.length||(rt.stackModifications=[]),rt.stackModifications.push($root.data.StackModificationDbo.decode(_e,_e.uint32()));break}default:_e.skipType(it&7);break}}return rt},c.decodeDelimited=function(_e){return _e instanceof $Reader||(_e=new $Reader(_e)),this.decode(_e,_e.uint32())},c.verify=function(_e){if(typeof _e!="object"||_e===null)return"object expected";if(_e.targetFeatureId!=null&&_e.hasOwnProperty("targetFeatureId")&&!$util.isString(_e.targetFeatureId))return"targetFeatureId: string expected";if(_e.stackModifications!=null&&_e.hasOwnProperty("stackModifications")){if(!Array.isArray(_e.stackModifications))return"stackModifications: array expected";for(let tt=0;tt<_e.stackModifications.length;++tt){let nt=$root.data.StackModificationDbo.verify(_e.stackModifications[tt]);if(nt)return"stackModifications."+nt}}return null},c.fromObject=function(_e){if(_e instanceof $root.data.FeatureModificationDbo)return _e;let tt=new $root.data.FeatureModificationDbo;if(_e.targetFeatureId!=null&&(tt.targetFeatureId=String(_e.targetFeatureId)),_e.stackModifications){if(!Array.isArray(_e.stackModifications))throw TypeError(".data.FeatureModificationDbo.stackModifications: array expected");tt.stackModifications=[];for(let nt=0;nt<_e.stackModifications.length;++nt){if(typeof _e.stackModifications[nt]!="object")throw TypeError(".data.FeatureModificationDbo.stackModifications: object expected");tt.stackModifications[nt]=$root.data.StackModificationDbo.fromObject(_e.stackModifications[nt])}}return tt},c.toObject=function(_e,tt){tt||(tt={});let nt={};if((tt.arrays||tt.defaults)&&(nt.stackModifications=[]),tt.defaults&&(nt.targetFeatureId=""),_e.targetFeatureId!=null&&_e.hasOwnProperty("targetFeatureId")&&(nt.targetFeatureId=_e.targetFeatureId),_e.stackModifications&&_e.stackModifications.length){nt.stackModifications=[];for(let rt=0;rt<_e.stackModifications.length;++rt)nt.stackModifications[rt]=$root.data.StackModificationDbo.toObject(_e.stackModifications[rt],tt)}return nt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(_e){return _e===void 0&&(_e="type.googleapis.com"),_e+"/data.FeatureModificationDbo"},c}(),d.StackModificationDbo=function(){function c(et){if(this.linksToAdd=[],this.linksToRemove=[],et)for(let _e=Object.keys(et),tt=0;tt<_e.length;++tt)et[_e[tt]]!=null&&(this[_e[tt]]=et[_e[tt]])}return c.prototype.targetStackCount=0,c.prototype.linksToAdd=$util.emptyArray,c.prototype.linksToRemove=$util.emptyArray,c.create=function(_e){return new c(_e)},c.encode=function(_e,tt){if(tt||(tt=$Writer.create()),_e.targetStackCount!=null&&Object.hasOwnProperty.call(_e,"targetStackCount")&&tt.uint32(8).int32(_e.targetStackCount),_e.linksToAdd!=null&&_e.linksToAdd.length)for(let nt=0;nt<_e.linksToAdd.length;++nt)tt.uint32(18).string(_e.linksToAdd[nt]);if(_e.linksToRemove!=null&&_e.linksToRemove.length)for(let nt=0;nt<_e.linksToRemove.length;++nt)tt.uint32(26).string(_e.linksToRemove[nt]);return tt},c.encodeDelimited=function(_e,tt){return this.encode(_e,tt).ldelim()},c.decode=function(_e,tt){_e instanceof $Reader||(_e=$Reader.create(_e));let nt=tt===void 0?_e.len:_e.pos+tt,rt=new $root.data.StackModificationDbo;for(;_e.pos<nt;){let it=_e.uint32();switch(it>>>3){case 1:{rt.targetStackCount=_e.int32();break}case 2:{rt.linksToAdd&&rt.linksToAdd.length||(rt.linksToAdd=[]),rt.linksToAdd.push(_e.string());break}case 3:{rt.linksToRemove&&rt.linksToRemove.length||(rt.linksToRemove=[]),rt.linksToRemove.push(_e.string());break}default:_e.skipType(it&7);break}}return rt},c.decodeDelimited=function(_e){return _e instanceof $Reader||(_e=new $Reader(_e)),this.decode(_e,_e.uint32())},c.verify=function(_e){if(typeof _e!="object"||_e===null)return"object expected";if(_e.targetStackCount!=null&&_e.hasOwnProperty("targetStackCount")&&!$util.isInteger(_e.targetStackCount))return"targetStackCount: integer expected";if(_e.linksToAdd!=null&&_e.hasOwnProperty("linksToAdd")){if(!Array.isArray(_e.linksToAdd))return"linksToAdd: array expected";for(let tt=0;tt<_e.linksToAdd.length;++tt)if(!$util.isString(_e.linksToAdd[tt]))return"linksToAdd: string[] expected"}if(_e.linksToRemove!=null&&_e.hasOwnProperty("linksToRemove")){if(!Array.isArray(_e.linksToRemove))return"linksToRemove: array expected";for(let tt=0;tt<_e.linksToRemove.length;++tt)if(!$util.isString(_e.linksToRemove[tt]))return"linksToRemove: string[] expected"}return null},c.fromObject=function(_e){if(_e instanceof $root.data.StackModificationDbo)return _e;let tt=new $root.data.StackModificationDbo;if(_e.targetStackCount!=null&&(tt.targetStackCount=_e.targetStackCount|0),_e.linksToAdd){if(!Array.isArray(_e.linksToAdd))throw TypeError(".data.StackModificationDbo.linksToAdd: array expected");tt.linksToAdd=[];for(let nt=0;nt<_e.linksToAdd.length;++nt)tt.linksToAdd[nt]=String(_e.linksToAdd[nt])}if(_e.linksToRemove){if(!Array.isArray(_e.linksToRemove))throw TypeError(".data.StackModificationDbo.linksToRemove: array expected");tt.linksToRemove=[];for(let nt=0;nt<_e.linksToRemove.length;++nt)tt.linksToRemove[nt]=String(_e.linksToRemove[nt])}return tt},c.toObject=function(_e,tt){tt||(tt={});let nt={};if((tt.arrays||tt.defaults)&&(nt.linksToAdd=[],nt.linksToRemove=[]),tt.defaults&&(nt.targetStackCount=0),_e.targetStackCount!=null&&_e.hasOwnProperty("targetStackCount")&&(nt.targetStackCount=_e.targetStackCount),_e.linksToAdd&&_e.linksToAdd.length){nt.linksToAdd=[];for(let rt=0;rt<_e.linksToAdd.length;++rt)nt.linksToAdd[rt]=_e.linksToAdd[rt]}if(_e.linksToRemove&&_e.linksToRemove.length){nt.linksToRemove=[];for(let rt=0;rt<_e.linksToRemove.length;++rt)nt.linksToRemove[rt]=_e.linksToRemove[rt]}return nt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(_e){return _e===void 0&&(_e="type.googleapis.com"),_e+"/data.StackModificationDbo"},c}(),d.DescriptionDbo=function(){function c(et){if(this.sections={},et)for(let _e=Object.keys(et),tt=0;tt<_e.length;++tt)et[_e[tt]]!=null&&(this[_e[tt]]=et[_e[tt]])}return c.prototype.text="",c.prototype.sections=$util.emptyObject,c.create=function(_e){return new c(_e)},c.encode=function(_e,tt){if(tt||(tt=$Writer.create()),_e.text!=null&&Object.hasOwnProperty.call(_e,"text")&&tt.uint32(10).string(_e.text),_e.sections!=null&&Object.hasOwnProperty.call(_e,"sections"))for(let nt=Object.keys(_e.sections),rt=0;rt<nt.length;++rt)tt.uint32(18).fork().uint32(10).string(nt[rt]).uint32(18).string(_e.sections[nt[rt]]).ldelim();return tt},c.encodeDelimited=function(_e,tt){return this.encode(_e,tt).ldelim()},c.decode=function(_e,tt){_e instanceof $Reader||(_e=$Reader.create(_e));let nt=tt===void 0?_e.len:_e.pos+tt,rt=new $root.data.DescriptionDbo,it,ot;for(;_e.pos<nt;){let st=_e.uint32();switch(st>>>3){case 1:{rt.text=_e.string();break}case 2:{rt.sections===$util.emptyObject&&(rt.sections={});let at=_e.uint32()+_e.pos;for(it="",ot="";_e.pos<at;){let lt=_e.uint32();switch(lt>>>3){case 1:it=_e.string();break;case 2:ot=_e.string();break;default:_e.skipType(lt&7);break}}rt.sections[it]=ot;break}default:_e.skipType(st&7);break}}return rt},c.decodeDelimited=function(_e){return _e instanceof $Reader||(_e=new $Reader(_e)),this.decode(_e,_e.uint32())},c.verify=function(_e){if(typeof _e!="object"||_e===null)return"object expected";if(_e.text!=null&&_e.hasOwnProperty("text")&&!$util.isString(_e.text))return"text: string expected";if(_e.sections!=null&&_e.hasOwnProperty("sections")){if(!$util.isObject(_e.sections))return"sections: object expected";let tt=Object.keys(_e.sections);for(let nt=0;nt<tt.length;++nt)if(!$util.isString(_e.sections[tt[nt]]))return"sections: string{k:string} expected"}return null},c.fromObject=function(_e){if(_e instanceof $root.data.DescriptionDbo)return _e;let tt=new $root.data.DescriptionDbo;if(_e.text!=null&&(tt.text=String(_e.text)),_e.sections){if(typeof _e.sections!="object")throw TypeError(".data.DescriptionDbo.sections: object expected");tt.sections={};for(let nt=Object.keys(_e.sections),rt=0;rt<nt.length;++rt)tt.sections[nt[rt]]=String(_e.sections[nt[rt]])}return tt},c.toObject=function(_e,tt){tt||(tt={});let nt={};(tt.objects||tt.defaults)&&(nt.sections={}),tt.defaults&&(nt.text=""),_e.text!=null&&_e.hasOwnProperty("text")&&(nt.text=_e.text);let rt;if(_e.sections&&(rt=Object.keys(_e.sections)).length){nt.sections={};for(let it=0;it<rt.length;++it)nt.sections[rt[it]]=_e.sections[rt[it]]}return nt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(_e){return _e===void 0&&(_e="type.googleapis.com"),_e+"/data.DescriptionDbo"},c}(),d.FeatureSummaryDbo=function(){function c(_e){if(this.tags=[],_e)for(let tt=Object.keys(_e),nt=0;nt<tt.length;++nt)_e[tt[nt]]!=null&&(this[tt[nt]]=_e[tt[nt]])}c.prototype.id="",c.prototype.name="",c.prototype.tags=$util.emptyArray,c.prototype.enabledFormula="",c.prototype.maxStacks=null,c.prototype.label=null,c.prototype.options=null,c.prototype.typeAlias="";let et;return Object.defineProperty(c.prototype,"_maxStacks",{get:$util.oneOfGetter(et=["maxStacks"]),set:$util.oneOfSetter(et)}),Object.defineProperty(c.prototype,"_label",{get:$util.oneOfGetter(et=["label"]),set:$util.oneOfSetter(et)}),c.create=function(tt){return new c(tt)},c.encode=function(tt,nt){if(nt||(nt=$Writer.create()),tt.id!=null&&Object.hasOwnProperty.call(tt,"id")&&nt.uint32(10).string(tt.id),tt.name!=null&&Object.hasOwnProperty.call(tt,"name")&&nt.uint32(18).string(tt.name),tt.tags!=null&&tt.tags.length)for(let rt=0;rt<tt.tags.length;++rt)nt.uint32(26).string(tt.tags[rt]);return tt.enabledFormula!=null&&Object.hasOwnProperty.call(tt,"enabledFormula")&&nt.uint32(34).string(tt.enabledFormula),tt.maxStacks!=null&&Object.hasOwnProperty.call(tt,"maxStacks")&&nt.uint32(40).uint32(tt.maxStacks),tt.label!=null&&Object.hasOwnProperty.call(tt,"label")&&nt.uint32(50).string(tt.label),tt.options!=null&&Object.hasOwnProperty.call(tt,"options")&&$root.data.FeatureOptionsDbo.encode(tt.options,nt.uint32(58).fork()).ldelim(),tt.typeAlias!=null&&Object.hasOwnProperty.call(tt,"typeAlias")&&nt.uint32(66).string(tt.typeAlias),nt},c.encodeDelimited=function(tt,nt){return this.encode(tt,nt).ldelim()},c.decode=function(tt,nt){tt instanceof $Reader||(tt=$Reader.create(tt));let rt=nt===void 0?tt.len:tt.pos+nt,it=new $root.data.FeatureSummaryDbo;for(;tt.pos<rt;){let ot=tt.uint32();switch(ot>>>3){case 1:{it.id=tt.string();break}case 2:{it.name=tt.string();break}case 3:{it.tags&&it.tags.length||(it.tags=[]),it.tags.push(tt.string());break}case 4:{it.enabledFormula=tt.string();break}case 5:{it.maxStacks=tt.uint32();break}case 6:{it.label=tt.string();break}case 7:{it.options=$root.data.FeatureOptionsDbo.decode(tt,tt.uint32());break}case 8:{it.typeAlias=tt.string();break}default:tt.skipType(ot&7);break}}return it},c.decodeDelimited=function(tt){return tt instanceof $Reader||(tt=new $Reader(tt)),this.decode(tt,tt.uint32())},c.verify=function(tt){if(typeof tt!="object"||tt===null)return"object expected";if(tt.id!=null&&tt.hasOwnProperty("id")&&!$util.isString(tt.id))return"id: string expected";if(tt.name!=null&&tt.hasOwnProperty("name")&&!$util.isString(tt.name))return"name: string expected";if(tt.tags!=null&&tt.hasOwnProperty("tags")){if(!Array.isArray(tt.tags))return"tags: array expected";for(let nt=0;nt<tt.tags.length;++nt)if(!$util.isString(tt.tags[nt]))return"tags: string[] expected"}if(tt.enabledFormula!=null&&tt.hasOwnProperty("enabledFormula")&&!$util.isString(tt.enabledFormula))return"enabledFormula: string expected";if(tt.maxStacks!=null&&tt.hasOwnProperty("maxStacks")&&!$util.isInteger(tt.maxStacks))return"maxStacks: integer expected";if(tt.label!=null&&tt.hasOwnProperty("label")&&!$util.isString(tt.label))return"label: string expected";if(tt.options!=null&&tt.hasOwnProperty("options")){let nt=$root.data.FeatureOptionsDbo.verify(tt.options);if(nt)return"options."+nt}return tt.typeAlias!=null&&tt.hasOwnProperty("typeAlias")&&!$util.isString(tt.typeAlias)?"typeAlias: string expected":null},c.fromObject=function(tt){if(tt instanceof $root.data.FeatureSummaryDbo)return tt;let nt=new $root.data.FeatureSummaryDbo;if(tt.id!=null&&(nt.id=String(tt.id)),tt.name!=null&&(nt.name=String(tt.name)),tt.tags){if(!Array.isArray(tt.tags))throw TypeError(".data.FeatureSummaryDbo.tags: array expected");nt.tags=[];for(let rt=0;rt<tt.tags.length;++rt)nt.tags[rt]=String(tt.tags[rt])}if(tt.enabledFormula!=null&&(nt.enabledFormula=String(tt.enabledFormula)),tt.maxStacks!=null&&(nt.maxStacks=tt.maxStacks>>>0),tt.label!=null&&(nt.label=String(tt.label)),tt.options!=null){if(typeof tt.options!="object")throw TypeError(".data.FeatureSummaryDbo.options: object expected");nt.options=$root.data.FeatureOptionsDbo.fromObject(tt.options)}return tt.typeAlias!=null&&(nt.typeAlias=String(tt.typeAlias)),nt},c.toObject=function(tt,nt){nt||(nt={});let rt={};if((nt.arrays||nt.defaults)&&(rt.tags=[]),nt.defaults&&(rt.id="",rt.name="",rt.enabledFormula="",rt.options=null,rt.typeAlias=""),tt.id!=null&&tt.hasOwnProperty("id")&&(rt.id=tt.id),tt.name!=null&&tt.hasOwnProperty("name")&&(rt.name=tt.name),tt.tags&&tt.tags.length){rt.tags=[];for(let it=0;it<tt.tags.length;++it)rt.tags[it]=tt.tags[it]}return tt.enabledFormula!=null&&tt.hasOwnProperty("enabledFormula")&&(rt.enabledFormula=tt.enabledFormula),tt.maxStacks!=null&&tt.hasOwnProperty("maxStacks")&&(rt.maxStacks=tt.maxStacks,nt.oneofs&&(rt._maxStacks="maxStacks")),tt.label!=null&&tt.hasOwnProperty("label")&&(rt.label=tt.label,nt.oneofs&&(rt._label="label")),tt.options!=null&&tt.hasOwnProperty("options")&&(rt.options=$root.data.FeatureOptionsDbo.toObject(tt.options,nt)),tt.typeAlias!=null&&tt.hasOwnProperty("typeAlias")&&(rt.typeAlias=tt.typeAlias),rt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(tt){return tt===void 0&&(tt="type.googleapis.com"),tt+"/data.FeatureSummaryDbo"},c}(),d.FeatureDbo=function(){function c(_e){if(this.tags=[],this.conditionalStacks=[],_e)for(let tt=Object.keys(_e),nt=0;nt<tt.length;++nt)_e[tt[nt]]!=null&&(this[tt[nt]]=_e[tt[nt]])}c.prototype.id="",c.prototype.name="",c.prototype.tags=$util.emptyArray,c.prototype.enabledFormula="",c.prototype.maxStacks=null,c.prototype.label=null,c.prototype.options=null,c.prototype.typeAlias="",c.prototype.description=null,c.prototype.stacks=null,c.prototype.conditionalStacks=$util.emptyArray;let et;return Object.defineProperty(c.prototype,"_maxStacks",{get:$util.oneOfGetter(et=["maxStacks"]),set:$util.oneOfSetter(et)}),Object.defineProperty(c.prototype,"_label",{get:$util.oneOfGetter(et=["label"]),set:$util.oneOfSetter(et)}),c.create=function(tt){return new c(tt)},c.encode=function(tt,nt){if(nt||(nt=$Writer.create()),tt.id!=null&&Object.hasOwnProperty.call(tt,"id")&&nt.uint32(10).string(tt.id),tt.name!=null&&Object.hasOwnProperty.call(tt,"name")&&nt.uint32(18).string(tt.name),tt.tags!=null&&tt.tags.length)for(let rt=0;rt<tt.tags.length;++rt)nt.uint32(26).string(tt.tags[rt]);if(tt.enabledFormula!=null&&Object.hasOwnProperty.call(tt,"enabledFormula")&&nt.uint32(34).string(tt.enabledFormula),tt.maxStacks!=null&&Object.hasOwnProperty.call(tt,"maxStacks")&&nt.uint32(40).uint32(tt.maxStacks),tt.label!=null&&Object.hasOwnProperty.call(tt,"label")&&nt.uint32(50).string(tt.label),tt.options!=null&&Object.hasOwnProperty.call(tt,"options")&&$root.data.FeatureOptionsDbo.encode(tt.options,nt.uint32(58).fork()).ldelim(),tt.typeAlias!=null&&Object.hasOwnProperty.call(tt,"typeAlias")&&nt.uint32(66).string(tt.typeAlias),tt.description!=null&&Object.hasOwnProperty.call(tt,"description")&&$root.data.DescriptionDbo.encode(tt.description,nt.uint32(802).fork()).ldelim(),tt.stacks!=null&&Object.hasOwnProperty.call(tt,"stacks")&&$root.data.StacksDbo.encode(tt.stacks,nt.uint32(810).fork()).ldelim(),tt.conditionalStacks!=null&&tt.conditionalStacks.length)for(let rt=0;rt<tt.conditionalStacks.length;++rt)$root.data.ConditionalStackDbo.encode(tt.conditionalStacks[rt],nt.uint32(826).fork()).ldelim();return nt},c.encodeDelimited=function(tt,nt){return this.encode(tt,nt).ldelim()},c.decode=function(tt,nt){tt instanceof $Reader||(tt=$Reader.create(tt));let rt=nt===void 0?tt.len:tt.pos+nt,it=new $root.data.FeatureDbo;for(;tt.pos<rt;){let ot=tt.uint32();switch(ot>>>3){case 1:{it.id=tt.string();break}case 2:{it.name=tt.string();break}case 3:{it.tags&&it.tags.length||(it.tags=[]),it.tags.push(tt.string());break}case 4:{it.enabledFormula=tt.string();break}case 5:{it.maxStacks=tt.uint32();break}case 6:{it.label=tt.string();break}case 7:{it.options=$root.data.FeatureOptionsDbo.decode(tt,tt.uint32());break}case 8:{it.typeAlias=tt.string();break}case 100:{it.description=$root.data.DescriptionDbo.decode(tt,tt.uint32());break}case 101:{it.stacks=$root.data.StacksDbo.decode(tt,tt.uint32());break}case 103:{it.conditionalStacks&&it.conditionalStacks.length||(it.conditionalStacks=[]),it.conditionalStacks.push($root.data.ConditionalStackDbo.decode(tt,tt.uint32()));break}default:tt.skipType(ot&7);break}}return it},c.decodeDelimited=function(tt){return tt instanceof $Reader||(tt=new $Reader(tt)),this.decode(tt,tt.uint32())},c.verify=function(tt){if(typeof tt!="object"||tt===null)return"object expected";if(tt.id!=null&&tt.hasOwnProperty("id")&&!$util.isString(tt.id))return"id: string expected";if(tt.name!=null&&tt.hasOwnProperty("name")&&!$util.isString(tt.name))return"name: string expected";if(tt.tags!=null&&tt.hasOwnProperty("tags")){if(!Array.isArray(tt.tags))return"tags: array expected";for(let nt=0;nt<tt.tags.length;++nt)if(!$util.isString(tt.tags[nt]))return"tags: string[] expected"}if(tt.enabledFormula!=null&&tt.hasOwnProperty("enabledFormula")&&!$util.isString(tt.enabledFormula))return"enabledFormula: string expected";if(tt.maxStacks!=null&&tt.hasOwnProperty("maxStacks")&&!$util.isInteger(tt.maxStacks))return"maxStacks: integer expected";if(tt.label!=null&&tt.hasOwnProperty("label")&&!$util.isString(tt.label))return"label: string expected";if(tt.options!=null&&tt.hasOwnProperty("options")){let nt=$root.data.FeatureOptionsDbo.verify(tt.options);if(nt)return"options."+nt}if(tt.typeAlias!=null&&tt.hasOwnProperty("typeAlias")&&!$util.isString(tt.typeAlias))return"typeAlias: string expected";if(tt.description!=null&&tt.hasOwnProperty("description")){let nt=$root.data.DescriptionDbo.verify(tt.description);if(nt)return"description."+nt}if(tt.stacks!=null&&tt.hasOwnProperty("stacks")){let nt=$root.data.StacksDbo.verify(tt.stacks);if(nt)return"stacks."+nt}if(tt.conditionalStacks!=null&&tt.hasOwnProperty("conditionalStacks")){if(!Array.isArray(tt.conditionalStacks))return"conditionalStacks: array expected";for(let nt=0;nt<tt.conditionalStacks.length;++nt){let rt=$root.data.ConditionalStackDbo.verify(tt.conditionalStacks[nt]);if(rt)return"conditionalStacks."+rt}}return null},c.fromObject=function(tt){if(tt instanceof $root.data.FeatureDbo)return tt;let nt=new $root.data.FeatureDbo;if(tt.id!=null&&(nt.id=String(tt.id)),tt.name!=null&&(nt.name=String(tt.name)),tt.tags){if(!Array.isArray(tt.tags))throw TypeError(".data.FeatureDbo.tags: array expected");nt.tags=[];for(let rt=0;rt<tt.tags.length;++rt)nt.tags[rt]=String(tt.tags[rt])}if(tt.enabledFormula!=null&&(nt.enabledFormula=String(tt.enabledFormula)),tt.maxStacks!=null&&(nt.maxStacks=tt.maxStacks>>>0),tt.label!=null&&(nt.label=String(tt.label)),tt.options!=null){if(typeof tt.options!="object")throw TypeError(".data.FeatureDbo.options: object expected");nt.options=$root.data.FeatureOptionsDbo.fromObject(tt.options)}if(tt.typeAlias!=null&&(nt.typeAlias=String(tt.typeAlias)),tt.description!=null){if(typeof tt.description!="object")throw TypeError(".data.FeatureDbo.description: object expected");nt.description=$root.data.DescriptionDbo.fromObject(tt.description)}if(tt.stacks!=null){if(typeof tt.stacks!="object")throw TypeError(".data.FeatureDbo.stacks: object expected");nt.stacks=$root.data.StacksDbo.fromObject(tt.stacks)}if(tt.conditionalStacks){if(!Array.isArray(tt.conditionalStacks))throw TypeError(".data.FeatureDbo.conditionalStacks: array expected");nt.conditionalStacks=[];for(let rt=0;rt<tt.conditionalStacks.length;++rt){if(typeof tt.conditionalStacks[rt]!="object")throw TypeError(".data.FeatureDbo.conditionalStacks: object expected");nt.conditionalStacks[rt]=$root.data.ConditionalStackDbo.fromObject(tt.conditionalStacks[rt])}}return nt},c.toObject=function(tt,nt){nt||(nt={});let rt={};if((nt.arrays||nt.defaults)&&(rt.tags=[],rt.conditionalStacks=[]),nt.defaults&&(rt.id="",rt.name="",rt.enabledFormula="",rt.options=null,rt.typeAlias="",rt.description=null,rt.stacks=null),tt.id!=null&&tt.hasOwnProperty("id")&&(rt.id=tt.id),tt.name!=null&&tt.hasOwnProperty("name")&&(rt.name=tt.name),tt.tags&&tt.tags.length){rt.tags=[];for(let it=0;it<tt.tags.length;++it)rt.tags[it]=tt.tags[it]}if(tt.enabledFormula!=null&&tt.hasOwnProperty("enabledFormula")&&(rt.enabledFormula=tt.enabledFormula),tt.maxStacks!=null&&tt.hasOwnProperty("maxStacks")&&(rt.maxStacks=tt.maxStacks,nt.oneofs&&(rt._maxStacks="maxStacks")),tt.label!=null&&tt.hasOwnProperty("label")&&(rt.label=tt.label,nt.oneofs&&(rt._label="label")),tt.options!=null&&tt.hasOwnProperty("options")&&(rt.options=$root.data.FeatureOptionsDbo.toObject(tt.options,nt)),tt.typeAlias!=null&&tt.hasOwnProperty("typeAlias")&&(rt.typeAlias=tt.typeAlias),tt.description!=null&&tt.hasOwnProperty("description")&&(rt.description=$root.data.DescriptionDbo.toObject(tt.description,nt)),tt.stacks!=null&&tt.hasOwnProperty("stacks")&&(rt.stacks=$root.data.StacksDbo.toObject(tt.stacks,nt)),tt.conditionalStacks&&tt.conditionalStacks.length){rt.conditionalStacks=[];for(let it=0;it<tt.conditionalStacks.length;++it)rt.conditionalStacks[it]=$root.data.ConditionalStackDbo.toObject(tt.conditionalStacks[it],nt)}return rt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(tt){return tt===void 0&&(tt="type.googleapis.com"),tt+"/data.FeatureDbo"},c}(),d.FeatureOptionsDbo=function(){function c(_e){if(_e)for(let tt=Object.keys(_e),nt=0;nt<tt.length;++nt)_e[tt[nt]]!=null&&(this[tt[nt]]=_e[tt[nt]])}c.prototype.select=null;let et;return Object.defineProperty(c.prototype,"option",{get:$util.oneOfGetter(et=["select"]),set:$util.oneOfSetter(et)}),c.create=function(tt){return new c(tt)},c.encode=function(tt,nt){return nt||(nt=$Writer.create()),tt.select!=null&&Object.hasOwnProperty.call(tt,"select")&&$root.data.FeatureOptionsDbo.Select.encode(tt.select,nt.uint32(10).fork()).ldelim(),nt},c.encodeDelimited=function(tt,nt){return this.encode(tt,nt).ldelim()},c.decode=function(tt,nt){tt instanceof $Reader||(tt=$Reader.create(tt));let rt=nt===void 0?tt.len:tt.pos+nt,it=new $root.data.FeatureOptionsDbo;for(;tt.pos<rt;){let ot=tt.uint32();switch(ot>>>3){case 1:{it.select=$root.data.FeatureOptionsDbo.Select.decode(tt,tt.uint32());break}default:tt.skipType(ot&7);break}}return it},c.decodeDelimited=function(tt){return tt instanceof $Reader||(tt=new $Reader(tt)),this.decode(tt,tt.uint32())},c.verify=function(tt){if(typeof tt!="object"||tt===null)return"object expected";if(tt.select!=null&&tt.hasOwnProperty("select")){let nt=$root.data.FeatureOptionsDbo.Select.verify(tt.select);if(nt)return"select."+nt}return null},c.fromObject=function(tt){if(tt instanceof $root.data.FeatureOptionsDbo)return tt;let nt=new $root.data.FeatureOptionsDbo;if(tt.select!=null){if(typeof tt.select!="object")throw TypeError(".data.FeatureOptionsDbo.select: object expected");nt.select=$root.data.FeatureOptionsDbo.Select.fromObject(tt.select)}return nt},c.toObject=function(tt,nt){nt||(nt={});let rt={};return tt.select!=null&&tt.hasOwnProperty("select")&&(rt.select=$root.data.FeatureOptionsDbo.Select.toObject(tt.select,nt),nt.oneofs&&(rt.option="select")),rt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(tt){return tt===void 0&&(tt="type.googleapis.com"),tt+"/data.FeatureOptionsDbo"},c.Select=function(){function _e(tt){if(tt)for(let nt=Object.keys(tt),rt=0;rt<nt.length;++rt)tt[nt[rt]]!=null&&(this[nt[rt]]=tt[nt[rt]])}return _e.prototype.optionTag="",_e.prototype.idTemplate="",_e.prototype.prerequisitesTemplate="",_e.create=function(nt){return new _e(nt)},_e.encode=function(nt,rt){return rt||(rt=$Writer.create()),nt.optionTag!=null&&Object.hasOwnProperty.call(nt,"optionTag")&&rt.uint32(10).string(nt.optionTag),nt.idTemplate!=null&&Object.hasOwnProperty.call(nt,"idTemplate")&&rt.uint32(18).string(nt.idTemplate),nt.prerequisitesTemplate!=null&&Object.hasOwnProperty.call(nt,"prerequisitesTemplate")&&rt.uint32(26).string(nt.prerequisitesTemplate),rt},_e.encodeDelimited=function(nt,rt){return this.encode(nt,rt).ldelim()},_e.decode=function(nt,rt){nt instanceof $Reader||(nt=$Reader.create(nt));let it=rt===void 0?nt.len:nt.pos+rt,ot=new $root.data.FeatureOptionsDbo.Select;for(;nt.pos<it;){let st=nt.uint32();switch(st>>>3){case 1:{ot.optionTag=nt.string();break}case 2:{ot.idTemplate=nt.string();break}case 3:{ot.prerequisitesTemplate=nt.string();break}default:nt.skipType(st&7);break}}return ot},_e.decodeDelimited=function(nt){return nt instanceof $Reader||(nt=new $Reader(nt)),this.decode(nt,nt.uint32())},_e.verify=function(nt){return typeof nt!="object"||nt===null?"object expected":nt.optionTag!=null&&nt.hasOwnProperty("optionTag")&&!$util.isString(nt.optionTag)?"optionTag: string expected":nt.idTemplate!=null&&nt.hasOwnProperty("idTemplate")&&!$util.isString(nt.idTemplate)?"idTemplate: string expected":nt.prerequisitesTemplate!=null&&nt.hasOwnProperty("prerequisitesTemplate")&&!$util.isString(nt.prerequisitesTemplate)?"prerequisitesTemplate: string expected":null},_e.fromObject=function(nt){if(nt instanceof $root.data.FeatureOptionsDbo.Select)return nt;let rt=new $root.data.FeatureOptionsDbo.Select;return nt.optionTag!=null&&(rt.optionTag=String(nt.optionTag)),nt.idTemplate!=null&&(rt.idTemplate=String(nt.idTemplate)),nt.prerequisitesTemplate!=null&&(rt.prerequisitesTemplate=String(nt.prerequisitesTemplate)),rt},_e.toObject=function(nt,rt){rt||(rt={});let it={};return rt.defaults&&(it.optionTag="",it.idTemplate="",it.prerequisitesTemplate=""),nt.optionTag!=null&&nt.hasOwnProperty("optionTag")&&(it.optionTag=nt.optionTag),nt.idTemplate!=null&&nt.hasOwnProperty("idTemplate")&&(it.idTemplate=nt.idTemplate),nt.prerequisitesTemplate!=null&&nt.hasOwnProperty("prerequisitesTemplate")&&(it.prerequisitesTemplate=nt.prerequisitesTemplate),it},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/data.FeatureOptionsDbo.Select"},_e}(),c}(),d.CharacterTemplateDbo=function(){function c(et){if(this.levels=[],et)for(let _e=Object.keys(et),tt=0;tt<_e.length;++tt)et[_e[tt]]!=null&&(this[_e[tt]]=et[_e[tt]])}return c.prototype.levels=$util.emptyArray,c.create=function(_e){return new c(_e)},c.encode=function(_e,tt){if(tt||(tt=$Writer.create()),_e.levels!=null&&_e.levels.length)for(let nt=0;nt<_e.levels.length;++nt)$root.data.CharacterLevelTemplateDbo.encode(_e.levels[nt],tt.uint32(10).fork()).ldelim();return tt},c.encodeDelimited=function(_e,tt){return this.encode(_e,tt).ldelim()},c.decode=function(_e,tt){_e instanceof $Reader||(_e=$Reader.create(_e));let nt=tt===void 0?_e.len:_e.pos+tt,rt=new $root.data.CharacterTemplateDbo;for(;_e.pos<nt;){let it=_e.uint32();switch(it>>>3){case 1:{rt.levels&&rt.levels.length||(rt.levels=[]),rt.levels.push($root.data.CharacterLevelTemplateDbo.decode(_e,_e.uint32()));break}default:_e.skipType(it&7);break}}return rt},c.decodeDelimited=function(_e){return _e instanceof $Reader||(_e=new $Reader(_e)),this.decode(_e,_e.uint32())},c.verify=function(_e){if(typeof _e!="object"||_e===null)return"object expected";if(_e.levels!=null&&_e.hasOwnProperty("levels")){if(!Array.isArray(_e.levels))return"levels: array expected";for(let tt=0;tt<_e.levels.length;++tt){let nt=$root.data.CharacterLevelTemplateDbo.verify(_e.levels[tt]);if(nt)return"levels."+nt}}return null},c.fromObject=function(_e){if(_e instanceof $root.data.CharacterTemplateDbo)return _e;let tt=new $root.data.CharacterTemplateDbo;if(_e.levels){if(!Array.isArray(_e.levels))throw TypeError(".data.CharacterTemplateDbo.levels: array expected");tt.levels=[];for(let nt=0;nt<_e.levels.length;++nt){if(typeof _e.levels[nt]!="object")throw TypeError(".data.CharacterTemplateDbo.levels: object expected");tt.levels[nt]=$root.data.CharacterLevelTemplateDbo.fromObject(_e.levels[nt])}}return tt},c.toObject=function(_e,tt){tt||(tt={});let nt={};if((tt.arrays||tt.defaults)&&(nt.levels=[]),_e.levels&&_e.levels.length){nt.levels=[];for(let rt=0;rt<_e.levels.length;++rt)nt.levels[rt]=$root.data.CharacterLevelTemplateDbo.toObject(_e.levels[rt],tt)}return nt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(_e){return _e===void 0&&(_e="type.googleapis.com"),_e+"/data.CharacterTemplateDbo"},c}(),d.CharacterLevelTemplateDbo=function(){function c(et){if(this.effects=[],this.links=[],this.choices=[],et)for(let _e=Object.keys(et),tt=0;tt<_e.length;++tt)et[_e[tt]]!=null&&(this[_e[tt]]=et[_e[tt]])}return c.prototype.levelNumber=0,c.prototype.effects=$util.emptyArray,c.prototype.links=$util.emptyArray,c.prototype.choices=$util.emptyArray,c.create=function(_e){return new c(_e)},c.encode=function(_e,tt){if(tt||(tt=$Writer.create()),_e.levelNumber!=null&&Object.hasOwnProperty.call(_e,"levelNumber")&&tt.uint32(8).uint32(_e.levelNumber),_e.effects!=null&&_e.effects.length)for(let nt=0;nt<_e.effects.length;++nt)$root.data.EffectDbo.encode(_e.effects[nt],tt.uint32(810).fork()).ldelim();if(_e.links!=null&&_e.links.length)for(let nt=0;nt<_e.links.length;++nt)tt.uint32(818).string(_e.links[nt]);if(_e.choices!=null&&_e.choices.length)for(let nt=0;nt<_e.choices.length;++nt)$root.data.ChoiceDbo.encode(_e.choices[nt],tt.uint32(826).fork()).ldelim();return tt},c.encodeDelimited=function(_e,tt){return this.encode(_e,tt).ldelim()},c.decode=function(_e,tt){_e instanceof $Reader||(_e=$Reader.create(_e));let nt=tt===void 0?_e.len:_e.pos+tt,rt=new $root.data.CharacterLevelTemplateDbo;for(;_e.pos<nt;){let it=_e.uint32();switch(it>>>3){case 1:{rt.levelNumber=_e.uint32();break}case 101:{rt.effects&&rt.effects.length||(rt.effects=[]),rt.effects.push($root.data.EffectDbo.decode(_e,_e.uint32()));break}case 102:{rt.links&&rt.links.length||(rt.links=[]),rt.links.push(_e.string());break}case 103:{rt.choices&&rt.choices.length||(rt.choices=[]),rt.choices.push($root.data.ChoiceDbo.decode(_e,_e.uint32()));break}default:_e.skipType(it&7);break}}return rt},c.decodeDelimited=function(_e){return _e instanceof $Reader||(_e=new $Reader(_e)),this.decode(_e,_e.uint32())},c.verify=function(_e){if(typeof _e!="object"||_e===null)return"object expected";if(_e.levelNumber!=null&&_e.hasOwnProperty("levelNumber")&&!$util.isInteger(_e.levelNumber))return"levelNumber: integer expected";if(_e.effects!=null&&_e.hasOwnProperty("effects")){if(!Array.isArray(_e.effects))return"effects: array expected";for(let tt=0;tt<_e.effects.length;++tt){let nt=$root.data.EffectDbo.verify(_e.effects[tt]);if(nt)return"effects."+nt}}if(_e.links!=null&&_e.hasOwnProperty("links")){if(!Array.isArray(_e.links))return"links: array expected";for(let tt=0;tt<_e.links.length;++tt)if(!$util.isString(_e.links[tt]))return"links: string[] expected"}if(_e.choices!=null&&_e.hasOwnProperty("choices")){if(!Array.isArray(_e.choices))return"choices: array expected";for(let tt=0;tt<_e.choices.length;++tt){let nt=$root.data.ChoiceDbo.verify(_e.choices[tt]);if(nt)return"choices."+nt}}return null},c.fromObject=function(_e){if(_e instanceof $root.data.CharacterLevelTemplateDbo)return _e;let tt=new $root.data.CharacterLevelTemplateDbo;if(_e.levelNumber!=null&&(tt.levelNumber=_e.levelNumber>>>0),_e.effects){if(!Array.isArray(_e.effects))throw TypeError(".data.CharacterLevelTemplateDbo.effects: array expected");tt.effects=[];for(let nt=0;nt<_e.effects.length;++nt){if(typeof _e.effects[nt]!="object")throw TypeError(".data.CharacterLevelTemplateDbo.effects: object expected");tt.effects[nt]=$root.data.EffectDbo.fromObject(_e.effects[nt])}}if(_e.links){if(!Array.isArray(_e.links))throw TypeError(".data.CharacterLevelTemplateDbo.links: array expected");tt.links=[];for(let nt=0;nt<_e.links.length;++nt)tt.links[nt]=String(_e.links[nt])}if(_e.choices){if(!Array.isArray(_e.choices))throw TypeError(".data.CharacterLevelTemplateDbo.choices: array expected");tt.choices=[];for(let nt=0;nt<_e.choices.length;++nt){if(typeof _e.choices[nt]!="object")throw TypeError(".data.CharacterLevelTemplateDbo.choices: object expected");tt.choices[nt]=$root.data.ChoiceDbo.fromObject(_e.choices[nt])}}return tt},c.toObject=function(_e,tt){tt||(tt={});let nt={};if((tt.arrays||tt.defaults)&&(nt.effects=[],nt.links=[],nt.choices=[]),tt.defaults&&(nt.levelNumber=0),_e.levelNumber!=null&&_e.hasOwnProperty("levelNumber")&&(nt.levelNumber=_e.levelNumber),_e.effects&&_e.effects.length){nt.effects=[];for(let rt=0;rt<_e.effects.length;++rt)nt.effects[rt]=$root.data.EffectDbo.toObject(_e.effects[rt],tt)}if(_e.links&&_e.links.length){nt.links=[];for(let rt=0;rt<_e.links.length;++rt)nt.links[rt]=_e.links[rt]}if(_e.choices&&_e.choices.length){nt.choices=[];for(let rt=0;rt<_e.choices.length;++rt)nt.choices[rt]=$root.data.ChoiceDbo.toObject(_e.choices[rt],tt)}return nt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(_e){return _e===void 0&&(_e="type.googleapis.com"),_e+"/data.CharacterLevelTemplateDbo"},c}(),d.SourceModuleDbo=function(){function c(et){if(this.features=[],et)for(let _e=Object.keys(et),tt=0;tt<_e.length;++tt)et[_e[tt]]!=null&&(this[_e[tt]]=et[_e[tt]])}return c.prototype.sourceId="",c.prototype.features=$util.emptyArray,c.create=function(_e){return new c(_e)},c.encode=function(_e,tt){if(tt||(tt=$Writer.create()),_e.sourceId!=null&&Object.hasOwnProperty.call(_e,"sourceId")&&tt.uint32(10).string(_e.sourceId),_e.features!=null&&_e.features.length)for(let nt=0;nt<_e.features.length;++nt)$root.data.FeatureSummaryDbo.encode(_e.features[nt],tt.uint32(18).fork()).ldelim();return tt},c.encodeDelimited=function(_e,tt){return this.encode(_e,tt).ldelim()},c.decode=function(_e,tt){_e instanceof $Reader||(_e=$Reader.create(_e));let nt=tt===void 0?_e.len:_e.pos+tt,rt=new $root.data.SourceModuleDbo;for(;_e.pos<nt;){let it=_e.uint32();switch(it>>>3){case 1:{rt.sourceId=_e.string();break}case 2:{rt.features&&rt.features.length||(rt.features=[]),rt.features.push($root.data.FeatureSummaryDbo.decode(_e,_e.uint32()));break}default:_e.skipType(it&7);break}}return rt},c.decodeDelimited=function(_e){return _e instanceof $Reader||(_e=new $Reader(_e)),this.decode(_e,_e.uint32())},c.verify=function(_e){if(typeof _e!="object"||_e===null)return"object expected";if(_e.sourceId!=null&&_e.hasOwnProperty("sourceId")&&!$util.isString(_e.sourceId))return"sourceId: string expected";if(_e.features!=null&&_e.hasOwnProperty("features")){if(!Array.isArray(_e.features))return"features: array expected";for(let tt=0;tt<_e.features.length;++tt){let nt=$root.data.FeatureSummaryDbo.verify(_e.features[tt]);if(nt)return"features."+nt}}return null},c.fromObject=function(_e){if(_e instanceof $root.data.SourceModuleDbo)return _e;let tt=new $root.data.SourceModuleDbo;if(_e.sourceId!=null&&(tt.sourceId=String(_e.sourceId)),_e.features){if(!Array.isArray(_e.features))throw TypeError(".data.SourceModuleDbo.features: array expected");tt.features=[];for(let nt=0;nt<_e.features.length;++nt){if(typeof _e.features[nt]!="object")throw TypeError(".data.SourceModuleDbo.features: object expected");tt.features[nt]=$root.data.FeatureSummaryDbo.fromObject(_e.features[nt])}}return tt},c.toObject=function(_e,tt){tt||(tt={});let nt={};if((tt.arrays||tt.defaults)&&(nt.features=[]),tt.defaults&&(nt.sourceId=""),_e.sourceId!=null&&_e.hasOwnProperty("sourceId")&&(nt.sourceId=_e.sourceId),_e.features&&_e.features.length){nt.features=[];for(let rt=0;rt<_e.features.length;++rt)nt.features[rt]=$root.data.FeatureSummaryDbo.toObject(_e.features[rt],tt)}return nt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(_e){return _e===void 0&&(_e="type.googleapis.com"),_e+"/data.SourceModuleDbo"},c}(),d.SourceModuleItemDatabaseDbo=function(){function c(et){if(this.items=[],this.optionSets=[],this.options=[],et)for(let _e=Object.keys(et),tt=0;tt<_e.length;++tt)et[_e[tt]]!=null&&(this[_e[tt]]=et[_e[tt]])}return c.prototype.sourceId=0,c.prototype.sourceCode="",c.prototype.items=$util.emptyArray,c.prototype.optionSets=$util.emptyArray,c.prototype.options=$util.emptyArray,c.create=function(_e){return new c(_e)},c.encode=function(_e,tt){if(tt||(tt=$Writer.create()),_e.sourceId!=null&&Object.hasOwnProperty.call(_e,"sourceId")&&tt.uint32(8).uint32(_e.sourceId),_e.sourceCode!=null&&Object.hasOwnProperty.call(_e,"sourceCode")&&tt.uint32(18).string(_e.sourceCode),_e.items!=null&&_e.items.length)for(let nt=0;nt<_e.items.length;++nt)$root.data.ItemSummaryDbo.encode(_e.items[nt],tt.uint32(26).fork()).ldelim();if(_e.optionSets!=null&&_e.optionSets.length)for(let nt=0;nt<_e.optionSets.length;++nt)$root.data.ItemOptionSetDbo.encode(_e.optionSets[nt],tt.uint32(34).fork()).ldelim();if(_e.options!=null&&_e.options.length)for(let nt=0;nt<_e.options.length;++nt)$root.data.ItemOptionSummaryDbo.encode(_e.options[nt],tt.uint32(42).fork()).ldelim();return tt},c.encodeDelimited=function(_e,tt){return this.encode(_e,tt).ldelim()},c.decode=function(_e,tt){_e instanceof $Reader||(_e=$Reader.create(_e));let nt=tt===void 0?_e.len:_e.pos+tt,rt=new $root.data.SourceModuleItemDatabaseDbo;for(;_e.pos<nt;){let it=_e.uint32();switch(it>>>3){case 1:{rt.sourceId=_e.uint32();break}case 2:{rt.sourceCode=_e.string();break}case 3:{rt.items&&rt.items.length||(rt.items=[]),rt.items.push($root.data.ItemSummaryDbo.decode(_e,_e.uint32()));break}case 4:{rt.optionSets&&rt.optionSets.length||(rt.optionSets=[]),rt.optionSets.push($root.data.ItemOptionSetDbo.decode(_e,_e.uint32()));break}case 5:{rt.options&&rt.options.length||(rt.options=[]),rt.options.push($root.data.ItemOptionSummaryDbo.decode(_e,_e.uint32()));break}default:_e.skipType(it&7);break}}return rt},c.decodeDelimited=function(_e){return _e instanceof $Reader||(_e=new $Reader(_e)),this.decode(_e,_e.uint32())},c.verify=function(_e){if(typeof _e!="object"||_e===null)return"object expected";if(_e.sourceId!=null&&_e.hasOwnProperty("sourceId")&&!$util.isInteger(_e.sourceId))return"sourceId: integer expected";if(_e.sourceCode!=null&&_e.hasOwnProperty("sourceCode")&&!$util.isString(_e.sourceCode))return"sourceCode: string expected";if(_e.items!=null&&_e.hasOwnProperty("items")){if(!Array.isArray(_e.items))return"items: array expected";for(let tt=0;tt<_e.items.length;++tt){let nt=$root.data.ItemSummaryDbo.verify(_e.items[tt]);if(nt)return"items."+nt}}if(_e.optionSets!=null&&_e.hasOwnProperty("optionSets")){if(!Array.isArray(_e.optionSets))return"optionSets: array expected";for(let tt=0;tt<_e.optionSets.length;++tt){let nt=$root.data.ItemOptionSetDbo.verify(_e.optionSets[tt]);if(nt)return"optionSets."+nt}}if(_e.options!=null&&_e.hasOwnProperty("options")){if(!Array.isArray(_e.options))return"options: array expected";for(let tt=0;tt<_e.options.length;++tt){let nt=$root.data.ItemOptionSummaryDbo.verify(_e.options[tt]);if(nt)return"options."+nt}}return null},c.fromObject=function(_e){if(_e instanceof $root.data.SourceModuleItemDatabaseDbo)return _e;let tt=new $root.data.SourceModuleItemDatabaseDbo;if(_e.sourceId!=null&&(tt.sourceId=_e.sourceId>>>0),_e.sourceCode!=null&&(tt.sourceCode=String(_e.sourceCode)),_e.items){if(!Array.isArray(_e.items))throw TypeError(".data.SourceModuleItemDatabaseDbo.items: array expected");tt.items=[];for(let nt=0;nt<_e.items.length;++nt){if(typeof _e.items[nt]!="object")throw TypeError(".data.SourceModuleItemDatabaseDbo.items: object expected");tt.items[nt]=$root.data.ItemSummaryDbo.fromObject(_e.items[nt])}}if(_e.optionSets){if(!Array.isArray(_e.optionSets))throw TypeError(".data.SourceModuleItemDatabaseDbo.optionSets: array expected");tt.optionSets=[];for(let nt=0;nt<_e.optionSets.length;++nt){if(typeof _e.optionSets[nt]!="object")throw TypeError(".data.SourceModuleItemDatabaseDbo.optionSets: object expected");tt.optionSets[nt]=$root.data.ItemOptionSetDbo.fromObject(_e.optionSets[nt])}}if(_e.options){if(!Array.isArray(_e.options))throw TypeError(".data.SourceModuleItemDatabaseDbo.options: array expected");tt.options=[];for(let nt=0;nt<_e.options.length;++nt){if(typeof _e.options[nt]!="object")throw TypeError(".data.SourceModuleItemDatabaseDbo.options: object expected");tt.options[nt]=$root.data.ItemOptionSummaryDbo.fromObject(_e.options[nt])}}return tt},c.toObject=function(_e,tt){tt||(tt={});let nt={};if((tt.arrays||tt.defaults)&&(nt.items=[],nt.optionSets=[],nt.options=[]),tt.defaults&&(nt.sourceId=0,nt.sourceCode=""),_e.sourceId!=null&&_e.hasOwnProperty("sourceId")&&(nt.sourceId=_e.sourceId),_e.sourceCode!=null&&_e.hasOwnProperty("sourceCode")&&(nt.sourceCode=_e.sourceCode),_e.items&&_e.items.length){nt.items=[];for(let rt=0;rt<_e.items.length;++rt)nt.items[rt]=$root.data.ItemSummaryDbo.toObject(_e.items[rt],tt)}if(_e.optionSets&&_e.optionSets.length){nt.optionSets=[];for(let rt=0;rt<_e.optionSets.length;++rt)nt.optionSets[rt]=$root.data.ItemOptionSetDbo.toObject(_e.optionSets[rt],tt)}if(_e.options&&_e.options.length){nt.options=[];for(let rt=0;rt<_e.options.length;++rt)nt.options[rt]=$root.data.ItemOptionSummaryDbo.toObject(_e.options[rt],tt)}return nt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(_e){return _e===void 0&&(_e="type.googleapis.com"),_e+"/data.SourceModuleItemDatabaseDbo"},c}(),d.ItemSummaryDbo=function(){function c(et){if(this.tags=[],this.optionSets=[],et)for(let _e=Object.keys(et),tt=0;tt<_e.length;++tt)et[_e[tt]]!=null&&(this[_e[tt]]=et[_e[tt]])}return c.prototype.id=0,c.prototype.name="",c.prototype.tags=$util.emptyArray,c.prototype.cost=0,c.prototype.optionSets=$util.emptyArray,c.prototype.weight=0,c.create=function(_e){return new c(_e)},c.encode=function(_e,tt){if(tt||(tt=$Writer.create()),_e.id!=null&&Object.hasOwnProperty.call(_e,"id")&&tt.uint32(8).uint32(_e.id),_e.name!=null&&Object.hasOwnProperty.call(_e,"name")&&tt.uint32(18).string(_e.name),_e.tags!=null&&_e.tags.length)for(let nt=0;nt<_e.tags.length;++nt)tt.uint32(26).string(_e.tags[nt]);if(_e.cost!=null&&Object.hasOwnProperty.call(_e,"cost")&&tt.uint32(33).double(_e.cost),_e.optionSets!=null&&_e.optionSets.length){tt.uint32(42).fork();for(let nt=0;nt<_e.optionSets.length;++nt)tt.uint32(_e.optionSets[nt]);tt.ldelim()}return _e.weight!=null&&Object.hasOwnProperty.call(_e,"weight")&&tt.uint32(49).double(_e.weight),tt},c.encodeDelimited=function(_e,tt){return this.encode(_e,tt).ldelim()},c.decode=function(_e,tt){_e instanceof $Reader||(_e=$Reader.create(_e));let nt=tt===void 0?_e.len:_e.pos+tt,rt=new $root.data.ItemSummaryDbo;for(;_e.pos<nt;){let it=_e.uint32();switch(it>>>3){case 1:{rt.id=_e.uint32();break}case 2:{rt.name=_e.string();break}case 3:{rt.tags&&rt.tags.length||(rt.tags=[]),rt.tags.push(_e.string());break}case 4:{rt.cost=_e.double();break}case 5:{if(rt.optionSets&&rt.optionSets.length||(rt.optionSets=[]),(it&7)===2){let ot=_e.uint32()+_e.pos;for(;_e.pos<ot;)rt.optionSets.push(_e.uint32())}else rt.optionSets.push(_e.uint32());break}case 6:{rt.weight=_e.double();break}default:_e.skipType(it&7);break}}return rt},c.decodeDelimited=function(_e){return _e instanceof $Reader||(_e=new $Reader(_e)),this.decode(_e,_e.uint32())},c.verify=function(_e){if(typeof _e!="object"||_e===null)return"object expected";if(_e.id!=null&&_e.hasOwnProperty("id")&&!$util.isInteger(_e.id))return"id: integer expected";if(_e.name!=null&&_e.hasOwnProperty("name")&&!$util.isString(_e.name))return"name: string expected";if(_e.tags!=null&&_e.hasOwnProperty("tags")){if(!Array.isArray(_e.tags))return"tags: array expected";for(let tt=0;tt<_e.tags.length;++tt)if(!$util.isString(_e.tags[tt]))return"tags: string[] expected"}if(_e.cost!=null&&_e.hasOwnProperty("cost")&&typeof _e.cost!="number")return"cost: number expected";if(_e.optionSets!=null&&_e.hasOwnProperty("optionSets")){if(!Array.isArray(_e.optionSets))return"optionSets: array expected";for(let tt=0;tt<_e.optionSets.length;++tt)if(!$util.isInteger(_e.optionSets[tt]))return"optionSets: integer[] expected"}return _e.weight!=null&&_e.hasOwnProperty("weight")&&typeof _e.weight!="number"?"weight: number expected":null},c.fromObject=function(_e){if(_e instanceof $root.data.ItemSummaryDbo)return _e;let tt=new $root.data.ItemSummaryDbo;if(_e.id!=null&&(tt.id=_e.id>>>0),_e.name!=null&&(tt.name=String(_e.name)),_e.tags){if(!Array.isArray(_e.tags))throw TypeError(".data.ItemSummaryDbo.tags: array expected");tt.tags=[];for(let nt=0;nt<_e.tags.length;++nt)tt.tags[nt]=String(_e.tags[nt])}if(_e.cost!=null&&(tt.cost=Number(_e.cost)),_e.optionSets){if(!Array.isArray(_e.optionSets))throw TypeError(".data.ItemSummaryDbo.optionSets: array expected");tt.optionSets=[];for(let nt=0;nt<_e.optionSets.length;++nt)tt.optionSets[nt]=_e.optionSets[nt]>>>0}return _e.weight!=null&&(tt.weight=Number(_e.weight)),tt},c.toObject=function(_e,tt){tt||(tt={});let nt={};if((tt.arrays||tt.defaults)&&(nt.tags=[],nt.optionSets=[]),tt.defaults&&(nt.id=0,nt.name="",nt.cost=0,nt.weight=0),_e.id!=null&&_e.hasOwnProperty("id")&&(nt.id=_e.id),_e.name!=null&&_e.hasOwnProperty("name")&&(nt.name=_e.name),_e.tags&&_e.tags.length){nt.tags=[];for(let rt=0;rt<_e.tags.length;++rt)nt.tags[rt]=_e.tags[rt]}if(_e.cost!=null&&_e.hasOwnProperty("cost")&&(nt.cost=tt.json&&!isFinite(_e.cost)?String(_e.cost):_e.cost),_e.optionSets&&_e.optionSets.length){nt.optionSets=[];for(let rt=0;rt<_e.optionSets.length;++rt)nt.optionSets[rt]=_e.optionSets[rt]}return _e.weight!=null&&_e.hasOwnProperty("weight")&&(nt.weight=tt.json&&!isFinite(_e.weight)?String(_e.weight):_e.weight),nt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(_e){return _e===void 0&&(_e="type.googleapis.com"),_e+"/data.ItemSummaryDbo"},c}(),d.ItemDbo=function(){function c(et){if(this.tags=[],this.optionSets=[],et)for(let _e=Object.keys(et),tt=0;tt<_e.length;++tt)et[_e[tt]]!=null&&(this[_e[tt]]=et[_e[tt]])}return c.prototype.id=0,c.prototype.name="",c.prototype.tags=$util.emptyArray,c.prototype.cost=0,c.prototype.optionSets=$util.emptyArray,c.prototype.weight=0,c.prototype.description=null,c.create=function(_e){return new c(_e)},c.encode=function(_e,tt){if(tt||(tt=$Writer.create()),_e.id!=null&&Object.hasOwnProperty.call(_e,"id")&&tt.uint32(8).uint32(_e.id),_e.name!=null&&Object.hasOwnProperty.call(_e,"name")&&tt.uint32(18).string(_e.name),_e.tags!=null&&_e.tags.length)for(let nt=0;nt<_e.tags.length;++nt)tt.uint32(26).string(_e.tags[nt]);if(_e.cost!=null&&Object.hasOwnProperty.call(_e,"cost")&&tt.uint32(33).double(_e.cost),_e.optionSets!=null&&_e.optionSets.length){tt.uint32(42).fork();for(let nt=0;nt<_e.optionSets.length;++nt)tt.uint32(_e.optionSets[nt]);tt.ldelim()}return _e.weight!=null&&Object.hasOwnProperty.call(_e,"weight")&&tt.uint32(49).double(_e.weight),_e.description!=null&&Object.hasOwnProperty.call(_e,"description")&&$root.data.DescriptionDbo.encode(_e.description,tt.uint32(802).fork()).ldelim(),tt},c.encodeDelimited=function(_e,tt){return this.encode(_e,tt).ldelim()},c.decode=function(_e,tt){_e instanceof $Reader||(_e=$Reader.create(_e));let nt=tt===void 0?_e.len:_e.pos+tt,rt=new $root.data.ItemDbo;for(;_e.pos<nt;){let it=_e.uint32();switch(it>>>3){case 1:{rt.id=_e.uint32();break}case 2:{rt.name=_e.string();break}case 3:{rt.tags&&rt.tags.length||(rt.tags=[]),rt.tags.push(_e.string());break}case 4:{rt.cost=_e.double();break}case 5:{if(rt.optionSets&&rt.optionSets.length||(rt.optionSets=[]),(it&7)===2){let ot=_e.uint32()+_e.pos;for(;_e.pos<ot;)rt.optionSets.push(_e.uint32())}else rt.optionSets.push(_e.uint32());break}case 6:{rt.weight=_e.double();break}case 100:{rt.description=$root.data.DescriptionDbo.decode(_e,_e.uint32());break}default:_e.skipType(it&7);break}}return rt},c.decodeDelimited=function(_e){return _e instanceof $Reader||(_e=new $Reader(_e)),this.decode(_e,_e.uint32())},c.verify=function(_e){if(typeof _e!="object"||_e===null)return"object expected";if(_e.id!=null&&_e.hasOwnProperty("id")&&!$util.isInteger(_e.id))return"id: integer expected";if(_e.name!=null&&_e.hasOwnProperty("name")&&!$util.isString(_e.name))return"name: string expected";if(_e.tags!=null&&_e.hasOwnProperty("tags")){if(!Array.isArray(_e.tags))return"tags: array expected";for(let tt=0;tt<_e.tags.length;++tt)if(!$util.isString(_e.tags[tt]))return"tags: string[] expected"}if(_e.cost!=null&&_e.hasOwnProperty("cost")&&typeof _e.cost!="number")return"cost: number expected";if(_e.optionSets!=null&&_e.hasOwnProperty("optionSets")){if(!Array.isArray(_e.optionSets))return"optionSets: array expected";for(let tt=0;tt<_e.optionSets.length;++tt)if(!$util.isInteger(_e.optionSets[tt]))return"optionSets: integer[] expected"}if(_e.weight!=null&&_e.hasOwnProperty("weight")&&typeof _e.weight!="number")return"weight: number expected";if(_e.description!=null&&_e.hasOwnProperty("description")){let tt=$root.data.DescriptionDbo.verify(_e.description);if(tt)return"description."+tt}return null},c.fromObject=function(_e){if(_e instanceof $root.data.ItemDbo)return _e;let tt=new $root.data.ItemDbo;if(_e.id!=null&&(tt.id=_e.id>>>0),_e.name!=null&&(tt.name=String(_e.name)),_e.tags){if(!Array.isArray(_e.tags))throw TypeError(".data.ItemDbo.tags: array expected");tt.tags=[];for(let nt=0;nt<_e.tags.length;++nt)tt.tags[nt]=String(_e.tags[nt])}if(_e.cost!=null&&(tt.cost=Number(_e.cost)),_e.optionSets){if(!Array.isArray(_e.optionSets))throw TypeError(".data.ItemDbo.optionSets: array expected");tt.optionSets=[];for(let nt=0;nt<_e.optionSets.length;++nt)tt.optionSets[nt]=_e.optionSets[nt]>>>0}if(_e.weight!=null&&(tt.weight=Number(_e.weight)),_e.description!=null){if(typeof _e.description!="object")throw TypeError(".data.ItemDbo.description: object expected");tt.description=$root.data.DescriptionDbo.fromObject(_e.description)}return tt},c.toObject=function(_e,tt){tt||(tt={});let nt={};if((tt.arrays||tt.defaults)&&(nt.tags=[],nt.optionSets=[]),tt.defaults&&(nt.id=0,nt.name="",nt.cost=0,nt.weight=0,nt.description=null),_e.id!=null&&_e.hasOwnProperty("id")&&(nt.id=_e.id),_e.name!=null&&_e.hasOwnProperty("name")&&(nt.name=_e.name),_e.tags&&_e.tags.length){nt.tags=[];for(let rt=0;rt<_e.tags.length;++rt)nt.tags[rt]=_e.tags[rt]}if(_e.cost!=null&&_e.hasOwnProperty("cost")&&(nt.cost=tt.json&&!isFinite(_e.cost)?String(_e.cost):_e.cost),_e.optionSets&&_e.optionSets.length){nt.optionSets=[];for(let rt=0;rt<_e.optionSets.length;++rt)nt.optionSets[rt]=_e.optionSets[rt]}return _e.weight!=null&&_e.hasOwnProperty("weight")&&(nt.weight=tt.json&&!isFinite(_e.weight)?String(_e.weight):_e.weight),_e.description!=null&&_e.hasOwnProperty("description")&&(nt.description=$root.data.DescriptionDbo.toObject(_e.description,tt)),nt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(_e){return _e===void 0&&(_e="type.googleapis.com"),_e+"/data.ItemDbo"},c}(),d.ItemOptionSetDbo=function(){function c(et){if(this.pointCurrencyCost={},this.optionGroups=[],et)for(let _e=Object.keys(et),tt=0;tt<_e.length;++tt)et[_e[tt]]!=null&&(this[_e[tt]]=et[_e[tt]])}return c.prototype.id=0,c.prototype.hasPoints=!1,c.prototype.hasMaxPoints=!1,c.prototype.maxPoints=0,c.prototype.pointCurrencyCost=$util.emptyObject,c.prototype.optionGroups=$util.emptyArray,c.create=function(_e){return new c(_e)},c.encode=function(_e,tt){if(tt||(tt=$Writer.create()),_e.id!=null&&Object.hasOwnProperty.call(_e,"id")&&tt.uint32(8).uint32(_e.id),_e.hasPoints!=null&&Object.hasOwnProperty.call(_e,"hasPoints")&&tt.uint32(16).bool(_e.hasPoints),_e.hasMaxPoints!=null&&Object.hasOwnProperty.call(_e,"hasMaxPoints")&&tt.uint32(24).bool(_e.hasMaxPoints),_e.maxPoints!=null&&Object.hasOwnProperty.call(_e,"maxPoints")&&tt.uint32(32).uint32(_e.maxPoints),_e.pointCurrencyCost!=null&&Object.hasOwnProperty.call(_e,"pointCurrencyCost"))for(let nt=Object.keys(_e.pointCurrencyCost),rt=0;rt<nt.length;++rt)tt.uint32(42).fork().uint32(8).uint32(nt[rt]).uint32(17).double(_e.pointCurrencyCost[nt[rt]]).ldelim();if(_e.optionGroups!=null&&_e.optionGroups.length)for(let nt=0;nt<_e.optionGroups.length;++nt)$root.data.ItemOptionGroupDbo.encode(_e.optionGroups[nt],tt.uint32(50).fork()).ldelim();return tt},c.encodeDelimited=function(_e,tt){return this.encode(_e,tt).ldelim()},c.decode=function(_e,tt){_e instanceof $Reader||(_e=$Reader.create(_e));let nt=tt===void 0?_e.len:_e.pos+tt,rt=new $root.data.ItemOptionSetDbo,it,ot;for(;_e.pos<nt;){let st=_e.uint32();switch(st>>>3){case 1:{rt.id=_e.uint32();break}case 2:{rt.hasPoints=_e.bool();break}case 3:{rt.hasMaxPoints=_e.bool();break}case 4:{rt.maxPoints=_e.uint32();break}case 5:{rt.pointCurrencyCost===$util.emptyObject&&(rt.pointCurrencyCost={});let at=_e.uint32()+_e.pos;for(it=0,ot=0;_e.pos<at;){let lt=_e.uint32();switch(lt>>>3){case 1:it=_e.uint32();break;case 2:ot=_e.double();break;default:_e.skipType(lt&7);break}}rt.pointCurrencyCost[it]=ot;break}case 6:{rt.optionGroups&&rt.optionGroups.length||(rt.optionGroups=[]),rt.optionGroups.push($root.data.ItemOptionGroupDbo.decode(_e,_e.uint32()));break}default:_e.skipType(st&7);break}}return rt},c.decodeDelimited=function(_e){return _e instanceof $Reader||(_e=new $Reader(_e)),this.decode(_e,_e.uint32())},c.verify=function(_e){if(typeof _e!="object"||_e===null)return"object expected";if(_e.id!=null&&_e.hasOwnProperty("id")&&!$util.isInteger(_e.id))return"id: integer expected";if(_e.hasPoints!=null&&_e.hasOwnProperty("hasPoints")&&typeof _e.hasPoints!="boolean")return"hasPoints: boolean expected";if(_e.hasMaxPoints!=null&&_e.hasOwnProperty("hasMaxPoints")&&typeof _e.hasMaxPoints!="boolean")return"hasMaxPoints: boolean expected";if(_e.maxPoints!=null&&_e.hasOwnProperty("maxPoints")&&!$util.isInteger(_e.maxPoints))return"maxPoints: integer expected";if(_e.pointCurrencyCost!=null&&_e.hasOwnProperty("pointCurrencyCost")){if(!$util.isObject(_e.pointCurrencyCost))return"pointCurrencyCost: object expected";let tt=Object.keys(_e.pointCurrencyCost);for(let nt=0;nt<tt.length;++nt){if(!$util.key32Re.test(tt[nt]))return"pointCurrencyCost: integer key{k:uint32} expected";if(typeof _e.pointCurrencyCost[tt[nt]]!="number")return"pointCurrencyCost: number{k:uint32} expected"}}if(_e.optionGroups!=null&&_e.hasOwnProperty("optionGroups")){if(!Array.isArray(_e.optionGroups))return"optionGroups: array expected";for(let tt=0;tt<_e.optionGroups.length;++tt){let nt=$root.data.ItemOptionGroupDbo.verify(_e.optionGroups[tt]);if(nt)return"optionGroups."+nt}}return null},c.fromObject=function(_e){if(_e instanceof $root.data.ItemOptionSetDbo)return _e;let tt=new $root.data.ItemOptionSetDbo;if(_e.id!=null&&(tt.id=_e.id>>>0),_e.hasPoints!=null&&(tt.hasPoints=!!_e.hasPoints),_e.hasMaxPoints!=null&&(tt.hasMaxPoints=!!_e.hasMaxPoints),_e.maxPoints!=null&&(tt.maxPoints=_e.maxPoints>>>0),_e.pointCurrencyCost){if(typeof _e.pointCurrencyCost!="object")throw TypeError(".data.ItemOptionSetDbo.pointCurrencyCost: object expected");tt.pointCurrencyCost={};for(let nt=Object.keys(_e.pointCurrencyCost),rt=0;rt<nt.length;++rt)tt.pointCurrencyCost[nt[rt]]=Number(_e.pointCurrencyCost[nt[rt]])}if(_e.optionGroups){if(!Array.isArray(_e.optionGroups))throw TypeError(".data.ItemOptionSetDbo.optionGroups: array expected");tt.optionGroups=[];for(let nt=0;nt<_e.optionGroups.length;++nt){if(typeof _e.optionGroups[nt]!="object")throw TypeError(".data.ItemOptionSetDbo.optionGroups: object expected");tt.optionGroups[nt]=$root.data.ItemOptionGroupDbo.fromObject(_e.optionGroups[nt])}}return tt},c.toObject=function(_e,tt){tt||(tt={});let nt={};(tt.arrays||tt.defaults)&&(nt.optionGroups=[]),(tt.objects||tt.defaults)&&(nt.pointCurrencyCost={}),tt.defaults&&(nt.id=0,nt.hasPoints=!1,nt.hasMaxPoints=!1,nt.maxPoints=0),_e.id!=null&&_e.hasOwnProperty("id")&&(nt.id=_e.id),_e.hasPoints!=null&&_e.hasOwnProperty("hasPoints")&&(nt.hasPoints=_e.hasPoints),_e.hasMaxPoints!=null&&_e.hasOwnProperty("hasMaxPoints")&&(nt.hasMaxPoints=_e.hasMaxPoints),_e.maxPoints!=null&&_e.hasOwnProperty("maxPoints")&&(nt.maxPoints=_e.maxPoints);let rt;if(_e.pointCurrencyCost&&(rt=Object.keys(_e.pointCurrencyCost)).length){nt.pointCurrencyCost={};for(let it=0;it<rt.length;++it)nt.pointCurrencyCost[rt[it]]=tt.json&&!isFinite(_e.pointCurrencyCost[rt[it]])?String(_e.pointCurrencyCost[rt[it]]):_e.pointCurrencyCost[rt[it]]}if(_e.optionGroups&&_e.optionGroups.length){nt.optionGroups=[];for(let it=0;it<_e.optionGroups.length;++it)nt.optionGroups[it]=$root.data.ItemOptionGroupDbo.toObject(_e.optionGroups[it],tt)}return nt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(_e){return _e===void 0&&(_e="type.googleapis.com"),_e+"/data.ItemOptionSetDbo"},c}(),d.ItemOptionGroupDbo=function(){function c(et){if(this.optionTags=[],et)for(let _e=Object.keys(et),tt=0;tt<_e.length;++tt)et[_e[tt]]!=null&&(this[_e[tt]]=et[_e[tt]])}return c.prototype.name="",c.prototype.optionTags=$util.emptyArray,c.prototype.hasMaxSelectable=!1,c.prototype.maxSelectable=0,c.create=function(_e){return new c(_e)},c.encode=function(_e,tt){if(tt||(tt=$Writer.create()),_e.name!=null&&Object.hasOwnProperty.call(_e,"name")&&tt.uint32(10).string(_e.name),_e.optionTags!=null&&_e.optionTags.length){tt.uint32(18).fork();for(let nt=0;nt<_e.optionTags.length;++nt)tt.uint32(_e.optionTags[nt]);tt.ldelim()}return _e.hasMaxSelectable!=null&&Object.hasOwnProperty.call(_e,"hasMaxSelectable")&&tt.uint32(24).bool(_e.hasMaxSelectable),_e.maxSelectable!=null&&Object.hasOwnProperty.call(_e,"maxSelectable")&&tt.uint32(32).uint32(_e.maxSelectable),tt},c.encodeDelimited=function(_e,tt){return this.encode(_e,tt).ldelim()},c.decode=function(_e,tt){_e instanceof $Reader||(_e=$Reader.create(_e));let nt=tt===void 0?_e.len:_e.pos+tt,rt=new $root.data.ItemOptionGroupDbo;for(;_e.pos<nt;){let it=_e.uint32();switch(it>>>3){case 1:{rt.name=_e.string();break}case 2:{if(rt.optionTags&&rt.optionTags.length||(rt.optionTags=[]),(it&7)===2){let ot=_e.uint32()+_e.pos;for(;_e.pos<ot;)rt.optionTags.push(_e.uint32())}else rt.optionTags.push(_e.uint32());break}case 3:{rt.hasMaxSelectable=_e.bool();break}case 4:{rt.maxSelectable=_e.uint32();break}default:_e.skipType(it&7);break}}return rt},c.decodeDelimited=function(_e){return _e instanceof $Reader||(_e=new $Reader(_e)),this.decode(_e,_e.uint32())},c.verify=function(_e){if(typeof _e!="object"||_e===null)return"object expected";if(_e.name!=null&&_e.hasOwnProperty("name")&&!$util.isString(_e.name))return"name: string expected";if(_e.optionTags!=null&&_e.hasOwnProperty("optionTags")){if(!Array.isArray(_e.optionTags))return"optionTags: array expected";for(let tt=0;tt<_e.optionTags.length;++tt)if(!$util.isInteger(_e.optionTags[tt]))return"optionTags: integer[] expected"}return _e.hasMaxSelectable!=null&&_e.hasOwnProperty("hasMaxSelectable")&&typeof _e.hasMaxSelectable!="boolean"?"hasMaxSelectable: boolean expected":_e.maxSelectable!=null&&_e.hasOwnProperty("maxSelectable")&&!$util.isInteger(_e.maxSelectable)?"maxSelectable: integer expected":null},c.fromObject=function(_e){if(_e instanceof $root.data.ItemOptionGroupDbo)return _e;let tt=new $root.data.ItemOptionGroupDbo;if(_e.name!=null&&(tt.name=String(_e.name)),_e.optionTags){if(!Array.isArray(_e.optionTags))throw TypeError(".data.ItemOptionGroupDbo.optionTags: array expected");tt.optionTags=[];for(let nt=0;nt<_e.optionTags.length;++nt)tt.optionTags[nt]=_e.optionTags[nt]>>>0}return _e.hasMaxSelectable!=null&&(tt.hasMaxSelectable=!!_e.hasMaxSelectable),_e.maxSelectable!=null&&(tt.maxSelectable=_e.maxSelectable>>>0),tt},c.toObject=function(_e,tt){tt||(tt={});let nt={};if((tt.arrays||tt.defaults)&&(nt.optionTags=[]),tt.defaults&&(nt.name="",nt.hasMaxSelectable=!1,nt.maxSelectable=0),_e.name!=null&&_e.hasOwnProperty("name")&&(nt.name=_e.name),_e.optionTags&&_e.optionTags.length){nt.optionTags=[];for(let rt=0;rt<_e.optionTags.length;++rt)nt.optionTags[rt]=_e.optionTags[rt]}return _e.hasMaxSelectable!=null&&_e.hasOwnProperty("hasMaxSelectable")&&(nt.hasMaxSelectable=_e.hasMaxSelectable),_e.maxSelectable!=null&&_e.hasOwnProperty("maxSelectable")&&(nt.maxSelectable=_e.maxSelectable),nt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(_e){return _e===void 0&&(_e="type.googleapis.com"),_e+"/data.ItemOptionGroupDbo"},c}(),d.ItemOptionSummaryDbo=function(){function c(et){if(this.tags=[],et)for(let _e=Object.keys(et),tt=0;tt<_e.length;++tt)et[_e[tt]]!=null&&(this[_e[tt]]=et[_e[tt]])}return c.prototype.id=0,c.prototype.name="",c.prototype.baseNamePrefix="",c.prototype.baseNamePostfix="",c.prototype.pointCost=0,c.prototype.currencyCost=0,c.prototype.tags=$util.emptyArray,c.prototype.currencyCostByWeight=0,c.create=function(_e){return new c(_e)},c.encode=function(_e,tt){if(tt||(tt=$Writer.create()),_e.id!=null&&Object.hasOwnProperty.call(_e,"id")&&tt.uint32(8).uint32(_e.id),_e.name!=null&&Object.hasOwnProperty.call(_e,"name")&&tt.uint32(18).string(_e.name),_e.baseNamePrefix!=null&&Object.hasOwnProperty.call(_e,"baseNamePrefix")&&tt.uint32(26).string(_e.baseNamePrefix),_e.baseNamePostfix!=null&&Object.hasOwnProperty.call(_e,"baseNamePostfix")&&tt.uint32(34).string(_e.baseNamePostfix),_e.pointCost!=null&&Object.hasOwnProperty.call(_e,"pointCost")&&tt.uint32(40).uint32(_e.pointCost),_e.currencyCost!=null&&Object.hasOwnProperty.call(_e,"currencyCost")&&tt.uint32(49).double(_e.currencyCost),_e.tags!=null&&_e.tags.length){tt.uint32(58).fork();for(let nt=0;nt<_e.tags.length;++nt)tt.uint32(_e.tags[nt]);tt.ldelim()}return _e.currencyCostByWeight!=null&&Object.hasOwnProperty.call(_e,"currencyCostByWeight")&&tt.uint32(65).double(_e.currencyCostByWeight),tt},c.encodeDelimited=function(_e,tt){return this.encode(_e,tt).ldelim()},c.decode=function(_e,tt){_e instanceof $Reader||(_e=$Reader.create(_e));let nt=tt===void 0?_e.len:_e.pos+tt,rt=new $root.data.ItemOptionSummaryDbo;for(;_e.pos<nt;){let it=_e.uint32();switch(it>>>3){case 1:{rt.id=_e.uint32();break}case 2:{rt.name=_e.string();break}case 3:{rt.baseNamePrefix=_e.string();break}case 4:{rt.baseNamePostfix=_e.string();break}case 5:{rt.pointCost=_e.uint32();break}case 6:{rt.currencyCost=_e.double();break}case 7:{if(rt.tags&&rt.tags.length||(rt.tags=[]),(it&7)===2){let ot=_e.uint32()+_e.pos;for(;_e.pos<ot;)rt.tags.push(_e.uint32())}else rt.tags.push(_e.uint32());break}case 8:{rt.currencyCostByWeight=_e.double();break}default:_e.skipType(it&7);break}}return rt},c.decodeDelimited=function(_e){return _e instanceof $Reader||(_e=new $Reader(_e)),this.decode(_e,_e.uint32())},c.verify=function(_e){if(typeof _e!="object"||_e===null)return"object expected";if(_e.id!=null&&_e.hasOwnProperty("id")&&!$util.isInteger(_e.id))return"id: integer expected";if(_e.name!=null&&_e.hasOwnProperty("name")&&!$util.isString(_e.name))return"name: string expected";if(_e.baseNamePrefix!=null&&_e.hasOwnProperty("baseNamePrefix")&&!$util.isString(_e.baseNamePrefix))return"baseNamePrefix: string expected";if(_e.baseNamePostfix!=null&&_e.hasOwnProperty("baseNamePostfix")&&!$util.isString(_e.baseNamePostfix))return"baseNamePostfix: string expected";if(_e.pointCost!=null&&_e.hasOwnProperty("pointCost")&&!$util.isInteger(_e.pointCost))return"pointCost: integer expected";if(_e.currencyCost!=null&&_e.hasOwnProperty("currencyCost")&&typeof _e.currencyCost!="number")return"currencyCost: number expected";if(_e.tags!=null&&_e.hasOwnProperty("tags")){if(!Array.isArray(_e.tags))return"tags: array expected";for(let tt=0;tt<_e.tags.length;++tt)if(!$util.isInteger(_e.tags[tt]))return"tags: integer[] expected"}return _e.currencyCostByWeight!=null&&_e.hasOwnProperty("currencyCostByWeight")&&typeof _e.currencyCostByWeight!="number"?"currencyCostByWeight: number expected":null},c.fromObject=function(_e){if(_e instanceof $root.data.ItemOptionSummaryDbo)return _e;let tt=new $root.data.ItemOptionSummaryDbo;if(_e.id!=null&&(tt.id=_e.id>>>0),_e.name!=null&&(tt.name=String(_e.name)),_e.baseNamePrefix!=null&&(tt.baseNamePrefix=String(_e.baseNamePrefix)),_e.baseNamePostfix!=null&&(tt.baseNamePostfix=String(_e.baseNamePostfix)),_e.pointCost!=null&&(tt.pointCost=_e.pointCost>>>0),_e.currencyCost!=null&&(tt.currencyCost=Number(_e.currencyCost)),_e.tags){if(!Array.isArray(_e.tags))throw TypeError(".data.ItemOptionSummaryDbo.tags: array expected");tt.tags=[];for(let nt=0;nt<_e.tags.length;++nt)tt.tags[nt]=_e.tags[nt]>>>0}return _e.currencyCostByWeight!=null&&(tt.currencyCostByWeight=Number(_e.currencyCostByWeight)),tt},c.toObject=function(_e,tt){tt||(tt={});let nt={};if((tt.arrays||tt.defaults)&&(nt.tags=[]),tt.defaults&&(nt.id=0,nt.name="",nt.baseNamePrefix="",nt.baseNamePostfix="",nt.pointCost=0,nt.currencyCost=0,nt.currencyCostByWeight=0),_e.id!=null&&_e.hasOwnProperty("id")&&(nt.id=_e.id),_e.name!=null&&_e.hasOwnProperty("name")&&(nt.name=_e.name),_e.baseNamePrefix!=null&&_e.hasOwnProperty("baseNamePrefix")&&(nt.baseNamePrefix=_e.baseNamePrefix),_e.baseNamePostfix!=null&&_e.hasOwnProperty("baseNamePostfix")&&(nt.baseNamePostfix=_e.baseNamePostfix),_e.pointCost!=null&&_e.hasOwnProperty("pointCost")&&(nt.pointCost=_e.pointCost),_e.currencyCost!=null&&_e.hasOwnProperty("currencyCost")&&(nt.currencyCost=tt.json&&!isFinite(_e.currencyCost)?String(_e.currencyCost):_e.currencyCost),_e.tags&&_e.tags.length){nt.tags=[];for(let rt=0;rt<_e.tags.length;++rt)nt.tags[rt]=_e.tags[rt]}return _e.currencyCostByWeight!=null&&_e.hasOwnProperty("currencyCostByWeight")&&(nt.currencyCostByWeight=tt.json&&!isFinite(_e.currencyCostByWeight)?String(_e.currencyCostByWeight):_e.currencyCostByWeight),nt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(_e){return _e===void 0&&(_e="type.googleapis.com"),_e+"/data.ItemOptionSummaryDbo"},c}(),d.ItemOptionDbo=function(){function c(et){if(this.tags=[],et)for(let _e=Object.keys(et),tt=0;tt<_e.length;++tt)et[_e[tt]]!=null&&(this[_e[tt]]=et[_e[tt]])}return c.prototype.id=0,c.prototype.name="",c.prototype.baseNamePrefix="",c.prototype.baseNamePostfix="",c.prototype.pointCost=0,c.prototype.currencyCost=0,c.prototype.tags=$util.emptyArray,c.prototype.currencyCostByWeight=0,c.prototype.description=null,c.create=function(_e){return new c(_e)},c.encode=function(_e,tt){if(tt||(tt=$Writer.create()),_e.id!=null&&Object.hasOwnProperty.call(_e,"id")&&tt.uint32(8).uint32(_e.id),_e.name!=null&&Object.hasOwnProperty.call(_e,"name")&&tt.uint32(18).string(_e.name),_e.baseNamePrefix!=null&&Object.hasOwnProperty.call(_e,"baseNamePrefix")&&tt.uint32(26).string(_e.baseNamePrefix),_e.baseNamePostfix!=null&&Object.hasOwnProperty.call(_e,"baseNamePostfix")&&tt.uint32(34).string(_e.baseNamePostfix),_e.pointCost!=null&&Object.hasOwnProperty.call(_e,"pointCost")&&tt.uint32(40).uint32(_e.pointCost),_e.currencyCost!=null&&Object.hasOwnProperty.call(_e,"currencyCost")&&tt.uint32(49).double(_e.currencyCost),_e.tags!=null&&_e.tags.length){tt.uint32(58).fork();for(let nt=0;nt<_e.tags.length;++nt)tt.uint32(_e.tags[nt]);tt.ldelim()}return _e.currencyCostByWeight!=null&&Object.hasOwnProperty.call(_e,"currencyCostByWeight")&&tt.uint32(65).double(_e.currencyCostByWeight),_e.description!=null&&Object.hasOwnProperty.call(_e,"description")&&$root.data.DescriptionDbo.encode(_e.description,tt.uint32(802).fork()).ldelim(),tt},c.encodeDelimited=function(_e,tt){return this.encode(_e,tt).ldelim()},c.decode=function(_e,tt){_e instanceof $Reader||(_e=$Reader.create(_e));let nt=tt===void 0?_e.len:_e.pos+tt,rt=new $root.data.ItemOptionDbo;for(;_e.pos<nt;){let it=_e.uint32();switch(it>>>3){case 1:{rt.id=_e.uint32();break}case 2:{rt.name=_e.string();break}case 3:{rt.baseNamePrefix=_e.string();break}case 4:{rt.baseNamePostfix=_e.string();break}case 5:{rt.pointCost=_e.uint32();break}case 6:{rt.currencyCost=_e.double();break}case 7:{if(rt.tags&&rt.tags.length||(rt.tags=[]),(it&7)===2){let ot=_e.uint32()+_e.pos;for(;_e.pos<ot;)rt.tags.push(_e.uint32())}else rt.tags.push(_e.uint32());break}case 8:{rt.currencyCostByWeight=_e.double();break}case 100:{rt.description=$root.data.DescriptionDbo.decode(_e,_e.uint32());break}default:_e.skipType(it&7);break}}return rt},c.decodeDelimited=function(_e){return _e instanceof $Reader||(_e=new $Reader(_e)),this.decode(_e,_e.uint32())},c.verify=function(_e){if(typeof _e!="object"||_e===null)return"object expected";if(_e.id!=null&&_e.hasOwnProperty("id")&&!$util.isInteger(_e.id))return"id: integer expected";if(_e.name!=null&&_e.hasOwnProperty("name")&&!$util.isString(_e.name))return"name: string expected";if(_e.baseNamePrefix!=null&&_e.hasOwnProperty("baseNamePrefix")&&!$util.isString(_e.baseNamePrefix))return"baseNamePrefix: string expected";if(_e.baseNamePostfix!=null&&_e.hasOwnProperty("baseNamePostfix")&&!$util.isString(_e.baseNamePostfix))return"baseNamePostfix: string expected";if(_e.pointCost!=null&&_e.hasOwnProperty("pointCost")&&!$util.isInteger(_e.pointCost))return"pointCost: integer expected";if(_e.currencyCost!=null&&_e.hasOwnProperty("currencyCost")&&typeof _e.currencyCost!="number")return"currencyCost: number expected";if(_e.tags!=null&&_e.hasOwnProperty("tags")){if(!Array.isArray(_e.tags))return"tags: array expected";for(let tt=0;tt<_e.tags.length;++tt)if(!$util.isInteger(_e.tags[tt]))return"tags: integer[] expected"}if(_e.currencyCostByWeight!=null&&_e.hasOwnProperty("currencyCostByWeight")&&typeof _e.currencyCostByWeight!="number")return"currencyCostByWeight: number expected";if(_e.description!=null&&_e.hasOwnProperty("description")){let tt=$root.data.DescriptionDbo.verify(_e.description);if(tt)return"description."+tt}return null},c.fromObject=function(_e){if(_e instanceof $root.data.ItemOptionDbo)return _e;let tt=new $root.data.ItemOptionDbo;if(_e.id!=null&&(tt.id=_e.id>>>0),_e.name!=null&&(tt.name=String(_e.name)),_e.baseNamePrefix!=null&&(tt.baseNamePrefix=String(_e.baseNamePrefix)),_e.baseNamePostfix!=null&&(tt.baseNamePostfix=String(_e.baseNamePostfix)),_e.pointCost!=null&&(tt.pointCost=_e.pointCost>>>0),_e.currencyCost!=null&&(tt.currencyCost=Number(_e.currencyCost)),_e.tags){if(!Array.isArray(_e.tags))throw TypeError(".data.ItemOptionDbo.tags: array expected");tt.tags=[];for(let nt=0;nt<_e.tags.length;++nt)tt.tags[nt]=_e.tags[nt]>>>0}if(_e.currencyCostByWeight!=null&&(tt.currencyCostByWeight=Number(_e.currencyCostByWeight)),_e.description!=null){if(typeof _e.description!="object")throw TypeError(".data.ItemOptionDbo.description: object expected");tt.description=$root.data.DescriptionDbo.fromObject(_e.description)}return tt},c.toObject=function(_e,tt){tt||(tt={});let nt={};if((tt.arrays||tt.defaults)&&(nt.tags=[]),tt.defaults&&(nt.id=0,nt.name="",nt.baseNamePrefix="",nt.baseNamePostfix="",nt.pointCost=0,nt.currencyCost=0,nt.currencyCostByWeight=0,nt.description=null),_e.id!=null&&_e.hasOwnProperty("id")&&(nt.id=_e.id),_e.name!=null&&_e.hasOwnProperty("name")&&(nt.name=_e.name),_e.baseNamePrefix!=null&&_e.hasOwnProperty("baseNamePrefix")&&(nt.baseNamePrefix=_e.baseNamePrefix),_e.baseNamePostfix!=null&&_e.hasOwnProperty("baseNamePostfix")&&(nt.baseNamePostfix=_e.baseNamePostfix),_e.pointCost!=null&&_e.hasOwnProperty("pointCost")&&(nt.pointCost=_e.pointCost),_e.currencyCost!=null&&_e.hasOwnProperty("currencyCost")&&(nt.currencyCost=tt.json&&!isFinite(_e.currencyCost)?String(_e.currencyCost):_e.currencyCost),_e.tags&&_e.tags.length){nt.tags=[];for(let rt=0;rt<_e.tags.length;++rt)nt.tags[rt]=_e.tags[rt]}return _e.currencyCostByWeight!=null&&_e.hasOwnProperty("currencyCostByWeight")&&(nt.currencyCostByWeight=tt.json&&!isFinite(_e.currencyCostByWeight)?String(_e.currencyCostByWeight):_e.currencyCostByWeight),_e.description!=null&&_e.hasOwnProperty("description")&&(nt.description=$root.data.DescriptionDbo.toObject(_e.description,tt)),nt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(_e){return _e===void 0&&(_e="type.googleapis.com"),_e+"/data.ItemOptionDbo"},c}(),d.IdDatabaseDbo=function(){function c(et){if(this.codeToId={},et)for(let _e=Object.keys(et),tt=0;tt<_e.length;++tt)et[_e[tt]]!=null&&(this[_e[tt]]=et[_e[tt]])}return c.prototype.codeToId=$util.emptyObject,c.create=function(_e){return new c(_e)},c.encode=function(_e,tt){if(tt||(tt=$Writer.create()),_e.codeToId!=null&&Object.hasOwnProperty.call(_e,"codeToId"))for(let nt=Object.keys(_e.codeToId),rt=0;rt<nt.length;++rt)tt.uint32(10).fork().uint32(10).string(nt[rt]).uint32(16).uint32(_e.codeToId[nt[rt]]).ldelim();return tt},c.encodeDelimited=function(_e,tt){return this.encode(_e,tt).ldelim()},c.decode=function(_e,tt){_e instanceof $Reader||(_e=$Reader.create(_e));let nt=tt===void 0?_e.len:_e.pos+tt,rt=new $root.data.IdDatabaseDbo,it,ot;for(;_e.pos<nt;){let st=_e.uint32();switch(st>>>3){case 1:{rt.codeToId===$util.emptyObject&&(rt.codeToId={});let at=_e.uint32()+_e.pos;for(it="",ot=0;_e.pos<at;){let lt=_e.uint32();switch(lt>>>3){case 1:it=_e.string();break;case 2:ot=_e.uint32();break;default:_e.skipType(lt&7);break}}rt.codeToId[it]=ot;break}default:_e.skipType(st&7);break}}return rt},c.decodeDelimited=function(_e){return _e instanceof $Reader||(_e=new $Reader(_e)),this.decode(_e,_e.uint32())},c.verify=function(_e){if(typeof _e!="object"||_e===null)return"object expected";if(_e.codeToId!=null&&_e.hasOwnProperty("codeToId")){if(!$util.isObject(_e.codeToId))return"codeToId: object expected";let tt=Object.keys(_e.codeToId);for(let nt=0;nt<tt.length;++nt)if(!$util.isInteger(_e.codeToId[tt[nt]]))return"codeToId: integer{k:string} expected"}return null},c.fromObject=function(_e){if(_e instanceof $root.data.IdDatabaseDbo)return _e;let tt=new $root.data.IdDatabaseDbo;if(_e.codeToId){if(typeof _e.codeToId!="object")throw TypeError(".data.IdDatabaseDbo.codeToId: object expected");tt.codeToId={};for(let nt=Object.keys(_e.codeToId),rt=0;rt<nt.length;++rt)tt.codeToId[nt[rt]]=_e.codeToId[nt[rt]]>>>0}return tt},c.toObject=function(_e,tt){tt||(tt={});let nt={};(tt.objects||tt.defaults)&&(nt.codeToId={});let rt;if(_e.codeToId&&(rt=Object.keys(_e.codeToId)).length){nt.codeToId={};for(let it=0;it<rt.length;++it)nt.codeToId[rt[it]]=_e.codeToId[rt[it]]}return nt},c.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},c.getTypeUrl=function(_e){return _e===void 0&&(_e="type.googleapis.com"),_e+"/data.IdDatabaseDbo"},c}(),d})();class Link{constructor(c){this.key=c}async resolve(c,et){const _e=await et.feature(this.key),tt=await(_e==null?void 0:_e.resolve(c,et));if(tt===void 0)throw new Error("Feature not found: "+this.key);return et.register(this.key),new ResolvedLink(tt)}}class ResolvedLink{constructor(c){this.feature=c}get children(){return[this.feature]}applyTo(c){this.feature.applyTo(c)}}const Gn=class Gn{constructor(c){this.traits=c}instance(c,et){return new FeatureStack(c,et,this.traits)}};cn(Gn,"Empty",new Gn([]));let Stack=Gn;class FeatureStack{constructor(c,et,_e){this.featureId=c,this.stackNumber=et,this.traits=_e}async resolve(c,et){return new ResolvedStack(this.featureId,this.stackNumber,await Promise.all(this.traits.map(_e=>_e.resolve(c,et))))}}class ResolvedStack{constructor(c,et,_e){this.featureId=c,this.stackNumber=et,this.children=_e}applyTo(c){this.children.forEach(et=>et.applyTo(c)),c.modifications(this.featureId,this.stackNumber)}}class FeatureModification{constructor(c,et){this.targetFeatureId=c,this.stackModifications=et}async resolve(c,et){return new ResolvedFeatureModification(this.targetFeatureId,await Promise.all(this.stackModifications.map(_e=>_e.resolve(c,et))))}}class ResolvedFeatureModification{constructor(c,et){this.targetFeatureId=c,this.stackModifications=et}get children(){return this.stackModifications}applyTo(c){this.stackModifications.forEach(et=>et.applyTo(c))}}class StackModification{constructor(c,et,_e,tt){this.targetFeatureId=c,this.targetStackCount=et,this.linksToAdd=_e,this.linksToRemove=tt}async resolve(c,et){return new ResolvedStackModification(this.targetFeatureId,this.targetStackCount,await Promise.all(this.linksToAdd.map(_e=>_e.resolve(c,et))),this.linksToRemove)}}class ResolvedStackModification{constructor(c,et,_e,tt){this.targetFeatureId=c,this.targetStackCount=et,this.linksToAdd=_e,this.linksToRemove=tt}applyTo(c){c.registerModification(this)}applyModification(c){this.linksToAdd.forEach(et=>et.applyTo(c)),this.linksToRemove.forEach(et=>c.increment(et,-1))}get children(){return this.linksToAdd}}class FixedStack{constructor(c,et){this.featureId=c,this.stacks=et}next(c){return(this.stacks[c-1]??Stack.Empty).instance(this.featureId,c+1)}resolve(c,et){const _e=et.count(this.featureId);return this.next(_e).resolve(c,et)}}class RepeatingStack{constructor(c,et){this.featureId=c,this.stack=et}async resolve(c,et){const _e=et.count(this.featureId);return this.stack.instance(this.featureId,_e+1).resolve(c,et)}}class ResolvedEntityContext{constructor(c,et){cn(this,"cache",{});cn(this,"counts",{});this.featureLoader=c,this.selections=et}async feature(c){const et=this.cache[c];if(et!==void 0)return et;const _e=await this.featureLoader(c);return _e!==void 0&&(this.cache[c]=_e),_e}selection(c){return this.selections[c]}swapSelections(c,et){const _e=this.selections[c];this.selections[c]=this.selections[et],this.selections[et]=_e,(this.selections[c]===void 0||this.selections[c]==="")&&delete this.selections[c],(this.selections[et]===void 0||this.selections[et]==="")&&delete this.selections[et]}register(c,et=1){c&&(this.counts[c]=(this.counts[c]??0)+et)}count(c){return this.counts[c]??0}}function traverseTrait(d,c){traverseTraitWithDepth(d,0,c)}function traverseTraitWithDepth(d,c,et){et(d,c)&&d.children.forEach(_e=>{traverseTraitWithDepth(_e,c+1,et)})}class CharacterTemplate{constructor(c){this.levelTemplates=c}async resolve(c,et){const _e=new ResolvedEntityContext(nt=>c.load(nt),et),tt=await Promise.all(this.levelTemplates.map(nt=>nt.resolve(_e)));return new ResolvedCharacterTemplate(tt)}}class ResolvedCharacterTemplate{constructor(c){this.resolvedLevelTemplates=c}atLevel(c){return new ResolvedCharacterTemplateAtLevel(c,this.resolvedLevelTemplates.filter(et=>et.levelNumber<=c))}}class ResolvedCharacterTemplateAtLevel{constructor(c,et){this.characterLevel=c,this.resolvedLevelTemplates=et}applyTo(c){this.resolvedLevelTemplates.forEach(et=>et.applyTo(c))}traverse(c){this.resolvedLevelTemplates.forEach(et=>et.traverse(c))}}class CharacterLevelTemplate{constructor(c,et){this.levelNumber=c,this.traits=et}async resolve(c){const et=Path.of(this.levelNumber>0?this.levelNumber:""),_e=this.traits.map(nt=>nt.resolve(et,c)),tt=await Promise.all(_e);return new ResolvedCharacterLevelTemplate(this.levelNumber,tt)}}class ResolvedCharacterLevelTemplate{constructor(c,et){this.levelNumber=c,this.traits=et}applyTo(c){this.traits.forEach(et=>et.applyTo(c))}traverse(c){this.traits.forEach(et=>traverseTrait(et,c))}}class Item{constructor(c,et,_e,tt,nt,rt,it,ot){this.itemId=c,this.sourceId=et,this.name=_e,this.cost=tt,this.weight=nt,this.tags=rt,this.optionSetIds=it,this.description=ot}}class ItemSummary{constructor(c,et,_e,tt,nt,rt,it){this.itemId=c,this.sourceId=et,this.name=_e,this.cost=tt,this.weight=nt,this.tags=rt,this.optionSetIds=it}get uid(){return this.itemId.toString()}}class ItemOptionSummary{constructor(c,et,_e,tt,nt,rt,it,ot){this.id=c,this.name=et,this.baseNamePrefix=_e,this.baseNamePostfix=tt,this.pointCost=nt,this.currencyCost=rt,this.currencyCostByWeight=it,this.tags=ot}}class ItemOption extends ItemOptionSummary{constructor(c,et,_e,tt,nt,rt,it,ot,st){super(c,et,tt,tt,nt,rt,it,ot),this.description=st}}class ItemOptionSet{constructor(c,et,_e,tt,nt,rt){this.id=c,this.hasPoints=et,this.hasMaxPoints=_e,this.maxPoints=tt,this.pointCurrencyCosts=nt,this.optionGroups=rt}calculatePointsUsed(c){let et=0;for(const _e of c)this.hasOption(_e)&&(et+=_e.pointCost);return et}hasOption(c){return this.optionGroups.some(et=>et.hasOption(c))}}function matchTags(d,c){return c.some(et=>d.includes(et))}function hasTag(d,c){return c.split("+").every(_e=>d.includes(_e.toLowerCase()))}class ItemOptionGroup{constructor(c,et,_e,tt){this.name=c,this.optionTags=et,this.hasMaxSelectable=_e,this.maxSelectable=tt}hasOption(c){return matchTags(c.tags,this.optionTags)}}const StacksDbo=data.StacksDbo,StackDbo=data.StackDbo,FeatureSelectChoiceSortByDbo=data.FeatureSelectChoiceSortByDbo;function decodeDescription(d){return new Description((d==null?void 0:d.text)??"",(d==null?void 0:d.sections)??{})}function decodeFeatureSummary(d){return new FeatureSummary(d.id,d.name,d.label??void 0,d.tags,d.enabledFormula,d.maxStacks??null)}function decodeFeature(d){var c,et;return new Feature(d.id,d.name,d.label??void 0,d.tags,d.enabledFormula,d.maxStacks??null,new Description(((c=d.description)==null?void 0:c.text)??"",((et=d.description)==null?void 0:et.sections)??{}),[decodeStacks(d.id,d.stacks??new StacksDbo)])}function decodeItemSummary(d,c){return new ItemSummary(d.id,c,d.name,d.cost,d.weight,d.tags??[],d.optionSets??[])}function decodeItem(d,c){return new Item(d.id,c,d.name,d.cost,d.weight,d.tags??[],d.optionSets??[],decodeDescription(d.description))}function decodeItemOptionSummary(d){return new ItemOptionSummary(d.id,d.name,d.baseNamePrefix,d.baseNamePostfix,d.pointCost,d.currencyCost,d.currencyCostByWeight,d.tags)}function decodeItemOption(d){return new ItemOption(d.id,d.name,d.baseNamePrefix,d.baseNamePostfix,d.pointCost,d.currencyCost,d.currencyCostByWeight,d.tags,decodeDescription(d.description))}function decodeItemOptionGroup(d){return new ItemOptionGroup(d.name,d.optionTags,d.hasMaxSelectable,d.maxSelectable)}function decodeItemOptionSet(d){return new ItemOptionSet(d.id,d.hasPoints,d.hasMaxPoints,d.maxPoints,d.pointCurrencyCost,d.optionGroups.map(decodeItemOptionGroup))}function decodeEffect(d){let c;if(d.addAction)c=new AddEffect(d.addAction.targetKey,d.addAction.numberDelta);else if(d.setAction&&d.setAction.formula!==void 0&&d.setAction.formula!==null)c=new SetFormulaEffect(d.setAction.targetKey,d.setAction.formula);else if(d.setAction&&d.setAction.numberValue!==void 0&&d.setAction.numberValue!==null)c=new SetNumberEffect(d.setAction.targetKey,d.setAction.numberValue);else throw new Error("Unknown effect: "+JSON.stringify(d));return c}function decodeChoice(d){var c,et,_e,tt,nt,rt,it,ot,st,at;switch(d.input){case"text":return new TextChoice(d.choiceId,d.label,d.type,d.repeating?1:0);case"featureSelect":return d.repeating?new MultiSelectChoice(d.choiceId,d.label,d.type,((c=d.featureSelect)==null?void 0:c.optionTags)??[],((et=d.featureSelect)==null?void 0:et.featureIds)??[],((tt=(_e=d.featureSelect)==null?void 0:_e.categories)==null?void 0:tt.map(decodeFeatureSelectCategory))??[],decodeFeatureSelectSortBy((nt=d.featureSelect)==null?void 0:nt.sortBy),d.repeating?1:0):new SelectChoice(d.choiceId,d.label,d.type,((rt=d.featureSelect)==null?void 0:rt.optionTags)??[],((it=d.featureSelect)==null?void 0:it.featureIds)??[],((st=(ot=d.featureSelect)==null?void 0:ot.categories)==null?void 0:st.map(decodeFeatureSelectCategory))??[],decodeFeatureSelectSortBy((at=d.featureSelect)==null?void 0:at.sortBy),d.repeating?1:0);default:throw new Error("Unknown choice type: "+d.input)}}function decodeFeatureSelectCategory(d){return new FeatureSelectCategory(d.label,d.tag)}function decodeFeatureSelectSortBy(d){switch(d){case FeatureSelectChoiceSortByDbo.FEATURE_SELECT_CHOICE_SORTBY_NAME:return"name";default:return"none"}}function decodeLink(d){return new Link(d)}function decodeStack(d){return new Stack([...d.effects.map(decodeEffect),...d.links.map(decodeLink),...d.choices.map(decodeChoice),...d.featureModifications.map(decodeFeatureModification)])}function decodeStacks(d,c){var et;switch(c.stackable){case"fixedStack":return new FixedStack(d,((et=c.fixedStack)==null?void 0:et.stacks.map(decodeStack))??[]);case"repeatingStack":return new RepeatingStack(d,decodeStack(c.repeatingStack??new StackDbo));default:return new RepeatingStack(d,Stack.Empty)}}function decodeFeatureModification(d){return new FeatureModification(d.targetFeatureId,d.stackModifications.map(c=>decodeStackModification(d.targetFeatureId,c)))}function decodeStackModification(d,c){return new StackModification(d,c.targetStackCount,c.linksToAdd.map(et=>new Link(et)),c.linksToRemove)}function decodeCharacterTemplate(d){return new CharacterTemplate(d.levels.map(decodeCharacterLevelTemplate))}function decodeCharacterLevelTemplate(d){return new CharacterLevelTemplate(d.levelNumber,[...d.effects.map(decodeEffect),...d.links.map(decodeLink),...d.choices.map(decodeChoice)])}const ItemDbo=data.ItemDbo,FeatureDbo=data.FeatureDbo,SourceModuleItemDatabaseDbo=data.SourceModuleItemDatabaseDbo,ItemOptionDbo=data.ItemOptionDbo;class SourceModule{query(c){return c.some(et=>hasTag(Array.from(this.tags),et))?this.features().filter(et=>c.some(_e=>_e===this.sourceCode||hasTag(et.tags,_e))):[]}}class SourceModuleItemDatabase{constructor(c,et,_e,tt,nt){this.sourceId=c,this.sourceCode=et,this.summaryById=_e,this.optionsById=tt,this.optionSetsById=nt}summaries(){return Object.values(this.summaryById)}async load(c){const et=c.toString(),_e=await fetchProto(`db/${this.sourceCode}/${et}.bin`,ItemDbo.decode);return decodeItem(_e,this.sourceId)}item(c){return this.summaryById[c]}option(c){return this.optionsById[c]}optionSet(c){return this.optionSetsById[c]}options(){return Object.values(this.optionsById)}async optionDetails(c){const et=c.toString(),_e=await fetchProto(`db/${this.sourceCode}/${et}.bin`,ItemOptionDbo.decode);return decodeItemOption(_e)}}class ExternalSourceModule extends SourceModule{constructor(c,et,_e){super(),this.sourceCode=c,this.featuresById=et,this.tags=_e}static create(c,et){const _e={};let tt=new Set;for(let nt of et){_e[nt.key]=nt;for(const rt of nt.tags)tt=tt.add(rt)}return new ExternalSourceModule(c,_e,tt)}features(){return Object.values(this.featuresById)}feature(c){return this.featuresById[c]}async load(c){const et=c.replace(":","_").replace("#","_"),_e=await fetchProto(`db/${this.sourceCode}/${et}.bin`,FeatureDbo.decode);return decodeFeature(_e)}async itemDatabase(){const c=await fetchProto(`db/${this.sourceCode}_items.bin`,SourceModuleItemDatabaseDbo.decode),et=c.items.map(rt=>decodeItemSummary(rt,c.sourceId)),_e={};et.forEach(rt=>_e[rt.itemId]=rt);const tt={};c.options.forEach(rt=>{const it=decodeItemOptionSummary(rt);tt[it.id]=it});const nt={};return c.optionSets.forEach(rt=>{const it=decodeItemOptionSet(rt);nt[it.id]=it}),new SourceModuleItemDatabase(c.sourceId,this.sourceCode,_e,tt,nt)}}const CharacterTemplateDbo=data.CharacterTemplateDbo,SourceModuleDbo=data.SourceModuleDbo,Modules=[loadModule("PZO1110"),loadModule("PZO1114"),loadModule("PZO1115"),loadModule("PZO1117"),loadModule("PZO1118"),loadModule("PZO1123"),loadModule("PZO1129"),loadModule("PZO1131"),loadModule("PZO1132"),loadModule("PZO9476")];async function loadBaseCharacterTemplate(){const d=await fetchProto("db/character_template.bin",CharacterTemplateDbo.decode);return decodeCharacterTemplate(d)}async function loadModule(d){const c=await fetchProto(`db/${d}.bin`,SourceModuleDbo.decode);return ExternalSourceModule.create(c.sourceId,c.features.map(decodeFeatureSummary))}async function initializePathfinderDatabase(){const d=await Promise.all(Modules);return new Database(d)}class EquipmentSet{constructor(c,et,_e,tt,nt){this.id=c,this.name=et,this.budget=_e,this.equipment=tt,this.itemDatabase=nt}static unpack(c,et){var _e;return new EquipmentSet(et.id,et.name,et.budget??void 0,((_e=et.equipment)==null?void 0:_e.map(tt=>Equipment.unpack(c,tt)))??[],c)}pack(){return{id:this.id,name:this.name,budget:this.budget??null,equipment:this.equipment.map(c=>c.pack())}}static create(c,et){return new EquipmentSet(v4(),c,void 0,[],et)}setBudget(c){return new EquipmentSet(this.id,this.name,c,this.equipment,this.itemDatabase)}setEquipment(c){return new EquipmentSet(this.id,this.name,this.budget,c,this.itemDatabase)}add(c,et){const _e=this.itemDatabase.summary(c),tt=this.itemDatabase.options(et);return _e?this.setEquipment([...this.equipment,Equipment.create(_e,!0,tt,this.itemDatabase)]):(console.error("No item found with ID #"+c),this)}}class Equipment{constructor(c,et,_e,tt,nt,rt,it){this.uid=c,this.name=et,this.cost=_e,this.weight=tt,this.item=nt,this.options=rt,this.included=it}static unpack(c,et){const[_e,tt,...nt]=et,rt=c.summary(_e);if(!rt)throw new Error("Unknown item ID: "+_e);const it=nt.map(ot=>c.option(ot)).filter(ot=>ot!==void 0);return Equipment.create(rt,tt===1,it,c)}static create(c,et,_e,tt){let nt=c.name;for(let it of _e)it.baseNamePrefix.length>0&&(nt=it.baseNamePrefix+" "+nt),it.baseNamePostfix.length>0&&(nt=nt+" "+it.baseNamePostfix);let rt=c.cost;for(let it of _e)rt+=it.currencyCost;for(let it of c.optionSetIds){const ot=tt.optionSet(it);if(!ot)continue;let st=0;for(let at of _e)for(let lt of ot.optionGroups)if(matchTags(lt.optionTags,at.tags)){st+=at.pointCost;break}st>0&&(rt+=(ot==null?void 0:ot.pointCurrencyCosts[st])??0)}return new Equipment(v4(),nt,rt,c.weight,c,_e,et)}pack(){return[this.item.itemId,this.included?1:0,...this.options.map(c=>c.id)]}include(c){return new Equipment(this.uid,this.name,this.cost,this.weight,this.item,this.options,c)}duplicate(){return new Equipment(v4(),this.name,this.cost,this.weight,this.item,this.options,this.included)}}class EquipmentSetStore{constructor(c){this.database=c}async list(){const c=await this.loadAllPacked();return await Promise.all(c.map(et=>EquipmentSet.unpack(this.database,et)))}async load(c){const et=await this.loadPacked(c);if(et)return await this.unpack(et)}async save(c){const et=c.pack();return this.savePacked(et)}async create(c){let et=EquipmentSet.create(c,this.database);return await this.save(et),et}async delete(c){await this.deletePacked(c)}async unpack(c){return EquipmentSet.unpack(this.database,c)}}class FirebaseEquipmentSetStore extends EquipmentSetStore{constructor(c){super(c)}async loadPacked(c){const et=getActiveUser();if(!et){console.warn("Unable to access Firebase: no user logged in");return}const _e=await timedAsync(()=>FirebaseRepository.load(et.id,"equipment",c),"Loading from Firebase");if(!_e){console.warn("No Equipment Set found for: "+c);return}return{id:_e.id,name:_e.name,budget:_e.budget,equipment:_e.equipment}}async loadAllPacked(){const c=getActiveUser();return c?(await FirebaseRepository.loadAll(c.id,"equipment")??[]).map(_e=>({id:_e.id,name:_e.name,budget:_e.budget,equipment:_e.equipment})):(console.warn("Unable to access Firebase: no user logged in"),[])}async savePacked(c){const et=getActiveUser();if(!et){console.warn("Unable to access Firebase: no user logged in");return}await FirebaseRepository.save(et.id,"equipment",c.id,c)}async deletePacked(c){const et=getActiveUser();if(!et){console.warn("Unable to access Firebase: no user logged in");return}await FirebaseRepository.delete(et.id,"equipment",c)}}let globalDatabase,globalCharacterStore,globalEquipmentSetStore;async function initializeCharacterStore(){const d=await loadBaseCharacterTemplate(),c=await withGlobalDatabase();return new FirebaseCharacterStore(d,c)}async function initializeEquipmentSetStore(){const d=await withGlobalDatabase();return new FirebaseEquipmentSetStore(await d.itemDatabase())}async function withGlobalCharacterStore(){return globalCharacterStore||(globalCharacterStore=initializeCharacterStore()),globalCharacterStore}async function withGlobalEquipmentSetStore(){return globalEquipmentSetStore||(globalEquipmentSetStore=initializeEquipmentSetStore()),globalEquipmentSetStore}function withGlobalDatabase(){return globalDatabase||(globalDatabase=initializePathfinderDatabase()),globalDatabase}async function characterListLoader(){return{characterStore:await withGlobalCharacterStore()}}function CharacterListRoute(){const{characterStore:d}=useLoaderData();return jsxRuntimeExports.jsx(RequiresAuth,{children:jsxRuntimeExports.jsx(CharacterStoreContext.Provider,{value:d,children:jsxRuntimeExports.jsx(CharacterList,{})})})}const prerequisiteHeader="_prerequisiteHeader_1oscz_1",prerequisites="_prerequisites_1oscz_8",prerequisitesValid="_prerequisitesValid_1oscz_15 _prerequisites_1oscz_8",prerequisitesInvalid="_prerequisitesInvalid_1oscz_21 _prerequisites_1oscz_8",p="_p_1oscz_1",sectionLabel="_sectionLabel_1oscz_31",styles$L={prerequisiteHeader,prerequisites,prerequisitesValid,prerequisitesInvalid,p,sectionLabel},block="_block_1egrb_1",element$4="_element_1egrb_7",elementInvalid="_elementInvalid_1egrb_11 _element_1egrb_7",blockHeader="_blockHeader_1egrb_16",tooltip="_tooltip_1egrb_22",styles$K={block,element:element$4,elementInvalid,blockHeader,tooltip};function PrerequisiteList({formula:d,validation:c}){const et=jsxRuntimeExports.jsx(Tooltip$1,{className:styles$K.tooltip,children:d});return jsxRuntimeExports.jsx(OverlayTrigger,{placement:"bottom",trigger:["hover","focus"],overlay:et,children:jsxRuntimeExports.jsx("div",{children:c.entries.map((_e,tt)=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(PrerequisiteValidationEntryBlock,{entry:_e})},tt))})})}function PrerequisiteValidationEntryBlock({entry:d}){return jsxRuntimeExports.jsx("span",{className:classNames([d.valid?styles$K.element:styles$K.elementInvalid]),children:d.description})}function FeatureDescription({feature:d,description:c}){c??(c="description"in d?d.description:void 0),c??(c=Description.empty());const et=reactExports.useMemo(()=>{if(!c||c.text==="")return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});let _e=splitIntoParagraphs(c.text);return(!c.sections||Object.keys(c.sections).length>0)&&(_e=jsxRuntimeExports.jsx("i",{children:_e})),jsxRuntimeExports.jsx("span",{children:_e})},[c]);return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:styles$L.p,children:et}),Object.keys(c.sections).map(_e=>jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsxs("span",{className:styles$L.sectionLabel,children:[_e,":"]})," ",jsxRuntimeExports.jsx("span",{className:styles$L.p,children:c==null?void 0:c.sections[_e]})]},_e))]})}function splitIntoParagraphs(d){return d.split(/\n+/).map((c,et)=>jsxRuntimeExports.jsx("p",{children:c},et))}function SelectionFeatureDescription({feature:d,description:c,characterAtLevel:et}){const _e=useDatabase(),tt=reactExports.useMemo(()=>!d||!et?PrerequisiteValidation.Empty:d.checkPrerequisites(et,_e),[d,et]),nt=reactExports.useMemo(()=>tt.isValid(),[tt]),rt=!tt.isEmpty();return jsxRuntimeExports.jsxs("div",{children:[rt&&et!==void 0&&jsxRuntimeExports.jsxs("div",{className:nt?styles$L.prerequisitesValid:styles$L.prerequisitesInvalid,children:[jsxRuntimeExports.jsx("div",{className:styles$L.prerequisiteHeader,children:"Prerequisites"}),jsxRuntimeExports.jsx(PrerequisiteList,{validation:tt,formula:d.enabledFormula})]}),jsxRuntimeExports.jsx(FeatureDescription,{feature:d,description:c})]})}const label$e="_label_cndbd_1",type="_type_cndbd_7",removeButton="_removeButton_cndbd_15",styles$J={label:label$e,type,removeButton},button$4="_button_kmf8t_1",buttonDragging="_buttonDragging_kmf8t_1",group="_group_kmf8t_31",active$2="_active_kmf8t_35",disabled$2="_disabled_kmf8t_40",styles$I={button:button$4,buttonDragging,group,active:active$2,disabled:disabled$2},pill="_pill_130tv_1",race$1="_race_130tv_6",witch_hex="_witch_hex_130tv_6",white="_white_130tv_6",link="_link_130tv_39",feat="_feat_130tv_62",green="_green_130tv_70",red="_red_130tv_75",blue="_blue_130tv_80",special="_special_130tv_87",rage_power="_rage_power_130tv_87",class_feature="_class_feature_130tv_94",ability="_ability_130tv_100",variants={pill,default:"_default_130tv_6",race:race$1,class:"_class_130tv_6",witch_hex,white,"header-link":"_header-link_130tv_14",link,feat,green,red,blue,special,rage_power,class_feature,ability,"list-item":"_list-item_130tv_106","add-button":"_add-button_130tv_110"};function ButtonBlock({variant:d="default",className:c,labelPrefix:et=void 0,children:_e=void 0,disabled:tt=!1,dragging:nt=!1,...rt}){const it=reactExports.useMemo(()=>{const ot=[nt?styles$I.buttonDragging:styles$I.button,c];return tt?ot.push(styles$I.disabled):array(d).forEach(at=>ot.push(variants[at])),classNames(ot)},[nt,c,d,tt]);return jsxRuntimeExports.jsx("div",{...rt,className:it,children:_e})}const collapsed="_collapsed_15009_1",expanded="_expanded_15009_5",expanding="_expanding_15009_5",collapsing="_collapsing_15009_5",item="_item_15009_5",button$3="_button_15009_5",body$1="_body_15009_9",active$1="_active_15009_15",disabled$1="_disabled_15009_20",styles$H={collapsed,expanded,expanding,collapsing,item,button:button$3,body:body$1,active:active$1,disabled:disabled$1};function useOnScreen(d,c="0px"){const[et,_e]=reactExports.useState(!1);return reactExports.useEffect(()=>{if(d===void 0)return;let tt;const nt=new IntersectionObserver(([rt])=>{_e(rt.isIntersecting)},{rootMargin:c});return d.current&&(tt=d.current,nt.observe(tt)),()=>{tt&&nt.unobserve(tt)}},[d,c]),et}const SelectBlock=({activeKey:d,onChange:c,children:et})=>{function _e(tt,nt){c==null||c(typeof tt=="string"?tt:void 0)}return jsxRuntimeExports.jsx(Accordion$1,{activeKey:d,className:styles$H.control,onSelect:_e,flush:!1,children:et})};function SelectBlockItem({itemKey:d,label:c,bodyFn:et,style:_e=void 0,scrollTo:tt=!1,disabled:nt=!1,variant:rt="special",children:it=void 0}){return et!==void 0||it!==void 0?jsxRuntimeExports.jsx(SelectBlockItemWithBody,{itemKey:d,label:c,bodyFn:et,scrollTo:tt,disabled:nt,style:_e,variant:rt,children:it}):jsxRuntimeExports.jsx(SelectBlockItemWithoutBody,{itemKey:d,label:c,scrollTo:tt,disabled:nt,style:_e,variant:rt})}function SelectBlockItemWithoutBody({itemKey:d,label:c,scrollTo:et,disabled:_e,variant:tt}){const{activeEventKey:nt}=reactExports.useContext(AccordionContext),rt=d===nt,it=useAccordionButton(d),ot=[styles$H.item],st=[styles$H.button,styles$H.collapsed];return rt&&st.push(styles$H.active),jsxRuntimeExports.jsx("div",{className:classNames(ot),children:jsxRuntimeExports.jsx(ButtonBlock,{variant:tt,disabled:_e,className:classNames(st),onClick:it,children:c})})}function SelectBlockItemWithBody({itemKey:d,label:c,scrollTo:et,bodyFn:_e,disabled:tt,variant:nt,children:rt}){const it=reactExports.useRef(null),ot=useOnScreen(it),{activeEventKey:st}=reactExports.useContext(AccordionContext),at=d===st,[lt,ct]=reactExports.useState(at),[ut,dt]=reactExports.useState(!1),[ht,yt]=reactExports.useState(!1),[gt,ft]=reactExports.useState(!at),mt=ot||at,[pt,xt]=reactExports.useState();reactExports.useEffect(()=>{if(!mt){xt(void 0);return}if(_e===void 0){xt(rt);return}let Nt=!0,At=!0;return _e().then(Gt=>{At&&xt(Gt),Nt=!1}),()=>{At=!1,Nt||xt(void 0)}},[d,mt,_e]),reactExports.useEffect(()=>{!et||!it.current||it.current.scrollIntoView({behavior:"instant",block:"start"})},[it]);const vt=useAccordionButton(d),Et=()=>{dt(!0),ct(!1),yt(!1),ft(!1)},_t=()=>{dt(!1),ct(!0),ft(!1)},wt=()=>{dt(!1),ct(!1),yt(!0),ft(!1)},bt=()=>{yt(!1),ct(!1),ft(!0)},$t=[styles$H.item],kt=[styles$H.button];return lt&&kt.push(styles$H.expanded),ut&&kt.push(styles$H.expanding),ht&&kt.push(styles$H.collapsing),gt&&kt.push(styles$H.collapsed),at&&kt.push(styles$H.active),jsxRuntimeExports.jsx("div",{className:classNames($t),ref:it,children:mt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ButtonBlock,{variant:nt,disabled:tt,className:classNames(kt),onClick:vt,children:c}),jsxRuntimeExports.jsx(Accordion$1.Collapse,{eventKey:d,appear:at,onEntering:Nt=>Et(),onEntered:Nt=>_t(),onExiting:Nt=>wt(),onExited:Nt=>bt(),children:jsxRuntimeExports.jsx("div",{className:styles$H.body,children:pt})})]}):jsxRuntimeExports.jsx(ButtonBlock,{variant:nt,className:classNames(kt)})})}function SelectBlockItemContainer({label:d,childrenFn:c,disabled:et,variant:_e}){const tt=reactExports.useRef(null),[nt,rt]=reactExports.useState(!1),[it,ot]=reactExports.useState(!1),[st,at]=reactExports.useState(!1),[lt,ct]=reactExports.useState(!0),[ut,dt]=reactExports.useState(!1),[ht,yt]=reactExports.useState(jsxRuntimeExports.jsx(LoadingBlock,{}));function gt(){dt(!ut)}const ft=()=>{yt(c()),ot(!0),rt(!1),at(!1),ct(!1)},mt=()=>{ot(!1),rt(!0),ct(!1)},pt=()=>{ot(!1),rt(!1),at(!0),ct(!1)},xt=()=>{at(!1),rt(!1),ct(!0),yt(jsxRuntimeExports.jsx(LoadingBlock,{}))},vt=[styles$H.item],Et=[styles$H.button];nt&&Et.push(styles$H.expanded),it&&Et.push(styles$H.expanding),st&&Et.push(styles$H.collapsing),lt&&Et.push(styles$H.collapsed);const _t=ut?jsxRuntimeExports.jsx(CaretDownFill$1,{}):jsxRuntimeExports.jsx(CaretRightFill$1,{});return jsxRuntimeExports.jsxs("div",{className:classNames(vt),ref:tt,children:[jsxRuntimeExports.jsxs(ButtonBlock,{variant:_e,disabled:et,className:classNames(Et),onClick:wt=>gt(),children:[_t," ",d]}),jsxRuntimeExports.jsx(Collapse$1,{in:ut,onEntering:wt=>ft(),onEntered:wt=>mt(),onExiting:wt=>pt(),onExited:wt=>xt(),children:jsxRuntimeExports.jsx("div",{className:styles$H.body,children:ht})})]})}SelectBlock.Item=SelectBlockItem;SelectBlock.ItemContainer=SelectBlockItemContainer;class ChoiceSelectorOption{constructor(c,et,_e,tt){this.id=c,this.label=et,this.isValidFn=_e,this.descriptionFn=tt}get isValid(){return typeof this.isValidFn=="boolean"?this.isValidFn:this.isValidFn()}}class ChoiceSelectorCategory{constructor(c,et,_e=et){this.label=c,this.tag=et,this.key=_e}}function ChoiceSelectorList({options:d,variant:c,selected:et,onSelect:_e,onChangeSelection:tt}){function nt(rt,it){return jsxRuntimeExports.jsx(SelectBlock.Item,{itemKey:rt.id,label:jsxRuntimeExports.jsx(FeatureButtonLabel$1,{id:rt.id,label:rt.label}),bodyFn:rt.descriptionFn,disabled:!rt.isValid,scrollTo:rt.id===et,variant:c},rt.id+it)}return jsxRuntimeExports.jsx(SelectBlock,{activeKey:et,onChange:_e,children:d.map(nt)})}function FeatureButtonLabel$1({id:d,label:c}){return jsxRuntimeExports.jsx("div",{className:"d-flex flex-row gap-2 flex-grow-1",children:jsxRuntimeExports.jsx("div",{className:"d-flex align-self-center flex-grow-1",children:c??d})})}const dialog$1="_dialog_jhjae_1",title$4="_title_jhjae_1",header$6="_header_jhjae_12",body="_body_jhjae_19",footer$1="_footer_jhjae_22",styles$G={dialog:dialog$1,title:title$4,header:header$6,body,footer:footer$1};function FaFileLines(d){return GenIcon({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM112 256H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"}}]})(d)}function FaMagnifyingGlass(d){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"}}]})(d)}function SearchBar(d){const[c,et]=reactExports.useState(""),{query:_e,onSearch:tt}=d;reactExports.useEffect(()=>et(_e),[_e]);let nt=reactExports.useRef(null);return reactExports.useEffect(()=>{var rt;(rt=nt.current)==null||rt.focus()},[]),jsxRuntimeExports.jsx(Form$1,{className:"pf-search-bar",onSubmit:rt=>{tt(c),rt.preventDefault()},children:jsxRuntimeExports.jsxs(InputGroup$1,{children:[jsxRuntimeExports.jsx(InputGroup$1.Text,{children:jsxRuntimeExports.jsx(FaMagnifyingGlass,{})}),jsxRuntimeExports.jsx(Form$1.Control,{ref:nt,value:c,onChange:rt=>et(rt.target.value),placeholder:"Search"}),jsxRuntimeExports.jsx(Button$1,{type:"submit",variant:"primary",children:"Search"})]})})}const SearchCategory$1=new ChoiceSelectorCategory(jsxRuntimeExports.jsx(FaMagnifyingGlass,{}),"","_search");function ChoiceSelectorDialog({choiceName:d,show:c,value:et,onSelect:_e,onCancel:tt,onChangeSelection:nt,optionsFn:rt,categories:it=[],search:ot=!1,variant:st="special"}){const[at,lt]=reactExports.useState(et),[ct,ut]=reactExports.useState(""),[dt,ht]=reactExports.useState(()=>(it==null?void 0:it.length)>0?it[0]:void 0),yt=reactExports.useMemo(()=>array(rt(ct,dt)),[rt,ct,dt]),gt=reactExports.useMemo(()=>ct.trim().length>0,[ct]),ft=reactExports.useMemo(()=>gt||yt.length<=20,[gt,yt]),[mt,pt]=reactExports.useTransition();function xt(Nt){if(lt(et),!(Nt===void 0||!dt))for(let At of it){const Gt=array(rt(void 0,At));for(let Kt of Gt)if(Kt.id===Nt){ht(At);return}}}reactExports.useEffect(()=>{gt&&ht(SearchCategory$1)},[gt]),reactExports.useEffect(()=>{dt!==SearchCategory$1&&ut("")},[c,dt]),reactExports.useEffect(()=>{c&&(lt(et),xt(et))},[c]);const vt=reactExports.useMemo(()=>{let Nt=yt;return ft||(Nt=Nt.filter(At=>At.isValid)),Nt.sort((At,Gt)=>At.isValid&&!Gt.isValid?-1:!At.isValid&&Gt.isValid?1:0)},[yt,ct,gt,ft]),Et=at!==void 0&&at!=="",_t=ot===!0||ot==="auto"&&(vt.length>10||(it==null?void 0:it.length)>0)||gt,wt=Nt=>{lt(Nt),nt==null||nt(Nt)},bt=Nt=>{const At=[SearchCategory$1,...it].find(Gt=>Gt.key===(Nt!==""?Nt:"all"));pt(()=>ht(At))};function $t(Nt){pt(()=>ut(Nt))}function kt(){_e==null||_e(at??"")}return jsxRuntimeExports.jsxs(Modal$1,{show:c,onHide:tt,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,size:"lg",scrollable:!0,fullscreen:"md-down",className:styles$G.dialog,children:[jsxRuntimeExports.jsx(Modal$1.Header,{className:styles$G.title,closeButton:!0,closeVariant:"white",children:jsxRuntimeExports.jsxs(Modal$1.Title,{children:["Select ",d]})}),((it==null?void 0:it.length)>0||_t)&&jsxRuntimeExports.jsxs(Modal$1.Header,{className:styles$G.header,children:[it.length>0&&jsxRuntimeExports.jsxs(ToggleButtonGroup$1,{className:styles$G.categories,value:(dt==null?void 0:dt.key)??"",onChange:bt,name:"category",type:"radio",children:[ot&&jsxRuntimeExports.jsx(ToggleButton$1,{disabled:!gt,id:SearchCategory$1.key,value:SearchCategory$1.key,children:SearchCategory$1.label}),it.map(Nt=>{const At=Nt.key!==""?Nt.key:"_blank";return jsxRuntimeExports.jsx(ToggleButton$1,{id:At,value:Nt.key,children:Nt.label},At)})]}),_t&&jsxRuntimeExports.jsx(SearchBar,{query:ct,onSearch:$t})]}),jsxRuntimeExports.jsx(Modal$1.Body,{className:styles$G.body,children:mt?jsxRuntimeExports.jsx(LoadingBlock,{}):vt.length>0&&jsxRuntimeExports.jsx(ChoiceSelectorList,{selected:at,options:vt,onSelect:wt,variant:st})||jsxRuntimeExports.jsx(Alert$1,{variant:"warning",children:"None found"})}),jsxRuntimeExports.jsx(Modal$1.Footer,{className:styles$G.footer,children:jsxRuntimeExports.jsx(Button$1,{size:"lg",className:"w-100",disabled:!Et,onClick:kt,children:"Select"})})]})}const icon="_icon_bpuo8_1",styles$F={icon};function EditIcon(){return jsxRuntimeExports.jsx(PencilSquare$1,{className:styles$F.icon})}function ChoiceSelectButton({choiceName:d,value:c,id:et,onSelect:_e,optionsFn:tt,categoriesFn:nt,buttonLabel:rt,children:it,actionVerb:ot="Select",removable:st=!1,variant:at="white",dialogVariant:lt=at,search:ct=!1,sortBy:ut="none"}){const[dt,ht]=reactExports.useState(!1),[yt,gt]=reactExports.useState(!1),[ft,mt]=reactExports.useState(!1),[pt,xt]=reactExports.useState(),vt=()=>{nt&&xt(nt()),mt(!0)},Et=()=>{mt(!1),xt(void 0)},_t=At=>{_e==null||_e(At),mt(!1),xt(void 0)},wt=At=>{ht(!0),At.stopPropagation()},bt=()=>{gt(!0),_e==null||_e("")},$t=reactExports.useMemo(()=>c!==""&&c!==void 0?array(tt(void 0,void 0)).filter(At=>At.id===c).map(At=>At.label).at(0):void 0,[c]),kt=it??jsxRuntimeExports.jsxs("div",{className:styles$J.label,children:[jsxRuntimeExports.jsx(EditIcon,{})," ",rt??$t??jsxRuntimeExports.jsxs("i",{children:[ot," ",d]})]}),Nt=st?jsxRuntimeExports.jsx(CloseButton$1,{className:styles$J.removeButton,onClick:wt}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});return yt?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Collapse$1,{in:!dt,onExited:bt,children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs(ButtonBlock,{id:et,variant:at,onClick:At=>vt(),children:[kt," ",Nt]})})}),ft&&jsxRuntimeExports.jsx(ChoiceSelectorDialog,{choiceName:d,variant:lt,value:c,show:ft,onSelect:_t,onCancel:Et,optionsFn:tt,categories:pt,search:ct,sortBy:ut})]})}function DataChoiceSelectButton({choiceRef:d,choiceIndex:c,characterAtLevel:et,id:_e,onSelect:tt,label:nt,buttonLabel:rt,variant:it,dialogVariant:ot,descriptionFn:st,search:at,children:lt}){const ct=useDatabase(),ut=reactExports.useMemo(()=>et.selected(d)!==void 0?et.withoutChoice(d.path):et,[et,d]);function dt(ht){tt==null||tt(ht??"")}return jsxRuntimeExports.jsx(ChoiceSelectButton,{id:_e,choiceName:nt??d.label,variant:it??"default",dialogVariant:ot??it??"default",value:et.selected(d,c),buttonLabel:rt,onSelect:dt,search:at,optionsFn:(ht,yt)=>queryOptions(ct,d,ht,yt).map(gt=>featureToChoiceSelectorOption(gt,ct,ut,st)),categoriesFn:()=>d.categories.map(ht=>new ChoiceSelectorCategory(ht.label,ht.tag)),children:lt,actionVerb:d.repeatingIndex===0?"Select":"Add",removable:d.repeatingIndex>0&&et.selected(d,c)!==void 0})}function queryOptions(d,c,et,_e){return c.options(d,et,_e==null?void 0:_e.tag)}function featureToChoiceSelectorOption(d,c,et,_e,tt){const nt=async rt=>{const it=await c.load(rt);if(!it)return"";const ot=it.description;return _e!==void 0?_e(ot):jsxRuntimeExports.jsx(SelectionFeatureDescription,{feature:it,description:ot,characterAtLevel:et})};return new ChoiceSelectorOption(d.key,d.name,()=>d.isEnabled(et),async()=>nt(d.key))}const dialog="_dialog_13rnf_1",title$3="_title_13rnf_1",header$5="_header_13rnf_12",footer="_footer_13rnf_18",styles$E={dialog,title:title$3,header:header$5,footer};function PromptDialog({show:d,prompt:c,onConfirm:et,onCancel:_e}){function tt(){et==null||et()}function nt(){et==null||et()}return jsxRuntimeExports.jsxs(Modal$1,{show:d,onHide:_e,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,scrollable:!1,fullscreen:"md-down",className:styles$E.dialog,children:[jsxRuntimeExports.jsx(Modal$1.Header,{className:styles$E.title,closeButton:!1,children:jsxRuntimeExports.jsx(Modal$1.Title,{children:c})}),jsxRuntimeExports.jsx(Modal$1.Body,{className:styles$E.body,children:jsxRuntimeExports.jsxs("div",{className:"d-flex justify-content-evenly",children:[jsxRuntimeExports.jsx(Button$1,{size:"lg",className:"w-50 me-3",onClick:tt,children:"Yes"}),jsxRuntimeExports.jsx(Button$1,{size:"lg",className:"w-50 mw-3",onClick:nt,children:"No"})]})})]})}const control$2="_control_1se8s_1",bonus="_bonus_1se8s_8",header$4="_header_1se8s_13",penalty="_penalty_1se8s_17",border="_border_1se8s_26",input="_input_1se8s_44",mod="_mod_1se8s_55",styles$D={control:control$2,bonus,header:header$4,penalty,border,input,mod};function AbilityScoreEditor({label:d,score:c,base:et,onClick:_e}){const tt=reactExports.useMemo(()=>{const it=Math.floor((c-10)/2);return it<0?it.toString():"+"+it},[c]),nt=c>et,rt=c<et;return jsxRuntimeExports.jsxs("div",{className:classNames([styles$D.control,"clickable",nt&&styles$D.bonus||void 0,rt&&styles$D.penalty||void 0]),onClick:_e,children:[jsxRuntimeExports.jsx("div",{className:styles$D.header,children:d}),jsxRuntimeExports.jsx("div",{className:styles$D.input,children:c}),jsxRuntimeExports.jsx("div",{className:styles$D.border}),jsxRuntimeExports.jsx("div",{className:styles$D.mod,children:tt})]})}const control$1="_control_12ln6_1",cost$1="_cost_12ln6_7",abilityScores$1="_abilityScores_12ln6_11",styles$C={control:control$1,cost:cost$1,abilityScores:abilityScores$1},AbilityScoreOptions=[7,8,9,10,11,12,13,14,15,16,17,18,19,20].map(d=>new ChoiceSelectorOption(d.toString(),abilityScoreLabel(d),!0));function AbilityScoresEditor({characterAtLevel:d,onChange:c}){var et;return jsxRuntimeExports.jsxs("div",{className:styles$C.control,children:[jsxRuntimeExports.jsx("div",{className:styles$C.cost,children:jsxRuntimeExports.jsxs("code",{children:["Ability Point Cost: ",(et=d.resolve("ability_point_cost"))==null?void 0:et.asNumber()]})}),jsxRuntimeExports.jsx("div",{className:styles$C.abilityScores,children:["str","dex","con","int","wis","cha"].map(_e=>jsxRuntimeExports.jsx(AbilityScoreItem,{ability:_e,characterAtLevel:d,onChange:c},_e))}),jsxRuntimeExports.jsx("div",{children:d.choicesOfType("asi").map(_e=>jsxRuntimeExports.jsx(DataChoiceSelectButton,{choiceRef:_e,characterAtLevel:d,onSelect:tt=>c==null?void 0:c(_e,tt)},_e.path))})]})}function AbilityScoreItem({ability:d,characterAtLevel:c,onChange:et}){const[_e,tt]=reactExports.useState(!1),nt=reactExports.useMemo(()=>{var st;return((st=c.resolve(`${d}_score`))==null?void 0:st.asNumber())??0},[d,c]),rt=reactExports.useMemo(()=>{var st;return((st=c.resolve(`${d}:base`))==null?void 0:st.asNumber())??0},[d,c]),it=reactExports.useMemo(()=>c.choice(d+":base"),[d,c]);function ot(st){it&&(et==null||et(it,st),tt(!1))}if(!it){console.error(`No choice for ${d}`);return}return jsxRuntimeExports.jsxs("div",{className:styles$C.abilityScore,children:[jsxRuntimeExports.jsx(AbilityScoreEditor,{label:d.toUpperCase(),score:nt,base:rt,onClick:()=>tt(!0)}),jsxRuntimeExports.jsx(ChoiceSelectorDialog,{choiceName:it.label,show:_e,value:rt.toString(),optionsFn:()=>AbilityScoreOptions,onSelect:ot,search:!1,onCancel:()=>tt(!1),variant:"white",sortBy:"none"})]},it.path)}function abilityScoreLabel(d){const c=Math.floor(d/2)-5,et=c>=0?`+${c}`:c;return jsxRuntimeExports.jsxs("span",{children:[d," ",jsxRuntimeExports.jsxs("code",{children:["(",et,")"]})]},`score-${d}`)}function LevelStatsDisplay({characterAtLevel:d}){var c,et,_e,tt;return jsxRuntimeExports.jsxs(Container$1,{className:"level-stats-display",children:[jsxRuntimeExports.jsxs(Row$1,{children:[jsxRuntimeExports.jsx(Col$1,{className:"header",children:"BAB"}),jsxRuntimeExports.jsx(Col$1,{className:"header",children:"Fortitude"}),jsxRuntimeExports.jsx(Col$1,{className:"header",children:"Reflex"}),jsxRuntimeExports.jsx(Col$1,{className:"header",children:"Will"})]}),jsxRuntimeExports.jsxs(Row$1,{children:[jsxRuntimeExports.jsx(Col$1,{className:"numeric-value",children:(c=d.resolve("{signed(@bab)}"))==null?void 0:c.asText()}),jsxRuntimeExports.jsx(Col$1,{className:"numeric-value",children:(et=d.resolve("{signed(@fort:base)}"))==null?void 0:et.asText()}),jsxRuntimeExports.jsx(Col$1,{className:"numeric-value",children:(_e=d.resolve("{signed(@ref:base)}"))==null?void 0:_e.asText()}),jsxRuntimeExports.jsx(Col$1,{className:"numeric-value",children:(tt=d.resolve("{signed(@will:base)}"))==null?void 0:tt.asText()})]})]})}function CharacterFeatureList({characterAtLevel:d,features:c}){return jsxRuntimeExports.jsx(SelectBlock,{children:c.map(et=>jsxRuntimeExports.jsx(SelectBlock.Item,{itemKey:et.key,label:jsxRuntimeExports.jsx(FeatureButtonLabel,{characterAtLevel:d,feature:et}),variant:determineVariant(et),bodyFn:async()=>jsxRuntimeExports.jsx(FeatureDescription,{feature:et,characterAtLevel:d})},et.key))})}function FeatureButtonLabel({characterAtLevel:d,feature:c,type:et=void 0}){const _e=reactExports.useMemo(()=>c.label!==void 0?Expression.parse(c.label).resolve(d).asText():c.name,[c,d]);return reactExports.useMemo(()=>{var rt,it;const tt=/(^[a-z]| [a-z])/ig;let nt=((it=(rt=c.name.match(tt))==null?void 0:rt.slice(0,2))==null?void 0:it.join(""))??"";return nt=nt.replace(" ",""),nt.length===1&&(nt=c.name.substring(0,2)),nt},[c]),jsxRuntimeExports.jsx("div",{className:"d-flex flex-row gap-2 align-self-stretch",children:jsxRuntimeExports.jsx("div",{className:"d-flex align-self-center",children:_e})})}function determineVariant(d){for(let c of d.tags)if(c in variants)return c;return"default"}function GiBookmark(d){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M161.22 19.563l-2.5 5.375-106.44 225.5-1 2.093c-24.493 28.208-34.917 58.587-33.593 88.19 1.38 30.852 15.12 60.388 36.376 86.81l2.812 3.5h49.72c4.817-3.836 8.93-7.817 12.405-12.03 1.758-2.132 3.38-4.358 4.875-6.656H65.97c-17.813-23.187-28.526-47.848-29.626-72.438-1.123-25.11 7.337-50.594 29.937-76.125H498.157l-5.25-12.874-91.844-225.5-2.375-5.843H161.22zm11.843 18.687h177.343l52.656 41.594 38.407 94.28-58.845 70.94H75.47L173.062 38.25zM75.156 282.625c-15.31 18.98-20.975 37.778-20.125 56.438.84 18.398 8.276 36.95 20.5 54.468h57.19c4.392-13.517 6.344-29.847 6.78-50.436h-16.188v-18.688h16.313v-.187h115.749v.186h17.156v18.688h-17.25c-.287 17.8-1.447 34.638-4 50.437h221.626c-9.034-36.872-9.112-74.006-.03-110.905H75.155zm83 60.28c-.77 37.698-6.46 65.83-24.72 87.97-14.595 17.7-36.19 30.747-67.28 42.813 8.69 1.658 17.214 3.225 26.53 5.25 14.048 3.052 27.912 6.338 39.033 9.25 5.56 1.455 10.44 2.826 14.374 4.062 1.94.61 3.533 1.074 5.03 1.625 35.245-13.464 55.78-32.897 68.345-58.72 11.944-24.55 16.287-55.713 16.936-92.25h-78.25zm89.25 69.44c-1.632 6.425-3.532 12.668-5.812 18.686h257.03v-18.686H247.407z"}}]})(d)}function GiLockedChest(d){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M146.857 20.842c-12.535-.036-24.268 2.86-37.285 9.424h.004C61.356 54.6 19.966 120.734 17.982 175.91l41.848 14.236c4.33-61.89 47.057-128.37 101.527-155.86h.002c4.423-2.23 8.822-4.162 13.185-5.8l-22.26-7.45c-1.83-.123-3.637-.19-5.428-.194zm59.34 20.19c-10.478-.09-22.832 3.093-36.424 9.943l.004-.004c-48.23 24.34-89.625 90.513-91.548 145.436l156.485 53.24c3.865-62.22 46.797-129.372 101.613-157.035h.002l.002-.003c4.303-2.168 8.584-4.056 12.832-5.666l-134.54-45.036c-2.652-.542-5.458-.847-8.427-.873zm174.97 58.323c-10.476-.09-22.83 3.092-36.42 9.94l-.005.002c-48.577 24.518-90.225 91.473-91.586 146.623l46.205 15.72c3.914-62.188 46.825-129.274 101.607-156.92 4.522-2.283 9.04-4.258 13.53-5.91l-26.544-8.884c-2.164-.35-4.423-.55-6.785-.57zm63.554 22.014c-10.267.093-22.094 3.353-35.333 10.034-47.158 23.8-87.777 87.587-91.362 141.75l174.55-73.726c-.404-39.01-10.754-61.304-24.415-71.082-2.347-1.68-4.867-3.057-7.55-4.137l-.01.034-4.735-1.584c-3.48-.887-7.195-1.327-11.144-1.29zM17.9 195.622l-.035 187.484L59.46 397.58V209.764L17.9 195.624zM78.15 216.12v187.962l156.282 54.37V269.288l-29.053-9.886v119.43l-101.054-34.082V225.025L78.15 216.12zm414.22 3.683L318.433 293.27v189.236l173.935-73.504v-189.2zm-369.354 11.582v99.947l63.675 21.477v-99.763l-63.674-21.662zm31.306 28.797c9.705 0 17.573 7.867 17.573 17.572 0 6.34-3.37 11.88-8.407 14.97v28.53h-18.69v-28.746c-4.838-3.13-8.048-8.562-8.048-14.754 0-9.705 7.867-17.572 17.572-17.572zm98.797 15.464v189.307l46.626 16.22V291.51l-46.627-15.864z"}}]})(d)}function SpellBookEditor({characterAtLevel:d,onChange:c}){return jsxRuntimeExports.jsxs("table",{border:2,cellPadding:"5px",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"0th"}),jsxRuntimeExports.jsx("th",{children:"1st"}),jsxRuntimeExports.jsx("th",{children:"2nd"}),jsxRuntimeExports.jsx("th",{children:"3rd"}),jsxRuntimeExports.jsx("th",{children:"4th"}),jsxRuntimeExports.jsx("th",{children:"5th"}),jsxRuntimeExports.jsx("th",{children:"6th"}),jsxRuntimeExports.jsx("th",{children:"7th"}),jsxRuntimeExports.jsx("th",{children:"8th"}),jsxRuntimeExports.jsx("th",{children:"9th"})]})}),jsxRuntimeExports.jsx("tbody",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:spellsKnown(d,0)}),jsxRuntimeExports.jsx("td",{children:spellsKnown(d,1)}),jsxRuntimeExports.jsx("td",{children:spellsKnown(d,2)}),jsxRuntimeExports.jsx("td",{children:spellsKnown(d,3)}),jsxRuntimeExports.jsx("td",{children:spellsKnown(d,4)}),jsxRuntimeExports.jsx("td",{children:spellsKnown(d,5)}),jsxRuntimeExports.jsx("td",{children:spellsKnown(d,6)}),jsxRuntimeExports.jsx("td",{children:spellsKnown(d,7)}),jsxRuntimeExports.jsx("td",{children:spellsKnown(d,8)}),jsxRuntimeExports.jsx("td",{children:spellsKnown(d,9)})]})})]})}function spellsKnown(d,c){const et=d.resolve(`{sum(@trait:level_${c}_spells_per_day#*)}`)??n.None;return et.equals(n.of(""))?"-":et.asText()}function SpellBookEditorDialog({characterAtLevel:d,show:c,onCancel:et,onChange:_e}){return jsxRuntimeExports.jsxs(Modal$1,{show:c,onHide:et,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,size:"lg",scrollable:!0,fullscreen:"md-down",className:styles$G.dialog,children:[jsxRuntimeExports.jsx(Modal$1.Header,{className:styles$G.title,closeButton:!0,closeVariant:"white",children:jsxRuntimeExports.jsxs(Modal$1.Title,{children:["Level ",d.level," Spell Book"]})}),jsxRuntimeExports.jsx(Modal$1.Body,{className:styles$G.body,children:jsxRuntimeExports.jsx(SpellBookEditor,{characterAtLevel:d,onChange:_e})})]})}const button$2="_button_14o63_1",styles$B={button:button$2};function SpellBookEditorButton({characterAtLevel:d,onChange:c}){const[et,_e]=reactExports.useState(!1);function tt(){_e(!0)}function nt(){_e(!1)}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:styles$B.button,children:jsxRuntimeExports.jsx(GiBookmark,{size:64,className:"clickable",onClick:rt=>tt()})}),jsxRuntimeExports.jsx(SpellBookEditorDialog,{characterAtLevel:d,show:et,onCancel:nt,onChange:c})]})}function ButtonBlockGroup({children:d,className:c,...et}){return jsxRuntimeExports.jsx("div",{...et,className:classNames([styles$I.group,c]),children:d})}function ArchetypeEditor({characterAtLevel:d,onChange:c}){const et=reactExports.useMemo(()=>d.choicesOfType("archetype")[0],[d]);if(!et)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});const _e=reactExports.useMemo(()=>array(d.selected(et))??[],[d,et]);return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(ButtonBlockGroup,{children:_e.map((tt,nt)=>jsxRuntimeExports.jsx(EditArchetypeButton,{choiceRef:et,selectedIndex:nt,characterAtLevel:d,onChange:c},et.path+"/"+nt))}),jsxRuntimeExports.jsx(AddArchetypeButton,{choiceRef:et,selectedIndex:-1,characterAtLevel:d,onChange:c})]})}function EditArchetypeButton({choiceRef:d,selectedIndex:c,characterAtLevel:et,onChange:_e}){const tt=reactExports.useMemo(()=>array(et.selected(d)),[d,et]);return jsxRuntimeExports.jsx(DataChoiceSelectButton,{choiceRef:d,choiceIndex:c,characterAtLevel:et,variant:["default","list-item"],onSelect:nt=>{nt&&nt!==""?tt[c]=nt:delete tt[c],_e(d,tt)}})}function AddArchetypeButton({choiceRef:d,characterAtLevel:c,onChange:et}){const _e=reactExports.useMemo(()=>array(c.selected(d)),[d,c]);return jsxRuntimeExports.jsx(DataChoiceSelectButton,{choiceRef:d,choiceIndex:-1,characterAtLevel:c,variant:"link",dialogVariant:"default",onSelect:tt=>{_e.push(tt),et(d,_e)},children:"+ Add Archetype"})}const description$1="_description_lxkvd_1",styles$A={description:description$1};function ItemDescription({item:d}){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:styles$A.description,children:d.description.text}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Source:"})," ",d.sourceId]})]})}const text$2="_text_1pavk_1",unit="_unit_1pavk_5",styles$z={text:text$2,unit};function Quantity({amount:d,unit:c}){return jsxRuntimeExports.jsxs("span",{className:styles$z.text,children:[d,c&&jsxRuntimeExports.jsx("span",{className:styles$z.unit,children:c})]})}function Currency({gp:d}){const[c,et]=reactExports.useMemo(()=>{if(d===0)return[0,"gp"];let _e=d,tt="gp";return _e<1&&(_e=_e*10,tt="sp"),_e<1&&(_e=_e*10,tt="bp"),[Intl.NumberFormat().format(_e),tt]},[d]);return d===0?jsxRuntimeExports.jsx("span",{children:"--"}):jsxRuntimeExports.jsx(Quantity,{amount:c,unit:et})}function EquipmentEditor({characterAtLevel:d,onChange:c}){const et=useDatabase(),[_e]=useAsyncMemo(()=>et.itemDatabase(),[et]),tt=reactExports.useMemo(()=>d.choicesOfType("equipment")[0],[d]),nt=reactExports.useMemo(()=>_e===void 0||tt===void 0?[]:(array(d.selected(tt))??[]).map(ot=>_e.summary(parseInt(ot))).filter(ot=>ot!==void 0),[d,_e,tt]),rt=reactExports.useMemo(()=>nt.map(it=>it.cost).reduce((it,ot)=>it+ot,0),[nt]);return _e?tt===void 0?jsxRuntimeExports.jsx("div",{children:"Not Available"}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{children:["Total Cost: ",jsxRuntimeExports.jsx(Currency,{gp:rt})]}),jsxRuntimeExports.jsx(ButtonBlockGroup,{children:nt.map((it,ot)=>jsxRuntimeExports.jsx(EditItemButton,{itemDatabase:_e,choiceRef:tt,selectedIndex:ot,characterAtLevel:d,onChange:c},it.uid))}),jsxRuntimeExports.jsx(AddItemButton,{choiceRef:tt,itemDatabase:_e,characterAtLevel:d,onChange:c})]}):jsxRuntimeExports.jsx(LoadingBlock,{})}function EditItemButton({choiceRef:d,selectedIndex:c=0,characterAtLevel:et,itemDatabase:_e,onChange:tt}){return jsxRuntimeExports.jsx(ItemChoiceSelectButton,{choiceRef:d,choiceIndex:c,characterAtLevel:et,itemDatabase:_e,variant:["default","list-item"],onSelect:nt=>{let rt=array(et.selected(d));nt&&nt!==""?rt[c]=nt:c!==void 0&&rt.splice(c,1),tt(d,rt)}})}function AddItemButton({choiceRef:d,characterAtLevel:c,itemDatabase:et,onChange:_e}){return jsxRuntimeExports.jsx(ItemChoiceSelectButton,{choiceRef:d,characterAtLevel:c,itemDatabase:et,variant:"link",dialogVariant:"default",onSelect:tt=>{const nt=c.selected(d),rt=nt!==""?array(nt):[];rt.push(tt),_e(d,rt)},children:"+ Add Item"})}function ItemChoiceSelectButton({choiceRef:d,characterAtLevel:c,choiceIndex:et,itemDatabase:_e,onSelect:tt,variant:nt,dialogVariant:rt,children:it}){const ot=reactExports.useMemo(()=>et===void 0?void 0:c.selected(d,et),[c,d,et]);return jsxRuntimeExports.jsx(ChoiceSelectButton,{choiceName:d.label,value:ot,variant:nt,dialogVariant:rt,search:!0,removable:ot!==void 0,optionsFn:(st,at)=>itemOptions(st,_e),onSelect:tt,children:it})}function ItemLabel({item:d}){return jsxRuntimeExports.jsxs("div",{className:"d-flex flex-grow-1",children:[jsxRuntimeExports.jsx("div",{className:"flex-grow-1",children:d.name}),jsxRuntimeExports.jsxs("div",{children:["(",jsxRuntimeExports.jsx(Currency,{gp:d.cost}),")"]})]})}function itemOptions(d,c){return c.summaries().filter(et=>!d||et.name.toLowerCase().includes(d.toLowerCase())).map(et=>new ChoiceSelectorOption(et.itemId.toString(),jsxRuntimeExports.jsx(ItemLabel,{item:et}),!0,async()=>{const _e=await c.load(et.itemId);return _e?jsxRuntimeExports.jsx(ItemDescription,{item:_e}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}))}function EquipmentEditorDialog({characterAtLevel:d,show:c,onCancel:et,onChange:_e}){return jsxRuntimeExports.jsxs(Modal$1,{show:c,onHide:et,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,size:"lg",scrollable:!0,fullscreen:"md-down",className:styles$G.dialog,children:[jsxRuntimeExports.jsx(Modal$1.Header,{className:styles$G.title,closeButton:!0,closeVariant:"white",children:jsxRuntimeExports.jsxs(Modal$1.Title,{children:["Level ",d.level," Equipment"]})}),jsxRuntimeExports.jsx(Modal$1.Body,{className:styles$G.body,children:jsxRuntimeExports.jsx(EquipmentEditor,{characterAtLevel:d,onChange:_e})})]})}const button$1="_button_14o63_1",styles$y={button:button$1};function EquipmentEditorButton({characterAtLevel:d,onChange:c}){const[et,_e]=reactExports.useState(!1);function tt(){_e(!0)}function nt(){_e(!1)}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:styles$y.button,children:jsxRuntimeExports.jsx(GiLockedChest,{size:64,className:"clickable",onClick:rt=>tt()})}),jsxRuntimeExports.jsx(EquipmentEditorDialog,{characterAtLevel:d,show:et,onCancel:nt,onChange:c})]})}function CharacterLevelEditor({characterAtLevel:d,characterAtPreviousLevel:c,onChange:et}){const _e=reactExports.useMemo(()=>d.diff(c),[d,c]),tt=reactExports.useMemo(()=>_e.features.filter(showFeature).filter(nt=>notFromChoice(nt,d)),[_e]);return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(ArchetypeEditor,{characterAtLevel:_e,onChange:et}),jsxRuntimeExports.jsx(LevelStatsDisplay,{characterAtLevel:d}),jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row gap-2",children:[d.search("ability:spellcasting#*").filter(nt=>nt.id.startsWith("ability:spellcasting#")).map(nt=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(SpellBookEditorButton,{characterAtLevel:d,onChange:et})},nt.id)),jsxRuntimeExports.jsx(EquipmentEditorButton,{characterAtLevel:d,onChange:et})]}),_e.choices.filter(nt=>showChoice(nt)).filter(nt=>nt.inputType===ChoiceInputType.Select).map(nt=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{children:nt.label}),jsxRuntimeExports.jsx(DataChoiceSelectButton,{choiceRef:nt,search:"auto",characterAtLevel:d,onSelect:rt=>et(nt,rt)},nt.path)]})),tt.length>0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{children:"New Features"}),jsxRuntimeExports.jsx(CharacterFeatureList,{characterAtLevel:d,features:tt})]})]})}function notFromChoice(d,c){return!c.choices.find(et=>c.selected(et)===d.key)}function showChoice(d){return!(d.type==="class"||d.type==="spell"||d.type==="archetype"||d.type==="equipment")}function showFeature(d){return!(d.tags.includes("archetype")||d.tags.includes("class")||d.key.startsWith("proficiency:")||d.tags.includes("spell"))}function SelectClassButton({characterAtLevel:d}){const c=useDatabase(),et=reactExports.useMemo(()=>d.choices.find(tt=>tt.type==="class"),[d]),_e=reactExports.useMemo(()=>et!==void 0?d.selected(et):void 0,[et,d]);return reactExports.useMemo(()=>_e!==void 0?c.name(_e):jsxRuntimeExports.jsx("i",{children:"Select Class"}),[c,_e]),et===void 0?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsx(DataChoiceSelectButton,{variant:"header-link",dialogVariant:"class",choiceRef:et,characterAtLevel:d})}function DataChoiceTextInput({choiceRef:d,characterAtLevel:c,id:et,onSelect:_e}){return jsxRuntimeExports.jsx(TextInput,{id:et,value:c.selected(d),onChange:_e})}function CharacterEditor({loaded:d}){const[c,et]=reactExports.useState(d),[_e,tt]=reactExports.useState(!1),nt=useCharacterStore(),rt=reactExports.useMemo(()=>{const lt=[];for(let ct=0;ct<=20;ct++)lt[ct]=c.atLevel(ct);return lt},[c]),it=rt[0];async function ot(lt){const ct=await lt(c);et(ct),await nt.save(ct)}function st(lt,ct){isString(ct)&&c.selected(lt.path)===ct||(lt.path==="favored_class"&&tt(!0),ot(ut=>ut.selectAll({[lt.path]:ct})))}function at(){var ut;const lt={},ct=(ut=c.selected("favored_class"))==null?void 0:ut.replace("favored_class","class");if(ct){for(let dt=1;dt<=20;dt++)lt[`${dt}:class`]=ct;ot(dt=>dt.selectAll(lt))}}return jsxRuntimeExports.jsxs("main",{children:[jsxRuntimeExports.jsx("header",{children:"Character Information"}),jsxRuntimeExports.jsxs("section",{children:[it.choices.filter(lt=>lt.type!=="ability_score"&&lt.type!=="asi").map(lt=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:lt.path,children:lt.label}),lt.inputType===ChoiceInputType.Text&&jsxRuntimeExports.jsx(DataChoiceTextInput,{id:lt.path,choiceRef:lt,characterAtLevel:it.withoutChoice(lt.path),onSelect:ct=>st(lt,ct)}),lt.inputType===ChoiceInputType.Select&&jsxRuntimeExports.jsx(DataChoiceSelectButton,{id:lt.path,choiceRef:lt,characterAtLevel:it.withoutChoice(lt.path),onSelect:ct=>st(lt,ct)})]},lt.path)),jsxRuntimeExports.jsx(PromptDialog,{show:_e,prompt:"Change all class levels to favored class?",onCancel:()=>tt(!1),onConfirm:()=>{at(),tt(!1)}})]}),jsxRuntimeExports.jsx("header",{children:"Ability Scores"}),jsxRuntimeExports.jsx("section",{children:jsxRuntimeExports.jsx(AbilityScoresEditor,{characterAtLevel:it,onChange:st})}),rt.slice(1).map(lt=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("header",{children:[jsxRuntimeExports.jsxs("div",{children:["Level ",lt.level]}),jsxRuntimeExports.jsx("div",{children:" - "}),jsxRuntimeExports.jsx(SelectClassButton,{characterAtLevel:lt}),jsxRuntimeExports.jsx("div",{className:"character-sheet-button",children:jsxRuntimeExports.jsx(Link$1,{to:`/character/sheet/${c.id}/${lt.level}`,target:"_blank",rel:"noopener noreferrer",children:jsxRuntimeExports.jsx(FaFileLines,{})})})]}),jsxRuntimeExports.jsx("section",{children:jsxRuntimeExports.jsx(CharacterLevelEditor,{characterAtLevel:lt,characterAtPreviousLevel:rt[lt.level-1],onChange:st})})]},`level-${lt.level}`))]})}function CharacterEdit({loaded:d}){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(CharacterEditor,{loaded:d}),jsxRuntimeExports.jsx("div",{className:"spacer"})]})}async function characterEditLoader({params:d}){const c=d.id;if(!c)throw new Error("No character ID specified");const et=await withGlobalCharacterStore(),_e=await timedAsync(()=>et.load(c),"Loading character");if(!_e)throw new Error("Character not found");const tt=await withGlobalDatabase();if(!tt)throw new Error("Unable to initialize database");return{character:_e,characterStore:et,database:tt}}function CharacterEditRoute(){const{character:d,characterStore:c,database:et}=useLoaderData();return jsxRuntimeExports.jsx(DatabaseContext.Provider,{value:et,children:jsxRuntimeExports.jsx(CharacterStoreContext.Provider,{value:c,children:jsxRuntimeExports.jsx(CharacterEdit,{loaded:d})})})}const root$4="_root_ws79p_1",content="_content_ws79p_10",button="_button_ws79p_20",emailSubmit="_emailSubmit_ws79p_28",signinIcon="_signinIcon_ws79p_32",error="_error_ws79p_37",line="_line_ws79p_43",styles$x={root:root$4,content,button,emailSubmit,signinIcon,error,line};function Login(){const d=useNavigate(),[c,et]=reactExports.useState(),[_e,tt]=reactExports.useState(),[nt,rt]=reactExports.useState(),[it,ot]=reactExports.useState(),[st,at]=reactExports.useState(""),[lt,ct]=reactExports.useState(""),ut="/equipment";reactExports.useEffect(()=>{firebaseUser()&&d(ut,{replace:!0})},[d]);async function dt(yt,gt){try{rt(void 0),ot(void 0),et(void 0),tt(void 0),await yt}catch(ft){if(ft instanceof FirebaseError)switch(ft.code){case AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY.INVALID_AUTH:case AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY.INVALID_PASSWORD:gt(jsxRuntimeExports.jsx(InvalidCredentialsError,{email:st}));break;default:gt(jsxRuntimeExports.jsx(ErrorMessage,{error:ft}));break}else ft instanceof Error?gt(jsxRuntimeExports.jsx(ErrorMessage,{error:ft})):gt(jsxRuntimeExports.jsx(ErrorMessage,{error:ft==null?void 0:ft.toString()}))}firebaseUser()&&d(ut)}async function ht(yt){yt.preventDefault(),rt(void 0),ot(void 0),et(void 0),tt(void 0);let gt=!0;st===""&&(gt=!1,et(jsxRuntimeExports.jsx(ErrorMessage,{error:"Email address required"}))),lt===""&&(gt=!1,tt(jsxRuntimeExports.jsx(ErrorMessage,{error:"Password required"}))),gt&&await dt(firebaseLoginWithEmail(st,lt),rt)}return jsxRuntimeExports.jsxs("main",{className:styles$x.root,children:[jsxRuntimeExports.jsx("legend",{children:"Login"}),jsxRuntimeExports.jsxs("div",{className:styles$x.content,children:[jsxRuntimeExports.jsx("p",{children:"If an account does not already exist for the given email address, a new one will be created with the password you used."}),jsxRuntimeExports.jsxs("form",{className:"w-100",onSubmit:ht,children:[nt&&jsxRuntimeExports.jsx("div",{className:styles$x.error,children:nt}),jsxRuntimeExports.jsx("label",{children:"Email"}),jsxRuntimeExports.jsx("input",{type:"email",value:st,onChange:yt=>at(yt.target.value)}),c&&jsxRuntimeExports.jsx("div",{className:styles$x.error,children:c}),jsxRuntimeExports.jsx("label",{children:"Password"}),jsxRuntimeExports.jsx("input",{type:"password",value:lt,onChange:yt=>ct(yt.target.value)}),_e&&jsxRuntimeExports.jsx("div",{className:styles$x.error,children:_e}),jsxRuntimeExports.jsxs(Button$1,{type:"submit",className:`${styles$x.button} ${styles$x.emailSubmit}`,size:"lg",children:[jsxRuntimeExports.jsx(Lock$1,{className:styles$x.signinIcon}),"Login"]})]}),jsxRuntimeExports.jsx("div",{className:styles$x.line,children:jsxRuntimeExports.jsx("span",{children:"OR"})}),it&&jsxRuntimeExports.jsx("div",{className:styles$x.error,children:it}),jsxRuntimeExports.jsxs(Button$1,{className:styles$x.button,size:"lg",onClick:()=>dt(firebaseLoginWithGoogle(),ot),children:[jsxRuntimeExports.jsx(Google$1,{className:styles$x.signinIcon}),"Continue with Google"]})]})]})}function InvalidCredentialsError({email:d}){return jsxRuntimeExports.jsxs("div",{className:styles$x.error,children:["Invalid username or password. Click here to reset your password: ",jsxRuntimeExports.jsx(ResetPasswordLink,{email:d})]})}function ErrorMessage({error:d}){const c=reactExports.useMemo(()=>d instanceof Error?d.message:d,[d]);return d===void 0?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:c&&jsxRuntimeExports.jsx("div",{className:styles$x.error,children:c})})}function ResetPasswordLink({email:d,onSent:c}){const[et,_e]=reactExports.useState("Reset Password");async function tt(){_e("Sending..."),await firebaseResetPassword(d),_e("Sent!"),c==null||c()}return jsxRuntimeExports.jsx(Button$1,{variant:"danger",className:styles$x.button,onClick:tt,children:et})}async function loginLoader(){return await firebaseAuthResult(),null}function LoginRoute(){return jsxRuntimeExports.jsx(Login,{})}function CharacterAtLevelDebugView(){const d=useCharacterAtLevel(),c=reactExports.useMemo(()=>d.keys().sort((et,_e)=>et.charCodeAt(0)-_e.charCodeAt(0)),[d]);return jsxRuntimeExports.jsxs(Table$1,{striped:!0,bordered:!0,children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"header primary",children:[jsxRuntimeExports.jsx("th",{children:"Key"}),jsxRuntimeExports.jsx("th",{children:"Value"}),jsxRuntimeExports.jsx("th",{children:"Formula"})]})}),jsxRuntimeExports.jsx("tbody",{children:c.map(et=>{var _e;return jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:et}),jsxRuntimeExports.jsx("td",{children:(_e=d.resolve(et))==null?void 0:_e.asText()}),jsxRuntimeExports.jsx("td",{})]},et)})})]})}const section$9="_section_ytw2x_20",row$2="_row_ytw2x_26",col="_col_ytw2x_32",styles$w={section:section$9,row:row$2,col},Section=({className:d,children:c,...et})=>jsxRuntimeExports.jsx("div",{className:classNames([styles$w.section,d]),...et,children:c});Section.Row=({className:d,children:c,...et})=>jsxRuntimeExports.jsx("div",{className:classNames(["hstack",styles$w.row,d]),...et,children:c});Section.Column=({className:d,children:c,...et})=>jsxRuntimeExports.jsx("div",{className:classNames(["vstack",styles$w.col,d]),...et,children:c});const root$3="_root_1t9nt_1",label$d="_label_1t9nt_13",styles$v={root:root$3,label:label$d};function BoxedValue({label:d,className:c,children:et}){return jsxRuntimeExports.jsxs("div",{className:classNames([styles$v.root,"box",c]),"data-label":d,children:[et,d&&jsxRuntimeExports.jsx("div",{className:styles$v.label,children:d})]})}const root$2="_root_19cap_1",styles$u={root:root$2};function Header({className:d,children:c,...et}){return jsxRuntimeExports.jsx("div",{className:classNames([styles$u.root,d]),...et,children:c})}const root$1="_root_wxqu2_1",styles$t={root:root$1};function Label({className:d,children:c,...et}){return jsxRuntimeExports.jsx("div",{className:classNames([styles$t.root,d]),...et,children:c})}const header$3="_header_1p8ut_1",label$c="_label_1p8ut_10",value$a="_value_1p8ut_14",styles$s={header:header$3,label:label$c,value:value$a};function AbilityScoreSection({className:d,...c}){return jsxRuntimeExports.jsx(Section,{className:classNames([styles$s.section,d]),...c,children:jsxRuntimeExports.jsxs(Section.Column,{children:[jsxRuntimeExports.jsxs(Section.Column,{className:"header-gap",children:[jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(Header,{className:styles$s.header,children:"Ability Name"}),jsxRuntimeExports.jsx(Header,{className:styles$s.header,children:"Ability Score"}),jsxRuntimeExports.jsx(Header,{className:styles$s.header,children:"Ability Modifier"}),jsxRuntimeExports.jsx(Header,{className:styles$s.header,children:"Temp Adjustment"}),jsxRuntimeExports.jsx(Header,{className:styles$s.header,children:"Temp Modifier"})]}),jsxRuntimeExports.jsx(AbilityScoreRow,{ability:"str"})]}),jsxRuntimeExports.jsx(AbilityScoreRow,{ability:"dex"}),jsxRuntimeExports.jsx(AbilityScoreRow,{ability:"con"}),jsxRuntimeExports.jsx(AbilityScoreRow,{ability:"int"}),jsxRuntimeExports.jsx(AbilityScoreRow,{ability:"wis"}),jsxRuntimeExports.jsx(AbilityScoreRow,{ability:"cha"})]})})}function AbilityScoreRow({ability:d}){const c=useCharacterAtLevel(),et=reactExports.useMemo(()=>{var tt;return((tt=c.resolve(`${d}_score`))==null?void 0:tt.asText())??""},[d,c]),_e=reactExports.useMemo(()=>{var tt;return((tt=c.resolve(`${d}_mod`))==null?void 0:tt.asText())??""},[d,c]);return jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(Label,{className:styles$s.label,children:d}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$s.value,children:et}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$s.value,children:_e}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$s.value}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$s.value})]})}const element$3="_element_dqz9v_1",styles$r={element:element$3};function CaptionedBoxedValue({captionTop:d,captionBottom:c,className:et,..._e}){return jsxRuntimeExports.jsxs(Section.Column,{className:classNames(["header-gap",styles$r.element,et]),children:[d&&jsxRuntimeExports.jsx(Header,{children:d}),jsxRuntimeExports.jsx(BoxedValue,{..._e}),c&&jsxRuntimeExports.jsx(Header,{children:c})]})}let Alignment$1=class{constructor(c,et){this.id=c,this.name=et}};const Alignments={all:[new Alignment$1("alignment:cg","Chaotic Good"),new Alignment$1("alignment:cn","Chaotic Neutral"),new Alignment$1("alignment:ce","Chaotic Evil"),new Alignment$1("alignment:ng","Neutral Good"),new Alignment$1("alignment:n","Neutral"),new Alignment$1("alignment:ne","Neutral Evil"),new Alignment$1("alignment:lg","Lawful Good"),new Alignment$1("alignment:ln","Lawful Neutral"),new Alignment$1("alignment:le","Lawful Evil")],find:d=>Alignments.all.find(c=>c.id===d)},gn=class gn{constructor(c,et,_e,tt){this.id=c,this.shortName=et,this.longName=_e,this.acModifier=tt}static fromId(c){switch(c){case 0:return this.NONE;case 1:return this.FINE;case 2:return this.DIMINUTIVE;case 3:return this.TINY;case 4:return this.SMALL;case 5:return this.MEDIUM;case 6:return this.LARGE;case 7:return this.HUGE;case 8:return this.GARGANTUAN;case 9:return this.COLOSSAL}}};cn(gn,"NONE",new gn(0,"-","N/A",0)),cn(gn,"FINE",new gn(1,"F","Fine",8)),cn(gn,"DIMINUTIVE",new gn(2,"D","Diminutive",4)),cn(gn,"TINY",new gn(3,"T","Tiny",2)),cn(gn,"SMALL",new gn(4,"S","Small",1)),cn(gn,"MEDIUM",new gn(5,"M","Medium",0)),cn(gn,"LARGE",new gn(6,"L","Large",-1)),cn(gn,"HUGE",new gn(7,"H","Huge",-2)),cn(gn,"GARGANTUAN",new gn(8,"G","Gargantuan",-4)),cn(gn,"COLOSSAL",new gn(9,"C","Colossal",-8));let CreatureSize=gn;const CharacterName=value$9("character_name"),Alignment=value$9("alignment",d=>{var c;return((c=Alignments.find(d))==null?void 0:c.name)??"Unknown"}),TotalHealth=value$9("hp_total"),BaseAttackBonus=value$9("bab"),CMB=value$9("cmb"),CMD=value$9("cmd"),Initiative=value$9("initiative"),StrengthMod=value$9("str_mod"),DexterityMod=value$9("dex_mod"),SizeMod=value$9("size_mod"),Value=d=>jsxRuntimeExports.jsx(CharacterValue,{...d});function value$9(d,c){return et=>jsxRuntimeExports.jsx(CharacterValue,{dataKey:d,lookupFn:c,...et})}function CharacterLevel(){const d=useCharacterAtLevel(),c=useDatabase(),et=reactExports.useMemo(()=>uniq(d.choices.filter(tt=>tt.type==="class").map(tt=>d.selected(tt)).filter(tt=>tt!=="")).map(tt=>{var it;if(!tt)return"Unknown";const nt=((it=d.resolve(tt))==null?void 0:it.asNumber())??0;return`${c.name(tt)??"Unknown"} ${nt}`}).join("/"),[d,c]);return jsxRuntimeExports.jsx("span",{children:et})}function Race(){const d=useCharacterAtLevel(),c=useDatabase(),et=reactExports.useMemo(()=>{const _e=d.choices.find(nt=>nt.type==="race"),tt=_e!==void 0?d.selected(_e):void 0;return c.name(tt)??"Unknown"},[d,c]);return jsxRuntimeExports.jsx("span",{children:et})}function Size(){const d=useCharacterAtLevel(),c=reactExports.useMemo(()=>{var _e;const et=d.resolve("size");return et===void 0?"Unknown":((_e=CreatureSize.fromId(et.asNumber()))==null?void 0:_e.longName)??"Unknown"},[d]);return jsxRuntimeExports.jsx("span",{children:c})}function CharacterValue({dataKey:d,lookupFn:c,fallback:et="",modifier:_e=!1}){const tt=useCharacterAtLevel(),nt=reactExports.useMemo(()=>{var it;let rt=(it=tt.resolve(d))==null?void 0:it.asText();if(!(rt===void 0||rt===""))return c!==void 0&&(rt=c(rt)),_e&&rt!==""&&(rt=rt.startsWith("-")?rt:"+"+rt),rt},[d,tt,c,_e]);return jsxRuntimeExports.jsx("span",{children:nt??et})}const element$2="_element_e6f0v_1",styles$q={element:element$2};function Operator({className:d,children:c,...et}){return jsxRuntimeExports.jsx("div",{className:classNames([styles$q.element,"box",d]),...et,children:c})}const element$1="_element_i7aqi_1",styles$p={element:element$1};function PlainValue({className:d,children:c,...et}){return jsxRuntimeExports.jsx("div",{className:classNames([styles$p.element,"box",d]),...et,children:c})}const label$b="_label_2bh8i_1",value$8="_value_2bh8i_5",scalar="_scalar_2bh8i_10",touchValue="_touchValue_2bh8i_14 _value_2bh8i_5",flatFootedValue="_flatFootedValue_2bh8i_18 _value_2bh8i_5",modifiersValue$1="_modifiersValue_2bh8i_22 _value_2bh8i_5",styles$o={label:label$b,value:value$8,scalar,touchValue,flatFootedValue,modifiersValue:modifiersValue$1};function ArmorSection({className:d,...c}){return jsxRuntimeExports.jsx(Section,{className:classNames([styles$o.section,d]),...c,children:jsxRuntimeExports.jsxs(Section.Column,{children:[jsxRuntimeExports.jsxs(Section.Row,{className:"align-items-start",children:[jsxRuntimeExports.jsx(Label,{className:styles$o.label,children:"AC"}),jsxRuntimeExports.jsx(CaptionedBoxedValue,{captionBottom:"Total",className:styles$o.value,children:jsxRuntimeExports.jsx(CharacterValue,{dataKey:"ac"})}),jsxRuntimeExports.jsx(Operator,{children:"="}),jsxRuntimeExports.jsx(PlainValue,{className:styles$o.scalar,children:"10"}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(CaptionedBoxedValue,{captionBottom:"Armor Bonus",className:styles$o.value,children:jsxRuntimeExports.jsx(CharacterValue,{dataKey:"ac:armor",fallback:"0"})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(CaptionedBoxedValue,{captionBottom:"Shield Bonus",className:styles$o.value,children:jsxRuntimeExports.jsx(CharacterValue,{dataKey:"ac:shield",fallback:"0"})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(CaptionedBoxedValue,{captionBottom:"Dexterity Modifier",className:styles$o.value,children:jsxRuntimeExports.jsx(DexterityMod,{})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(CaptionedBoxedValue,{captionBottom:"Size Modifier",className:styles$o.value,children:jsxRuntimeExports.jsx(SizeMod,{})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(CaptionedBoxedValue,{captionBottom:"Natural Armor",className:styles$o.value,children:jsxRuntimeExports.jsx(CharacterValue,{dataKey:"ac:natural",fallback:"0"})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(CaptionedBoxedValue,{captionBottom:"Deflection Bonus",className:styles$o.value,children:jsxRuntimeExports.jsx(CharacterValue,{dataKey:"ac:deflection",fallback:"0"})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(CaptionedBoxedValue,{captionBottom:"Misc Modifier",className:styles$o.value,children:jsxRuntimeExports.jsx(CharacterValue,{dataKey:"ac:misc"})})]}),jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(Label,{className:styles$o.label,children:"Touch"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$o.touchValue,children:jsxRuntimeExports.jsx(CharacterValue,{dataKey:"ac:touch"})}),jsxRuntimeExports.jsx(Label,{className:styles$o.label,children:"Flat-Footed"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$o.flatFootedValue,children:jsxRuntimeExports.jsx(CharacterValue,{dataKey:"ac:flat"})}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$o.modifiersValue,label:"Modifiers"})]})]})})}const section$8="_section_wmpm6_1",label$a="_label_wmpm6_5",value$7="_value_wmpm6_11",styles$n={section:section$8,label:label$a,value:value$7};function BabSection({className:d,...c}){return jsxRuntimeExports.jsxs(Section,{className:classNames([styles$n.section,d]),...c,children:[jsxRuntimeExports.jsx(Label,{className:styles$n.label,children:"Base Attack Bonus"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$n.value,children:jsxRuntimeExports.jsx(BaseAttackBonus,{modifier:!0})})]})}const root="_root_aru1x_1",underlined$1="_underlined_aru1x_7 _underlined_18hg9_35",label$9="_label_aru1x_11 _label_18hg9_40",styles$m={root,underlined:underlined$1,label:label$9};function UnderlinedValue({label:d,className:c,children:et}){return jsxRuntimeExports.jsxs("div",{className:`${styles$m.root} ${c??""}`,children:[jsxRuntimeExports.jsx("div",{className:styles$m.underlined,children:et}),d&&jsxRuntimeExports.jsx("div",{className:styles$m.label,children:d})]})}const section$7="_section_12kwy_1",row$1="_row_12kwy_6",characterName="_characterName_12kwy_10",alignment="_alignment_12kwy_14",playerName="_playerName_12kwy_18",characterLevel="_characterLevel_12kwy_22",deity="_deity_12kwy_26",homeland="_homeland_12kwy_30",race="_race_12kwy_34",size="_size_12kwy_38",gender="_gender_12kwy_42",age="_age_12kwy_46",height="_height_12kwy_50",weight="_weight_12kwy_54",hair="_hair_12kwy_58",eyes="_eyes_12kwy_62",styles$l={section:section$7,row:row$1,characterName,alignment,playerName,characterLevel,deity,homeland,race,size,gender,age,height,weight,hair,eyes};function CharacterInfoSection({className:d,...c}){return jsxRuntimeExports.jsx(Section,{className:classNames([styles$l.section,d]),...c,children:jsxRuntimeExports.jsxs(Section.Column,{className:"header-gap",children:[jsxRuntimeExports.jsxs(Section.Row,{className:styles$l.row,children:[jsxRuntimeExports.jsx(UnderlinedValue,{label:"Character Name",className:styles$l.characterName,children:jsxRuntimeExports.jsx(CharacterName,{})}),jsxRuntimeExports.jsx(UnderlinedValue,{label:"Alignment",className:styles$l.alignment,children:jsxRuntimeExports.jsx(Alignment,{})}),jsxRuntimeExports.jsx(UnderlinedValue,{label:"Player",className:styles$l.playerName})]}),jsxRuntimeExports.jsxs(Section.Row,{className:styles$l.row,children:[jsxRuntimeExports.jsx(UnderlinedValue,{label:"Character Level",className:styles$l.characterLevel,children:jsxRuntimeExports.jsx(CharacterLevel,{})}),jsxRuntimeExports.jsx(UnderlinedValue,{label:"Deity",className:styles$l.deity}),jsxRuntimeExports.jsx(UnderlinedValue,{label:"Homeland",className:styles$l.homeland})]}),jsxRuntimeExports.jsxs(Section.Row,{className:styles$l.row,children:[jsxRuntimeExports.jsx(UnderlinedValue,{label:"Race",className:styles$l.race,children:jsxRuntimeExports.jsx(Race,{})}),jsxRuntimeExports.jsx(UnderlinedValue,{label:"Size",className:styles$l.size,children:jsxRuntimeExports.jsx(Size,{})}),jsxRuntimeExports.jsx(UnderlinedValue,{label:"Gender",className:styles$l.gender}),jsxRuntimeExports.jsx(UnderlinedValue,{label:"Age",className:styles$l.age}),jsxRuntimeExports.jsx(UnderlinedValue,{label:"Height",className:styles$l.height}),jsxRuntimeExports.jsx(UnderlinedValue,{label:"Weight",className:styles$l.weight}),jsxRuntimeExports.jsx(UnderlinedValue,{label:"Hair",className:styles$l.hair}),jsxRuntimeExports.jsx(UnderlinedValue,{label:"Eyes",className:styles$l.eyes})]})]})})}const section$6="_section_1w0b9_1",label$8="_label_1w0b9_5",value$6="_value_1w0b9_9",modifiers$1="_modifiers_1w0b9_13",headerRow$1="_headerRow_1w0b9_17",headerOperator="_headerOperator_1w0b9_22",styles$k={section:section$6,label:label$8,value:value$6,modifiers:modifiers$1,headerRow:headerRow$1,headerOperator};function CombatManeuverSection({className:d,...c}){return jsxRuntimeExports.jsx(Section,{className:classNames([styles$k.section,d]),...c,children:jsxRuntimeExports.jsxs(Section.Column,{children:[jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsxs(Section.Column,{className:"header-gap flex-grow-0",style:{marginBottom:"0.5em"},children:[jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(Label,{className:styles$k.label,children:"CMB"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$k.value,children:jsxRuntimeExports.jsx(CMB,{})}),jsxRuntimeExports.jsx(Operator,{children:"="}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$k.value,children:jsxRuntimeExports.jsx(BaseAttackBonus,{})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$k.value,children:jsxRuntimeExports.jsx(StrengthMod,{})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$k.value,children:jsxRuntimeExports.jsx(SizeMod,{})})]}),jsxRuntimeExports.jsxs(Section.Row,{className:styles$k.headerRow,children:[jsxRuntimeExports.jsx(Header,{className:classNames([styles$k.label,styles$k.header])}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$k.value,styles$k.header]),children:"Total"}),jsxRuntimeExports.jsx(Operator,{className:styles$k.headerOperator,children:"="}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$k.value,styles$k.header]),children:"Base Attack Bonus"}),jsxRuntimeExports.jsx(Operator,{className:styles$k.headerOperator,children:"="}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$k.value,styles$k.header]),children:"Strength Modifier"}),jsxRuntimeExports.jsx(Operator,{className:styles$k.headerOperator,children:"="}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$k.value,styles$k.header]),children:"Size Modifier"})]})]}),jsxRuntimeExports.jsx(Section.Column,{className:"flex-fill",children:jsxRuntimeExports.jsx(BoxedValue,{className:styles$k.modifiers,label:"Modifiers"})})]}),jsxRuntimeExports.jsxs(Section.Column,{className:"header-gap",children:[jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(Label,{className:styles$k.label,children:"CMD"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$k.value,children:jsxRuntimeExports.jsx(CMD,{})}),jsxRuntimeExports.jsx(Operator,{children:"="}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$k.value,children:jsxRuntimeExports.jsx(BaseAttackBonus,{})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$k.value,children:jsxRuntimeExports.jsx(StrengthMod,{})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$k.value,children:jsxRuntimeExports.jsx(DexterityMod,{})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$k.value,children:jsxRuntimeExports.jsx(SizeMod,{})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(PlainValue,{children:"10"})]}),jsxRuntimeExports.jsxs(Section.Row,{className:styles$k.headerRow,children:[jsxRuntimeExports.jsx(Header,{className:classNames([styles$k.label,styles$k.header])}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$k.value,styles$k.header]),children:"Total"}),jsxRuntimeExports.jsx(Operator,{className:styles$k.headerOperator,children:"="}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$k.value,styles$k.header]),children:"Base Attack Bonus"}),jsxRuntimeExports.jsx(Operator,{className:styles$k.headerOperator,children:"+"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$k.value,styles$k.header]),children:"Strength Modifier"}),jsxRuntimeExports.jsx(Operator,{className:styles$k.headerOperator,children:"+"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$k.value,styles$k.header]),children:"Dexterity Modifier"}),jsxRuntimeExports.jsx(Operator,{className:styles$k.headerOperator,children:"+"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$k.value,styles$k.header]),children:"Size Modifier"}),jsxRuntimeExports.jsx(Operator,{className:styles$k.headerOperator,children:"+"}),jsxRuntimeExports.jsx(PlainValue,{className:styles$k.headerOperator,children:"10"})]})]})]})})}const section$5="_section_zet6w_1",label$7="_label_zet6w_5",totalHealth="_totalHealth_zet6w_9",dr="_dr_zet6w_13",header$2="_header_zet6w_17",currentHp="_currentHp_zet6w_23",styles$j={section:section$5,label:label$7,totalHealth,dr,header:header$2,currentHp};function HealthSection({className:d,...c}){return jsxRuntimeExports.jsx(Section,{className:classNames([styles$j.section,d]),...c,children:jsxRuntimeExports.jsxs(Section.Column,{children:[jsxRuntimeExports.jsxs(Section.Row,{className:"no-grow",children:[jsxRuntimeExports.jsx(Label,{className:styles$j.label,children:"HP"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$j.totalHealth,label:"Total",children:jsxRuntimeExports.jsx(TotalHealth,{})}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$j.dr,label:"DR"})]}),jsxRuntimeExports.jsxs(Section.Column,{className:"flex-grow-1",children:[jsxRuntimeExports.jsxs(Section.Column,{className:"no-gap flex-grow-1",children:[jsxRuntimeExports.jsx(Header,{className:styles$j.header,children:"Current HP"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$j.currentHp})]}),jsxRuntimeExports.jsxs(Section.Column,{className:"no-gap no-grow",children:[jsxRuntimeExports.jsx(Header,{className:styles$j.header,children:"Nonlethal Damage"}),jsxRuntimeExports.jsx(BoxedValue,{})]})]})]})})}const section$4="_section_1s3gj_1",label$6="_label_1s3gj_6",styles$i={section:section$4,label:label$6};function InitiativeSection({className:d,...c}){return jsxRuntimeExports.jsxs(Section,{className:classNames([styles$i.section,d]),...c,children:[jsxRuntimeExports.jsx(Label,{className:styles$i.label,children:"Initiative"}),jsxRuntimeExports.jsx(Section.Row,{children:jsxRuntimeExports.jsxs(Section.Row,{className:"align-items-start",children:[jsxRuntimeExports.jsx(CaptionedBoxedValue,{captionBottom:"Total",className:styles$i.value,children:jsxRuntimeExports.jsx(Initiative,{})}),jsxRuntimeExports.jsx(Operator,{children:"="}),jsxRuntimeExports.jsx(CaptionedBoxedValue,{captionBottom:"DEX Modifier",className:styles$i.value,children:jsxRuntimeExports.jsx(DexterityMod,{})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(CaptionedBoxedValue,{captionBottom:"Misc Modifier",className:styles$i.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"initiative:misc"})})]})})]})}const section$3="_section_n9vu8_1",title$2="_title_n9vu8_5",value$5="_value_n9vu8_9",styles$h={section:section$3,title:title$2,value:value$5};function LanguagesSection({className:d,...c}){return jsxRuntimeExports.jsxs(Section,{className:classNames(["no-gap",styles$h.section,d]),...c,children:[jsxRuntimeExports.jsx("div",{className:classNames(["title",styles$h.title]),children:"Languages:"}),jsxRuntimeExports.jsx(UnderlinedValue,{className:styles$h.value}),jsxRuntimeExports.jsx(UnderlinedValue,{className:styles$h.value}),jsxRuntimeExports.jsx(UnderlinedValue,{className:styles$h.value})]})}const label$5="_label_1igtk_1",header$1="_header_1igtk_6",value$4="_value_1igtk_11",operator$1="_operator_1igtk_16",headerDivider="_headerDivider_1igtk_21",modifiersValue="_modifiersValue_1igtk_26",styles$g={label:label$5,header:header$1,value:value$4,operator:operator$1,headerDivider,modifiersValue};function SavingThrowsSection({className:d,...c}){return jsxRuntimeExports.jsx(Section,{className:classNames([styles$g.section,d]),...c,children:jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsxs(Section.Column,{children:[jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(Header,{className:classNames([styles$g.label,styles$g.header]),children:"Saving Throws"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$g.value,styles$g.header]),children:"Total"}),jsxRuntimeExports.jsx("div",{className:classNames([styles$g.operator,styles$g.headerDivider]),children:"="}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$g.value,styles$g.header]),children:"Base Save"}),jsxRuntimeExports.jsx("div",{className:classNames([styles$g.operator,styles$g.headerDivider]),children:"+"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$g.value,styles$g.header]),children:"Ability Modifier"}),jsxRuntimeExports.jsx("div",{className:classNames([styles$g.operator,styles$g.headerDivider]),children:"+"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$g.value,styles$g.header]),children:"Magic Modifier"}),jsxRuntimeExports.jsx("div",{className:classNames([styles$g.operator,styles$g.headerDivider]),children:"+"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$g.value,styles$g.header]),children:"Misc Modifier"}),jsxRuntimeExports.jsx("div",{className:classNames([styles$g.operator,styles$g.headerDivider]),children:"+"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$g.value,styles$g.header]),children:"Temporary Modifier"})]}),jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(Label,{className:styles$g.label,children:"Fortitude"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$g.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"fort_save",fallback:"0"})}),jsxRuntimeExports.jsx("div",{className:styles$g.operator,children:"="}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$g.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"fort:base",fallback:"0"})}),jsxRuntimeExports.jsx("div",{className:styles$g.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$g.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"con_mod",fallback:"0"})}),jsxRuntimeExports.jsx("div",{className:styles$g.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$g.value}),jsxRuntimeExports.jsx("div",{className:styles$g.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$g.value}),jsxRuntimeExports.jsx("div",{className:styles$g.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$g.value})]}),jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(Label,{className:styles$g.label,children:"Reflex"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$g.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"ref_save",fallback:"0"})}),jsxRuntimeExports.jsx("div",{className:styles$g.operator,children:"="}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$g.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"ref:base",fallback:"0"})}),jsxRuntimeExports.jsx("div",{className:styles$g.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$g.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"dex_mod",fallback:"0"})}),jsxRuntimeExports.jsx("div",{className:styles$g.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$g.value}),jsxRuntimeExports.jsx("div",{className:styles$g.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$g.value}),jsxRuntimeExports.jsx("div",{className:styles$g.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$g.value})]}),jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(Label,{className:styles$g.label,children:"Will"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$g.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"will_save",fallback:"0"})}),jsxRuntimeExports.jsx("div",{className:styles$g.operator,children:"="}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$g.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"will:base",fallback:"0"})}),jsxRuntimeExports.jsx("div",{className:styles$g.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$g.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"wis_mod",fallback:"0"})}),jsxRuntimeExports.jsx("div",{className:styles$g.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$g.value}),jsxRuntimeExports.jsx("div",{className:styles$g.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$g.value}),jsxRuntimeExports.jsx("div",{className:styles$g.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$g.value})]})]}),jsxRuntimeExports.jsx(Section.Column,{children:jsxRuntimeExports.jsx(BoxedValue,{className:styles$g.modifiersValue,label:"Modifiers"})})]})})}const skillRow="_skillRow_ckpnr_1",skillName="_skillName_ckpnr_6",value$3="_value_ckpnr_15",abilityName="_abilityName_ckpnr_22",operator="_operator_ckpnr_27",title$1="_title_ckpnr_32",modifierLine="_modifierLine_ckpnr_36",classTrainedBox="_classTrainedBox_ckpnr_40",classTrainedBoxChecked="_classTrainedBoxChecked_ckpnr_47 _classTrainedBox_ckpnr_40",classTrainedBoxUnchecked="_classTrainedBoxUnchecked_ckpnr_52 _classTrainedBox_ckpnr_40",styles$f={skillRow,skillName,value:value$3,abilityName,operator,title:title$1,modifierLine,classTrainedBox,classTrainedBoxChecked,classTrainedBoxUnchecked};class Skill{constructor(c,et,_e,tt,nt){this.id=c,this.name=et,this.untrained=_e,this.armorCheckPenalty=tt,this.keyAbility=nt}}const Skills={all:[new Skill("skill:acrobatics","Acrobatics",!0,!0,"dex"),new Skill("skill:appraise","Appraise",!0,!1,"int"),new Skill("skill:bluff","Bluff",!0,!1,"cha"),new Skill("skill:climb","Climb",!0,!0,"str"),new Skill("skill:craft","Craft",!0,!1,"int"),new Skill("skill:diplomacy","Diplomacy",!0,!1,"cha"),new Skill("skill:disable_device","Disable Device",!1,!0,"dex"),new Skill("skill:disguise","Disguise",!0,!1,"cha"),new Skill("skill:escape_artist","Escape Artist",!0,!0,"dex"),new Skill("skill:fly","Fly",!0,!0,"dex"),new Skill("skill:handle_animal","Handle Animal",!1,!1,"cha"),new Skill("skill:heal","Heal",!0,!1,"wis"),new Skill("skill:intimidate","Intimidate",!0,!1,"cha"),new Skill("skill:knowledge_arcana","Knowledge (arcana)",!1,!1,"int"),new Skill("skill:knowledge_dungeoneering","Knowledge (dungeoneering)",!1,!1,"int"),new Skill("skill:knowledge_engineering","Knowledge (engineering)",!1,!1,"int"),new Skill("skill:knowledge_geography","Knowledge (geography)",!1,!1,"int"),new Skill("skill:knowledge_history","Knowledge (history)",!1,!1,"int"),new Skill("skill:knowledge_local","Knowledge (local)",!1,!1,"int"),new Skill("skill:knowledge_nature","Knowledge (nature)",!1,!1,"int"),new Skill("skill:knowledge_nobility","Knowledge (nobility)",!1,!1,"int"),new Skill("skill:knowledge_planes","Knowledge (planes)",!1,!1,"int"),new Skill("skill:knowledge_religion","Knowledge (religion)",!1,!1,"int"),new Skill("skill:linguistics","Linguistics",!1,!1,"int"),new Skill("skill:perception","Perception",!0,!1,"wis"),new Skill("skill:perform","Perform",!0,!1,"cha"),new Skill("skill:profession","Profession",!1,!1,"wis"),new Skill("skill:ride","Ride",!0,!0,"dex"),new Skill("skill:sense_motive","Sense Motive",!0,!1,"wis"),new Skill("skill:sleight_of_hand","Sleight of Hand",!1,!0,"dex"),new Skill("skill:spellcraft","Spellcraft",!1,!1,"int"),new Skill("skill:stealth","Stealth",!0,!0,"dex"),new Skill("skill:survival","Survival",!0,!1,"wis"),new Skill("skill:swim","Swim",!0,!0,"str"),new Skill("skill:use_magic_device","Use Magic Device",!1,!1,"cha")],find:d=>{const[c,et]=d.split("#"),_e=Skills.all.find(tt=>tt.id===c);if(_e)return et?new Skill(d,`${_e.name} (${et})`,_e.untrained,_e.armorCheckPenalty,_e.keyAbility):_e}};function SkillsSection({className:d,...c}){const et=useCharacterAtLevel();return jsxRuntimeExports.jsx(Section,{className:classNames([styles$f.section,d]),...c,children:jsxRuntimeExports.jsxs(Section.Column,{children:[jsxRuntimeExports.jsx(Label,{className:styles$f.label,children:"Skills"}),Skills.all.map(_e=>{var tt,nt,rt,it;return jsxRuntimeExports.jsxs(Section.Row,{className:styles$f.skillRow,children:[jsxRuntimeExports.jsx(ClassTrainedBox,{skill:_e,characterAtLevel:et}),jsxRuntimeExports.jsxs("div",{className:styles$f.skillName,children:[_e.name,_e.untrained?"":"*"]}),jsxRuntimeExports.jsx(UnderlinedValue,{className:styles$f.value,children:(((tt=et.resolve(_e.id))==null?void 0:tt.asNumber())??0)+(((nt=et.resolve(_e.keyAbility+"_mod"))==null?void 0:nt.asNumber())??0)}),jsxRuntimeExports.jsxs("div",{className:styles$f.operator,children:["= ",jsxRuntimeExports.jsx("span",{className:styles$f.abilityName,children:_e.keyAbility})]}),jsxRuntimeExports.jsx(UnderlinedValue,{className:styles$f.value,children:(rt=et.resolve(_e.keyAbility+"_mod"))==null?void 0:rt.asText()}),jsxRuntimeExports.jsx("div",{className:styles$f.operator,children:"+"}),jsxRuntimeExports.jsx(UnderlinedValue,{className:styles$f.value,children:(it=et.resolve(_e.id))==null?void 0:it.asNumber()}),jsxRuntimeExports.jsx("div",{className:styles$f.operator,children:"+"}),jsxRuntimeExports.jsx(UnderlinedValue,{className:styles$f.value})]},_e.id)}),jsxRuntimeExports.jsxs(Section.Column,{className:"no-gap",children:[jsxRuntimeExports.jsx("div",{className:classNames(["title",styles$f.title]),children:"Conditional Modifiers:"}),jsxRuntimeExports.jsx(UnderlinedValue,{className:styles$f.modifierLine}),jsxRuntimeExports.jsx(UnderlinedValue,{className:styles$f.modifierLine})]})]})})}function ClassTrainedBox({skill:d,characterAtLevel:c}){const et=reactExports.useMemo(()=>{var _e;return((_e=c.resolve("trained:"+d.id))==null?void 0:_e.asBoolean())??!1},[d,c]);return jsxRuntimeExports.jsx("div",{className:et?styles$f.classTrainedBoxChecked:styles$f.classTrainedBoxUnchecked})}const label$4="_label_t0yvf_1",header="_header_t0yvf_5",headerRow="_headerRow_t0yvf_9",value$2="_value_t0yvf_13",valueFly="_valueFly_t0yvf_13",modifiers="_modifiers_t0yvf_23",styles$e={label:label$4,header,headerRow,value:value$2,valueFly,modifiers};function SpeedSection({className:d,...c}){return jsxRuntimeExports.jsxs(Section,{className:classNames([styles$e.section,d]),...c,children:[jsxRuntimeExports.jsxs(Section.Column,{children:[jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(Label,{className:styles$e.label,children:"Speed"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"speed:base"})}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"speed:armor"})})]}),jsxRuntimeExports.jsxs(Section.Row,{className:styles$e.headerRow,children:[jsxRuntimeExports.jsx(Header,{className:classNames([styles$e.label,styles$e.header])}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$e.value,styles$e.header]),children:"Base Speed"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$e.value,styles$e.header]),children:"With Armor"})]}),jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.valueFly,children:jsxRuntimeExports.jsx(Value,{dataKey:"speed:fly"})}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"speed:swim"})}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"speed:climb"})}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"speed:burrow"})})]}),jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(Header,{className:classNames([styles$e.valueFly,styles$e.header]),children:"Fly"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$e.value,styles$e.header]),children:"Swim"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$e.value,styles$e.header]),children:"Climb"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$e.value,styles$e.header]),children:"Burrow"})]})]}),jsxRuntimeExports.jsx(Section.Column,{children:jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.modifiers,label:"Temp Modifier"})})]})}const section$2="_section_161km_1",label$3="_label_161km_5",value$1="_value_161km_14",styles$d={section:section$2,label:label$3,value:value$1};function SpellResistanceSection({className:d,...c}){return jsxRuntimeExports.jsxs(Section,{className:classNames([styles$d.section,d]),...c,children:[jsxRuntimeExports.jsx(Label,{className:styles$d.label,children:"Spell Resistance"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$d.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"sr"})})]})}const section$1="_section_1xj6y_1",row="_row_1xj6y_7",element="_element_1xj6y_13",title="_title_1xj6y_16",value="_value_1xj6y_31",leftValue="_leftValue_1xj6y_38",damage="_damage_1xj6y_57",styles$c={section:section$1,row,element,title,value,leftValue,damage};function WeaponSection({className:d,...c}){return jsxRuntimeExports.jsxs(Section,{className:classNames([styles$c.section,d]),...c,children:[jsxRuntimeExports.jsxs("div",{className:styles$c.row,children:[jsxRuntimeExports.jsxs("div",{className:styles$c.element,children:[jsxRuntimeExports.jsx("div",{className:styles$c.title,children:"Weapon"}),jsxRuntimeExports.jsx("div",{className:classNames([styles$c.value,styles$c.leftValue])})]}),jsxRuntimeExports.jsxs("div",{className:styles$c.element,children:[jsxRuntimeExports.jsx("div",{className:styles$c.title,children:"Attack Bonus"}),jsxRuntimeExports.jsx("div",{className:styles$c.value})]}),jsxRuntimeExports.jsxs("div",{className:styles$c.element,children:[jsxRuntimeExports.jsx("div",{className:styles$c.title,children:"Critical"}),jsxRuntimeExports.jsx("div",{className:styles$c.value})]})]}),jsxRuntimeExports.jsxs("div",{className:styles$c.row,children:[jsxRuntimeExports.jsxs("div",{className:styles$c.element,children:[jsxRuntimeExports.jsx("div",{className:styles$c.title,children:"Type"}),jsxRuntimeExports.jsx("div",{className:classNames([styles$c.value,styles$c.leftValue])})]}),jsxRuntimeExports.jsxs("div",{className:styles$c.element,children:[jsxRuntimeExports.jsx("div",{className:styles$c.title,children:"Range"}),jsxRuntimeExports.jsx("div",{className:styles$c.value})]}),jsxRuntimeExports.jsxs("div",{className:styles$c.element,children:[jsxRuntimeExports.jsx("div",{className:styles$c.title,children:"Ammunition"}),jsxRuntimeExports.jsx("div",{className:styles$c.value})]}),jsxRuntimeExports.jsxs("div",{className:classNames([styles$c.element,styles$c.damage]),children:[jsxRuntimeExports.jsx("div",{className:styles$c.title,children:"Damage"}),jsxRuntimeExports.jsx("div",{className:styles$c.value})]})]})]})}const page="_page_1j865_2",styles$b={page};function PrintablePage({className:d,children:c,...et}){return jsxRuntimeExports.jsx("div",{className:classNames([styles$b.page,d]),...et,children:c})}const sheet="_sheet_18hg9_21",leftColumn="_leftColumn_18hg9_25",rightColumn="_rightColumn_18hg9_30",underlined="_underlined_18hg9_35",label$2="_label_18hg9_40",characterInfo="_characterInfo_18hg9_46",abilityScores="_abilityScores_18hg9_50",health="_health_18hg9_53",initiative="_initiative_18hg9_58",styles$a={sheet,leftColumn,rightColumn,underlined,label:label$2,characterInfo,abilityScores,health,initiative},CharacterSheetContext=reactExports.createContext(void 0);function useCharacterSheetContext(){const d=reactExports.useContext(CharacterSheetContext);if(d===void 0)throw Error("Must be used in a provider");return d}function useCharacterAtLevel(){return useCharacterSheetContext().characterAtLevel}function CharacterSheet(d){return jsxRuntimeExports.jsx(Section.Column,{children:jsxRuntimeExports.jsxs(CharacterSheetContext.Provider,{value:d,children:[jsxRuntimeExports.jsxs(PrintablePage,{className:styles$a.sheet,children:[jsxRuntimeExports.jsx(Section.Row,{children:jsxRuntimeExports.jsx(CharacterInfoSection,{className:styles$a.characterInfo})}),jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsxs(Section.Column,{className:styles$a.leftColumn,children:[jsxRuntimeExports.jsxs(Section.Row,{className:"align-items-start",children:[jsxRuntimeExports.jsx(AbilityScoreSection,{className:styles$a.abilityScores}),jsxRuntimeExports.jsxs(Section.Column,{children:[jsxRuntimeExports.jsx(HealthSection,{className:styles$a.health}),jsxRuntimeExports.jsx(InitiativeSection,{className:styles$a.initiative})]})]}),jsxRuntimeExports.jsxs(Section.Column,{children:[jsxRuntimeExports.jsx(ArmorSection,{className:styles$a.armor}),jsxRuntimeExports.jsx(SavingThrowsSection,{className:styles$a.savingThrows}),jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(BabSection,{className:styles$a.bab}),jsxRuntimeExports.jsx(SpellResistanceSection,{className:styles$a.spellResistance})]}),jsxRuntimeExports.jsx(CombatManeuverSection,{className:styles$a.combatManeuver}),jsxRuntimeExports.jsx(WeaponSection,{}),jsxRuntimeExports.jsx(WeaponSection,{}),jsxRuntimeExports.jsx(WeaponSection,{}),jsxRuntimeExports.jsx(WeaponSection,{})]})]}),jsxRuntimeExports.jsxs(Section.Column,{className:styles$a.rightColumn,children:[jsxRuntimeExports.jsx(SpeedSection,{}),jsxRuntimeExports.jsx(SkillsSection,{}),jsxRuntimeExports.jsx(LanguagesSection,{})]})]})]}),jsxRuntimeExports.jsx(PrintablePage,{style:{display:"flex"},children:jsxRuntimeExports.jsx(CharacterAtLevelDebugView,{})})]})})}async function characterSheetLoader({params:d}){const c=d.id,et=d.level;if(c===void 0)throw new Response("Character ID required",{status:400});if(et===void 0)throw new Response("Character level required",{status:400});const _e=await withGlobalCharacterStore(),tt=await timedAsync(()=>_e.load(c),"Loading character");if(tt===void 0)throw new Response("Character not found",{status:404});const nt=await withGlobalDatabase();if(!nt)throw new Error("Unable to initialize database");const rt=tt.atLevel(et);if(rt===void 0)throw new Response("Character level not found",{status:404});return{characterAtLevel:rt,database:nt}}function CharacterSheetRoute(){const{characterAtLevel:d,database:c}=useLoaderData();return jsxRuntimeExports.jsx(DatabaseContext.Provider,{value:c,children:jsxRuntimeExports.jsx(CharacterSheet,{characterAtLevel:d,database:c})})}const controls="_controls_v6ngv_1",equipmentSets="_equipmentSets_v6ngv_5",equipmentSet="_equipmentSet_v6ngv_5",nameContainer="_nameContainer_v6ngv_16",deleteButtonContainer="_deleteButtonContainer_v6ngv_22",styles$9={controls,equipmentSets,equipmentSet,nameContainer,deleteButtonContainer};function NewEquipmentSetDialog({show:d,onCreate:c,onCancel:et}){const[_e,tt]=reactExports.useState("");function nt(rt){c(rt)}return jsxRuntimeExports.jsxs(Modal$1,{show:d,onHide:et,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,size:"lg",scrollable:!0,className:"pf-new-equipment-set-dialog",children:[jsxRuntimeExports.jsx(Modal$1.Header,{className:"title",closeButton:!0,closeVariant:"white",children:jsxRuntimeExports.jsx(Modal$1.Title,{children:"Create Equipment Set"})}),jsxRuntimeExports.jsx(Modal$1.Body,{children:jsxRuntimeExports.jsxs(Container$1,{children:[jsxRuntimeExports.jsx("label",{children:"Equipment Set Name"}),jsxRuntimeExports.jsx(TextInput,{value:_e,onChange:tt,onEnter:nt,autoFocus:!0})]})}),jsxRuntimeExports.jsx(Modal$1.Footer,{children:jsxRuntimeExports.jsx(Button$1,{size:"lg",onClick:rt=>nt(_e),children:"Create"})})]})}function EquipmentSetList(){const d=useEquipmentSetStore(),c=useNavigate(),[et,_e]=reactExports.useState([]),[tt,nt]=useAsyncMemo(()=>d.list(),[d]);reactExports.useEffect(()=>{_e(tt)},[tt]);const rt=async ot=>{const st=await d.create(ot);c(`/equipment/edit/${st.id}`)},it=async ot=>{_e(et.filter(st=>st.id!==ot)),await d.delete(ot)};return jsxRuntimeExports.jsxs("main",{children:[jsxRuntimeExports.jsx("header",{children:"Equipment Sets"}),jsxRuntimeExports.jsxs("section",{children:[nt?jsxRuntimeExports.jsx(LoadingBlock,{}):jsxRuntimeExports.jsx("div",{className:styles$9.equipmentSets,children:et==null?void 0:et.map(ot=>jsxRuntimeExports.jsx(EquipmentSetListEntry,{equipmentSet:ot,onDelete:it},ot.id))}),jsxRuntimeExports.jsx("div",{className:styles$9.controls,children:jsxRuntimeExports.jsx(AddCharacterButton,{disabled:nt,onCreate:rt})})]})]})}function EquipmentSetListEntry({equipmentSet:d,onDelete:c}){const et=useNavigate();return jsxRuntimeExports.jsxs(Panel,{className:styles$9.equipmentSet,children:[jsxRuntimeExports.jsx("div",{className:classNames([styles$9.nameContainer,"clickable"]),onClick:()=>{et(`/equipment/edit/${d.id}`)},children:d.name}),jsxRuntimeExports.jsx("div",{className:classNames([styles$9.deleteButtonContainer,"clickable"]),onClick:()=>{c(d.id)},children:jsxRuntimeExports.jsx(DeleteIcon,{})})]})}function AddCharacterButton({onCreate:d,disabled:c=!1}){const[et,_e]=reactExports.useState(!1);function tt(rt){_e(!1),d(rt)}function nt(){_e(!1)}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button$1,{disabled:c,onClick:rt=>_e(!0),size:"lg",children:"+ Equipment Set"}),et&&jsxRuntimeExports.jsx(NewEquipmentSetDialog,{show:et,onCreate:tt,onCancel:nt})]})}async function equipmentSetListLoader(){return{equipmentSetStore:await withGlobalEquipmentSetStore()}}function EquipmentSetListRoute(){const{equipmentSetStore:d}=useLoaderData();return jsxRuntimeExports.jsx(RequiresAuth,{children:jsxRuntimeExports.jsx(EquipmentSetStoreContext.Provider,{value:d,children:jsxRuntimeExports.jsx(EquipmentSetList,{})})})}const description="_description_1hbnu_1",optionSets="_optionSets_1hbnu_5",options="_options_1hbnu_11",optionGroup="_optionGroup_1hbnu_17",option$1="_option_1hbnu_5",selectedOption="_selectedOption_1hbnu_31",styles$8={description,optionSets,options,optionGroup,option:option$1,selectedOption},entityId={toKey(d){return d.toString()},toKeyOrUndefined(d){return(d==null?void 0:d.toString())??void 0},toOptionalNumber(d){if(d!==void 0)return typeof d=="string"?parseInt(d):d}};class EntitySelectOption{constructor(c,et,_e,tt){this.id=c,this.label=et,this.isValidFn=_e,this.bodyFn=tt}get valid(){return typeof this.isValidFn=="boolean"?this.isValidFn:this.isValidFn()}}class EntitySelectCategory{constructor(c,et,_e=et.toString()){this.label=c,this.tag=et,this.key=_e}}function EntitySelectList({options:d,selected:c,onSelect:et}){const[_e,tt]=reactExports.useState(entityId.toKeyOrUndefined(c));function nt(rt){tt(rt);const it=d.find(ot=>entityId.toKey(ot.id)===rt);et==null||et(it==null?void 0:it.id)}return jsxRuntimeExports.jsx(Accordion$1,{activeKey:_e,className:styles$H.control,onSelect:nt,flush:!1,children:d.map(rt=>jsxRuntimeExports.jsx(EntitySelectItem,{option:rt},rt.id))})}function EntitySelectItem({option:d}){const[c]=useAsyncMemo(async()=>d.bodyFn?d.bodyFn():void 0,[d],jsxRuntimeExports.jsx(LoadingBlock,{}));return jsxRuntimeExports.jsxs(Accordion$1.Item,{eventKey:entityId.toKey(d.id),children:[jsxRuntimeExports.jsx(Accordion$1.Header,{children:d.label}),jsxRuntimeExports.jsx(Accordion$1.Body,{children:c})]})}const SearchCategory=new EntitySelectCategory(jsxRuntimeExports.jsx(FaMagnifyingGlass,{}),0,"_search");function EntitySelectDialog({title:d,show:c,value:et,onSelect:_e,onCancel:tt,optionsFn:nt,categories:rt=[],search:it=!1}){const[ot,st]=reactExports.useState(et),[at,lt]=reactExports.useState(""),[ct,ut]=reactExports.useState(()=>(rt==null?void 0:rt.length)>0?rt[0]:void 0),dt=reactExports.useMemo(()=>array(nt(at,ct)),[nt,at,ct]),ht=reactExports.useMemo(()=>at.trim().length>0,[at]),yt=reactExports.useMemo(()=>ht||dt.length<=20,[ht,dt]),[gt,ft]=reactExports.useTransition();function mt($t){if(st(et),!($t===void 0||!ct))for(let kt of rt){const Nt=array(nt(void 0,kt));for(let At of Nt)if(At.id===$t){ut(kt);return}}}reactExports.useEffect(()=>{ht&&ut(SearchCategory)},[ht]),reactExports.useEffect(()=>{ct!==SearchCategory&&lt("")},[c,ct]),reactExports.useEffect(()=>{c&&mt(et)},[c]);const pt=reactExports.useMemo(()=>{let $t=dt;return yt||($t=$t.filter(kt=>kt.valid)),$t.sort((kt,Nt)=>kt.valid&&!Nt.valid?-1:!kt.valid&&Nt.valid?1:0)},[dt,at,ht,yt]),xt=ot!==void 0&&ot!==0,vt=it===!0||it==="auto"&&(pt.length>10||(rt==null?void 0:rt.length)>0)||ht,Et=$t=>{st($t)},_t=$t=>{const kt=[SearchCategory,...rt].find(Nt=>Nt.key===($t!==""?$t:"all"));ft(()=>ut(kt))};function wt($t){ft(()=>lt($t))}function bt(){if(!ot){tt==null||tt();return}_e==null||_e(ot)}return jsxRuntimeExports.jsxs(Modal$1,{show:c,onHide:tt,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,size:"lg",scrollable:!0,fullscreen:"md-down",className:styles$G.dialog,children:[jsxRuntimeExports.jsx(Modal$1.Header,{className:styles$G.title,closeButton:!0,closeVariant:"white",children:jsxRuntimeExports.jsxs(Modal$1.Title,{children:["Select ",d]})}),((rt==null?void 0:rt.length)>0||vt)&&jsxRuntimeExports.jsxs(Modal$1.Header,{className:styles$G.header,children:[rt.length>0&&jsxRuntimeExports.jsxs(ToggleButtonGroup$1,{className:styles$G.categories,value:(ct==null?void 0:ct.key)??"",onChange:_t,name:"category",type:"radio",children:[it&&jsxRuntimeExports.jsx(ToggleButton$1,{disabled:!ht,id:SearchCategory.key,value:SearchCategory.key,children:SearchCategory.label}),rt.map($t=>{const kt=$t.key!==""?$t.key:"_blank";return jsxRuntimeExports.jsx(ToggleButton$1,{id:kt,value:$t.key,children:$t.label},kt)})]}),vt&&jsxRuntimeExports.jsx(SearchBar,{query:at,onSearch:wt})]}),jsxRuntimeExports.jsx(Modal$1.Body,{className:styles$G.body,children:gt?jsxRuntimeExports.jsx(LoadingBlock,{}):pt.length>0&&jsxRuntimeExports.jsx(EntitySelectList,{selected:ot,options:pt,onSelect:Et})||jsxRuntimeExports.jsx(Alert$1,{variant:"warning",children:"None found"})}),jsxRuntimeExports.jsx(Modal$1.Footer,{className:styles$G.footer,children:jsxRuntimeExports.jsx(Button$1,{size:"lg",className:"w-100",disabled:!xt,onClick:bt,children:"Select"})})]})}const text$1="_text_pv7mz_1",styles$7={text:text$1};function DescriptionBlock({description:d}){if(d)return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:styles$7.text,children:d.text}),Object.entries(d.sections).map(([c,et])=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("b",{children:c}),jsxRuntimeExports.jsx("span",{className:styles$7.text,children:et})]}))]})}const optionList="_optionList_1zqkg_1",option="_option_1zqkg_1",selected="_selected_1zqkg_13",label$1="_label_1zqkg_18",optionLabel="_optionLabel_1zqkg_26",optionName="_optionName_1zqkg_32",optionDelete="_optionDelete_1zqkg_36",cost="_cost_1zqkg_39",styles$6={optionList,option,selected,label:label$1,optionLabel,optionName,optionDelete,cost};function ItemOptionGroupSelector({optionSet:d,optionGroup:c,selected:et,onChangeOptions:_e}){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{children:c.name}),c.maxSelectable===1?jsxRuntimeExports.jsx(SingleOptionSelector,{optionSet:d,optionGroup:c,selected:et,onChangeOptions:_e}):jsxRuntimeExports.jsx(MultiOptionSelector,{optionSet:d,optionGroup:c,selected:et,onChangeOptions:_e})]})}function SingleOptionSelector({optionSet:d,optionGroup:c,selected:et,onChangeOptions:_e}){const tt=useItemDatabase(),nt=reactExports.useMemo(()=>tt.options().filter(at=>c.hasOption(at)).sort((at,lt)=>at.pointCost-lt.pointCost),[c,tt]),rt=reactExports.useMemo(()=>{for(let at of nt)if(et.includes(at.id))return at.id},[et,nt]),it=reactExports.useMemo(()=>{var at;return d.calculatePointsUsed(tt.options(et))-((rt&&((at=tt.option(rt))==null?void 0:at.pointCost))??0)},[tt,d,et]);function ot(at){const lt=et.filter(ct=>nt.every(ut=>ut.id!==ct));if(at){const ct=parseInt(at);lt.push(ct)}_e==null||_e(onlyDefined(lt.map(ct=>tt.option(ct))))}function st(at){return d.hasMaxPoints?it+at.pointCost>d.maxPoints:!1}return jsxRuntimeExports.jsxs("select",{value:rt,onChange:at=>ot(at.target.value),children:[jsxRuntimeExports.jsx("option",{value:void 0}),nt.map(at=>jsxRuntimeExports.jsx("option",{value:at.id,disabled:st(at),children:at.name},at.id))]})}function MultiOptionSelector({optionSet:d,optionGroup:c,selected:et,onChangeOptions:_e}){const tt=useItemDatabase(),nt=reactExports.useMemo(()=>tt.options().filter(ut=>c.hasOption(ut)).sort((ut,dt)=>{let ht=ut.pointCost-dt.pointCost;return ht===0&&(ht=ut.currencyCost-dt.currencyCost),ht}),[c,tt]),[rt,it]=reactExports.useState(!1),ot=reactExports.useMemo(()=>tt.options(et).filter(ut=>c.hasOption(ut)),[tt,et]),st=reactExports.useMemo(()=>d.calculatePointsUsed(tt.options(et)),[tt,d,et]);function at(ut){return et.includes(ut.id)||d.hasMaxPoints&&ut.pointCost>=d.maxPoints-st?!1:!(c.hasMaxSelectable&&ot.length>=c.maxSelectable)}function lt(ut){const dt=entityId.toOptionalNumber(ut);if(dt){const ht=[...et,dt];_e==null||_e(onlyDefined(ht.map(yt=>tt.option(yt))))}it(!1)}function ct(ut){_e==null||_e(tt.options(et.filter(dt=>dt!==ut)))}return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(ButtonBlockGroup,{children:ot.map(ut=>jsxRuntimeExports.jsxs(ButtonBlock,{className:styles$6.optionLabel,children:[jsxRuntimeExports.jsx("div",{className:styles$6.optionName,children:ut.name}),jsxRuntimeExports.jsx("div",{className:styles$6.optionDelete,onClick:()=>ct(ut.id),children:jsxRuntimeExports.jsx(CloseButton$1,{})})]},ut.id))}),jsxRuntimeExports.jsxs(ButtonBlock,{variant:"link",onClick:()=>it(!0),children:["+ Add ",c.name]}),jsxRuntimeExports.jsx(EntitySelectDialog,{title:c.name,show:rt,value:void 0,search:!0,onSelect:lt,onCancel:()=>it(!1),optionsFn:(ut,dt)=>nt.filter(ht=>ht.name.toLowerCase().includes((ut==null?void 0:ut.toLowerCase())??"")).map(ht=>new EntitySelectOption(ht.id.toString(),ht.name,at(ht),async()=>{var yt;return jsxRuntimeExports.jsx(DescriptionBlock,{description:(yt=await tt.optionDetails(ht.id))==null?void 0:yt.description})}))})]})}function ItemOptionSetSelector({optionSet:d,selectedOptions:c,onChangeOptions:et}){return jsxRuntimeExports.jsx("div",{children:d.optionGroups.map(_e=>jsxRuntimeExports.jsx(ItemOptionGroupSelector,{optionSet:d,optionGroup:_e,selected:c.map(tt=>tt.id),onChangeOptions:et},_e.name))})}function EquipmentDescription({item:d,selectedOptions:c,onChangeOptions:et}){const _e=useItemDatabase(),tt=reactExports.useMemo(()=>onlyDefined(d.optionSetIds.map(nt=>_e.optionSet(nt))),[_e,d]);return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:styles$8.description,children:d.description.text}),jsxRuntimeExports.jsx("div",{className:styles$8.optionSets,children:tt.map(nt=>jsxRuntimeExports.jsx(ItemOptionSetSelector,{optionSet:nt,selectedOptions:c,onChangeOptions:et},nt.id))})]})}function EquipmentSearchDialog({show:d,value:c,onSelect:et,onCancel:_e}){const tt=useItemDatabase(),[nt,rt]=reactExports.useState((c==null?void 0:c.options)??[]);function it(at){rt(at)}reactExports.useEffect(()=>{rt((c==null?void 0:c.options)??[])},[c]);function ot(at){const lt=parseInt(at),ct=tt.summary(lt);et==null||et(ct,nt)}const st=reactExports.useMemo(()=>{let at=[new ChoiceSelectorCategory("Weapons","weapon"),new ChoiceSelectorCategory("Armor","armor"),new ChoiceSelectorCategory("Potions","potion"),new ChoiceSelectorCategory("Wands","wand")];return c&&(at=[new ChoiceSelectorCategory("Edit","*"),...at]),at},[c]);return jsxRuntimeExports.jsx(ChoiceSelectorDialog,{choiceName:"Add Item",show:d,search:!0,value:c==null?void 0:c.item.uid,onSelect:ot,onCancel:_e,categories:st,variant:"blue",optionsFn:(at,lt)=>{let ct=tt.summaries().filter(ut=>!at||ut.name.toLowerCase().includes(at.toLowerCase())).filter(ut=>!(lt!=null&&lt.tag)||ut.tags.includes(lt.tag)).sort((ut,dt)=>ut.name.localeCompare(dt.name));return(lt==null?void 0:lt.tag)==="*"&&c&&(ct=[c.item]),ct.map(ut=>new ChoiceSelectorOption(ut.uid,ut.name,!0,async()=>{const dt=await tt.load(ut.itemId);return dt?jsxRuntimeExports.jsx(EquipmentDescription,{item:dt,selectedOptions:nt,onChangeOptions:it}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}))}})}const list="_list_152ky_1",styles$5={list};function CardBlockList({children:d}){return jsxRuntimeExports.jsx("div",{className:styles$5.list,children:d})}const label="_label_1xwav_1",labelSegment="_labelSegment_1xwav_8",equipmentName="_equipmentName_1xwav_15",deleteButton="_deleteButton_1xwav_21",editButton="_editButton_1xwav_25",control="_control_1xwav_33",styles$4={label,labelSegment,equipmentName,deleteButton,editButton,control},card="_card_1thy7_1",dragging="_dragging_1thy7_30",active="_active_1thy7_35",disabled="_disabled_1thy7_40",styles$3={card,dragging,active,disabled};function useCombinedRefs(){for(var d=arguments.length,c=new Array(d),et=0;et<d;et++)c[et]=arguments[et];return reactExports.useMemo(()=>_e=>{c.forEach(tt=>tt(_e))},c)}const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function isWindow(d){const c=Object.prototype.toString.call(d);return c==="[object Window]"||c==="[object global]"}function isNode(d){return"nodeType"in d}function getWindow(d){var c,et;return d?isWindow(d)?d:isNode(d)&&(c=(et=d.ownerDocument)==null?void 0:et.defaultView)!=null?c:window:window}function isDocument(d){const{Document:c}=getWindow(d);return d instanceof c}function isHTMLElement(d){return isWindow(d)?!1:d instanceof getWindow(d).HTMLElement}function isSVGElement(d){return d instanceof getWindow(d).SVGElement}function getOwnerDocument(d){return d?isWindow(d)?d.document:isNode(d)?isDocument(d)?d:isHTMLElement(d)||isSVGElement(d)?d.ownerDocument:document:document:document}const useIsomorphicLayoutEffect=canUseDOM?reactExports.useLayoutEffect:reactExports.useEffect;function useEvent(d){const c=reactExports.useRef(d);return useIsomorphicLayoutEffect(()=>{c.current=d}),reactExports.useCallback(function(){for(var et=arguments.length,_e=new Array(et),tt=0;tt<et;tt++)_e[tt]=arguments[tt];return c.current==null?void 0:c.current(..._e)},[])}function useInterval(){const d=reactExports.useRef(null),c=reactExports.useCallback((_e,tt)=>{d.current=setInterval(_e,tt)},[]),et=reactExports.useCallback(()=>{d.current!==null&&(clearInterval(d.current),d.current=null)},[]);return[c,et]}function useLatestValue(d,c){c===void 0&&(c=[d]);const et=reactExports.useRef(d);return useIsomorphicLayoutEffect(()=>{et.current!==d&&(et.current=d)},c),et}function useLazyMemo(d,c){const et=reactExports.useRef();return reactExports.useMemo(()=>{const _e=d(et.current);return et.current=_e,_e},[...c])}function useNodeRef(d){const c=useEvent(d),et=reactExports.useRef(null),_e=reactExports.useCallback(tt=>{tt!==et.current&&(c==null||c(tt,et.current)),et.current=tt},[]);return[et,_e]}function usePrevious(d){const c=reactExports.useRef();return reactExports.useEffect(()=>{c.current=d},[d]),c.current}let ids={};function useUniqueId(d,c){return reactExports.useMemo(()=>{if(c)return c;const et=ids[d]==null?0:ids[d]+1;return ids[d]=et,d+"-"+et},[d,c])}function createAdjustmentFn(d){return function(c){for(var et=arguments.length,_e=new Array(et>1?et-1:0),tt=1;tt<et;tt++)_e[tt-1]=arguments[tt];return _e.reduce((nt,rt)=>{const it=Object.entries(rt);for(const[ot,st]of it){const at=nt[ot];at!=null&&(nt[ot]=at+d*st)}return nt},{...c})}}const add=createAdjustmentFn(1),subtract=createAdjustmentFn(-1);function hasViewportRelativeCoordinates(d){return"clientX"in d&&"clientY"in d}function isKeyboardEvent(d){if(!d)return!1;const{KeyboardEvent:c}=getWindow(d.target);return c&&d instanceof c}function isTouchEvent(d){if(!d)return!1;const{TouchEvent:c}=getWindow(d.target);return c&&d instanceof c}function getEventCoordinates(d){if(isTouchEvent(d)){if(d.touches&&d.touches.length){const{clientX:c,clientY:et}=d.touches[0];return{x:c,y:et}}else if(d.changedTouches&&d.changedTouches.length){const{clientX:c,clientY:et}=d.changedTouches[0];return{x:c,y:et}}}return hasViewportRelativeCoordinates(d)?{x:d.clientX,y:d.clientY}:null}const CSS=Object.freeze({Translate:{toString(d){if(!d)return;const{x:c,y:et}=d;return"translate3d("+(c?Math.round(c):0)+"px, "+(et?Math.round(et):0)+"px, 0)"}},Scale:{toString(d){if(!d)return;const{scaleX:c,scaleY:et}=d;return"scaleX("+c+") scaleY("+et+")"}},Transform:{toString(d){if(d)return[CSS.Translate.toString(d),CSS.Scale.toString(d)].join(" ")}},Transition:{toString(d){let{property:c,duration:et,easing:_e}=d;return c+" "+et+"ms "+_e}}}),SELECTOR="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function findFirstFocusableNode(d){return d.matches(SELECTOR)?d:d.querySelector(SELECTOR)}const hiddenStyles={display:"none"};function HiddenText(d){let{id:c,value:et}=d;return React.createElement("div",{id:c,style:hiddenStyles},et)}function LiveRegion(d){let{id:c,announcement:et,ariaLiveType:_e="assertive"}=d;const tt={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return React.createElement("div",{id:c,style:tt,role:"status","aria-live":_e,"aria-atomic":!0},et)}function useAnnouncement(){const[d,c]=reactExports.useState("");return{announce:reactExports.useCallback(_e=>{_e!=null&&c(_e)},[]),announcement:d}}const DndMonitorContext=reactExports.createContext(null);function useDndMonitor(d){const c=reactExports.useContext(DndMonitorContext);reactExports.useEffect(()=>{if(!c)throw new Error("useDndMonitor must be used within a children of <DndContext>");return c(d)},[d,c])}function useDndMonitorProvider(){const[d]=reactExports.useState(()=>new Set),c=reactExports.useCallback(_e=>(d.add(_e),()=>d.delete(_e)),[d]);return[reactExports.useCallback(_e=>{let{type:tt,event:nt}=_e;d.forEach(rt=>{var it;return(it=rt[tt])==null?void 0:it.call(rt,nt)})},[d]),c]}const defaultScreenReaderInstructions={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},defaultAnnouncements={onDragStart(d){let{active:c}=d;return"Picked up draggable item "+c.id+"."},onDragOver(d){let{active:c,over:et}=d;return et?"Draggable item "+c.id+" was moved over droppable area "+et.id+".":"Draggable item "+c.id+" is no longer over a droppable area."},onDragEnd(d){let{active:c,over:et}=d;return et?"Draggable item "+c.id+" was dropped over droppable area "+et.id:"Draggable item "+c.id+" was dropped."},onDragCancel(d){let{active:c}=d;return"Dragging was cancelled. Draggable item "+c.id+" was dropped."}};function Accessibility(d){let{announcements:c=defaultAnnouncements,container:et,hiddenTextDescribedById:_e,screenReaderInstructions:tt=defaultScreenReaderInstructions}=d;const{announce:nt,announcement:rt}=useAnnouncement(),it=useUniqueId("DndLiveRegion"),[ot,st]=reactExports.useState(!1);if(reactExports.useEffect(()=>{st(!0)},[]),useDndMonitor(reactExports.useMemo(()=>({onDragStart(lt){let{active:ct}=lt;nt(c.onDragStart({active:ct}))},onDragMove(lt){let{active:ct,over:ut}=lt;c.onDragMove&&nt(c.onDragMove({active:ct,over:ut}))},onDragOver(lt){let{active:ct,over:ut}=lt;nt(c.onDragOver({active:ct,over:ut}))},onDragEnd(lt){let{active:ct,over:ut}=lt;nt(c.onDragEnd({active:ct,over:ut}))},onDragCancel(lt){let{active:ct,over:ut}=lt;nt(c.onDragCancel({active:ct,over:ut}))}}),[nt,c])),!ot)return null;const at=React.createElement(React.Fragment,null,React.createElement(HiddenText,{id:_e,value:tt.draggable}),React.createElement(LiveRegion,{id:it,announcement:rt}));return et?reactDomExports.createPortal(at,et):at}var Action;(function(d){d.DragStart="dragStart",d.DragMove="dragMove",d.DragEnd="dragEnd",d.DragCancel="dragCancel",d.DragOver="dragOver",d.RegisterDroppable="registerDroppable",d.SetDroppableDisabled="setDroppableDisabled",d.UnregisterDroppable="unregisterDroppable"})(Action||(Action={}));function noop(){}function useSensor(d,c){return reactExports.useMemo(()=>({sensor:d,options:c??{}}),[d,c])}function useSensors(){for(var d=arguments.length,c=new Array(d),et=0;et<d;et++)c[et]=arguments[et];return reactExports.useMemo(()=>[...c].filter(_e=>_e!=null),[...c])}const defaultCoordinates=Object.freeze({x:0,y:0});function distanceBetween(d,c){return Math.sqrt(Math.pow(d.x-c.x,2)+Math.pow(d.y-c.y,2))}function sortCollisionsAsc(d,c){let{data:{value:et}}=d,{data:{value:_e}}=c;return et-_e}function sortCollisionsDesc(d,c){let{data:{value:et}}=d,{data:{value:_e}}=c;return _e-et}function getFirstCollision(d,c){if(!d||d.length===0)return null;const[et]=d;return c?et[c]:et}function centerOfRectangle(d,c,et){return c===void 0&&(c=d.left),et===void 0&&(et=d.top),{x:c+d.width*.5,y:et+d.height*.5}}const closestCenter=d=>{let{collisionRect:c,droppableRects:et,droppableContainers:_e}=d;const tt=centerOfRectangle(c,c.left,c.top),nt=[];for(const rt of _e){const{id:it}=rt,ot=et.get(it);if(ot){const st=distanceBetween(centerOfRectangle(ot),tt);nt.push({id:it,data:{droppableContainer:rt,value:st}})}}return nt.sort(sortCollisionsAsc)};function getIntersectionRatio(d,c){const et=Math.max(c.top,d.top),_e=Math.max(c.left,d.left),tt=Math.min(c.left+c.width,d.left+d.width),nt=Math.min(c.top+c.height,d.top+d.height),rt=tt-_e,it=nt-et;if(_e<tt&&et<nt){const ot=c.width*c.height,st=d.width*d.height,at=rt*it,lt=at/(ot+st-at);return Number(lt.toFixed(4))}return 0}const rectIntersection=d=>{let{collisionRect:c,droppableRects:et,droppableContainers:_e}=d;const tt=[];for(const nt of _e){const{id:rt}=nt,it=et.get(rt);if(it){const ot=getIntersectionRatio(it,c);ot>0&&tt.push({id:rt,data:{droppableContainer:nt,value:ot}})}}return tt.sort(sortCollisionsDesc)};function adjustScale(d,c,et){return{...d,scaleX:c&&et?c.width/et.width:1,scaleY:c&&et?c.height/et.height:1}}function getRectDelta(d,c){return d&&c?{x:d.left-c.left,y:d.top-c.top}:defaultCoordinates}function createRectAdjustmentFn(d){return function(et){for(var _e=arguments.length,tt=new Array(_e>1?_e-1:0),nt=1;nt<_e;nt++)tt[nt-1]=arguments[nt];return tt.reduce((rt,it)=>({...rt,top:rt.top+d*it.y,bottom:rt.bottom+d*it.y,left:rt.left+d*it.x,right:rt.right+d*it.x}),{...et})}}const getAdjustedRect=createRectAdjustmentFn(1);function parseTransform(d){if(d.startsWith("matrix3d(")){const c=d.slice(9,-1).split(/, /);return{x:+c[12],y:+c[13],scaleX:+c[0],scaleY:+c[5]}}else if(d.startsWith("matrix(")){const c=d.slice(7,-1).split(/, /);return{x:+c[4],y:+c[5],scaleX:+c[0],scaleY:+c[3]}}return null}function inverseTransform(d,c,et){const _e=parseTransform(c);if(!_e)return d;const{scaleX:tt,scaleY:nt,x:rt,y:it}=_e,ot=d.left-rt-(1-tt)*parseFloat(et),st=d.top-it-(1-nt)*parseFloat(et.slice(et.indexOf(" ")+1)),at=tt?d.width/tt:d.width,lt=nt?d.height/nt:d.height;return{width:at,height:lt,top:st,right:ot+at,bottom:st+lt,left:ot}}const defaultOptions={ignoreTransform:!1};function getClientRect(d,c){c===void 0&&(c=defaultOptions);let et=d.getBoundingClientRect();if(c.ignoreTransform){const{transform:st,transformOrigin:at}=getWindow(d).getComputedStyle(d);st&&(et=inverseTransform(et,st,at))}const{top:_e,left:tt,width:nt,height:rt,bottom:it,right:ot}=et;return{top:_e,left:tt,width:nt,height:rt,bottom:it,right:ot}}function getTransformAgnosticClientRect(d){return getClientRect(d,{ignoreTransform:!0})}function getWindowClientRect(d){const c=d.innerWidth,et=d.innerHeight;return{top:0,left:0,right:c,bottom:et,width:c,height:et}}function isFixed(d,c){return c===void 0&&(c=getWindow(d).getComputedStyle(d)),c.position==="fixed"}function isScrollable(d,c){c===void 0&&(c=getWindow(d).getComputedStyle(d));const et=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(tt=>{const nt=c[tt];return typeof nt=="string"?et.test(nt):!1})}function getScrollableAncestors(d,c){const et=[];function _e(tt){if(c!=null&&et.length>=c||!tt)return et;if(isDocument(tt)&&tt.scrollingElement!=null&&!et.includes(tt.scrollingElement))return et.push(tt.scrollingElement),et;if(!isHTMLElement(tt)||isSVGElement(tt)||et.includes(tt))return et;const nt=getWindow(d).getComputedStyle(tt);return tt!==d&&isScrollable(tt,nt)&&et.push(tt),isFixed(tt,nt)?et:_e(tt.parentNode)}return d?_e(d):et}function getFirstScrollableAncestor(d){const[c]=getScrollableAncestors(d,1);return c??null}function getScrollableElement(d){return!canUseDOM||!d?null:isWindow(d)?d:isNode(d)?isDocument(d)||d===getOwnerDocument(d).scrollingElement?window:isHTMLElement(d)?d:null:null}function getScrollXCoordinate(d){return isWindow(d)?d.scrollX:d.scrollLeft}function getScrollYCoordinate(d){return isWindow(d)?d.scrollY:d.scrollTop}function getScrollCoordinates(d){return{x:getScrollXCoordinate(d),y:getScrollYCoordinate(d)}}var Direction;(function(d){d[d.Forward=1]="Forward",d[d.Backward=-1]="Backward"})(Direction||(Direction={}));function isDocumentScrollingElement(d){return!canUseDOM||!d?!1:d===document.scrollingElement}function getScrollPosition(d){const c={x:0,y:0},et=isDocumentScrollingElement(d)?{height:window.innerHeight,width:window.innerWidth}:{height:d.clientHeight,width:d.clientWidth},_e={x:d.scrollWidth-et.width,y:d.scrollHeight-et.height},tt=d.scrollTop<=c.y,nt=d.scrollLeft<=c.x,rt=d.scrollTop>=_e.y,it=d.scrollLeft>=_e.x;return{isTop:tt,isLeft:nt,isBottom:rt,isRight:it,maxScroll:_e,minScroll:c}}const defaultThreshold={x:.2,y:.2};function getScrollDirectionAndSpeed(d,c,et,_e,tt){let{top:nt,left:rt,right:it,bottom:ot}=et;_e===void 0&&(_e=10),tt===void 0&&(tt=defaultThreshold);const{isTop:st,isBottom:at,isLeft:lt,isRight:ct}=getScrollPosition(d),ut={x:0,y:0},dt={x:0,y:0},ht={height:c.height*tt.y,width:c.width*tt.x};return!st&&nt<=c.top+ht.height?(ut.y=Direction.Backward,dt.y=_e*Math.abs((c.top+ht.height-nt)/ht.height)):!at&&ot>=c.bottom-ht.height&&(ut.y=Direction.Forward,dt.y=_e*Math.abs((c.bottom-ht.height-ot)/ht.height)),!ct&&it>=c.right-ht.width?(ut.x=Direction.Forward,dt.x=_e*Math.abs((c.right-ht.width-it)/ht.width)):!lt&&rt<=c.left+ht.width&&(ut.x=Direction.Backward,dt.x=_e*Math.abs((c.left+ht.width-rt)/ht.width)),{direction:ut,speed:dt}}function getScrollElementRect(d){if(d===document.scrollingElement){const{innerWidth:nt,innerHeight:rt}=window;return{top:0,left:0,right:nt,bottom:rt,width:nt,height:rt}}const{top:c,left:et,right:_e,bottom:tt}=d.getBoundingClientRect();return{top:c,left:et,right:_e,bottom:tt,width:d.clientWidth,height:d.clientHeight}}function getScrollOffsets(d){return d.reduce((c,et)=>add(c,getScrollCoordinates(et)),defaultCoordinates)}function getScrollXOffset(d){return d.reduce((c,et)=>c+getScrollXCoordinate(et),0)}function getScrollYOffset(d){return d.reduce((c,et)=>c+getScrollYCoordinate(et),0)}function scrollIntoViewIfNeeded(d,c){if(c===void 0&&(c=getClientRect),!d)return;const{top:et,left:_e,bottom:tt,right:nt}=c(d);getFirstScrollableAncestor(d)&&(tt<=0||nt<=0||et>=window.innerHeight||_e>=window.innerWidth)&&d.scrollIntoView({block:"center",inline:"center"})}const properties=[["x",["left","right"],getScrollXOffset],["y",["top","bottom"],getScrollYOffset]];class Rect{constructor(c,et){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const _e=getScrollableAncestors(et),tt=getScrollOffsets(_e);this.rect={...c},this.width=c.width,this.height=c.height;for(const[nt,rt,it]of properties)for(const ot of rt)Object.defineProperty(this,ot,{get:()=>{const st=it(_e),at=tt[nt]-st;return this.rect[ot]+at},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Listeners{constructor(c){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(et=>{var _e;return(_e=this.target)==null?void 0:_e.removeEventListener(...et)})},this.target=c}add(c,et,_e){var tt;(tt=this.target)==null||tt.addEventListener(c,et,_e),this.listeners.push([c,et,_e])}}function getEventListenerTarget(d){const{EventTarget:c}=getWindow(d);return d instanceof c?d:getOwnerDocument(d)}function hasExceededDistance(d,c){const et=Math.abs(d.x),_e=Math.abs(d.y);return typeof c=="number"?Math.sqrt(et**2+_e**2)>c:"x"in c&&"y"in c?et>c.x&&_e>c.y:"x"in c?et>c.x:"y"in c?_e>c.y:!1}var EventName;(function(d){d.Click="click",d.DragStart="dragstart",d.Keydown="keydown",d.ContextMenu="contextmenu",d.Resize="resize",d.SelectionChange="selectionchange",d.VisibilityChange="visibilitychange"})(EventName||(EventName={}));function preventDefault(d){d.preventDefault()}function stopPropagation(d){d.stopPropagation()}var KeyboardCode;(function(d){d.Space="Space",d.Down="ArrowDown",d.Right="ArrowRight",d.Left="ArrowLeft",d.Up="ArrowUp",d.Esc="Escape",d.Enter="Enter"})(KeyboardCode||(KeyboardCode={}));const defaultKeyboardCodes={start:[KeyboardCode.Space,KeyboardCode.Enter],cancel:[KeyboardCode.Esc],end:[KeyboardCode.Space,KeyboardCode.Enter]},defaultKeyboardCoordinateGetter=(d,c)=>{let{currentCoordinates:et}=c;switch(d.code){case KeyboardCode.Right:return{...et,x:et.x+25};case KeyboardCode.Left:return{...et,x:et.x-25};case KeyboardCode.Down:return{...et,y:et.y+25};case KeyboardCode.Up:return{...et,y:et.y-25}}};class KeyboardSensor{constructor(c){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=c;const{event:{target:et}}=c;this.props=c,this.listeners=new Listeners(getOwnerDocument(et)),this.windowListeners=new Listeners(getWindow(et)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(EventName.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:c,onStart:et}=this.props,_e=c.node.current;_e&&scrollIntoViewIfNeeded(_e),et(defaultCoordinates)}handleKeyDown(c){if(isKeyboardEvent(c)){const{active:et,context:_e,options:tt}=this.props,{keyboardCodes:nt=defaultKeyboardCodes,coordinateGetter:rt=defaultKeyboardCoordinateGetter,scrollBehavior:it="smooth"}=tt,{code:ot}=c;if(nt.end.includes(ot)){this.handleEnd(c);return}if(nt.cancel.includes(ot)){this.handleCancel(c);return}const{collisionRect:st}=_e.current,at=st?{x:st.left,y:st.top}:defaultCoordinates;this.referenceCoordinates||(this.referenceCoordinates=at);const lt=rt(c,{active:et,context:_e.current,currentCoordinates:at});if(lt){const ct=subtract(lt,at),ut={x:0,y:0},{scrollableAncestors:dt}=_e.current;for(const ht of dt){const yt=c.code,{isTop:gt,isRight:ft,isLeft:mt,isBottom:pt,maxScroll:xt,minScroll:vt}=getScrollPosition(ht),Et=getScrollElementRect(ht),_t={x:Math.min(yt===KeyboardCode.Right?Et.right-Et.width/2:Et.right,Math.max(yt===KeyboardCode.Right?Et.left:Et.left+Et.width/2,lt.x)),y:Math.min(yt===KeyboardCode.Down?Et.bottom-Et.height/2:Et.bottom,Math.max(yt===KeyboardCode.Down?Et.top:Et.top+Et.height/2,lt.y))},wt=yt===KeyboardCode.Right&&!ft||yt===KeyboardCode.Left&&!mt,bt=yt===KeyboardCode.Down&&!pt||yt===KeyboardCode.Up&&!gt;if(wt&&_t.x!==lt.x){const $t=ht.scrollLeft+ct.x,kt=yt===KeyboardCode.Right&&$t<=xt.x||yt===KeyboardCode.Left&&$t>=vt.x;if(kt&&!ct.y){ht.scrollTo({left:$t,behavior:it});return}kt?ut.x=ht.scrollLeft-$t:ut.x=yt===KeyboardCode.Right?ht.scrollLeft-xt.x:ht.scrollLeft-vt.x,ut.x&&ht.scrollBy({left:-ut.x,behavior:it});break}else if(bt&&_t.y!==lt.y){const $t=ht.scrollTop+ct.y,kt=yt===KeyboardCode.Down&&$t<=xt.y||yt===KeyboardCode.Up&&$t>=vt.y;if(kt&&!ct.x){ht.scrollTo({top:$t,behavior:it});return}kt?ut.y=ht.scrollTop-$t:ut.y=yt===KeyboardCode.Down?ht.scrollTop-xt.y:ht.scrollTop-vt.y,ut.y&&ht.scrollBy({top:-ut.y,behavior:it});break}}this.handleMove(c,add(subtract(lt,this.referenceCoordinates),ut))}}}handleMove(c,et){const{onMove:_e}=this.props;c.preventDefault(),_e(et)}handleEnd(c){const{onEnd:et}=this.props;c.preventDefault(),this.detach(),et()}handleCancel(c){const{onCancel:et}=this.props;c.preventDefault(),this.detach(),et()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}KeyboardSensor.activators=[{eventName:"onKeyDown",handler:(d,c,et)=>{let{keyboardCodes:_e=defaultKeyboardCodes,onActivation:tt}=c,{active:nt}=et;const{code:rt}=d.nativeEvent;if(_e.start.includes(rt)){const it=nt.activatorNode.current;return it&&d.target!==it?!1:(d.preventDefault(),tt==null||tt({event:d.nativeEvent}),!0)}return!1}}];function isDistanceConstraint(d){return!!(d&&"distance"in d)}function isDelayConstraint(d){return!!(d&&"delay"in d)}class AbstractPointerSensor{constructor(c,et,_e){var tt;_e===void 0&&(_e=getEventListenerTarget(c.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=c,this.events=et;const{event:nt}=c,{target:rt}=nt;this.props=c,this.events=et,this.document=getOwnerDocument(rt),this.documentListeners=new Listeners(this.document),this.listeners=new Listeners(_e),this.windowListeners=new Listeners(getWindow(rt)),this.initialCoordinates=(tt=getEventCoordinates(nt))!=null?tt:defaultCoordinates,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:c,props:{options:{activationConstraint:et,bypassActivationConstraint:_e}}}=this;if(this.listeners.add(c.move.name,this.handleMove,{passive:!1}),this.listeners.add(c.end.name,this.handleEnd),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.DragStart,preventDefault),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),this.windowListeners.add(EventName.ContextMenu,preventDefault),this.documentListeners.add(EventName.Keydown,this.handleKeydown),et){if(_e!=null&&_e({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(isDelayConstraint(et)){this.timeoutId=setTimeout(this.handleStart,et.delay);return}if(isDistanceConstraint(et))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:c}=this,{onStart:et}=this.props;c&&(this.activated=!0,this.documentListeners.add(EventName.Click,stopPropagation,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(EventName.SelectionChange,this.removeTextSelection),et(c))}handleMove(c){var et;const{activated:_e,initialCoordinates:tt,props:nt}=this,{onMove:rt,options:{activationConstraint:it}}=nt;if(!tt)return;const ot=(et=getEventCoordinates(c))!=null?et:defaultCoordinates,st=subtract(tt,ot);if(!_e&&it){if(isDistanceConstraint(it)){if(it.tolerance!=null&&hasExceededDistance(st,it.tolerance))return this.handleCancel();if(hasExceededDistance(st,it.distance))return this.handleStart()}return isDelayConstraint(it)&&hasExceededDistance(st,it.tolerance)?this.handleCancel():void 0}c.cancelable&&c.preventDefault(),rt(ot)}handleEnd(){const{onEnd:c}=this.props;this.detach(),c()}handleCancel(){const{onCancel:c}=this.props;this.detach(),c()}handleKeydown(c){c.code===KeyboardCode.Esc&&this.handleCancel()}removeTextSelection(){var c;(c=this.document.getSelection())==null||c.removeAllRanges()}}const events={move:{name:"pointermove"},end:{name:"pointerup"}};class PointerSensor extends AbstractPointerSensor{constructor(c){const{event:et}=c,_e=getOwnerDocument(et.target);super(c,events,_e)}}PointerSensor.activators=[{eventName:"onPointerDown",handler:(d,c)=>{let{nativeEvent:et}=d,{onActivation:_e}=c;return!et.isPrimary||et.button!==0?!1:(_e==null||_e({event:et}),!0)}}];const events$1={move:{name:"mousemove"},end:{name:"mouseup"}};var MouseButton;(function(d){d[d.RightClick=2]="RightClick"})(MouseButton||(MouseButton={}));class MouseSensor extends AbstractPointerSensor{constructor(c){super(c,events$1,getOwnerDocument(c.event.target))}}MouseSensor.activators=[{eventName:"onMouseDown",handler:(d,c)=>{let{nativeEvent:et}=d,{onActivation:_e}=c;return et.button===MouseButton.RightClick?!1:(_e==null||_e({event:et}),!0)}}];const events$2={move:{name:"touchmove"},end:{name:"touchend"}};class TouchSensor extends AbstractPointerSensor{constructor(c){super(c,events$2)}static setup(){return window.addEventListener(events$2.move.name,c,{capture:!1,passive:!1}),function(){window.removeEventListener(events$2.move.name,c)};function c(){}}}TouchSensor.activators=[{eventName:"onTouchStart",handler:(d,c)=>{let{nativeEvent:et}=d,{onActivation:_e}=c;const{touches:tt}=et;return tt.length>1?!1:(_e==null||_e({event:et}),!0)}}];var AutoScrollActivator;(function(d){d[d.Pointer=0]="Pointer",d[d.DraggableRect=1]="DraggableRect"})(AutoScrollActivator||(AutoScrollActivator={}));var TraversalOrder;(function(d){d[d.TreeOrder=0]="TreeOrder",d[d.ReversedTreeOrder=1]="ReversedTreeOrder"})(TraversalOrder||(TraversalOrder={}));function useAutoScroller(d){let{acceleration:c,activator:et=AutoScrollActivator.Pointer,canScroll:_e,draggingRect:tt,enabled:nt,interval:rt=5,order:it=TraversalOrder.TreeOrder,pointerCoordinates:ot,scrollableAncestors:st,scrollableAncestorRects:at,delta:lt,threshold:ct}=d;const ut=useScrollIntent({delta:lt,disabled:!nt}),[dt,ht]=useInterval(),yt=reactExports.useRef({x:0,y:0}),gt=reactExports.useRef({x:0,y:0}),ft=reactExports.useMemo(()=>{switch(et){case AutoScrollActivator.Pointer:return ot?{top:ot.y,bottom:ot.y,left:ot.x,right:ot.x}:null;case AutoScrollActivator.DraggableRect:return tt}},[et,tt,ot]),mt=reactExports.useRef(null),pt=reactExports.useCallback(()=>{const vt=mt.current;if(!vt)return;const Et=yt.current.x*gt.current.x,_t=yt.current.y*gt.current.y;vt.scrollBy(Et,_t)},[]),xt=reactExports.useMemo(()=>it===TraversalOrder.TreeOrder?[...st].reverse():st,[it,st]);reactExports.useEffect(()=>{if(!nt||!st.length||!ft){ht();return}for(const vt of xt){if((_e==null?void 0:_e(vt))===!1)continue;const Et=st.indexOf(vt),_t=at[Et];if(!_t)continue;const{direction:wt,speed:bt}=getScrollDirectionAndSpeed(vt,_t,ft,c,ct);for(const $t of["x","y"])ut[$t][wt[$t]]||(bt[$t]=0,wt[$t]=0);if(bt.x>0||bt.y>0){ht(),mt.current=vt,dt(pt,rt),yt.current=bt,gt.current=wt;return}}yt.current={x:0,y:0},gt.current={x:0,y:0},ht()},[c,pt,_e,ht,nt,rt,JSON.stringify(ft),JSON.stringify(ut),dt,st,xt,at,JSON.stringify(ct)])}const defaultScrollIntent={x:{[Direction.Backward]:!1,[Direction.Forward]:!1},y:{[Direction.Backward]:!1,[Direction.Forward]:!1}};function useScrollIntent(d){let{delta:c,disabled:et}=d;const _e=usePrevious(c);return useLazyMemo(tt=>{if(et||!_e||!tt)return defaultScrollIntent;const nt={x:Math.sign(c.x-_e.x),y:Math.sign(c.y-_e.y)};return{x:{[Direction.Backward]:tt.x[Direction.Backward]||nt.x===-1,[Direction.Forward]:tt.x[Direction.Forward]||nt.x===1},y:{[Direction.Backward]:tt.y[Direction.Backward]||nt.y===-1,[Direction.Forward]:tt.y[Direction.Forward]||nt.y===1}}},[et,c,_e])}function useCachedNode(d,c){const et=c!==null?d.get(c):void 0,_e=et?et.node.current:null;return useLazyMemo(tt=>{var nt;return c===null?null:(nt=_e??tt)!=null?nt:null},[_e,c])}function useCombineActivators(d,c){return reactExports.useMemo(()=>d.reduce((et,_e)=>{const{sensor:tt}=_e,nt=tt.activators.map(rt=>({eventName:rt.eventName,handler:c(rt.handler,_e)}));return[...et,...nt]},[]),[d,c])}var MeasuringStrategy;(function(d){d[d.Always=0]="Always",d[d.BeforeDragging=1]="BeforeDragging",d[d.WhileDragging=2]="WhileDragging"})(MeasuringStrategy||(MeasuringStrategy={}));var MeasuringFrequency;(function(d){d.Optimized="optimized"})(MeasuringFrequency||(MeasuringFrequency={}));const defaultValue=new Map;function useDroppableMeasuring(d,c){let{dragging:et,dependencies:_e,config:tt}=c;const[nt,rt]=reactExports.useState(null),{frequency:it,measure:ot,strategy:st}=tt,at=reactExports.useRef(d),lt=yt(),ct=useLatestValue(lt),ut=reactExports.useCallback(function(gt){gt===void 0&&(gt=[]),!ct.current&&rt(ft=>ft===null?gt:ft.concat(gt.filter(mt=>!ft.includes(mt))))},[ct]),dt=reactExports.useRef(null),ht=useLazyMemo(gt=>{if(lt&&!et)return defaultValue;if(!gt||gt===defaultValue||at.current!==d||nt!=null){const ft=new Map;for(let mt of d){if(!mt)continue;if(nt&&nt.length>0&&!nt.includes(mt.id)&&mt.rect.current){ft.set(mt.id,mt.rect.current);continue}const pt=mt.node.current,xt=pt?new Rect(ot(pt),pt):null;mt.rect.current=xt,xt&&ft.set(mt.id,xt)}return ft}return gt},[d,nt,et,lt,ot]);return reactExports.useEffect(()=>{at.current=d},[d]),reactExports.useEffect(()=>{lt||ut()},[et,lt]),reactExports.useEffect(()=>{nt&&nt.length>0&&rt(null)},[JSON.stringify(nt)]),reactExports.useEffect(()=>{lt||typeof it!="number"||dt.current!==null||(dt.current=setTimeout(()=>{ut(),dt.current=null},it))},[it,lt,ut,..._e]),{droppableRects:ht,measureDroppableContainers:ut,measuringScheduled:nt!=null};function yt(){switch(st){case MeasuringStrategy.Always:return!1;case MeasuringStrategy.BeforeDragging:return et;default:return!et}}}function useInitialValue(d,c){return useLazyMemo(et=>d?et||(typeof c=="function"?c(d):d):null,[c,d])}function useInitialRect(d,c){return useInitialValue(d,c)}function useMutationObserver(d){let{callback:c,disabled:et}=d;const _e=useEvent(c),tt=reactExports.useMemo(()=>{if(et||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:nt}=window;return new nt(_e)},[_e,et]);return reactExports.useEffect(()=>()=>tt==null?void 0:tt.disconnect(),[tt]),tt}function useResizeObserver(d){let{callback:c,disabled:et}=d;const _e=useEvent(c),tt=reactExports.useMemo(()=>{if(et||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:nt}=window;return new nt(_e)},[et]);return reactExports.useEffect(()=>()=>tt==null?void 0:tt.disconnect(),[tt]),tt}function defaultMeasure(d){return new Rect(getClientRect(d),d)}function useRect(d,c,et){c===void 0&&(c=defaultMeasure);const[_e,tt]=reactExports.useReducer(it,null),nt=useMutationObserver({callback(ot){if(d)for(const st of ot){const{type:at,target:lt}=st;if(at==="childList"&&lt instanceof HTMLElement&&lt.contains(d)){tt();break}}}}),rt=useResizeObserver({callback:tt});return useIsomorphicLayoutEffect(()=>{tt(),d?(rt==null||rt.observe(d),nt==null||nt.observe(document.body,{childList:!0,subtree:!0})):(rt==null||rt.disconnect(),nt==null||nt.disconnect())},[d]),_e;function it(ot){if(!d)return null;if(d.isConnected===!1){var st;return(st=ot??et)!=null?st:null}const at=c(d);return JSON.stringify(ot)===JSON.stringify(at)?ot:at}}function useRectDelta(d){const c=useInitialValue(d);return getRectDelta(d,c)}const defaultValue$1=[];function useScrollableAncestors(d){const c=reactExports.useRef(d),et=useLazyMemo(_e=>d?_e&&_e!==defaultValue$1&&d&&c.current&&d.parentNode===c.current.parentNode?_e:getScrollableAncestors(d):defaultValue$1,[d]);return reactExports.useEffect(()=>{c.current=d},[d]),et}function useScrollOffsets(d){const[c,et]=reactExports.useState(null),_e=reactExports.useRef(d),tt=reactExports.useCallback(nt=>{const rt=getScrollableElement(nt.target);rt&&et(it=>it?(it.set(rt,getScrollCoordinates(rt)),new Map(it)):null)},[]);return reactExports.useEffect(()=>{const nt=_e.current;if(d!==nt){rt(nt);const it=d.map(ot=>{const st=getScrollableElement(ot);return st?(st.addEventListener("scroll",tt,{passive:!0}),[st,getScrollCoordinates(st)]):null}).filter(ot=>ot!=null);et(it.length?new Map(it):null),_e.current=d}return()=>{rt(d),rt(nt)};function rt(it){it.forEach(ot=>{const st=getScrollableElement(ot);st==null||st.removeEventListener("scroll",tt)})}},[tt,d]),reactExports.useMemo(()=>d.length?c?Array.from(c.values()).reduce((nt,rt)=>add(nt,rt),defaultCoordinates):getScrollOffsets(d):defaultCoordinates,[d,c])}function useScrollOffsetsDelta(d,c){c===void 0&&(c=[]);const et=reactExports.useRef(null);return reactExports.useEffect(()=>{et.current=null},c),reactExports.useEffect(()=>{const _e=d!==defaultCoordinates;_e&&!et.current&&(et.current=d),!_e&&et.current&&(et.current=null)},[d]),et.current?subtract(d,et.current):defaultCoordinates}function useSensorSetup(d){reactExports.useEffect(()=>{if(!canUseDOM)return;const c=d.map(et=>{let{sensor:_e}=et;return _e.setup==null?void 0:_e.setup()});return()=>{for(const et of c)et==null||et()}},d.map(c=>{let{sensor:et}=c;return et}))}function useSyntheticListeners(d,c){return reactExports.useMemo(()=>d.reduce((et,_e)=>{let{eventName:tt,handler:nt}=_e;return et[tt]=rt=>{nt(rt,c)},et},{}),[d,c])}function useWindowRect(d){return reactExports.useMemo(()=>d?getWindowClientRect(d):null,[d])}const defaultValue$2=[];function useRects(d,c){c===void 0&&(c=getClientRect);const[et]=d,_e=useWindowRect(et?getWindow(et):null),[tt,nt]=reactExports.useReducer(it,defaultValue$2),rt=useResizeObserver({callback:nt});return d.length>0&&tt===defaultValue$2&&nt(),useIsomorphicLayoutEffect(()=>{d.length?d.forEach(ot=>rt==null?void 0:rt.observe(ot)):(rt==null||rt.disconnect(),nt())},[d]),tt;function it(){return d.length?d.map(ot=>isDocumentScrollingElement(ot)?_e:new Rect(c(ot),ot)):defaultValue$2}}function getMeasurableNode(d){if(!d)return null;if(d.children.length>1)return d;const c=d.children[0];return isHTMLElement(c)?c:d}function useDragOverlayMeasuring(d){let{measure:c}=d;const[et,_e]=reactExports.useState(null),tt=reactExports.useCallback(st=>{for(const{target:at}of st)if(isHTMLElement(at)){_e(lt=>{const ct=c(at);return lt?{...lt,width:ct.width,height:ct.height}:ct});break}},[c]),nt=useResizeObserver({callback:tt}),rt=reactExports.useCallback(st=>{const at=getMeasurableNode(st);nt==null||nt.disconnect(),at&&(nt==null||nt.observe(at)),_e(at?c(at):null)},[c,nt]),[it,ot]=useNodeRef(rt);return reactExports.useMemo(()=>({nodeRef:it,rect:et,setRef:ot}),[et,it,ot])}const defaultSensors=[{sensor:PointerSensor,options:{}},{sensor:KeyboardSensor,options:{}}],defaultData={current:{}},defaultMeasuringConfiguration={draggable:{measure:getTransformAgnosticClientRect},droppable:{measure:getTransformAgnosticClientRect,strategy:MeasuringStrategy.WhileDragging,frequency:MeasuringFrequency.Optimized},dragOverlay:{measure:getClientRect}};class DroppableContainersMap extends Map{get(c){var et;return c!=null&&(et=super.get(c))!=null?et:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(c=>{let{disabled:et}=c;return!et})}getNodeFor(c){var et,_e;return(et=(_e=this.get(c))==null?void 0:_e.node.current)!=null?et:void 0}}const defaultPublicContext={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new DroppableContainersMap,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:noop},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:defaultMeasuringConfiguration,measureDroppableContainers:noop,windowRect:null,measuringScheduled:!1},defaultInternalContext={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:noop,draggableNodes:new Map,over:null,measureDroppableContainers:noop},InternalContext=reactExports.createContext(defaultInternalContext),PublicContext=reactExports.createContext(defaultPublicContext);function getInitialState(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new DroppableContainersMap}}}function reducer(d,c){switch(c.type){case Action.DragStart:return{...d,draggable:{...d.draggable,initialCoordinates:c.initialCoordinates,active:c.active}};case Action.DragMove:return d.draggable.active?{...d,draggable:{...d.draggable,translate:{x:c.coordinates.x-d.draggable.initialCoordinates.x,y:c.coordinates.y-d.draggable.initialCoordinates.y}}}:d;case Action.DragEnd:case Action.DragCancel:return{...d,draggable:{...d.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Action.RegisterDroppable:{const{element:et}=c,{id:_e}=et,tt=new DroppableContainersMap(d.droppable.containers);return tt.set(_e,et),{...d,droppable:{...d.droppable,containers:tt}}}case Action.SetDroppableDisabled:{const{id:et,key:_e,disabled:tt}=c,nt=d.droppable.containers.get(et);if(!nt||_e!==nt.key)return d;const rt=new DroppableContainersMap(d.droppable.containers);return rt.set(et,{...nt,disabled:tt}),{...d,droppable:{...d.droppable,containers:rt}}}case Action.UnregisterDroppable:{const{id:et,key:_e}=c,tt=d.droppable.containers.get(et);if(!tt||_e!==tt.key)return d;const nt=new DroppableContainersMap(d.droppable.containers);return nt.delete(et),{...d,droppable:{...d.droppable,containers:nt}}}default:return d}}function RestoreFocus(d){let{disabled:c}=d;const{active:et,activatorEvent:_e,draggableNodes:tt}=reactExports.useContext(InternalContext),nt=usePrevious(_e),rt=usePrevious(et==null?void 0:et.id);return reactExports.useEffect(()=>{if(!c&&!_e&&nt&&rt!=null){if(!isKeyboardEvent(nt)||document.activeElement===nt.target)return;const it=tt.get(rt);if(!it)return;const{activatorNode:ot,node:st}=it;if(!ot.current&&!st.current)return;requestAnimationFrame(()=>{for(const at of[ot.current,st.current]){if(!at)continue;const lt=findFirstFocusableNode(at);if(lt){lt.focus();break}}})}},[_e,c,tt,rt,nt]),null}function applyModifiers(d,c){let{transform:et,..._e}=c;return d!=null&&d.length?d.reduce((tt,nt)=>nt({transform:tt,..._e}),et):et}function useMeasuringConfiguration(d){return reactExports.useMemo(()=>({draggable:{...defaultMeasuringConfiguration.draggable,...d==null?void 0:d.draggable},droppable:{...defaultMeasuringConfiguration.droppable,...d==null?void 0:d.droppable},dragOverlay:{...defaultMeasuringConfiguration.dragOverlay,...d==null?void 0:d.dragOverlay}}),[d==null?void 0:d.draggable,d==null?void 0:d.droppable,d==null?void 0:d.dragOverlay])}function useLayoutShiftScrollCompensation(d){let{activeNode:c,measure:et,initialRect:_e,config:tt=!0}=d;const nt=reactExports.useRef(!1),{x:rt,y:it}=typeof tt=="boolean"?{x:tt,y:tt}:tt;useIsomorphicLayoutEffect(()=>{if(!rt&&!it||!c){nt.current=!1;return}if(nt.current||!_e)return;const st=c==null?void 0:c.node.current;if(!st||st.isConnected===!1)return;const at=et(st),lt=getRectDelta(at,_e);if(rt||(lt.x=0),it||(lt.y=0),nt.current=!0,Math.abs(lt.x)>0||Math.abs(lt.y)>0){const ct=getFirstScrollableAncestor(st);ct&&ct.scrollBy({top:lt.y,left:lt.x})}},[c,rt,it,_e,et])}const ActiveDraggableContext=reactExports.createContext({...defaultCoordinates,scaleX:1,scaleY:1});var Status;(function(d){d[d.Uninitialized=0]="Uninitialized",d[d.Initializing=1]="Initializing",d[d.Initialized=2]="Initialized"})(Status||(Status={}));const DndContext=reactExports.memo(function d(c){var et,_e,tt,nt;let{id:rt,accessibility:it,autoScroll:ot=!0,children:st,sensors:at=defaultSensors,collisionDetection:lt=rectIntersection,measuring:ct,modifiers:ut,...dt}=c;const ht=reactExports.useReducer(reducer,void 0,getInitialState),[yt,gt]=ht,[ft,mt]=useDndMonitorProvider(),[pt,xt]=reactExports.useState(Status.Uninitialized),vt=pt===Status.Initialized,{draggable:{active:Et,nodes:_t,translate:wt},droppable:{containers:bt}}=yt,$t=Et?_t.get(Et):null,kt=reactExports.useRef({initial:null,translated:null}),Nt=reactExports.useMemo(()=>{var Bt;return Et!=null?{id:Et,data:(Bt=$t==null?void 0:$t.data)!=null?Bt:defaultData,rect:kt}:null},[Et,$t]),At=reactExports.useRef(null),[Gt,Kt]=reactExports.useState(null),[qt,Ot]=reactExports.useState(null),Pt=useLatestValue(dt,Object.values(dt)),Lt=useUniqueId("DndDescribedBy",rt),Qt=reactExports.useMemo(()=>bt.getEnabled(),[bt]),Wt=useMeasuringConfiguration(ct),{droppableRects:sn,measureDroppableContainers:zt,measuringScheduled:en}=useDroppableMeasuring(Qt,{dragging:vt,dependencies:[wt.x,wt.y],config:Wt.droppable}),rn=useCachedNode(_t,Et),mn=reactExports.useMemo(()=>qt?getEventCoordinates(qt):null,[qt]),Zt=Jt(),Tt=useInitialRect(rn,Wt.draggable.measure);useLayoutShiftScrollCompensation({activeNode:Et?_t.get(Et):null,config:Zt.layoutShiftCompensation,initialRect:Tt,measure:Wt.draggable.measure});const Rt=useRect(rn,Wt.draggable.measure,Tt),jt=useRect(rn?rn.parentElement:null),Dt=reactExports.useRef({activatorEvent:null,active:null,activeNode:rn,collisionRect:null,collisions:null,droppableRects:sn,draggableNodes:_t,draggingNode:null,draggingNodeRect:null,droppableContainers:bt,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Mt=bt.getNodeFor((et=Dt.current.over)==null?void 0:et.id),Vt=useDragOverlayMeasuring({measure:Wt.dragOverlay.measure}),Ht=(_e=Vt.nodeRef.current)!=null?_e:rn,hn=vt?(tt=Vt.rect)!=null?tt:Rt:null,un=!!(Vt.nodeRef.current&&Vt.rect),xn=useRectDelta(un?null:Rt),$n=useWindowRect(Ht?getWindow(Ht):null),ln=useScrollableAncestors(vt?Mt??rn:null),wn=useRects(ln),Tn=applyModifiers(ut,{transform:{x:wt.x-xn.x,y:wt.y-xn.y,scaleX:1,scaleY:1},activatorEvent:qt,active:Nt,activeNodeRect:Rt,containerNodeRect:jt,draggingNodeRect:hn,over:Dt.current.over,overlayNodeRect:Vt.rect,scrollableAncestors:ln,scrollableAncestorRects:wn,windowRect:$n}),kn=mn?add(mn,wt):null,In=useScrollOffsets(ln),on=useScrollOffsetsDelta(In),En=useScrollOffsetsDelta(In,[Rt]),_n=add(Tn,on),Cn=hn?getAdjustedRect(hn,Tn):null,Ln=Nt&&Cn?lt({active:Nt,collisionRect:Cn,droppableRects:sn,droppableContainers:Qt,pointerCoordinates:kn}):null,Un=getFirstCollision(Ln,"id"),[jn,Vn]=reactExports.useState(null),qn=un?Tn:add(Tn,En),St=adjustScale(qn,(nt=jn==null?void 0:jn.rect)!=null?nt:null,Rt),Ct=reactExports.useCallback((Bt,Ft)=>{let{sensor:tn,options:pn}=Ft;if(At.current==null)return;const nn=_t.get(At.current);if(!nn)return;const an=Bt.nativeEvent,dn=new tn({active:At.current,activeNode:nn,event:an,options:pn,context:Dt,onStart(yn){const On=At.current;if(On==null)return;const An=_t.get(On);if(!An)return;const{onDragStart:bn}=Pt.current,Rn={active:{id:On,data:An.data,rect:kt}};reactDomExports.unstable_batchedUpdates(()=>{bn==null||bn(Rn),xt(Status.Initializing),gt({type:Action.DragStart,initialCoordinates:yn,active:On}),ft({type:"onDragStart",event:Rn})})},onMove(yn){gt({type:Action.DragMove,coordinates:yn})},onEnd:Sn(Action.DragEnd),onCancel:Sn(Action.DragCancel)});reactDomExports.unstable_batchedUpdates(()=>{Kt(dn),Ot(Bt.nativeEvent)});function Sn(yn){return async function(){const{active:An,collisions:bn,over:Rn,scrollAdjustedTranslate:Fn}=Dt.current;let Dn=null;if(An&&Fn){const{cancelDrop:Pn}=Pt.current;Dn={activatorEvent:an,active:An,collisions:bn,delta:Fn,over:Rn},yn===Action.DragEnd&&typeof Pn=="function"&&await Promise.resolve(Pn(Dn))&&(yn=Action.DragCancel)}At.current=null,reactDomExports.unstable_batchedUpdates(()=>{gt({type:yn}),xt(Status.Uninitialized),Vn(null),Kt(null),Ot(null);const Pn=yn===Action.DragEnd?"onDragEnd":"onDragCancel";if(Dn){const Bn=Pt.current[Pn];Bn==null||Bn(Dn),ft({type:Pn,event:Dn})}})}}},[_t]),It=reactExports.useCallback((Bt,Ft)=>(tn,pn)=>{const nn=tn.nativeEvent,an=_t.get(pn);if(At.current!==null||!an||nn.dndKit||nn.defaultPrevented)return;const dn={active:an};Bt(tn,Ft.options,dn)===!0&&(nn.dndKit={capturedBy:Ft.sensor},At.current=pn,Ct(tn,Ft))},[_t,Ct]),Ut=useCombineActivators(at,It);useSensorSetup(at),useIsomorphicLayoutEffect(()=>{Rt&&pt===Status.Initializing&&xt(Status.Initialized)},[Rt,pt]),reactExports.useEffect(()=>{const{onDragMove:Bt}=Pt.current,{active:Ft,activatorEvent:tn,collisions:pn,over:nn}=Dt.current;if(!Ft||!tn)return;const an={active:Ft,activatorEvent:tn,collisions:pn,delta:{x:_n.x,y:_n.y},over:nn};reactDomExports.unstable_batchedUpdates(()=>{Bt==null||Bt(an),ft({type:"onDragMove",event:an})})},[_n.x,_n.y]),reactExports.useEffect(()=>{const{active:Bt,activatorEvent:Ft,collisions:tn,droppableContainers:pn,scrollAdjustedTranslate:nn}=Dt.current;if(!Bt||At.current==null||!Ft||!nn)return;const{onDragOver:an}=Pt.current,dn=pn.get(Un),Sn=dn&&dn.rect.current?{id:dn.id,rect:dn.rect.current,data:dn.data,disabled:dn.disabled}:null,yn={active:Bt,activatorEvent:Ft,collisions:tn,delta:{x:nn.x,y:nn.y},over:Sn};reactDomExports.unstable_batchedUpdates(()=>{Vn(Sn),an==null||an(yn),ft({type:"onDragOver",event:yn})})},[Un]),useIsomorphicLayoutEffect(()=>{Dt.current={activatorEvent:qt,active:Nt,activeNode:rn,collisionRect:Cn,collisions:Ln,droppableRects:sn,draggableNodes:_t,draggingNode:Ht,draggingNodeRect:hn,droppableContainers:bt,over:jn,scrollableAncestors:ln,scrollAdjustedTranslate:_n},kt.current={initial:hn,translated:Cn}},[Nt,rn,Ln,Cn,_t,Ht,hn,sn,bt,jn,ln,_n]),useAutoScroller({...Zt,delta:wt,draggingRect:Cn,pointerCoordinates:kn,scrollableAncestors:ln,scrollableAncestorRects:wn});const Xt=reactExports.useMemo(()=>({active:Nt,activeNode:rn,activeNodeRect:Rt,activatorEvent:qt,collisions:Ln,containerNodeRect:jt,dragOverlay:Vt,draggableNodes:_t,droppableContainers:bt,droppableRects:sn,over:jn,measureDroppableContainers:zt,scrollableAncestors:ln,scrollableAncestorRects:wn,measuringConfiguration:Wt,measuringScheduled:en,windowRect:$n}),[Nt,rn,Rt,qt,Ln,jt,Vt,_t,bt,sn,jn,zt,ln,wn,Wt,en,$n]),Yt=reactExports.useMemo(()=>({activatorEvent:qt,activators:Ut,active:Nt,activeNodeRect:Rt,ariaDescribedById:{draggable:Lt},dispatch:gt,draggableNodes:_t,over:jn,measureDroppableContainers:zt}),[qt,Ut,Nt,Rt,gt,Lt,_t,jn,zt]);return React.createElement(DndMonitorContext.Provider,{value:mt},React.createElement(InternalContext.Provider,{value:Yt},React.createElement(PublicContext.Provider,{value:Xt},React.createElement(ActiveDraggableContext.Provider,{value:St},st)),React.createElement(RestoreFocus,{disabled:(it==null?void 0:it.restoreFocus)===!1})),React.createElement(Accessibility,{...it,hiddenTextDescribedById:Lt}));function Jt(){const Bt=(Gt==null?void 0:Gt.autoScrollEnabled)===!1,Ft=typeof ot=="object"?ot.enabled===!1:ot===!1,tn=vt&&!Bt&&!Ft;return typeof ot=="object"?{...ot,enabled:tn}:{enabled:tn}}}),NullContext=reactExports.createContext(null),defaultRole="button",ID_PREFIX$1="Droppable";function useDraggable(d){let{id:c,data:et,disabled:_e=!1,attributes:tt}=d;const nt=useUniqueId(ID_PREFIX$1),{activators:rt,activatorEvent:it,active:ot,activeNodeRect:st,ariaDescribedById:at,draggableNodes:lt,over:ct}=reactExports.useContext(InternalContext),{role:ut=defaultRole,roleDescription:dt="draggable",tabIndex:ht=0}=tt??{},yt=(ot==null?void 0:ot.id)===c,gt=reactExports.useContext(yt?ActiveDraggableContext:NullContext),[ft,mt]=useNodeRef(),[pt,xt]=useNodeRef(),vt=useSyntheticListeners(rt,c),Et=useLatestValue(et);useIsomorphicLayoutEffect(()=>(lt.set(c,{id:c,key:nt,node:ft,activatorNode:pt,data:Et}),()=>{const wt=lt.get(c);wt&&wt.key===nt&&lt.delete(c)}),[lt,c]);const _t=reactExports.useMemo(()=>({role:ut,tabIndex:ht,"aria-disabled":_e,"aria-pressed":yt&&ut===defaultRole?!0:void 0,"aria-roledescription":dt,"aria-describedby":at.draggable}),[_e,ut,ht,yt,dt,at.draggable]);return{active:ot,activatorEvent:it,activeNodeRect:st,attributes:_t,isDragging:yt,listeners:_e?void 0:vt,node:ft,over:ct,setNodeRef:mt,setActivatorNodeRef:xt,transform:gt}}function useDndContext(){return reactExports.useContext(PublicContext)}const ID_PREFIX$1$1="Droppable",defaultResizeObserverConfig={timeout:25};function useDroppable(d){let{data:c,disabled:et=!1,id:_e,resizeObserverConfig:tt}=d;const nt=useUniqueId(ID_PREFIX$1$1),{active:rt,dispatch:it,over:ot,measureDroppableContainers:st}=reactExports.useContext(InternalContext),at=reactExports.useRef({disabled:et}),lt=reactExports.useRef(!1),ct=reactExports.useRef(null),ut=reactExports.useRef(null),{disabled:dt,updateMeasurementsFor:ht,timeout:yt}={...defaultResizeObserverConfig,...tt},gt=useLatestValue(ht??_e),ft=reactExports.useCallback(()=>{if(!lt.current){lt.current=!0;return}ut.current!=null&&clearTimeout(ut.current),ut.current=setTimeout(()=>{st(Array.isArray(gt.current)?gt.current:[gt.current]),ut.current=null},yt)},[yt]),mt=useResizeObserver({callback:ft,disabled:dt||!rt}),pt=reactExports.useCallback((_t,wt)=>{mt&&(wt&&(mt.unobserve(wt),lt.current=!1),_t&&mt.observe(_t))},[mt]),[xt,vt]=useNodeRef(pt),Et=useLatestValue(c);return reactExports.useEffect(()=>{!mt||!xt.current||(mt.disconnect(),lt.current=!1,mt.observe(xt.current))},[xt,mt]),useIsomorphicLayoutEffect(()=>(it({type:Action.RegisterDroppable,element:{id:_e,key:nt,disabled:et,node:xt,rect:ct,data:Et}}),()=>it({type:Action.UnregisterDroppable,key:nt,id:_e})),[_e]),reactExports.useEffect(()=>{et!==at.current.disabled&&(it({type:Action.SetDroppableDisabled,id:_e,key:nt,disabled:et}),at.current.disabled=et)},[_e,nt,et,it]),{active:rt,rect:ct,isOver:(ot==null?void 0:ot.id)===_e,node:xt,over:ot,setNodeRef:vt}}function arrayMove(d,c,et){const _e=d.slice();return _e.splice(et<0?_e.length+et:et,0,_e.splice(c,1)[0]),_e}function getSortedRects(d,c){return d.reduce((et,_e,tt)=>{const nt=c.get(_e);return nt&&(et[tt]=nt),et},Array(d.length))}function isValidIndex(d){return d!==null&&d>=0}function itemsEqual(d,c){if(d===c)return!0;if(d.length!==c.length)return!1;for(let et=0;et<d.length;et++)if(d[et]!==c[et])return!1;return!0}function normalizeDisabled(d){return typeof d=="boolean"?{draggable:d,droppable:d}:d}const rectSortingStrategy=d=>{let{rects:c,activeIndex:et,overIndex:_e,index:tt}=d;const nt=arrayMove(c,_e,et),rt=c[tt],it=nt[tt];return!it||!rt?null:{x:it.left-rt.left,y:it.top-rt.top,scaleX:it.width/rt.width,scaleY:it.height/rt.height}},defaultScale$1={scaleX:1,scaleY:1},verticalListSortingStrategy=d=>{var c;let{activeIndex:et,activeNodeRect:_e,index:tt,rects:nt,overIndex:rt}=d;const it=(c=nt[et])!=null?c:_e;if(!it)return null;if(tt===et){const st=nt[rt];return st?{x:0,y:et<rt?st.top+st.height-(it.top+it.height):st.top-it.top,...defaultScale$1}:null}const ot=getItemGap$1(nt,tt,et);return tt>et&&tt<=rt?{x:0,y:-it.height-ot,...defaultScale$1}:tt<et&&tt>=rt?{x:0,y:it.height+ot,...defaultScale$1}:{x:0,y:0,...defaultScale$1}};function getItemGap$1(d,c,et){const _e=d[c],tt=d[c-1],nt=d[c+1];return _e?et<c?tt?_e.top-(tt.top+tt.height):nt?nt.top-(_e.top+_e.height):0:nt?nt.top-(_e.top+_e.height):tt?_e.top-(tt.top+tt.height):0:0}const ID_PREFIX="Sortable",Context=React.createContext({activeIndex:-1,containerId:ID_PREFIX,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:rectSortingStrategy,disabled:{draggable:!1,droppable:!1}});function SortableContext(d){let{children:c,id:et,items:_e,strategy:tt=rectSortingStrategy,disabled:nt=!1}=d;const{active:rt,dragOverlay:it,droppableRects:ot,over:st,measureDroppableContainers:at}=useDndContext(),lt=useUniqueId(ID_PREFIX,et),ct=it.rect!==null,ut=reactExports.useMemo(()=>_e.map(vt=>typeof vt=="object"&&"id"in vt?vt.id:vt),[_e]),dt=rt!=null,ht=rt?ut.indexOf(rt.id):-1,yt=st?ut.indexOf(st.id):-1,gt=reactExports.useRef(ut),ft=!itemsEqual(ut,gt.current),mt=yt!==-1&&ht===-1||ft,pt=normalizeDisabled(nt);useIsomorphicLayoutEffect(()=>{ft&&dt&&at(ut)},[ft,ut,dt,at]),reactExports.useEffect(()=>{gt.current=ut},[ut]);const xt=reactExports.useMemo(()=>({activeIndex:ht,containerId:lt,disabled:pt,disableTransforms:mt,items:ut,overIndex:yt,useDragOverlay:ct,sortedRects:getSortedRects(ut,ot),strategy:tt}),[ht,lt,pt.draggable,pt.droppable,mt,ut,yt,ot,ct,tt]);return React.createElement(Context.Provider,{value:xt},c)}const defaultNewIndexGetter=d=>{let{id:c,items:et,activeIndex:_e,overIndex:tt}=d;return arrayMove(et,_e,tt).indexOf(c)},defaultAnimateLayoutChanges=d=>{let{containerId:c,isSorting:et,wasDragging:_e,index:tt,items:nt,newIndex:rt,previousItems:it,previousContainerId:ot,transition:st}=d;return!st||!_e||it!==nt&&tt===rt?!1:et?!0:rt!==tt&&c===ot},defaultTransition={duration:200,easing:"ease"},transitionProperty="transform",disabledTransition=CSS.Transition.toString({property:transitionProperty,duration:0,easing:"linear"}),defaultAttributes={roleDescription:"sortable"};function useDerivedTransform(d){let{disabled:c,index:et,node:_e,rect:tt}=d;const[nt,rt]=reactExports.useState(null),it=reactExports.useRef(et);return useIsomorphicLayoutEffect(()=>{if(!c&&et!==it.current&&_e.current){const ot=tt.current;if(ot){const st=getClientRect(_e.current,{ignoreTransform:!0}),at={x:ot.left-st.left,y:ot.top-st.top,scaleX:ot.width/st.width,scaleY:ot.height/st.height};(at.x||at.y)&&rt(at)}}et!==it.current&&(it.current=et)},[c,et,_e,tt]),reactExports.useEffect(()=>{nt&&rt(null)},[nt]),nt}function useSortable(d){let{animateLayoutChanges:c=defaultAnimateLayoutChanges,attributes:et,disabled:_e,data:tt,getNewIndex:nt=defaultNewIndexGetter,id:rt,strategy:it,resizeObserverConfig:ot,transition:st=defaultTransition}=d;const{items:at,containerId:lt,activeIndex:ct,disabled:ut,disableTransforms:dt,sortedRects:ht,overIndex:yt,useDragOverlay:gt,strategy:ft}=reactExports.useContext(Context),mt=normalizeLocalDisabled(_e,ut),pt=at.indexOf(rt),xt=reactExports.useMemo(()=>({sortable:{containerId:lt,index:pt,items:at},...tt}),[lt,tt,pt,at]),vt=reactExports.useMemo(()=>at.slice(at.indexOf(rt)),[at,rt]),{rect:Et,node:_t,isOver:wt,setNodeRef:bt}=useDroppable({id:rt,data:xt,disabled:mt.droppable,resizeObserverConfig:{updateMeasurementsFor:vt,...ot}}),{active:$t,activatorEvent:kt,activeNodeRect:Nt,attributes:At,setNodeRef:Gt,listeners:Kt,isDragging:qt,over:Ot,setActivatorNodeRef:Pt,transform:Lt}=useDraggable({id:rt,data:xt,attributes:{...defaultAttributes,...et},disabled:mt.draggable}),Qt=useCombinedRefs(bt,Gt),Wt=!!$t,sn=Wt&&!dt&&isValidIndex(ct)&&isValidIndex(yt),zt=!gt&&qt,en=zt&&sn?Lt:null,mn=sn?en??(it??ft)({rects:ht,activeNodeRect:Nt,activeIndex:ct,overIndex:yt,index:pt}):null,Zt=isValidIndex(ct)&&isValidIndex(yt)?nt({id:rt,items:at,activeIndex:ct,overIndex:yt}):pt,Tt=$t==null?void 0:$t.id,Rt=reactExports.useRef({activeId:Tt,items:at,newIndex:Zt,containerId:lt}),jt=at!==Rt.current.items,Dt=c({active:$t,containerId:lt,isDragging:qt,isSorting:Wt,id:rt,index:pt,items:at,newIndex:Rt.current.newIndex,previousItems:Rt.current.items,previousContainerId:Rt.current.containerId,transition:st,wasDragging:Rt.current.activeId!=null}),Mt=useDerivedTransform({disabled:!Dt,index:pt,node:_t,rect:Et});return reactExports.useEffect(()=>{Wt&&Rt.current.newIndex!==Zt&&(Rt.current.newIndex=Zt),lt!==Rt.current.containerId&&(Rt.current.containerId=lt),at!==Rt.current.items&&(Rt.current.items=at)},[Wt,Zt,lt,at]),reactExports.useEffect(()=>{if(Tt===Rt.current.activeId)return;if(Tt&&!Rt.current.activeId){Rt.current.activeId=Tt;return}const Ht=setTimeout(()=>{Rt.current.activeId=Tt},50);return()=>clearTimeout(Ht)},[Tt]),{active:$t,activeIndex:ct,attributes:At,data:xt,rect:Et,index:pt,newIndex:Zt,items:at,isOver:wt,isSorting:Wt,isDragging:qt,listeners:Kt,node:_t,overIndex:yt,over:Ot,setNodeRef:Qt,setActivatorNodeRef:Pt,setDroppableNodeRef:bt,setDraggableNodeRef:Gt,transform:Mt??mn,transition:Vt()};function Vt(){if(Mt||jt&&Rt.current.newIndex===pt)return disabledTransition;if(!(zt&&!isKeyboardEvent(kt)||!st)&&(Wt||Dt))return CSS.Transition.toString({...st,property:transitionProperty})}}function normalizeLocalDisabled(d,c){var et,_e;return typeof d=="boolean"?{draggable:d,droppable:!1}:{draggable:(et=d==null?void 0:d.draggable)!=null?et:c.draggable,droppable:(_e=d==null?void 0:d.droppable)!=null?_e:c.droppable}}KeyboardCode.Down,KeyboardCode.Right,KeyboardCode.Up,KeyboardCode.Left;const CardBlock=reactExports.forwardRef(function d({draggableId:c,...et},_e){return c?jsxRuntimeExports.jsx(DraggableCardBlock,{ref:_e,draggableId:c,...et}):jsxRuntimeExports.jsx(BasicCardBlock,{ref:_e,...et})}),BasicCardBlock=reactExports.forwardRef(function d({variant:c="default",className:et,labelPrefix:_e=void 0,children:tt=void 0,disabled:nt=!1,...rt},it){const ot=[styles$3.card,et],st=c&&array(c);return st&&!nt&&st.forEach(at=>ot.push(variants[at])),nt&&ot.push(styles$3.disabled),jsxRuntimeExports.jsx("div",{ref:it,...rt,className:classNames(ot),children:tt})}),DraggableCardBlock=reactExports.forwardRef(function d({draggableId:c,className:et,..._e},tt){const{attributes:nt,listeners:rt,index:it,isDragging:ot,isSorting:st,over:at,setNodeRef:lt,transform:ct,transition:ut}=useSortable({id:c}),dt={transition:ut,transform:CSS.Translate.toString(ct)};return jsxRuntimeExports.jsx(BasicCardBlock,{ref:lt,className:classNames([et,ot?styles$3.dragging:void 0]),style:dt,..._e,...nt,...rt})});function EquipmentCard({equipment:d,disabled:c=!1,onClick:et,onEdit:_e,onDelete:tt}){const[nt,rt]=reactExports.useState(!1),[it,ot]=reactExports.useState(!1),st=reactExports.useMemo(()=>d.item.optionSetIds.length>0,[d]),at=ct=>{rt(!0),ct.stopPropagation()},lt=()=>{ot(!0),tt==null||tt()};return it?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsx(Collapse$1,{in:!nt,onExited:lt,children:jsxRuntimeExports.jsx(CardBlock,{draggableId:d.uid,disabled:c,children:jsxRuntimeExports.jsxs("div",{className:styles$4.label,children:[st&&jsxRuntimeExports.jsx("div",{className:classNames([styles$4.labelSegment,styles$4.control,styles$4.editButton]),onClick:_e,children:jsxRuntimeExports.jsx(EditIcon,{})}),jsxRuntimeExports.jsx("div",{className:styles$4.labelSegment+" "+styles$4.equipmentName,onClick:et,children:jsxRuntimeExports.jsx("div",{children:d.name})}),jsxRuntimeExports.jsxs("div",{className:styles$4.labelSegment,children:["(",jsxRuntimeExports.jsx(Currency,{gp:d.cost}),")"]}),jsxRuntimeExports.jsx("div",{className:classNames([styles$4.labelSegment,styles$4.control,styles$4.deleteButton]),onClick:at,children:jsxRuntimeExports.jsx(DeleteIcon,{})})]})})})}const equipmentSummary$1="_equipmentSummary_12c6g_1",eStyles={equipmentSummary:equipmentSummary$1},text="_text_n649o_1",gp="_gp_n649o_5",styles$2={text,gp};function CurrencyDelta({gp:d}){const[c,et]=reactExports.useMemo(()=>{if(d===0)return[Intl.NumberFormat().format(0),"gp"];const _e=d>0?"+":"-";let tt=Math.abs(d),nt="gp";return tt<1&&(tt=tt*10,nt="sp"),tt<1&&(tt=tt*10,nt="bp"),[_e+Intl.NumberFormat().format(tt),nt]},[d]);return jsxRuntimeExports.jsxs("span",{children:[c,jsxRuntimeExports.jsx("div",{className:styles$2.gp,children:et})]})}function EquipmentEditDialog({show:d,value:c,onConfirm:et,onCancel:_e}){const tt=useItemDatabase(),[nt,rt]=reactExports.useState(c.options),[it,ot]=useAsyncMemo(()=>tt.load(c.item.itemId),[tt,c]),st=reactExports.useMemo(()=>Equipment.create(c.item,!0,nt,tt),[c,nt]);function at(ct){rt(ct)}function lt(){et==null||et(c.item,nt)}return jsxRuntimeExports.jsxs(Modal$1,{show:d,onHide:_e,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,size:"lg",scrollable:!0,fullscreen:"md-down",className:styles$G.dialog,children:[jsxRuntimeExports.jsx(Modal$1.Header,{className:styles$G.title,closeButton:!0,closeVariant:"white",children:jsxRuntimeExports.jsx(Modal$1.Title,{children:c.name})}),jsxRuntimeExports.jsx(Modal$1.Header,{className:styles$G.header,children:jsxRuntimeExports.jsxs("div",{className:eStyles.equipmentSummary,children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("b",{children:["Weight: ",st.weight," lbs."]})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("b",{children:["Cost: ",jsxRuntimeExports.jsx(Currency,{gp:st.cost}),c.cost!==st.cost&&jsxRuntimeExports.jsxs("span",{children:[" (",jsxRuntimeExports.jsx(CurrencyDelta,{gp:st.cost-c.cost}),")"]})]})})]})}),jsxRuntimeExports.jsx(Modal$1.Body,{className:styles$G.body,children:ot?jsxRuntimeExports.jsx(LoadingBlock,{}):jsxRuntimeExports.jsx(EquipmentDescription,{item:it,selectedOptions:nt,onChangeOptions:at})}),jsxRuntimeExports.jsx(Modal$1.Footer,{className:styles$G.footer,children:jsxRuntimeExports.jsx(Button$1,{size:"lg",className:"w-100",onClick:lt,children:"OK"})})]})}function Droppable({id:d,children:c,onDragEnd:et}){const _e=useSensors(useSensor(MouseSensor,{activationConstraint:{distance:5}}),useSensor(TouchSensor,{activationConstraint:{delay:250,tolerance:5}}));return jsxRuntimeExports.jsx(DndContext,{id:d,onDragEnd:et,collisionDetection:closestCenter,sensors:_e,children:c})}function EquipmentList({equipment:d,onChange:c}){const et=useItemDatabase(),[_e,tt]=reactExports.useState(d),[nt,rt]=reactExports.useState();function it(dt){const ht=dt(_e);tt(ht),c==null||c(ht)}function ot(dt){it(ht=>ht.filter(yt=>yt.uid!==dt))}function st(dt){it(ht=>{const yt=_e.findIndex(ft=>ft.uid===dt);if(yt<0)return ht;const gt=_e[yt];return ht.slice().splice(yt,1,gt.include(!gt.included))})}function at(dt){const{active:ht,over:yt}=dt;ht.id!==(yt==null?void 0:yt.id)&&it(gt=>{const ft=gt.findIndex(pt=>pt.uid===ht.id),mt=gt.findIndex(pt=>pt.uid===(yt==null?void 0:yt.id));return arrayMove(gt,ft,mt)})}function lt(dt){rt(dt)}function ct(dt,ht){nt&&it(yt=>{const gt=_e.findIndex(mt=>mt.uid===nt.uid);if(gt<0)return yt;const ft=_e[gt];return yt.slice().splice(gt,1,Equipment.create(dt,ft.included,ht,et))}),rt(void 0)}function ut(){rt(void 0)}return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Droppable,{id:"equipment-set",onDragEnd:at,children:jsxRuntimeExports.jsx(CardBlockList,{children:jsxRuntimeExports.jsx(SortableContext,{items:_e.map(dt=>dt.uid),strategy:verticalListSortingStrategy,children:_e.map(dt=>jsxRuntimeExports.jsx(EquipmentCard,{equipment:dt,disabled:!dt.included,onClick:()=>st(dt.uid),onEdit:()=>lt(dt),onDelete:()=>ot(dt.uid)},dt.uid))})})}),nt&&jsxRuntimeExports.jsx(EquipmentEditDialog,{show:!0,value:nt,onCancel:ut,onConfirm:ct})]})}const equipmentSummary="_equipmentSummary_1xdsz_1",section="_section_1xdsz_9",styles$1={equipmentSummary,section},StartingWealthByLevel={2:1e3,3:3e3,4:6e3,5:10500,6:16e3,7:23500,8:33e3,9:46e3,10:62e3,11:82e3,12:108e3,13:14e4,15:24e4,16:315e3,17:41e4,18:53e4,19:685e3,20:88e4};function SelectBudgetDialog({show:d,value:c,onConfirm:et,onCancel:_e}){const[tt,nt]=reactExports.useState((c==null?void 0:c.toString())??"");reactExports.useEffect(()=>{nt((c==null?void 0:c.toString())??"")},[c]);function rt(ot){nt(ot)}function it(ot){const st=(ot??tt).trim(),at=st!==""?parseInt(st):void 0;et==null||et(at)}return jsxRuntimeExports.jsxs(Modal$1,{show:d,onHide:_e,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,size:"lg",scrollable:!0,fullscreen:"md-down",className:styles$G.dialog,children:[jsxRuntimeExports.jsx(Modal$1.Header,{className:styles$G.title,closeButton:!0,closeVariant:"white",children:jsxRuntimeExports.jsx(Modal$1.Title,{children:"Select Budget"})}),jsxRuntimeExports.jsxs(Modal$1.Body,{className:styles$G.body,children:[jsxRuntimeExports.jsx("label",{children:"Budget"}),jsxRuntimeExports.jsx(TextInput,{value:tt,onChange:rt,onEnter:it,autoFocus:!0}),jsxRuntimeExports.jsx("label",{children:"New Character Starting Wealth"}),jsxRuntimeExports.jsx(ButtonBlockGroup,{children:Object.entries(StartingWealthByLevel).map(([ot,st])=>jsxRuntimeExports.jsxs(ButtonBlock,{onClick:()=>it(st.toString()),children:["Level ",ot]},ot))})]}),jsxRuntimeExports.jsx(Modal$1.Footer,{className:styles$G.footer,children:jsxRuntimeExports.jsx(Button$1,{size:"lg",className:"w-100",onClick:()=>it(),children:"OK"})})]})}const positive="_positive_9qzyz_1",negative="_negative_9qzyz_5",styles={positive,negative};function BudgetRemaining({budget:d,totalCost:c}){const et=d-c,_e=et<0?styles.negative:styles.positive;return jsxRuntimeExports.jsx("span",{className:_e,children:jsxRuntimeExports.jsx(Currency,{gp:et})})}function EquipmentSetEditor({equipmentSet:d}){const[c,et]=reactExports.useState(!1),[_e,tt]=reactExports.useState(!1),[nt,rt]=reactExports.useState(d.name),[it,ot]=reactExports.useState(d.equipment),[st,at]=reactExports.useState(d.budget),lt=useEquipmentSetStore(),ct=reactExports.useMemo(()=>it.filter(mt=>mt.included).map(mt=>mt.cost).reduce((mt,pt)=>mt+pt,0),[it]),ut=reactExports.useMemo(()=>it.filter(mt=>mt.included).map(mt=>mt.weight).reduce((mt,pt)=>mt+pt,0),[it]);async function dt(mt){const pt=await mt(d);await lt.save(pt)}function ht(mt){rt(mt),dt(async pt=>(pt.name=mt,pt))}function yt(){tt(!0)}function gt(mt){tt(!1),at(mt),dt(async pt=>pt.setBudget(mt))}function ft(mt){ot(mt),dt(async pt=>pt.setEquipment(mt))}return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("header",{children:"Equipment Set"}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("label",{children:"Equipment Set Name"}),jsxRuntimeExports.jsx(TextInput,{value:nt,onChange:ht}),jsxRuntimeExports.jsx("label",{children:"Budget"}),jsxRuntimeExports.jsx(ButtonBlock,{onClick:yt,children:st&&jsxRuntimeExports.jsx(Currency,{gp:st})}),jsxRuntimeExports.jsx(SelectBudgetDialog,{show:_e,value:st,onCancel:()=>tt(!1),onConfirm:gt})]}),jsxRuntimeExports.jsx("header",{children:"Equipment List"}),jsxRuntimeExports.jsxs("section",{className:styles$1.section,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.equipmentSummary,children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("b",{children:["Total Weight: ",jsxRuntimeExports.jsx(Quantity,{amount:ut,unit:"lbs."})]})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("b",{children:["Total Cost: ",jsxRuntimeExports.jsx(Currency,{gp:ct})]})}),st&&jsxRuntimeExports.jsxs("div",{children:["(",jsxRuntimeExports.jsx(BudgetRemaining,{budget:st,totalCost:ct})," remaining)"]})]})]}),jsxRuntimeExports.jsx(EquipmentList,{equipment:it,onChange:ft}),jsxRuntimeExports.jsx(ButtonBlock,{variant:"link",onClick:()=>et(!0),children:"+ Add Item"}),jsxRuntimeExports.jsx(EquipmentSearchDialog,{show:c,onSelect:(mt,pt)=>{et(!1),dt(async xt=>mt?xt.add(mt.itemId,pt.map(vt=>vt.id)):xt)},onCancel:()=>et(!1)})]})]})}function EquipmentSetEdit({loaded:d}){return jsxRuntimeExports.jsxs("main",{children:[jsxRuntimeExports.jsx(EquipmentSetEditor,{equipmentSet:d}),jsxRuntimeExports.jsx("div",{className:"spacer"})]})}async function equipmentSetEditLoader({params:d}){const c=d.id;if(!c)throw new Error("No equipment set ID specified");const et=await withGlobalEquipmentSetStore(),_e=await timedAsync(()=>et.load(c),"Loading Equipment Set");if(!_e)throw new Error("Equipment Set not found");const tt=await withGlobalDatabase();if(!tt)throw new Error("Unable to initialize database");return{equipmentSet:_e,equipmentSetStore:et,database:tt,itemDatabase:await tt.itemDatabase()}}function EquipmentSetEditRoute(){const{equipmentSet:d,equipmentSetStore:c,database:et,itemDatabase:_e}=useLoaderData();return jsxRuntimeExports.jsx(DatabaseContext.Provider,{value:et,children:jsxRuntimeExports.jsx(ItemDatabaseContext.Provider,{value:_e,children:jsxRuntimeExports.jsx(EquipmentSetStoreContext.Provider,{value:c,children:jsxRuntimeExports.jsx(EquipmentSetEdit,{loaded:d})})})})}const router=createHashRouter([{path:"/",element:jsxRuntimeExports.jsx(EditorLayoutRoute,{}),children:[{index:!0,element:jsxRuntimeExports.jsx(CharacterListRoute,{}),loader:characterListLoader},{path:"login",element:jsxRuntimeExports.jsx(LoginRoute,{}),loader:loginLoader},{path:"character/edit/:id",element:jsxRuntimeExports.jsx(CharacterEditRoute,{}),loader:characterEditLoader},{path:"equipment",element:jsxRuntimeExports.jsx(EquipmentSetListRoute,{}),loader:equipmentSetListLoader},{path:"equipment/edit/:id",element:jsxRuntimeExports.jsx(EquipmentSetEditRoute,{}),loader:equipmentSetEditLoader}]},{path:"character/sheet/:id/:level",element:jsxRuntimeExports.jsx(CharacterSheetRoute,{}),loader:characterSheetLoader}]);client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(RouterProvider,{router})}));
//# sourceMappingURL=index-iyEa8kGl.js.map
