var ir=Object.defineProperty;var or=(et,_e,tt)=>_e in et?ir(et,_e,{enumerable:!0,configurable:!0,writable:!0,value:tt}):et[_e]=tt;var ln=(et,_e,tt)=>(or(et,typeof _e!="symbol"?_e+"":_e,tt),tt);function _mergeNamespaces(et,_e){for(var tt=0;tt<_e.length;tt++){const nt=_e[tt];if(typeof nt!="string"&&!Array.isArray(nt)){for(const rt in nt)if(rt!=="default"&&!(rt in et)){const it=Object.getOwnPropertyDescriptor(nt,rt);it&&Object.defineProperty(et,rt,it.get?it:{enumerable:!0,get:()=>nt[rt]})}}}return Object.freeze(Object.defineProperty(et,Symbol.toStringTag,{value:"Module"}))}(function(){const _e=document.createElement("link").relList;if(_e&&_e.supports&&_e.supports("modulepreload"))return;for(const rt of document.querySelectorAll('link[rel="modulepreload"]'))nt(rt);new MutationObserver(rt=>{for(const it of rt)if(it.type==="childList")for(const ot of it.addedNodes)ot.tagName==="LINK"&&ot.rel==="modulepreload"&&nt(ot)}).observe(document,{childList:!0,subtree:!0});function tt(rt){const it={};return rt.integrity&&(it.integrity=rt.integrity),rt.referrerPolicy&&(it.referrerPolicy=rt.referrerPolicy),rt.crossOrigin==="use-credentials"?it.credentials="include":rt.crossOrigin==="anonymous"?it.credentials="omit":it.credentials="same-origin",it}function nt(rt){if(rt.ep)return;rt.ep=!0;const it=tt(rt);fetch(rt.href,it)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(et){return et&&et.__esModule&&Object.prototype.hasOwnProperty.call(et,"default")?et.default:et}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$4=Symbol.for("react.element"),n$4=Symbol.for("react.portal"),p$6=Symbol.for("react.fragment"),q$4=Symbol.for("react.strict_mode"),r$3=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u$2=Symbol.for("react.context"),v$4=Symbol.for("react.forward_ref"),w$3=Symbol.for("react.suspense"),x$3=Symbol.for("react.memo"),y$3=Symbol.for("react.lazy"),z$4=Symbol.iterator;function A$4(et){return et===null||typeof et!="object"?null:(et=z$4&&et[z$4]||et["@@iterator"],typeof et=="function"?et:null)}var B$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$3=Object.assign,D$3={};function E$3(et,_e,tt){this.props=et,this.context=_e,this.refs=D$3,this.updater=tt||B$3}E$3.prototype.isReactComponent={};E$3.prototype.setState=function(et,_e){if(typeof et!="object"&&typeof et!="function"&&et!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,et,_e,"setState")};E$3.prototype.forceUpdate=function(et){this.updater.enqueueForceUpdate(this,et,"forceUpdate")};function F$2(){}F$2.prototype=E$3.prototype;function G$3(et,_e,tt){this.props=et,this.context=_e,this.refs=D$3,this.updater=tt||B$3}var H$3=G$3.prototype=new F$2;H$3.constructor=G$3;C$3(H$3,E$3.prototype);H$3.isPureReactComponent=!0;var I$3=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2(et,_e,tt){var nt,rt={},it=null,ot=null;if(_e!=null)for(nt in _e.ref!==void 0&&(ot=_e.ref),_e.key!==void 0&&(it=""+_e.key),_e)J$1.call(_e,nt)&&!L$2.hasOwnProperty(nt)&&(rt[nt]=_e[nt]);var st=arguments.length-2;if(st===1)rt.children=tt;else if(1<st){for(var at=Array(st),lt=0;lt<st;lt++)at[lt]=arguments[lt+2];rt.children=at}if(et&&et.defaultProps)for(nt in st=et.defaultProps,st)rt[nt]===void 0&&(rt[nt]=st[nt]);return{$$typeof:l$4,type:et,key:it,ref:ot,props:rt,_owner:K$2.current}}function N$2(et,_e){return{$$typeof:l$4,type:et.type,key:_e,ref:et.ref,props:et.props,_owner:et._owner}}function O$2(et){return typeof et=="object"&&et!==null&&et.$$typeof===l$4}function escape$1(et){var _e={"=":"=0",":":"=2"};return"$"+et.replace(/[=:]/g,function(tt){return _e[tt]})}var P$2=/\/+/g;function Q$2(et,_e){return typeof et=="object"&&et!==null&&et.key!=null?escape$1(""+et.key):_e.toString(36)}function R$2(et,_e,tt,nt,rt){var it=typeof et;(it==="undefined"||it==="boolean")&&(et=null);var ot=!1;if(et===null)ot=!0;else switch(it){case"string":case"number":ot=!0;break;case"object":switch(et.$$typeof){case l$4:case n$4:ot=!0}}if(ot)return ot=et,rt=rt(ot),et=nt===""?"."+Q$2(ot,0):nt,I$3(rt)?(tt="",et!=null&&(tt=et.replace(P$2,"$&/")+"/"),R$2(rt,_e,tt,"",function(lt){return lt})):rt!=null&&(O$2(rt)&&(rt=N$2(rt,tt+(!rt.key||ot&&ot.key===rt.key?"":(""+rt.key).replace(P$2,"$&/")+"/")+et)),_e.push(rt)),1;if(ot=0,nt=nt===""?".":nt+":",I$3(et))for(var st=0;st<et.length;st++){it=et[st];var at=nt+Q$2(it,st);ot+=R$2(it,_e,tt,at,rt)}else if(at=A$4(et),typeof at=="function")for(et=at.call(et),st=0;!(it=et.next()).done;)it=it.value,at=nt+Q$2(it,st++),ot+=R$2(it,_e,tt,at,rt);else if(it==="object")throw _e=String(et),Error("Objects are not valid as a React child (found: "+(_e==="[object Object]"?"object with keys {"+Object.keys(et).join(", ")+"}":_e)+"). If you meant to render a collection of children, use an array instead.");return ot}function S$2(et,_e,tt){if(et==null)return et;var nt=[],rt=0;return R$2(et,nt,"","",function(it){return _e.call(tt,it,rt++)}),nt}function T$2(et){if(et._status===-1){var _e=et._result;_e=_e(),_e.then(function(tt){(et._status===0||et._status===-1)&&(et._status=1,et._result=tt)},function(tt){(et._status===0||et._status===-1)&&(et._status=2,et._result=tt)}),et._status===-1&&(et._status=0,et._result=_e)}if(et._status===1)return et._result.default;throw et._result}var U$2={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};react_production_min.Children={map:S$2,forEach:function(et,_e,tt){S$2(et,function(){_e.apply(this,arguments)},tt)},count:function(et){var _e=0;return S$2(et,function(){_e++}),_e},toArray:function(et){return S$2(et,function(_e){return _e})||[]},only:function(et){if(!O$2(et))throw Error("React.Children.only expected to receive a single React element child.");return et}};react_production_min.Component=E$3;react_production_min.Fragment=p$6;react_production_min.Profiler=r$3;react_production_min.PureComponent=G$3;react_production_min.StrictMode=q$4;react_production_min.Suspense=w$3;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.cloneElement=function(et,_e,tt){if(et==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+et+".");var nt=C$3({},et.props),rt=et.key,it=et.ref,ot=et._owner;if(_e!=null){if(_e.ref!==void 0&&(it=_e.ref,ot=K$2.current),_e.key!==void 0&&(rt=""+_e.key),et.type&&et.type.defaultProps)var st=et.type.defaultProps;for(at in _e)J$1.call(_e,at)&&!L$2.hasOwnProperty(at)&&(nt[at]=_e[at]===void 0&&st!==void 0?st[at]:_e[at])}var at=arguments.length-2;if(at===1)nt.children=tt;else if(1<at){st=Array(at);for(var lt=0;lt<at;lt++)st[lt]=arguments[lt+2];nt.children=st}return{$$typeof:l$4,type:et.type,key:rt,ref:it,props:nt,_owner:ot}};react_production_min.createContext=function(et){return et={$$typeof:u$2,_currentValue:et,_currentValue2:et,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},et.Provider={$$typeof:t$2,_context:et},et.Consumer=et};react_production_min.createElement=M$2;react_production_min.createFactory=function(et){var _e=M$2.bind(null,et);return _e.type=et,_e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(et){return{$$typeof:v$4,render:et}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(et){return{$$typeof:y$3,_payload:{_status:-1,_result:et},_init:T$2}};react_production_min.memo=function(et,_e){return{$$typeof:x$3,type:et,compare:_e===void 0?null:_e}};react_production_min.startTransition=function(et){var _e=V$2.transition;V$2.transition={};try{et()}finally{V$2.transition=_e}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(et,_e){return U$2.current.useCallback(et,_e)};react_production_min.useContext=function(et){return U$2.current.useContext(et)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(et){return U$2.current.useDeferredValue(et)};react_production_min.useEffect=function(et,_e){return U$2.current.useEffect(et,_e)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(et,_e,tt){return U$2.current.useImperativeHandle(et,_e,tt)};react_production_min.useInsertionEffect=function(et,_e){return U$2.current.useInsertionEffect(et,_e)};react_production_min.useLayoutEffect=function(et,_e){return U$2.current.useLayoutEffect(et,_e)};react_production_min.useMemo=function(et,_e){return U$2.current.useMemo(et,_e)};react_production_min.useReducer=function(et,_e,tt){return U$2.current.useReducer(et,_e,tt)};react_production_min.useRef=function(et){return U$2.current.useRef(et)};react_production_min.useState=function(et){return U$2.current.useState(et)};react_production_min.useSyncExternalStore=function(et,_e,tt){return U$2.current.useSyncExternalStore(et,_e,tt)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$3=reactExports,k$3=Symbol.for("react.element"),l$3=Symbol.for("react.fragment"),m$4=Object.prototype.hasOwnProperty,n$3=f$3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$5={key:!0,ref:!0,__self:!0,__source:!0};function q$3(et,_e,tt){var nt,rt={},it=null,ot=null;tt!==void 0&&(it=""+tt),_e.key!==void 0&&(it=""+_e.key),_e.ref!==void 0&&(ot=_e.ref);for(nt in _e)m$4.call(_e,nt)&&!p$5.hasOwnProperty(nt)&&(rt[nt]=_e[nt]);if(et&&et.defaultProps)for(nt in _e=et.defaultProps,_e)rt[nt]===void 0&&(rt[nt]=_e[nt]);return{$$typeof:k$3,type:et,key:it,ref:ot,props:rt,_owner:n$3.current}}reactJsxRuntime_production_min.Fragment=l$3;reactJsxRuntime_production_min.jsx=q$3;reactJsxRuntime_production_min.jsxs=q$3;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(et){function _e(Ot,Lt){var Mt=Ot.length;Ot.push(Lt);e:for(;0<Mt;){var Jt=Mt-1>>>1,qt=Ot[Jt];if(0<rt(qt,Lt))Ot[Jt]=Lt,Ot[Mt]=qt,Mt=Jt;else break e}}function tt(Ot){return Ot.length===0?null:Ot[0]}function nt(Ot){if(Ot.length===0)return null;var Lt=Ot[0],Mt=Ot.pop();if(Mt!==Lt){Ot[0]=Mt;e:for(var Jt=0,qt=Ot.length,on=qt>>>1;Jt<on;){var Kt=2*(Jt+1)-1,Qt=Ot[Kt],sn=Kt+1,hn=Ot[sn];if(0>rt(Qt,Mt))sn<qt&&0>rt(hn,Qt)?(Ot[Jt]=hn,Ot[sn]=Mt,Jt=sn):(Ot[Jt]=Qt,Ot[Kt]=Mt,Jt=Kt);else if(sn<qt&&0>rt(hn,Mt))Ot[Jt]=hn,Ot[sn]=Mt,Jt=sn;else break e}}return Lt}function rt(Ot,Lt){var Mt=Ot.sortIndex-Lt.sortIndex;return Mt!==0?Mt:Ot.id-Lt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var it=performance;et.unstable_now=function(){return it.now()}}else{var ot=Date,st=ot.now();et.unstable_now=function(){return ot.now()-st}}var at=[],lt=[],ct=1,ut=null,dt=3,ft=!1,pt=!1,mt=!1,xt=typeof setTimeout=="function"?setTimeout:null,gt=typeof clearTimeout=="function"?clearTimeout:null,ht=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function yt(Ot){for(var Lt=tt(lt);Lt!==null;){if(Lt.callback===null)nt(lt);else if(Lt.startTime<=Ot)nt(lt),Lt.sortIndex=Lt.expirationTime,_e(at,Lt);else break;Lt=tt(lt)}}function vt(Ot){if(mt=!1,yt(Ot),!pt)if(tt(at)!==null)pt=!0,Ht(_t);else{var Lt=tt(lt);Lt!==null&&tn(vt,Lt.startTime-Ot)}}function _t(Ot,Lt){pt=!1,mt&&(mt=!1,gt(St),St=-1),ft=!0;var Mt=dt;try{for(yt(Lt),ut=tt(at);ut!==null&&(!(ut.expirationTime>Lt)||Ot&&!Nt());){var Jt=ut.callback;if(typeof Jt=="function"){ut.callback=null,dt=ut.priorityLevel;var qt=Jt(ut.expirationTime<=Lt);Lt=et.unstable_now(),typeof qt=="function"?ut.callback=qt:ut===tt(at)&&nt(at),yt(Lt)}else nt(at);ut=tt(at)}if(ut!==null)var on=!0;else{var Kt=tt(lt);Kt!==null&&tn(vt,Kt.startTime-Lt),on=!1}return on}finally{ut=null,dt=Mt,ft=!1}}var Et=!1,bt=null,St=-1,wt=5,Rt=-1;function Nt(){return!(et.unstable_now()-Rt<wt)}function kt(){if(bt!==null){var Ot=et.unstable_now();Rt=Ot;var Lt=!0;try{Lt=bt(!0,Ot)}finally{Lt?Pt():(Et=!1,bt=null)}}else Et=!1}var Pt;if(typeof ht=="function")Pt=function(){ht(kt)};else if(typeof MessageChannel<"u"){var jt=new MessageChannel,Wt=jt.port2;jt.port1.onmessage=kt,Pt=function(){Wt.postMessage(null)}}else Pt=function(){xt(kt,0)};function Ht(Ot){bt=Ot,Et||(Et=!0,Pt())}function tn(Ot,Lt){St=xt(function(){Ot(et.unstable_now())},Lt)}et.unstable_IdlePriority=5,et.unstable_ImmediatePriority=1,et.unstable_LowPriority=4,et.unstable_NormalPriority=3,et.unstable_Profiling=null,et.unstable_UserBlockingPriority=2,et.unstable_cancelCallback=function(Ot){Ot.callback=null},et.unstable_continueExecution=function(){pt||ft||(pt=!0,Ht(_t))},et.unstable_forceFrameRate=function(Ot){0>Ot||125<Ot?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):wt=0<Ot?Math.floor(1e3/Ot):5},et.unstable_getCurrentPriorityLevel=function(){return dt},et.unstable_getFirstCallbackNode=function(){return tt(at)},et.unstable_next=function(Ot){switch(dt){case 1:case 2:case 3:var Lt=3;break;default:Lt=dt}var Mt=dt;dt=Lt;try{return Ot()}finally{dt=Mt}},et.unstable_pauseExecution=function(){},et.unstable_requestPaint=function(){},et.unstable_runWithPriority=function(Ot,Lt){switch(Ot){case 1:case 2:case 3:case 4:case 5:break;default:Ot=3}var Mt=dt;dt=Ot;try{return Lt()}finally{dt=Mt}},et.unstable_scheduleCallback=function(Ot,Lt,Mt){var Jt=et.unstable_now();switch(typeof Mt=="object"&&Mt!==null?(Mt=Mt.delay,Mt=typeof Mt=="number"&&0<Mt?Jt+Mt:Jt):Mt=Jt,Ot){case 1:var qt=-1;break;case 2:qt=250;break;case 5:qt=1073741823;break;case 4:qt=1e4;break;default:qt=5e3}return qt=Mt+qt,Ot={id:ct++,callback:Lt,priorityLevel:Ot,startTime:Mt,expirationTime:qt,sortIndex:-1},Mt>Jt?(Ot.sortIndex=Mt,_e(lt,Ot),tt(at)===null&&Ot===tt(lt)&&(mt?(gt(St),St=-1):mt=!0,tn(vt,Mt-Jt))):(Ot.sortIndex=qt,_e(at,Ot),pt||ft||(pt=!0,Ht(_t))),Ot},et.unstable_shouldYield=Nt,et.unstable_wrapCallback=function(Ot){var Lt=dt;return function(){var Mt=dt;dt=Lt;try{return Ot.apply(this,arguments)}finally{dt=Mt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$4(et){for(var _e="https://reactjs.org/docs/error-decoder.html?invariant="+et,tt=1;tt<arguments.length;tt++)_e+="&args[]="+encodeURIComponent(arguments[tt]);return"Minified React error #"+et+"; visit "+_e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(et,_e){ha(et,_e),ha(et+"Capture",_e)}function ha(et,_e){for(ea[et]=_e,et=0;et<_e.length;et++)da.add(_e[et])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(et){return ja.call(ma,et)?!0:ja.call(la,et)?!1:ka.test(et)?ma[et]=!0:(la[et]=!0,!1)}function pa(et,_e,tt,nt){if(tt!==null&&tt.type===0)return!1;switch(typeof _e){case"function":case"symbol":return!0;case"boolean":return nt?!1:tt!==null?!tt.acceptsBooleans:(et=et.toLowerCase().slice(0,5),et!=="data-"&&et!=="aria-");default:return!1}}function qa(et,_e,tt,nt){if(_e===null||typeof _e>"u"||pa(et,_e,tt,nt))return!0;if(nt)return!1;if(tt!==null)switch(tt.type){case 3:return!_e;case 4:return _e===!1;case 5:return isNaN(_e);case 6:return isNaN(_e)||1>_e}return!1}function v$3(et,_e,tt,nt,rt,it,ot){this.acceptsBooleans=_e===2||_e===3||_e===4,this.attributeName=nt,this.attributeNamespace=rt,this.mustUseProperty=tt,this.propertyName=et,this.type=_e,this.sanitizeURL=it,this.removeEmptyString=ot}var z$3={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(et){z$3[et]=new v$3(et,0,!1,et,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(et){var _e=et[0];z$3[_e]=new v$3(_e,1,!1,et[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(et){z$3[et]=new v$3(et,2,!1,et.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(et){z$3[et]=new v$3(et,2,!1,et,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(et){z$3[et]=new v$3(et,3,!1,et.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(et){z$3[et]=new v$3(et,3,!0,et,null,!1,!1)});["capture","download"].forEach(function(et){z$3[et]=new v$3(et,4,!1,et,null,!1,!1)});["cols","rows","size","span"].forEach(function(et){z$3[et]=new v$3(et,6,!1,et,null,!1,!1)});["rowSpan","start"].forEach(function(et){z$3[et]=new v$3(et,5,!1,et.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(et){return et[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(et){var _e=et.replace(ra,sa);z$3[_e]=new v$3(_e,1,!1,et,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(et){var _e=et.replace(ra,sa);z$3[_e]=new v$3(_e,1,!1,et,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(et){var _e=et.replace(ra,sa);z$3[_e]=new v$3(_e,1,!1,et,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(et){z$3[et]=new v$3(et,1,!1,et.toLowerCase(),null,!1,!1)});z$3.xlinkHref=new v$3("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(et){z$3[et]=new v$3(et,1,!1,et.toLowerCase(),null,!0,!0)});function ta(et,_e,tt,nt){var rt=z$3.hasOwnProperty(_e)?z$3[_e]:null;(rt!==null?rt.type!==0:nt||!(2<_e.length)||_e[0]!=="o"&&_e[0]!=="O"||_e[1]!=="n"&&_e[1]!=="N")&&(qa(_e,tt,rt,nt)&&(tt=null),nt||rt===null?oa(_e)&&(tt===null?et.removeAttribute(_e):et.setAttribute(_e,""+tt)):rt.mustUseProperty?et[rt.propertyName]=tt===null?rt.type===3?!1:"":tt:(_e=rt.attributeName,nt=rt.attributeNamespace,tt===null?et.removeAttribute(_e):(rt=rt.type,tt=rt===3||rt===4&&tt===!0?"":""+tt,nt?et.setAttributeNS(nt,_e,tt):et.setAttribute(_e,tt))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(et){return et===null||typeof et!="object"?null:(et=Ja&&et[Ja]||et["@@iterator"],typeof et=="function"?et:null)}var A$3=Object.assign,La;function Ma(et){if(La===void 0)try{throw Error()}catch(tt){var _e=tt.stack.trim().match(/\n( *(at )?)/);La=_e&&_e[1]||""}return`
`+La+et}var Na=!1;function Oa(et,_e){if(!et||Na)return"";Na=!0;var tt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_e)if(_e=function(){throw Error()},Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(lt){var nt=lt}Reflect.construct(et,[],_e)}else{try{_e.call()}catch(lt){nt=lt}et.call(_e.prototype)}else{try{throw Error()}catch(lt){nt=lt}et()}}catch(lt){if(lt&&nt&&typeof lt.stack=="string"){for(var rt=lt.stack.split(`
`),it=nt.stack.split(`
`),ot=rt.length-1,st=it.length-1;1<=ot&&0<=st&&rt[ot]!==it[st];)st--;for(;1<=ot&&0<=st;ot--,st--)if(rt[ot]!==it[st]){if(ot!==1||st!==1)do if(ot--,st--,0>st||rt[ot]!==it[st]){var at=`
`+rt[ot].replace(" at new "," at ");return et.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",et.displayName)),at}while(1<=ot&&0<=st);break}}}finally{Na=!1,Error.prepareStackTrace=tt}return(et=et?et.displayName||et.name:"")?Ma(et):""}function Pa(et){switch(et.tag){case 5:return Ma(et.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return et=Oa(et.type,!1),et;case 11:return et=Oa(et.type.render,!1),et;case 1:return et=Oa(et.type,!0),et;default:return""}}function Qa(et){if(et==null)return null;if(typeof et=="function")return et.displayName||et.name||null;if(typeof et=="string")return et;switch(et){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof et=="object")switch(et.$$typeof){case Ca:return(et.displayName||"Context")+".Consumer";case Ba:return(et._context.displayName||"Context")+".Provider";case Da:var _e=et.render;return et=et.displayName,et||(et=_e.displayName||_e.name||"",et=et!==""?"ForwardRef("+et+")":"ForwardRef"),et;case Ga:return _e=et.displayName||null,_e!==null?_e:Qa(et.type)||"Memo";case Ha:_e=et._payload,et=et._init;try{return Qa(et(_e))}catch{}}return null}function Ra(et){var _e=et.type;switch(et.tag){case 24:return"Cache";case 9:return(_e.displayName||"Context")+".Consumer";case 10:return(_e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return et=_e.render,et=et.displayName||et.name||"",_e.displayName||(et!==""?"ForwardRef("+et+")":"ForwardRef");case 7:return"Fragment";case 5:return _e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(_e);case 8:return _e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _e=="function")return _e.displayName||_e.name||null;if(typeof _e=="string")return _e}return null}function Sa(et){switch(typeof et){case"boolean":case"number":case"string":case"undefined":return et;case"object":return et;default:return""}}function Ta(et){var _e=et.type;return(et=et.nodeName)&&et.toLowerCase()==="input"&&(_e==="checkbox"||_e==="radio")}function Ua(et){var _e=Ta(et)?"checked":"value",tt=Object.getOwnPropertyDescriptor(et.constructor.prototype,_e),nt=""+et[_e];if(!et.hasOwnProperty(_e)&&typeof tt<"u"&&typeof tt.get=="function"&&typeof tt.set=="function"){var rt=tt.get,it=tt.set;return Object.defineProperty(et,_e,{configurable:!0,get:function(){return rt.call(this)},set:function(ot){nt=""+ot,it.call(this,ot)}}),Object.defineProperty(et,_e,{enumerable:tt.enumerable}),{getValue:function(){return nt},setValue:function(ot){nt=""+ot},stopTracking:function(){et._valueTracker=null,delete et[_e]}}}}function Va(et){et._valueTracker||(et._valueTracker=Ua(et))}function Wa(et){if(!et)return!1;var _e=et._valueTracker;if(!_e)return!0;var tt=_e.getValue(),nt="";return et&&(nt=Ta(et)?et.checked?"true":"false":et.value),et=nt,et!==tt?(_e.setValue(et),!0):!1}function Xa(et){if(et=et||(typeof document<"u"?document:void 0),typeof et>"u")return null;try{return et.activeElement||et.body}catch{return et.body}}function Ya(et,_e){var tt=_e.checked;return A$3({},_e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:tt??et._wrapperState.initialChecked})}function Za(et,_e){var tt=_e.defaultValue==null?"":_e.defaultValue,nt=_e.checked!=null?_e.checked:_e.defaultChecked;tt=Sa(_e.value!=null?_e.value:tt),et._wrapperState={initialChecked:nt,initialValue:tt,controlled:_e.type==="checkbox"||_e.type==="radio"?_e.checked!=null:_e.value!=null}}function ab(et,_e){_e=_e.checked,_e!=null&&ta(et,"checked",_e,!1)}function bb(et,_e){ab(et,_e);var tt=Sa(_e.value),nt=_e.type;if(tt!=null)nt==="number"?(tt===0&&et.value===""||et.value!=tt)&&(et.value=""+tt):et.value!==""+tt&&(et.value=""+tt);else if(nt==="submit"||nt==="reset"){et.removeAttribute("value");return}_e.hasOwnProperty("value")?cb(et,_e.type,tt):_e.hasOwnProperty("defaultValue")&&cb(et,_e.type,Sa(_e.defaultValue)),_e.checked==null&&_e.defaultChecked!=null&&(et.defaultChecked=!!_e.defaultChecked)}function db$1(et,_e,tt){if(_e.hasOwnProperty("value")||_e.hasOwnProperty("defaultValue")){var nt=_e.type;if(!(nt!=="submit"&&nt!=="reset"||_e.value!==void 0&&_e.value!==null))return;_e=""+et._wrapperState.initialValue,tt||_e===et.value||(et.value=_e),et.defaultValue=_e}tt=et.name,tt!==""&&(et.name=""),et.defaultChecked=!!et._wrapperState.initialChecked,tt!==""&&(et.name=tt)}function cb(et,_e,tt){(_e!=="number"||Xa(et.ownerDocument)!==et)&&(tt==null?et.defaultValue=""+et._wrapperState.initialValue:et.defaultValue!==""+tt&&(et.defaultValue=""+tt))}var eb=Array.isArray;function fb(et,_e,tt,nt){if(et=et.options,_e){_e={};for(var rt=0;rt<tt.length;rt++)_e["$"+tt[rt]]=!0;for(tt=0;tt<et.length;tt++)rt=_e.hasOwnProperty("$"+et[tt].value),et[tt].selected!==rt&&(et[tt].selected=rt),rt&&nt&&(et[tt].defaultSelected=!0)}else{for(tt=""+Sa(tt),_e=null,rt=0;rt<et.length;rt++){if(et[rt].value===tt){et[rt].selected=!0,nt&&(et[rt].defaultSelected=!0);return}_e!==null||et[rt].disabled||(_e=et[rt])}_e!==null&&(_e.selected=!0)}}function gb(et,_e){if(_e.dangerouslySetInnerHTML!=null)throw Error(p$4(91));return A$3({},_e,{value:void 0,defaultValue:void 0,children:""+et._wrapperState.initialValue})}function hb(et,_e){var tt=_e.value;if(tt==null){if(tt=_e.children,_e=_e.defaultValue,tt!=null){if(_e!=null)throw Error(p$4(92));if(eb(tt)){if(1<tt.length)throw Error(p$4(93));tt=tt[0]}_e=tt}_e==null&&(_e=""),tt=_e}et._wrapperState={initialValue:Sa(tt)}}function ib(et,_e){var tt=Sa(_e.value),nt=Sa(_e.defaultValue);tt!=null&&(tt=""+tt,tt!==et.value&&(et.value=tt),_e.defaultValue==null&&et.defaultValue!==tt&&(et.defaultValue=tt)),nt!=null&&(et.defaultValue=""+nt)}function jb(et){var _e=et.textContent;_e===et._wrapperState.initialValue&&_e!==""&&_e!==null&&(et.value=_e)}function kb(et){switch(et){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(et,_e){return et==null||et==="http://www.w3.org/1999/xhtml"?kb(_e):et==="http://www.w3.org/2000/svg"&&_e==="foreignObject"?"http://www.w3.org/1999/xhtml":et}var mb,nb=function(et){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_e,tt,nt,rt){MSApp.execUnsafeLocalFunction(function(){return et(_e,tt,nt,rt)})}:et}(function(et,_e){if(et.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in et)et.innerHTML=_e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+_e.valueOf().toString()+"</svg>",_e=mb.firstChild;et.firstChild;)et.removeChild(et.firstChild);for(;_e.firstChild;)et.appendChild(_e.firstChild)}});function ob(et,_e){if(_e){var tt=et.firstChild;if(tt&&tt===et.lastChild&&tt.nodeType===3){tt.nodeValue=_e;return}}et.textContent=_e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(et){qb.forEach(function(_e){_e=_e+et.charAt(0).toUpperCase()+et.substring(1),pb[_e]=pb[et]})});function rb(et,_e,tt){return _e==null||typeof _e=="boolean"||_e===""?"":tt||typeof _e!="number"||_e===0||pb.hasOwnProperty(et)&&pb[et]?(""+_e).trim():_e+"px"}function sb(et,_e){et=et.style;for(var tt in _e)if(_e.hasOwnProperty(tt)){var nt=tt.indexOf("--")===0,rt=rb(tt,_e[tt],nt);tt==="float"&&(tt="cssFloat"),nt?et.setProperty(tt,rt):et[tt]=rt}}var tb=A$3({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(et,_e){if(_e){if(tb[et]&&(_e.children!=null||_e.dangerouslySetInnerHTML!=null))throw Error(p$4(137,et));if(_e.dangerouslySetInnerHTML!=null){if(_e.children!=null)throw Error(p$4(60));if(typeof _e.dangerouslySetInnerHTML!="object"||!("__html"in _e.dangerouslySetInnerHTML))throw Error(p$4(61))}if(_e.style!=null&&typeof _e.style!="object")throw Error(p$4(62))}}function vb(et,_e){if(et.indexOf("-")===-1)return typeof _e.is=="string";switch(et){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(et){return et=et.target||et.srcElement||window,et.correspondingUseElement&&(et=et.correspondingUseElement),et.nodeType===3?et.parentNode:et}var yb=null,zb=null,Ab=null;function Bb(et){if(et=Cb(et)){if(typeof yb!="function")throw Error(p$4(280));var _e=et.stateNode;_e&&(_e=Db(_e),yb(et.stateNode,et.type,_e))}}function Eb(et){zb?Ab?Ab.push(et):Ab=[et]:zb=et}function Fb(){if(zb){var et=zb,_e=Ab;if(Ab=zb=null,Bb(et),_e)for(et=0;et<_e.length;et++)Bb(_e[et])}}function Gb(et,_e){return et(_e)}function Hb(){}var Ib=!1;function Jb(et,_e,tt){if(Ib)return et(_e,tt);Ib=!0;try{return Gb(et,_e,tt)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(et,_e){var tt=et.stateNode;if(tt===null)return null;var nt=Db(tt);if(nt===null)return null;tt=nt[_e];e:switch(_e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(nt=!nt.disabled)||(et=et.type,nt=!(et==="button"||et==="input"||et==="select"||et==="textarea")),et=!nt;break e;default:et=!1}if(et)return null;if(tt&&typeof tt!="function")throw Error(p$4(231,_e,typeof tt));return tt}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(et,_e,tt,nt,rt,it,ot,st,at){var lt=Array.prototype.slice.call(arguments,3);try{_e.apply(tt,lt)}catch(ct){this.onError(ct)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(et){Ob=!0,Pb=et}};function Tb(et,_e,tt,nt,rt,it,ot,st,at){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(et,_e,tt,nt,rt,it,ot,st,at){if(Tb.apply(this,arguments),Ob){if(Ob){var lt=Pb;Ob=!1,Pb=null}else throw Error(p$4(198));Qb||(Qb=!0,Rb=lt)}}function Vb(et){var _e=et,tt=et;if(et.alternate)for(;_e.return;)_e=_e.return;else{et=_e;do _e=et,_e.flags&4098&&(tt=_e.return),et=_e.return;while(et)}return _e.tag===3?tt:null}function Wb(et){if(et.tag===13){var _e=et.memoizedState;if(_e===null&&(et=et.alternate,et!==null&&(_e=et.memoizedState)),_e!==null)return _e.dehydrated}return null}function Xb(et){if(Vb(et)!==et)throw Error(p$4(188))}function Yb(et){var _e=et.alternate;if(!_e){if(_e=Vb(et),_e===null)throw Error(p$4(188));return _e!==et?null:et}for(var tt=et,nt=_e;;){var rt=tt.return;if(rt===null)break;var it=rt.alternate;if(it===null){if(nt=rt.return,nt!==null){tt=nt;continue}break}if(rt.child===it.child){for(it=rt.child;it;){if(it===tt)return Xb(rt),et;if(it===nt)return Xb(rt),_e;it=it.sibling}throw Error(p$4(188))}if(tt.return!==nt.return)tt=rt,nt=it;else{for(var ot=!1,st=rt.child;st;){if(st===tt){ot=!0,tt=rt,nt=it;break}if(st===nt){ot=!0,nt=rt,tt=it;break}st=st.sibling}if(!ot){for(st=it.child;st;){if(st===tt){ot=!0,tt=it,nt=rt;break}if(st===nt){ot=!0,nt=it,tt=rt;break}st=st.sibling}if(!ot)throw Error(p$4(189))}}if(tt.alternate!==nt)throw Error(p$4(190))}if(tt.tag!==3)throw Error(p$4(188));return tt.stateNode.current===tt?et:_e}function Zb(et){return et=Yb(et),et!==null?$b(et):null}function $b(et){if(et.tag===5||et.tag===6)return et;for(et=et.child;et!==null;){var _e=$b(et);if(_e!==null)return _e;et=et.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$2=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(et){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,et,void 0,(et.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(et){return et>>>=0,et===0?32:31-(pc(et)/qc|0)|0}var rc=64,sc=4194304;function tc(et){switch(et&-et){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return et&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return et&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return et}}function uc(et,_e){var tt=et.pendingLanes;if(tt===0)return 0;var nt=0,rt=et.suspendedLanes,it=et.pingedLanes,ot=tt&268435455;if(ot!==0){var st=ot&~rt;st!==0?nt=tc(st):(it&=ot,it!==0&&(nt=tc(it)))}else ot=tt&~rt,ot!==0?nt=tc(ot):it!==0&&(nt=tc(it));if(nt===0)return 0;if(_e!==0&&_e!==nt&&!(_e&rt)&&(rt=nt&-nt,it=_e&-_e,rt>=it||rt===16&&(it&4194240)!==0))return _e;if(nt&4&&(nt|=tt&16),_e=et.entangledLanes,_e!==0)for(et=et.entanglements,_e&=nt;0<_e;)tt=31-oc(_e),rt=1<<tt,nt|=et[tt],_e&=~rt;return nt}function vc(et,_e){switch(et){case 1:case 2:case 4:return _e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(et,_e){for(var tt=et.suspendedLanes,nt=et.pingedLanes,rt=et.expirationTimes,it=et.pendingLanes;0<it;){var ot=31-oc(it),st=1<<ot,at=rt[ot];at===-1?(!(st&tt)||st&nt)&&(rt[ot]=vc(st,_e)):at<=_e&&(et.expiredLanes|=st),it&=~st}}function xc(et){return et=et.pendingLanes&-1073741825,et!==0?et:et&1073741824?1073741824:0}function yc(){var et=rc;return rc<<=1,!(rc&4194240)&&(rc=64),et}function zc(et){for(var _e=[],tt=0;31>tt;tt++)_e.push(et);return _e}function Ac(et,_e,tt){et.pendingLanes|=_e,_e!==536870912&&(et.suspendedLanes=0,et.pingedLanes=0),et=et.eventTimes,_e=31-oc(_e),et[_e]=tt}function Bc(et,_e){var tt=et.pendingLanes&~_e;et.pendingLanes=_e,et.suspendedLanes=0,et.pingedLanes=0,et.expiredLanes&=_e,et.mutableReadLanes&=_e,et.entangledLanes&=_e,_e=et.entanglements;var nt=et.eventTimes;for(et=et.expirationTimes;0<tt;){var rt=31-oc(tt),it=1<<rt;_e[rt]=0,nt[rt]=-1,et[rt]=-1,tt&=~it}}function Cc(et,_e){var tt=et.entangledLanes|=_e;for(et=et.entanglements;tt;){var nt=31-oc(tt),rt=1<<nt;rt&_e|et[nt]&_e&&(et[nt]|=_e),tt&=~rt}}var C$2=0;function Dc(et){return et&=-et,1<et?4<et?et&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(et,_e){switch(et){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(_e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(_e.pointerId)}}function Tc(et,_e,tt,nt,rt,it){return et===null||et.nativeEvent!==it?(et={blockedOn:_e,domEventName:tt,eventSystemFlags:nt,nativeEvent:it,targetContainers:[rt]},_e!==null&&(_e=Cb(_e),_e!==null&&Fc(_e)),et):(et.eventSystemFlags|=nt,_e=et.targetContainers,rt!==null&&_e.indexOf(rt)===-1&&_e.push(rt),et)}function Uc(et,_e,tt,nt,rt){switch(_e){case"focusin":return Lc=Tc(Lc,et,_e,tt,nt,rt),!0;case"dragenter":return Mc=Tc(Mc,et,_e,tt,nt,rt),!0;case"mouseover":return Nc=Tc(Nc,et,_e,tt,nt,rt),!0;case"pointerover":var it=rt.pointerId;return Oc.set(it,Tc(Oc.get(it)||null,et,_e,tt,nt,rt)),!0;case"gotpointercapture":return it=rt.pointerId,Pc.set(it,Tc(Pc.get(it)||null,et,_e,tt,nt,rt)),!0}return!1}function Vc(et){var _e=Wc(et.target);if(_e!==null){var tt=Vb(_e);if(tt!==null){if(_e=tt.tag,_e===13){if(_e=Wb(tt),_e!==null){et.blockedOn=_e,Ic(et.priority,function(){Gc(tt)});return}}else if(_e===3&&tt.stateNode.current.memoizedState.isDehydrated){et.blockedOn=tt.tag===3?tt.stateNode.containerInfo:null;return}}}et.blockedOn=null}function Xc(et){if(et.blockedOn!==null)return!1;for(var _e=et.targetContainers;0<_e.length;){var tt=Yc(et.domEventName,et.eventSystemFlags,_e[0],et.nativeEvent);if(tt===null){tt=et.nativeEvent;var nt=new tt.constructor(tt.type,tt);wb=nt,tt.target.dispatchEvent(nt),wb=null}else return _e=Cb(tt),_e!==null&&Fc(_e),et.blockedOn=tt,!1;_e.shift()}return!0}function Zc(et,_e,tt){Xc(et)&&tt.delete(_e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(et,_e){et.blockedOn===_e&&(et.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(et){function _e(rt){return ad(rt,et)}if(0<Kc.length){ad(Kc[0],et);for(var tt=1;tt<Kc.length;tt++){var nt=Kc[tt];nt.blockedOn===et&&(nt.blockedOn=null)}}for(Lc!==null&&ad(Lc,et),Mc!==null&&ad(Mc,et),Nc!==null&&ad(Nc,et),Oc.forEach(_e),Pc.forEach(_e),tt=0;tt<Qc.length;tt++)nt=Qc[tt],nt.blockedOn===et&&(nt.blockedOn=null);for(;0<Qc.length&&(tt=Qc[0],tt.blockedOn===null);)Vc(tt),tt.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(et,_e,tt,nt){var rt=C$2,it=cd.transition;cd.transition=null;try{C$2=1,fd(et,_e,tt,nt)}finally{C$2=rt,cd.transition=it}}function gd(et,_e,tt,nt){var rt=C$2,it=cd.transition;cd.transition=null;try{C$2=4,fd(et,_e,tt,nt)}finally{C$2=rt,cd.transition=it}}function fd(et,_e,tt,nt){if(dd){var rt=Yc(et,_e,tt,nt);if(rt===null)hd(et,_e,nt,id,tt),Sc(et,nt);else if(Uc(rt,et,_e,tt,nt))nt.stopPropagation();else if(Sc(et,nt),_e&4&&-1<Rc.indexOf(et)){for(;rt!==null;){var it=Cb(rt);if(it!==null&&Ec(it),it=Yc(et,_e,tt,nt),it===null&&hd(et,_e,nt,id,tt),it===rt)break;rt=it}rt!==null&&nt.stopPropagation()}else hd(et,_e,nt,null,tt)}}var id=null;function Yc(et,_e,tt,nt){if(id=null,et=xb(nt),et=Wc(et),et!==null)if(_e=Vb(et),_e===null)et=null;else if(tt=_e.tag,tt===13){if(et=Wb(_e),et!==null)return et;et=null}else if(tt===3){if(_e.stateNode.current.memoizedState.isDehydrated)return _e.tag===3?_e.stateNode.containerInfo:null;et=null}else _e!==et&&(et=null);return id=et,null}function jd(et){switch(et){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var et,_e=ld,tt=_e.length,nt,rt="value"in kd?kd.value:kd.textContent,it=rt.length;for(et=0;et<tt&&_e[et]===rt[et];et++);var ot=tt-et;for(nt=1;nt<=ot&&_e[tt-nt]===rt[it-nt];nt++);return md=rt.slice(et,1<nt?1-nt:void 0)}function od(et){var _e=et.keyCode;return"charCode"in et?(et=et.charCode,et===0&&_e===13&&(et=13)):et=_e,et===10&&(et=13),32<=et||et===13?et:0}function pd(){return!0}function qd(){return!1}function rd(et){function _e(tt,nt,rt,it,ot){this._reactName=tt,this._targetInst=rt,this.type=nt,this.nativeEvent=it,this.target=ot,this.currentTarget=null;for(var st in et)et.hasOwnProperty(st)&&(tt=et[st],this[st]=tt?tt(it):it[st]);return this.isDefaultPrevented=(it.defaultPrevented!=null?it.defaultPrevented:it.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$3(_e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var tt=this.nativeEvent;tt&&(tt.preventDefault?tt.preventDefault():typeof tt.returnValue!="unknown"&&(tt.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var tt=this.nativeEvent;tt&&(tt.stopPropagation?tt.stopPropagation():typeof tt.cancelBubble!="unknown"&&(tt.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),_e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(et){return et.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$3({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$3({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(et){return et.relatedTarget===void 0?et.fromElement===et.srcElement?et.toElement:et.fromElement:et.relatedTarget},movementX:function(et){return"movementX"in et?et.movementX:(et!==yd&&(yd&&et.type==="mousemove"?(wd=et.screenX-yd.screenX,xd=et.screenY-yd.screenY):xd=wd=0,yd=et),wd)},movementY:function(et){return"movementY"in et?et.movementY:xd}}),Bd=rd(Ad),Cd=A$3({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$3({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$3({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$3({},sd,{clipboardData:function(et){return"clipboardData"in et?et.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$3({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(et){var _e=this.nativeEvent;return _e.getModifierState?_e.getModifierState(et):(et=Od[et])?!!_e[et]:!1}function zd(){return Pd}var Qd=A$3({},ud,{key:function(et){if(et.key){var _e=Md[et.key]||et.key;if(_e!=="Unidentified")return _e}return et.type==="keypress"?(et=od(et),et===13?"Enter":String.fromCharCode(et)):et.type==="keydown"||et.type==="keyup"?Nd[et.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(et){return et.type==="keypress"?od(et):0},keyCode:function(et){return et.type==="keydown"||et.type==="keyup"?et.keyCode:0},which:function(et){return et.type==="keypress"?od(et):et.type==="keydown"||et.type==="keyup"?et.keyCode:0}}),Rd=rd(Qd),Sd=A$3({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$3({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$3({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$3({},Ad,{deltaX:function(et){return"deltaX"in et?et.deltaX:"wheelDeltaX"in et?-et.wheelDeltaX:0},deltaY:function(et){return"deltaY"in et?et.deltaY:"wheelDeltaY"in et?-et.wheelDeltaY:"wheelDelta"in et?-et.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be,de=ia&&(!ae$1||be&&8<be&&11>=be),ee$1=" ",fe$1=!1;function ge(et,_e){switch(et){case"keyup":return $d.indexOf(_e.keyCode)!==-1;case"keydown":return _e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(et){return et=et.detail,typeof et=="object"&&"data"in et?et.data:null}var ie$1=!1;function je(et,_e){switch(et){case"compositionend":return he$1(_e);case"keypress":return _e.which!==32?null:(fe$1=!0,ee$1);case"textInput":return et=_e.data,et===ee$1&&fe$1?null:et;default:return null}}function ke(et,_e){if(ie$1)return et==="compositionend"||!ae$1&&ge(et,_e)?(et=nd(),md=ld=kd=null,ie$1=!1,et):null;switch(et){case"paste":return null;case"keypress":if(!(_e.ctrlKey||_e.altKey||_e.metaKey)||_e.ctrlKey&&_e.altKey){if(_e.char&&1<_e.char.length)return _e.char;if(_e.which)return String.fromCharCode(_e.which)}return null;case"compositionend":return de&&_e.locale!=="ko"?null:_e.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(et){var _e=et&&et.nodeName&&et.nodeName.toLowerCase();return _e==="input"?!!le$1[et.type]:_e==="textarea"}function ne$1(et,_e,tt,nt){Eb(nt),_e=oe$1(_e,"onChange"),0<_e.length&&(tt=new td("onChange","change",null,tt,nt),et.push({event:tt,listeners:_e}))}var pe$1=null,qe=null;function re$1(et){se$1(et,0)}function te$1(et){var _e=ue$1(et);if(Wa(_e))return et}function ve(et,_e){if(et==="change")return _e}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe$1&&(pe$1.detachEvent("onpropertychange",Be),qe=pe$1=null)}function Be(et){if(et.propertyName==="value"&&te$1(qe)){var _e=[];ne$1(_e,qe,et,xb(et)),Jb(re$1,_e)}}function Ce(et,_e,tt){et==="focusin"?(Ae(),pe$1=_e,qe=tt,pe$1.attachEvent("onpropertychange",Be)):et==="focusout"&&Ae()}function De(et){if(et==="selectionchange"||et==="keyup"||et==="keydown")return te$1(qe)}function Ee(et,_e){if(et==="click")return te$1(_e)}function Fe(et,_e){if(et==="input"||et==="change")return te$1(_e)}function Ge(et,_e){return et===_e&&(et!==0||1/et===1/_e)||et!==et&&_e!==_e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(et,_e){if(He(et,_e))return!0;if(typeof et!="object"||et===null||typeof _e!="object"||_e===null)return!1;var tt=Object.keys(et),nt=Object.keys(_e);if(tt.length!==nt.length)return!1;for(nt=0;nt<tt.length;nt++){var rt=tt[nt];if(!ja.call(_e,rt)||!He(et[rt],_e[rt]))return!1}return!0}function Je(et){for(;et&&et.firstChild;)et=et.firstChild;return et}function Ke(et,_e){var tt=Je(et);et=0;for(var nt;tt;){if(tt.nodeType===3){if(nt=et+tt.textContent.length,et<=_e&&nt>=_e)return{node:tt,offset:_e-et};et=nt}e:{for(;tt;){if(tt.nextSibling){tt=tt.nextSibling;break e}tt=tt.parentNode}tt=void 0}tt=Je(tt)}}function Le(et,_e){return et&&_e?et===_e?!0:et&&et.nodeType===3?!1:_e&&_e.nodeType===3?Le(et,_e.parentNode):"contains"in et?et.contains(_e):et.compareDocumentPosition?!!(et.compareDocumentPosition(_e)&16):!1:!1}function Me(){for(var et=window,_e=Xa();_e instanceof et.HTMLIFrameElement;){try{var tt=typeof _e.contentWindow.location.href=="string"}catch{tt=!1}if(tt)et=_e.contentWindow;else break;_e=Xa(et.document)}return _e}function Ne(et){var _e=et&&et.nodeName&&et.nodeName.toLowerCase();return _e&&(_e==="input"&&(et.type==="text"||et.type==="search"||et.type==="tel"||et.type==="url"||et.type==="password")||_e==="textarea"||et.contentEditable==="true")}function Oe(et){var _e=Me(),tt=et.focusedElem,nt=et.selectionRange;if(_e!==tt&&tt&&tt.ownerDocument&&Le(tt.ownerDocument.documentElement,tt)){if(nt!==null&&Ne(tt)){if(_e=nt.start,et=nt.end,et===void 0&&(et=_e),"selectionStart"in tt)tt.selectionStart=_e,tt.selectionEnd=Math.min(et,tt.value.length);else if(et=(_e=tt.ownerDocument||document)&&_e.defaultView||window,et.getSelection){et=et.getSelection();var rt=tt.textContent.length,it=Math.min(nt.start,rt);nt=nt.end===void 0?it:Math.min(nt.end,rt),!et.extend&&it>nt&&(rt=nt,nt=it,it=rt),rt=Ke(tt,it);var ot=Ke(tt,nt);rt&&ot&&(et.rangeCount!==1||et.anchorNode!==rt.node||et.anchorOffset!==rt.offset||et.focusNode!==ot.node||et.focusOffset!==ot.offset)&&(_e=_e.createRange(),_e.setStart(rt.node,rt.offset),et.removeAllRanges(),it>nt?(et.addRange(_e),et.extend(ot.node,ot.offset)):(_e.setEnd(ot.node,ot.offset),et.addRange(_e)))}}for(_e=[],et=tt;et=et.parentNode;)et.nodeType===1&&_e.push({element:et,left:et.scrollLeft,top:et.scrollTop});for(typeof tt.focus=="function"&&tt.focus(),tt=0;tt<_e.length;tt++)et=_e[tt],et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(et,_e,tt){var nt=tt.window===tt?tt.document:tt.nodeType===9?tt:tt.ownerDocument;Te||Qe==null||Qe!==Xa(nt)||(nt=Qe,"selectionStart"in nt&&Ne(nt)?nt={start:nt.selectionStart,end:nt.selectionEnd}:(nt=(nt.ownerDocument&&nt.ownerDocument.defaultView||window).getSelection(),nt={anchorNode:nt.anchorNode,anchorOffset:nt.anchorOffset,focusNode:nt.focusNode,focusOffset:nt.focusOffset}),Se&&Ie(Se,nt)||(Se=nt,nt=oe$1(Re,"onSelect"),0<nt.length&&(_e=new td("onSelect","select",null,_e,tt),et.push({event:_e,listeners:nt}),_e.target=Qe)))}function Ve(et,_e){var tt={};return tt[et.toLowerCase()]=_e.toLowerCase(),tt["Webkit"+et]="webkit"+_e,tt["Moz"+et]="moz"+_e,tt}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(et){if(Xe[et])return Xe[et];if(!We[et])return et;var _e=We[et],tt;for(tt in _e)if(_e.hasOwnProperty(tt)&&tt in Ye)return Xe[et]=_e[tt];return et}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(et,_e){df.set(et,_e),fa(_e,[et])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(et,_e,tt){var nt=et.type||"unknown-event";et.currentTarget=tt,Ub(nt,_e,void 0,et),et.currentTarget=null}function se$1(et,_e){_e=(_e&4)!==0;for(var tt=0;tt<et.length;tt++){var nt=et[tt],rt=nt.event;nt=nt.listeners;e:{var it=void 0;if(_e)for(var ot=nt.length-1;0<=ot;ot--){var st=nt[ot],at=st.instance,lt=st.currentTarget;if(st=st.listener,at!==it&&rt.isPropagationStopped())break e;nf(rt,st,lt),it=at}else for(ot=0;ot<nt.length;ot++){if(st=nt[ot],at=st.instance,lt=st.currentTarget,st=st.listener,at!==it&&rt.isPropagationStopped())break e;nf(rt,st,lt),it=at}}}if(Qb)throw et=Rb,Qb=!1,Rb=null,et}function D$2(et,_e){var tt=_e[of];tt===void 0&&(tt=_e[of]=new Set);var nt=et+"__bubble";tt.has(nt)||(pf(_e,et,2,!1),tt.add(nt))}function qf(et,_e,tt){var nt=0;_e&&(nt|=4),pf(tt,et,nt,_e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(et){if(!et[rf]){et[rf]=!0,da.forEach(function(tt){tt!=="selectionchange"&&(mf.has(tt)||qf(tt,!1,et),qf(tt,!0,et))});var _e=et.nodeType===9?et:et.ownerDocument;_e===null||_e[rf]||(_e[rf]=!0,qf("selectionchange",!1,_e))}}function pf(et,_e,tt,nt){switch(jd(_e)){case 1:var rt=ed;break;case 4:rt=gd;break;default:rt=fd}tt=rt.bind(null,_e,tt,et),rt=void 0,!Lb||_e!=="touchstart"&&_e!=="touchmove"&&_e!=="wheel"||(rt=!0),nt?rt!==void 0?et.addEventListener(_e,tt,{capture:!0,passive:rt}):et.addEventListener(_e,tt,!0):rt!==void 0?et.addEventListener(_e,tt,{passive:rt}):et.addEventListener(_e,tt,!1)}function hd(et,_e,tt,nt,rt){var it=nt;if(!(_e&1)&&!(_e&2)&&nt!==null)e:for(;;){if(nt===null)return;var ot=nt.tag;if(ot===3||ot===4){var st=nt.stateNode.containerInfo;if(st===rt||st.nodeType===8&&st.parentNode===rt)break;if(ot===4)for(ot=nt.return;ot!==null;){var at=ot.tag;if((at===3||at===4)&&(at=ot.stateNode.containerInfo,at===rt||at.nodeType===8&&at.parentNode===rt))return;ot=ot.return}for(;st!==null;){if(ot=Wc(st),ot===null)return;if(at=ot.tag,at===5||at===6){nt=it=ot;continue e}st=st.parentNode}}nt=nt.return}Jb(function(){var lt=it,ct=xb(tt),ut=[];e:{var dt=df.get(et);if(dt!==void 0){var ft=td,pt=et;switch(et){case"keypress":if(od(tt)===0)break e;case"keydown":case"keyup":ft=Rd;break;case"focusin":pt="focus",ft=Fd;break;case"focusout":pt="blur",ft=Fd;break;case"beforeblur":case"afterblur":ft=Fd;break;case"click":if(tt.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=Vd;break;case $e:case af:case bf:ft=Hd;break;case cf:ft=Xd;break;case"scroll":ft=vd;break;case"wheel":ft=Zd;break;case"copy":case"cut":case"paste":ft=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=Td}var mt=(_e&4)!==0,xt=!mt&&et==="scroll",gt=mt?dt!==null?dt+"Capture":null:dt;mt=[];for(var ht=lt,yt;ht!==null;){yt=ht;var vt=yt.stateNode;if(yt.tag===5&&vt!==null&&(yt=vt,gt!==null&&(vt=Kb(ht,gt),vt!=null&&mt.push(tf(ht,vt,yt)))),xt)break;ht=ht.return}0<mt.length&&(dt=new ft(dt,pt,null,tt,ct),ut.push({event:dt,listeners:mt}))}}if(!(_e&7)){e:{if(dt=et==="mouseover"||et==="pointerover",ft=et==="mouseout"||et==="pointerout",dt&&tt!==wb&&(pt=tt.relatedTarget||tt.fromElement)&&(Wc(pt)||pt[uf]))break e;if((ft||dt)&&(dt=ct.window===ct?ct:(dt=ct.ownerDocument)?dt.defaultView||dt.parentWindow:window,ft?(pt=tt.relatedTarget||tt.toElement,ft=lt,pt=pt?Wc(pt):null,pt!==null&&(xt=Vb(pt),pt!==xt||pt.tag!==5&&pt.tag!==6)&&(pt=null)):(ft=null,pt=lt),ft!==pt)){if(mt=Bd,vt="onMouseLeave",gt="onMouseEnter",ht="mouse",(et==="pointerout"||et==="pointerover")&&(mt=Td,vt="onPointerLeave",gt="onPointerEnter",ht="pointer"),xt=ft==null?dt:ue$1(ft),yt=pt==null?dt:ue$1(pt),dt=new mt(vt,ht+"leave",ft,tt,ct),dt.target=xt,dt.relatedTarget=yt,vt=null,Wc(ct)===lt&&(mt=new mt(gt,ht+"enter",pt,tt,ct),mt.target=yt,mt.relatedTarget=xt,vt=mt),xt=vt,ft&&pt)t:{for(mt=ft,gt=pt,ht=0,yt=mt;yt;yt=vf(yt))ht++;for(yt=0,vt=gt;vt;vt=vf(vt))yt++;for(;0<ht-yt;)mt=vf(mt),ht--;for(;0<yt-ht;)gt=vf(gt),yt--;for(;ht--;){if(mt===gt||gt!==null&&mt===gt.alternate)break t;mt=vf(mt),gt=vf(gt)}mt=null}else mt=null;ft!==null&&wf(ut,dt,ft,mt,!1),pt!==null&&xt!==null&&wf(ut,xt,pt,mt,!0)}}e:{if(dt=lt?ue$1(lt):window,ft=dt.nodeName&&dt.nodeName.toLowerCase(),ft==="select"||ft==="input"&&dt.type==="file")var _t=ve;else if(me(dt))if(we)_t=Fe;else{_t=De;var Et=Ce}else(ft=dt.nodeName)&&ft.toLowerCase()==="input"&&(dt.type==="checkbox"||dt.type==="radio")&&(_t=Ee);if(_t&&(_t=_t(et,lt))){ne$1(ut,_t,tt,ct);break e}Et&&Et(et,dt,lt),et==="focusout"&&(Et=dt._wrapperState)&&Et.controlled&&dt.type==="number"&&cb(dt,"number",dt.value)}switch(Et=lt?ue$1(lt):window,et){case"focusin":(me(Et)||Et.contentEditable==="true")&&(Qe=Et,Re=lt,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(ut,tt,ct);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(ut,tt,ct)}var bt;if(ae$1)e:{switch(et){case"compositionstart":var St="onCompositionStart";break e;case"compositionend":St="onCompositionEnd";break e;case"compositionupdate":St="onCompositionUpdate";break e}St=void 0}else ie$1?ge(et,tt)&&(St="onCompositionEnd"):et==="keydown"&&tt.keyCode===229&&(St="onCompositionStart");St&&(de&&tt.locale!=="ko"&&(ie$1||St!=="onCompositionStart"?St==="onCompositionEnd"&&ie$1&&(bt=nd()):(kd=ct,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),Et=oe$1(lt,St),0<Et.length&&(St=new Ld(St,et,null,tt,ct),ut.push({event:St,listeners:Et}),bt?St.data=bt:(bt=he$1(tt),bt!==null&&(St.data=bt)))),(bt=ce$1?je(et,tt):ke(et,tt))&&(lt=oe$1(lt,"onBeforeInput"),0<lt.length&&(ct=new Ld("onBeforeInput","beforeinput",null,tt,ct),ut.push({event:ct,listeners:lt}),ct.data=bt))}se$1(ut,_e)})}function tf(et,_e,tt){return{instance:et,listener:_e,currentTarget:tt}}function oe$1(et,_e){for(var tt=_e+"Capture",nt=[];et!==null;){var rt=et,it=rt.stateNode;rt.tag===5&&it!==null&&(rt=it,it=Kb(et,tt),it!=null&&nt.unshift(tf(et,it,rt)),it=Kb(et,_e),it!=null&&nt.push(tf(et,it,rt))),et=et.return}return nt}function vf(et){if(et===null)return null;do et=et.return;while(et&&et.tag!==5);return et||null}function wf(et,_e,tt,nt,rt){for(var it=_e._reactName,ot=[];tt!==null&&tt!==nt;){var st=tt,at=st.alternate,lt=st.stateNode;if(at!==null&&at===nt)break;st.tag===5&&lt!==null&&(st=lt,rt?(at=Kb(tt,it),at!=null&&ot.unshift(tf(tt,at,st))):rt||(at=Kb(tt,it),at!=null&&ot.push(tf(tt,at,st)))),tt=tt.return}ot.length!==0&&et.push({event:_e,listeners:ot})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(et){return(typeof et=="string"?et:""+et).replace(xf,`
`).replace(yf,"")}function Af(et,_e,tt){if(_e=zf(_e),zf(et)!==_e&&tt)throw Error(p$4(425))}function Bf(){}var Cf=null,Df=null;function Ef(et,_e){return et==="textarea"||et==="noscript"||typeof _e.children=="string"||typeof _e.children=="number"||typeof _e.dangerouslySetInnerHTML=="object"&&_e.dangerouslySetInnerHTML!==null&&_e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(et){return Hf.resolve(null).then(et).catch(If)}:Ff;function If(et){setTimeout(function(){throw et})}function Kf(et,_e){var tt=_e,nt=0;do{var rt=tt.nextSibling;if(et.removeChild(tt),rt&&rt.nodeType===8)if(tt=rt.data,tt==="/$"){if(nt===0){et.removeChild(rt),bd(_e);return}nt--}else tt!=="$"&&tt!=="$?"&&tt!=="$!"||nt++;tt=rt}while(tt);bd(_e)}function Lf(et){for(;et!=null;et=et.nextSibling){var _e=et.nodeType;if(_e===1||_e===3)break;if(_e===8){if(_e=et.data,_e==="$"||_e==="$!"||_e==="$?")break;if(_e==="/$")return null}}return et}function Mf(et){et=et.previousSibling;for(var _e=0;et;){if(et.nodeType===8){var tt=et.data;if(tt==="$"||tt==="$!"||tt==="$?"){if(_e===0)return et;_e--}else tt==="/$"&&_e++}et=et.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(et){var _e=et[Of];if(_e)return _e;for(var tt=et.parentNode;tt;){if(_e=tt[uf]||tt[Of]){if(tt=_e.alternate,_e.child!==null||tt!==null&&tt.child!==null)for(et=Mf(et);et!==null;){if(tt=et[Of])return tt;et=Mf(et)}return _e}et=tt,tt=et.parentNode}return null}function Cb(et){return et=et[Of]||et[uf],!et||et.tag!==5&&et.tag!==6&&et.tag!==13&&et.tag!==3?null:et}function ue$1(et){if(et.tag===5||et.tag===6)return et.stateNode;throw Error(p$4(33))}function Db(et){return et[Pf]||null}var Sf=[],Tf=-1;function Uf(et){return{current:et}}function E$2(et){0>Tf||(et.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$2(et,_e){Tf++,Sf[Tf]=et.current,et.current=_e}var Vf={},H$2=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(et,_e){var tt=et.type.contextTypes;if(!tt)return Vf;var nt=et.stateNode;if(nt&&nt.__reactInternalMemoizedUnmaskedChildContext===_e)return nt.__reactInternalMemoizedMaskedChildContext;var rt={},it;for(it in tt)rt[it]=_e[it];return nt&&(et=et.stateNode,et.__reactInternalMemoizedUnmaskedChildContext=_e,et.__reactInternalMemoizedMaskedChildContext=rt),rt}function Zf(et){return et=et.childContextTypes,et!=null}function $f(){E$2(Wf),E$2(H$2)}function ag(et,_e,tt){if(H$2.current!==Vf)throw Error(p$4(168));G$2(H$2,_e),G$2(Wf,tt)}function bg(et,_e,tt){var nt=et.stateNode;if(_e=_e.childContextTypes,typeof nt.getChildContext!="function")return tt;nt=nt.getChildContext();for(var rt in nt)if(!(rt in _e))throw Error(p$4(108,Ra(et)||"Unknown",rt));return A$3({},tt,nt)}function cg(et){return et=(et=et.stateNode)&&et.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$2.current,G$2(H$2,et),G$2(Wf,Wf.current),!0}function dg(et,_e,tt){var nt=et.stateNode;if(!nt)throw Error(p$4(169));tt?(et=bg(et,_e,Xf),nt.__reactInternalMemoizedMergedChildContext=et,E$2(Wf),E$2(H$2),G$2(H$2,et)):E$2(Wf),G$2(Wf,tt)}var eg=null,fg=!1,gg=!1;function hg(et){eg===null?eg=[et]:eg.push(et)}function ig(et){fg=!0,hg(et)}function jg(){if(!gg&&eg!==null){gg=!0;var et=0,_e=C$2;try{var tt=eg;for(C$2=1;et<tt.length;et++){var nt=tt[et];do nt=nt(!0);while(nt!==null)}eg=null,fg=!1}catch(rt){throw eg!==null&&(eg=eg.slice(et+1)),ac(fc,jg),rt}finally{C$2=_e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(et,_e){kg[lg++]=ng,kg[lg++]=mg,mg=et,ng=_e}function ug(et,_e,tt){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=et;var nt=rg;et=sg;var rt=32-oc(nt)-1;nt&=~(1<<rt),tt+=1;var it=32-oc(_e)+rt;if(30<it){var ot=rt-rt%5;it=(nt&(1<<ot)-1).toString(32),nt>>=ot,rt-=ot,rg=1<<32-oc(_e)+rt|tt<<rt|nt,sg=it+et}else rg=1<<it|tt<<rt|nt,sg=et}function vg(et){et.return!==null&&(tg(et,1),ug(et,1,0))}function wg(et){for(;et===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;et===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$2=!1,zg=null;function Ag(et,_e){var tt=Bg(5,null,null,0);tt.elementType="DELETED",tt.stateNode=_e,tt.return=et,_e=et.deletions,_e===null?(et.deletions=[tt],et.flags|=16):_e.push(tt)}function Cg(et,_e){switch(et.tag){case 5:var tt=et.type;return _e=_e.nodeType!==1||tt.toLowerCase()!==_e.nodeName.toLowerCase()?null:_e,_e!==null?(et.stateNode=_e,xg=et,yg=Lf(_e.firstChild),!0):!1;case 6:return _e=et.pendingProps===""||_e.nodeType!==3?null:_e,_e!==null?(et.stateNode=_e,xg=et,yg=null,!0):!1;case 13:return _e=_e.nodeType!==8?null:_e,_e!==null?(tt=qg!==null?{id:rg,overflow:sg}:null,et.memoizedState={dehydrated:_e,treeContext:tt,retryLane:1073741824},tt=Bg(18,null,null,0),tt.stateNode=_e,tt.return=et,et.child=tt,xg=et,yg=null,!0):!1;default:return!1}}function Dg(et){return(et.mode&1)!==0&&(et.flags&128)===0}function Eg(et){if(I$2){var _e=yg;if(_e){var tt=_e;if(!Cg(et,_e)){if(Dg(et))throw Error(p$4(418));_e=Lf(tt.nextSibling);var nt=xg;_e&&Cg(et,_e)?Ag(nt,tt):(et.flags=et.flags&-4097|2,I$2=!1,xg=et)}}else{if(Dg(et))throw Error(p$4(418));et.flags=et.flags&-4097|2,I$2=!1,xg=et}}}function Fg(et){for(et=et.return;et!==null&&et.tag!==5&&et.tag!==3&&et.tag!==13;)et=et.return;xg=et}function Gg(et){if(et!==xg)return!1;if(!I$2)return Fg(et),I$2=!0,!1;var _e;if((_e=et.tag!==3)&&!(_e=et.tag!==5)&&(_e=et.type,_e=_e!=="head"&&_e!=="body"&&!Ef(et.type,et.memoizedProps)),_e&&(_e=yg)){if(Dg(et))throw Hg(),Error(p$4(418));for(;_e;)Ag(et,_e),_e=Lf(_e.nextSibling)}if(Fg(et),et.tag===13){if(et=et.memoizedState,et=et!==null?et.dehydrated:null,!et)throw Error(p$4(317));e:{for(et=et.nextSibling,_e=0;et;){if(et.nodeType===8){var tt=et.data;if(tt==="/$"){if(_e===0){yg=Lf(et.nextSibling);break e}_e--}else tt!=="$"&&tt!=="$!"&&tt!=="$?"||_e++}et=et.nextSibling}yg=null}}else yg=xg?Lf(et.stateNode.nextSibling):null;return!0}function Hg(){for(var et=yg;et;)et=Lf(et.nextSibling)}function Ig(){yg=xg=null,I$2=!1}function Jg(et){zg===null?zg=[et]:zg.push(et)}var Kg=ua.ReactCurrentBatchConfig;function Lg(et,_e){if(et&&et.defaultProps){_e=A$3({},_e),et=et.defaultProps;for(var tt in et)_e[tt]===void 0&&(_e[tt]=et[tt]);return _e}return _e}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(et){var _e=Mg.current;E$2(Mg),et._currentValue=_e}function Sg(et,_e,tt){for(;et!==null;){var nt=et.alternate;if((et.childLanes&_e)!==_e?(et.childLanes|=_e,nt!==null&&(nt.childLanes|=_e)):nt!==null&&(nt.childLanes&_e)!==_e&&(nt.childLanes|=_e),et===tt)break;et=et.return}}function Tg(et,_e){Ng=et,Pg=Og=null,et=et.dependencies,et!==null&&et.firstContext!==null&&(et.lanes&_e&&(Ug=!0),et.firstContext=null)}function Vg(et){var _e=et._currentValue;if(Pg!==et)if(et={context:et,memoizedValue:_e,next:null},Og===null){if(Ng===null)throw Error(p$4(308));Og=et,Ng.dependencies={lanes:0,firstContext:et}}else Og=Og.next=et;return _e}var Wg=null;function Xg(et){Wg===null?Wg=[et]:Wg.push(et)}function Yg(et,_e,tt,nt){var rt=_e.interleaved;return rt===null?(tt.next=tt,Xg(_e)):(tt.next=rt.next,rt.next=tt),_e.interleaved=tt,Zg(et,nt)}function Zg(et,_e){et.lanes|=_e;var tt=et.alternate;for(tt!==null&&(tt.lanes|=_e),tt=et,et=et.return;et!==null;)et.childLanes|=_e,tt=et.alternate,tt!==null&&(tt.childLanes|=_e),tt=et,et=et.return;return tt.tag===3?tt.stateNode:null}var $g=!1;function ah(et){et.updateQueue={baseState:et.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(et,_e){et=et.updateQueue,_e.updateQueue===et&&(_e.updateQueue={baseState:et.baseState,firstBaseUpdate:et.firstBaseUpdate,lastBaseUpdate:et.lastBaseUpdate,shared:et.shared,effects:et.effects})}function ch(et,_e){return{eventTime:et,lane:_e,tag:0,payload:null,callback:null,next:null}}function dh(et,_e,tt){var nt=et.updateQueue;if(nt===null)return null;if(nt=nt.shared,K$1&2){var rt=nt.pending;return rt===null?_e.next=_e:(_e.next=rt.next,rt.next=_e),nt.pending=_e,Zg(et,tt)}return rt=nt.interleaved,rt===null?(_e.next=_e,Xg(nt)):(_e.next=rt.next,rt.next=_e),nt.interleaved=_e,Zg(et,tt)}function eh(et,_e,tt){if(_e=_e.updateQueue,_e!==null&&(_e=_e.shared,(tt&4194240)!==0)){var nt=_e.lanes;nt&=et.pendingLanes,tt|=nt,_e.lanes=tt,Cc(et,tt)}}function fh(et,_e){var tt=et.updateQueue,nt=et.alternate;if(nt!==null&&(nt=nt.updateQueue,tt===nt)){var rt=null,it=null;if(tt=tt.firstBaseUpdate,tt!==null){do{var ot={eventTime:tt.eventTime,lane:tt.lane,tag:tt.tag,payload:tt.payload,callback:tt.callback,next:null};it===null?rt=it=ot:it=it.next=ot,tt=tt.next}while(tt!==null);it===null?rt=it=_e:it=it.next=_e}else rt=it=_e;tt={baseState:nt.baseState,firstBaseUpdate:rt,lastBaseUpdate:it,shared:nt.shared,effects:nt.effects},et.updateQueue=tt;return}et=tt.lastBaseUpdate,et===null?tt.firstBaseUpdate=_e:et.next=_e,tt.lastBaseUpdate=_e}function gh(et,_e,tt,nt){var rt=et.updateQueue;$g=!1;var it=rt.firstBaseUpdate,ot=rt.lastBaseUpdate,st=rt.shared.pending;if(st!==null){rt.shared.pending=null;var at=st,lt=at.next;at.next=null,ot===null?it=lt:ot.next=lt,ot=at;var ct=et.alternate;ct!==null&&(ct=ct.updateQueue,st=ct.lastBaseUpdate,st!==ot&&(st===null?ct.firstBaseUpdate=lt:st.next=lt,ct.lastBaseUpdate=at))}if(it!==null){var ut=rt.baseState;ot=0,ct=lt=at=null,st=it;do{var dt=st.lane,ft=st.eventTime;if((nt&dt)===dt){ct!==null&&(ct=ct.next={eventTime:ft,lane:0,tag:st.tag,payload:st.payload,callback:st.callback,next:null});e:{var pt=et,mt=st;switch(dt=_e,ft=tt,mt.tag){case 1:if(pt=mt.payload,typeof pt=="function"){ut=pt.call(ft,ut,dt);break e}ut=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=mt.payload,dt=typeof pt=="function"?pt.call(ft,ut,dt):pt,dt==null)break e;ut=A$3({},ut,dt);break e;case 2:$g=!0}}st.callback!==null&&st.lane!==0&&(et.flags|=64,dt=rt.effects,dt===null?rt.effects=[st]:dt.push(st))}else ft={eventTime:ft,lane:dt,tag:st.tag,payload:st.payload,callback:st.callback,next:null},ct===null?(lt=ct=ft,at=ut):ct=ct.next=ft,ot|=dt;if(st=st.next,st===null){if(st=rt.shared.pending,st===null)break;dt=st,st=dt.next,dt.next=null,rt.lastBaseUpdate=dt,rt.shared.pending=null}}while(!0);if(ct===null&&(at=ut),rt.baseState=at,rt.firstBaseUpdate=lt,rt.lastBaseUpdate=ct,_e=rt.shared.interleaved,_e!==null){rt=_e;do ot|=rt.lane,rt=rt.next;while(rt!==_e)}else it===null&&(rt.shared.lanes=0);hh|=ot,et.lanes=ot,et.memoizedState=ut}}function ih(et,_e,tt){if(et=_e.effects,_e.effects=null,et!==null)for(_e=0;_e<et.length;_e++){var nt=et[_e],rt=nt.callback;if(rt!==null){if(nt.callback=null,nt=tt,typeof rt!="function")throw Error(p$4(191,rt));rt.call(nt)}}}var jh=new aa.Component().refs;function kh(et,_e,tt,nt){_e=et.memoizedState,tt=tt(nt,_e),tt=tt==null?_e:A$3({},_e,tt),et.memoizedState=tt,et.lanes===0&&(et.updateQueue.baseState=tt)}var nh={isMounted:function(et){return(et=et._reactInternals)?Vb(et)===et:!1},enqueueSetState:function(et,_e,tt){et=et._reactInternals;var nt=L$1(),rt=lh(et),it=ch(nt,rt);it.payload=_e,tt!=null&&(it.callback=tt),_e=dh(et,it,rt),_e!==null&&(mh(_e,et,rt,nt),eh(_e,et,rt))},enqueueReplaceState:function(et,_e,tt){et=et._reactInternals;var nt=L$1(),rt=lh(et),it=ch(nt,rt);it.tag=1,it.payload=_e,tt!=null&&(it.callback=tt),_e=dh(et,it,rt),_e!==null&&(mh(_e,et,rt,nt),eh(_e,et,rt))},enqueueForceUpdate:function(et,_e){et=et._reactInternals;var tt=L$1(),nt=lh(et),rt=ch(tt,nt);rt.tag=2,_e!=null&&(rt.callback=_e),_e=dh(et,rt,nt),_e!==null&&(mh(_e,et,nt,tt),eh(_e,et,nt))}};function oh(et,_e,tt,nt,rt,it,ot){return et=et.stateNode,typeof et.shouldComponentUpdate=="function"?et.shouldComponentUpdate(nt,it,ot):_e.prototype&&_e.prototype.isPureReactComponent?!Ie(tt,nt)||!Ie(rt,it):!0}function ph(et,_e,tt){var nt=!1,rt=Vf,it=_e.contextType;return typeof it=="object"&&it!==null?it=Vg(it):(rt=Zf(_e)?Xf:H$2.current,nt=_e.contextTypes,it=(nt=nt!=null)?Yf(et,rt):Vf),_e=new _e(tt,it),et.memoizedState=_e.state!==null&&_e.state!==void 0?_e.state:null,_e.updater=nh,et.stateNode=_e,_e._reactInternals=et,nt&&(et=et.stateNode,et.__reactInternalMemoizedUnmaskedChildContext=rt,et.__reactInternalMemoizedMaskedChildContext=it),_e}function qh(et,_e,tt,nt){et=_e.state,typeof _e.componentWillReceiveProps=="function"&&_e.componentWillReceiveProps(tt,nt),typeof _e.UNSAFE_componentWillReceiveProps=="function"&&_e.UNSAFE_componentWillReceiveProps(tt,nt),_e.state!==et&&nh.enqueueReplaceState(_e,_e.state,null)}function rh(et,_e,tt,nt){var rt=et.stateNode;rt.props=tt,rt.state=et.memoizedState,rt.refs=jh,ah(et);var it=_e.contextType;typeof it=="object"&&it!==null?rt.context=Vg(it):(it=Zf(_e)?Xf:H$2.current,rt.context=Yf(et,it)),rt.state=et.memoizedState,it=_e.getDerivedStateFromProps,typeof it=="function"&&(kh(et,_e,it,tt),rt.state=et.memoizedState),typeof _e.getDerivedStateFromProps=="function"||typeof rt.getSnapshotBeforeUpdate=="function"||typeof rt.UNSAFE_componentWillMount!="function"&&typeof rt.componentWillMount!="function"||(_e=rt.state,typeof rt.componentWillMount=="function"&&rt.componentWillMount(),typeof rt.UNSAFE_componentWillMount=="function"&&rt.UNSAFE_componentWillMount(),_e!==rt.state&&nh.enqueueReplaceState(rt,rt.state,null),gh(et,tt,rt,nt),rt.state=et.memoizedState),typeof rt.componentDidMount=="function"&&(et.flags|=4194308)}function sh(et,_e,tt){if(et=tt.ref,et!==null&&typeof et!="function"&&typeof et!="object"){if(tt._owner){if(tt=tt._owner,tt){if(tt.tag!==1)throw Error(p$4(309));var nt=tt.stateNode}if(!nt)throw Error(p$4(147,et));var rt=nt,it=""+et;return _e!==null&&_e.ref!==null&&typeof _e.ref=="function"&&_e.ref._stringRef===it?_e.ref:(_e=function(ot){var st=rt.refs;st===jh&&(st=rt.refs={}),ot===null?delete st[it]:st[it]=ot},_e._stringRef=it,_e)}if(typeof et!="string")throw Error(p$4(284));if(!tt._owner)throw Error(p$4(290,et))}return et}function th(et,_e){throw et=Object.prototype.toString.call(_e),Error(p$4(31,et==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":et))}function uh(et){var _e=et._init;return _e(et._payload)}function vh(et){function _e(gt,ht){if(et){var yt=gt.deletions;yt===null?(gt.deletions=[ht],gt.flags|=16):yt.push(ht)}}function tt(gt,ht){if(!et)return null;for(;ht!==null;)_e(gt,ht),ht=ht.sibling;return null}function nt(gt,ht){for(gt=new Map;ht!==null;)ht.key!==null?gt.set(ht.key,ht):gt.set(ht.index,ht),ht=ht.sibling;return gt}function rt(gt,ht){return gt=wh(gt,ht),gt.index=0,gt.sibling=null,gt}function it(gt,ht,yt){return gt.index=yt,et?(yt=gt.alternate,yt!==null?(yt=yt.index,yt<ht?(gt.flags|=2,ht):yt):(gt.flags|=2,ht)):(gt.flags|=1048576,ht)}function ot(gt){return et&&gt.alternate===null&&(gt.flags|=2),gt}function st(gt,ht,yt,vt){return ht===null||ht.tag!==6?(ht=xh(yt,gt.mode,vt),ht.return=gt,ht):(ht=rt(ht,yt),ht.return=gt,ht)}function at(gt,ht,yt,vt){var _t=yt.type;return _t===ya?ct(gt,ht,yt.props.children,vt,yt.key):ht!==null&&(ht.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===Ha&&uh(_t)===ht.type)?(vt=rt(ht,yt.props),vt.ref=sh(gt,ht,yt),vt.return=gt,vt):(vt=yh(yt.type,yt.key,yt.props,null,gt.mode,vt),vt.ref=sh(gt,ht,yt),vt.return=gt,vt)}function lt(gt,ht,yt,vt){return ht===null||ht.tag!==4||ht.stateNode.containerInfo!==yt.containerInfo||ht.stateNode.implementation!==yt.implementation?(ht=zh(yt,gt.mode,vt),ht.return=gt,ht):(ht=rt(ht,yt.children||[]),ht.return=gt,ht)}function ct(gt,ht,yt,vt,_t){return ht===null||ht.tag!==7?(ht=Ah(yt,gt.mode,vt,_t),ht.return=gt,ht):(ht=rt(ht,yt),ht.return=gt,ht)}function ut(gt,ht,yt){if(typeof ht=="string"&&ht!==""||typeof ht=="number")return ht=xh(""+ht,gt.mode,yt),ht.return=gt,ht;if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case va:return yt=yh(ht.type,ht.key,ht.props,null,gt.mode,yt),yt.ref=sh(gt,null,ht),yt.return=gt,yt;case wa:return ht=zh(ht,gt.mode,yt),ht.return=gt,ht;case Ha:var vt=ht._init;return ut(gt,vt(ht._payload),yt)}if(eb(ht)||Ka(ht))return ht=Ah(ht,gt.mode,yt,null),ht.return=gt,ht;th(gt,ht)}return null}function dt(gt,ht,yt,vt){var _t=ht!==null?ht.key:null;if(typeof yt=="string"&&yt!==""||typeof yt=="number")return _t!==null?null:st(gt,ht,""+yt,vt);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case va:return yt.key===_t?at(gt,ht,yt,vt):null;case wa:return yt.key===_t?lt(gt,ht,yt,vt):null;case Ha:return _t=yt._init,dt(gt,ht,_t(yt._payload),vt)}if(eb(yt)||Ka(yt))return _t!==null?null:ct(gt,ht,yt,vt,null);th(gt,yt)}return null}function ft(gt,ht,yt,vt,_t){if(typeof vt=="string"&&vt!==""||typeof vt=="number")return gt=gt.get(yt)||null,st(ht,gt,""+vt,_t);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case va:return gt=gt.get(vt.key===null?yt:vt.key)||null,at(ht,gt,vt,_t);case wa:return gt=gt.get(vt.key===null?yt:vt.key)||null,lt(ht,gt,vt,_t);case Ha:var Et=vt._init;return ft(gt,ht,yt,Et(vt._payload),_t)}if(eb(vt)||Ka(vt))return gt=gt.get(yt)||null,ct(ht,gt,vt,_t,null);th(ht,vt)}return null}function pt(gt,ht,yt,vt){for(var _t=null,Et=null,bt=ht,St=ht=0,wt=null;bt!==null&&St<yt.length;St++){bt.index>St?(wt=bt,bt=null):wt=bt.sibling;var Rt=dt(gt,bt,yt[St],vt);if(Rt===null){bt===null&&(bt=wt);break}et&&bt&&Rt.alternate===null&&_e(gt,bt),ht=it(Rt,ht,St),Et===null?_t=Rt:Et.sibling=Rt,Et=Rt,bt=wt}if(St===yt.length)return tt(gt,bt),I$2&&tg(gt,St),_t;if(bt===null){for(;St<yt.length;St++)bt=ut(gt,yt[St],vt),bt!==null&&(ht=it(bt,ht,St),Et===null?_t=bt:Et.sibling=bt,Et=bt);return I$2&&tg(gt,St),_t}for(bt=nt(gt,bt);St<yt.length;St++)wt=ft(bt,gt,St,yt[St],vt),wt!==null&&(et&&wt.alternate!==null&&bt.delete(wt.key===null?St:wt.key),ht=it(wt,ht,St),Et===null?_t=wt:Et.sibling=wt,Et=wt);return et&&bt.forEach(function(Nt){return _e(gt,Nt)}),I$2&&tg(gt,St),_t}function mt(gt,ht,yt,vt){var _t=Ka(yt);if(typeof _t!="function")throw Error(p$4(150));if(yt=_t.call(yt),yt==null)throw Error(p$4(151));for(var Et=_t=null,bt=ht,St=ht=0,wt=null,Rt=yt.next();bt!==null&&!Rt.done;St++,Rt=yt.next()){bt.index>St?(wt=bt,bt=null):wt=bt.sibling;var Nt=dt(gt,bt,Rt.value,vt);if(Nt===null){bt===null&&(bt=wt);break}et&&bt&&Nt.alternate===null&&_e(gt,bt),ht=it(Nt,ht,St),Et===null?_t=Nt:Et.sibling=Nt,Et=Nt,bt=wt}if(Rt.done)return tt(gt,bt),I$2&&tg(gt,St),_t;if(bt===null){for(;!Rt.done;St++,Rt=yt.next())Rt=ut(gt,Rt.value,vt),Rt!==null&&(ht=it(Rt,ht,St),Et===null?_t=Rt:Et.sibling=Rt,Et=Rt);return I$2&&tg(gt,St),_t}for(bt=nt(gt,bt);!Rt.done;St++,Rt=yt.next())Rt=ft(bt,gt,St,Rt.value,vt),Rt!==null&&(et&&Rt.alternate!==null&&bt.delete(Rt.key===null?St:Rt.key),ht=it(Rt,ht,St),Et===null?_t=Rt:Et.sibling=Rt,Et=Rt);return et&&bt.forEach(function(kt){return _e(gt,kt)}),I$2&&tg(gt,St),_t}function xt(gt,ht,yt,vt){if(typeof yt=="object"&&yt!==null&&yt.type===ya&&yt.key===null&&(yt=yt.props.children),typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case va:e:{for(var _t=yt.key,Et=ht;Et!==null;){if(Et.key===_t){if(_t=yt.type,_t===ya){if(Et.tag===7){tt(gt,Et.sibling),ht=rt(Et,yt.props.children),ht.return=gt,gt=ht;break e}}else if(Et.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===Ha&&uh(_t)===Et.type){tt(gt,Et.sibling),ht=rt(Et,yt.props),ht.ref=sh(gt,Et,yt),ht.return=gt,gt=ht;break e}tt(gt,Et);break}else _e(gt,Et);Et=Et.sibling}yt.type===ya?(ht=Ah(yt.props.children,gt.mode,vt,yt.key),ht.return=gt,gt=ht):(vt=yh(yt.type,yt.key,yt.props,null,gt.mode,vt),vt.ref=sh(gt,ht,yt),vt.return=gt,gt=vt)}return ot(gt);case wa:e:{for(Et=yt.key;ht!==null;){if(ht.key===Et)if(ht.tag===4&&ht.stateNode.containerInfo===yt.containerInfo&&ht.stateNode.implementation===yt.implementation){tt(gt,ht.sibling),ht=rt(ht,yt.children||[]),ht.return=gt,gt=ht;break e}else{tt(gt,ht);break}else _e(gt,ht);ht=ht.sibling}ht=zh(yt,gt.mode,vt),ht.return=gt,gt=ht}return ot(gt);case Ha:return Et=yt._init,xt(gt,ht,Et(yt._payload),vt)}if(eb(yt))return pt(gt,ht,yt,vt);if(Ka(yt))return mt(gt,ht,yt,vt);th(gt,yt)}return typeof yt=="string"&&yt!==""||typeof yt=="number"?(yt=""+yt,ht!==null&&ht.tag===6?(tt(gt,ht.sibling),ht=rt(ht,yt),ht.return=gt,gt=ht):(tt(gt,ht),ht=xh(yt,gt.mode,vt),ht.return=gt,gt=ht),ot(gt)):tt(gt,ht)}return xt}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(et){if(et===Dh)throw Error(p$4(174));return et}function Ih(et,_e){switch(G$2(Gh,_e),G$2(Fh,et),G$2(Eh,Dh),et=_e.nodeType,et){case 9:case 11:_e=(_e=_e.documentElement)?_e.namespaceURI:lb(null,"");break;default:et=et===8?_e.parentNode:_e,_e=et.namespaceURI||null,et=et.tagName,_e=lb(_e,et)}E$2(Eh),G$2(Eh,_e)}function Jh(){E$2(Eh),E$2(Fh),E$2(Gh)}function Kh(et){Hh(Gh.current);var _e=Hh(Eh.current),tt=lb(_e,et.type);_e!==tt&&(G$2(Fh,et),G$2(Eh,tt))}function Lh(et){Fh.current===et&&(E$2(Eh),E$2(Fh))}var M$1=Uf(0);function Mh(et){for(var _e=et;_e!==null;){if(_e.tag===13){var tt=_e.memoizedState;if(tt!==null&&(tt=tt.dehydrated,tt===null||tt.data==="$?"||tt.data==="$!"))return _e}else if(_e.tag===19&&_e.memoizedProps.revealOrder!==void 0){if(_e.flags&128)return _e}else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===et)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===et)return null;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}return null}var Nh=[];function Oh(){for(var et=0;et<Nh.length;et++)Nh[et]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$1=null,O$1=null,P$1=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$1(){throw Error(p$4(321))}function Wh(et,_e){if(_e===null)return!1;for(var tt=0;tt<_e.length&&tt<et.length;tt++)if(!He(et[tt],_e[tt]))return!1;return!0}function Xh(et,_e,tt,nt,rt,it){if(Rh=it,N$1=_e,_e.memoizedState=null,_e.updateQueue=null,_e.lanes=0,Ph.current=et===null||et.memoizedState===null?Yh:Zh,et=tt(nt,rt),Th){it=0;do{if(Th=!1,Uh=0,25<=it)throw Error(p$4(301));it+=1,P$1=O$1=null,_e.updateQueue=null,Ph.current=$h,et=tt(nt,rt)}while(Th)}if(Ph.current=ai,_e=O$1!==null&&O$1.next!==null,Rh=0,P$1=O$1=N$1=null,Sh=!1,_e)throw Error(p$4(300));return et}function bi(){var et=Uh!==0;return Uh=0,et}function ci(){var et={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$1===null?N$1.memoizedState=P$1=et:P$1=P$1.next=et,P$1}function di(){if(O$1===null){var et=N$1.alternate;et=et!==null?et.memoizedState:null}else et=O$1.next;var _e=P$1===null?N$1.memoizedState:P$1.next;if(_e!==null)P$1=_e,O$1=et;else{if(et===null)throw Error(p$4(310));O$1=et,et={memoizedState:O$1.memoizedState,baseState:O$1.baseState,baseQueue:O$1.baseQueue,queue:O$1.queue,next:null},P$1===null?N$1.memoizedState=P$1=et:P$1=P$1.next=et}return P$1}function ei(et,_e){return typeof _e=="function"?_e(et):_e}function fi(et){var _e=di(),tt=_e.queue;if(tt===null)throw Error(p$4(311));tt.lastRenderedReducer=et;var nt=O$1,rt=nt.baseQueue,it=tt.pending;if(it!==null){if(rt!==null){var ot=rt.next;rt.next=it.next,it.next=ot}nt.baseQueue=rt=it,tt.pending=null}if(rt!==null){it=rt.next,nt=nt.baseState;var st=ot=null,at=null,lt=it;do{var ct=lt.lane;if((Rh&ct)===ct)at!==null&&(at=at.next={lane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),nt=lt.hasEagerState?lt.eagerState:et(nt,lt.action);else{var ut={lane:ct,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null};at===null?(st=at=ut,ot=nt):at=at.next=ut,N$1.lanes|=ct,hh|=ct}lt=lt.next}while(lt!==null&&lt!==it);at===null?ot=nt:at.next=st,He(nt,_e.memoizedState)||(Ug=!0),_e.memoizedState=nt,_e.baseState=ot,_e.baseQueue=at,tt.lastRenderedState=nt}if(et=tt.interleaved,et!==null){rt=et;do it=rt.lane,N$1.lanes|=it,hh|=it,rt=rt.next;while(rt!==et)}else rt===null&&(tt.lanes=0);return[_e.memoizedState,tt.dispatch]}function gi(et){var _e=di(),tt=_e.queue;if(tt===null)throw Error(p$4(311));tt.lastRenderedReducer=et;var nt=tt.dispatch,rt=tt.pending,it=_e.memoizedState;if(rt!==null){tt.pending=null;var ot=rt=rt.next;do it=et(it,ot.action),ot=ot.next;while(ot!==rt);He(it,_e.memoizedState)||(Ug=!0),_e.memoizedState=it,_e.baseQueue===null&&(_e.baseState=it),tt.lastRenderedState=it}return[it,nt]}function hi(){}function ii(et,_e){var tt=N$1,nt=di(),rt=_e(),it=!He(nt.memoizedState,rt);if(it&&(nt.memoizedState=rt,Ug=!0),nt=nt.queue,ji(ki.bind(null,tt,nt,et),[et]),nt.getSnapshot!==_e||it||P$1!==null&&P$1.memoizedState.tag&1){if(tt.flags|=2048,li(9,mi.bind(null,tt,nt,rt,_e),void 0,null),R$1===null)throw Error(p$4(349));Rh&30||ni(tt,_e,rt)}return rt}function ni(et,_e,tt){et.flags|=16384,et={getSnapshot:_e,value:tt},_e=N$1.updateQueue,_e===null?(_e={lastEffect:null,stores:null},N$1.updateQueue=_e,_e.stores=[et]):(tt=_e.stores,tt===null?_e.stores=[et]:tt.push(et))}function mi(et,_e,tt,nt){_e.value=tt,_e.getSnapshot=nt,oi(_e)&&pi(et)}function ki(et,_e,tt){return tt(function(){oi(_e)&&pi(et)})}function oi(et){var _e=et.getSnapshot;et=et.value;try{var tt=_e();return!He(et,tt)}catch{return!0}}function pi(et){var _e=Zg(et,1);_e!==null&&mh(_e,et,1,-1)}function qi(et){var _e=ci();return typeof et=="function"&&(et=et()),_e.memoizedState=_e.baseState=et,et={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:et},_e.queue=et,et=et.dispatch=ri.bind(null,N$1,et),[_e.memoizedState,et]}function li(et,_e,tt,nt){return et={tag:et,create:_e,destroy:tt,deps:nt,next:null},_e=N$1.updateQueue,_e===null?(_e={lastEffect:null,stores:null},N$1.updateQueue=_e,_e.lastEffect=et.next=et):(tt=_e.lastEffect,tt===null?_e.lastEffect=et.next=et:(nt=tt.next,tt.next=et,et.next=nt,_e.lastEffect=et)),et}function si(){return di().memoizedState}function ti(et,_e,tt,nt){var rt=ci();N$1.flags|=et,rt.memoizedState=li(1|_e,tt,void 0,nt===void 0?null:nt)}function ui(et,_e,tt,nt){var rt=di();nt=nt===void 0?null:nt;var it=void 0;if(O$1!==null){var ot=O$1.memoizedState;if(it=ot.destroy,nt!==null&&Wh(nt,ot.deps)){rt.memoizedState=li(_e,tt,it,nt);return}}N$1.flags|=et,rt.memoizedState=li(1|_e,tt,it,nt)}function vi(et,_e){return ti(8390656,8,et,_e)}function ji(et,_e){return ui(2048,8,et,_e)}function wi(et,_e){return ui(4,2,et,_e)}function xi(et,_e){return ui(4,4,et,_e)}function yi(et,_e){if(typeof _e=="function")return et=et(),_e(et),function(){_e(null)};if(_e!=null)return et=et(),_e.current=et,function(){_e.current=null}}function zi(et,_e,tt){return tt=tt!=null?tt.concat([et]):null,ui(4,4,yi.bind(null,_e,et),tt)}function Ai(){}function Bi(et,_e){var tt=di();_e=_e===void 0?null:_e;var nt=tt.memoizedState;return nt!==null&&_e!==null&&Wh(_e,nt[1])?nt[0]:(tt.memoizedState=[et,_e],et)}function Ci(et,_e){var tt=di();_e=_e===void 0?null:_e;var nt=tt.memoizedState;return nt!==null&&_e!==null&&Wh(_e,nt[1])?nt[0]:(et=et(),tt.memoizedState=[et,_e],et)}function Di(et,_e,tt){return Rh&21?(He(tt,_e)||(tt=yc(),N$1.lanes|=tt,hh|=tt,et.baseState=!0),_e):(et.baseState&&(et.baseState=!1,Ug=!0),et.memoizedState=tt)}function Ei(et,_e){var tt=C$2;C$2=tt!==0&&4>tt?tt:4,et(!0);var nt=Qh.transition;Qh.transition={};try{et(!1),_e()}finally{C$2=tt,Qh.transition=nt}}function Fi(){return di().memoizedState}function Gi(et,_e,tt){var nt=lh(et);if(tt={lane:nt,action:tt,hasEagerState:!1,eagerState:null,next:null},Hi(et))Ii(_e,tt);else if(tt=Yg(et,_e,tt,nt),tt!==null){var rt=L$1();mh(tt,et,nt,rt),Ji(tt,_e,nt)}}function ri(et,_e,tt){var nt=lh(et),rt={lane:nt,action:tt,hasEagerState:!1,eagerState:null,next:null};if(Hi(et))Ii(_e,rt);else{var it=et.alternate;if(et.lanes===0&&(it===null||it.lanes===0)&&(it=_e.lastRenderedReducer,it!==null))try{var ot=_e.lastRenderedState,st=it(ot,tt);if(rt.hasEagerState=!0,rt.eagerState=st,He(st,ot)){var at=_e.interleaved;at===null?(rt.next=rt,Xg(_e)):(rt.next=at.next,at.next=rt),_e.interleaved=rt;return}}catch{}finally{}tt=Yg(et,_e,rt,nt),tt!==null&&(rt=L$1(),mh(tt,et,nt,rt),Ji(tt,_e,nt))}}function Hi(et){var _e=et.alternate;return et===N$1||_e!==null&&_e===N$1}function Ii(et,_e){Th=Sh=!0;var tt=et.pending;tt===null?_e.next=_e:(_e.next=tt.next,tt.next=_e),et.pending=_e}function Ji(et,_e,tt){if(tt&4194240){var nt=_e.lanes;nt&=et.pendingLanes,tt|=nt,_e.lanes=tt,Cc(et,tt)}}var ai={readContext:Vg,useCallback:Q$1,useContext:Q$1,useEffect:Q$1,useImperativeHandle:Q$1,useInsertionEffect:Q$1,useLayoutEffect:Q$1,useMemo:Q$1,useReducer:Q$1,useRef:Q$1,useState:Q$1,useDebugValue:Q$1,useDeferredValue:Q$1,useTransition:Q$1,useMutableSource:Q$1,useSyncExternalStore:Q$1,useId:Q$1,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(et,_e){return ci().memoizedState=[et,_e===void 0?null:_e],et},useContext:Vg,useEffect:vi,useImperativeHandle:function(et,_e,tt){return tt=tt!=null?tt.concat([et]):null,ti(4194308,4,yi.bind(null,_e,et),tt)},useLayoutEffect:function(et,_e){return ti(4194308,4,et,_e)},useInsertionEffect:function(et,_e){return ti(4,2,et,_e)},useMemo:function(et,_e){var tt=ci();return _e=_e===void 0?null:_e,et=et(),tt.memoizedState=[et,_e],et},useReducer:function(et,_e,tt){var nt=ci();return _e=tt!==void 0?tt(_e):_e,nt.memoizedState=nt.baseState=_e,et={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:et,lastRenderedState:_e},nt.queue=et,et=et.dispatch=Gi.bind(null,N$1,et),[nt.memoizedState,et]},useRef:function(et){var _e=ci();return et={current:et},_e.memoizedState=et},useState:qi,useDebugValue:Ai,useDeferredValue:function(et){return ci().memoizedState=et},useTransition:function(){var et=qi(!1),_e=et[0];return et=Ei.bind(null,et[1]),ci().memoizedState=et,[_e,et]},useMutableSource:function(){},useSyncExternalStore:function(et,_e,tt){var nt=N$1,rt=ci();if(I$2){if(tt===void 0)throw Error(p$4(407));tt=tt()}else{if(tt=_e(),R$1===null)throw Error(p$4(349));Rh&30||ni(nt,_e,tt)}rt.memoizedState=tt;var it={value:tt,getSnapshot:_e};return rt.queue=it,vi(ki.bind(null,nt,it,et),[et]),nt.flags|=2048,li(9,mi.bind(null,nt,it,tt,_e),void 0,null),tt},useId:function(){var et=ci(),_e=R$1.identifierPrefix;if(I$2){var tt=sg,nt=rg;tt=(nt&~(1<<32-oc(nt)-1)).toString(32)+tt,_e=":"+_e+"R"+tt,tt=Uh++,0<tt&&(_e+="H"+tt.toString(32)),_e+=":"}else tt=Vh++,_e=":"+_e+"r"+tt.toString(32)+":";return et.memoizedState=_e},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(et){var _e=di();return Di(_e,O$1.memoizedState,et)},useTransition:function(){var et=fi(ei)[0],_e=di().memoizedState;return[et,_e]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(et){var _e=di();return O$1===null?_e.memoizedState=et:Di(_e,O$1.memoizedState,et)},useTransition:function(){var et=gi(ei)[0],_e=di().memoizedState;return[et,_e]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(et,_e){try{var tt="",nt=_e;do tt+=Pa(nt),nt=nt.return;while(nt);var rt=tt}catch(it){rt=`
Error generating stack: `+it.message+`
`+it.stack}return{value:et,source:_e,stack:rt,digest:null}}function Li(et,_e,tt){return{value:et,source:null,stack:tt??null,digest:_e??null}}function Mi(et,_e){try{console.error(_e.value)}catch(tt){setTimeout(function(){throw tt})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(et,_e,tt){tt=ch(-1,tt),tt.tag=3,tt.payload={element:null};var nt=_e.value;return tt.callback=function(){Pi||(Pi=!0,Qi=nt),Mi(et,_e)},tt}function Ri(et,_e,tt){tt=ch(-1,tt),tt.tag=3;var nt=et.type.getDerivedStateFromError;if(typeof nt=="function"){var rt=_e.value;tt.payload=function(){return nt(rt)},tt.callback=function(){Mi(et,_e)}}var it=et.stateNode;return it!==null&&typeof it.componentDidCatch=="function"&&(tt.callback=function(){Mi(et,_e),typeof nt!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var ot=_e.stack;this.componentDidCatch(_e.value,{componentStack:ot!==null?ot:""})}),tt}function Ti(et,_e,tt){var nt=et.pingCache;if(nt===null){nt=et.pingCache=new Ni;var rt=new Set;nt.set(_e,rt)}else rt=nt.get(_e),rt===void 0&&(rt=new Set,nt.set(_e,rt));rt.has(tt)||(rt.add(tt),et=Ui.bind(null,et,_e,tt),_e.then(et,et))}function Vi(et){do{var _e;if((_e=et.tag===13)&&(_e=et.memoizedState,_e=_e!==null?_e.dehydrated!==null:!0),_e)return et;et=et.return}while(et!==null);return null}function Wi(et,_e,tt,nt,rt){return et.mode&1?(et.flags|=65536,et.lanes=rt,et):(et===_e?et.flags|=65536:(et.flags|=128,tt.flags|=131072,tt.flags&=-52805,tt.tag===1&&(tt.alternate===null?tt.tag=17:(_e=ch(-1,1),_e.tag=2,dh(tt,_e,1))),tt.lanes|=1),et)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(et,_e,tt,nt){_e.child=et===null?Ch(_e,null,tt,nt):Bh(_e,et.child,tt,nt)}function Zi(et,_e,tt,nt,rt){tt=tt.render;var it=_e.ref;return Tg(_e,rt),nt=Xh(et,_e,tt,nt,it,rt),tt=bi(),et!==null&&!Ug?(_e.updateQueue=et.updateQueue,_e.flags&=-2053,et.lanes&=~rt,$i(et,_e,rt)):(I$2&&tt&&vg(_e),_e.flags|=1,Yi(et,_e,nt,rt),_e.child)}function aj(et,_e,tt,nt,rt){if(et===null){var it=tt.type;return typeof it=="function"&&!bj(it)&&it.defaultProps===void 0&&tt.compare===null&&tt.defaultProps===void 0?(_e.tag=15,_e.type=it,cj(et,_e,it,nt,rt)):(et=yh(tt.type,null,nt,_e,_e.mode,rt),et.ref=_e.ref,et.return=_e,_e.child=et)}if(it=et.child,!(et.lanes&rt)){var ot=it.memoizedProps;if(tt=tt.compare,tt=tt!==null?tt:Ie,tt(ot,nt)&&et.ref===_e.ref)return $i(et,_e,rt)}return _e.flags|=1,et=wh(it,nt),et.ref=_e.ref,et.return=_e,_e.child=et}function cj(et,_e,tt,nt,rt){if(et!==null){var it=et.memoizedProps;if(Ie(it,nt)&&et.ref===_e.ref)if(Ug=!1,_e.pendingProps=nt=it,(et.lanes&rt)!==0)et.flags&131072&&(Ug=!0);else return _e.lanes=et.lanes,$i(et,_e,rt)}return dj(et,_e,tt,nt,rt)}function ej(et,_e,tt){var nt=_e.pendingProps,rt=nt.children,it=et!==null?et.memoizedState:null;if(nt.mode==="hidden")if(!(_e.mode&1))_e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$2(fj,gj),gj|=tt;else{if(!(tt&1073741824))return et=it!==null?it.baseLanes|tt:tt,_e.lanes=_e.childLanes=1073741824,_e.memoizedState={baseLanes:et,cachePool:null,transitions:null},_e.updateQueue=null,G$2(fj,gj),gj|=et,null;_e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt=it!==null?it.baseLanes:tt,G$2(fj,gj),gj|=nt}else it!==null?(nt=it.baseLanes|tt,_e.memoizedState=null):nt=tt,G$2(fj,gj),gj|=nt;return Yi(et,_e,rt,tt),_e.child}function hj(et,_e){var tt=_e.ref;(et===null&&tt!==null||et!==null&&et.ref!==tt)&&(_e.flags|=512,_e.flags|=2097152)}function dj(et,_e,tt,nt,rt){var it=Zf(tt)?Xf:H$2.current;return it=Yf(_e,it),Tg(_e,rt),tt=Xh(et,_e,tt,nt,it,rt),nt=bi(),et!==null&&!Ug?(_e.updateQueue=et.updateQueue,_e.flags&=-2053,et.lanes&=~rt,$i(et,_e,rt)):(I$2&&nt&&vg(_e),_e.flags|=1,Yi(et,_e,tt,rt),_e.child)}function ij(et,_e,tt,nt,rt){if(Zf(tt)){var it=!0;cg(_e)}else it=!1;if(Tg(_e,rt),_e.stateNode===null)jj(et,_e),ph(_e,tt,nt),rh(_e,tt,nt,rt),nt=!0;else if(et===null){var ot=_e.stateNode,st=_e.memoizedProps;ot.props=st;var at=ot.context,lt=tt.contextType;typeof lt=="object"&&lt!==null?lt=Vg(lt):(lt=Zf(tt)?Xf:H$2.current,lt=Yf(_e,lt));var ct=tt.getDerivedStateFromProps,ut=typeof ct=="function"||typeof ot.getSnapshotBeforeUpdate=="function";ut||typeof ot.UNSAFE_componentWillReceiveProps!="function"&&typeof ot.componentWillReceiveProps!="function"||(st!==nt||at!==lt)&&qh(_e,ot,nt,lt),$g=!1;var dt=_e.memoizedState;ot.state=dt,gh(_e,nt,ot,rt),at=_e.memoizedState,st!==nt||dt!==at||Wf.current||$g?(typeof ct=="function"&&(kh(_e,tt,ct,nt),at=_e.memoizedState),(st=$g||oh(_e,tt,st,nt,dt,at,lt))?(ut||typeof ot.UNSAFE_componentWillMount!="function"&&typeof ot.componentWillMount!="function"||(typeof ot.componentWillMount=="function"&&ot.componentWillMount(),typeof ot.UNSAFE_componentWillMount=="function"&&ot.UNSAFE_componentWillMount()),typeof ot.componentDidMount=="function"&&(_e.flags|=4194308)):(typeof ot.componentDidMount=="function"&&(_e.flags|=4194308),_e.memoizedProps=nt,_e.memoizedState=at),ot.props=nt,ot.state=at,ot.context=lt,nt=st):(typeof ot.componentDidMount=="function"&&(_e.flags|=4194308),nt=!1)}else{ot=_e.stateNode,bh(et,_e),st=_e.memoizedProps,lt=_e.type===_e.elementType?st:Lg(_e.type,st),ot.props=lt,ut=_e.pendingProps,dt=ot.context,at=tt.contextType,typeof at=="object"&&at!==null?at=Vg(at):(at=Zf(tt)?Xf:H$2.current,at=Yf(_e,at));var ft=tt.getDerivedStateFromProps;(ct=typeof ft=="function"||typeof ot.getSnapshotBeforeUpdate=="function")||typeof ot.UNSAFE_componentWillReceiveProps!="function"&&typeof ot.componentWillReceiveProps!="function"||(st!==ut||dt!==at)&&qh(_e,ot,nt,at),$g=!1,dt=_e.memoizedState,ot.state=dt,gh(_e,nt,ot,rt);var pt=_e.memoizedState;st!==ut||dt!==pt||Wf.current||$g?(typeof ft=="function"&&(kh(_e,tt,ft,nt),pt=_e.memoizedState),(lt=$g||oh(_e,tt,lt,nt,dt,pt,at)||!1)?(ct||typeof ot.UNSAFE_componentWillUpdate!="function"&&typeof ot.componentWillUpdate!="function"||(typeof ot.componentWillUpdate=="function"&&ot.componentWillUpdate(nt,pt,at),typeof ot.UNSAFE_componentWillUpdate=="function"&&ot.UNSAFE_componentWillUpdate(nt,pt,at)),typeof ot.componentDidUpdate=="function"&&(_e.flags|=4),typeof ot.getSnapshotBeforeUpdate=="function"&&(_e.flags|=1024)):(typeof ot.componentDidUpdate!="function"||st===et.memoizedProps&&dt===et.memoizedState||(_e.flags|=4),typeof ot.getSnapshotBeforeUpdate!="function"||st===et.memoizedProps&&dt===et.memoizedState||(_e.flags|=1024),_e.memoizedProps=nt,_e.memoizedState=pt),ot.props=nt,ot.state=pt,ot.context=at,nt=lt):(typeof ot.componentDidUpdate!="function"||st===et.memoizedProps&&dt===et.memoizedState||(_e.flags|=4),typeof ot.getSnapshotBeforeUpdate!="function"||st===et.memoizedProps&&dt===et.memoizedState||(_e.flags|=1024),nt=!1)}return kj(et,_e,tt,nt,it,rt)}function kj(et,_e,tt,nt,rt,it){hj(et,_e);var ot=(_e.flags&128)!==0;if(!nt&&!ot)return rt&&dg(_e,tt,!1),$i(et,_e,it);nt=_e.stateNode,Xi.current=_e;var st=ot&&typeof tt.getDerivedStateFromError!="function"?null:nt.render();return _e.flags|=1,et!==null&&ot?(_e.child=Bh(_e,et.child,null,it),_e.child=Bh(_e,null,st,it)):Yi(et,_e,st,it),_e.memoizedState=nt.state,rt&&dg(_e,tt,!0),_e.child}function lj(et){var _e=et.stateNode;_e.pendingContext?ag(et,_e.pendingContext,_e.pendingContext!==_e.context):_e.context&&ag(et,_e.context,!1),Ih(et,_e.containerInfo)}function mj(et,_e,tt,nt,rt){return Ig(),Jg(rt),_e.flags|=256,Yi(et,_e,tt,nt),_e.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(et){return{baseLanes:et,cachePool:null,transitions:null}}function pj(et,_e,tt){var nt=_e.pendingProps,rt=M$1.current,it=!1,ot=(_e.flags&128)!==0,st;if((st=ot)||(st=et!==null&&et.memoizedState===null?!1:(rt&2)!==0),st?(it=!0,_e.flags&=-129):(et===null||et.memoizedState!==null)&&(rt|=1),G$2(M$1,rt&1),et===null)return Eg(_e),et=_e.memoizedState,et!==null&&(et=et.dehydrated,et!==null)?(_e.mode&1?et.data==="$!"?_e.lanes=8:_e.lanes=1073741824:_e.lanes=1,null):(ot=nt.children,et=nt.fallback,it?(nt=_e.mode,it=_e.child,ot={mode:"hidden",children:ot},!(nt&1)&&it!==null?(it.childLanes=0,it.pendingProps=ot):it=qj(ot,nt,0,null),et=Ah(et,nt,tt,null),it.return=_e,et.return=_e,it.sibling=et,_e.child=it,_e.child.memoizedState=oj(tt),_e.memoizedState=nj,et):rj(_e,ot));if(rt=et.memoizedState,rt!==null&&(st=rt.dehydrated,st!==null))return sj(et,_e,ot,nt,st,rt,tt);if(it){it=nt.fallback,ot=_e.mode,rt=et.child,st=rt.sibling;var at={mode:"hidden",children:nt.children};return!(ot&1)&&_e.child!==rt?(nt=_e.child,nt.childLanes=0,nt.pendingProps=at,_e.deletions=null):(nt=wh(rt,at),nt.subtreeFlags=rt.subtreeFlags&14680064),st!==null?it=wh(st,it):(it=Ah(it,ot,tt,null),it.flags|=2),it.return=_e,nt.return=_e,nt.sibling=it,_e.child=nt,nt=it,it=_e.child,ot=et.child.memoizedState,ot=ot===null?oj(tt):{baseLanes:ot.baseLanes|tt,cachePool:null,transitions:ot.transitions},it.memoizedState=ot,it.childLanes=et.childLanes&~tt,_e.memoizedState=nj,nt}return it=et.child,et=it.sibling,nt=wh(it,{mode:"visible",children:nt.children}),!(_e.mode&1)&&(nt.lanes=tt),nt.return=_e,nt.sibling=null,et!==null&&(tt=_e.deletions,tt===null?(_e.deletions=[et],_e.flags|=16):tt.push(et)),_e.child=nt,_e.memoizedState=null,nt}function rj(et,_e){return _e=qj({mode:"visible",children:_e},et.mode,0,null),_e.return=et,et.child=_e}function tj(et,_e,tt,nt){return nt!==null&&Jg(nt),Bh(_e,et.child,null,tt),et=rj(_e,_e.pendingProps.children),et.flags|=2,_e.memoizedState=null,et}function sj(et,_e,tt,nt,rt,it,ot){if(tt)return _e.flags&256?(_e.flags&=-257,nt=Li(Error(p$4(422))),tj(et,_e,ot,nt)):_e.memoizedState!==null?(_e.child=et.child,_e.flags|=128,null):(it=nt.fallback,rt=_e.mode,nt=qj({mode:"visible",children:nt.children},rt,0,null),it=Ah(it,rt,ot,null),it.flags|=2,nt.return=_e,it.return=_e,nt.sibling=it,_e.child=nt,_e.mode&1&&Bh(_e,et.child,null,ot),_e.child.memoizedState=oj(ot),_e.memoizedState=nj,it);if(!(_e.mode&1))return tj(et,_e,ot,null);if(rt.data==="$!"){if(nt=rt.nextSibling&&rt.nextSibling.dataset,nt)var st=nt.dgst;return nt=st,it=Error(p$4(419)),nt=Li(it,nt,void 0),tj(et,_e,ot,nt)}if(st=(ot&et.childLanes)!==0,Ug||st){if(nt=R$1,nt!==null){switch(ot&-ot){case 4:rt=2;break;case 16:rt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:rt=32;break;case 536870912:rt=268435456;break;default:rt=0}rt=rt&(nt.suspendedLanes|ot)?0:rt,rt!==0&&rt!==it.retryLane&&(it.retryLane=rt,Zg(et,rt),mh(nt,et,rt,-1))}return uj(),nt=Li(Error(p$4(421))),tj(et,_e,ot,nt)}return rt.data==="$?"?(_e.flags|=128,_e.child=et.child,_e=vj.bind(null,et),rt._reactRetry=_e,null):(et=it.treeContext,yg=Lf(rt.nextSibling),xg=_e,I$2=!0,zg=null,et!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=et.id,sg=et.overflow,qg=_e),_e=rj(_e,nt.children),_e.flags|=4096,_e)}function wj(et,_e,tt){et.lanes|=_e;var nt=et.alternate;nt!==null&&(nt.lanes|=_e),Sg(et.return,_e,tt)}function xj(et,_e,tt,nt,rt){var it=et.memoizedState;it===null?et.memoizedState={isBackwards:_e,rendering:null,renderingStartTime:0,last:nt,tail:tt,tailMode:rt}:(it.isBackwards=_e,it.rendering=null,it.renderingStartTime=0,it.last=nt,it.tail=tt,it.tailMode=rt)}function yj(et,_e,tt){var nt=_e.pendingProps,rt=nt.revealOrder,it=nt.tail;if(Yi(et,_e,nt.children,tt),nt=M$1.current,nt&2)nt=nt&1|2,_e.flags|=128;else{if(et!==null&&et.flags&128)e:for(et=_e.child;et!==null;){if(et.tag===13)et.memoizedState!==null&&wj(et,tt,_e);else if(et.tag===19)wj(et,tt,_e);else if(et.child!==null){et.child.return=et,et=et.child;continue}if(et===_e)break e;for(;et.sibling===null;){if(et.return===null||et.return===_e)break e;et=et.return}et.sibling.return=et.return,et=et.sibling}nt&=1}if(G$2(M$1,nt),!(_e.mode&1))_e.memoizedState=null;else switch(rt){case"forwards":for(tt=_e.child,rt=null;tt!==null;)et=tt.alternate,et!==null&&Mh(et)===null&&(rt=tt),tt=tt.sibling;tt=rt,tt===null?(rt=_e.child,_e.child=null):(rt=tt.sibling,tt.sibling=null),xj(_e,!1,rt,tt,it);break;case"backwards":for(tt=null,rt=_e.child,_e.child=null;rt!==null;){if(et=rt.alternate,et!==null&&Mh(et)===null){_e.child=rt;break}et=rt.sibling,rt.sibling=tt,tt=rt,rt=et}xj(_e,!0,tt,null,it);break;case"together":xj(_e,!1,null,null,void 0);break;default:_e.memoizedState=null}return _e.child}function jj(et,_e){!(_e.mode&1)&&et!==null&&(et.alternate=null,_e.alternate=null,_e.flags|=2)}function $i(et,_e,tt){if(et!==null&&(_e.dependencies=et.dependencies),hh|=_e.lanes,!(tt&_e.childLanes))return null;if(et!==null&&_e.child!==et.child)throw Error(p$4(153));if(_e.child!==null){for(et=_e.child,tt=wh(et,et.pendingProps),_e.child=tt,tt.return=_e;et.sibling!==null;)et=et.sibling,tt=tt.sibling=wh(et,et.pendingProps),tt.return=_e;tt.sibling=null}return _e.child}function zj(et,_e,tt){switch(_e.tag){case 3:lj(_e),Ig();break;case 5:Kh(_e);break;case 1:Zf(_e.type)&&cg(_e);break;case 4:Ih(_e,_e.stateNode.containerInfo);break;case 10:var nt=_e.type._context,rt=_e.memoizedProps.value;G$2(Mg,nt._currentValue),nt._currentValue=rt;break;case 13:if(nt=_e.memoizedState,nt!==null)return nt.dehydrated!==null?(G$2(M$1,M$1.current&1),_e.flags|=128,null):tt&_e.child.childLanes?pj(et,_e,tt):(G$2(M$1,M$1.current&1),et=$i(et,_e,tt),et!==null?et.sibling:null);G$2(M$1,M$1.current&1);break;case 19:if(nt=(tt&_e.childLanes)!==0,et.flags&128){if(nt)return yj(et,_e,tt);_e.flags|=128}if(rt=_e.memoizedState,rt!==null&&(rt.rendering=null,rt.tail=null,rt.lastEffect=null),G$2(M$1,M$1.current),nt)break;return null;case 22:case 23:return _e.lanes=0,ej(et,_e,tt)}return $i(et,_e,tt)}var Aj,Bj,Cj,Dj;Aj=function(et,_e){for(var tt=_e.child;tt!==null;){if(tt.tag===5||tt.tag===6)et.appendChild(tt.stateNode);else if(tt.tag!==4&&tt.child!==null){tt.child.return=tt,tt=tt.child;continue}if(tt===_e)break;for(;tt.sibling===null;){if(tt.return===null||tt.return===_e)return;tt=tt.return}tt.sibling.return=tt.return,tt=tt.sibling}};Bj=function(){};Cj=function(et,_e,tt,nt){var rt=et.memoizedProps;if(rt!==nt){et=_e.stateNode,Hh(Eh.current);var it=null;switch(tt){case"input":rt=Ya(et,rt),nt=Ya(et,nt),it=[];break;case"select":rt=A$3({},rt,{value:void 0}),nt=A$3({},nt,{value:void 0}),it=[];break;case"textarea":rt=gb(et,rt),nt=gb(et,nt),it=[];break;default:typeof rt.onClick!="function"&&typeof nt.onClick=="function"&&(et.onclick=Bf)}ub(tt,nt);var ot;tt=null;for(lt in rt)if(!nt.hasOwnProperty(lt)&&rt.hasOwnProperty(lt)&&rt[lt]!=null)if(lt==="style"){var st=rt[lt];for(ot in st)st.hasOwnProperty(ot)&&(tt||(tt={}),tt[ot]="")}else lt!=="dangerouslySetInnerHTML"&&lt!=="children"&&lt!=="suppressContentEditableWarning"&&lt!=="suppressHydrationWarning"&&lt!=="autoFocus"&&(ea.hasOwnProperty(lt)?it||(it=[]):(it=it||[]).push(lt,null));for(lt in nt){var at=nt[lt];if(st=rt!=null?rt[lt]:void 0,nt.hasOwnProperty(lt)&&at!==st&&(at!=null||st!=null))if(lt==="style")if(st){for(ot in st)!st.hasOwnProperty(ot)||at&&at.hasOwnProperty(ot)||(tt||(tt={}),tt[ot]="");for(ot in at)at.hasOwnProperty(ot)&&st[ot]!==at[ot]&&(tt||(tt={}),tt[ot]=at[ot])}else tt||(it||(it=[]),it.push(lt,tt)),tt=at;else lt==="dangerouslySetInnerHTML"?(at=at?at.__html:void 0,st=st?st.__html:void 0,at!=null&&st!==at&&(it=it||[]).push(lt,at)):lt==="children"?typeof at!="string"&&typeof at!="number"||(it=it||[]).push(lt,""+at):lt!=="suppressContentEditableWarning"&&lt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(lt)?(at!=null&&lt==="onScroll"&&D$2("scroll",et),it||st===at||(it=[])):(it=it||[]).push(lt,at))}tt&&(it=it||[]).push("style",tt);var lt=it;(_e.updateQueue=lt)&&(_e.flags|=4)}};Dj=function(et,_e,tt,nt){tt!==nt&&(_e.flags|=4)};function Ej(et,_e){if(!I$2)switch(et.tailMode){case"hidden":_e=et.tail;for(var tt=null;_e!==null;)_e.alternate!==null&&(tt=_e),_e=_e.sibling;tt===null?et.tail=null:tt.sibling=null;break;case"collapsed":tt=et.tail;for(var nt=null;tt!==null;)tt.alternate!==null&&(nt=tt),tt=tt.sibling;nt===null?_e||et.tail===null?et.tail=null:et.tail.sibling=null:nt.sibling=null}}function S$1(et){var _e=et.alternate!==null&&et.alternate.child===et.child,tt=0,nt=0;if(_e)for(var rt=et.child;rt!==null;)tt|=rt.lanes|rt.childLanes,nt|=rt.subtreeFlags&14680064,nt|=rt.flags&14680064,rt.return=et,rt=rt.sibling;else for(rt=et.child;rt!==null;)tt|=rt.lanes|rt.childLanes,nt|=rt.subtreeFlags,nt|=rt.flags,rt.return=et,rt=rt.sibling;return et.subtreeFlags|=nt,et.childLanes=tt,_e}function Fj(et,_e,tt){var nt=_e.pendingProps;switch(wg(_e),_e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(_e),null;case 1:return Zf(_e.type)&&$f(),S$1(_e),null;case 3:return nt=_e.stateNode,Jh(),E$2(Wf),E$2(H$2),Oh(),nt.pendingContext&&(nt.context=nt.pendingContext,nt.pendingContext=null),(et===null||et.child===null)&&(Gg(_e)?_e.flags|=4:et===null||et.memoizedState.isDehydrated&&!(_e.flags&256)||(_e.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(et,_e),S$1(_e),null;case 5:Lh(_e);var rt=Hh(Gh.current);if(tt=_e.type,et!==null&&_e.stateNode!=null)Cj(et,_e,tt,nt,rt),et.ref!==_e.ref&&(_e.flags|=512,_e.flags|=2097152);else{if(!nt){if(_e.stateNode===null)throw Error(p$4(166));return S$1(_e),null}if(et=Hh(Eh.current),Gg(_e)){nt=_e.stateNode,tt=_e.type;var it=_e.memoizedProps;switch(nt[Of]=_e,nt[Pf]=it,et=(_e.mode&1)!==0,tt){case"dialog":D$2("cancel",nt),D$2("close",nt);break;case"iframe":case"object":case"embed":D$2("load",nt);break;case"video":case"audio":for(rt=0;rt<lf.length;rt++)D$2(lf[rt],nt);break;case"source":D$2("error",nt);break;case"img":case"image":case"link":D$2("error",nt),D$2("load",nt);break;case"details":D$2("toggle",nt);break;case"input":Za(nt,it),D$2("invalid",nt);break;case"select":nt._wrapperState={wasMultiple:!!it.multiple},D$2("invalid",nt);break;case"textarea":hb(nt,it),D$2("invalid",nt)}ub(tt,it),rt=null;for(var ot in it)if(it.hasOwnProperty(ot)){var st=it[ot];ot==="children"?typeof st=="string"?nt.textContent!==st&&(it.suppressHydrationWarning!==!0&&Af(nt.textContent,st,et),rt=["children",st]):typeof st=="number"&&nt.textContent!==""+st&&(it.suppressHydrationWarning!==!0&&Af(nt.textContent,st,et),rt=["children",""+st]):ea.hasOwnProperty(ot)&&st!=null&&ot==="onScroll"&&D$2("scroll",nt)}switch(tt){case"input":Va(nt),db$1(nt,it,!0);break;case"textarea":Va(nt),jb(nt);break;case"select":case"option":break;default:typeof it.onClick=="function"&&(nt.onclick=Bf)}nt=rt,_e.updateQueue=nt,nt!==null&&(_e.flags|=4)}else{ot=rt.nodeType===9?rt:rt.ownerDocument,et==="http://www.w3.org/1999/xhtml"&&(et=kb(tt)),et==="http://www.w3.org/1999/xhtml"?tt==="script"?(et=ot.createElement("div"),et.innerHTML="<script><\/script>",et=et.removeChild(et.firstChild)):typeof nt.is=="string"?et=ot.createElement(tt,{is:nt.is}):(et=ot.createElement(tt),tt==="select"&&(ot=et,nt.multiple?ot.multiple=!0:nt.size&&(ot.size=nt.size))):et=ot.createElementNS(et,tt),et[Of]=_e,et[Pf]=nt,Aj(et,_e,!1,!1),_e.stateNode=et;e:{switch(ot=vb(tt,nt),tt){case"dialog":D$2("cancel",et),D$2("close",et),rt=nt;break;case"iframe":case"object":case"embed":D$2("load",et),rt=nt;break;case"video":case"audio":for(rt=0;rt<lf.length;rt++)D$2(lf[rt],et);rt=nt;break;case"source":D$2("error",et),rt=nt;break;case"img":case"image":case"link":D$2("error",et),D$2("load",et),rt=nt;break;case"details":D$2("toggle",et),rt=nt;break;case"input":Za(et,nt),rt=Ya(et,nt),D$2("invalid",et);break;case"option":rt=nt;break;case"select":et._wrapperState={wasMultiple:!!nt.multiple},rt=A$3({},nt,{value:void 0}),D$2("invalid",et);break;case"textarea":hb(et,nt),rt=gb(et,nt),D$2("invalid",et);break;default:rt=nt}ub(tt,rt),st=rt;for(it in st)if(st.hasOwnProperty(it)){var at=st[it];it==="style"?sb(et,at):it==="dangerouslySetInnerHTML"?(at=at?at.__html:void 0,at!=null&&nb(et,at)):it==="children"?typeof at=="string"?(tt!=="textarea"||at!=="")&&ob(et,at):typeof at=="number"&&ob(et,""+at):it!=="suppressContentEditableWarning"&&it!=="suppressHydrationWarning"&&it!=="autoFocus"&&(ea.hasOwnProperty(it)?at!=null&&it==="onScroll"&&D$2("scroll",et):at!=null&&ta(et,it,at,ot))}switch(tt){case"input":Va(et),db$1(et,nt,!1);break;case"textarea":Va(et),jb(et);break;case"option":nt.value!=null&&et.setAttribute("value",""+Sa(nt.value));break;case"select":et.multiple=!!nt.multiple,it=nt.value,it!=null?fb(et,!!nt.multiple,it,!1):nt.defaultValue!=null&&fb(et,!!nt.multiple,nt.defaultValue,!0);break;default:typeof rt.onClick=="function"&&(et.onclick=Bf)}switch(tt){case"button":case"input":case"select":case"textarea":nt=!!nt.autoFocus;break e;case"img":nt=!0;break e;default:nt=!1}}nt&&(_e.flags|=4)}_e.ref!==null&&(_e.flags|=512,_e.flags|=2097152)}return S$1(_e),null;case 6:if(et&&_e.stateNode!=null)Dj(et,_e,et.memoizedProps,nt);else{if(typeof nt!="string"&&_e.stateNode===null)throw Error(p$4(166));if(tt=Hh(Gh.current),Hh(Eh.current),Gg(_e)){if(nt=_e.stateNode,tt=_e.memoizedProps,nt[Of]=_e,(it=nt.nodeValue!==tt)&&(et=xg,et!==null))switch(et.tag){case 3:Af(nt.nodeValue,tt,(et.mode&1)!==0);break;case 5:et.memoizedProps.suppressHydrationWarning!==!0&&Af(nt.nodeValue,tt,(et.mode&1)!==0)}it&&(_e.flags|=4)}else nt=(tt.nodeType===9?tt:tt.ownerDocument).createTextNode(nt),nt[Of]=_e,_e.stateNode=nt}return S$1(_e),null;case 13:if(E$2(M$1),nt=_e.memoizedState,et===null||et.memoizedState!==null&&et.memoizedState.dehydrated!==null){if(I$2&&yg!==null&&_e.mode&1&&!(_e.flags&128))Hg(),Ig(),_e.flags|=98560,it=!1;else if(it=Gg(_e),nt!==null&&nt.dehydrated!==null){if(et===null){if(!it)throw Error(p$4(318));if(it=_e.memoizedState,it=it!==null?it.dehydrated:null,!it)throw Error(p$4(317));it[Of]=_e}else Ig(),!(_e.flags&128)&&(_e.memoizedState=null),_e.flags|=4;S$1(_e),it=!1}else zg!==null&&(Gj(zg),zg=null),it=!0;if(!it)return _e.flags&65536?_e:null}return _e.flags&128?(_e.lanes=tt,_e):(nt=nt!==null,nt!==(et!==null&&et.memoizedState!==null)&&nt&&(_e.child.flags|=8192,_e.mode&1&&(et===null||M$1.current&1?T$1===0&&(T$1=3):uj())),_e.updateQueue!==null&&(_e.flags|=4),S$1(_e),null);case 4:return Jh(),Bj(et,_e),et===null&&sf(_e.stateNode.containerInfo),S$1(_e),null;case 10:return Rg(_e.type._context),S$1(_e),null;case 17:return Zf(_e.type)&&$f(),S$1(_e),null;case 19:if(E$2(M$1),it=_e.memoizedState,it===null)return S$1(_e),null;if(nt=(_e.flags&128)!==0,ot=it.rendering,ot===null)if(nt)Ej(it,!1);else{if(T$1!==0||et!==null&&et.flags&128)for(et=_e.child;et!==null;){if(ot=Mh(et),ot!==null){for(_e.flags|=128,Ej(it,!1),nt=ot.updateQueue,nt!==null&&(_e.updateQueue=nt,_e.flags|=4),_e.subtreeFlags=0,nt=tt,tt=_e.child;tt!==null;)it=tt,et=nt,it.flags&=14680066,ot=it.alternate,ot===null?(it.childLanes=0,it.lanes=et,it.child=null,it.subtreeFlags=0,it.memoizedProps=null,it.memoizedState=null,it.updateQueue=null,it.dependencies=null,it.stateNode=null):(it.childLanes=ot.childLanes,it.lanes=ot.lanes,it.child=ot.child,it.subtreeFlags=0,it.deletions=null,it.memoizedProps=ot.memoizedProps,it.memoizedState=ot.memoizedState,it.updateQueue=ot.updateQueue,it.type=ot.type,et=ot.dependencies,it.dependencies=et===null?null:{lanes:et.lanes,firstContext:et.firstContext}),tt=tt.sibling;return G$2(M$1,M$1.current&1|2),_e.child}et=et.sibling}it.tail!==null&&B$2()>Hj&&(_e.flags|=128,nt=!0,Ej(it,!1),_e.lanes=4194304)}else{if(!nt)if(et=Mh(ot),et!==null){if(_e.flags|=128,nt=!0,tt=et.updateQueue,tt!==null&&(_e.updateQueue=tt,_e.flags|=4),Ej(it,!0),it.tail===null&&it.tailMode==="hidden"&&!ot.alternate&&!I$2)return S$1(_e),null}else 2*B$2()-it.renderingStartTime>Hj&&tt!==1073741824&&(_e.flags|=128,nt=!0,Ej(it,!1),_e.lanes=4194304);it.isBackwards?(ot.sibling=_e.child,_e.child=ot):(tt=it.last,tt!==null?tt.sibling=ot:_e.child=ot,it.last=ot)}return it.tail!==null?(_e=it.tail,it.rendering=_e,it.tail=_e.sibling,it.renderingStartTime=B$2(),_e.sibling=null,tt=M$1.current,G$2(M$1,nt?tt&1|2:tt&1),_e):(S$1(_e),null);case 22:case 23:return Ij(),nt=_e.memoizedState!==null,et!==null&&et.memoizedState!==null!==nt&&(_e.flags|=8192),nt&&_e.mode&1?gj&1073741824&&(S$1(_e),_e.subtreeFlags&6&&(_e.flags|=8192)):S$1(_e),null;case 24:return null;case 25:return null}throw Error(p$4(156,_e.tag))}function Jj(et,_e){switch(wg(_e),_e.tag){case 1:return Zf(_e.type)&&$f(),et=_e.flags,et&65536?(_e.flags=et&-65537|128,_e):null;case 3:return Jh(),E$2(Wf),E$2(H$2),Oh(),et=_e.flags,et&65536&&!(et&128)?(_e.flags=et&-65537|128,_e):null;case 5:return Lh(_e),null;case 13:if(E$2(M$1),et=_e.memoizedState,et!==null&&et.dehydrated!==null){if(_e.alternate===null)throw Error(p$4(340));Ig()}return et=_e.flags,et&65536?(_e.flags=et&-65537|128,_e):null;case 19:return E$2(M$1),null;case 4:return Jh(),null;case 10:return Rg(_e.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$1=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Mj(et,_e){var tt=et.ref;if(tt!==null)if(typeof tt=="function")try{tt(null)}catch(nt){W$1(et,_e,nt)}else tt.current=null}function Nj(et,_e,tt){try{tt()}catch(nt){W$1(et,_e,nt)}}var Oj=!1;function Pj(et,_e){if(Cf=dd,et=Me(),Ne(et)){if("selectionStart"in et)var tt={start:et.selectionStart,end:et.selectionEnd};else e:{tt=(tt=et.ownerDocument)&&tt.defaultView||window;var nt=tt.getSelection&&tt.getSelection();if(nt&&nt.rangeCount!==0){tt=nt.anchorNode;var rt=nt.anchorOffset,it=nt.focusNode;nt=nt.focusOffset;try{tt.nodeType,it.nodeType}catch{tt=null;break e}var ot=0,st=-1,at=-1,lt=0,ct=0,ut=et,dt=null;t:for(;;){for(var ft;ut!==tt||rt!==0&&ut.nodeType!==3||(st=ot+rt),ut!==it||nt!==0&&ut.nodeType!==3||(at=ot+nt),ut.nodeType===3&&(ot+=ut.nodeValue.length),(ft=ut.firstChild)!==null;)dt=ut,ut=ft;for(;;){if(ut===et)break t;if(dt===tt&&++lt===rt&&(st=ot),dt===it&&++ct===nt&&(at=ot),(ft=ut.nextSibling)!==null)break;ut=dt,dt=ut.parentNode}ut=ft}tt=st===-1||at===-1?null:{start:st,end:at}}else tt=null}tt=tt||{start:0,end:0}}else tt=null;for(Df={focusedElem:et,selectionRange:tt},dd=!1,V$1=_e;V$1!==null;)if(_e=V$1,et=_e.child,(_e.subtreeFlags&1028)!==0&&et!==null)et.return=_e,V$1=et;else for(;V$1!==null;){_e=V$1;try{var pt=_e.alternate;if(_e.flags&1024)switch(_e.tag){case 0:case 11:case 15:break;case 1:if(pt!==null){var mt=pt.memoizedProps,xt=pt.memoizedState,gt=_e.stateNode,ht=gt.getSnapshotBeforeUpdate(_e.elementType===_e.type?mt:Lg(_e.type,mt),xt);gt.__reactInternalSnapshotBeforeUpdate=ht}break;case 3:var yt=_e.stateNode.containerInfo;yt.nodeType===1?yt.textContent="":yt.nodeType===9&&yt.documentElement&&yt.removeChild(yt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$4(163))}}catch(vt){W$1(_e,_e.return,vt)}if(et=_e.sibling,et!==null){et.return=_e.return,V$1=et;break}V$1=_e.return}return pt=Oj,Oj=!1,pt}function Qj(et,_e,tt){var nt=_e.updateQueue;if(nt=nt!==null?nt.lastEffect:null,nt!==null){var rt=nt=nt.next;do{if((rt.tag&et)===et){var it=rt.destroy;rt.destroy=void 0,it!==void 0&&Nj(_e,tt,it)}rt=rt.next}while(rt!==nt)}}function Rj(et,_e){if(_e=_e.updateQueue,_e=_e!==null?_e.lastEffect:null,_e!==null){var tt=_e=_e.next;do{if((tt.tag&et)===et){var nt=tt.create;tt.destroy=nt()}tt=tt.next}while(tt!==_e)}}function Sj(et){var _e=et.ref;if(_e!==null){var tt=et.stateNode;switch(et.tag){case 5:et=tt;break;default:et=tt}typeof _e=="function"?_e(et):_e.current=et}}function Tj(et){var _e=et.alternate;_e!==null&&(et.alternate=null,Tj(_e)),et.child=null,et.deletions=null,et.sibling=null,et.tag===5&&(_e=et.stateNode,_e!==null&&(delete _e[Of],delete _e[Pf],delete _e[of],delete _e[Qf],delete _e[Rf])),et.stateNode=null,et.return=null,et.dependencies=null,et.memoizedProps=null,et.memoizedState=null,et.pendingProps=null,et.stateNode=null,et.updateQueue=null}function Uj(et){return et.tag===5||et.tag===3||et.tag===4}function Vj(et){e:for(;;){for(;et.sibling===null;){if(et.return===null||Uj(et.return))return null;et=et.return}for(et.sibling.return=et.return,et=et.sibling;et.tag!==5&&et.tag!==6&&et.tag!==18;){if(et.flags&2||et.child===null||et.tag===4)continue e;et.child.return=et,et=et.child}if(!(et.flags&2))return et.stateNode}}function Wj(et,_e,tt){var nt=et.tag;if(nt===5||nt===6)et=et.stateNode,_e?tt.nodeType===8?tt.parentNode.insertBefore(et,_e):tt.insertBefore(et,_e):(tt.nodeType===8?(_e=tt.parentNode,_e.insertBefore(et,tt)):(_e=tt,_e.appendChild(et)),tt=tt._reactRootContainer,tt!=null||_e.onclick!==null||(_e.onclick=Bf));else if(nt!==4&&(et=et.child,et!==null))for(Wj(et,_e,tt),et=et.sibling;et!==null;)Wj(et,_e,tt),et=et.sibling}function Xj(et,_e,tt){var nt=et.tag;if(nt===5||nt===6)et=et.stateNode,_e?tt.insertBefore(et,_e):tt.appendChild(et);else if(nt!==4&&(et=et.child,et!==null))for(Xj(et,_e,tt),et=et.sibling;et!==null;)Xj(et,_e,tt),et=et.sibling}var X$1=null,Yj=!1;function Zj(et,_e,tt){for(tt=tt.child;tt!==null;)ak(et,_e,tt),tt=tt.sibling}function ak(et,_e,tt){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,tt)}catch{}switch(tt.tag){case 5:U$1||Mj(tt,_e);case 6:var nt=X$1,rt=Yj;X$1=null,Zj(et,_e,tt),X$1=nt,Yj=rt,X$1!==null&&(Yj?(et=X$1,tt=tt.stateNode,et.nodeType===8?et.parentNode.removeChild(tt):et.removeChild(tt)):X$1.removeChild(tt.stateNode));break;case 18:X$1!==null&&(Yj?(et=X$1,tt=tt.stateNode,et.nodeType===8?Kf(et.parentNode,tt):et.nodeType===1&&Kf(et,tt),bd(et)):Kf(X$1,tt.stateNode));break;case 4:nt=X$1,rt=Yj,X$1=tt.stateNode.containerInfo,Yj=!0,Zj(et,_e,tt),X$1=nt,Yj=rt;break;case 0:case 11:case 14:case 15:if(!U$1&&(nt=tt.updateQueue,nt!==null&&(nt=nt.lastEffect,nt!==null))){rt=nt=nt.next;do{var it=rt,ot=it.destroy;it=it.tag,ot!==void 0&&(it&2||it&4)&&Nj(tt,_e,ot),rt=rt.next}while(rt!==nt)}Zj(et,_e,tt);break;case 1:if(!U$1&&(Mj(tt,_e),nt=tt.stateNode,typeof nt.componentWillUnmount=="function"))try{nt.props=tt.memoizedProps,nt.state=tt.memoizedState,nt.componentWillUnmount()}catch(st){W$1(tt,_e,st)}Zj(et,_e,tt);break;case 21:Zj(et,_e,tt);break;case 22:tt.mode&1?(U$1=(nt=U$1)||tt.memoizedState!==null,Zj(et,_e,tt),U$1=nt):Zj(et,_e,tt);break;default:Zj(et,_e,tt)}}function bk(et){var _e=et.updateQueue;if(_e!==null){et.updateQueue=null;var tt=et.stateNode;tt===null&&(tt=et.stateNode=new Lj),_e.forEach(function(nt){var rt=ck.bind(null,et,nt);tt.has(nt)||(tt.add(nt),nt.then(rt,rt))})}}function dk(et,_e){var tt=_e.deletions;if(tt!==null)for(var nt=0;nt<tt.length;nt++){var rt=tt[nt];try{var it=et,ot=_e,st=ot;e:for(;st!==null;){switch(st.tag){case 5:X$1=st.stateNode,Yj=!1;break e;case 3:X$1=st.stateNode.containerInfo,Yj=!0;break e;case 4:X$1=st.stateNode.containerInfo,Yj=!0;break e}st=st.return}if(X$1===null)throw Error(p$4(160));ak(it,ot,rt),X$1=null,Yj=!1;var at=rt.alternate;at!==null&&(at.return=null),rt.return=null}catch(lt){W$1(rt,_e,lt)}}if(_e.subtreeFlags&12854)for(_e=_e.child;_e!==null;)ek(_e,et),_e=_e.sibling}function ek(et,_e){var tt=et.alternate,nt=et.flags;switch(et.tag){case 0:case 11:case 14:case 15:if(dk(_e,et),fk(et),nt&4){try{Qj(3,et,et.return),Rj(3,et)}catch(mt){W$1(et,et.return,mt)}try{Qj(5,et,et.return)}catch(mt){W$1(et,et.return,mt)}}break;case 1:dk(_e,et),fk(et),nt&512&&tt!==null&&Mj(tt,tt.return);break;case 5:if(dk(_e,et),fk(et),nt&512&&tt!==null&&Mj(tt,tt.return),et.flags&32){var rt=et.stateNode;try{ob(rt,"")}catch(mt){W$1(et,et.return,mt)}}if(nt&4&&(rt=et.stateNode,rt!=null)){var it=et.memoizedProps,ot=tt!==null?tt.memoizedProps:it,st=et.type,at=et.updateQueue;if(et.updateQueue=null,at!==null)try{st==="input"&&it.type==="radio"&&it.name!=null&&ab(rt,it),vb(st,ot);var lt=vb(st,it);for(ot=0;ot<at.length;ot+=2){var ct=at[ot],ut=at[ot+1];ct==="style"?sb(rt,ut):ct==="dangerouslySetInnerHTML"?nb(rt,ut):ct==="children"?ob(rt,ut):ta(rt,ct,ut,lt)}switch(st){case"input":bb(rt,it);break;case"textarea":ib(rt,it);break;case"select":var dt=rt._wrapperState.wasMultiple;rt._wrapperState.wasMultiple=!!it.multiple;var ft=it.value;ft!=null?fb(rt,!!it.multiple,ft,!1):dt!==!!it.multiple&&(it.defaultValue!=null?fb(rt,!!it.multiple,it.defaultValue,!0):fb(rt,!!it.multiple,it.multiple?[]:"",!1))}rt[Pf]=it}catch(mt){W$1(et,et.return,mt)}}break;case 6:if(dk(_e,et),fk(et),nt&4){if(et.stateNode===null)throw Error(p$4(162));rt=et.stateNode,it=et.memoizedProps;try{rt.nodeValue=it}catch(mt){W$1(et,et.return,mt)}}break;case 3:if(dk(_e,et),fk(et),nt&4&&tt!==null&&tt.memoizedState.isDehydrated)try{bd(_e.containerInfo)}catch(mt){W$1(et,et.return,mt)}break;case 4:dk(_e,et),fk(et);break;case 13:dk(_e,et),fk(et),rt=et.child,rt.flags&8192&&(it=rt.memoizedState!==null,rt.stateNode.isHidden=it,!it||rt.alternate!==null&&rt.alternate.memoizedState!==null||(gk=B$2())),nt&4&&bk(et);break;case 22:if(ct=tt!==null&&tt.memoizedState!==null,et.mode&1?(U$1=(lt=U$1)||ct,dk(_e,et),U$1=lt):dk(_e,et),fk(et),nt&8192){if(lt=et.memoizedState!==null,(et.stateNode.isHidden=lt)&&!ct&&et.mode&1)for(V$1=et,ct=et.child;ct!==null;){for(ut=V$1=ct;V$1!==null;){switch(dt=V$1,ft=dt.child,dt.tag){case 0:case 11:case 14:case 15:Qj(4,dt,dt.return);break;case 1:Mj(dt,dt.return);var pt=dt.stateNode;if(typeof pt.componentWillUnmount=="function"){nt=dt,tt=dt.return;try{_e=nt,pt.props=_e.memoizedProps,pt.state=_e.memoizedState,pt.componentWillUnmount()}catch(mt){W$1(nt,tt,mt)}}break;case 5:Mj(dt,dt.return);break;case 22:if(dt.memoizedState!==null){hk(ut);continue}}ft!==null?(ft.return=dt,V$1=ft):hk(ut)}ct=ct.sibling}e:for(ct=null,ut=et;;){if(ut.tag===5){if(ct===null){ct=ut;try{rt=ut.stateNode,lt?(it=rt.style,typeof it.setProperty=="function"?it.setProperty("display","none","important"):it.display="none"):(st=ut.stateNode,at=ut.memoizedProps.style,ot=at!=null&&at.hasOwnProperty("display")?at.display:null,st.style.display=rb("display",ot))}catch(mt){W$1(et,et.return,mt)}}}else if(ut.tag===6){if(ct===null)try{ut.stateNode.nodeValue=lt?"":ut.memoizedProps}catch(mt){W$1(et,et.return,mt)}}else if((ut.tag!==22&&ut.tag!==23||ut.memoizedState===null||ut===et)&&ut.child!==null){ut.child.return=ut,ut=ut.child;continue}if(ut===et)break e;for(;ut.sibling===null;){if(ut.return===null||ut.return===et)break e;ct===ut&&(ct=null),ut=ut.return}ct===ut&&(ct=null),ut.sibling.return=ut.return,ut=ut.sibling}}break;case 19:dk(_e,et),fk(et),nt&4&&bk(et);break;case 21:break;default:dk(_e,et),fk(et)}}function fk(et){var _e=et.flags;if(_e&2){try{e:{for(var tt=et.return;tt!==null;){if(Uj(tt)){var nt=tt;break e}tt=tt.return}throw Error(p$4(160))}switch(nt.tag){case 5:var rt=nt.stateNode;nt.flags&32&&(ob(rt,""),nt.flags&=-33);var it=Vj(et);Xj(et,it,rt);break;case 3:case 4:var ot=nt.stateNode.containerInfo,st=Vj(et);Wj(et,st,ot);break;default:throw Error(p$4(161))}}catch(at){W$1(et,et.return,at)}et.flags&=-3}_e&4096&&(et.flags&=-4097)}function ik(et,_e,tt){V$1=et,jk(et)}function jk(et,_e,tt){for(var nt=(et.mode&1)!==0;V$1!==null;){var rt=V$1,it=rt.child;if(rt.tag===22&&nt){var ot=rt.memoizedState!==null||Kj;if(!ot){var st=rt.alternate,at=st!==null&&st.memoizedState!==null||U$1;st=Kj;var lt=U$1;if(Kj=ot,(U$1=at)&&!lt)for(V$1=rt;V$1!==null;)ot=V$1,at=ot.child,ot.tag===22&&ot.memoizedState!==null?kk(rt):at!==null?(at.return=ot,V$1=at):kk(rt);for(;it!==null;)V$1=it,jk(it),it=it.sibling;V$1=rt,Kj=st,U$1=lt}lk(et)}else rt.subtreeFlags&8772&&it!==null?(it.return=rt,V$1=it):lk(et)}}function lk(et){for(;V$1!==null;){var _e=V$1;if(_e.flags&8772){var tt=_e.alternate;try{if(_e.flags&8772)switch(_e.tag){case 0:case 11:case 15:U$1||Rj(5,_e);break;case 1:var nt=_e.stateNode;if(_e.flags&4&&!U$1)if(tt===null)nt.componentDidMount();else{var rt=_e.elementType===_e.type?tt.memoizedProps:Lg(_e.type,tt.memoizedProps);nt.componentDidUpdate(rt,tt.memoizedState,nt.__reactInternalSnapshotBeforeUpdate)}var it=_e.updateQueue;it!==null&&ih(_e,it,nt);break;case 3:var ot=_e.updateQueue;if(ot!==null){if(tt=null,_e.child!==null)switch(_e.child.tag){case 5:tt=_e.child.stateNode;break;case 1:tt=_e.child.stateNode}ih(_e,ot,tt)}break;case 5:var st=_e.stateNode;if(tt===null&&_e.flags&4){tt=st;var at=_e.memoizedProps;switch(_e.type){case"button":case"input":case"select":case"textarea":at.autoFocus&&tt.focus();break;case"img":at.src&&(tt.src=at.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_e.memoizedState===null){var lt=_e.alternate;if(lt!==null){var ct=lt.memoizedState;if(ct!==null){var ut=ct.dehydrated;ut!==null&&bd(ut)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$4(163))}U$1||_e.flags&512&&Sj(_e)}catch(dt){W$1(_e,_e.return,dt)}}if(_e===et){V$1=null;break}if(tt=_e.sibling,tt!==null){tt.return=_e.return,V$1=tt;break}V$1=_e.return}}function hk(et){for(;V$1!==null;){var _e=V$1;if(_e===et){V$1=null;break}var tt=_e.sibling;if(tt!==null){tt.return=_e.return,V$1=tt;break}V$1=_e.return}}function kk(et){for(;V$1!==null;){var _e=V$1;try{switch(_e.tag){case 0:case 11:case 15:var tt=_e.return;try{Rj(4,_e)}catch(at){W$1(_e,tt,at)}break;case 1:var nt=_e.stateNode;if(typeof nt.componentDidMount=="function"){var rt=_e.return;try{nt.componentDidMount()}catch(at){W$1(_e,rt,at)}}var it=_e.return;try{Sj(_e)}catch(at){W$1(_e,it,at)}break;case 5:var ot=_e.return;try{Sj(_e)}catch(at){W$1(_e,ot,at)}}}catch(at){W$1(_e,_e.return,at)}if(_e===et){V$1=null;break}var st=_e.sibling;if(st!==null){st.return=_e.return,V$1=st;break}V$1=_e.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K$1=0,R$1=null,Y$1=null,Z$1=0,gj=0,fj=Uf(0),T$1=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$1(){return K$1&6?B$2():Bk!==-1?Bk:Bk=B$2()}function lh(et){return et.mode&1?K$1&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(et=C$2,et!==0||(et=window.event,et=et===void 0?16:jd(et.type)),et):1}function mh(et,_e,tt,nt){if(50<zk)throw zk=0,Ak=null,Error(p$4(185));Ac(et,tt,nt),(!(K$1&2)||et!==R$1)&&(et===R$1&&(!(K$1&2)&&(rk|=tt),T$1===4&&Dk(et,Z$1)),Ek(et,nt),tt===1&&K$1===0&&!(_e.mode&1)&&(Hj=B$2()+500,fg&&jg()))}function Ek(et,_e){var tt=et.callbackNode;wc(et,_e);var nt=uc(et,et===R$1?Z$1:0);if(nt===0)tt!==null&&bc(tt),et.callbackNode=null,et.callbackPriority=0;else if(_e=nt&-nt,et.callbackPriority!==_e){if(tt!=null&&bc(tt),_e===1)et.tag===0?ig(Fk.bind(null,et)):hg(Fk.bind(null,et)),Jf(function(){!(K$1&6)&&jg()}),tt=null;else{switch(Dc(nt)){case 1:tt=fc;break;case 4:tt=gc;break;case 16:tt=hc;break;case 536870912:tt=jc;break;default:tt=hc}tt=Gk(tt,Hk.bind(null,et))}et.callbackPriority=_e,et.callbackNode=tt}}function Hk(et,_e){if(Bk=-1,Ck=0,K$1&6)throw Error(p$4(327));var tt=et.callbackNode;if(Ik()&&et.callbackNode!==tt)return null;var nt=uc(et,et===R$1?Z$1:0);if(nt===0)return null;if(nt&30||nt&et.expiredLanes||_e)_e=Jk(et,nt);else{_e=nt;var rt=K$1;K$1|=2;var it=Kk();(R$1!==et||Z$1!==_e)&&(vk=null,Hj=B$2()+500,Lk(et,_e));do try{Mk();break}catch(st){Nk(et,st)}while(!0);Qg(),nk.current=it,K$1=rt,Y$1!==null?_e=0:(R$1=null,Z$1=0,_e=T$1)}if(_e!==0){if(_e===2&&(rt=xc(et),rt!==0&&(nt=rt,_e=Ok(et,rt))),_e===1)throw tt=qk,Lk(et,0),Dk(et,nt),Ek(et,B$2()),tt;if(_e===6)Dk(et,nt);else{if(rt=et.current.alternate,!(nt&30)&&!Pk(rt)&&(_e=Jk(et,nt),_e===2&&(it=xc(et),it!==0&&(nt=it,_e=Ok(et,it))),_e===1))throw tt=qk,Lk(et,0),Dk(et,nt),Ek(et,B$2()),tt;switch(et.finishedWork=rt,et.finishedLanes=nt,_e){case 0:case 1:throw Error(p$4(345));case 2:Qk(et,uk,vk);break;case 3:if(Dk(et,nt),(nt&130023424)===nt&&(_e=gk+500-B$2(),10<_e)){if(uc(et,0)!==0)break;if(rt=et.suspendedLanes,(rt&nt)!==nt){L$1(),et.pingedLanes|=et.suspendedLanes&rt;break}et.timeoutHandle=Ff(Qk.bind(null,et,uk,vk),_e);break}Qk(et,uk,vk);break;case 4:if(Dk(et,nt),(nt&4194240)===nt)break;for(_e=et.eventTimes,rt=-1;0<nt;){var ot=31-oc(nt);it=1<<ot,ot=_e[ot],ot>rt&&(rt=ot),nt&=~it}if(nt=rt,nt=B$2()-nt,nt=(120>nt?120:480>nt?480:1080>nt?1080:1920>nt?1920:3e3>nt?3e3:4320>nt?4320:1960*mk(nt/1960))-nt,10<nt){et.timeoutHandle=Ff(Qk.bind(null,et,uk,vk),nt);break}Qk(et,uk,vk);break;case 5:Qk(et,uk,vk);break;default:throw Error(p$4(329))}}}return Ek(et,B$2()),et.callbackNode===tt?Hk.bind(null,et):null}function Ok(et,_e){var tt=tk;return et.current.memoizedState.isDehydrated&&(Lk(et,_e).flags|=256),et=Jk(et,_e),et!==2&&(_e=uk,uk=tt,_e!==null&&Gj(_e)),et}function Gj(et){uk===null?uk=et:uk.push.apply(uk,et)}function Pk(et){for(var _e=et;;){if(_e.flags&16384){var tt=_e.updateQueue;if(tt!==null&&(tt=tt.stores,tt!==null))for(var nt=0;nt<tt.length;nt++){var rt=tt[nt],it=rt.getSnapshot;rt=rt.value;try{if(!He(it(),rt))return!1}catch{return!1}}}if(tt=_e.child,_e.subtreeFlags&16384&&tt!==null)tt.return=_e,_e=tt;else{if(_e===et)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===et)return!0;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}}return!0}function Dk(et,_e){for(_e&=~sk,_e&=~rk,et.suspendedLanes|=_e,et.pingedLanes&=~_e,et=et.expirationTimes;0<_e;){var tt=31-oc(_e),nt=1<<tt;et[tt]=-1,_e&=~nt}}function Fk(et){if(K$1&6)throw Error(p$4(327));Ik();var _e=uc(et,0);if(!(_e&1))return Ek(et,B$2()),null;var tt=Jk(et,_e);if(et.tag!==0&&tt===2){var nt=xc(et);nt!==0&&(_e=nt,tt=Ok(et,nt))}if(tt===1)throw tt=qk,Lk(et,0),Dk(et,_e),Ek(et,B$2()),tt;if(tt===6)throw Error(p$4(345));return et.finishedWork=et.current.alternate,et.finishedLanes=_e,Qk(et,uk,vk),Ek(et,B$2()),null}function Rk(et,_e){var tt=K$1;K$1|=1;try{return et(_e)}finally{K$1=tt,K$1===0&&(Hj=B$2()+500,fg&&jg())}}function Sk(et){xk!==null&&xk.tag===0&&!(K$1&6)&&Ik();var _e=K$1;K$1|=1;var tt=pk.transition,nt=C$2;try{if(pk.transition=null,C$2=1,et)return et()}finally{C$2=nt,pk.transition=tt,K$1=_e,!(K$1&6)&&jg()}}function Ij(){gj=fj.current,E$2(fj)}function Lk(et,_e){et.finishedWork=null,et.finishedLanes=0;var tt=et.timeoutHandle;if(tt!==-1&&(et.timeoutHandle=-1,Gf(tt)),Y$1!==null)for(tt=Y$1.return;tt!==null;){var nt=tt;switch(wg(nt),nt.tag){case 1:nt=nt.type.childContextTypes,nt!=null&&$f();break;case 3:Jh(),E$2(Wf),E$2(H$2),Oh();break;case 5:Lh(nt);break;case 4:Jh();break;case 13:E$2(M$1);break;case 19:E$2(M$1);break;case 10:Rg(nt.type._context);break;case 22:case 23:Ij()}tt=tt.return}if(R$1=et,Y$1=et=wh(et.current,null),Z$1=gj=_e,T$1=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(_e=0;_e<Wg.length;_e++)if(tt=Wg[_e],nt=tt.interleaved,nt!==null){tt.interleaved=null;var rt=nt.next,it=tt.pending;if(it!==null){var ot=it.next;it.next=rt,nt.next=ot}tt.pending=nt}Wg=null}return et}function Nk(et,_e){do{var tt=Y$1;try{if(Qg(),Ph.current=ai,Sh){for(var nt=N$1.memoizedState;nt!==null;){var rt=nt.queue;rt!==null&&(rt.pending=null),nt=nt.next}Sh=!1}if(Rh=0,P$1=O$1=N$1=null,Th=!1,Uh=0,ok.current=null,tt===null||tt.return===null){T$1=1,qk=_e,Y$1=null;break}e:{var it=et,ot=tt.return,st=tt,at=_e;if(_e=Z$1,st.flags|=32768,at!==null&&typeof at=="object"&&typeof at.then=="function"){var lt=at,ct=st,ut=ct.tag;if(!(ct.mode&1)&&(ut===0||ut===11||ut===15)){var dt=ct.alternate;dt?(ct.updateQueue=dt.updateQueue,ct.memoizedState=dt.memoizedState,ct.lanes=dt.lanes):(ct.updateQueue=null,ct.memoizedState=null)}var ft=Vi(ot);if(ft!==null){ft.flags&=-257,Wi(ft,ot,st,it,_e),ft.mode&1&&Ti(it,lt,_e),_e=ft,at=lt;var pt=_e.updateQueue;if(pt===null){var mt=new Set;mt.add(at),_e.updateQueue=mt}else pt.add(at);break e}else{if(!(_e&1)){Ti(it,lt,_e),uj();break e}at=Error(p$4(426))}}else if(I$2&&st.mode&1){var xt=Vi(ot);if(xt!==null){!(xt.flags&65536)&&(xt.flags|=256),Wi(xt,ot,st,it,_e),Jg(Ki(at,st));break e}}it=at=Ki(at,st),T$1!==4&&(T$1=2),tk===null?tk=[it]:tk.push(it),it=ot;do{switch(it.tag){case 3:it.flags|=65536,_e&=-_e,it.lanes|=_e;var gt=Oi(it,at,_e);fh(it,gt);break e;case 1:st=at;var ht=it.type,yt=it.stateNode;if(!(it.flags&128)&&(typeof ht.getDerivedStateFromError=="function"||yt!==null&&typeof yt.componentDidCatch=="function"&&(Si===null||!Si.has(yt)))){it.flags|=65536,_e&=-_e,it.lanes|=_e;var vt=Ri(it,st,_e);fh(it,vt);break e}}it=it.return}while(it!==null)}Tk(tt)}catch(_t){_e=_t,Y$1===tt&&tt!==null&&(Y$1=tt=tt.return);continue}break}while(!0)}function Kk(){var et=nk.current;return nk.current=ai,et===null?ai:et}function uj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),R$1===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$1,Z$1)}function Jk(et,_e){var tt=K$1;K$1|=2;var nt=Kk();(R$1!==et||Z$1!==_e)&&(vk=null,Lk(et,_e));do try{Uk();break}catch(rt){Nk(et,rt)}while(!0);if(Qg(),K$1=tt,nk.current=nt,Y$1!==null)throw Error(p$4(261));return R$1=null,Z$1=0,T$1}function Uk(){for(;Y$1!==null;)Vk(Y$1)}function Mk(){for(;Y$1!==null&&!cc();)Vk(Y$1)}function Vk(et){var _e=Wk(et.alternate,et,gj);et.memoizedProps=et.pendingProps,_e===null?Tk(et):Y$1=_e,ok.current=null}function Tk(et){var _e=et;do{var tt=_e.alternate;if(et=_e.return,_e.flags&32768){if(tt=Jj(tt,_e),tt!==null){tt.flags&=32767,Y$1=tt;return}if(et!==null)et.flags|=32768,et.subtreeFlags=0,et.deletions=null;else{T$1=6,Y$1=null;return}}else if(tt=Fj(tt,_e,gj),tt!==null){Y$1=tt;return}if(_e=_e.sibling,_e!==null){Y$1=_e;return}Y$1=_e=et}while(_e!==null);T$1===0&&(T$1=5)}function Qk(et,_e,tt){var nt=C$2,rt=pk.transition;try{pk.transition=null,C$2=1,Xk(et,_e,tt,nt)}finally{pk.transition=rt,C$2=nt}return null}function Xk(et,_e,tt,nt){do Ik();while(xk!==null);if(K$1&6)throw Error(p$4(327));tt=et.finishedWork;var rt=et.finishedLanes;if(tt===null)return null;if(et.finishedWork=null,et.finishedLanes=0,tt===et.current)throw Error(p$4(177));et.callbackNode=null,et.callbackPriority=0;var it=tt.lanes|tt.childLanes;if(Bc(et,it),et===R$1&&(Y$1=R$1=null,Z$1=0),!(tt.subtreeFlags&2064)&&!(tt.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),it=(tt.flags&15990)!==0,tt.subtreeFlags&15990||it){it=pk.transition,pk.transition=null;var ot=C$2;C$2=1;var st=K$1;K$1|=4,ok.current=null,Pj(et,tt),ek(tt,et),Oe(Df),dd=!!Cf,Df=Cf=null,et.current=tt,ik(tt),dc(),K$1=st,C$2=ot,pk.transition=it}else et.current=tt;if(wk&&(wk=!1,xk=et,yk=rt),it=et.pendingLanes,it===0&&(Si=null),mc(tt.stateNode),Ek(et,B$2()),_e!==null)for(nt=et.onRecoverableError,tt=0;tt<_e.length;tt++)rt=_e[tt],nt(rt.value,{componentStack:rt.stack,digest:rt.digest});if(Pi)throw Pi=!1,et=Qi,Qi=null,et;return yk&1&&et.tag!==0&&Ik(),it=et.pendingLanes,it&1?et===Ak?zk++:(zk=0,Ak=et):zk=0,jg(),null}function Ik(){if(xk!==null){var et=Dc(yk),_e=pk.transition,tt=C$2;try{if(pk.transition=null,C$2=16>et?16:et,xk===null)var nt=!1;else{if(et=xk,xk=null,yk=0,K$1&6)throw Error(p$4(331));var rt=K$1;for(K$1|=4,V$1=et.current;V$1!==null;){var it=V$1,ot=it.child;if(V$1.flags&16){var st=it.deletions;if(st!==null){for(var at=0;at<st.length;at++){var lt=st[at];for(V$1=lt;V$1!==null;){var ct=V$1;switch(ct.tag){case 0:case 11:case 15:Qj(8,ct,it)}var ut=ct.child;if(ut!==null)ut.return=ct,V$1=ut;else for(;V$1!==null;){ct=V$1;var dt=ct.sibling,ft=ct.return;if(Tj(ct),ct===lt){V$1=null;break}if(dt!==null){dt.return=ft,V$1=dt;break}V$1=ft}}}var pt=it.alternate;if(pt!==null){var mt=pt.child;if(mt!==null){pt.child=null;do{var xt=mt.sibling;mt.sibling=null,mt=xt}while(mt!==null)}}V$1=it}}if(it.subtreeFlags&2064&&ot!==null)ot.return=it,V$1=ot;else e:for(;V$1!==null;){if(it=V$1,it.flags&2048)switch(it.tag){case 0:case 11:case 15:Qj(9,it,it.return)}var gt=it.sibling;if(gt!==null){gt.return=it.return,V$1=gt;break e}V$1=it.return}}var ht=et.current;for(V$1=ht;V$1!==null;){ot=V$1;var yt=ot.child;if(ot.subtreeFlags&2064&&yt!==null)yt.return=ot,V$1=yt;else e:for(ot=ht;V$1!==null;){if(st=V$1,st.flags&2048)try{switch(st.tag){case 0:case 11:case 15:Rj(9,st)}}catch(_t){W$1(st,st.return,_t)}if(st===ot){V$1=null;break e}var vt=st.sibling;if(vt!==null){vt.return=st.return,V$1=vt;break e}V$1=st.return}}if(K$1=rt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,et)}catch{}nt=!0}return nt}finally{C$2=tt,pk.transition=_e}}return!1}function Yk(et,_e,tt){_e=Ki(tt,_e),_e=Oi(et,_e,1),et=dh(et,_e,1),_e=L$1(),et!==null&&(Ac(et,1,_e),Ek(et,_e))}function W$1(et,_e,tt){if(et.tag===3)Yk(et,et,tt);else for(;_e!==null;){if(_e.tag===3){Yk(_e,et,tt);break}else if(_e.tag===1){var nt=_e.stateNode;if(typeof _e.type.getDerivedStateFromError=="function"||typeof nt.componentDidCatch=="function"&&(Si===null||!Si.has(nt))){et=Ki(tt,et),et=Ri(_e,et,1),_e=dh(_e,et,1),et=L$1(),_e!==null&&(Ac(_e,1,et),Ek(_e,et));break}}_e=_e.return}}function Ui(et,_e,tt){var nt=et.pingCache;nt!==null&&nt.delete(_e),_e=L$1(),et.pingedLanes|=et.suspendedLanes&tt,R$1===et&&(Z$1&tt)===tt&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B$2()-gk?Lk(et,0):sk|=tt),Ek(et,_e)}function Zk(et,_e){_e===0&&(et.mode&1?(_e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):_e=1);var tt=L$1();et=Zg(et,_e),et!==null&&(Ac(et,_e,tt),Ek(et,tt))}function vj(et){var _e=et.memoizedState,tt=0;_e!==null&&(tt=_e.retryLane),Zk(et,tt)}function ck(et,_e){var tt=0;switch(et.tag){case 13:var nt=et.stateNode,rt=et.memoizedState;rt!==null&&(tt=rt.retryLane);break;case 19:nt=et.stateNode;break;default:throw Error(p$4(314))}nt!==null&&nt.delete(_e),Zk(et,tt)}var Wk;Wk=function(et,_e,tt){if(et!==null)if(et.memoizedProps!==_e.pendingProps||Wf.current)Ug=!0;else{if(!(et.lanes&tt)&&!(_e.flags&128))return Ug=!1,zj(et,_e,tt);Ug=!!(et.flags&131072)}else Ug=!1,I$2&&_e.flags&1048576&&ug(_e,ng,_e.index);switch(_e.lanes=0,_e.tag){case 2:var nt=_e.type;jj(et,_e),et=_e.pendingProps;var rt=Yf(_e,H$2.current);Tg(_e,tt),rt=Xh(null,_e,nt,et,rt,tt);var it=bi();return _e.flags|=1,typeof rt=="object"&&rt!==null&&typeof rt.render=="function"&&rt.$$typeof===void 0?(_e.tag=1,_e.memoizedState=null,_e.updateQueue=null,Zf(nt)?(it=!0,cg(_e)):it=!1,_e.memoizedState=rt.state!==null&&rt.state!==void 0?rt.state:null,ah(_e),rt.updater=nh,_e.stateNode=rt,rt._reactInternals=_e,rh(_e,nt,et,tt),_e=kj(null,_e,nt,!0,it,tt)):(_e.tag=0,I$2&&it&&vg(_e),Yi(null,_e,rt,tt),_e=_e.child),_e;case 16:nt=_e.elementType;e:{switch(jj(et,_e),et=_e.pendingProps,rt=nt._init,nt=rt(nt._payload),_e.type=nt,rt=_e.tag=$k(nt),et=Lg(nt,et),rt){case 0:_e=dj(null,_e,nt,et,tt);break e;case 1:_e=ij(null,_e,nt,et,tt);break e;case 11:_e=Zi(null,_e,nt,et,tt);break e;case 14:_e=aj(null,_e,nt,Lg(nt.type,et),tt);break e}throw Error(p$4(306,nt,""))}return _e;case 0:return nt=_e.type,rt=_e.pendingProps,rt=_e.elementType===nt?rt:Lg(nt,rt),dj(et,_e,nt,rt,tt);case 1:return nt=_e.type,rt=_e.pendingProps,rt=_e.elementType===nt?rt:Lg(nt,rt),ij(et,_e,nt,rt,tt);case 3:e:{if(lj(_e),et===null)throw Error(p$4(387));nt=_e.pendingProps,it=_e.memoizedState,rt=it.element,bh(et,_e),gh(_e,nt,null,tt);var ot=_e.memoizedState;if(nt=ot.element,it.isDehydrated)if(it={element:nt,isDehydrated:!1,cache:ot.cache,pendingSuspenseBoundaries:ot.pendingSuspenseBoundaries,transitions:ot.transitions},_e.updateQueue.baseState=it,_e.memoizedState=it,_e.flags&256){rt=Ki(Error(p$4(423)),_e),_e=mj(et,_e,nt,tt,rt);break e}else if(nt!==rt){rt=Ki(Error(p$4(424)),_e),_e=mj(et,_e,nt,tt,rt);break e}else for(yg=Lf(_e.stateNode.containerInfo.firstChild),xg=_e,I$2=!0,zg=null,tt=Ch(_e,null,nt,tt),_e.child=tt;tt;)tt.flags=tt.flags&-3|4096,tt=tt.sibling;else{if(Ig(),nt===rt){_e=$i(et,_e,tt);break e}Yi(et,_e,nt,tt)}_e=_e.child}return _e;case 5:return Kh(_e),et===null&&Eg(_e),nt=_e.type,rt=_e.pendingProps,it=et!==null?et.memoizedProps:null,ot=rt.children,Ef(nt,rt)?ot=null:it!==null&&Ef(nt,it)&&(_e.flags|=32),hj(et,_e),Yi(et,_e,ot,tt),_e.child;case 6:return et===null&&Eg(_e),null;case 13:return pj(et,_e,tt);case 4:return Ih(_e,_e.stateNode.containerInfo),nt=_e.pendingProps,et===null?_e.child=Bh(_e,null,nt,tt):Yi(et,_e,nt,tt),_e.child;case 11:return nt=_e.type,rt=_e.pendingProps,rt=_e.elementType===nt?rt:Lg(nt,rt),Zi(et,_e,nt,rt,tt);case 7:return Yi(et,_e,_e.pendingProps,tt),_e.child;case 8:return Yi(et,_e,_e.pendingProps.children,tt),_e.child;case 12:return Yi(et,_e,_e.pendingProps.children,tt),_e.child;case 10:e:{if(nt=_e.type._context,rt=_e.pendingProps,it=_e.memoizedProps,ot=rt.value,G$2(Mg,nt._currentValue),nt._currentValue=ot,it!==null)if(He(it.value,ot)){if(it.children===rt.children&&!Wf.current){_e=$i(et,_e,tt);break e}}else for(it=_e.child,it!==null&&(it.return=_e);it!==null;){var st=it.dependencies;if(st!==null){ot=it.child;for(var at=st.firstContext;at!==null;){if(at.context===nt){if(it.tag===1){at=ch(-1,tt&-tt),at.tag=2;var lt=it.updateQueue;if(lt!==null){lt=lt.shared;var ct=lt.pending;ct===null?at.next=at:(at.next=ct.next,ct.next=at),lt.pending=at}}it.lanes|=tt,at=it.alternate,at!==null&&(at.lanes|=tt),Sg(it.return,tt,_e),st.lanes|=tt;break}at=at.next}}else if(it.tag===10)ot=it.type===_e.type?null:it.child;else if(it.tag===18){if(ot=it.return,ot===null)throw Error(p$4(341));ot.lanes|=tt,st=ot.alternate,st!==null&&(st.lanes|=tt),Sg(ot,tt,_e),ot=it.sibling}else ot=it.child;if(ot!==null)ot.return=it;else for(ot=it;ot!==null;){if(ot===_e){ot=null;break}if(it=ot.sibling,it!==null){it.return=ot.return,ot=it;break}ot=ot.return}it=ot}Yi(et,_e,rt.children,tt),_e=_e.child}return _e;case 9:return rt=_e.type,nt=_e.pendingProps.children,Tg(_e,tt),rt=Vg(rt),nt=nt(rt),_e.flags|=1,Yi(et,_e,nt,tt),_e.child;case 14:return nt=_e.type,rt=Lg(nt,_e.pendingProps),rt=Lg(nt.type,rt),aj(et,_e,nt,rt,tt);case 15:return cj(et,_e,_e.type,_e.pendingProps,tt);case 17:return nt=_e.type,rt=_e.pendingProps,rt=_e.elementType===nt?rt:Lg(nt,rt),jj(et,_e),_e.tag=1,Zf(nt)?(et=!0,cg(_e)):et=!1,Tg(_e,tt),ph(_e,nt,rt),rh(_e,nt,rt,tt),kj(null,_e,nt,!0,et,tt);case 19:return yj(et,_e,tt);case 22:return ej(et,_e,tt)}throw Error(p$4(156,_e.tag))};function Gk(et,_e){return ac(et,_e)}function al(et,_e,tt,nt){this.tag=et,this.key=tt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=nt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(et,_e,tt,nt){return new al(et,_e,tt,nt)}function bj(et){return et=et.prototype,!(!et||!et.isReactComponent)}function $k(et){if(typeof et=="function")return bj(et)?1:0;if(et!=null){if(et=et.$$typeof,et===Da)return 11;if(et===Ga)return 14}return 2}function wh(et,_e){var tt=et.alternate;return tt===null?(tt=Bg(et.tag,_e,et.key,et.mode),tt.elementType=et.elementType,tt.type=et.type,tt.stateNode=et.stateNode,tt.alternate=et,et.alternate=tt):(tt.pendingProps=_e,tt.type=et.type,tt.flags=0,tt.subtreeFlags=0,tt.deletions=null),tt.flags=et.flags&14680064,tt.childLanes=et.childLanes,tt.lanes=et.lanes,tt.child=et.child,tt.memoizedProps=et.memoizedProps,tt.memoizedState=et.memoizedState,tt.updateQueue=et.updateQueue,_e=et.dependencies,tt.dependencies=_e===null?null:{lanes:_e.lanes,firstContext:_e.firstContext},tt.sibling=et.sibling,tt.index=et.index,tt.ref=et.ref,tt}function yh(et,_e,tt,nt,rt,it){var ot=2;if(nt=et,typeof et=="function")bj(et)&&(ot=1);else if(typeof et=="string")ot=5;else e:switch(et){case ya:return Ah(tt.children,rt,it,_e);case za:ot=8,rt|=8;break;case Aa:return et=Bg(12,tt,_e,rt|2),et.elementType=Aa,et.lanes=it,et;case Ea:return et=Bg(13,tt,_e,rt),et.elementType=Ea,et.lanes=it,et;case Fa:return et=Bg(19,tt,_e,rt),et.elementType=Fa,et.lanes=it,et;case Ia:return qj(tt,rt,it,_e);default:if(typeof et=="object"&&et!==null)switch(et.$$typeof){case Ba:ot=10;break e;case Ca:ot=9;break e;case Da:ot=11;break e;case Ga:ot=14;break e;case Ha:ot=16,nt=null;break e}throw Error(p$4(130,et==null?et:typeof et,""))}return _e=Bg(ot,tt,_e,rt),_e.elementType=et,_e.type=nt,_e.lanes=it,_e}function Ah(et,_e,tt,nt){return et=Bg(7,et,nt,_e),et.lanes=tt,et}function qj(et,_e,tt,nt){return et=Bg(22,et,nt,_e),et.elementType=Ia,et.lanes=tt,et.stateNode={isHidden:!1},et}function xh(et,_e,tt){return et=Bg(6,et,null,_e),et.lanes=tt,et}function zh(et,_e,tt){return _e=Bg(4,et.children!==null?et.children:[],et.key,_e),_e.lanes=tt,_e.stateNode={containerInfo:et.containerInfo,pendingChildren:null,implementation:et.implementation},_e}function bl(et,_e,tt,nt,rt){this.tag=_e,this.containerInfo=et,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=nt,this.onRecoverableError=rt,this.mutableSourceEagerHydrationData=null}function cl(et,_e,tt,nt,rt,it,ot,st,at){return et=new bl(et,_e,tt,st,at),_e===1?(_e=1,it===!0&&(_e|=8)):_e=0,it=Bg(3,null,null,_e),et.current=it,it.stateNode=et,it.memoizedState={element:nt,isDehydrated:tt,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(it),et}function dl(et,_e,tt){var nt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:nt==null?null:""+nt,children:et,containerInfo:_e,implementation:tt}}function el(et){if(!et)return Vf;et=et._reactInternals;e:{if(Vb(et)!==et||et.tag!==1)throw Error(p$4(170));var _e=et;do{switch(_e.tag){case 3:_e=_e.stateNode.context;break e;case 1:if(Zf(_e.type)){_e=_e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_e=_e.return}while(_e!==null);throw Error(p$4(171))}if(et.tag===1){var tt=et.type;if(Zf(tt))return bg(et,tt,_e)}return _e}function fl(et,_e,tt,nt,rt,it,ot,st,at){return et=cl(tt,nt,!0,et,rt,it,ot,st,at),et.context=el(null),tt=et.current,nt=L$1(),rt=lh(tt),it=ch(nt,rt),it.callback=_e??null,dh(tt,it,rt),et.current.lanes=rt,Ac(et,rt,nt),Ek(et,nt),et}function gl(et,_e,tt,nt){var rt=_e.current,it=L$1(),ot=lh(rt);return tt=el(tt),_e.context===null?_e.context=tt:_e.pendingContext=tt,_e=ch(it,ot),_e.payload={element:et},nt=nt===void 0?null:nt,nt!==null&&(_e.callback=nt),et=dh(rt,_e,ot),et!==null&&(mh(et,rt,ot,it),eh(et,rt,ot)),ot}function hl(et){if(et=et.current,!et.child)return null;switch(et.child.tag){case 5:return et.child.stateNode;default:return et.child.stateNode}}function il(et,_e){if(et=et.memoizedState,et!==null&&et.dehydrated!==null){var tt=et.retryLane;et.retryLane=tt!==0&&tt<_e?tt:_e}}function jl(et,_e){il(et,_e),(et=et.alternate)&&il(et,_e)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(et){console.error(et)};function ml(et){this._internalRoot=et}nl.prototype.render=ml.prototype.render=function(et){var _e=this._internalRoot;if(_e===null)throw Error(p$4(409));gl(et,_e,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var et=this._internalRoot;if(et!==null){this._internalRoot=null;var _e=et.containerInfo;Sk(function(){gl(null,et,null,null)}),_e[uf]=null}};function nl(et){this._internalRoot=et}nl.prototype.unstable_scheduleHydration=function(et){if(et){var _e=Hc();et={blockedOn:null,target:et,priority:_e};for(var tt=0;tt<Qc.length&&_e!==0&&_e<Qc[tt].priority;tt++);Qc.splice(tt,0,et),tt===0&&Vc(et)}};function ol(et){return!(!et||et.nodeType!==1&&et.nodeType!==9&&et.nodeType!==11)}function pl(et){return!(!et||et.nodeType!==1&&et.nodeType!==9&&et.nodeType!==11&&(et.nodeType!==8||et.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(et,_e,tt,nt,rt){if(rt){if(typeof nt=="function"){var it=nt;nt=function(){var lt=hl(ot);it.call(lt)}}var ot=fl(_e,nt,et,0,null,!1,!1,"",ql);return et._reactRootContainer=ot,et[uf]=ot.current,sf(et.nodeType===8?et.parentNode:et),Sk(),ot}for(;rt=et.lastChild;)et.removeChild(rt);if(typeof nt=="function"){var st=nt;nt=function(){var lt=hl(at);st.call(lt)}}var at=cl(et,0,!1,null,null,!1,!1,"",ql);return et._reactRootContainer=at,et[uf]=at.current,sf(et.nodeType===8?et.parentNode:et),Sk(function(){gl(_e,at,tt,nt)}),at}function sl(et,_e,tt,nt,rt){var it=tt._reactRootContainer;if(it){var ot=it;if(typeof rt=="function"){var st=rt;rt=function(){var at=hl(ot);st.call(at)}}gl(_e,ot,et,rt)}else ot=rl(tt,_e,et,rt,nt);return hl(ot)}Ec=function(et){switch(et.tag){case 3:var _e=et.stateNode;if(_e.current.memoizedState.isDehydrated){var tt=tc(_e.pendingLanes);tt!==0&&(Cc(_e,tt|1),Ek(_e,B$2()),!(K$1&6)&&(Hj=B$2()+500,jg()))}break;case 13:Sk(function(){var nt=Zg(et,1);if(nt!==null){var rt=L$1();mh(nt,et,1,rt)}}),jl(et,1)}};Fc=function(et){if(et.tag===13){var _e=Zg(et,134217728);if(_e!==null){var tt=L$1();mh(_e,et,134217728,tt)}jl(et,134217728)}};Gc=function(et){if(et.tag===13){var _e=lh(et),tt=Zg(et,_e);if(tt!==null){var nt=L$1();mh(tt,et,_e,nt)}jl(et,_e)}};Hc=function(){return C$2};Ic=function(et,_e){var tt=C$2;try{return C$2=et,_e()}finally{C$2=tt}};yb=function(et,_e,tt){switch(_e){case"input":if(bb(et,tt),_e=tt.name,tt.type==="radio"&&_e!=null){for(tt=et;tt.parentNode;)tt=tt.parentNode;for(tt=tt.querySelectorAll("input[name="+JSON.stringify(""+_e)+'][type="radio"]'),_e=0;_e<tt.length;_e++){var nt=tt[_e];if(nt!==et&&nt.form===et.form){var rt=Db(nt);if(!rt)throw Error(p$4(90));Wa(nt),bb(nt,rt)}}}break;case"textarea":ib(et,tt);break;case"select":_e=tt.value,_e!=null&&fb(et,!!tt.multiple,_e,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(et){return et=Zb(et),et===null?null:et.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(et,_e){var tt=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(_e))throw Error(p$4(200));return dl(et,_e,null,tt)};reactDom_production_min.createRoot=function(et,_e){if(!ol(et))throw Error(p$4(299));var tt=!1,nt="",rt=ll;return _e!=null&&(_e.unstable_strictMode===!0&&(tt=!0),_e.identifierPrefix!==void 0&&(nt=_e.identifierPrefix),_e.onRecoverableError!==void 0&&(rt=_e.onRecoverableError)),_e=cl(et,1,!1,null,null,tt,!1,nt,rt),et[uf]=_e.current,sf(et.nodeType===8?et.parentNode:et),new ml(_e)};reactDom_production_min.findDOMNode=function(et){if(et==null)return null;if(et.nodeType===1)return et;var _e=et._reactInternals;if(_e===void 0)throw typeof et.render=="function"?Error(p$4(188)):(et=Object.keys(et).join(","),Error(p$4(268,et)));return et=Zb(_e),et=et===null?null:et.stateNode,et};reactDom_production_min.flushSync=function(et){return Sk(et)};reactDom_production_min.hydrate=function(et,_e,tt){if(!pl(_e))throw Error(p$4(200));return sl(null,et,_e,!0,tt)};reactDom_production_min.hydrateRoot=function(et,_e,tt){if(!ol(et))throw Error(p$4(405));var nt=tt!=null&&tt.hydratedSources||null,rt=!1,it="",ot=ll;if(tt!=null&&(tt.unstable_strictMode===!0&&(rt=!0),tt.identifierPrefix!==void 0&&(it=tt.identifierPrefix),tt.onRecoverableError!==void 0&&(ot=tt.onRecoverableError)),_e=fl(_e,null,et,1,tt??null,rt,!1,it,ot),et[uf]=_e.current,sf(et),nt)for(et=0;et<nt.length;et++)tt=nt[et],rt=tt._getVersion,rt=rt(tt._source),_e.mutableSourceEagerHydrationData==null?_e.mutableSourceEagerHydrationData=[tt,rt]:_e.mutableSourceEagerHydrationData.push(tt,rt);return new nl(_e)};reactDom_production_min.render=function(et,_e,tt){if(!pl(_e))throw Error(p$4(200));return sl(null,et,_e,!1,tt)};reactDom_production_min.unmountComponentAtNode=function(et){if(!pl(et))throw Error(p$4(40));return et._reactRootContainer?(Sk(function(){sl(null,null,et,!1,function(){et._reactRootContainer=null,et[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(et,_e,tt,nt){if(!pl(tt))throw Error(p$4(200));if(et==null||et._reactInternals===void 0)throw Error(p$4(38));return sl(et,_e,tt,!1,nt)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(et){console.error(et)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var m$3=reactDomExports;client.createRoot=m$3.createRoot,client.hydrateRoot=m$3.hydrateRoot;/**
 * @remix-run/router v1.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(et){for(var _e=1;_e<arguments.length;_e++){var tt=arguments[_e];for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(et[nt]=tt[nt])}return et},_extends$9.apply(this,arguments)}var Action;(function(et){et.Pop="POP",et.Push="PUSH",et.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createHashHistory(et){et===void 0&&(et={});function _e(rt,it){let{pathname:ot="/",search:st="",hash:at=""}=parsePath(rt.location.hash.substr(1));return!ot.startsWith("/")&&!ot.startsWith(".")&&(ot="/"+ot),createLocation("",{pathname:ot,search:st,hash:at},it.state&&it.state.usr||null,it.state&&it.state.key||"default")}function tt(rt,it){let ot=rt.document.querySelector("base"),st="";if(ot&&ot.getAttribute("href")){let at=rt.location.href,lt=at.indexOf("#");st=lt===-1?at:at.slice(0,lt)}return st+"#"+(typeof it=="string"?it:createPath(it))}function nt(rt,it){warning$2(rt.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(it)+")")}return getUrlBasedHistory(_e,tt,nt,et)}function invariant$4(et,_e){if(et===!1||et===null||typeof et>"u")throw new Error(_e)}function warning$2(et,_e){if(!et){typeof console<"u"&&console.warn(_e);try{throw new Error(_e)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(et,_e){return{usr:et.state,key:et.key,idx:_e}}function createLocation(et,_e,tt,nt){return tt===void 0&&(tt=null),_extends$9({pathname:typeof et=="string"?et:et.pathname,search:"",hash:""},typeof _e=="string"?parsePath(_e):_e,{state:tt,key:_e&&_e.key||nt||createKey()})}function createPath(et){let{pathname:_e="/",search:tt="",hash:nt=""}=et;return tt&&tt!=="?"&&(_e+=tt.charAt(0)==="?"?tt:"?"+tt),nt&&nt!=="#"&&(_e+=nt.charAt(0)==="#"?nt:"#"+nt),_e}function parsePath(et){let _e={};if(et){let tt=et.indexOf("#");tt>=0&&(_e.hash=et.substr(tt),et=et.substr(0,tt));let nt=et.indexOf("?");nt>=0&&(_e.search=et.substr(nt),et=et.substr(0,nt)),et&&(_e.pathname=et)}return _e}function getUrlBasedHistory(et,_e,tt,nt){nt===void 0&&(nt={});let{window:rt=document.defaultView,v5Compat:it=!1}=nt,ot=rt.history,st=Action.Pop,at=null,lt=ct();lt==null&&(lt=0,ot.replaceState(_extends$9({},ot.state,{idx:lt}),""));function ct(){return(ot.state||{idx:null}).idx}function ut(){st=Action.Pop;let xt=ct(),gt=xt==null?null:xt-lt;lt=xt,at&&at({action:st,location:mt.location,delta:gt})}function dt(xt,gt){st=Action.Push;let ht=createLocation(mt.location,xt,gt);tt&&tt(ht,xt),lt=ct()+1;let yt=getHistoryState(ht,lt),vt=mt.createHref(ht);try{ot.pushState(yt,"",vt)}catch(_t){if(_t instanceof DOMException&&_t.name==="DataCloneError")throw _t;rt.location.assign(vt)}it&&at&&at({action:st,location:mt.location,delta:1})}function ft(xt,gt){st=Action.Replace;let ht=createLocation(mt.location,xt,gt);tt&&tt(ht,xt),lt=ct();let yt=getHistoryState(ht,lt),vt=mt.createHref(ht);ot.replaceState(yt,"",vt),it&&at&&at({action:st,location:mt.location,delta:0})}function pt(xt){let gt=rt.location.origin!=="null"?rt.location.origin:rt.location.href,ht=typeof xt=="string"?xt:createPath(xt);return invariant$4(gt,"No window.location.(origin|href) available to create URL for href: "+ht),new URL(ht,gt)}let mt={get action(){return st},get location(){return et(rt,ot)},listen(xt){if(at)throw new Error("A history only accepts one active listener");return rt.addEventListener(PopStateEventType,ut),at=xt,()=>{rt.removeEventListener(PopStateEventType,ut),at=null}},createHref(xt){return _e(rt,xt)},createURL:pt,encodeLocation(xt){let gt=pt(xt);return{pathname:gt.pathname,search:gt.search,hash:gt.hash}},push:dt,replace:ft,go(xt){return ot.go(xt)}};return mt}var ResultType;(function(et){et.data="data",et.deferred="deferred",et.redirect="redirect",et.error="error"})(ResultType||(ResultType={}));const immutableRouteKeys=new Set(["lazy","caseSensitive","path","id","index","children"]);function isIndexRoute(et){return et.index===!0}function convertRoutesToDataRoutes(et,_e,tt,nt){return tt===void 0&&(tt=[]),nt===void 0&&(nt={}),et.map((rt,it)=>{let ot=[...tt,it],st=typeof rt.id=="string"?rt.id:ot.join("-");if(invariant$4(rt.index!==!0||!rt.children,"Cannot specify children on an index route"),invariant$4(!nt[st],'Found a route id collision on id "'+st+`".  Route id's must be globally unique within Data Router usages`),isIndexRoute(rt)){let at=_extends$9({},rt,_e(rt),{id:st});return nt[st]=at,at}else{let at=_extends$9({},rt,_e(rt),{id:st,children:void 0});return nt[st]=at,rt.children&&(at.children=convertRoutesToDataRoutes(rt.children,_e,ot,nt)),at}})}function matchRoutes(et,_e,tt){tt===void 0&&(tt="/");let nt=typeof _e=="string"?parsePath(_e):_e,rt=stripBasename(nt.pathname||"/",tt);if(rt==null)return null;let it=flattenRoutes(et);rankRouteBranches(it);let ot=null;for(let st=0;ot==null&&st<it.length;++st)ot=matchRouteBranch(it[st],safelyDecodeURI(rt));return ot}function flattenRoutes(et,_e,tt,nt){_e===void 0&&(_e=[]),tt===void 0&&(tt=[]),nt===void 0&&(nt="");let rt=(it,ot,st)=>{let at={relativePath:st===void 0?it.path||"":st,caseSensitive:it.caseSensitive===!0,childrenIndex:ot,route:it};at.relativePath.startsWith("/")&&(invariant$4(at.relativePath.startsWith(nt),'Absolute route path "'+at.relativePath+'" nested under path '+('"'+nt+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),at.relativePath=at.relativePath.slice(nt.length));let lt=joinPaths([nt,at.relativePath]),ct=tt.concat(at);it.children&&it.children.length>0&&(invariant$4(it.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+lt+'".')),flattenRoutes(it.children,_e,ct,lt)),!(it.path==null&&!it.index)&&_e.push({path:lt,score:computeScore(lt,it.index),routesMeta:ct})};return et.forEach((it,ot)=>{var st;if(it.path===""||!((st=it.path)!=null&&st.includes("?")))rt(it,ot);else for(let at of explodeOptionalSegments(it.path))rt(it,ot,at)}),_e}function explodeOptionalSegments(et){let _e=et.split("/");if(_e.length===0)return[];let[tt,...nt]=_e,rt=tt.endsWith("?"),it=tt.replace(/\?$/,"");if(nt.length===0)return rt?[it,""]:[it];let ot=explodeOptionalSegments(nt.join("/")),st=[];return st.push(...ot.map(at=>at===""?it:[it,at].join("/"))),rt&&st.push(...ot),st.map(at=>et.startsWith("/")&&at===""?"/":at)}function rankRouteBranches(et){et.sort((_e,tt)=>_e.score!==tt.score?tt.score-_e.score:compareIndexes(_e.routesMeta.map(nt=>nt.childrenIndex),tt.routesMeta.map(nt=>nt.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=et=>et==="*";function computeScore(et,_e){let tt=et.split("/"),nt=tt.length;return tt.some(isSplat)&&(nt+=splatPenalty),_e&&(nt+=indexRouteValue),tt.filter(rt=>!isSplat(rt)).reduce((rt,it)=>rt+(paramRe.test(it)?dynamicSegmentValue:it===""?emptySegmentValue:staticSegmentValue),nt)}function compareIndexes(et,_e){return et.length===_e.length&&et.slice(0,-1).every((nt,rt)=>nt===_e[rt])?et[et.length-1]-_e[_e.length-1]:0}function matchRouteBranch(et,_e){let{routesMeta:tt}=et,nt={},rt="/",it=[];for(let ot=0;ot<tt.length;++ot){let st=tt[ot],at=ot===tt.length-1,lt=rt==="/"?_e:_e.slice(rt.length)||"/",ct=matchPath({path:st.relativePath,caseSensitive:st.caseSensitive,end:at},lt);if(!ct)return null;Object.assign(nt,ct.params);let ut=st.route;it.push({params:nt,pathname:joinPaths([rt,ct.pathname]),pathnameBase:normalizePathname(joinPaths([rt,ct.pathnameBase])),route:ut}),ct.pathnameBase!=="/"&&(rt=joinPaths([rt,ct.pathnameBase]))}return it}function matchPath(et,_e){typeof et=="string"&&(et={path:et,caseSensitive:!1,end:!0});let[tt,nt]=compilePath(et.path,et.caseSensitive,et.end),rt=_e.match(tt);if(!rt)return null;let it=rt[0],ot=it.replace(/(.)\/+$/,"$1"),st=rt.slice(1);return{params:nt.reduce((lt,ct,ut)=>{if(ct==="*"){let dt=st[ut]||"";ot=it.slice(0,it.length-dt.length).replace(/(.)\/+$/,"$1")}return lt[ct]=safelyDecodeURIComponent(st[ut]||"",ct),lt},{}),pathname:it,pathnameBase:ot,pattern:et}}function compilePath(et,_e,tt){_e===void 0&&(_e=!1),tt===void 0&&(tt=!0),warning$2(et==="*"||!et.endsWith("*")||et.endsWith("/*"),'Route path "'+et+'" will be treated as if it were '+('"'+et.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+et.replace(/\*$/,"/*")+'".'));let nt=[],rt="^"+et.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(ot,st)=>(nt.push(st),"/([^\\/]+)"));return et.endsWith("*")?(nt.push("*"),rt+=et==="*"||et==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):tt?rt+="\\/*$":et!==""&&et!=="/"&&(rt+="(?:(?=\\/|$))"),[new RegExp(rt,_e?void 0:"i"),nt]}function safelyDecodeURI(et){try{return decodeURI(et)}catch(_e){return warning$2(!1,'The URL path "'+et+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+_e+").")),et}}function safelyDecodeURIComponent(et,_e){try{return decodeURIComponent(et)}catch(tt){return warning$2(!1,'The value for the URL param "'+_e+'" will not be decoded because'+(' the string "'+et+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+tt+").")),et}}function stripBasename(et,_e){if(_e==="/")return et;if(!et.toLowerCase().startsWith(_e.toLowerCase()))return null;let tt=_e.endsWith("/")?_e.length-1:_e.length,nt=et.charAt(tt);return nt&&nt!=="/"?null:et.slice(tt)||"/"}function resolvePath(et,_e){_e===void 0&&(_e="/");let{pathname:tt,search:nt="",hash:rt=""}=typeof et=="string"?parsePath(et):et;return{pathname:tt?tt.startsWith("/")?tt:resolvePathname(tt,_e):_e,search:normalizeSearch(nt),hash:normalizeHash(rt)}}function resolvePathname(et,_e){let tt=_e.replace(/\/+$/,"").split("/");return et.split("/").forEach(rt=>{rt===".."?tt.length>1&&tt.pop():rt!=="."&&tt.push(rt)}),tt.length>1?tt.join("/"):"/"}function getInvalidPathError(et,_e,tt,nt){return"Cannot include a '"+et+"' character in a manually specified "+("`to."+_e+"` field ["+JSON.stringify(nt)+"].  Please separate it out to the ")+("`to."+tt+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(et){return et.filter((_e,tt)=>tt===0||_e.route.path&&_e.route.path.length>0)}function resolveTo(et,_e,tt,nt){nt===void 0&&(nt=!1);let rt;typeof et=="string"?rt=parsePath(et):(rt=_extends$9({},et),invariant$4(!rt.pathname||!rt.pathname.includes("?"),getInvalidPathError("?","pathname","search",rt)),invariant$4(!rt.pathname||!rt.pathname.includes("#"),getInvalidPathError("#","pathname","hash",rt)),invariant$4(!rt.search||!rt.search.includes("#"),getInvalidPathError("#","search","hash",rt)));let it=et===""||rt.pathname==="",ot=it?"/":rt.pathname,st;if(nt||ot==null)st=tt;else{let ut=_e.length-1;if(ot.startsWith("..")){let dt=ot.split("/");for(;dt[0]==="..";)dt.shift(),ut-=1;rt.pathname=dt.join("/")}st=ut>=0?_e[ut]:"/"}let at=resolvePath(rt,st),lt=ot&&ot!=="/"&&ot.endsWith("/"),ct=(it||ot===".")&&tt.endsWith("/");return!at.pathname.endsWith("/")&&(lt||ct)&&(at.pathname+="/"),at}const joinPaths=et=>et.join("/").replace(/\/\/+/g,"/"),normalizePathname=et=>et.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=et=>!et||et==="?"?"":et.startsWith("?")?et:"?"+et,normalizeHash=et=>!et||et==="#"?"":et.startsWith("#")?et:"#"+et;class ErrorResponse{constructor(_e,tt,nt,rt){rt===void 0&&(rt=!1),this.status=_e,this.statusText=tt||"",this.internal=rt,nt instanceof Error?(this.data=nt.toString(),this.error=nt):this.data=nt}}function isRouteErrorResponse(et){return et!=null&&typeof et.status=="number"&&typeof et.statusText=="string"&&typeof et.internal=="boolean"&&"data"in et}const validMutationMethodsArr=["post","put","patch","delete"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["get",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ABSOLUTE_URL_REGEX$1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,defaultMapRouteProperties=et=>({hasErrorBoundary:!!et.hasErrorBoundary});function createRouter(et){const _e=et.window?et.window:typeof window<"u"?window:void 0,tt=typeof _e<"u"&&typeof _e.document<"u"&&typeof _e.document.createElement<"u",nt=!tt;invariant$4(et.routes.length>0,"You must provide a non-empty routes array to createRouter");let rt;if(et.mapRouteProperties)rt=et.mapRouteProperties;else if(et.detectErrorBoundary){let Ct=et.detectErrorBoundary;rt=$t=>({hasErrorBoundary:Ct($t)})}else rt=defaultMapRouteProperties;let it={},ot=convertRoutesToDataRoutes(et.routes,rt,void 0,it),st,at=et.basename||"/",lt=_extends$9({v7_normalizeFormMethod:!1,v7_prependBasename:!1},et.future),ct=null,ut=new Set,dt=null,ft=null,pt=null,mt=et.hydrationData!=null,xt=matchRoutes(ot,et.history.location,at),gt=null;if(xt==null){let Ct=getInternalRouterError(404,{pathname:et.history.location.pathname}),{matches:$t,route:Dt}=getShortCircuitMatches(ot);xt=$t,gt={[Dt.id]:Ct}}let ht=!xt.some(Ct=>Ct.route.lazy)&&(!xt.some(Ct=>Ct.route.loader)||et.hydrationData!=null),yt,vt={historyAction:et.history.action,location:et.history.location,matches:xt,initialized:ht,navigation:IDLE_NAVIGATION,restoreScrollPosition:et.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:et.hydrationData&&et.hydrationData.loaderData||{},actionData:et.hydrationData&&et.hydrationData.actionData||null,errors:et.hydrationData&&et.hydrationData.errors||gt,fetchers:new Map,blockers:new Map},_t=Action.Pop,Et=!1,bt,St=!1,wt=!1,Rt=[],Nt=[],kt=new Map,Pt=0,jt=-1,Wt=new Map,Ht=new Set,tn=new Map,Ot=new Map,Lt=new Map,Mt=!1;function Jt(){return ct=et.history.listen(Ct=>{let{action:$t,location:Dt,delta:Ut}=Ct;if(Mt){Mt=!1;return}warning$2(Lt.size===0||Ut!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let en=Tn({currentLocation:vt.location,nextLocation:Dt,historyAction:$t});if(en&&Ut!=null){Mt=!0,et.history.go(Ut*-1),bn(en,{state:"blocked",location:Dt,proceed(){bn(en,{state:"proceeding",proceed:void 0,reset:void 0,location:Dt}),et.history.go(Ut)},reset(){let Xt=new Map(vt.blockers);Xt.set(en,IDLE_BLOCKER),Kt({blockers:Xt})}});return}return nn($t,Dt)}),vt.initialized||nn(Action.Pop,vt.location),yt}function qt(){ct&&ct(),ut.clear(),bt&&bt.abort(),vt.fetchers.forEach((Ct,$t)=>_n($t)),vt.blockers.forEach((Ct,$t)=>rn($t))}function on(Ct){return ut.add(Ct),()=>ut.delete(Ct)}function Kt(Ct){vt=_extends$9({},vt,Ct),ut.forEach($t=>$t(vt))}function Qt(Ct,$t){var Dt,Ut;let en=vt.actionData!=null&&vt.navigation.formMethod!=null&&isMutationMethod(vt.navigation.formMethod)&&vt.navigation.state==="loading"&&((Dt=Ct.state)==null?void 0:Dt._isRedirect)!==!0,Xt;$t.actionData?Object.keys($t.actionData).length>0?Xt=$t.actionData:Xt=null:en?Xt=vt.actionData:Xt=null;let Zt=$t.loaderData?mergeLoaderData(vt.loaderData,$t.loaderData,$t.matches||[],$t.errors):vt.loaderData,Yt=vt.blockers;Yt.size>0&&(Yt=new Map(Yt),Yt.forEach((dn,xn)=>Yt.set(xn,IDLE_BLOCKER)));let Vt=Et===!0||vt.navigation.formMethod!=null&&isMutationMethod(vt.navigation.formMethod)&&((Ut=Ct.state)==null?void 0:Ut._isRedirect)!==!0;st&&(ot=st,st=void 0),St||_t===Action.Pop||(_t===Action.Push?et.history.push(Ct,Ct.state):_t===Action.Replace&&et.history.replace(Ct,Ct.state)),Kt(_extends$9({},$t,{actionData:Xt,loaderData:Zt,historyAction:_t,location:Ct,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:Kn(Ct,$t.matches||vt.matches),preventScrollReset:Vt,blockers:Yt})),_t=Action.Pop,Et=!1,St=!1,wt=!1,Rt=[],Nt=[]}async function sn(Ct,$t){if(typeof Ct=="number"){et.history.go(Ct);return}let Dt=normalizeTo(vt.location,vt.matches,at,lt.v7_prependBasename,Ct,$t==null?void 0:$t.fromRouteId,$t==null?void 0:$t.relative),{path:Ut,submission:en,error:Xt}=normalizeNavigateOptions(lt.v7_normalizeFormMethod,!1,Dt,$t),Zt=vt.location,Yt=createLocation(vt.location,Ut,$t&&$t.state);Yt=_extends$9({},Yt,et.history.encodeLocation(Yt));let Vt=$t&&$t.replace!=null?$t.replace:void 0,dn=Action.Push;Vt===!0?dn=Action.Replace:Vt===!1||en!=null&&isMutationMethod(en.formMethod)&&en.formAction===vt.location.pathname+vt.location.search&&(dn=Action.Replace);let xn=$t&&"preventScrollReset"in $t?$t.preventScrollReset===!0:void 0,cn=Tn({currentLocation:Zt,nextLocation:Yt,historyAction:dn});if(cn){bn(cn,{state:"blocked",location:Yt,proceed(){bn(cn,{state:"proceeding",proceed:void 0,reset:void 0,location:Yt}),sn(Ct,$t)},reset(){let gn=new Map(vt.blockers);gn.set(cn,IDLE_BLOCKER),Kt({blockers:gn})}});return}return await nn(dn,Yt,{submission:en,pendingError:Xt,preventScrollReset:xn,replace:$t&&$t.replace})}function hn(){if(an(),Kt({revalidation:"loading"}),vt.navigation.state!=="submitting"){if(vt.navigation.state==="idle"){nn(vt.historyAction,vt.location,{startUninterruptedRevalidation:!0});return}nn(_t||vt.historyAction,vt.navigation.location,{overrideNavigation:vt.navigation})}}async function nn(Ct,$t,Dt){bt&&bt.abort(),bt=null,_t=Ct,St=(Dt&&Dt.startUninterruptedRevalidation)===!0,tr(vt.location,vt.matches),Et=(Dt&&Dt.preventScrollReset)===!0;let Ut=st||ot,en=Dt&&Dt.overrideNavigation,Xt=matchRoutes(Ut,$t,at);if(!Xt){let gn=getInternalRouterError(404,{pathname:$t.pathname}),{matches:yn,route:kn}=getShortCircuitMatches(Ut);An(),Qt($t,{matches:yn,loaderData:{},errors:{[kn.id]:gn}});return}if(vt.initialized&&!wt&&isHashChangeOnly(vt.location,$t)&&!(Dt&&Dt.submission&&isMutationMethod(Dt.submission.formMethod))){Qt($t,{matches:Xt});return}bt=new AbortController;let Zt=createClientSideRequest(et.history,$t,bt.signal,Dt&&Dt.submission),Yt,Vt;if(Dt&&Dt.pendingError)Vt={[findNearestBoundary(Xt).route.id]:Dt.pendingError};else if(Dt&&Dt.submission&&isMutationMethod(Dt.submission.formMethod)){let gn=await It(Zt,$t,Dt.submission,Xt,{replace:Dt.replace});if(gn.shortCircuited)return;Yt=gn.pendingActionData,Vt=gn.pendingActionError,en=getLoadingNavigation($t,Dt.submission),Zt=new Request(Zt.url,{signal:Zt.signal})}let{shortCircuited:dn,loaderData:xn,errors:cn}=await Tt(Zt,$t,Xt,en,Dt&&Dt.submission,Dt&&Dt.fetcherSubmission,Dt&&Dt.replace,Yt,Vt);dn||(bt=null,Qt($t,_extends$9({matches:Xt},Yt?{actionData:Yt}:{},{loaderData:xn,errors:cn})))}async function It(Ct,$t,Dt,Ut,en){en===void 0&&(en={}),an();let Xt=getSubmittingNavigation($t,Dt);Kt({navigation:Xt});let Zt,Yt=getTargetMatch(Ut,$t);if(!Yt.route.action&&!Yt.route.lazy)Zt={type:ResultType.error,error:getInternalRouterError(405,{method:Ct.method,pathname:$t.pathname,routeId:Yt.route.id})};else if(Zt=await callLoaderOrAction("action",Ct,Yt,Ut,it,rt,at),Ct.signal.aborted)return{shortCircuited:!0};if(isRedirectResult(Zt)){let Vt;return en&&en.replace!=null?Vt=en.replace:Vt=Zt.location===vt.location.pathname+vt.location.search,await zt(vt,Zt,{submission:Dt,replace:Vt}),{shortCircuited:!0}}if(isErrorResult(Zt)){let Vt=findNearestBoundary(Ut,Yt.route.id);return(en&&en.replace)!==!0&&(_t=Action.Push),{pendingActionData:{},pendingActionError:{[Vt.route.id]:Zt.error}}}if(isDeferredResult(Zt))throw getInternalRouterError(400,{type:"defer-action"});return{pendingActionData:{[Yt.route.id]:Zt.data}}}async function Tt(Ct,$t,Dt,Ut,en,Xt,Zt,Yt,Vt){let dn=Ut||getLoadingNavigation($t,en),xn=en||Xt||getSubmissionFromNavigation(dn),cn=st||ot,[gn,yn]=getMatchesToLoad(et.history,vt,Dt,xn,$t,wt,Rt,Nt,tn,Ht,cn,at,Yt,Vt);if(An(un=>!(Dt&&Dt.some(Sn=>Sn.route.id===un))||gn&&gn.some(Sn=>Sn.route.id===un)),jt=++Pt,gn.length===0&&yn.length===0){let un=On();return Qt($t,_extends$9({matches:Dt,loaderData:{},errors:Vt||null},Yt?{actionData:Yt}:{},un?{fetchers:new Map(vt.fetchers)}:{})),{shortCircuited:!0}}if(!St){yn.forEach(Sn=>{let In=vt.fetchers.get(Sn.key),qn=getLoadingFetcher(void 0,In?In.data:void 0);vt.fetchers.set(Sn.key,qn)});let un=Yt||vt.actionData;Kt(_extends$9({navigation:dn},un?Object.keys(un).length===0?{actionData:null}:{actionData:un}:{},yn.length>0?{fetchers:new Map(vt.fetchers)}:{}))}yn.forEach(un=>{kt.has(un.key)&&fn(un.key),un.controller&&kt.set(un.key,un.controller)});let kn=()=>yn.forEach(un=>fn(un.key));bt&&bt.signal.addEventListener("abort",kn);let{results:Dn,loaderResults:Pn,fetcherResults:Un}=await pn(vt.matches,Dt,gn,yn,Ct);if(Ct.signal.aborted)return{shortCircuited:!0};bt&&bt.signal.removeEventListener("abort",kn),yn.forEach(un=>kt.delete(un.key));let Rn=findRedirect(Dn);if(Rn){if(Rn.idx>=gn.length){let un=yn[Rn.idx-gn.length].key;Ht.add(un)}return await zt(vt,Rn.result,{replace:Zt}),{shortCircuited:!0}}let{loaderData:Cn,errors:Ln}=processLoaderData(vt,Dt,gn,Pn,Vt,yn,Un,Ot);Ot.forEach((un,Sn)=>{un.subscribe(In=>{(In||un.done)&&Ot.delete(Sn)})});let Wn=On(),Vn=$n(jt),Hn=Wn||Vn||yn.length>0;return _extends$9({loaderData:Cn,errors:Ln},Hn?{fetchers:new Map(vt.fetchers)}:{})}function At(Ct){return vt.fetchers.get(Ct)||IDLE_FETCHER}function Bt(Ct,$t,Dt,Ut){if(nt)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");kt.has(Ct)&&fn(Ct);let en=st||ot,Xt=normalizeTo(vt.location,vt.matches,at,lt.v7_prependBasename,Dt,$t,Ut==null?void 0:Ut.relative),Zt=matchRoutes(en,Xt,at);if(!Zt){En(Ct,$t,getInternalRouterError(404,{pathname:Xt}));return}let{path:Yt,submission:Vt,error:dn}=normalizeNavigateOptions(lt.v7_normalizeFormMethod,!0,Xt,Ut);if(dn){En(Ct,$t,dn);return}let xn=getTargetMatch(Zt,Yt);if(Et=(Ut&&Ut.preventScrollReset)===!0,Vt&&isMutationMethod(Vt.formMethod)){Ft(Ct,$t,Yt,xn,Zt,Vt);return}tn.set(Ct,{routeId:$t,path:Yt}),Gt(Ct,$t,Yt,xn,Zt,Vt)}async function Ft(Ct,$t,Dt,Ut,en,Xt){if(an(),tn.delete(Ct),!Ut.route.action&&!Ut.route.lazy){let vn=getInternalRouterError(405,{method:Xt.formMethod,pathname:Dt,routeId:$t});En(Ct,$t,vn);return}let Zt=vt.fetchers.get(Ct),Yt=getSubmittingFetcher(Xt,Zt);vt.fetchers.set(Ct,Yt),Kt({fetchers:new Map(vt.fetchers)});let Vt=new AbortController,dn=createClientSideRequest(et.history,Dt,Vt.signal,Xt);kt.set(Ct,Vt);let xn=Pt,cn=await callLoaderOrAction("action",dn,Ut,en,it,rt,at);if(dn.signal.aborted){kt.get(Ct)===Vt&&kt.delete(Ct);return}if(isRedirectResult(cn))if(kt.delete(Ct),jt>xn){let vn=getDoneFetcher(void 0);vt.fetchers.set(Ct,vn),Kt({fetchers:new Map(vt.fetchers)});return}else{Ht.add(Ct);let vn=getLoadingFetcher(Xt);return vt.fetchers.set(Ct,vn),Kt({fetchers:new Map(vt.fetchers)}),zt(vt,cn,{submission:Xt,isFetchActionRedirect:!0})}if(isErrorResult(cn)){En(Ct,$t,cn.error);return}if(isDeferredResult(cn))throw getInternalRouterError(400,{type:"defer-action"});let gn=vt.navigation.location||vt.location,yn=createClientSideRequest(et.history,gn,Vt.signal),kn=st||ot,Dn=vt.navigation.state!=="idle"?matchRoutes(kn,vt.navigation.location,at):vt.matches;invariant$4(Dn,"Didn't find any matches after fetcher action");let Pn=++Pt;Wt.set(Ct,Pn);let Un=getLoadingFetcher(Xt,cn.data);vt.fetchers.set(Ct,Un);let[Rn,Cn]=getMatchesToLoad(et.history,vt,Dn,Xt,gn,wt,Rt,Nt,tn,Ht,kn,at,{[Ut.route.id]:cn.data},void 0);Cn.filter(vn=>vn.key!==Ct).forEach(vn=>{let jn=vn.key,Yn=vt.fetchers.get(jn),rr=getLoadingFetcher(void 0,Yn?Yn.data:void 0);vt.fetchers.set(jn,rr),kt.has(jn)&&fn(jn),vn.controller&&kt.set(jn,vn.controller)}),Kt({fetchers:new Map(vt.fetchers)});let Ln=()=>Cn.forEach(vn=>fn(vn.key));Vt.signal.addEventListener("abort",Ln);let{results:Wn,loaderResults:Vn,fetcherResults:Hn}=await pn(vt.matches,Dn,Rn,Cn,yn);if(Vt.signal.aborted)return;Vt.signal.removeEventListener("abort",Ln),Wt.delete(Ct),kt.delete(Ct),Cn.forEach(vn=>kt.delete(vn.key));let un=findRedirect(Wn);if(un){if(un.idx>=Rn.length){let vn=Cn[un.idx-Rn.length].key;Ht.add(vn)}return zt(vt,un.result)}let{loaderData:Sn,errors:In}=processLoaderData(vt,vt.matches,Rn,Vn,void 0,Cn,Hn,Ot);if(vt.fetchers.has(Ct)){let vn=getDoneFetcher(cn.data);vt.fetchers.set(Ct,vn)}let qn=$n(Pn);vt.navigation.state==="loading"&&Pn>jt?(invariant$4(_t,"Expected pending action"),bt&&bt.abort(),Qt(vt.navigation.location,{matches:Dn,loaderData:Sn,errors:In,fetchers:new Map(vt.fetchers)})):(Kt(_extends$9({errors:In,loaderData:mergeLoaderData(vt.loaderData,Sn,Dn,In)},qn||Cn.length>0?{fetchers:new Map(vt.fetchers)}:{})),wt=!1)}async function Gt(Ct,$t,Dt,Ut,en,Xt){let Zt=vt.fetchers.get(Ct),Yt=getLoadingFetcher(Xt,Zt?Zt.data:void 0);vt.fetchers.set(Ct,Yt),Kt({fetchers:new Map(vt.fetchers)});let Vt=new AbortController,dn=createClientSideRequest(et.history,Dt,Vt.signal);kt.set(Ct,Vt);let xn=Pt,cn=await callLoaderOrAction("loader",dn,Ut,en,it,rt,at);if(isDeferredResult(cn)&&(cn=await resolveDeferredData(cn,dn.signal,!0)||cn),kt.get(Ct)===Vt&&kt.delete(Ct),dn.signal.aborted)return;if(isRedirectResult(cn))if(jt>xn){let yn=getDoneFetcher(void 0);vt.fetchers.set(Ct,yn),Kt({fetchers:new Map(vt.fetchers)});return}else{Ht.add(Ct),await zt(vt,cn);return}if(isErrorResult(cn)){let yn=findNearestBoundary(vt.matches,$t);vt.fetchers.delete(Ct),Kt({fetchers:new Map(vt.fetchers),errors:{[yn.route.id]:cn.error}});return}invariant$4(!isDeferredResult(cn),"Unhandled fetcher deferred data");let gn=getDoneFetcher(cn.data);vt.fetchers.set(Ct,gn),Kt({fetchers:new Map(vt.fetchers)})}async function zt(Ct,$t,Dt){let{submission:Ut,replace:en,isFetchActionRedirect:Xt}=Dt===void 0?{}:Dt;$t.revalidate&&(wt=!0);let Zt=createLocation(Ct.location,$t.location,_extends$9({_isRedirect:!0},Xt?{_isFetchActionRedirect:!0}:{}));if(invariant$4(Zt,"Expected a location on the redirect navigation"),tt){let dn=!1;if($t.reloadDocument)dn=!0;else if(ABSOLUTE_URL_REGEX$1.test($t.location)){const xn=et.history.createURL($t.location);dn=xn.origin!==_e.location.origin||stripBasename(xn.pathname,at)==null}if(dn){en?_e.location.replace($t.location):_e.location.assign($t.location);return}}bt=null;let Yt=en===!0?Action.Replace:Action.Push,Vt=Ut||getSubmissionFromNavigation(Ct.navigation);if(redirectPreserveMethodStatusCodes.has($t.status)&&Vt&&isMutationMethod(Vt.formMethod))await nn(Yt,Zt,{submission:_extends$9({},Vt,{formAction:$t.location}),preventScrollReset:Et});else if(Xt)await nn(Yt,Zt,{overrideNavigation:getLoadingNavigation(Zt),fetcherSubmission:Vt,preventScrollReset:Et});else{let dn=getLoadingNavigation(Zt,Vt);await nn(Yt,Zt,{overrideNavigation:dn,preventScrollReset:Et})}}async function pn(Ct,$t,Dt,Ut,en){let Xt=await Promise.all([...Dt.map(Vt=>callLoaderOrAction("loader",en,Vt,$t,it,rt,at)),...Ut.map(Vt=>Vt.matches&&Vt.match&&Vt.controller?callLoaderOrAction("loader",createClientSideRequest(et.history,Vt.path,Vt.controller.signal),Vt.match,Vt.matches,it,rt,at):{type:ResultType.error,error:getInternalRouterError(404,{pathname:Vt.path})})]),Zt=Xt.slice(0,Dt.length),Yt=Xt.slice(Dt.length);return await Promise.all([resolveDeferredResults(Ct,Dt,Zt,Zt.map(()=>en.signal),!1,vt.loaderData),resolveDeferredResults(Ct,Ut.map(Vt=>Vt.match),Yt,Ut.map(Vt=>Vt.controller?Vt.controller.signal:null),!0)]),{results:Xt,loaderResults:Zt,fetcherResults:Yt}}function an(){wt=!0,Rt.push(...An()),tn.forEach((Ct,$t)=>{kt.has($t)&&(Nt.push($t),fn($t))})}function En(Ct,$t,Dt){let Ut=findNearestBoundary(vt.matches,$t);_n(Ct),Kt({errors:{[Ut.route.id]:Dt},fetchers:new Map(vt.fetchers)})}function _n(Ct){let $t=vt.fetchers.get(Ct);kt.has(Ct)&&!($t&&$t.state==="loading"&&Wt.has(Ct))&&fn(Ct),tn.delete(Ct),Wt.delete(Ct),Ht.delete(Ct),vt.fetchers.delete(Ct)}function fn(Ct){let $t=kt.get(Ct);invariant$4($t,"Expected fetch controller: "+Ct),$t.abort(),kt.delete(Ct)}function wn(Ct){for(let $t of Ct){let Dt=At($t),Ut=getDoneFetcher(Dt.data);vt.fetchers.set($t,Ut)}}function On(){let Ct=[],$t=!1;for(let Dt of Ht){let Ut=vt.fetchers.get(Dt);invariant$4(Ut,"Expected fetcher: "+Dt),Ut.state==="loading"&&(Ht.delete(Dt),Ct.push(Dt),$t=!0)}return wn(Ct),$t}function $n(Ct){let $t=[];for(let[Dt,Ut]of Wt)if(Ut<Ct){let en=vt.fetchers.get(Dt);invariant$4(en,"Expected fetcher: "+Dt),en.state==="loading"&&(fn(Dt),Wt.delete(Dt),$t.push(Dt))}return wn($t),$t.length>0}function Nn(Ct,$t){let Dt=vt.blockers.get(Ct)||IDLE_BLOCKER;return Lt.get(Ct)!==$t&&Lt.set(Ct,$t),Dt}function rn(Ct){vt.blockers.delete(Ct),Lt.delete(Ct)}function bn(Ct,$t){let Dt=vt.blockers.get(Ct)||IDLE_BLOCKER;invariant$4(Dt.state==="unblocked"&&$t.state==="blocked"||Dt.state==="blocked"&&$t.state==="blocked"||Dt.state==="blocked"&&$t.state==="proceeding"||Dt.state==="blocked"&&$t.state==="unblocked"||Dt.state==="proceeding"&&$t.state==="unblocked","Invalid blocker state transition: "+Dt.state+" -> "+$t.state);let Ut=new Map(vt.blockers);Ut.set(Ct,$t),Kt({blockers:Ut})}function Tn(Ct){let{currentLocation:$t,nextLocation:Dt,historyAction:Ut}=Ct;if(Lt.size===0)return;Lt.size>1&&warning$2(!1,"A router only supports one blocker at a time");let en=Array.from(Lt.entries()),[Xt,Zt]=en[en.length-1],Yt=vt.blockers.get(Xt);if(!(Yt&&Yt.state==="proceeding")&&Zt({currentLocation:$t,nextLocation:Dt,historyAction:Ut}))return Xt}function An(Ct){let $t=[];return Ot.forEach((Dt,Ut)=>{(!Ct||Ct(Ut))&&(Dt.cancel(),$t.push(Ut),Ot.delete(Ut))}),$t}function er(Ct,$t,Dt){if(dt=Ct,pt=$t,ft=Dt||null,!mt&&vt.navigation===IDLE_NAVIGATION){mt=!0;let Ut=Kn(vt.location,vt.matches);Ut!=null&&Kt({restoreScrollPosition:Ut})}return()=>{dt=null,pt=null,ft=null}}function zn(Ct,$t){return ft&&ft(Ct,$t.map(Ut=>createUseMatchesMatch(Ut,vt.loaderData)))||Ct.key}function tr(Ct,$t){if(dt&&pt){let Dt=zn(Ct,$t);dt[Dt]=pt()}}function Kn(Ct,$t){if(dt){let Dt=zn(Ct,$t),Ut=dt[Dt];if(typeof Ut=="number")return Ut}return null}function nr(Ct){it={},st=convertRoutesToDataRoutes(Ct,rt,void 0,it)}return yt={get basename(){return at},get state(){return vt},get routes(){return ot},initialize:Jt,subscribe:on,enableScrollRestoration:er,navigate:sn,fetch:Bt,revalidate:hn,createHref:Ct=>et.history.createHref(Ct),encodeLocation:Ct=>et.history.encodeLocation(Ct),getFetcher:At,deleteFetcher:_n,dispose:qt,getBlocker:Nn,deleteBlocker:rn,_internalFetchControllers:kt,_internalActiveDeferreds:Ot,_internalSetRoutes:nr},yt}function isSubmissionNavigation(et){return et!=null&&("formData"in et&&et.formData!=null||"body"in et&&et.body!==void 0)}function normalizeTo(et,_e,tt,nt,rt,it,ot){let st,at;if(it!=null&&ot!=="path"){st=[];for(let ct of _e)if(st.push(ct),ct.route.id===it){at=ct;break}}else st=_e,at=_e[_e.length-1];let lt=resolveTo(rt||".",getPathContributingMatches(st).map(ct=>ct.pathnameBase),stripBasename(et.pathname,tt)||et.pathname,ot==="path");return rt==null&&(lt.search=et.search,lt.hash=et.hash),(rt==null||rt===""||rt===".")&&at&&at.route.index&&!hasNakedIndexQuery(lt.search)&&(lt.search=lt.search?lt.search.replace(/^\?/,"?index&"):"?index"),nt&&tt!=="/"&&(lt.pathname=lt.pathname==="/"?tt:joinPaths([tt,lt.pathname])),createPath(lt)}function normalizeNavigateOptions(et,_e,tt,nt){if(!nt||!isSubmissionNavigation(nt))return{path:tt};if(nt.formMethod&&!isValidMethod(nt.formMethod))return{path:tt,error:getInternalRouterError(405,{method:nt.formMethod})};let rt=()=>({path:tt,error:getInternalRouterError(400,{type:"invalid-body"})}),it=nt.formMethod||"get",ot=et?it.toUpperCase():it.toLowerCase(),st=stripHashFromPath(tt);if(nt.body!==void 0){if(nt.formEncType==="text/plain"){if(!isMutationMethod(ot))return rt();let dt=typeof nt.body=="string"?nt.body:nt.body instanceof FormData||nt.body instanceof URLSearchParams?Array.from(nt.body.entries()).reduce((ft,pt)=>{let[mt,xt]=pt;return""+ft+mt+"="+xt+`
`},""):String(nt.body);return{path:tt,submission:{formMethod:ot,formAction:st,formEncType:nt.formEncType,formData:void 0,json:void 0,text:dt}}}else if(nt.formEncType==="application/json"){if(!isMutationMethod(ot))return rt();try{let dt=typeof nt.body=="string"?JSON.parse(nt.body):nt.body;return{path:tt,submission:{formMethod:ot,formAction:st,formEncType:nt.formEncType,formData:void 0,json:dt,text:void 0}}}catch{return rt()}}}invariant$4(typeof FormData=="function","FormData is not available in this environment");let at,lt;if(nt.formData)at=convertFormDataToSearchParams(nt.formData),lt=nt.formData;else if(nt.body instanceof FormData)at=convertFormDataToSearchParams(nt.body),lt=nt.body;else if(nt.body instanceof URLSearchParams)at=nt.body,lt=convertSearchParamsToFormData(at);else if(nt.body==null)at=new URLSearchParams,lt=new FormData;else try{at=new URLSearchParams(nt.body),lt=convertSearchParamsToFormData(at)}catch{return rt()}let ct={formMethod:ot,formAction:st,formEncType:nt&&nt.formEncType||"application/x-www-form-urlencoded",formData:lt,json:void 0,text:void 0};if(isMutationMethod(ct.formMethod))return{path:tt,submission:ct};let ut=parsePath(tt);return _e&&ut.search&&hasNakedIndexQuery(ut.search)&&at.append("index",""),ut.search="?"+at,{path:createPath(ut),submission:ct}}function getLoaderMatchesUntilBoundary(et,_e){let tt=et;if(_e){let nt=et.findIndex(rt=>rt.route.id===_e);nt>=0&&(tt=et.slice(0,nt))}return tt}function getMatchesToLoad(et,_e,tt,nt,rt,it,ot,st,at,lt,ct,ut,dt,ft){let pt=ft?Object.values(ft)[0]:dt?Object.values(dt)[0]:void 0,mt=et.createURL(_e.location),xt=et.createURL(rt),gt=ft?Object.keys(ft)[0]:void 0,yt=getLoaderMatchesUntilBoundary(tt,gt).filter((_t,Et)=>{if(_t.route.lazy)return!0;if(_t.route.loader==null)return!1;if(isNewLoader(_e.loaderData,_e.matches[Et],_t)||ot.some(wt=>wt===_t.route.id))return!0;let bt=_e.matches[Et],St=_t;return shouldRevalidateLoader(_t,_extends$9({currentUrl:mt,currentParams:bt.params,nextUrl:xt,nextParams:St.params},nt,{actionResult:pt,defaultShouldRevalidate:it||mt.pathname+mt.search===xt.pathname+xt.search||mt.search!==xt.search||isNewRouteInstance(bt,St)}))}),vt=[];return at.forEach((_t,Et)=>{if(!tt.some(Nt=>Nt.route.id===_t.routeId))return;let bt=matchRoutes(ct,_t.path,ut);if(!bt){vt.push({key:Et,routeId:_t.routeId,path:_t.path,matches:null,match:null,controller:null});return}let St=_e.fetchers.get(Et),wt=getTargetMatch(bt,_t.path),Rt=!1;lt.has(Et)?Rt=!1:st.includes(Et)?Rt=!0:St&&St.state!=="idle"&&St.data===void 0?Rt=it:Rt=shouldRevalidateLoader(wt,_extends$9({currentUrl:mt,currentParams:_e.matches[_e.matches.length-1].params,nextUrl:xt,nextParams:tt[tt.length-1].params},nt,{actionResult:pt,defaultShouldRevalidate:it})),Rt&&vt.push({key:Et,routeId:_t.routeId,path:_t.path,matches:bt,match:wt,controller:new AbortController})}),[yt,vt]}function isNewLoader(et,_e,tt){let nt=!_e||tt.route.id!==_e.route.id,rt=et[tt.route.id]===void 0;return nt||rt}function isNewRouteInstance(et,_e){let tt=et.route.path;return et.pathname!==_e.pathname||tt!=null&&tt.endsWith("*")&&et.params["*"]!==_e.params["*"]}function shouldRevalidateLoader(et,_e){if(et.route.shouldRevalidate){let tt=et.route.shouldRevalidate(_e);if(typeof tt=="boolean")return tt}return _e.defaultShouldRevalidate}async function loadLazyRouteModule(et,_e,tt){if(!et.lazy)return;let nt=await et.lazy();if(!et.lazy)return;let rt=tt[et.id];invariant$4(rt,"No route found in manifest");let it={};for(let ot in nt){let at=rt[ot]!==void 0&&ot!=="hasErrorBoundary";warning$2(!at,'Route "'+rt.id+'" has a static property "'+ot+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+ot+'" will be ignored.')),!at&&!immutableRouteKeys.has(ot)&&(it[ot]=nt[ot])}Object.assign(rt,it),Object.assign(rt,_extends$9({},_e(rt),{lazy:void 0}))}async function callLoaderOrAction(et,_e,tt,nt,rt,it,ot,st){st===void 0&&(st={});let at,lt,ct,ut=pt=>{let mt,xt=new Promise((gt,ht)=>mt=ht);return ct=()=>mt(),_e.signal.addEventListener("abort",ct),Promise.race([pt({request:_e,params:tt.params,context:st.requestContext}),xt])};try{let pt=tt.route[et];if(tt.route.lazy)if(pt)lt=(await Promise.all([ut(pt),loadLazyRouteModule(tt.route,it,rt)]))[0];else if(await loadLazyRouteModule(tt.route,it,rt),pt=tt.route[et],pt)lt=await ut(pt);else if(et==="action"){let mt=new URL(_e.url),xt=mt.pathname+mt.search;throw getInternalRouterError(405,{method:_e.method,pathname:xt,routeId:tt.route.id})}else return{type:ResultType.data,data:void 0};else if(pt)lt=await ut(pt);else{let mt=new URL(_e.url),xt=mt.pathname+mt.search;throw getInternalRouterError(404,{pathname:xt})}invariant$4(lt!==void 0,"You defined "+(et==="action"?"an action":"a loader")+" for route "+('"'+tt.route.id+"\" but didn't return anything from your `"+et+"` ")+"function. Please return a value or `null`.")}catch(pt){at=ResultType.error,lt=pt}finally{ct&&_e.signal.removeEventListener("abort",ct)}if(isResponse(lt)){let pt=lt.status;if(redirectStatusCodes.has(pt)){let gt=lt.headers.get("Location");if(invariant$4(gt,"Redirects returned/thrown from loaders/actions must have a Location header"),!ABSOLUTE_URL_REGEX$1.test(gt))gt=normalizeTo(new URL(_e.url),nt.slice(0,nt.indexOf(tt)+1),ot,!0,gt);else if(!st.isStaticRequest){let ht=new URL(_e.url),yt=gt.startsWith("//")?new URL(ht.protocol+gt):new URL(gt),vt=stripBasename(yt.pathname,ot)!=null;yt.origin===ht.origin&&vt&&(gt=yt.pathname+yt.search+yt.hash)}if(st.isStaticRequest)throw lt.headers.set("Location",gt),lt;return{type:ResultType.redirect,status:pt,location:gt,revalidate:lt.headers.get("X-Remix-Revalidate")!==null,reloadDocument:lt.headers.get("X-Remix-Reload-Document")!==null}}if(st.isRouteRequest)throw{type:at===ResultType.error?ResultType.error:ResultType.data,response:lt};let mt,xt=lt.headers.get("Content-Type");return xt&&/\bapplication\/json\b/.test(xt)?mt=await lt.json():mt=await lt.text(),at===ResultType.error?{type:at,error:new ErrorResponse(pt,lt.statusText,mt),headers:lt.headers}:{type:ResultType.data,data:mt,statusCode:lt.status,headers:lt.headers}}if(at===ResultType.error)return{type:at,error:lt};if(isDeferredData(lt)){var dt,ft;return{type:ResultType.deferred,deferredData:lt,statusCode:(dt=lt.init)==null?void 0:dt.status,headers:((ft=lt.init)==null?void 0:ft.headers)&&new Headers(lt.init.headers)}}return{type:ResultType.data,data:lt}}function createClientSideRequest(et,_e,tt,nt){let rt=et.createURL(stripHashFromPath(_e)).toString(),it={signal:tt};if(nt&&isMutationMethod(nt.formMethod)){let{formMethod:ot,formEncType:st}=nt;it.method=ot.toUpperCase(),st==="application/json"?(it.headers=new Headers({"Content-Type":st}),it.body=JSON.stringify(nt.json)):st==="text/plain"?it.body=nt.text:st==="application/x-www-form-urlencoded"&&nt.formData?it.body=convertFormDataToSearchParams(nt.formData):it.body=nt.formData}return new Request(rt,it)}function convertFormDataToSearchParams(et){let _e=new URLSearchParams;for(let[tt,nt]of et.entries())_e.append(tt,typeof nt=="string"?nt:nt.name);return _e}function convertSearchParamsToFormData(et){let _e=new FormData;for(let[tt,nt]of et.entries())_e.append(tt,nt);return _e}function processRouteLoaderData(et,_e,tt,nt,rt){let it={},ot=null,st,at=!1,lt={};return tt.forEach((ct,ut)=>{let dt=_e[ut].route.id;if(invariant$4(!isRedirectResult(ct),"Cannot handle redirect results in processLoaderData"),isErrorResult(ct)){let ft=findNearestBoundary(et,dt),pt=ct.error;nt&&(pt=Object.values(nt)[0],nt=void 0),ot=ot||{},ot[ft.route.id]==null&&(ot[ft.route.id]=pt),it[dt]=void 0,at||(at=!0,st=isRouteErrorResponse(ct.error)?ct.error.status:500),ct.headers&&(lt[dt]=ct.headers)}else isDeferredResult(ct)?(rt.set(dt,ct.deferredData),it[dt]=ct.deferredData.data):it[dt]=ct.data,ct.statusCode!=null&&ct.statusCode!==200&&!at&&(st=ct.statusCode),ct.headers&&(lt[dt]=ct.headers)}),nt&&(ot=nt,it[Object.keys(nt)[0]]=void 0),{loaderData:it,errors:ot,statusCode:st||200,loaderHeaders:lt}}function processLoaderData(et,_e,tt,nt,rt,it,ot,st){let{loaderData:at,errors:lt}=processRouteLoaderData(_e,tt,nt,rt,st);for(let ct=0;ct<it.length;ct++){let{key:ut,match:dt,controller:ft}=it[ct];invariant$4(ot!==void 0&&ot[ct]!==void 0,"Did not find corresponding fetcher result");let pt=ot[ct];if(!(ft&&ft.signal.aborted))if(isErrorResult(pt)){let mt=findNearestBoundary(et.matches,dt==null?void 0:dt.route.id);lt&&lt[mt.route.id]||(lt=_extends$9({},lt,{[mt.route.id]:pt.error})),et.fetchers.delete(ut)}else if(isRedirectResult(pt))invariant$4(!1,"Unhandled fetcher revalidation redirect");else if(isDeferredResult(pt))invariant$4(!1,"Unhandled fetcher deferred data");else{let mt=getDoneFetcher(pt.data);et.fetchers.set(ut,mt)}}return{loaderData:at,errors:lt}}function mergeLoaderData(et,_e,tt,nt){let rt=_extends$9({},_e);for(let it of tt){let ot=it.route.id;if(_e.hasOwnProperty(ot)?_e[ot]!==void 0&&(rt[ot]=_e[ot]):et[ot]!==void 0&&it.route.loader&&(rt[ot]=et[ot]),nt&&nt.hasOwnProperty(ot))break}return rt}function findNearestBoundary(et,_e){return(_e?et.slice(0,et.findIndex(nt=>nt.route.id===_e)+1):[...et]).reverse().find(nt=>nt.route.hasErrorBoundary===!0)||et[0]}function getShortCircuitMatches(et){let _e=et.find(tt=>tt.index||!tt.path||tt.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:_e}],route:_e}}function getInternalRouterError(et,_e){let{pathname:tt,routeId:nt,method:rt,type:it}=_e===void 0?{}:_e,ot="Unknown Server Error",st="Unknown @remix-run/router error";return et===400?(ot="Bad Request",rt&&tt&&nt?st="You made a "+rt+' request to "'+tt+'" but '+('did not provide a `loader` for route "'+nt+'", ')+"so there is no way to handle the request.":it==="defer-action"?st="defer() is not supported in actions":it==="invalid-body"&&(st="Unable to encode submission body")):et===403?(ot="Forbidden",st='Route "'+nt+'" does not match URL "'+tt+'"'):et===404?(ot="Not Found",st='No route matches URL "'+tt+'"'):et===405&&(ot="Method Not Allowed",rt&&tt&&nt?st="You made a "+rt.toUpperCase()+' request to "'+tt+'" but '+('did not provide an `action` for route "'+nt+'", ')+"so there is no way to handle the request.":rt&&(st='Invalid request method "'+rt.toUpperCase()+'"')),new ErrorResponse(et||500,ot,new Error(st),!0)}function findRedirect(et){for(let _e=et.length-1;_e>=0;_e--){let tt=et[_e];if(isRedirectResult(tt))return{result:tt,idx:_e}}}function stripHashFromPath(et){let _e=typeof et=="string"?parsePath(et):et;return createPath(_extends$9({},_e,{hash:""}))}function isHashChangeOnly(et,_e){return et.pathname!==_e.pathname||et.search!==_e.search?!1:et.hash===""?_e.hash!=="":et.hash===_e.hash?!0:_e.hash!==""}function isDeferredResult(et){return et.type===ResultType.deferred}function isErrorResult(et){return et.type===ResultType.error}function isRedirectResult(et){return(et&&et.type)===ResultType.redirect}function isDeferredData(et){let _e=et;return _e&&typeof _e=="object"&&typeof _e.data=="object"&&typeof _e.subscribe=="function"&&typeof _e.cancel=="function"&&typeof _e.resolveData=="function"}function isResponse(et){return et!=null&&typeof et.status=="number"&&typeof et.statusText=="string"&&typeof et.headers=="object"&&typeof et.body<"u"}function isValidMethod(et){return validRequestMethods.has(et.toLowerCase())}function isMutationMethod(et){return validMutationMethods.has(et.toLowerCase())}async function resolveDeferredResults(et,_e,tt,nt,rt,it){for(let ot=0;ot<tt.length;ot++){let st=tt[ot],at=_e[ot];if(!at)continue;let lt=et.find(ut=>ut.route.id===at.route.id),ct=lt!=null&&!isNewRouteInstance(lt,at)&&(it&&it[at.route.id])!==void 0;if(isDeferredResult(st)&&(rt||ct)){let ut=nt[ot];invariant$4(ut,"Expected an AbortSignal for revalidating fetcher deferred result"),await resolveDeferredData(st,ut,rt).then(dt=>{dt&&(tt[ot]=dt||tt[ot])})}}}async function resolveDeferredData(et,_e,tt){if(tt===void 0&&(tt=!1),!await et.deferredData.resolveData(_e)){if(tt)try{return{type:ResultType.data,data:et.deferredData.unwrappedData}}catch(rt){return{type:ResultType.error,error:rt}}return{type:ResultType.data,data:et.deferredData.data}}}function hasNakedIndexQuery(et){return new URLSearchParams(et).getAll("index").some(_e=>_e==="")}function createUseMatchesMatch(et,_e){let{route:tt,pathname:nt,params:rt}=et;return{id:tt.id,pathname:nt,params:rt,data:_e[tt.id],handle:tt.handle}}function getTargetMatch(et,_e){let tt=typeof _e=="string"?parsePath(_e).search:_e.search;if(et[et.length-1].route.index&&hasNakedIndexQuery(tt||""))return et[et.length-1];let nt=getPathContributingMatches(et);return nt[nt.length-1]}function getSubmissionFromNavigation(et){let{formMethod:_e,formAction:tt,formEncType:nt,text:rt,formData:it,json:ot}=et;if(!(!_e||!tt||!nt)){if(rt!=null)return{formMethod:_e,formAction:tt,formEncType:nt,formData:void 0,json:void 0,text:rt};if(it!=null)return{formMethod:_e,formAction:tt,formEncType:nt,formData:it,json:void 0,text:void 0};if(ot!==void 0)return{formMethod:_e,formAction:tt,formEncType:nt,formData:void 0,json:ot,text:void 0}}}function getLoadingNavigation(et,_e){return _e?{state:"loading",location:et,formMethod:_e.formMethod,formAction:_e.formAction,formEncType:_e.formEncType,formData:_e.formData,json:_e.json,text:_e.text}:{state:"loading",location:et,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function getSubmittingNavigation(et,_e){return{state:"submitting",location:et,formMethod:_e.formMethod,formAction:_e.formAction,formEncType:_e.formEncType,formData:_e.formData,json:_e.json,text:_e.text}}function getLoadingFetcher(et,_e){return et?{state:"loading",formMethod:et.formMethod,formAction:et.formAction,formEncType:et.formEncType,formData:et.formData,json:et.json,text:et.text,data:_e," _hasFetcherDoneAnything ":!0}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:_e," _hasFetcherDoneAnything ":!0}}function getSubmittingFetcher(et,_e){return{state:"submitting",formMethod:et.formMethod,formAction:et.formAction,formEncType:et.formEncType,formData:et.formData,json:et.json,text:et.text,data:_e?_e.data:void 0," _hasFetcherDoneAnything ":!0}}function getDoneFetcher(et){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:et," _hasFetcherDoneAnything ":!0}}/**
 * React Router v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(et){for(var _e=1;_e<arguments.length;_e++){var tt=arguments[_e];for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(et[nt]=tt[nt])}return et},_extends$8.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(et,_e){let{relative:tt}=_e===void 0?{}:_e;useInRouterContext()||invariant$4(!1);let{basename:nt,navigator:rt}=reactExports.useContext(NavigationContext),{hash:it,pathname:ot,search:st}=useResolvedPath(et,{relative:tt}),at=ot;return nt!=="/"&&(at=ot==="/"?nt:joinPaths([nt,ot])),rt.createHref({pathname:at,search:st,hash:it})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$4(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$2(et){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(et)}function useNavigate(){let{isDataRoute:et}=reactExports.useContext(RouteContext);return et?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$4(!1);let et=reactExports.useContext(DataRouterContext),{basename:_e,navigator:tt}=reactExports.useContext(NavigationContext),{matches:nt}=reactExports.useContext(RouteContext),{pathname:rt}=useLocation(),it=JSON.stringify(getPathContributingMatches(nt).map(at=>at.pathnameBase)),ot=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{ot.current=!0}),reactExports.useCallback(function(at,lt){if(lt===void 0&&(lt={}),!ot.current)return;if(typeof at=="number"){tt.go(at);return}let ct=resolveTo(at,JSON.parse(it),rt,lt.relative==="path");et==null&&_e!=="/"&&(ct.pathname=ct.pathname==="/"?_e:joinPaths([_e,ct.pathname])),(lt.replace?tt.replace:tt.push)(ct,lt.state,lt)},[_e,tt,it,rt,et])}const OutletContext=reactExports.createContext(null);function useOutlet(et){let _e=reactExports.useContext(RouteContext).outlet;return _e&&reactExports.createElement(OutletContext.Provider,{value:et},_e)}function useResolvedPath(et,_e){let{relative:tt}=_e===void 0?{}:_e,{matches:nt}=reactExports.useContext(RouteContext),{pathname:rt}=useLocation(),it=JSON.stringify(getPathContributingMatches(nt).map(ot=>ot.pathnameBase));return reactExports.useMemo(()=>resolveTo(et,JSON.parse(it),rt,tt==="path"),[et,it,rt,tt])}function useRoutesImpl(et,_e,tt){useInRouterContext()||invariant$4(!1);let{navigator:nt}=reactExports.useContext(NavigationContext),{matches:rt}=reactExports.useContext(RouteContext),it=rt[rt.length-1],ot=it?it.params:{};it&&it.pathname;let st=it?it.pathnameBase:"/";it&&it.route;let at=useLocation(),lt;if(_e){var ct;let mt=typeof _e=="string"?parsePath(_e):_e;st==="/"||(ct=mt.pathname)!=null&&ct.startsWith(st)||invariant$4(!1),lt=mt}else lt=at;let ut=lt.pathname||"/",dt=st==="/"?ut:ut.slice(st.length)||"/",ft=matchRoutes(et,{pathname:dt}),pt=_renderMatches(ft&&ft.map(mt=>Object.assign({},mt,{params:Object.assign({},ot,mt.params),pathname:joinPaths([st,nt.encodeLocation?nt.encodeLocation(mt.pathname).pathname:mt.pathname]),pathnameBase:mt.pathnameBase==="/"?st:joinPaths([st,nt.encodeLocation?nt.encodeLocation(mt.pathnameBase).pathname:mt.pathnameBase])})),rt,tt);return _e&&pt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$8({pathname:"/",search:"",hash:"",state:null,key:"default"},lt),navigationType:Action.Pop}},pt):pt}function DefaultErrorComponent(){let et=useRouteError(),_e=isRouteErrorResponse(et)?et.status+" "+et.statusText:et instanceof Error?et.message:JSON.stringify(et),tt=et instanceof Error?et.stack:null,rt={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},_e),tt?reactExports.createElement("pre",{style:rt},tt):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(_e){super(_e),this.state={location:_e.location,revalidation:_e.revalidation,error:_e.error}}static getDerivedStateFromError(_e){return{error:_e}}static getDerivedStateFromProps(_e,tt){return tt.location!==_e.location||tt.revalidation!=="idle"&&_e.revalidation==="idle"?{error:_e.error,location:_e.location,revalidation:_e.revalidation}:{error:_e.error||tt.error,location:tt.location,revalidation:_e.revalidation||tt.revalidation}}componentDidCatch(_e,tt){console.error("React Router caught the following error during render",_e,tt)}render(){return this.state.error?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(et){let{routeContext:_e,match:tt,children:nt}=et,rt=reactExports.useContext(DataRouterContext);return rt&&rt.static&&rt.staticContext&&(tt.route.errorElement||tt.route.ErrorBoundary)&&(rt.staticContext._deepestRenderedBoundaryId=tt.route.id),reactExports.createElement(RouteContext.Provider,{value:_e},nt)}function _renderMatches(et,_e,tt){var nt;if(_e===void 0&&(_e=[]),tt===void 0&&(tt=null),et==null){var rt;if((rt=tt)!=null&&rt.errors)et=tt.matches;else return null}let it=et,ot=(nt=tt)==null?void 0:nt.errors;if(ot!=null){let st=it.findIndex(at=>at.route.id&&(ot==null?void 0:ot[at.route.id]));st>=0||invariant$4(!1),it=it.slice(0,Math.min(it.length,st+1))}return it.reduceRight((st,at,lt)=>{let ct=at.route.id?ot==null?void 0:ot[at.route.id]:null,ut=null;tt&&(ut=at.route.errorElement||defaultErrorElement);let dt=_e.concat(it.slice(0,lt+1)),ft=()=>{let pt;return ct?pt=ut:at.route.Component?pt=reactExports.createElement(at.route.Component,null):at.route.element?pt=at.route.element:pt=st,reactExports.createElement(RenderedRoute,{match:at,routeContext:{outlet:st,matches:dt,isDataRoute:tt!=null},children:pt})};return tt&&(at.route.ErrorBoundary||at.route.errorElement||lt===0)?reactExports.createElement(RenderErrorBoundary,{location:tt.location,revalidation:tt.revalidation,component:ut,error:ct,children:ft(),routeContext:{outlet:null,matches:dt,isDataRoute:!0}}):ft()},null)}var DataRouterHook$1=function(et){return et.UseBlocker="useBlocker",et.UseRevalidator="useRevalidator",et.UseNavigateStable="useNavigate",et}(DataRouterHook$1||{}),DataRouterStateHook$1=function(et){return et.UseBlocker="useBlocker",et.UseLoaderData="useLoaderData",et.UseActionData="useActionData",et.UseRouteError="useRouteError",et.UseNavigation="useNavigation",et.UseRouteLoaderData="useRouteLoaderData",et.UseMatches="useMatches",et.UseRevalidator="useRevalidator",et.UseNavigateStable="useNavigate",et.UseRouteId="useRouteId",et}(DataRouterStateHook$1||{});function useDataRouterContext(et){let _e=reactExports.useContext(DataRouterContext);return _e||invariant$4(!1),_e}function useDataRouterState(et){let _e=reactExports.useContext(DataRouterStateContext);return _e||invariant$4(!1),_e}function useRouteContext(et){let _e=reactExports.useContext(RouteContext);return _e||invariant$4(!1),_e}function useCurrentRouteId(et){let _e=useRouteContext(),tt=_e.matches[_e.matches.length-1];return tt.route.id||invariant$4(!1),tt.route.id}function useLoaderData(){let et=useDataRouterState(DataRouterStateHook$1.UseLoaderData),_e=useCurrentRouteId(DataRouterStateHook$1.UseLoaderData);if(et.errors&&et.errors[_e]!=null){console.error("You cannot `useLoaderData` in an errorElement (routeId: "+_e+")");return}return et.loaderData[_e]}function useRouteError(){var et;let _e=reactExports.useContext(RouteErrorContext),tt=useDataRouterState(DataRouterStateHook$1.UseRouteError),nt=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return _e||((et=tt.errors)==null?void 0:et[nt])}function useNavigateStable(){let{router:et}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),_e=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),tt=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{tt.current=!0}),reactExports.useCallback(function(rt,it){it===void 0&&(it={}),tt.current&&(typeof rt=="number"?et.navigate(rt):et.navigate(rt,_extends$8({fromRouteId:_e},it)))},[et,_e])}const START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION];function RouterProvider(et){let{fallbackElement:_e,router:tt,future:nt}=et,[rt,it]=reactExports.useState(tt.state),{v7_startTransition:ot}=nt||{},st=reactExports.useCallback(ut=>{ot&&startTransitionImpl?startTransitionImpl(()=>it(ut)):it(ut)},[it,ot]);reactExports.useLayoutEffect(()=>tt.subscribe(st),[tt,st]);let at=reactExports.useMemo(()=>({createHref:tt.createHref,encodeLocation:tt.encodeLocation,go:ut=>tt.navigate(ut),push:(ut,dt,ft)=>tt.navigate(ut,{state:dt,preventScrollReset:ft==null?void 0:ft.preventScrollReset}),replace:(ut,dt,ft)=>tt.navigate(ut,{replace:!0,state:dt,preventScrollReset:ft==null?void 0:ft.preventScrollReset})}),[tt]),lt=tt.basename||"/",ct=reactExports.useMemo(()=>({router:tt,navigator:at,static:!1,basename:lt}),[tt,at,lt]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:ct},reactExports.createElement(DataRouterStateContext.Provider,{value:rt},reactExports.createElement(Router,{basename:lt,location:rt.location,navigationType:rt.historyAction,navigator:at},rt.initialized?reactExports.createElement(DataRoutes,{routes:tt.routes,state:rt}):_e))),null)}function DataRoutes(et){let{routes:_e,state:tt}=et;return useRoutesImpl(_e,void 0,tt)}function Navigate(et){let{to:_e,replace:tt,state:nt,relative:rt}=et;useInRouterContext()||invariant$4(!1);let{matches:it}=reactExports.useContext(RouteContext),{pathname:ot}=useLocation(),st=useNavigate(),at=resolveTo(_e,getPathContributingMatches(it).map(ct=>ct.pathnameBase),ot,rt==="path"),lt=JSON.stringify(at);return reactExports.useEffect(()=>st(JSON.parse(lt),{replace:tt,state:nt,relative:rt}),[st,lt,rt,tt,nt]),null}function Outlet(et){return useOutlet(et.context)}function Router(et){let{basename:_e="/",children:tt=null,location:nt,navigationType:rt=Action.Pop,navigator:it,static:ot=!1}=et;useInRouterContext()&&invariant$4(!1);let st=_e.replace(/^\/*/,"/"),at=reactExports.useMemo(()=>({basename:st,navigator:it,static:ot}),[st,it,ot]);typeof nt=="string"&&(nt=parsePath(nt));let{pathname:lt="/",search:ct="",hash:ut="",state:dt=null,key:ft="default"}=nt,pt=reactExports.useMemo(()=>{let mt=stripBasename(lt,st);return mt==null?null:{location:{pathname:mt,search:ct,hash:ut,state:dt,key:ft},navigationType:rt}},[st,lt,ct,ut,dt,ft,rt]);return pt==null?null:reactExports.createElement(NavigationContext.Provider,{value:at},reactExports.createElement(LocationContext.Provider,{children:tt,value:pt}))}new Promise(()=>{});function mapRouteProperties(et){let _e={hasErrorBoundary:et.ErrorBoundary!=null||et.errorElement!=null};return et.Component&&Object.assign(_e,{element:reactExports.createElement(et.Component),Component:void 0}),et.ErrorBoundary&&Object.assign(_e,{errorElement:reactExports.createElement(et.ErrorBoundary),ErrorBoundary:void 0}),_e}/**
 * React Router DOM v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(et){for(var _e=1;_e<arguments.length;_e++){var tt=arguments[_e];for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(et[nt]=tt[nt])}return et},_extends$7.apply(this,arguments)}function _objectWithoutPropertiesLoose$d(et,_e){if(et==null)return{};var tt={},nt=Object.keys(et),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_e.indexOf(rt)>=0)&&(tt[rt]=et[rt]);return tt}function isModifiedEvent$1(et){return!!(et.metaKey||et.altKey||et.ctrlKey||et.shiftKey)}function shouldProcessLinkClick(et,_e){return et.button===0&&(!_e||_e==="_self")&&!isModifiedEvent$1(et)}const _excluded$f=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function createHashRouter(et,_e){return createRouter({basename:_e==null?void 0:_e.basename,future:_extends$7({},_e==null?void 0:_e.future,{v7_prependBasename:!0}),history:createHashHistory({window:_e==null?void 0:_e.window}),hydrationData:(_e==null?void 0:_e.hydrationData)||parseHydrationData(),routes:et,mapRouteProperties}).initialize()}function parseHydrationData(){var et;let _e=(et=window)==null?void 0:et.__staticRouterHydrationData;return _e&&_e.errors&&(_e=_extends$7({},_e,{errors:deserializeErrors(_e.errors)})),_e}function deserializeErrors(et){if(!et)return null;let _e=Object.entries(et),tt={};for(let[nt,rt]of _e)if(rt&&rt.__type==="RouteErrorResponse")tt[nt]=new ErrorResponse(rt.status,rt.statusText,rt.data,rt.internal===!0);else if(rt&&rt.__type==="Error"){if(rt.__subType){let it=window[rt.__subType];if(typeof it=="function")try{let ot=new it(rt.message);ot.stack="",tt[nt]=ot}catch{}}if(tt[nt]==null){let it=new Error(rt.message);it.stack="",tt[nt]=it}}else tt[nt]=rt;return tt}const isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link$1=reactExports.forwardRef(function(_e,tt){let{onClick:nt,relative:rt,reloadDocument:it,replace:ot,state:st,target:at,to:lt,preventScrollReset:ct}=_e,ut=_objectWithoutPropertiesLoose$d(_e,_excluded$f),{basename:dt}=reactExports.useContext(NavigationContext),ft,pt=!1;if(typeof lt=="string"&&ABSOLUTE_URL_REGEX.test(lt)&&(ft=lt,isBrowser))try{let ht=new URL(window.location.href),yt=lt.startsWith("//")?new URL(ht.protocol+lt):new URL(lt),vt=stripBasename(yt.pathname,dt);yt.origin===ht.origin&&vt!=null?lt=vt+yt.search+yt.hash:pt=!0}catch{}let mt=useHref(lt,{relative:rt}),xt=useLinkClickHandler(lt,{replace:ot,state:st,target:at,preventScrollReset:ct,relative:rt});function gt(ht){nt&&nt(ht),ht.defaultPrevented||xt(ht)}return reactExports.createElement("a",_extends$7({},ut,{href:ft||mt,onClick:pt||it?nt:gt,ref:tt,target:at}))});var DataRouterHook;(function(et){et.UseScrollRestoration="useScrollRestoration",et.UseSubmit="useSubmit",et.UseSubmitFetcher="useSubmitFetcher",et.UseFetcher="useFetcher"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(et){et.UseFetchers="useFetchers",et.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(et,_e){let{target:tt,replace:nt,state:rt,preventScrollReset:it,relative:ot}=_e===void 0?{}:_e,st=useNavigate(),at=useLocation(),lt=useResolvedPath(et,{relative:ot});return reactExports.useCallback(ct=>{if(shouldProcessLinkClick(ct,tt)){ct.preventDefault();let ut=nt!==void 0?nt:createPath(at)===createPath(lt);st(et,{replace:ut,state:rt,preventScrollReset:it,relative:ot})}},[at,st,lt,nt,rt,tt,et,it,ot])}var define_process_env_default$1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const assert=function(et,_e){if(!et)throw assertionError(_e)},assertionError=function(et){return new Error("Firebase Database ("+CONSTANTS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+et)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(et){const _e=[];let tt=0;for(let nt=0;nt<et.length;nt++){let rt=et.charCodeAt(nt);rt<128?_e[tt++]=rt:rt<2048?(_e[tt++]=rt>>6|192,_e[tt++]=rt&63|128):(rt&64512)===55296&&nt+1<et.length&&(et.charCodeAt(nt+1)&64512)===56320?(rt=65536+((rt&1023)<<10)+(et.charCodeAt(++nt)&1023),_e[tt++]=rt>>18|240,_e[tt++]=rt>>12&63|128,_e[tt++]=rt>>6&63|128,_e[tt++]=rt&63|128):(_e[tt++]=rt>>12|224,_e[tt++]=rt>>6&63|128,_e[tt++]=rt&63|128)}return _e},byteArrayToString=function(et){const _e=[];let tt=0,nt=0;for(;tt<et.length;){const rt=et[tt++];if(rt<128)_e[nt++]=String.fromCharCode(rt);else if(rt>191&&rt<224){const it=et[tt++];_e[nt++]=String.fromCharCode((rt&31)<<6|it&63)}else if(rt>239&&rt<365){const it=et[tt++],ot=et[tt++],st=et[tt++],at=((rt&7)<<18|(it&63)<<12|(ot&63)<<6|st&63)-65536;_e[nt++]=String.fromCharCode(55296+(at>>10)),_e[nt++]=String.fromCharCode(56320+(at&1023))}else{const it=et[tt++],ot=et[tt++];_e[nt++]=String.fromCharCode((rt&15)<<12|(it&63)<<6|ot&63)}}return _e.join("")},base64$2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(et,_e){if(!Array.isArray(et))throw Error("encodeByteArray takes an array as a parameter");this.init_();const tt=_e?this.byteToCharMapWebSafe_:this.byteToCharMap_,nt=[];for(let rt=0;rt<et.length;rt+=3){const it=et[rt],ot=rt+1<et.length,st=ot?et[rt+1]:0,at=rt+2<et.length,lt=at?et[rt+2]:0,ct=it>>2,ut=(it&3)<<4|st>>4;let dt=(st&15)<<2|lt>>6,ft=lt&63;at||(ft=64,ot||(dt=64)),nt.push(tt[ct],tt[ut],tt[dt],tt[ft])}return nt.join("")},encodeString(et,_e){return this.HAS_NATIVE_SUPPORT&&!_e?btoa(et):this.encodeByteArray(stringToByteArray$1(et),_e)},decodeString(et,_e){return this.HAS_NATIVE_SUPPORT&&!_e?atob(et):byteArrayToString(this.decodeStringToByteArray(et,_e))},decodeStringToByteArray(et,_e){this.init_();const tt=_e?this.charToByteMapWebSafe_:this.charToByteMap_,nt=[];for(let rt=0;rt<et.length;){const it=tt[et.charAt(rt++)],st=rt<et.length?tt[et.charAt(rt)]:0;++rt;const lt=rt<et.length?tt[et.charAt(rt)]:64;++rt;const ut=rt<et.length?tt[et.charAt(rt)]:64;if(++rt,it==null||st==null||lt==null||ut==null)throw new DecodeBase64StringError;const dt=it<<2|st>>4;if(nt.push(dt),lt!==64){const ft=st<<4&240|lt>>2;if(nt.push(ft),ut!==64){const pt=lt<<6&192|ut;nt.push(pt)}}}return nt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let et=0;et<this.ENCODED_VALS.length;et++)this.byteToCharMap_[et]=this.ENCODED_VALS.charAt(et),this.charToByteMap_[this.byteToCharMap_[et]]=et,this.byteToCharMapWebSafe_[et]=this.ENCODED_VALS_WEBSAFE.charAt(et),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[et]]=et,et>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(et)]=et,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(et)]=et)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(et){const _e=stringToByteArray$1(et);return base64$2.encodeByteArray(_e,!0)},base64urlEncodeWithoutPadding=function(et){return base64Encode(et).replace(/\./g,"")},base64Decode=function(et){try{return base64$2.decodeString(et,!0)}catch(_e){console.error("base64Decode failed: ",_e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function deepCopy(et){return deepExtend(void 0,et)}function deepExtend(et,_e){if(!(_e instanceof Object))return _e;switch(_e.constructor){case Date:const tt=_e;return new Date(tt.getTime());case Object:et===void 0&&(et={});break;case Array:et=[];break;default:return _e}for(const tt in _e)!_e.hasOwnProperty(tt)||!isValidKey$1(tt)||(et[tt]=deepExtend(et[tt],_e[tt]));return et}function isValidKey$1(et){return et!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default$1>"u")return;const et=define_process_env_default$1.__FIREBASE_DEFAULTS__;if(et)return JSON.parse(et)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let et;try{et=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const _e=et&&base64Decode(et[1]);return _e&&JSON.parse(_e)},getDefaults=()=>{try{return getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(et){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${et}`);return}},getDefaultEmulatorHost=et=>{var _e,tt;return(tt=(_e=getDefaults())===null||_e===void 0?void 0:_e.emulatorHosts)===null||tt===void 0?void 0:tt[et]},getDefaultEmulatorHostnameAndPort=et=>{const _e=getDefaultEmulatorHost(et);if(!_e)return;const tt=_e.lastIndexOf(":");if(tt<=0||tt+1===_e.length)throw new Error(`Invalid host ${_e} with no separate hostname and port!`);const nt=parseInt(_e.substring(tt+1),10);return _e[0]==="["?[_e.substring(1,tt-1),nt]:[_e.substring(0,tt),nt]},getDefaultAppConfig=()=>{var et;return(et=getDefaults())===null||et===void 0?void 0:et.config},getExperimentalSetting=et=>{var _e;return(_e=getDefaults())===null||_e===void 0?void 0:_e[`_${et}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((_e,tt)=>{this.resolve=_e,this.reject=tt})}wrapCallback(_e){return(tt,nt)=>{tt?this.reject(tt):this.resolve(nt),typeof _e=="function"&&(this.promise.catch(()=>{}),_e.length===1?_e(tt):_e(tt,nt))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(et,_e){if(et.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const tt={alg:"none",type:"JWT"},nt=_e||"demo-project",rt=et.iat||0,it=et.sub||et.user_id;if(!it)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ot=Object.assign({iss:`https://securetoken.google.com/${nt}`,aud:nt,iat:rt,exp:rt+3600,auth_time:rt,sub:it,user_id:it,firebase:{sign_in_provider:"custom",identities:{}}},et);return[base64urlEncodeWithoutPadding(JSON.stringify(tt)),base64urlEncodeWithoutPadding(JSON.stringify(ot)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isBrowserExtension(){const et=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof et=="object"&&et.id!==void 0}function isReactNative$1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const et=getUA();return et.indexOf("MSIE ")>=0||et.indexOf("Trident/")>=0}function isNodeSdk(){return CONSTANTS.NODE_ADMIN===!0}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((et,_e)=>{try{let tt=!0;const nt="validate-browser-context-for-indexeddb-analytics-module",rt=self.indexedDB.open(nt);rt.onsuccess=()=>{rt.result.close(),tt||self.indexedDB.deleteDatabase(nt),et(!0)},rt.onupgradeneeded=()=>{tt=!1},rt.onerror=()=>{var it;_e(((it=rt.error)===null||it===void 0?void 0:it.message)||"")}}catch(tt){_e(tt)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(_e,tt,nt){super(tt),this.code=_e,this.customData=nt,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(_e,tt,nt){this.service=_e,this.serviceName=tt,this.errors=nt}create(_e,...tt){const nt=tt[0]||{},rt=`${this.service}/${_e}`,it=this.errors[_e],ot=it?replaceTemplate(it,nt):"Error",st=`${this.serviceName}: ${ot} (${rt}).`;return new FirebaseError(rt,st,nt)}}function replaceTemplate(et,_e){return et.replace(PATTERN,(tt,nt)=>{const rt=_e[nt];return rt!=null?String(rt):`<${nt}?>`})}const PATTERN=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jsonEval(et){return JSON.parse(et)}function stringify(et){return JSON.stringify(et)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const decode=function(et){let _e={},tt={},nt={},rt="";try{const it=et.split(".");_e=jsonEval(base64Decode(it[0])||""),tt=jsonEval(base64Decode(it[1])||""),rt=it[2],nt=tt.d||{},delete tt.d}catch{}return{header:_e,claims:tt,data:nt,signature:rt}},isValidFormat=function(et){const _e=decode(et),tt=_e.claims;return!!tt&&typeof tt=="object"&&tt.hasOwnProperty("iat")},isAdmin=function(et){const _e=decode(et).claims;return typeof _e=="object"&&_e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function contains$2(et,_e){return Object.prototype.hasOwnProperty.call(et,_e)}function safeGet(et,_e){if(Object.prototype.hasOwnProperty.call(et,_e))return et[_e]}function isEmpty(et){for(const _e in et)if(Object.prototype.hasOwnProperty.call(et,_e))return!1;return!0}function map$1(et,_e,tt){const nt={};for(const rt in et)Object.prototype.hasOwnProperty.call(et,rt)&&(nt[rt]=_e.call(tt,et[rt],rt,et));return nt}function deepEqual(et,_e){if(et===_e)return!0;const tt=Object.keys(et),nt=Object.keys(_e);for(const rt of tt){if(!nt.includes(rt))return!1;const it=et[rt],ot=_e[rt];if(isObject(it)&&isObject(ot)){if(!deepEqual(it,ot))return!1}else if(it!==ot)return!1}for(const rt of nt)if(!tt.includes(rt))return!1;return!0}function isObject(et){return et!==null&&typeof et=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(et){const _e=[];for(const[tt,nt]of Object.entries(et))Array.isArray(nt)?nt.forEach(rt=>{_e.push(encodeURIComponent(tt)+"="+encodeURIComponent(rt))}):_e.push(encodeURIComponent(tt)+"="+encodeURIComponent(nt));return _e.length?"&"+_e.join("&"):""}function querystringDecode(et){const _e={};return et.replace(/^\?/,"").split("&").forEach(nt=>{if(nt){const[rt,it]=nt.split("=");_e[decodeURIComponent(rt)]=decodeURIComponent(it)}}),_e}function extractQuerystring(et){const _e=et.indexOf("?");if(!_e)return"";const tt=et.indexOf("#",_e);return et.substring(_e,tt>0?tt:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sha1{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let _e=1;_e<this.blockSize;++_e)this.pad_[_e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(_e,tt){tt||(tt=0);const nt=this.W_;if(typeof _e=="string")for(let ut=0;ut<16;ut++)nt[ut]=_e.charCodeAt(tt)<<24|_e.charCodeAt(tt+1)<<16|_e.charCodeAt(tt+2)<<8|_e.charCodeAt(tt+3),tt+=4;else for(let ut=0;ut<16;ut++)nt[ut]=_e[tt]<<24|_e[tt+1]<<16|_e[tt+2]<<8|_e[tt+3],tt+=4;for(let ut=16;ut<80;ut++){const dt=nt[ut-3]^nt[ut-8]^nt[ut-14]^nt[ut-16];nt[ut]=(dt<<1|dt>>>31)&4294967295}let rt=this.chain_[0],it=this.chain_[1],ot=this.chain_[2],st=this.chain_[3],at=this.chain_[4],lt,ct;for(let ut=0;ut<80;ut++){ut<40?ut<20?(lt=st^it&(ot^st),ct=1518500249):(lt=it^ot^st,ct=1859775393):ut<60?(lt=it&ot|st&(it|ot),ct=2400959708):(lt=it^ot^st,ct=3395469782);const dt=(rt<<5|rt>>>27)+lt+at+ct+nt[ut]&4294967295;at=st,st=ot,ot=(it<<30|it>>>2)&4294967295,it=rt,rt=dt}this.chain_[0]=this.chain_[0]+rt&4294967295,this.chain_[1]=this.chain_[1]+it&4294967295,this.chain_[2]=this.chain_[2]+ot&4294967295,this.chain_[3]=this.chain_[3]+st&4294967295,this.chain_[4]=this.chain_[4]+at&4294967295}update(_e,tt){if(_e==null)return;tt===void 0&&(tt=_e.length);const nt=tt-this.blockSize;let rt=0;const it=this.buf_;let ot=this.inbuf_;for(;rt<tt;){if(ot===0)for(;rt<=nt;)this.compress_(_e,rt),rt+=this.blockSize;if(typeof _e=="string"){for(;rt<tt;)if(it[ot]=_e.charCodeAt(rt),++ot,++rt,ot===this.blockSize){this.compress_(it),ot=0;break}}else for(;rt<tt;)if(it[ot]=_e[rt],++ot,++rt,ot===this.blockSize){this.compress_(it),ot=0;break}}this.inbuf_=ot,this.total_+=tt}digest(){const _e=[];let tt=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let rt=this.blockSize-1;rt>=56;rt--)this.buf_[rt]=tt&255,tt/=256;this.compress_(this.buf_);let nt=0;for(let rt=0;rt<5;rt++)for(let it=24;it>=0;it-=8)_e[nt]=this.chain_[rt]>>it&255,++nt;return _e}}function createSubscribe(et,_e){const tt=new ObserverProxy(et,_e);return tt.subscribe.bind(tt)}class ObserverProxy{constructor(_e,tt){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=tt,this.task.then(()=>{_e(this)}).catch(nt=>{this.error(nt)})}next(_e){this.forEachObserver(tt=>{tt.next(_e)})}error(_e){this.forEachObserver(tt=>{tt.error(_e)}),this.close(_e)}complete(){this.forEachObserver(_e=>{_e.complete()}),this.close()}subscribe(_e,tt,nt){let rt;if(_e===void 0&&tt===void 0&&nt===void 0)throw new Error("Missing Observer.");implementsAnyMethods(_e,["next","error","complete"])?rt=_e:rt={next:_e,error:tt,complete:nt},rt.next===void 0&&(rt.next=noop$9),rt.error===void 0&&(rt.error=noop$9),rt.complete===void 0&&(rt.complete=noop$9);const it=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?rt.error(this.finalError):rt.complete()}catch{}}),this.observers.push(rt),it}unsubscribeOne(_e){this.observers===void 0||this.observers[_e]===void 0||(delete this.observers[_e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(_e){if(!this.finalized)for(let tt=0;tt<this.observers.length;tt++)this.sendOne(tt,_e)}sendOne(_e,tt){this.task.then(()=>{if(this.observers!==void 0&&this.observers[_e]!==void 0)try{tt(this.observers[_e])}catch(nt){typeof console<"u"&&console.error&&console.error(nt)}})}close(_e){this.finalized||(this.finalized=!0,_e!==void 0&&(this.finalError=_e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(et,_e){if(typeof et!="object"||et===null)return!1;for(const tt of _e)if(tt in et&&typeof et[tt]=="function")return!0;return!1}function noop$9(){}function errorPrefix(et,_e){return`${et} failed: ${_e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray=function(et){const _e=[];let tt=0;for(let nt=0;nt<et.length;nt++){let rt=et.charCodeAt(nt);if(rt>=55296&&rt<=56319){const it=rt-55296;nt++,assert(nt<et.length,"Surrogate pair missing trail surrogate.");const ot=et.charCodeAt(nt)-56320;rt=65536+(it<<10)+ot}rt<128?_e[tt++]=rt:rt<2048?(_e[tt++]=rt>>6|192,_e[tt++]=rt&63|128):rt<65536?(_e[tt++]=rt>>12|224,_e[tt++]=rt>>6&63|128,_e[tt++]=rt&63|128):(_e[tt++]=rt>>18|240,_e[tt++]=rt>>12&63|128,_e[tt++]=rt>>6&63|128,_e[tt++]=rt&63|128)}return _e},stringLength=function(et){let _e=0;for(let tt=0;tt<et.length;tt++){const nt=et.charCodeAt(tt);nt<128?_e++:nt<2048?_e+=2:nt>=55296&&nt<=56319?(_e+=4,tt++):_e+=3}return _e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(et){return et&&et._delegate?et._delegate:et}class Component{constructor(_e,tt,nt){this.name=_e,this.instanceFactory=tt,this.type=nt,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(_e){return this.instantiationMode=_e,this}setMultipleInstances(_e){return this.multipleInstances=_e,this}setServiceProps(_e){return this.serviceProps=_e,this}setInstanceCreatedCallback(_e){return this.onInstanceCreated=_e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Provider$1=class{constructor(_e,tt){this.name=_e,this.container=tt,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(_e){const tt=this.normalizeInstanceIdentifier(_e);if(!this.instancesDeferred.has(tt)){const nt=new Deferred;if(this.instancesDeferred.set(tt,nt),this.isInitialized(tt)||this.shouldAutoInitialize())try{const rt=this.getOrInitializeService({instanceIdentifier:tt});rt&&nt.resolve(rt)}catch{}}return this.instancesDeferred.get(tt).promise}getImmediate(_e){var tt;const nt=this.normalizeInstanceIdentifier(_e==null?void 0:_e.identifier),rt=(tt=_e==null?void 0:_e.optional)!==null&&tt!==void 0?tt:!1;if(this.isInitialized(nt)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:nt})}catch(it){if(rt)return null;throw it}else{if(rt)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(_e){if(_e.name!==this.name)throw Error(`Mismatching Component ${_e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=_e,!!this.shouldAutoInitialize()){if(isComponentEager(_e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[tt,nt]of this.instancesDeferred.entries()){const rt=this.normalizeInstanceIdentifier(tt);try{const it=this.getOrInitializeService({instanceIdentifier:rt});nt.resolve(it)}catch{}}}}clearInstance(_e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(_e),this.instancesOptions.delete(_e),this.instances.delete(_e)}async delete(){const _e=Array.from(this.instances.values());await Promise.all([..._e.filter(tt=>"INTERNAL"in tt).map(tt=>tt.INTERNAL.delete()),..._e.filter(tt=>"_delete"in tt).map(tt=>tt._delete())])}isComponentSet(){return this.component!=null}isInitialized(_e=DEFAULT_ENTRY_NAME$1){return this.instances.has(_e)}getOptions(_e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(_e)||{}}initialize(_e={}){const{options:tt={}}=_e,nt=this.normalizeInstanceIdentifier(_e.instanceIdentifier);if(this.isInitialized(nt))throw Error(`${this.name}(${nt}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const rt=this.getOrInitializeService({instanceIdentifier:nt,options:tt});for(const[it,ot]of this.instancesDeferred.entries()){const st=this.normalizeInstanceIdentifier(it);nt===st&&ot.resolve(rt)}return rt}onInit(_e,tt){var nt;const rt=this.normalizeInstanceIdentifier(tt),it=(nt=this.onInitCallbacks.get(rt))!==null&&nt!==void 0?nt:new Set;it.add(_e),this.onInitCallbacks.set(rt,it);const ot=this.instances.get(rt);return ot&&_e(ot,rt),()=>{it.delete(_e)}}invokeOnInitCallbacks(_e,tt){const nt=this.onInitCallbacks.get(tt);if(nt)for(const rt of nt)try{rt(_e,tt)}catch{}}getOrInitializeService({instanceIdentifier:_e,options:tt={}}){let nt=this.instances.get(_e);if(!nt&&this.component&&(nt=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(_e),options:tt}),this.instances.set(_e,nt),this.instancesOptions.set(_e,tt),this.invokeOnInitCallbacks(nt,_e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,_e,nt)}catch{}return nt||null}normalizeInstanceIdentifier(_e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?_e:DEFAULT_ENTRY_NAME$1:_e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function normalizeIdentifierForFactory(et){return et===DEFAULT_ENTRY_NAME$1?void 0:et}function isComponentEager(et){return et.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(_e){this.name=_e,this.providers=new Map}addComponent(_e){const tt=this.getProvider(_e.name);if(tt.isComponentSet())throw new Error(`Component ${_e.name} has already been registered with ${this.name}`);tt.setComponent(_e)}addOrOverwriteComponent(_e){this.getProvider(_e.name).isComponentSet()&&this.providers.delete(_e.name),this.addComponent(_e)}getProvider(_e){if(this.providers.has(_e))return this.providers.get(_e);const tt=new Provider$1(_e,this);return this.providers.set(_e,tt),tt}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(et){et[et.DEBUG=0]="DEBUG",et[et.VERBOSE=1]="VERBOSE",et[et.INFO=2]="INFO",et[et.WARN=3]="WARN",et[et.ERROR=4]="ERROR",et[et.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(et,_e,...tt)=>{if(_e<et.logLevel)return;const nt=new Date().toISOString(),rt=ConsoleMethod[_e];if(rt)console[rt](`[${nt}]  ${et.name}:`,...tt);else throw new Error(`Attempted to log a message with an invalid logType (value: ${_e})`)};class Logger{constructor(_e){this.name=_e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(_e){if(!(_e in LogLevel))throw new TypeError(`Invalid value "${_e}" assigned to \`logLevel\``);this._logLevel=_e}setLogLevel(_e){this._logLevel=typeof _e=="string"?levelStringToEnum[_e]:_e}get logHandler(){return this._logHandler}set logHandler(_e){if(typeof _e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=_e}get userLogHandler(){return this._userLogHandler}set userLogHandler(_e){this._userLogHandler=_e}debug(..._e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,..._e),this._logHandler(this,LogLevel.DEBUG,..._e)}log(..._e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,..._e),this._logHandler(this,LogLevel.VERBOSE,..._e)}info(..._e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,..._e),this._logHandler(this,LogLevel.INFO,..._e)}warn(..._e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,..._e),this._logHandler(this,LogLevel.WARN,..._e)}error(..._e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,..._e),this._logHandler(this,LogLevel.ERROR,..._e)}}const instanceOfAny=(et,_e)=>_e.some(tt=>et instanceof tt);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(et){const _e=new Promise((tt,nt)=>{const rt=()=>{et.removeEventListener("success",it),et.removeEventListener("error",ot)},it=()=>{tt(wrap(et.result)),rt()},ot=()=>{nt(et.error),rt()};et.addEventListener("success",it),et.addEventListener("error",ot)});return _e.then(tt=>{tt instanceof IDBCursor&&cursorRequestMap.set(tt,et)}).catch(()=>{}),reverseTransformCache.set(_e,et),_e}function cacheDonePromiseForTransaction(et){if(transactionDoneMap.has(et))return;const _e=new Promise((tt,nt)=>{const rt=()=>{et.removeEventListener("complete",it),et.removeEventListener("error",ot),et.removeEventListener("abort",ot)},it=()=>{tt(),rt()},ot=()=>{nt(et.error||new DOMException("AbortError","AbortError")),rt()};et.addEventListener("complete",it),et.addEventListener("error",ot),et.addEventListener("abort",ot)});transactionDoneMap.set(et,_e)}let idbProxyTraps={get(et,_e,tt){if(et instanceof IDBTransaction){if(_e==="done")return transactionDoneMap.get(et);if(_e==="objectStoreNames")return et.objectStoreNames||transactionStoreNamesMap.get(et);if(_e==="store")return tt.objectStoreNames[1]?void 0:tt.objectStore(tt.objectStoreNames[0])}return wrap(et[_e])},set(et,_e,tt){return et[_e]=tt,!0},has(et,_e){return et instanceof IDBTransaction&&(_e==="done"||_e==="store")?!0:_e in et}};function replaceTraps(et){idbProxyTraps=et(idbProxyTraps)}function wrapFunction(et){return et===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(_e,...tt){const nt=et.call(unwrap(this),_e,...tt);return transactionStoreNamesMap.set(nt,_e.sort?_e.sort():[_e]),wrap(nt)}:getCursorAdvanceMethods().includes(et)?function(..._e){return et.apply(unwrap(this),_e),wrap(cursorRequestMap.get(this))}:function(..._e){return wrap(et.apply(unwrap(this),_e))}}function transformCachableValue(et){return typeof et=="function"?wrapFunction(et):(et instanceof IDBTransaction&&cacheDonePromiseForTransaction(et),instanceOfAny(et,getIdbProxyableTypes())?new Proxy(et,idbProxyTraps):et)}function wrap(et){if(et instanceof IDBRequest)return promisifyRequest(et);if(transformCache.has(et))return transformCache.get(et);const _e=transformCachableValue(et);return _e!==et&&(transformCache.set(et,_e),reverseTransformCache.set(_e,et)),_e}const unwrap=et=>reverseTransformCache.get(et);function openDB(et,_e,{blocked:tt,upgrade:nt,blocking:rt,terminated:it}={}){const ot=indexedDB.open(et,_e),st=wrap(ot);return nt&&ot.addEventListener("upgradeneeded",at=>{nt(wrap(ot.result),at.oldVersion,at.newVersion,wrap(ot.transaction),at)}),tt&&ot.addEventListener("blocked",at=>tt(at.oldVersion,at.newVersion,at)),st.then(at=>{it&&at.addEventListener("close",()=>it()),rt&&at.addEventListener("versionchange",lt=>rt(lt.oldVersion,lt.newVersion,lt))}).catch(()=>{}),st}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(et,_e){if(!(et instanceof IDBDatabase&&!(_e in et)&&typeof _e=="string"))return;if(cachedMethods.get(_e))return cachedMethods.get(_e);const tt=_e.replace(/FromIndex$/,""),nt=_e!==tt,rt=writeMethods.includes(tt);if(!(tt in(nt?IDBIndex:IDBObjectStore).prototype)||!(rt||readMethods.includes(tt)))return;const it=async function(ot,...st){const at=this.transaction(ot,rt?"readwrite":"readonly");let lt=at.store;return nt&&(lt=lt.index(st.shift())),(await Promise.all([lt[tt](...st),rt&&at.done]))[0]};return cachedMethods.set(_e,it),it}replaceTraps(et=>({...et,get:(_e,tt,nt)=>getMethod(_e,tt)||et.get(_e,tt,nt),has:(_e,tt)=>!!getMethod(_e,tt)||et.has(_e,tt)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(_e){this.container=_e}getPlatformInfoString(){return this.container.getProviders().map(tt=>{if(isVersionServiceProvider(tt)){const nt=tt.getImmediate();return`${nt.library}/${nt.version}`}else return null}).filter(tt=>tt).join(" ")}}function isVersionServiceProvider(et){const _e=et.getComponent();return(_e==null?void 0:_e.type)==="VERSION"}const name$o="@firebase/app",version$1$1="0.9.15";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger$1=new Logger("@firebase/app"),name$n="@firebase/app-compat",name$m="@firebase/analytics-compat",name$l="@firebase/analytics",name$k="@firebase/app-check-compat",name$j="@firebase/app-check",name$i="@firebase/auth",name$h="@firebase/auth-compat",name$g="@firebase/database",name$f="@firebase/database-compat",name$e="@firebase/functions",name$d="@firebase/functions-compat",name$c="@firebase/installations",name$b="@firebase/installations-compat",name$a="@firebase/messaging",name$9="@firebase/messaging-compat",name$8="@firebase/performance",name$7="@firebase/performance-compat",name$6="@firebase/remote-config",name$5="@firebase/remote-config-compat",name$4="@firebase/storage",name$3="@firebase/storage-compat",name$2$1="@firebase/firestore",name$1$1="@firebase/firestore-compat",name$p="firebase",version$3="10.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$o]:"fire-core",[name$n]:"fire-core-compat",[name$l]:"fire-analytics",[name$m]:"fire-analytics-compat",[name$j]:"fire-app-check",[name$k]:"fire-app-check-compat",[name$i]:"fire-auth",[name$h]:"fire-auth-compat",[name$g]:"fire-rtdb",[name$f]:"fire-rtdb-compat",[name$e]:"fire-fn",[name$d]:"fire-fn-compat",[name$c]:"fire-iid",[name$b]:"fire-iid-compat",[name$a]:"fire-fcm",[name$9]:"fire-fcm-compat",[name$8]:"fire-perf",[name$7]:"fire-perf-compat",[name$6]:"fire-rc",[name$5]:"fire-rc-compat",[name$4]:"fire-gcs",[name$3]:"fire-gcs-compat",[name$2$1]:"fire-fst",[name$1$1]:"fire-fst-compat","fire-js":"fire-js",[name$p]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_components=new Map;function _addComponent(et,_e){try{et.container.addComponent(_e)}catch(tt){logger$1.debug(`Component ${_e.name} failed to register with FirebaseApp ${et.name}`,tt)}}function _registerComponent(et){const _e=et.name;if(_components.has(_e))return logger$1.debug(`There were multiple attempts to register component ${_e}.`),!1;_components.set(_e,et);for(const tt of _apps.values())_addComponent(tt,et);return!0}function _getProvider(et,_e){const tt=et.container.getProvider("heartbeat").getImmediate({optional:!0});return tt&&tt.triggerHeartbeat(),et.container.getProvider(_e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(_e,tt,nt){this._isDeleted=!1,this._options=Object.assign({},_e),this._config=Object.assign({},tt),this._name=tt.name,this._automaticDataCollectionEnabled=tt.automaticDataCollectionEnabled,this._container=nt,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this.checkDestroyed(),this._automaticDataCollectionEnabled=_e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(_e){this._isDeleted=_e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION$1=version$3;function initializeApp(et,_e={}){let tt=et;typeof _e!="object"&&(_e={name:_e});const nt=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!1},_e),rt=nt.name;if(typeof rt!="string"||!rt)throw ERROR_FACTORY.create("bad-app-name",{appName:String(rt)});if(tt||(tt=getDefaultAppConfig()),!tt)throw ERROR_FACTORY.create("no-options");const it=_apps.get(rt);if(it){if(deepEqual(tt,it.options)&&deepEqual(nt,it.config))return it;throw ERROR_FACTORY.create("duplicate-app",{appName:rt})}const ot=new ComponentContainer(rt);for(const at of _components.values())ot.addComponent(at);const st=new FirebaseAppImpl(tt,nt,ot);return _apps.set(rt,st),st}function getApp(et=DEFAULT_ENTRY_NAME){const _e=_apps.get(et);if(!_e&&et===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!_e)throw ERROR_FACTORY.create("no-app",{appName:et});return _e}function registerVersion(et,_e,tt){var nt;let rt=(nt=PLATFORM_LOG_STRING[et])!==null&&nt!==void 0?nt:et;tt&&(rt+=`-${tt}`);const it=rt.match(/\s|\//),ot=_e.match(/\s|\//);if(it||ot){const st=[`Unable to register library "${rt}" with version "${_e}":`];it&&st.push(`library name "${rt}" contains illegal characters (whitespace or "/")`),it&&ot&&st.push("and"),ot&&st.push(`version name "${_e}" contains illegal characters (whitespace or "/")`),logger$1.warn(st.join(" "));return}_registerComponent(new Component(`${rt}-version`,()=>({library:rt,version:_e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(et,_e)=>{switch(_e){case 0:et.createObjectStore(STORE_NAME)}}}).catch(et=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:et.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(et){try{return await(await getDbPromise()).transaction(STORE_NAME).objectStore(STORE_NAME).get(computeKey(et))}catch(_e){if(_e instanceof FirebaseError)logger$1.warn(_e.message);else{const tt=ERROR_FACTORY.create("idb-get",{originalErrorMessage:_e==null?void 0:_e.message});logger$1.warn(tt.message)}}}async function writeHeartbeatsToIndexedDB(et,_e){try{const nt=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await nt.objectStore(STORE_NAME).put(_e,computeKey(et)),await nt.done}catch(tt){if(tt instanceof FirebaseError)logger$1.warn(tt.message);else{const nt=ERROR_FACTORY.create("idb-set",{originalErrorMessage:tt==null?void 0:tt.message});logger$1.warn(nt.message)}}}function computeKey(et){return`${et.name}!${et.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,STORED_HEARTBEAT_RETENTION_MAX_MILLIS=30*24*60*60*1e3;class HeartbeatServiceImpl{constructor(_e){this.container=_e,this._heartbeatsCache=null;const tt=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(tt),this._heartbeatsCachePromise=this._storage.read().then(nt=>(this._heartbeatsCache=nt,nt))}async triggerHeartbeat(){const tt=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),nt=getUTCDateString();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===nt||this._heartbeatsCache.heartbeats.some(rt=>rt.date===nt)))return this._heartbeatsCache.heartbeats.push({date:nt,agent:tt}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(rt=>{const it=new Date(rt.date).valueOf();return Date.now()-it<=STORED_HEARTBEAT_RETENTION_MAX_MILLIS}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const _e=getUTCDateString(),{heartbeatsToSend:tt,unsentEntries:nt}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),rt=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:tt}));return this._heartbeatsCache.lastSentHeartbeatDate=_e,nt.length>0?(this._heartbeatsCache.heartbeats=nt,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),rt}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(et,_e=MAX_HEADER_BYTES){const tt=[];let nt=et.slice();for(const rt of et){const it=tt.find(ot=>ot.agent===rt.agent);if(it){if(it.dates.push(rt.date),countBytes(tt)>_e){it.dates.pop();break}}else if(tt.push({agent:rt.agent,dates:[rt.date]}),countBytes(tt)>_e){tt.pop();break}nt=nt.slice(1)}return{heartbeatsToSend:tt,unsentEntries:nt}}class HeartbeatStorageImpl{constructor(_e){this.app=_e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await readHeartbeatsFromIndexedDB(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(_e){var tt;if(await this._canUseIndexedDBPromise){const rt=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(tt=_e.lastSentHeartbeatDate)!==null&&tt!==void 0?tt:rt.lastSentHeartbeatDate,heartbeats:_e.heartbeats})}else return}async add(_e){var tt;if(await this._canUseIndexedDBPromise){const rt=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(tt=_e.lastSentHeartbeatDate)!==null&&tt!==void 0?tt:rt.lastSentHeartbeatDate,heartbeats:[...rt.heartbeats,..._e.heartbeats]})}else return}}function countBytes(et){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:et})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(et){_registerComponent(new Component("platform-logger",_e=>new PlatformLoggerServiceImpl(_e),"PRIVATE")),_registerComponent(new Component("heartbeat",_e=>new HeartbeatServiceImpl(_e),"PRIVATE")),registerVersion(name$o,version$1$1,et),registerVersion(name$o,version$1$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");function __rest$1(et,_e){var tt={};for(var nt in et)Object.prototype.hasOwnProperty.call(et,nt)&&_e.indexOf(nt)<0&&(tt[nt]=et[nt]);if(et!=null&&typeof Object.getOwnPropertySymbols=="function")for(var rt=0,nt=Object.getOwnPropertySymbols(et);rt<nt.length;rt++)_e.indexOf(nt[rt])<0&&Object.prototype.propertyIsEnumerable.call(et,nt[rt])&&(tt[nt[rt]]=et[nt[rt]]);return tt}typeof SuppressedError=="function"&&SuppressedError;function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap()),AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient$1=new Logger("@firebase/auth");function _logWarn(et,..._e){logClient$1.logLevel<=LogLevel.WARN&&logClient$1.warn(`Auth (${SDK_VERSION$1}): ${et}`,..._e)}function _logError(et,..._e){logClient$1.logLevel<=LogLevel.ERROR&&logClient$1.error(`Auth (${SDK_VERSION$1}): ${et}`,..._e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(et,..._e){throw createErrorInternal(et,..._e)}function _createError(et,..._e){return createErrorInternal(et,..._e)}function _errorWithCustomMessage(et,_e,tt){const nt=Object.assign(Object.assign({},prodErrorMap()),{[_e]:tt});return new ErrorFactory("auth","Firebase",nt).create(_e,{appName:et.name})}function _assertInstanceOf(et,_e,tt){const nt=tt;if(!(_e instanceof nt))throw nt.name!==_e.constructor.name&&_fail(et,"argument-error"),_errorWithCustomMessage(et,"argument-error",`Type of ${_e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function createErrorInternal(et,..._e){if(typeof et!="string"){const tt=_e[0],nt=[..._e.slice(1)];return nt[0]&&(nt[0].appName=et.name),et._errorFactory.create(tt,...nt)}return _DEFAULT_AUTH_ERROR_FACTORY.create(et,..._e)}function _assert(et,_e,...tt){if(!et)throw createErrorInternal(_e,...tt)}function debugFail(et){const _e="INTERNAL ASSERTION FAILED: "+et;throw _logError(_e),new Error(_e)}function debugAssert(et,_e){et||debugFail(_e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){var et;return typeof self<"u"&&((et=self.location)===null||et===void 0?void 0:et.href)||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){var et;return typeof self<"u"&&((et=self.location)===null||et===void 0?void 0:et.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const et=navigator;return et.languages&&et.languages[0]||et.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(_e,tt){this.shortDelay=_e,this.longDelay=tt,debugAssert(tt>_e,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative$1()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(et,_e){debugAssert(et.emulator,"Emulator should always be set here");const{url:tt}=et.emulator;return _e?`${tt}${_e.startsWith("/")?_e.slice(1):_e}`:tt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(_e,tt,nt){this.fetchImpl=_e,tt&&(this.headersImpl=tt),nt&&(this.responseImpl=nt)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(et,_e){return et.tenantId&&!_e.tenantId?Object.assign(Object.assign({},_e),{tenantId:et.tenantId}):_e}async function _performApiRequest(et,_e,tt,nt,rt={}){return _performFetchWithErrorHandling(et,rt,async()=>{let it={},ot={};nt&&(_e==="GET"?ot=nt:it={body:JSON.stringify(nt)});const st=querystring(Object.assign({key:et.config.apiKey},ot)).slice(1),at=await et._getAdditionalHeaders();return at["Content-Type"]="application/json",et.languageCode&&(at["X-Firebase-Locale"]=et.languageCode),FetchProvider.fetch()(_getFinalTarget(et,et.config.apiHost,tt,st),Object.assign({method:_e,headers:at,referrerPolicy:"no-referrer"},it))})}async function _performFetchWithErrorHandling(et,_e,tt){et._canInitEmulator=!1;const nt=Object.assign(Object.assign({},SERVER_ERROR_MAP),_e);try{const rt=new NetworkTimeout(et),it=await Promise.race([tt(),rt.promise]);rt.clearNetworkTimeout();const ot=await it.json();if("needConfirmation"in ot)throw _makeTaggedError(et,"account-exists-with-different-credential",ot);if(it.ok&&!("errorMessage"in ot))return ot;{const st=it.ok?ot.errorMessage:ot.error.message,[at,lt]=st.split(" : ");if(at==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(et,"credential-already-in-use",ot);if(at==="EMAIL_EXISTS")throw _makeTaggedError(et,"email-already-in-use",ot);if(at==="USER_DISABLED")throw _makeTaggedError(et,"user-disabled",ot);const ct=nt[at]||at.toLowerCase().replace(/[_\s]+/g,"-");if(lt)throw _errorWithCustomMessage(et,ct,lt);_fail(et,ct)}}catch(rt){if(rt instanceof FirebaseError)throw rt;_fail(et,"network-request-failed",{message:String(rt)})}}async function _performSignInRequest(et,_e,tt,nt,rt={}){const it=await _performApiRequest(et,_e,tt,nt,rt);return"mfaPendingCredential"in it&&_fail(et,"multi-factor-auth-required",{_serverResponse:it}),it}function _getFinalTarget(et,_e,tt,nt){const rt=`${_e}${tt}?${nt}`;return et.config.emulator?_emulatorUrl(et.config,rt):`${et.config.apiScheme}://${rt}`}class NetworkTimeout{constructor(_e){this.auth=_e,this.timer=null,this.promise=new Promise((tt,nt)=>{this.timer=setTimeout(()=>nt(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _makeTaggedError(et,_e,tt){const nt={appName:et.name};tt.email&&(nt.email=tt.email),tt.phoneNumber&&(nt.phoneNumber=tt.phoneNumber);const rt=_createError(et,_e,nt);return rt.customData._tokenResponse=tt,rt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(et,_e){return _performApiRequest(et,"POST","/v1/accounts:delete",_e)}async function getAccountInfo(et,_e){return _performApiRequest(et,"POST","/v1/accounts:lookup",_e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(et){if(et)try{const _e=new Date(Number(et));if(!isNaN(_e.getTime()))return _e.toUTCString()}catch{}}async function getIdTokenResult(et,_e=!1){const tt=getModularInstance(et),nt=await tt.getIdToken(_e),rt=_parseToken(nt);_assert(rt&&rt.exp&&rt.auth_time&&rt.iat,tt.auth,"internal-error");const it=typeof rt.firebase=="object"?rt.firebase:void 0,ot=it==null?void 0:it.sign_in_provider;return{claims:rt,token:nt,authTime:utcTimestampToDateString(secondsStringToMilliseconds(rt.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(rt.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(rt.exp)),signInProvider:ot||null,signInSecondFactor:(it==null?void 0:it.sign_in_second_factor)||null}}function secondsStringToMilliseconds(et){return Number(et)*1e3}function _parseToken(et){const[_e,tt,nt]=et.split(".");if(_e===void 0||tt===void 0||nt===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const rt=base64Decode(tt);return rt?JSON.parse(rt):(_logError("Failed to decode base64 JWT payload"),null)}catch(rt){return _logError("Caught error parsing JWT payload as JSON",rt==null?void 0:rt.toString()),null}}function _tokenExpiresIn(et){const _e=_parseToken(et);return _assert(_e,"internal-error"),_assert(typeof _e.exp<"u","internal-error"),_assert(typeof _e.iat<"u","internal-error"),Number(_e.exp)-Number(_e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(et,_e,tt=!1){if(tt)return _e;try{return await _e}catch(nt){throw nt instanceof FirebaseError&&isUserInvalidated(nt)&&et.auth.currentUser===et&&await et.auth.signOut(),nt}}function isUserInvalidated({code:et}){return et==="auth/user-disabled"||et==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(_e){this.user=_e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(_e){var tt;if(_e){const nt=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),nt}else{this.errorBackoff=3e4;const rt=((tt=this.user.stsTokenManager.expirationTime)!==null&&tt!==void 0?tt:0)-Date.now()-3e5;return Math.max(0,rt)}}schedule(_e=!1){if(!this.isRunning)return;const tt=this.getInterval(_e);this.timerId=setTimeout(async()=>{await this.iteration()},tt)}async iteration(){try{await this.user.getIdToken(!0)}catch(_e){(_e==null?void 0:_e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(_e,tt){this.createdAt=_e,this.lastLoginAt=tt,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(_e){this.createdAt=_e.createdAt,this.lastLoginAt=_e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(et){var _e;const tt=et.auth,nt=await et.getIdToken(),rt=await _logoutIfInvalidated(et,getAccountInfo(tt,{idToken:nt}));_assert(rt==null?void 0:rt.users.length,tt,"internal-error");const it=rt.users[0];et._notifyReloadListener(it);const ot=!((_e=it.providerUserInfo)===null||_e===void 0)&&_e.length?extractProviderData(it.providerUserInfo):[],st=mergeProviderData(et.providerData,ot),at=et.isAnonymous,lt=!(et.email&&it.passwordHash)&&!(st!=null&&st.length),ct=at?lt:!1,ut={uid:it.localId,displayName:it.displayName||null,photoURL:it.photoUrl||null,email:it.email||null,emailVerified:it.emailVerified||!1,phoneNumber:it.phoneNumber||null,tenantId:it.tenantId||null,providerData:st,metadata:new UserMetadata(it.createdAt,it.lastLoginAt),isAnonymous:ct};Object.assign(et,ut)}async function reload(et){const _e=getModularInstance(et);await _reloadWithoutSaving(_e),await _e.auth._persistUserIfCurrent(_e),_e.auth._notifyListenersIfCurrent(_e)}function mergeProviderData(et,_e){return[...et.filter(nt=>!_e.some(rt=>rt.providerId===nt.providerId)),..._e]}function extractProviderData(et){return et.map(_e=>{var{providerId:tt}=_e,nt=__rest$1(_e,["providerId"]);return{providerId:tt,uid:nt.rawId||"",displayName:nt.displayName||null,email:nt.email||null,phoneNumber:nt.phoneNumber||null,photoURL:nt.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(et,_e){const tt=await _performFetchWithErrorHandling(et,{},async()=>{const nt=querystring({grant_type:"refresh_token",refresh_token:_e}).slice(1),{tokenApiHost:rt,apiKey:it}=et.config,ot=_getFinalTarget(et,rt,"/v1/token",`key=${it}`),st=await et._getAdditionalHeaders();return st["Content-Type"]="application/x-www-form-urlencoded",FetchProvider.fetch()(ot,{method:"POST",headers:st,body:nt})});return{accessToken:tt.access_token,expiresIn:tt.expires_in,refreshToken:tt.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(_e){_assert(_e.idToken,"internal-error"),_assert(typeof _e.idToken<"u","internal-error"),_assert(typeof _e.refreshToken<"u","internal-error");const tt="expiresIn"in _e&&typeof _e.expiresIn<"u"?Number(_e.expiresIn):_tokenExpiresIn(_e.idToken);this.updateTokensAndExpiration(_e.idToken,_e.refreshToken,tt)}async getToken(_e,tt=!1){return _assert(!this.accessToken||this.refreshToken,_e,"user-token-expired"),!tt&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(_e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(_e,tt){const{accessToken:nt,refreshToken:rt,expiresIn:it}=await requestStsToken(_e,tt);this.updateTokensAndExpiration(nt,rt,Number(it))}updateTokensAndExpiration(_e,tt,nt){this.refreshToken=tt||null,this.accessToken=_e||null,this.expirationTime=Date.now()+nt*1e3}static fromJSON(_e,tt){const{refreshToken:nt,accessToken:rt,expirationTime:it}=tt,ot=new StsTokenManager;return nt&&(_assert(typeof nt=="string","internal-error",{appName:_e}),ot.refreshToken=nt),rt&&(_assert(typeof rt=="string","internal-error",{appName:_e}),ot.accessToken=rt),it&&(_assert(typeof it=="number","internal-error",{appName:_e}),ot.expirationTime=it),ot}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(_e){this.accessToken=_e.accessToken,this.refreshToken=_e.refreshToken,this.expirationTime=_e.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(et,_e){_assert(typeof et=="string"||typeof et>"u","internal-error",{appName:_e})}class UserImpl{constructor(_e){var{uid:tt,auth:nt,stsTokenManager:rt}=_e,it=__rest$1(_e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=tt,this.auth=nt,this.stsTokenManager=rt,this.accessToken=rt.accessToken,this.displayName=it.displayName||null,this.email=it.email||null,this.emailVerified=it.emailVerified||!1,this.phoneNumber=it.phoneNumber||null,this.photoURL=it.photoURL||null,this.isAnonymous=it.isAnonymous||!1,this.tenantId=it.tenantId||null,this.providerData=it.providerData?[...it.providerData]:[],this.metadata=new UserMetadata(it.createdAt||void 0,it.lastLoginAt||void 0)}async getIdToken(_e){const tt=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,_e));return _assert(tt,this.auth,"internal-error"),this.accessToken!==tt&&(this.accessToken=tt,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),tt}getIdTokenResult(_e){return getIdTokenResult(this,_e)}reload(){return reload(this)}_assign(_e){this!==_e&&(_assert(this.uid===_e.uid,this.auth,"internal-error"),this.displayName=_e.displayName,this.photoURL=_e.photoURL,this.email=_e.email,this.emailVerified=_e.emailVerified,this.phoneNumber=_e.phoneNumber,this.isAnonymous=_e.isAnonymous,this.tenantId=_e.tenantId,this.providerData=_e.providerData.map(tt=>Object.assign({},tt)),this.metadata._copy(_e.metadata),this.stsTokenManager._assign(_e.stsTokenManager))}_clone(_e){const tt=new UserImpl(Object.assign(Object.assign({},this),{auth:_e,stsTokenManager:this.stsTokenManager._clone()}));return tt.metadata._copy(this.metadata),tt}_onReload(_e){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=_e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(_e){this.reloadListener?this.reloadListener(_e):this.reloadUserInfo=_e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(_e,tt=!1){let nt=!1;_e.idToken&&_e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(_e),nt=!0),tt&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),nt&&this.auth._notifyListenersIfCurrent(this)}async delete(){const _e=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:_e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(_e=>Object.assign({},_e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(_e,tt){var nt,rt,it,ot,st,at,lt,ct;const ut=(nt=tt.displayName)!==null&&nt!==void 0?nt:void 0,dt=(rt=tt.email)!==null&&rt!==void 0?rt:void 0,ft=(it=tt.phoneNumber)!==null&&it!==void 0?it:void 0,pt=(ot=tt.photoURL)!==null&&ot!==void 0?ot:void 0,mt=(st=tt.tenantId)!==null&&st!==void 0?st:void 0,xt=(at=tt._redirectEventId)!==null&&at!==void 0?at:void 0,gt=(lt=tt.createdAt)!==null&&lt!==void 0?lt:void 0,ht=(ct=tt.lastLoginAt)!==null&&ct!==void 0?ct:void 0,{uid:yt,emailVerified:vt,isAnonymous:_t,providerData:Et,stsTokenManager:bt}=tt;_assert(yt&&bt,_e,"internal-error");const St=StsTokenManager.fromJSON(this.name,bt);_assert(typeof yt=="string",_e,"internal-error"),assertStringOrUndefined(ut,_e.name),assertStringOrUndefined(dt,_e.name),_assert(typeof vt=="boolean",_e,"internal-error"),_assert(typeof _t=="boolean",_e,"internal-error"),assertStringOrUndefined(ft,_e.name),assertStringOrUndefined(pt,_e.name),assertStringOrUndefined(mt,_e.name),assertStringOrUndefined(xt,_e.name),assertStringOrUndefined(gt,_e.name),assertStringOrUndefined(ht,_e.name);const wt=new UserImpl({uid:yt,auth:_e,email:dt,emailVerified:vt,displayName:ut,isAnonymous:_t,photoURL:pt,phoneNumber:ft,tenantId:mt,stsTokenManager:St,createdAt:gt,lastLoginAt:ht});return Et&&Array.isArray(Et)&&(wt.providerData=Et.map(Rt=>Object.assign({},Rt))),xt&&(wt._redirectEventId=xt),wt}static async _fromIdTokenResponse(_e,tt,nt=!1){const rt=new StsTokenManager;rt.updateFromServerResponse(tt);const it=new UserImpl({uid:tt.localId,auth:_e,stsTokenManager:rt,isAnonymous:nt});return await _reloadWithoutSaving(it),it}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(et){debugAssert(et instanceof Function,"Expected a class definition");let _e=instanceCache.get(et);return _e?(debugAssert(_e instanceof et,"Instance stored in cache mismatched with class"),_e):(_e=new et,instanceCache.set(et,_e),_e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(_e,tt){this.storage[_e]=tt}async _get(_e){const tt=this.storage[_e];return tt===void 0?null:tt}async _remove(_e){delete this.storage[_e]}_addListener(_e,tt){}_removeListener(_e,tt){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(et,_e,tt){return`firebase:${et}:${_e}:${tt}`}class PersistenceUserManager{constructor(_e,tt,nt){this.persistence=_e,this.auth=tt,this.userKey=nt;const{config:rt,name:it}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,rt.apiKey,it),this.fullPersistenceKey=_persistenceKeyName("persistence",rt.apiKey,it),this.boundEventHandler=tt._onStorageEvent.bind(tt),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(_e){return this.persistence._set(this.fullUserKey,_e.toJSON())}async getCurrentUser(){const _e=await this.persistence._get(this.fullUserKey);return _e?UserImpl._fromJSON(this.auth,_e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(_e){if(this.persistence===_e)return;const tt=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=_e,tt)return this.setCurrentUser(tt)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(_e,tt,nt="authUser"){if(!tt.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),_e,nt);const rt=(await Promise.all(tt.map(async lt=>{if(await lt._isAvailable())return lt}))).filter(lt=>lt);let it=rt[0]||_getInstance(inMemoryPersistence);const ot=_persistenceKeyName(nt,_e.config.apiKey,_e.name);let st=null;for(const lt of tt)try{const ct=await lt._get(ot);if(ct){const ut=UserImpl._fromJSON(_e,ct);lt!==it&&(st=ut),it=lt;break}}catch{}const at=rt.filter(lt=>lt._shouldAllowMigration);return!it._shouldAllowMigration||!at.length?new PersistenceUserManager(it,_e,nt):(it=at[0],st&&await it._set(ot,st.toJSON()),await Promise.all(tt.map(async lt=>{if(lt!==it)try{await lt._remove(ot)}catch{}})),new PersistenceUserManager(it,_e,nt))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(et){const _e=et.toLowerCase();if(_e.includes("opera/")||_e.includes("opr/")||_e.includes("opios/"))return"Opera";if(_isIEMobile(_e))return"IEMobile";if(_e.includes("msie")||_e.includes("trident/"))return"IE";if(_e.includes("edge/"))return"Edge";if(_isFirefox(_e))return"Firefox";if(_e.includes("silk/"))return"Silk";if(_isBlackBerry(_e))return"Blackberry";if(_isWebOS(_e))return"Webos";if(_isSafari(_e))return"Safari";if((_e.includes("chrome/")||_isChromeIOS(_e))&&!_e.includes("edge/"))return"Chrome";if(_isAndroid(_e))return"Android";{const tt=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,nt=et.match(tt);if((nt==null?void 0:nt.length)===2)return nt[1]}return"Other"}function _isFirefox(et=getUA()){return/firefox\//i.test(et)}function _isSafari(et=getUA()){const _e=et.toLowerCase();return _e.includes("safari/")&&!_e.includes("chrome/")&&!_e.includes("crios/")&&!_e.includes("android")}function _isChromeIOS(et=getUA()){return/crios\//i.test(et)}function _isIEMobile(et=getUA()){return/iemobile/i.test(et)}function _isAndroid(et=getUA()){return/android/i.test(et)}function _isBlackBerry(et=getUA()){return/blackberry/i.test(et)}function _isWebOS(et=getUA()){return/webos/i.test(et)}function _isIOS(et=getUA()){return/iphone|ipad|ipod/i.test(et)||/macintosh/i.test(et)&&/mobile/i.test(et)}function _isIOSStandalone(et=getUA()){var _e;return _isIOS(et)&&!!(!((_e=window.navigator)===null||_e===void 0)&&_e.standalone)}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(et=getUA()){return _isIOS(et)||_isAndroid(et)||_isWebOS(et)||_isBlackBerry(et)||/windows phone/i.test(et)||_isIEMobile(et)}function _isIframe(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(et,_e=[]){let tt;switch(et){case"Browser":tt=_getBrowserName(getUA());break;case"Worker":tt=`${_getBrowserName(getUA())}-${et}`;break;default:tt=et}const nt=_e.length?_e.join(","):"FirebaseCore-web";return`${tt}/JsCore/${SDK_VERSION$1}/${nt}`}async function getRecaptchaConfig(et,_e){return _performApiRequest(et,"GET","/v2/recaptchaConfig",_addTidIfNecessary(et,_e))}function isEnterprise(et){return et!==void 0&&et.enterprise!==void 0}class RecaptchaConfig{constructor(_e){if(this.siteKey="",this.emailPasswordEnabled=!1,_e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=_e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=_e.recaptchaEnforcementState.some(tt=>tt.provider==="EMAIL_PASSWORD_PROVIDER"&&tt.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getScriptParentElement(){var et,_e;return(_e=(et=document.getElementsByTagName("head"))===null||et===void 0?void 0:et[0])!==null&&_e!==void 0?_e:document}function _loadJS(et){return new Promise((_e,tt)=>{const nt=document.createElement("script");nt.setAttribute("src",et),nt.onload=_e,nt.onerror=rt=>{const it=_createError("internal-error");it.customData=rt,tt(it)},nt.type="text/javascript",nt.charset="UTF-8",getScriptParentElement().appendChild(nt)})}function _generateCallbackName(et){return`__${et}${Math.floor(Math.random()*1e6)}`}const RECAPTCHA_ENTERPRISE_URL="https://www.google.com/recaptcha/enterprise.js?render=",RECAPTCHA_ENTERPRISE_VERIFIER_TYPE="recaptcha-enterprise",FAKE_TOKEN="NO_RECAPTCHA";class RecaptchaEnterpriseVerifier{constructor(_e){this.type=RECAPTCHA_ENTERPRISE_VERIFIER_TYPE,this.auth=_castAuth(_e)}async verify(_e="verify",tt=!1){async function nt(it){if(!tt){if(it.tenantId==null&&it._agentRecaptchaConfig!=null)return it._agentRecaptchaConfig.siteKey;if(it.tenantId!=null&&it._tenantRecaptchaConfigs[it.tenantId]!==void 0)return it._tenantRecaptchaConfigs[it.tenantId].siteKey}return new Promise(async(ot,st)=>{getRecaptchaConfig(it,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(at=>{if(at.recaptchaKey===void 0)st(new Error("recaptcha Enterprise site key undefined"));else{const lt=new RecaptchaConfig(at);return it.tenantId==null?it._agentRecaptchaConfig=lt:it._tenantRecaptchaConfigs[it.tenantId]=lt,ot(lt.siteKey)}}).catch(at=>{st(at)})})}function rt(it,ot,st){const at=window.grecaptcha;isEnterprise(at)?at.enterprise.ready(()=>{at.enterprise.execute(it,{action:_e}).then(lt=>{ot(lt)}).catch(()=>{ot(FAKE_TOKEN)})}):st(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((it,ot)=>{nt(this.auth).then(st=>{if(!tt&&isEnterprise(window.grecaptcha))rt(st,it,ot);else{if(typeof window>"u"){ot(new Error("RecaptchaVerifier is only supported in browser"));return}_loadJS(RECAPTCHA_ENTERPRISE_URL+st).then(()=>{rt(st,it,ot)}).catch(at=>{ot(at)})}}).catch(st=>{ot(st)})})}}async function injectRecaptchaFields(et,_e,tt,nt=!1){const rt=new RecaptchaEnterpriseVerifier(et);let it;try{it=await rt.verify(tt)}catch{it=await rt.verify(tt,!0)}const ot=Object.assign({},_e);return nt?Object.assign(ot,{captchaResp:it}):Object.assign(ot,{captchaResponse:it}),Object.assign(ot,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ot,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ot}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(_e){this.auth=_e,this.queue=[]}pushCallback(_e,tt){const nt=it=>new Promise((ot,st)=>{try{const at=_e(it);ot(at)}catch(at){st(at)}});nt.onAbort=tt,this.queue.push(nt);const rt=this.queue.length-1;return()=>{this.queue[rt]=()=>Promise.resolve()}}async runMiddleware(_e){if(this.auth.currentUser===_e)return;const tt=[];try{for(const nt of this.queue)await nt(_e),nt.onAbort&&tt.push(nt.onAbort)}catch(nt){tt.reverse();for(const rt of tt)try{rt()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:nt==null?void 0:nt.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(_e,tt,nt,rt){this.app=_e,this.heartbeatServiceProvider=tt,this.appCheckServiceProvider=nt,this.config=rt,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=_e.name,this.clientVersion=rt.sdkClientVersion}_initializeWithPersistence(_e,tt){return tt&&(this._popupRedirectResolver=_getInstance(tt)),this._initializationPromise=this.queue(async()=>{var nt,rt;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,_e),!this._deleted)){if(!((nt=this._popupRedirectResolver)===null||nt===void 0)&&nt._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(tt),this.lastNotifiedUid=((rt=this.currentUser)===null||rt===void 0?void 0:rt.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const _e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!_e)){if(this.currentUser&&_e&&this.currentUser.uid===_e.uid){this._currentUser._assign(_e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(_e,!0)}}async initializeCurrentUser(_e){var tt;const nt=await this.assertedPersistence.getCurrentUser();let rt=nt,it=!1;if(_e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const ot=(tt=this.redirectUser)===null||tt===void 0?void 0:tt._redirectEventId,st=rt==null?void 0:rt._redirectEventId,at=await this.tryRedirectSignIn(_e);(!ot||ot===st)&&(at!=null&&at.user)&&(rt=at.user,it=!0)}if(!rt)return this.directlySetCurrentUser(null);if(!rt._redirectEventId){if(it)try{await this.beforeStateQueue.runMiddleware(rt)}catch(ot){rt=nt,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(ot))}return rt?this.reloadAndSetCurrentUserOrClear(rt):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===rt._redirectEventId?this.directlySetCurrentUser(rt):this.reloadAndSetCurrentUserOrClear(rt)}async tryRedirectSignIn(_e){let tt=null;try{tt=await this._popupRedirectResolver._completeRedirectFn(this,_e,!0)}catch{await this._setRedirectUser(null)}return tt}async reloadAndSetCurrentUserOrClear(_e){try{await _reloadWithoutSaving(_e)}catch(tt){if((tt==null?void 0:tt.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(_e)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(_e){const tt=_e?getModularInstance(_e):null;return tt&&_assert(tt.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(tt&&tt._clone(this))}async _updateCurrentUser(_e,tt=!1){if(!this._deleted)return _e&&_assert(this.tenantId===_e.tenantId,this,"tenant-id-mismatch"),tt||await this.beforeStateQueue.runMiddleware(_e),this.queue(async()=>{await this.directlySetCurrentUser(_e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(_e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(_e))})}async initializeRecaptchaConfig(){const _e=await getRecaptchaConfig(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),tt=new RecaptchaConfig(_e);this.tenantId==null?this._agentRecaptchaConfig=tt:this._tenantRecaptchaConfigs[this.tenantId]=tt,tt.emailPasswordEnabled&&new RecaptchaEnterpriseVerifier(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(_e){this._errorFactory=new ErrorFactory("auth","Firebase",_e())}onAuthStateChanged(_e,tt,nt){return this.registerStateListener(this.authStateSubscription,_e,tt,nt)}beforeAuthStateChanged(_e,tt){return this.beforeStateQueue.pushCallback(_e,tt)}onIdTokenChanged(_e,tt,nt){return this.registerStateListener(this.idTokenSubscription,_e,tt,nt)}authStateReady(){return new Promise((_e,tt)=>{if(this.currentUser)_e();else{const nt=this.onAuthStateChanged(()=>{nt(),_e()},tt)}})}toJSON(){var _e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(_e=this._currentUser)===null||_e===void 0?void 0:_e.toJSON()}}async _setRedirectUser(_e,tt){const nt=await this.getOrInitRedirectPersistenceManager(tt);return _e===null?nt.removeCurrentUser():nt.setCurrentUser(_e)}async getOrInitRedirectPersistenceManager(_e){if(!this.redirectPersistenceManager){const tt=_e&&_getInstance(_e)||this._popupRedirectResolver;_assert(tt,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(tt._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(_e){var tt,nt;return this._isInitialized&&await this.queue(async()=>{}),((tt=this._currentUser)===null||tt===void 0?void 0:tt._redirectEventId)===_e?this._currentUser:((nt=this.redirectUser)===null||nt===void 0?void 0:nt._redirectEventId)===_e?this.redirectUser:null}async _persistUserIfCurrent(_e){if(_e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(_e))}_notifyListenersIfCurrent(_e){_e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var _e,tt;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const nt=(tt=(_e=this.currentUser)===null||_e===void 0?void 0:_e.uid)!==null&&tt!==void 0?tt:null;this.lastNotifiedUid!==nt&&(this.lastNotifiedUid=nt,this.authStateSubscription.next(this.currentUser))}registerStateListener(_e,tt,nt,rt){if(this._deleted)return()=>{};const it=typeof tt=="function"?tt:tt.next.bind(tt),ot=this._isInitialized?Promise.resolve():this._initializationPromise;return _assert(ot,this,"internal-error"),ot.then(()=>it(this.currentUser)),typeof tt=="function"?_e.addObserver(tt,nt,rt):_e.addObserver(tt)}async directlySetCurrentUser(_e){this.currentUser&&this.currentUser!==_e&&this._currentUser._stopProactiveRefresh(),_e&&this.isProactiveRefreshEnabled&&_e._startProactiveRefresh(),this.currentUser=_e,_e?await this.assertedPersistence.setCurrentUser(_e):await this.assertedPersistence.removeCurrentUser()}queue(_e){return this.operations=this.operations.then(_e,_e),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(_e){!_e||this.frameworks.includes(_e)||(this.frameworks.push(_e),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var _e;const tt={"X-Client-Version":this.clientVersion};this.app.options.appId&&(tt["X-Firebase-gmpid"]=this.app.options.appId);const nt=await((_e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||_e===void 0?void 0:_e.getHeartbeatsHeader());nt&&(tt["X-Firebase-Client"]=nt);const rt=await this._getAppCheckToken();return rt&&(tt["X-Firebase-AppCheck"]=rt),tt}async _getAppCheckToken(){var _e;const tt=await((_e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||_e===void 0?void 0:_e.getToken());return tt!=null&&tt.error&&_logWarn(`Error while retrieving App Check token: ${tt.error}`),tt==null?void 0:tt.token}}function _castAuth(et){return getModularInstance(et)}class Subscription{constructor(_e){this.auth=_e,this.observer=null,this.addObserver=createSubscribe(tt=>this.observer=tt)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(et,_e){const tt=_getProvider(et,"auth");if(tt.isInitialized()){const rt=tt.getImmediate(),it=tt.getOptions();if(deepEqual(it,_e??{}))return rt;_fail(rt,"already-initialized")}return tt.initialize({options:_e})}function _initializeAuthInstance(et,_e){const tt=(_e==null?void 0:_e.persistence)||[],nt=(Array.isArray(tt)?tt:[tt]).map(_getInstance);_e!=null&&_e.errorMap&&et._updateErrorMap(_e.errorMap),et._initializeWithPersistence(nt,_e==null?void 0:_e.popupRedirectResolver)}function connectAuthEmulator(et,_e,tt){const nt=_castAuth(et);_assert(nt._canInitEmulator,nt,"emulator-config-failed"),_assert(/^https?:\/\//.test(_e),nt,"invalid-emulator-scheme");const rt=!!(tt!=null&&tt.disableWarnings),it=extractProtocol(_e),{host:ot,port:st}=extractHostAndPort(_e),at=st===null?"":`:${st}`;nt.config.emulator={url:`${it}//${ot}${at}/`},nt.settings.appVerificationDisabledForTesting=!0,nt.emulatorConfig=Object.freeze({host:ot,port:st,protocol:it.replace(":",""),options:Object.freeze({disableWarnings:rt})}),rt||emitEmulatorWarning()}function extractProtocol(et){const _e=et.indexOf(":");return _e<0?"":et.substr(0,_e+1)}function extractHostAndPort(et){const _e=extractProtocol(et),tt=/(\/\/)?([^?#/]+)/.exec(et.substr(_e.length));if(!tt)return{host:"",port:null};const nt=tt[2].split("@").pop()||"",rt=/^(\[[^\]]+\])(:|$)/.exec(nt);if(rt){const it=rt[1];return{host:it,port:parsePort(nt.substr(it.length+1))}}else{const[it,ot]=nt.split(":");return{host:it,port:parsePort(ot)}}}function parsePort(et){if(!et)return null;const _e=Number(et);return isNaN(_e)?null:_e}function emitEmulatorWarning(){function et(){const _e=document.createElement("p"),tt=_e.style;_e.innerText="Running in emulator mode. Do not use with production credentials.",tt.position="fixed",tt.width="100%",tt.backgroundColor="#ffffff",tt.border=".1em solid #000000",tt.color="#b50000",tt.bottom="0px",tt.left="0px",tt.margin="0px",tt.zIndex="10000",tt.textAlign="center",_e.classList.add("firebase-emulator-warning"),document.body.appendChild(_e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",et):et())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(_e,tt){this.providerId=_e,this.signInMethod=tt}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(_e){return debugFail("not implemented")}_linkToIdToken(_e,tt){return debugFail("not implemented")}_getReauthenticationResolver(_e){return debugFail("not implemented")}}async function updateEmailPassword(et,_e){return _performApiRequest(et,"POST","/v1/accounts:update",_e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithPassword(et,_e){return _performSignInRequest(et,"POST","/v1/accounts:signInWithPassword",_addTidIfNecessary(et,_e))}async function sendOobCode(et,_e){return _performApiRequest(et,"POST","/v1/accounts:sendOobCode",_addTidIfNecessary(et,_e))}async function sendPasswordResetEmail$1(et,_e){return sendOobCode(et,_e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithEmailLink$1(et,_e){return _performSignInRequest(et,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(et,_e))}async function signInWithEmailLinkForLinking(et,_e){return _performSignInRequest(et,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(et,_e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthCredential extends AuthCredential{constructor(_e,tt,nt,rt=null){super("password",nt),this._email=_e,this._password=tt,this._tenantId=rt}static _fromEmailAndPassword(_e,tt){return new EmailAuthCredential(_e,tt,"password")}static _fromEmailAndCode(_e,tt,nt=null){return new EmailAuthCredential(_e,tt,"emailLink",nt)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(_e){const tt=typeof _e=="string"?JSON.parse(_e):_e;if(tt!=null&&tt.email&&(tt!=null&&tt.password)){if(tt.signInMethod==="password")return this._fromEmailAndPassword(tt.email,tt.password);if(tt.signInMethod==="emailLink")return this._fromEmailAndCode(tt.email,tt.password,tt.tenantId)}return null}async _getIdTokenResponse(_e){var tt;switch(this.signInMethod){case"password":const nt={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((tt=_e._getRecaptchaConfig())===null||tt===void 0)&&tt.emailPasswordEnabled){const rt=await injectRecaptchaFields(_e,nt,"signInWithPassword");return signInWithPassword(_e,rt)}else return signInWithPassword(_e,nt).catch(async rt=>{if(rt.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const it=await injectRecaptchaFields(_e,nt,"signInWithPassword");return signInWithPassword(_e,it)}else return Promise.reject(rt)});case"emailLink":return signInWithEmailLink$1(_e,{email:this._email,oobCode:this._password});default:_fail(_e,"internal-error")}}async _linkToIdToken(_e,tt){switch(this.signInMethod){case"password":return updateEmailPassword(_e,{idToken:tt,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return signInWithEmailLinkForLinking(_e,{idToken:tt,email:this._email,oobCode:this._password});default:_fail(_e,"internal-error")}}_getReauthenticationResolver(_e){return this._getIdTokenResponse(_e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(et,_e){return _performSignInRequest(et,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(et,_e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(_e){const tt=new OAuthCredential(_e.providerId,_e.signInMethod);return _e.idToken||_e.accessToken?(_e.idToken&&(tt.idToken=_e.idToken),_e.accessToken&&(tt.accessToken=_e.accessToken),_e.nonce&&!_e.pendingToken&&(tt.nonce=_e.nonce),_e.pendingToken&&(tt.pendingToken=_e.pendingToken)):_e.oauthToken&&_e.oauthTokenSecret?(tt.accessToken=_e.oauthToken,tt.secret=_e.oauthTokenSecret):_fail("argument-error"),tt}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(_e){const tt=typeof _e=="string"?JSON.parse(_e):_e,{providerId:nt,signInMethod:rt}=tt,it=__rest$1(tt,["providerId","signInMethod"]);if(!nt||!rt)return null;const ot=new OAuthCredential(nt,rt);return ot.idToken=it.idToken||void 0,ot.accessToken=it.accessToken||void 0,ot.secret=it.secret,ot.nonce=it.nonce,ot.pendingToken=it.pendingToken||null,ot}_getIdTokenResponse(_e){const tt=this.buildRequest();return signInWithIdp(_e,tt)}_linkToIdToken(_e,tt){const nt=this.buildRequest();return nt.idToken=tt,signInWithIdp(_e,nt)}_getReauthenticationResolver(_e){const tt=this.buildRequest();return tt.autoCreate=!1,signInWithIdp(_e,tt)}buildRequest(){const _e={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)_e.pendingToken=this.pendingToken;else{const tt={};this.idToken&&(tt.id_token=this.idToken),this.accessToken&&(tt.access_token=this.accessToken),this.secret&&(tt.oauth_token_secret=this.secret),tt.providerId=this.providerId,this.nonce&&!this.pendingToken&&(tt.nonce=this.nonce),_e.postBody=querystring(tt)}return _e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parseMode(et){switch(et){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function parseDeepLink(et){const _e=querystringDecode(extractQuerystring(et)).link,tt=_e?querystringDecode(extractQuerystring(_e)).deep_link_id:null,nt=querystringDecode(extractQuerystring(et)).deep_link_id;return(nt?querystringDecode(extractQuerystring(nt)).link:null)||nt||tt||_e||et}class ActionCodeURL{constructor(_e){var tt,nt,rt,it,ot,st;const at=querystringDecode(extractQuerystring(_e)),lt=(tt=at.apiKey)!==null&&tt!==void 0?tt:null,ct=(nt=at.oobCode)!==null&&nt!==void 0?nt:null,ut=parseMode((rt=at.mode)!==null&&rt!==void 0?rt:null);_assert(lt&&ct&&ut,"argument-error"),this.apiKey=lt,this.operation=ut,this.code=ct,this.continueUrl=(it=at.continueUrl)!==null&&it!==void 0?it:null,this.languageCode=(ot=at.languageCode)!==null&&ot!==void 0?ot:null,this.tenantId=(st=at.tenantId)!==null&&st!==void 0?st:null}static parseLink(_e){const tt=parseDeepLink(_e);try{return new ActionCodeURL(tt)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthProvider{constructor(){this.providerId=EmailAuthProvider.PROVIDER_ID}static credential(_e,tt){return EmailAuthCredential._fromEmailAndPassword(_e,tt)}static credentialWithLink(_e,tt){const nt=ActionCodeURL.parseLink(tt);return _assert(nt,"argument-error"),EmailAuthCredential._fromEmailAndCode(_e,nt.code,nt.tenantId)}}EmailAuthProvider.PROVIDER_ID="password";EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD="password";EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(_e){this.providerId=_e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(_e){this.defaultLanguageCode=_e}setCustomParameters(_e){return this.customParameters=_e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(_e){return this.scopes.includes(_e)||this.scopes.push(_e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(_e){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:_e})}static credentialFromResult(_e){return FacebookAuthProvider.credentialFromTaggedObject(_e)}static credentialFromError(_e){return FacebookAuthProvider.credentialFromTaggedObject(_e.customData||{})}static credentialFromTaggedObject({_tokenResponse:_e}){if(!_e||!("oauthAccessToken"in _e)||!_e.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(_e.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(_e,tt){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:_e,accessToken:tt})}static credentialFromResult(_e){return GoogleAuthProvider.credentialFromTaggedObject(_e)}static credentialFromError(_e){return GoogleAuthProvider.credentialFromTaggedObject(_e.customData||{})}static credentialFromTaggedObject({_tokenResponse:_e}){if(!_e)return null;const{oauthIdToken:tt,oauthAccessToken:nt}=_e;if(!tt&&!nt)return null;try{return GoogleAuthProvider.credential(tt,nt)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(_e){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:_e})}static credentialFromResult(_e){return GithubAuthProvider.credentialFromTaggedObject(_e)}static credentialFromError(_e){return GithubAuthProvider.credentialFromTaggedObject(_e.customData||{})}static credentialFromTaggedObject({_tokenResponse:_e}){if(!_e||!("oauthAccessToken"in _e)||!_e.oauthAccessToken)return null;try{return GithubAuthProvider.credential(_e.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(_e,tt){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:_e,oauthTokenSecret:tt})}static credentialFromResult(_e){return TwitterAuthProvider.credentialFromTaggedObject(_e)}static credentialFromError(_e){return TwitterAuthProvider.credentialFromTaggedObject(_e.customData||{})}static credentialFromTaggedObject({_tokenResponse:_e}){if(!_e)return null;const{oauthAccessToken:tt,oauthTokenSecret:nt}=_e;if(!tt||!nt)return null;try{return TwitterAuthProvider.credential(tt,nt)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signUp(et,_e){return _performSignInRequest(et,"POST","/v1/accounts:signUp",_addTidIfNecessary(et,_e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(_e){this.user=_e.user,this.providerId=_e.providerId,this._tokenResponse=_e._tokenResponse,this.operationType=_e.operationType}static async _fromIdTokenResponse(_e,tt,nt,rt=!1){const it=await UserImpl._fromIdTokenResponse(_e,nt,rt),ot=providerIdForResponse(nt);return new UserCredentialImpl({user:it,providerId:ot,_tokenResponse:nt,operationType:tt})}static async _forOperation(_e,tt,nt){await _e._updateTokensIfNecessary(nt,!0);const rt=providerIdForResponse(nt);return new UserCredentialImpl({user:_e,providerId:rt,_tokenResponse:nt,operationType:tt})}}function providerIdForResponse(et){return et.providerId?et.providerId:"phoneNumber"in et?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(_e,tt,nt,rt){var it;super(tt.code,tt.message),this.operationType=nt,this.user=rt,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:_e.name,tenantId:(it=_e.tenantId)!==null&&it!==void 0?it:void 0,_serverResponse:tt.customData._serverResponse,operationType:nt}}static _fromErrorAndOperation(_e,tt,nt,rt){return new MultiFactorError(_e,tt,nt,rt)}}function _processCredentialSavingMfaContextIfNecessary(et,_e,tt,nt){return(_e==="reauthenticate"?tt._getReauthenticationResolver(et):tt._getIdTokenResponse(et)).catch(it=>{throw it.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(et,it,_e,nt):it})}async function _link$1(et,_e,tt=!1){const nt=await _logoutIfInvalidated(et,_e._linkToIdToken(et.auth,await et.getIdToken()),tt);return UserCredentialImpl._forOperation(et,"link",nt)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(et,_e,tt=!1){const{auth:nt}=et,rt="reauthenticate";try{const it=await _logoutIfInvalidated(et,_processCredentialSavingMfaContextIfNecessary(nt,rt,_e,et),tt);_assert(it.idToken,nt,"internal-error");const ot=_parseToken(it.idToken);_assert(ot,nt,"internal-error");const{sub:st}=ot;return _assert(et.uid===st,nt,"user-mismatch"),UserCredentialImpl._forOperation(et,rt,it)}catch(it){throw(it==null?void 0:it.code)==="auth/user-not-found"&&_fail(nt,"user-mismatch"),it}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(et,_e,tt=!1){const nt="signIn",rt=await _processCredentialSavingMfaContextIfNecessary(et,nt,_e),it=await UserCredentialImpl._fromIdTokenResponse(et,nt,rt);return tt||await et._updateCurrentUser(it.user),it}async function signInWithCredential(et,_e){return _signInWithCredential(_castAuth(et),_e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _setActionCodeSettingsOnRequest(et,_e,tt){var nt;_assert(((nt=tt.url)===null||nt===void 0?void 0:nt.length)>0,et,"invalid-continue-uri"),_assert(typeof tt.dynamicLinkDomain>"u"||tt.dynamicLinkDomain.length>0,et,"invalid-dynamic-link-domain"),_e.continueUrl=tt.url,_e.dynamicLinkDomain=tt.dynamicLinkDomain,_e.canHandleCodeInApp=tt.handleCodeInApp,tt.iOS&&(_assert(tt.iOS.bundleId.length>0,et,"missing-ios-bundle-id"),_e.iOSBundleId=tt.iOS.bundleId),tt.android&&(_assert(tt.android.packageName.length>0,et,"missing-android-pkg-name"),_e.androidInstallApp=tt.android.installApp,_e.androidMinimumVersionCode=tt.android.minimumVersion,_e.androidPackageName=tt.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sendPasswordResetEmail(et,_e,tt){var nt;const rt=_castAuth(et),it={requestType:"PASSWORD_RESET",email:_e,clientType:"CLIENT_TYPE_WEB"};if(!((nt=rt._getRecaptchaConfig())===null||nt===void 0)&&nt.emailPasswordEnabled){const ot=await injectRecaptchaFields(rt,it,"getOobCode",!0);tt&&_setActionCodeSettingsOnRequest(rt,ot,tt),await sendPasswordResetEmail$1(rt,ot)}else tt&&_setActionCodeSettingsOnRequest(rt,it,tt),await sendPasswordResetEmail$1(rt,it).catch(async ot=>{if(ot.code==="auth/missing-recaptcha-token"){console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const st=await injectRecaptchaFields(rt,it,"getOobCode",!0);tt&&_setActionCodeSettingsOnRequest(rt,st,tt),await sendPasswordResetEmail$1(rt,st)}else return Promise.reject(ot)})}async function createUserWithEmailAndPassword(et,_e,tt){var nt;const rt=_castAuth(et),it={returnSecureToken:!0,email:_e,password:tt,clientType:"CLIENT_TYPE_WEB"};let ot;if(!((nt=rt._getRecaptchaConfig())===null||nt===void 0)&&nt.emailPasswordEnabled){const lt=await injectRecaptchaFields(rt,it,"signUpPassword");ot=signUp(rt,lt)}else ot=signUp(rt,it).catch(async lt=>{if(lt.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const ct=await injectRecaptchaFields(rt,it,"signUpPassword");return signUp(rt,ct)}else return Promise.reject(lt)});const st=await ot.catch(lt=>Promise.reject(lt)),at=await UserCredentialImpl._fromIdTokenResponse(rt,"signIn",st);return await rt._updateCurrentUser(at.user),at}function signInWithEmailAndPassword(et,_e,tt){return signInWithCredential(getModularInstance(et),EmailAuthProvider.credential(_e,tt))}function onIdTokenChanged(et,_e,tt,nt){return getModularInstance(et).onIdTokenChanged(_e,tt,nt)}function beforeAuthStateChanged(et,_e,tt){return getModularInstance(et).beforeAuthStateChanged(_e,tt)}function signOut(et){return getModularInstance(et).signOut()}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(_e,tt){this.storageRetriever=_e,this.type=tt}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(_e,tt){return this.storage.setItem(_e,JSON.stringify(tt)),Promise.resolve()}_get(_e){const tt=this.storage.getItem(_e);return Promise.resolve(tt?JSON.parse(tt):null)}_remove(_e){return this.storage.removeItem(_e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _iframeCannotSyncWebStorage(){const et=getUA();return _isSafari(et)||_isIOS(et)}const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_e,tt)=>this.onStorageEvent(_e,tt),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=_iframeCannotSyncWebStorage()&&_isIframe(),this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(_e){for(const tt of Object.keys(this.listeners)){const nt=this.storage.getItem(tt),rt=this.localCache[tt];nt!==rt&&_e(tt,rt,nt)}}onStorageEvent(_e,tt=!1){if(!_e.key){this.forAllChangedKeys((ot,st,at)=>{this.notifyListeners(ot,at)});return}const nt=_e.key;if(tt?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ot=this.storage.getItem(nt);if(_e.newValue!==ot)_e.newValue!==null?this.storage.setItem(nt,_e.newValue):this.storage.removeItem(nt);else if(this.localCache[nt]===_e.newValue&&!tt)return}const rt=()=>{const ot=this.storage.getItem(nt);!tt&&this.localCache[nt]===ot||this.notifyListeners(nt,ot)},it=this.storage.getItem(nt);_isIE10()&&it!==_e.newValue&&_e.newValue!==_e.oldValue?setTimeout(rt,IE10_LOCAL_STORAGE_SYNC_DELAY):rt()}notifyListeners(_e,tt){this.localCache[_e]=tt;const nt=this.listeners[_e];if(nt)for(const rt of Array.from(nt))rt(tt&&JSON.parse(tt))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_e,tt,nt)=>{this.onStorageEvent(new StorageEvent("storage",{key:_e,oldValue:tt,newValue:nt}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_e,tt){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_e]||(this.listeners[_e]=new Set,this.localCache[_e]=this.storage.getItem(_e)),this.listeners[_e].add(tt)}_removeListener(_e,tt){this.listeners[_e]&&(this.listeners[_e].delete(tt),this.listeners[_e].size===0&&delete this.listeners[_e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(_e,tt){await super._set(_e,tt),this.localCache[_e]=JSON.stringify(tt)}async _get(_e){const tt=await super._get(_e);return this.localCache[_e]=JSON.stringify(tt),tt}async _remove(_e){await super._remove(_e),delete this.localCache[_e]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_e,tt){}_removeListener(_e,tt){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(et){return Promise.all(et.map(async _e=>{try{return{fulfilled:!0,value:await _e}}catch(tt){return{fulfilled:!1,reason:tt}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(_e){this.eventTarget=_e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_e){const tt=this.receivers.find(rt=>rt.isListeningto(_e));if(tt)return tt;const nt=new Receiver(_e);return this.receivers.push(nt),nt}isListeningto(_e){return this.eventTarget===_e}async handleEvent(_e){const tt=_e,{eventId:nt,eventType:rt,data:it}=tt.data,ot=this.handlersMap[rt];if(!(ot!=null&&ot.size))return;tt.ports[0].postMessage({status:"ack",eventId:nt,eventType:rt});const st=Array.from(ot).map(async lt=>lt(tt.origin,it)),at=await _allSettled(st);tt.ports[0].postMessage({status:"done",eventId:nt,eventType:rt,response:at})}_subscribe(_e,tt){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_e]||(this.handlersMap[_e]=new Set),this.handlersMap[_e].add(tt)}_unsubscribe(_e,tt){this.handlersMap[_e]&&tt&&this.handlersMap[_e].delete(tt),(!tt||this.handlersMap[_e].size===0)&&delete this.handlersMap[_e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(et="",_e=10){let tt="";for(let nt=0;nt<_e;nt++)tt+=Math.floor(Math.random()*10);return et+tt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(_e){this.target=_e,this.handlers=new Set}removeMessageHandler(_e){_e.messageChannel&&(_e.messageChannel.port1.removeEventListener("message",_e.onMessage),_e.messageChannel.port1.close()),this.handlers.delete(_e)}async _send(_e,tt,nt=50){const rt=typeof MessageChannel<"u"?new MessageChannel:null;if(!rt)throw new Error("connection_unavailable");let it,ot;return new Promise((st,at)=>{const lt=_generateEventId("",20);rt.port1.start();const ct=setTimeout(()=>{at(new Error("unsupported_event"))},nt);ot={messageChannel:rt,onMessage(ut){const dt=ut;if(dt.data.eventId===lt)switch(dt.data.status){case"ack":clearTimeout(ct),it=setTimeout(()=>{at(new Error("timeout"))},3e3);break;case"done":clearTimeout(it),st(dt.data.response);break;default:clearTimeout(ct),clearTimeout(it),at(new Error("invalid_response"));break}}},this.handlers.add(ot),rt.port1.addEventListener("message",ot.onMessage),this.target.postMessage({eventType:_e,eventId:lt,data:tt},[rt.port2])}).finally(()=>{ot&&this.removeMessageHandler(ot)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(et){_window().location.href=et}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){var et;return((et=navigator==null?void 0:navigator.serviceWorker)===null||et===void 0?void 0:et.controller)||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(_e){this.request=_e}toPromise(){return new Promise((_e,tt)=>{this.request.addEventListener("success",()=>{_e(this.request.result)}),this.request.addEventListener("error",()=>{tt(this.request.error)})})}}function getObjectStore(et,_e){return et.transaction([DB_OBJECTSTORE_NAME],_e?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const et=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(et).toPromise()}function _openDatabase(){const et=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((_e,tt)=>{et.addEventListener("error",()=>{tt(et.error)}),et.addEventListener("upgradeneeded",()=>{const nt=et.result;try{nt.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(rt){tt(rt)}}),et.addEventListener("success",async()=>{const nt=et.result;nt.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?_e(nt):(nt.close(),await _deleteDatabase(),_e(await _openDatabase()))})})}async function _putObject(et,_e,tt){const nt=getObjectStore(et,!0).put({[DB_DATA_KEYPATH]:_e,value:tt});return new DBPromise(nt).toPromise()}async function getObject(et,_e){const tt=getObjectStore(et,!1).get(_e),nt=await new DBPromise(tt).toPromise();return nt===void 0?null:nt.value}function _deleteObject(et,_e){const tt=getObjectStore(et,!0).delete(_e);return new DBPromise(tt).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(_e){let tt=0;for(;;)try{const nt=await this._openDb();return await _e(nt)}catch(nt){if(tt++>_TRANSACTION_RETRY_COUNT)throw nt;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(_e,tt)=>({keyProcessed:(await this._poll()).includes(tt.key)})),this.receiver._subscribe("ping",async(_e,tt)=>["keyChanged"])}async initializeSender(){var _e,tt;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const nt=await this.sender._send("ping",{},800);nt&&!((_e=nt[0])===null||_e===void 0)&&_e.fulfilled&&!((tt=nt[0])===null||tt===void 0)&&tt.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(_e){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:_e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const _e=await _openDatabase();return await _putObject(_e,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(_e,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(_e){this.pendingWrites++;try{await _e()}finally{this.pendingWrites--}}async _set(_e,tt){return this._withPendingWrite(async()=>(await this._withRetries(nt=>_putObject(nt,_e,tt)),this.localCache[_e]=tt,this.notifyServiceWorker(_e)))}async _get(_e){const tt=await this._withRetries(nt=>getObject(nt,_e));return this.localCache[_e]=tt,tt}async _remove(_e){return this._withPendingWrite(async()=>(await this._withRetries(tt=>_deleteObject(tt,_e)),delete this.localCache[_e],this.notifyServiceWorker(_e)))}async _poll(){const _e=await this._withRetries(rt=>{const it=getObjectStore(rt,!1).getAll();return new DBPromise(it).toPromise()});if(!_e)return[];if(this.pendingWrites!==0)return[];const tt=[],nt=new Set;for(const{fbase_key:rt,value:it}of _e)nt.add(rt),JSON.stringify(this.localCache[rt])!==JSON.stringify(it)&&(this.notifyListeners(rt,it),tt.push(rt));for(const rt of Object.keys(this.localCache))this.localCache[rt]&&!nt.has(rt)&&(this.notifyListeners(rt,null),tt.push(rt));return tt}notifyListeners(_e,tt){this.localCache[_e]=tt;const nt=this.listeners[_e];if(nt)for(const rt of Array.from(nt))rt(tt)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_e,tt){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[_e]||(this.listeners[_e]=new Set,this._get(_e)),this.listeners[_e].add(tt)}_removeListener(_e,tt){this.listeners[_e]&&(this.listeners[_e].delete(tt),this.listeners[_e].size===0&&delete this.listeners[_e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;new Delay(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(et,_e){return _e?_getInstance(_e):(_assert(et._popupRedirectResolver,et,"argument-error"),et._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(_e){super("custom","custom"),this.params=_e}_getIdTokenResponse(_e){return signInWithIdp(_e,this._buildIdpRequest())}_linkToIdToken(_e,tt){return signInWithIdp(_e,this._buildIdpRequest(tt))}_getReauthenticationResolver(_e){return signInWithIdp(_e,this._buildIdpRequest())}_buildIdpRequest(_e){const tt={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return _e&&(tt.idToken=_e),tt}}function _signIn(et){return _signInWithCredential(et.auth,new IdpCredential(et),et.bypassAuthState)}function _reauth(et){const{auth:_e,user:tt}=et;return _assert(tt,_e,"internal-error"),_reauthenticate(tt,new IdpCredential(et),et.bypassAuthState)}async function _link(et){const{auth:_e,user:tt}=et;return _assert(tt,_e,"internal-error"),_link$1(tt,new IdpCredential(et),et.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(_e,tt,nt,rt,it=!1){this.auth=_e,this.resolver=nt,this.user=rt,this.bypassAuthState=it,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(tt)?tt:[tt]}execute(){return new Promise(async(_e,tt)=>{this.pendingPromise={resolve:_e,reject:tt};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(nt){this.reject(nt)}})}async onAuthEvent(_e){const{urlResponse:tt,sessionId:nt,postBody:rt,tenantId:it,error:ot,type:st}=_e;if(ot){this.reject(ot);return}const at={auth:this.auth,requestUri:tt,sessionId:nt,tenantId:it||void 0,postBody:rt||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(st)(at))}catch(lt){this.reject(lt)}}onError(_e){this.reject(_e)}getIdpTask(_e){switch(_e){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(_e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(_e),this.unregisterAndCleanUp()}reject(_e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(_e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);async function signInWithPopup(et,_e,tt){const nt=_castAuth(et);_assertInstanceOf(et,_e,FederatedAuthProvider);const rt=_withDefaultResolver(nt,tt);return new PopupOperation(nt,"signInViaPopup",_e,rt).executeNotNull()}class PopupOperation extends AbstractPopupRedirectOperation{constructor(_e,tt,nt,rt,it){super(_e,tt,rt,it),this.provider=nt,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const _e=await this.execute();return _assert(_e,this.auth,"internal-error"),_e}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const _e=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],_e),this.authWindow.associatedEvent=_e,this.resolver._originValidation(this.auth).catch(tt=>{this.reject(tt)}),this.resolver._isIframeWebStorageSupported(this.auth,tt=>{tt||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var _e;return((_e=this.authWindow)===null||_e===void 0?void 0:_e.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const _e=()=>{var tt,nt;if(!((nt=(tt=this.authWindow)===null||tt===void 0?void 0:tt.window)===null||nt===void 0)&&nt.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(_e,_POLL_WINDOW_CLOSE_TIMEOUT.get())};_e()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(_e,tt,nt=!1){super(_e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],tt,void 0,nt),this.eventId=null}async execute(){let _e=redirectOutcomeMap.get(this.auth._key());if(!_e){try{const nt=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;_e=()=>Promise.resolve(nt)}catch(tt){_e=()=>Promise.reject(tt)}redirectOutcomeMap.set(this.auth._key(),_e)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),_e()}async onAuthEvent(_e){if(_e.type==="signInViaRedirect")return super.onAuthEvent(_e);if(_e.type==="unknown"){this.resolve(null);return}if(_e.eventId){const tt=await this.auth._redirectUserForId(_e.eventId);if(tt)return this.user=tt,super.onAuthEvent(_e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(et,_e){const tt=pendingRedirectKey(_e),nt=resolverPersistence(et);if(!await nt._isAvailable())return!1;const rt=await nt._get(tt)==="true";return await nt._remove(tt),rt}function _overrideRedirectResult(et,_e){redirectOutcomeMap.set(et._key(),_e)}function resolverPersistence(et){return _getInstance(et._redirectPersistence)}function pendingRedirectKey(et){return _persistenceKeyName(PENDING_REDIRECT_KEY,et.config.apiKey,et.name)}async function getRedirectResult(et,_e){return await _castAuth(et)._initializationPromise,_getRedirectResult(et,_e,!1)}async function _getRedirectResult(et,_e,tt=!1){const nt=_castAuth(et),rt=_withDefaultResolver(nt,_e),ot=await new RedirectAction(nt,rt,tt).execute();return ot&&!tt&&(delete ot.user._redirectEventId,await nt._persistUserIfCurrent(ot.user),await nt._setRedirectUser(null,_e)),ot}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=10*60*1e3;class AuthEventManager{constructor(_e){this.auth=_e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(_e){this.consumers.add(_e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,_e)&&(this.sendToConsumer(this.queuedRedirectEvent,_e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(_e){this.consumers.delete(_e)}onEvent(_e){if(this.hasEventBeenHandled(_e))return!1;let tt=!1;return this.consumers.forEach(nt=>{this.isEventForConsumer(_e,nt)&&(tt=!0,this.sendToConsumer(_e,nt),this.saveEventToCache(_e))}),this.hasHandledPotentialRedirect||!isRedirectEvent(_e)||(this.hasHandledPotentialRedirect=!0,tt||(this.queuedRedirectEvent=_e,tt=!0)),tt}sendToConsumer(_e,tt){var nt;if(_e.error&&!isNullRedirectEvent(_e)){const rt=((nt=_e.error.code)===null||nt===void 0?void 0:nt.split("auth/")[1])||"internal-error";tt.onError(_createError(this.auth,rt))}else tt.onAuthEvent(_e)}isEventForConsumer(_e,tt){const nt=tt.eventId===null||!!_e.eventId&&_e.eventId===tt.eventId;return tt.filter.includes(_e.type)&&nt}hasEventBeenHandled(_e){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(_e))}saveEventToCache(_e){this.cachedEventUids.add(eventUid(_e)),this.lastProcessedEventTime=Date.now()}}function eventUid(et){return[et.type,et.eventId,et.sessionId,et.tenantId].filter(_e=>_e).join("-")}function isNullRedirectEvent({type:et,error:_e}){return et==="unknown"&&(_e==null?void 0:_e.code)==="auth/no-auth-event"}function isRedirectEvent(et){switch(et.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(et);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(et,_e={}){return _performApiRequest(et,"GET","/v1/projects",_e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(et){if(et.config.emulator)return;const{authorizedDomains:_e}=await _getProjectConfig(et);for(const tt of _e)try{if(matchDomain(tt))return}catch{}_fail(et,"unauthorized-domain")}function matchDomain(et){const _e=_getCurrentUrl(),{protocol:tt,hostname:nt}=new URL(_e);if(et.startsWith("chrome-extension://")){const ot=new URL(et);return ot.hostname===""&&nt===""?tt==="chrome-extension:"&&et.replace("chrome-extension://","")===_e.replace("chrome-extension://",""):tt==="chrome-extension:"&&ot.hostname===nt}if(!HTTP_REGEX.test(tt))return!1;if(IP_ADDRESS_REGEX.test(et))return nt===et;const rt=et.replace(/\./g,"\\.");return new RegExp("^(.+\\."+rt+"|"+rt+")$","i").test(nt)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const et=_window().___jsl;if(et!=null&&et.H){for(const _e of Object.keys(et.H))if(et.H[_e].r=et.H[_e].r||[],et.H[_e].L=et.H[_e].L||[],et.H[_e].r=[...et.H[_e].L],et.CP)for(let tt=0;tt<et.CP.length;tt++)et.CP[tt]=null}}function loadGapi(et){return new Promise((_e,tt)=>{var nt,rt,it;function ot(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{_e(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),tt(_createError(et,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(!((rt=(nt=_window().gapi)===null||nt===void 0?void 0:nt.iframes)===null||rt===void 0)&&rt.Iframe)_e(gapi.iframes.getContext());else if(!((it=_window().gapi)===null||it===void 0)&&it.load)ot();else{const st=_generateCallbackName("iframefcb");return _window()[st]=()=>{gapi.load?ot():tt(_createError(et,"network-request-failed"))},_loadJS(`https://apis.google.com/js/api.js?onload=${st}`).catch(at=>tt(at))}}).catch(_e=>{throw cachedGApiLoader=null,_e})}let cachedGApiLoader=null;function _loadGapi(et){return cachedGApiLoader=cachedGApiLoader||loadGapi(et),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(et){const _e=et.config;_assert(_e.authDomain,et,"auth-domain-config-required");const tt=_e.emulator?_emulatorUrl(_e,EMULATED_IFRAME_PATH):`https://${et.config.authDomain}/${IFRAME_PATH}`,nt={apiKey:_e.apiKey,appName:et.name,v:SDK_VERSION$1},rt=EID_FROM_APIHOST.get(et.config.apiHost);rt&&(nt.eid=rt);const it=et._getFrameworks();return it.length&&(nt.fw=it.join(",")),`${tt}?${querystring(nt).slice(1)}`}async function _openIframe(et){const _e=await _loadGapi(et),tt=_window().gapi;return _assert(tt,et,"internal-error"),_e.open({where:document.body,url:getIframeUrl(et),messageHandlersFilter:tt.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},nt=>new Promise(async(rt,it)=>{await nt.restyle({setHideOnLeave:!1});const ot=_createError(et,"network-request-failed"),st=_window().setTimeout(()=>{it(ot)},PING_TIMEOUT.get());function at(){_window().clearTimeout(st),rt(nt)}nt.ping(at).then(at,()=>{it(ot)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(_e){this.window=_e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(et,_e,tt,nt=DEFAULT_WIDTH,rt=DEFAULT_HEIGHT){const it=Math.max((window.screen.availHeight-rt)/2,0).toString(),ot=Math.max((window.screen.availWidth-nt)/2,0).toString();let st="";const at=Object.assign(Object.assign({},BASE_POPUP_OPTIONS),{width:nt.toString(),height:rt.toString(),top:it,left:ot}),lt=getUA().toLowerCase();tt&&(st=_isChromeIOS(lt)?TARGET_BLANK:tt),_isFirefox(lt)&&(_e=_e||FIREFOX_EMPTY_URL,at.scrollbars="yes");const ct=Object.entries(at).reduce((dt,[ft,pt])=>`${dt}${ft}=${pt},`,"");if(_isIOSStandalone(lt)&&st!=="_self")return openAsNewWindowIOS(_e||"",st),new AuthPopup(null);const ut=window.open(_e||"",st,ct);_assert(ut,et,"popup-blocked");try{ut.focus()}catch{}return new AuthPopup(ut)}function openAsNewWindowIOS(et,_e){const tt=document.createElement("a");tt.href=et,tt.target=_e;const nt=document.createEvent("MouseEvent");nt.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),tt.dispatchEvent(nt)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(et,_e,tt,nt,rt,it){_assert(et.config.authDomain,et,"auth-domain-config-required"),_assert(et.config.apiKey,et,"invalid-api-key");const ot={apiKey:et.config.apiKey,appName:et.name,authType:tt,redirectUrl:nt,v:SDK_VERSION$1,eventId:rt};if(_e instanceof FederatedAuthProvider){_e.setDefaultLanguage(et.languageCode),ot.providerId=_e.providerId||"",isEmpty(_e.getCustomParameters())||(ot.customParameters=JSON.stringify(_e.getCustomParameters()));for(const[ct,ut]of Object.entries(it||{}))ot[ct]=ut}if(_e instanceof BaseOAuthProvider){const ct=_e.getScopes().filter(ut=>ut!=="");ct.length>0&&(ot.scopes=ct.join(","))}et.tenantId&&(ot.tid=et.tenantId);const st=ot;for(const ct of Object.keys(st))st[ct]===void 0&&delete st[ct];const at=await et._getAppCheckToken(),lt=at?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(at)}`:"";return`${getHandlerBase(et)}?${querystring(st).slice(1)}${lt}`}function getHandlerBase({config:et}){return et.emulator?_emulatorUrl(et,EMULATOR_WIDGET_PATH):`https://${et.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(_e,tt,nt,rt){var it;debugAssert((it=this.eventManagers[_e._key()])===null||it===void 0?void 0:it.manager,"_initialize() not called before _openPopup()");const ot=await _getRedirectUrl(_e,tt,nt,_getCurrentUrl(),rt);return _open(_e,ot,_generateEventId())}async _openRedirect(_e,tt,nt,rt){await this._originValidation(_e);const it=await _getRedirectUrl(_e,tt,nt,_getCurrentUrl(),rt);return _setWindowLocation(it),new Promise(()=>{})}_initialize(_e){const tt=_e._key();if(this.eventManagers[tt]){const{manager:rt,promise:it}=this.eventManagers[tt];return rt?Promise.resolve(rt):(debugAssert(it,"If manager is not set, promise should be"),it)}const nt=this.initAndGetManager(_e);return this.eventManagers[tt]={promise:nt},nt.catch(()=>{delete this.eventManagers[tt]}),nt}async initAndGetManager(_e){const tt=await _openIframe(_e),nt=new AuthEventManager(_e);return tt.register("authEvent",rt=>(_assert(rt==null?void 0:rt.authEvent,_e,"invalid-auth-event"),{status:nt.onEvent(rt.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[_e._key()]={manager:nt},this.iframes[_e._key()]=tt,nt}_isIframeWebStorageSupported(_e,tt){this.iframes[_e._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},rt=>{var it;const ot=(it=rt==null?void 0:rt[0])===null||it===void 0?void 0:it[WEB_STORAGE_SUPPORT_KEY];ot!==void 0&&tt(!!ot),_fail(_e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(_e){const tt=_e._key();return this.originValidationPromises[tt]||(this.originValidationPromises[tt]=_validateOrigin(_e)),this.originValidationPromises[tt]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$2="@firebase/auth",version$2="1.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(_e){this.auth=_e,this.internalListeners=new Map}getUid(){var _e;return this.assertAuthConfigured(),((_e=this.auth.currentUser)===null||_e===void 0?void 0:_e.uid)||null}async getToken(_e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(_e)}:null}addAuthTokenListener(_e){if(this.assertAuthConfigured(),this.internalListeners.has(_e))return;const tt=this.auth.onIdTokenChanged(nt=>{_e((nt==null?void 0:nt.stsTokenManager.accessToken)||null)});this.internalListeners.set(_e,tt),this.updateProactiveRefresh()}removeAuthTokenListener(_e){this.assertAuthConfigured();const tt=this.internalListeners.get(_e);tt&&(this.internalListeners.delete(_e),tt(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(et){switch(et){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function registerAuth(et){_registerComponent(new Component("auth",(_e,{options:tt})=>{const nt=_e.getProvider("app").getImmediate(),rt=_e.getProvider("heartbeat"),it=_e.getProvider("app-check-internal"),{apiKey:ot,authDomain:st}=nt.options;_assert(ot&&!ot.includes(":"),"invalid-api-key",{appName:nt.name});const at={apiKey:ot,authDomain:st,clientPlatform:et,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(et)},lt=new AuthImpl(nt,rt,it,at);return _initializeAuthInstance(lt,tt),lt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_e,tt,nt)=>{_e.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",_e=>{const tt=_castAuth(_e.getProvider("auth").getImmediate());return(nt=>new AuthInterop(nt))(tt)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$2,version$2,getVersionForPlatform(et)),registerVersion(name$2,version$2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=5*60,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=et=>async _e=>{const tt=_e&&await _e.getIdTokenResult(),nt=tt&&(new Date().getTime()-Date.parse(tt.issuedAtTime))/1e3;if(nt&&nt>authIdTokenMaxAge)return;const rt=tt==null?void 0:tt.token;lastPostedIdToken!==rt&&(lastPostedIdToken=rt,await fetch(et,{method:rt?"POST":"DELETE",headers:rt?{Authorization:`Bearer ${rt}`}:{}}))};function getAuth(et=getApp()){const _e=_getProvider(et,"auth");if(_e.isInitialized())return _e.getImmediate();const tt=initializeAuth(et,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),nt=getExperimentalSetting("authTokenSyncURL");if(nt){const it=mintCookieFactory(nt);beforeAuthStateChanged(tt,it,()=>it(tt.currentUser)),onIdTokenChanged(tt,ot=>it(ot))}const rt=getDefaultEmulatorHost("auth");return rt&&connectAuthEmulator(tt,`http://${rt}`),tt}registerAuth("Browser");var name$1="firebase",version$1="10.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name$1,version$1,"app");var define_process_env_default={};const name="@firebase/database",version="1.0.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SDK_VERSION="";function setSDKVersion(et){SDK_VERSION=et}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DOMStorageWrapper{constructor(_e){this.domStorage_=_e,this.prefix_="firebase:"}set(_e,tt){tt==null?this.domStorage_.removeItem(this.prefixedName_(_e)):this.domStorage_.setItem(this.prefixedName_(_e),stringify(tt))}get(_e){const tt=this.domStorage_.getItem(this.prefixedName_(_e));return tt==null?null:jsonEval(tt)}remove(_e){this.domStorage_.removeItem(this.prefixedName_(_e))}prefixedName_(_e){return this.prefix_+_e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MemoryStorage{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(_e,tt){tt==null?delete this.cache_[_e]:this.cache_[_e]=tt}get(_e){return contains$2(this.cache_,_e)?this.cache_[_e]:null}remove(_e){delete this.cache_[_e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const createStoragefor=function(et){try{if(typeof window<"u"&&typeof window[et]<"u"){const _e=window[et];return _e.setItem("firebase:sentinel","cache"),_e.removeItem("firebase:sentinel"),new DOMStorageWrapper(_e)}}catch{}return new MemoryStorage},PersistentStorage=createStoragefor("localStorage"),SessionStorage=createStoragefor("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/database"),LUIDGenerator=function(){let et=1;return function(){return et++}}(),sha1=function(et){const _e=stringToByteArray(et),tt=new Sha1;tt.update(_e);const nt=tt.digest();return base64$2.encodeByteArray(nt)},buildLogMessage_=function(...et){let _e="";for(let tt=0;tt<et.length;tt++){const nt=et[tt];Array.isArray(nt)||nt&&typeof nt=="object"&&typeof nt.length=="number"?_e+=buildLogMessage_.apply(null,nt):typeof nt=="object"?_e+=stringify(nt):_e+=nt,_e+=" "}return _e};let logger=null,firstLog_=!0;const enableLogging$1=function(et,_e){assert(!_e||et===!0||et===!1,"Can't turn on custom loggers persistently."),et===!0?(logClient.logLevel=LogLevel.VERBOSE,logger=logClient.log.bind(logClient),_e&&SessionStorage.set("logging_enabled",!0)):typeof et=="function"?logger=et:(logger=null,SessionStorage.remove("logging_enabled"))},log$1=function(...et){if(firstLog_===!0&&(firstLog_=!1,logger===null&&SessionStorage.get("logging_enabled")===!0&&enableLogging$1(!0)),logger){const _e=buildLogMessage_.apply(null,et);logger(_e)}},logWrapper=function(et){return function(..._e){log$1(et,..._e)}},error$1=function(...et){const _e="FIREBASE INTERNAL ERROR: "+buildLogMessage_(...et);logClient.error(_e)},fatal=function(...et){const _e=`FIREBASE FATAL ERROR: ${buildLogMessage_(...et)}`;throw logClient.error(_e),new Error(_e)},warn=function(...et){const _e="FIREBASE WARNING: "+buildLogMessage_(...et);logClient.warn(_e)},warnIfPageIsSecure=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&warn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},isInvalidJSONNumber=function(et){return typeof et=="number"&&(et!==et||et===Number.POSITIVE_INFINITY||et===Number.NEGATIVE_INFINITY)},executeWhenDOMReady=function(et){if(document.readyState==="complete")et();else{let _e=!1;const tt=function(){if(!document.body){setTimeout(tt,Math.floor(10));return}_e||(_e=!0,et())};document.addEventListener?(document.addEventListener("DOMContentLoaded",tt,!1),window.addEventListener("load",tt,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&tt()}),window.attachEvent("onload",tt))}},MIN_NAME="[MIN_NAME]",MAX_NAME="[MAX_NAME]",nameCompare=function(et,_e){if(et===_e)return 0;if(et===MIN_NAME||_e===MAX_NAME)return-1;if(_e===MIN_NAME||et===MAX_NAME)return 1;{const tt=tryParseInt(et),nt=tryParseInt(_e);return tt!==null?nt!==null?tt-nt===0?et.length-_e.length:tt-nt:-1:nt!==null?1:et<_e?-1:1}},stringCompare=function(et,_e){return et===_e?0:et<_e?-1:1},requireKey=function(et,_e){if(_e&&et in _e)return _e[et];throw new Error("Missing required key ("+et+") in object: "+stringify(_e))},ObjectToUniqueKey=function(et){if(typeof et!="object"||et===null)return stringify(et);const _e=[];for(const nt in et)_e.push(nt);_e.sort();let tt="{";for(let nt=0;nt<_e.length;nt++)nt!==0&&(tt+=","),tt+=stringify(_e[nt]),tt+=":",tt+=ObjectToUniqueKey(et[_e[nt]]);return tt+="}",tt},splitStringBySize=function(et,_e){const tt=et.length;if(tt<=_e)return[et];const nt=[];for(let rt=0;rt<tt;rt+=_e)rt+_e>tt?nt.push(et.substring(rt,tt)):nt.push(et.substring(rt,rt+_e));return nt};function each(et,_e){for(const tt in et)et.hasOwnProperty(tt)&&_e(tt,et[tt])}const doubleToIEEE754String=function(et){assert(!isInvalidJSONNumber(et),"Invalid JSON number");const _e=11,tt=52,nt=(1<<_e-1)-1;let rt,it,ot,st,at;et===0?(it=0,ot=0,rt=1/et===-1/0?1:0):(rt=et<0,et=Math.abs(et),et>=Math.pow(2,1-nt)?(st=Math.min(Math.floor(Math.log(et)/Math.LN2),nt),it=st+nt,ot=Math.round(et*Math.pow(2,tt-st)-Math.pow(2,tt))):(it=0,ot=Math.round(et/Math.pow(2,1-nt-tt))));const lt=[];for(at=tt;at;at-=1)lt.push(ot%2?1:0),ot=Math.floor(ot/2);for(at=_e;at;at-=1)lt.push(it%2?1:0),it=Math.floor(it/2);lt.push(rt?1:0),lt.reverse();const ct=lt.join("");let ut="";for(at=0;at<64;at+=8){let dt=parseInt(ct.substr(at,8),2).toString(16);dt.length===1&&(dt="0"+dt),ut=ut+dt}return ut.toLowerCase()},isChromeExtensionContentScript=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},isWindowsStoreApp=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function errorForServerCode(et,_e){let tt="Unknown Error";et==="too_big"?tt="The data requested exceeds the maximum size that can be accessed with a single request.":et==="permission_denied"?tt="Client doesn't have permission to access the desired data.":et==="unavailable"&&(tt="The service is unavailable");const nt=new Error(et+" at "+_e._path.toString()+": "+tt);return nt.code=et.toUpperCase(),nt}const INTEGER_REGEXP_=new RegExp("^-?(0*)\\d{1,10}$"),INTEGER_32_MIN=-2147483648,INTEGER_32_MAX=2147483647,tryParseInt=function(et){if(INTEGER_REGEXP_.test(et)){const _e=Number(et);if(_e>=INTEGER_32_MIN&&_e<=INTEGER_32_MAX)return _e}return null},exceptionGuard=function(et){try{et()}catch(_e){setTimeout(()=>{const tt=_e.stack||"";throw warn("Exception was thrown by user callback.",tt),_e},Math.floor(0))}},beingCrawled=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},setTimeoutNonBlocking=function(et,_e){const tt=setTimeout(et,_e);return typeof tt=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(tt):typeof tt=="object"&&tt.unref&&tt.unref(),tt};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AppCheckTokenProvider{constructor(_e,tt){this.appName_=_e,this.appCheckProvider=tt,this.appCheck=tt==null?void 0:tt.getImmediate({optional:!0}),this.appCheck||tt==null||tt.get().then(nt=>this.appCheck=nt)}getToken(_e){return this.appCheck?this.appCheck.getToken(_e):new Promise((tt,nt)=>{setTimeout(()=>{this.appCheck?this.getToken(_e).then(tt,nt):tt(null)},0)})}addTokenChangeListener(_e){var tt;(tt=this.appCheckProvider)===null||tt===void 0||tt.get().then(nt=>nt.addTokenListener(_e))}notifyForInvalidToken(){warn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAuthTokenProvider{constructor(_e,tt,nt){this.appName_=_e,this.firebaseOptions_=tt,this.authProvider_=nt,this.auth_=null,this.auth_=nt.getImmediate({optional:!0}),this.auth_||nt.onInit(rt=>this.auth_=rt)}getToken(_e){return this.auth_?this.auth_.getToken(_e).catch(tt=>tt&&tt.code==="auth/token-not-initialized"?(log$1("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(tt)):new Promise((tt,nt)=>{setTimeout(()=>{this.auth_?this.getToken(_e).then(tt,nt):tt(null)},0)})}addTokenChangeListener(_e){this.auth_?this.auth_.addAuthTokenListener(_e):this.authProvider_.get().then(tt=>tt.addAuthTokenListener(_e))}removeTokenChangeListener(_e){this.authProvider_.get().then(tt=>tt.removeAuthTokenListener(_e))}notifyForInvalidToken(){let _e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?_e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?_e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':_e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',warn(_e)}}class EmulatorTokenProvider{constructor(_e){this.accessToken=_e}getToken(_e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(_e){_e(this.accessToken)}removeTokenChangeListener(_e){}notifyForInvalidToken(){}}EmulatorTokenProvider.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PROTOCOL_VERSION="5",VERSION_PARAM="v",TRANSPORT_SESSION_PARAM="s",REFERER_PARAM="r",FORGE_REF="f",FORGE_DOMAIN_RE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,LAST_SESSION_PARAM="ls",APPLICATION_ID_PARAM="p",APP_CHECK_TOKEN_PARAM="ac",WEBSOCKET="websocket",LONG_POLLING="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RepoInfo{constructor(_e,tt,nt,rt,it=!1,ot="",st=!1,at=!1){this.secure=tt,this.namespace=nt,this.webSocketOnly=rt,this.nodeAdmin=it,this.persistenceKey=ot,this.includeNamespaceInQueryParams=st,this.isUsingEmulator=at,this._host=_e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=PersistentStorage.get("host:"+_e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(_e){_e!==this.internalHost&&(this.internalHost=_e,this.isCacheableHost()&&PersistentStorage.set("host:"+this._host,this.internalHost))}toString(){let _e=this.toURLString();return this.persistenceKey&&(_e+="<"+this.persistenceKey+">"),_e}toURLString(){const _e=this.secure?"https://":"http://",tt=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${_e}${this.host}/${tt}`}}function repoInfoNeedsQueryParam(et){return et.host!==et.internalHost||et.isCustomHost()||et.includeNamespaceInQueryParams}function repoInfoConnectionURL(et,_e,tt){assert(typeof _e=="string","typeof type must == string"),assert(typeof tt=="object","typeof params must == object");let nt;if(_e===WEBSOCKET)nt=(et.secure?"wss://":"ws://")+et.internalHost+"/.ws?";else if(_e===LONG_POLLING)nt=(et.secure?"https://":"http://")+et.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+_e);repoInfoNeedsQueryParam(et)&&(tt.ns=et.namespace);const rt=[];return each(tt,(it,ot)=>{rt.push(it+"="+ot)}),nt+rt.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StatsCollection{constructor(){this.counters_={}}incrementCounter(_e,tt=1){contains$2(this.counters_,_e)||(this.counters_[_e]=0),this.counters_[_e]+=tt}get(){return deepCopy(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const collections={},reporters={};function statsManagerGetCollection(et){const _e=et.toString();return collections[_e]||(collections[_e]=new StatsCollection),collections[_e]}function statsManagerGetOrCreateReporter(et,_e){const tt=et.toString();return reporters[tt]||(reporters[tt]=_e()),reporters[tt]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PacketReceiver{constructor(_e){this.onMessage_=_e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(_e,tt){this.closeAfterResponse=_e,this.onClose=tt,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(_e,tt){for(this.pendingResponses[_e]=tt;this.pendingResponses[this.currentResponseNum];){const nt=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let rt=0;rt<nt.length;++rt)nt[rt]&&exceptionGuard(()=>{this.onMessage_(nt[rt])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FIREBASE_LONGPOLL_START_PARAM="start",FIREBASE_LONGPOLL_CLOSE_COMMAND="close",FIREBASE_LONGPOLL_COMMAND_CB_NAME="pLPCommand",FIREBASE_LONGPOLL_DATA_CB_NAME="pRTLPCB",FIREBASE_LONGPOLL_ID_PARAM="id",FIREBASE_LONGPOLL_PW_PARAM="pw",FIREBASE_LONGPOLL_SERIAL_PARAM="ser",FIREBASE_LONGPOLL_CALLBACK_ID_PARAM="cb",FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM="seg",FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET="ts",FIREBASE_LONGPOLL_DATA_PARAM="d",FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM="dframe",MAX_URL_DATA_SIZE=1870,SEG_HEADER_SIZE=30,MAX_PAYLOAD_SIZE=MAX_URL_DATA_SIZE-SEG_HEADER_SIZE,KEEPALIVE_REQUEST_INTERVAL=25e3,LP_CONNECT_TIMEOUT=3e4;class BrowserPollConnection{constructor(_e,tt,nt,rt,it,ot,st){this.connId=_e,this.repoInfo=tt,this.applicationId=nt,this.appCheckToken=rt,this.authToken=it,this.transportSessionId=ot,this.lastSessionId=st,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=logWrapper(_e),this.stats_=statsManagerGetCollection(tt),this.urlFn=at=>(this.appCheckToken&&(at[APP_CHECK_TOKEN_PARAM]=this.appCheckToken),repoInfoConnectionURL(tt,LONG_POLLING,at))}open(_e,tt){this.curSegmentNum=0,this.onDisconnect_=tt,this.myPacketOrderer=new PacketReceiver(_e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(LP_CONNECT_TIMEOUT)),executeWhenDOMReady(()=>{if(this.isClosed_)return;this.scriptTagHolder=new FirebaseIFrameScriptHolder((...it)=>{const[ot,st,at,lt,ct]=it;if(this.incrementIncomingBytes_(it),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,ot===FIREBASE_LONGPOLL_START_PARAM)this.id=st,this.password=at;else if(ot===FIREBASE_LONGPOLL_CLOSE_COMMAND)st?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(st,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+ot)},(...it)=>{const[ot,st]=it;this.incrementIncomingBytes_(it),this.myPacketOrderer.handleResponse(ot,st)},()=>{this.onClosed_()},this.urlFn);const nt={};nt[FIREBASE_LONGPOLL_START_PARAM]="t",nt[FIREBASE_LONGPOLL_SERIAL_PARAM]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(nt[FIREBASE_LONGPOLL_CALLBACK_ID_PARAM]=this.scriptTagHolder.uniqueCallbackIdentifier),nt[VERSION_PARAM]=PROTOCOL_VERSION,this.transportSessionId&&(nt[TRANSPORT_SESSION_PARAM]=this.transportSessionId),this.lastSessionId&&(nt[LAST_SESSION_PARAM]=this.lastSessionId),this.applicationId&&(nt[APPLICATION_ID_PARAM]=this.applicationId),this.appCheckToken&&(nt[APP_CHECK_TOKEN_PARAM]=this.appCheckToken),typeof location<"u"&&location.hostname&&FORGE_DOMAIN_RE.test(location.hostname)&&(nt[REFERER_PARAM]=FORGE_REF);const rt=this.urlFn(nt);this.log_("Connecting via long-poll to "+rt),this.scriptTagHolder.addTag(rt,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){BrowserPollConnection.forceAllow_=!0}static forceDisallow(){BrowserPollConnection.forceDisallow_=!0}static isAvailable(){return BrowserPollConnection.forceAllow_?!0:!BrowserPollConnection.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!isChromeExtensionContentScript()&&!isWindowsStoreApp()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(_e){const tt=stringify(_e);this.bytesSent+=tt.length,this.stats_.incrementCounter("bytes_sent",tt.length);const nt=base64Encode(tt),rt=splitStringBySize(nt,MAX_PAYLOAD_SIZE);for(let it=0;it<rt.length;it++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,rt.length,rt[it]),this.curSegmentNum++}addDisconnectPingFrame(_e,tt){this.myDisconnFrame=document.createElement("iframe");const nt={};nt[FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM]="t",nt[FIREBASE_LONGPOLL_ID_PARAM]=_e,nt[FIREBASE_LONGPOLL_PW_PARAM]=tt,this.myDisconnFrame.src=this.urlFn(nt),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(_e){const tt=stringify(_e).length;this.bytesReceived+=tt,this.stats_.incrementCounter("bytes_received",tt)}}class FirebaseIFrameScriptHolder{constructor(_e,tt,nt,rt){this.onDisconnect=nt,this.urlFn=rt,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=LUIDGenerator(),window[FIREBASE_LONGPOLL_COMMAND_CB_NAME+this.uniqueCallbackIdentifier]=_e,window[FIREBASE_LONGPOLL_DATA_CB_NAME+this.uniqueCallbackIdentifier]=tt,this.myIFrame=FirebaseIFrameScriptHolder.createIFrame_();let it="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(it='<script>document.domain="'+document.domain+'";<\/script>');const ot="<html><body>"+it+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(ot),this.myIFrame.doc.close()}catch(st){log$1("frame writing exception"),st.stack&&log$1(st.stack),log$1(st)}}}static createIFrame_(){const _e=document.createElement("iframe");if(_e.style.display="none",document.body){document.body.appendChild(_e);try{_e.contentWindow.document||log$1("No IE domain setting required")}catch{const nt=document.domain;_e.src="javascript:void((function(){document.open();document.domain='"+nt+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return _e.contentDocument?_e.doc=_e.contentDocument:_e.contentWindow?_e.doc=_e.contentWindow.document:_e.document&&(_e.doc=_e.document),_e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const _e=this.onDisconnect;_e&&(this.onDisconnect=null,_e())}startLongPoll(_e,tt){for(this.myID=_e,this.myPW=tt,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const _e={};_e[FIREBASE_LONGPOLL_ID_PARAM]=this.myID,_e[FIREBASE_LONGPOLL_PW_PARAM]=this.myPW,_e[FIREBASE_LONGPOLL_SERIAL_PARAM]=this.currentSerial;let tt=this.urlFn(_e),nt="",rt=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+SEG_HEADER_SIZE+nt.length<=MAX_URL_DATA_SIZE;){const ot=this.pendingSegs.shift();nt=nt+"&"+FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM+rt+"="+ot.seg+"&"+FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET+rt+"="+ot.ts+"&"+FIREBASE_LONGPOLL_DATA_PARAM+rt+"="+ot.d,rt++}return tt=tt+nt,this.addLongPollTag_(tt,this.currentSerial),!0}else return!1}enqueueSegment(_e,tt,nt){this.pendingSegs.push({seg:_e,ts:tt,d:nt}),this.alive&&this.newRequest_()}addLongPollTag_(_e,tt){this.outstandingRequests.add(tt);const nt=()=>{this.outstandingRequests.delete(tt),this.newRequest_()},rt=setTimeout(nt,Math.floor(KEEPALIVE_REQUEST_INTERVAL)),it=()=>{clearTimeout(rt),nt()};this.addTag(_e,it)}addTag(_e,tt){setTimeout(()=>{try{if(!this.sendNewPolls)return;const nt=this.myIFrame.doc.createElement("script");nt.type="text/javascript",nt.async=!0,nt.src=_e,nt.onload=nt.onreadystatechange=function(){const rt=nt.readyState;(!rt||rt==="loaded"||rt==="complete")&&(nt.onload=nt.onreadystatechange=null,nt.parentNode&&nt.parentNode.removeChild(nt),tt())},nt.onerror=()=>{log$1("Long-poll script failed to load: "+_e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(nt)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEBSOCKET_MAX_FRAME_SIZE=16384,WEBSOCKET_KEEPALIVE_INTERVAL=45e3;let WebSocketImpl=null;typeof MozWebSocket<"u"?WebSocketImpl=MozWebSocket:typeof WebSocket<"u"&&(WebSocketImpl=WebSocket);class WebSocketConnection{constructor(_e,tt,nt,rt,it,ot,st){this.connId=_e,this.applicationId=nt,this.appCheckToken=rt,this.authToken=it,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=logWrapper(this.connId),this.stats_=statsManagerGetCollection(tt),this.connURL=WebSocketConnection.connectionURL_(tt,ot,st,rt,nt),this.nodeAdmin=tt.nodeAdmin}static connectionURL_(_e,tt,nt,rt,it){const ot={};return ot[VERSION_PARAM]=PROTOCOL_VERSION,typeof location<"u"&&location.hostname&&FORGE_DOMAIN_RE.test(location.hostname)&&(ot[REFERER_PARAM]=FORGE_REF),tt&&(ot[TRANSPORT_SESSION_PARAM]=tt),nt&&(ot[LAST_SESSION_PARAM]=nt),rt&&(ot[APP_CHECK_TOKEN_PARAM]=rt),it&&(ot[APPLICATION_ID_PARAM]=it),repoInfoConnectionURL(_e,WEBSOCKET,ot)}open(_e,tt){this.onDisconnect=tt,this.onMessage=_e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,PersistentStorage.set("previous_websocket_failure",!0);try{let nt;isNodeSdk(),this.mySock=new WebSocketImpl(this.connURL,[],nt)}catch(nt){this.log_("Error instantiating WebSocket.");const rt=nt.message||nt.data;rt&&this.log_(rt),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=nt=>{this.handleIncomingFrame(nt)},this.mySock.onerror=nt=>{this.log_("WebSocket error.  Closing connection.");const rt=nt.message||nt.data;rt&&this.log_(rt),this.onClosed_()}}start(){}static forceDisallow(){WebSocketConnection.forceDisallow_=!0}static isAvailable(){let _e=!1;if(typeof navigator<"u"&&navigator.userAgent){const tt=/Android ([0-9]{0,}\.[0-9]{0,})/,nt=navigator.userAgent.match(tt);nt&&nt.length>1&&parseFloat(nt[1])<4.4&&(_e=!0)}return!_e&&WebSocketImpl!==null&&!WebSocketConnection.forceDisallow_}static previouslyFailed(){return PersistentStorage.isInMemoryStorage||PersistentStorage.get("previous_websocket_failure")===!0}markConnectionHealthy(){PersistentStorage.remove("previous_websocket_failure")}appendFrame_(_e){if(this.frames.push(_e),this.frames.length===this.totalFrames){const tt=this.frames.join("");this.frames=null;const nt=jsonEval(tt);this.onMessage(nt)}}handleNewFrameCount_(_e){this.totalFrames=_e,this.frames=[]}extractFrameCount_(_e){if(assert(this.frames===null,"We already have a frame buffer"),_e.length<=6){const tt=Number(_e);if(!isNaN(tt))return this.handleNewFrameCount_(tt),null}return this.handleNewFrameCount_(1),_e}handleIncomingFrame(_e){if(this.mySock===null)return;const tt=_e.data;if(this.bytesReceived+=tt.length,this.stats_.incrementCounter("bytes_received",tt.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(tt);else{const nt=this.extractFrameCount_(tt);nt!==null&&this.appendFrame_(nt)}}send(_e){this.resetKeepAlive();const tt=stringify(_e);this.bytesSent+=tt.length,this.stats_.incrementCounter("bytes_sent",tt.length);const nt=splitStringBySize(tt,WEBSOCKET_MAX_FRAME_SIZE);nt.length>1&&this.sendString_(String(nt.length));for(let rt=0;rt<nt.length;rt++)this.sendString_(nt[rt])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(WEBSOCKET_KEEPALIVE_INTERVAL))}sendString_(_e){try{this.mySock.send(_e)}catch(tt){this.log_("Exception thrown from WebSocket.send():",tt.message||tt.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}WebSocketConnection.responsesRequiredToBeHealthy=2;WebSocketConnection.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransportManager{constructor(_e){this.initTransports_(_e)}static get ALL_TRANSPORTS(){return[BrowserPollConnection,WebSocketConnection]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(_e){const tt=WebSocketConnection&&WebSocketConnection.isAvailable();let nt=tt&&!WebSocketConnection.previouslyFailed();if(_e.webSocketOnly&&(tt||warn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),nt=!0),nt)this.transports_=[WebSocketConnection];else{const rt=this.transports_=[];for(const it of TransportManager.ALL_TRANSPORTS)it&&it.isAvailable()&&rt.push(it);TransportManager.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}TransportManager.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UPGRADE_TIMEOUT=6e4,DELAY_BEFORE_SENDING_EXTRA_REQUESTS=5e3,BYTES_SENT_HEALTHY_OVERRIDE=10*1024,BYTES_RECEIVED_HEALTHY_OVERRIDE=100*1024,MESSAGE_TYPE="t",MESSAGE_DATA="d",CONTROL_SHUTDOWN="s",CONTROL_RESET="r",CONTROL_ERROR="e",CONTROL_PONG="o",SWITCH_ACK="a",END_TRANSMISSION="n",PING="p",SERVER_HELLO="h";class Connection{constructor(_e,tt,nt,rt,it,ot,st,at,lt,ct){this.id=_e,this.repoInfo_=tt,this.applicationId_=nt,this.appCheckToken_=rt,this.authToken_=it,this.onMessage_=ot,this.onReady_=st,this.onDisconnect_=at,this.onKill_=lt,this.lastSessionId=ct,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=logWrapper("c:"+this.id+":"),this.transportManager_=new TransportManager(tt),this.log_("Connection created"),this.start_()}start_(){const _e=this.transportManager_.initialTransport();this.conn_=new _e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=_e.responsesRequiredToBeHealthy||0;const tt=this.connReceiver_(this.conn_),nt=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(tt,nt)},Math.floor(0));const rt=_e.healthyTimeout||0;rt>0&&(this.healthyTimeout_=setTimeoutNonBlocking(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>BYTES_RECEIVED_HEALTHY_OVERRIDE?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>BYTES_SENT_HEALTHY_OVERRIDE?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(rt)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(_e){return tt=>{_e===this.conn_?this.onConnectionLost_(tt):_e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(_e){return tt=>{this.state_!==2&&(_e===this.rx_?this.onPrimaryMessageReceived_(tt):_e===this.secondaryConn_?this.onSecondaryMessageReceived_(tt):this.log_("message on old connection"))}}sendRequest(_e){const tt={t:"d",d:_e};this.sendData_(tt)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(_e){if(MESSAGE_TYPE in _e){const tt=_e[MESSAGE_TYPE];tt===SWITCH_ACK?this.upgradeIfSecondaryHealthy_():tt===CONTROL_RESET?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):tt===CONTROL_PONG&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(_e){const tt=requireKey("t",_e),nt=requireKey("d",_e);if(tt==="c")this.onSecondaryControl_(nt);else if(tt==="d")this.pendingDataMessages.push(nt);else throw new Error("Unknown protocol layer: "+tt)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:PING,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:SWITCH_ACK,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:END_TRANSMISSION,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(_e){const tt=requireKey("t",_e),nt=requireKey("d",_e);tt==="c"?this.onControl_(nt):tt==="d"&&this.onDataMessage_(nt)}onDataMessage_(_e){this.onPrimaryResponse_(),this.onMessage_(_e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(_e){const tt=requireKey(MESSAGE_TYPE,_e);if(MESSAGE_DATA in _e){const nt=_e[MESSAGE_DATA];if(tt===SERVER_HELLO){const rt=Object.assign({},nt);this.repoInfo_.isUsingEmulator&&(rt.h=this.repoInfo_.host),this.onHandshake_(rt)}else if(tt===END_TRANSMISSION){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let rt=0;rt<this.pendingDataMessages.length;++rt)this.onDataMessage_(this.pendingDataMessages[rt]);this.pendingDataMessages=[],this.tryCleanupConnection()}else tt===CONTROL_SHUTDOWN?this.onConnectionShutdown_(nt):tt===CONTROL_RESET?this.onReset_(nt):tt===CONTROL_ERROR?error$1("Server Error: "+nt):tt===CONTROL_PONG?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):error$1("Unknown control packet command: "+tt)}}onHandshake_(_e){const tt=_e.ts,nt=_e.v,rt=_e.h;this.sessionId=_e.s,this.repoInfo_.host=rt,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,tt),PROTOCOL_VERSION!==nt&&warn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const _e=this.transportManager_.upgradeTransport();_e&&this.startUpgrade_(_e)}startUpgrade_(_e){this.secondaryConn_=new _e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=_e.responsesRequiredToBeHealthy||0;const tt=this.connReceiver_(this.secondaryConn_),nt=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(tt,nt),setTimeoutNonBlocking(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(UPGRADE_TIMEOUT))}onReset_(_e){this.log_("Reset packet received.  New host: "+_e),this.repoInfo_.host=_e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(_e,tt){this.log_("Realtime connection established."),this.conn_=_e,this.state_=1,this.onReady_&&(this.onReady_(tt,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):setTimeoutNonBlocking(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(DELAY_BEFORE_SENDING_EXTRA_REQUESTS))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:PING,d:{}}}))}onSecondaryConnectionLost_(){const _e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===_e||this.rx_===_e)&&this.close()}onConnectionLost_(_e){this.conn_=null,!_e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(PersistentStorage.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(_e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(_e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(_e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(_e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ServerActions{put(_e,tt,nt,rt){}merge(_e,tt,nt,rt){}refreshAuthToken(_e){}refreshAppCheckToken(_e){}onDisconnectPut(_e,tt,nt){}onDisconnectMerge(_e,tt,nt){}onDisconnectCancel(_e,tt){}reportStats(_e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EventEmitter$1=class{constructor(_e){this.allowedEvents_=_e,this.listeners_={},assert(Array.isArray(_e)&&_e.length>0,"Requires a non-empty array")}trigger(_e,...tt){if(Array.isArray(this.listeners_[_e])){const nt=[...this.listeners_[_e]];for(let rt=0;rt<nt.length;rt++)nt[rt].callback.apply(nt[rt].context,tt)}}on(_e,tt,nt){this.validateEventType_(_e),this.listeners_[_e]=this.listeners_[_e]||[],this.listeners_[_e].push({callback:tt,context:nt});const rt=this.getInitialEvent(_e);rt&&tt.apply(nt,rt)}off(_e,tt,nt){this.validateEventType_(_e);const rt=this.listeners_[_e]||[];for(let it=0;it<rt.length;it++)if(rt[it].callback===tt&&(!nt||nt===rt[it].context)){rt.splice(it,1);return}}validateEventType_(_e){assert(this.allowedEvents_.find(tt=>tt===_e),"Unknown event: "+_e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OnlineMonitor extends EventEmitter$1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!isMobileCordova()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new OnlineMonitor}getInitialEvent(_e){return assert(_e==="online","Unknown event type: "+_e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_PATH_DEPTH=32,MAX_PATH_LENGTH_BYTES=768;let Path$1=class{constructor(_e,tt){if(tt===void 0){this.pieces_=_e.split("/");let nt=0;for(let rt=0;rt<this.pieces_.length;rt++)this.pieces_[rt].length>0&&(this.pieces_[nt]=this.pieces_[rt],nt++);this.pieces_.length=nt,this.pieceNum_=0}else this.pieces_=_e,this.pieceNum_=tt}toString(){let _e="";for(let tt=this.pieceNum_;tt<this.pieces_.length;tt++)this.pieces_[tt]!==""&&(_e+="/"+this.pieces_[tt]);return _e||"/"}};function newEmptyPath(){return new Path$1("")}function pathGetFront(et){return et.pieceNum_>=et.pieces_.length?null:et.pieces_[et.pieceNum_]}function pathGetLength(et){return et.pieces_.length-et.pieceNum_}function pathPopFront(et){let _e=et.pieceNum_;return _e<et.pieces_.length&&_e++,new Path$1(et.pieces_,_e)}function pathGetBack(et){return et.pieceNum_<et.pieces_.length?et.pieces_[et.pieces_.length-1]:null}function pathToUrlEncodedString(et){let _e="";for(let tt=et.pieceNum_;tt<et.pieces_.length;tt++)et.pieces_[tt]!==""&&(_e+="/"+encodeURIComponent(String(et.pieces_[tt])));return _e||"/"}function pathSlice(et,_e=0){return et.pieces_.slice(et.pieceNum_+_e)}function pathParent(et){if(et.pieceNum_>=et.pieces_.length)return null;const _e=[];for(let tt=et.pieceNum_;tt<et.pieces_.length-1;tt++)_e.push(et.pieces_[tt]);return new Path$1(_e,0)}function pathChild(et,_e){const tt=[];for(let nt=et.pieceNum_;nt<et.pieces_.length;nt++)tt.push(et.pieces_[nt]);if(_e instanceof Path$1)for(let nt=_e.pieceNum_;nt<_e.pieces_.length;nt++)tt.push(_e.pieces_[nt]);else{const nt=_e.split("/");for(let rt=0;rt<nt.length;rt++)nt[rt].length>0&&tt.push(nt[rt])}return new Path$1(tt,0)}function pathIsEmpty(et){return et.pieceNum_>=et.pieces_.length}function newRelativePath(et,_e){const tt=pathGetFront(et),nt=pathGetFront(_e);if(tt===null)return _e;if(tt===nt)return newRelativePath(pathPopFront(et),pathPopFront(_e));throw new Error("INTERNAL ERROR: innerPath ("+_e+") is not within outerPath ("+et+")")}function pathEquals(et,_e){if(pathGetLength(et)!==pathGetLength(_e))return!1;for(let tt=et.pieceNum_,nt=_e.pieceNum_;tt<=et.pieces_.length;tt++,nt++)if(et.pieces_[tt]!==_e.pieces_[nt])return!1;return!0}function pathContains(et,_e){let tt=et.pieceNum_,nt=_e.pieceNum_;if(pathGetLength(et)>pathGetLength(_e))return!1;for(;tt<et.pieces_.length;){if(et.pieces_[tt]!==_e.pieces_[nt])return!1;++tt,++nt}return!0}class ValidationPath{constructor(_e,tt){this.errorPrefix_=tt,this.parts_=pathSlice(_e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let nt=0;nt<this.parts_.length;nt++)this.byteLength_+=stringLength(this.parts_[nt]);validationPathCheckValid(this)}}function validationPathPush(et,_e){et.parts_.length>0&&(et.byteLength_+=1),et.parts_.push(_e),et.byteLength_+=stringLength(_e),validationPathCheckValid(et)}function validationPathPop(et){const _e=et.parts_.pop();et.byteLength_-=stringLength(_e),et.parts_.length>0&&(et.byteLength_-=1)}function validationPathCheckValid(et){if(et.byteLength_>MAX_PATH_LENGTH_BYTES)throw new Error(et.errorPrefix_+"has a key path longer than "+MAX_PATH_LENGTH_BYTES+" bytes ("+et.byteLength_+").");if(et.parts_.length>MAX_PATH_DEPTH)throw new Error(et.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+MAX_PATH_DEPTH+") or object contains a cycle "+validationPathToErrorString(et))}function validationPathToErrorString(et){return et.parts_.length===0?"":"in property '"+et.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VisibilityMonitor extends EventEmitter$1{constructor(){super(["visible"]);let _e,tt;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(tt="visibilitychange",_e="hidden"):typeof document.mozHidden<"u"?(tt="mozvisibilitychange",_e="mozHidden"):typeof document.msHidden<"u"?(tt="msvisibilitychange",_e="msHidden"):typeof document.webkitHidden<"u"&&(tt="webkitvisibilitychange",_e="webkitHidden")),this.visible_=!0,tt&&document.addEventListener(tt,()=>{const nt=!document[_e];nt!==this.visible_&&(this.visible_=nt,this.trigger("visible",nt))},!1)}static getInstance(){return new VisibilityMonitor}getInitialEvent(_e){return assert(_e==="visible","Unknown event type: "+_e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RECONNECT_MIN_DELAY=1e3,RECONNECT_MAX_DELAY_DEFAULT=60*5*1e3,RECONNECT_MAX_DELAY_FOR_ADMINS=30*1e3,RECONNECT_DELAY_MULTIPLIER=1.3,RECONNECT_DELAY_RESET_TIMEOUT=3e4,SERVER_KILL_INTERRUPT_REASON="server_kill",INVALID_TOKEN_THRESHOLD=3;class PersistentConnection extends ServerActions{constructor(_e,tt,nt,rt,it,ot,st,at){if(super(),this.repoInfo_=_e,this.applicationId_=tt,this.onDataUpdate_=nt,this.onConnectStatus_=rt,this.onServerInfoUpdate_=it,this.authTokenProvider_=ot,this.appCheckTokenProvider_=st,this.authOverride_=at,this.id=PersistentConnection.nextPersistentConnectionId_++,this.log_=logWrapper("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=RECONNECT_MIN_DELAY,this.maxReconnectDelay_=RECONNECT_MAX_DELAY_DEFAULT,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,at&&!isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");VisibilityMonitor.getInstance().on("visible",this.onVisible_,this),_e.host.indexOf("fblocal")===-1&&OnlineMonitor.getInstance().on("online",this.onOnline_,this)}sendRequest(_e,tt,nt){const rt=++this.requestNumber_,it={r:rt,a:_e,b:tt};this.log_(stringify(it)),assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(it),nt&&(this.requestCBHash_[rt]=nt)}get(_e){this.initConnection_();const tt=new Deferred,rt={action:"g",request:{p:_e._path.toString(),q:_e._queryObject},onComplete:ot=>{const st=ot.d;ot.s==="ok"?tt.resolve(st):tt.reject(st)}};this.outstandingGets_.push(rt),this.outstandingGetCount_++;const it=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(it),tt.promise}listen(_e,tt,nt,rt){this.initConnection_();const it=_e._queryIdentifier,ot=_e._path.toString();this.log_("Listen called for "+ot+" "+it),this.listens.has(ot)||this.listens.set(ot,new Map),assert(_e._queryParams.isDefault()||!_e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),assert(!this.listens.get(ot).has(it),"listen() called twice for same path/queryId.");const st={onComplete:rt,hashFn:tt,query:_e,tag:nt};this.listens.get(ot).set(it,st),this.connected_&&this.sendListen_(st)}sendGet_(_e){const tt=this.outstandingGets_[_e];this.sendRequest("g",tt.request,nt=>{delete this.outstandingGets_[_e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),tt.onComplete&&tt.onComplete(nt)})}sendListen_(_e){const tt=_e.query,nt=tt._path.toString(),rt=tt._queryIdentifier;this.log_("Listen on "+nt+" for "+rt);const it={p:nt},ot="q";_e.tag&&(it.q=tt._queryObject,it.t=_e.tag),it.h=_e.hashFn(),this.sendRequest(ot,it,st=>{const at=st.d,lt=st.s;PersistentConnection.warnOnListenWarnings_(at,tt),(this.listens.get(nt)&&this.listens.get(nt).get(rt))===_e&&(this.log_("listen response",st),lt!=="ok"&&this.removeListen_(nt,rt),_e.onComplete&&_e.onComplete(lt,at))})}static warnOnListenWarnings_(_e,tt){if(_e&&typeof _e=="object"&&contains$2(_e,"w")){const nt=safeGet(_e,"w");if(Array.isArray(nt)&&~nt.indexOf("no_index")){const rt='".indexOn": "'+tt._queryParams.getIndex().toString()+'"',it=tt._path.toString();warn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${rt} at ${it} to your security rules for better performance.`)}}}refreshAuthToken(_e){this.authToken_=_e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(_e)}reduceReconnectDelayIfAdminCredential_(_e){(_e&&_e.length===40||isAdmin(_e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=RECONNECT_MAX_DELAY_FOR_ADMINS)}refreshAppCheckToken(_e){this.appCheckToken_=_e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const _e=this.authToken_,tt=isValidFormat(_e)?"auth":"gauth",nt={cred:_e};this.authOverride_===null?nt.noauth=!0:typeof this.authOverride_=="object"&&(nt.authvar=this.authOverride_),this.sendRequest(tt,nt,rt=>{const it=rt.s,ot=rt.d||"error";this.authToken_===_e&&(it==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(it,ot))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},_e=>{const tt=_e.s,nt=_e.d||"error";tt==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(tt,nt)})}unlisten(_e,tt){const nt=_e._path.toString(),rt=_e._queryIdentifier;this.log_("Unlisten called for "+nt+" "+rt),assert(_e._queryParams.isDefault()||!_e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(nt,rt)&&this.connected_&&this.sendUnlisten_(nt,rt,_e._queryObject,tt)}sendUnlisten_(_e,tt,nt,rt){this.log_("Unlisten on "+_e+" for "+tt);const it={p:_e},ot="n";rt&&(it.q=nt,it.t=rt),this.sendRequest(ot,it)}onDisconnectPut(_e,tt,nt){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",_e,tt,nt):this.onDisconnectRequestQueue_.push({pathString:_e,action:"o",data:tt,onComplete:nt})}onDisconnectMerge(_e,tt,nt){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",_e,tt,nt):this.onDisconnectRequestQueue_.push({pathString:_e,action:"om",data:tt,onComplete:nt})}onDisconnectCancel(_e,tt){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",_e,null,tt):this.onDisconnectRequestQueue_.push({pathString:_e,action:"oc",data:null,onComplete:tt})}sendOnDisconnect_(_e,tt,nt,rt){const it={p:tt,d:nt};this.log_("onDisconnect "+_e,it),this.sendRequest(_e,it,ot=>{rt&&setTimeout(()=>{rt(ot.s,ot.d)},Math.floor(0))})}put(_e,tt,nt,rt){this.putInternal("p",_e,tt,nt,rt)}merge(_e,tt,nt,rt){this.putInternal("m",_e,tt,nt,rt)}putInternal(_e,tt,nt,rt,it){this.initConnection_();const ot={p:tt,d:nt};it!==void 0&&(ot.h=it),this.outstandingPuts_.push({action:_e,request:ot,onComplete:rt}),this.outstandingPutCount_++;const st=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(st):this.log_("Buffering put: "+tt)}sendPut_(_e){const tt=this.outstandingPuts_[_e].action,nt=this.outstandingPuts_[_e].request,rt=this.outstandingPuts_[_e].onComplete;this.outstandingPuts_[_e].queued=this.connected_,this.sendRequest(tt,nt,it=>{this.log_(tt+" response",it),delete this.outstandingPuts_[_e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),rt&&rt(it.s,it.d)})}reportStats(_e){if(this.connected_){const tt={c:_e};this.log_("reportStats",tt),this.sendRequest("s",tt,nt=>{if(nt.s!=="ok"){const it=nt.d;this.log_("reportStats","Error sending stats: "+it)}})}}onDataMessage_(_e){if("r"in _e){this.log_("from server: "+stringify(_e));const tt=_e.r,nt=this.requestCBHash_[tt];nt&&(delete this.requestCBHash_[tt],nt(_e.b))}else{if("error"in _e)throw"A server-side error has occurred: "+_e.error;"a"in _e&&this.onDataPush_(_e.a,_e.b)}}onDataPush_(_e,tt){this.log_("handleServerMessage",_e,tt),_e==="d"?this.onDataUpdate_(tt.p,tt.d,!1,tt.t):_e==="m"?this.onDataUpdate_(tt.p,tt.d,!0,tt.t):_e==="c"?this.onListenRevoked_(tt.p,tt.q):_e==="ac"?this.onAuthRevoked_(tt.s,tt.d):_e==="apc"?this.onAppCheckRevoked_(tt.s,tt.d):_e==="sd"?this.onSecurityDebugPacket_(tt):error$1("Unrecognized action received from server: "+stringify(_e)+`
Are you using the latest client?`)}onReady_(_e,tt){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(_e),this.lastSessionId=tt,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(_e){assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(_e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(_e){_e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0)),this.visible_=_e}onOnline_(_e){_e?(this.log_("Browser went online."),this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>RECONNECT_DELAY_RESET_TIMEOUT&&(this.reconnectDelay_=RECONNECT_MIN_DELAY),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const _e=new Date().getTime()-this.lastConnectionAttemptTime_;let tt=Math.max(0,this.reconnectDelay_-_e);tt=Math.random()*tt,this.log_("Trying to reconnect in "+tt+"ms"),this.scheduleConnect_(tt),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*RECONNECT_DELAY_MULTIPLIER)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const _e=this.onDataMessage_.bind(this),tt=this.onReady_.bind(this),nt=this.onRealtimeDisconnect_.bind(this),rt=this.id+":"+PersistentConnection.nextConnectionId_++,it=this.lastSessionId;let ot=!1,st=null;const at=function(){st?st.close():(ot=!0,nt())},lt=function(ut){assert(st,"sendRequest call when we're not connected not allowed."),st.sendRequest(ut)};this.realtime_={close:at,sendRequest:lt};const ct=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[ut,dt]=await Promise.all([this.authTokenProvider_.getToken(ct),this.appCheckTokenProvider_.getToken(ct)]);ot?log$1("getToken() completed but was canceled"):(log$1("getToken() completed. Creating connection."),this.authToken_=ut&&ut.accessToken,this.appCheckToken_=dt&&dt.token,st=new Connection(rt,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,_e,tt,nt,ft=>{warn(ft+" ("+this.repoInfo_.toString()+")"),this.interrupt(SERVER_KILL_INTERRUPT_REASON)},it))}catch(ut){this.log_("Failed to get token: "+ut),ot||(this.repoInfo_.nodeAdmin&&warn(ut),at())}}}interrupt(_e){log$1("Interrupting connection for reason: "+_e),this.interruptReasons_[_e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(_e){log$1("Resuming connection for reason: "+_e),delete this.interruptReasons_[_e],isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(_e){const tt=_e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:tt})}cancelSentTransactions_(){for(let _e=0;_e<this.outstandingPuts_.length;_e++){const tt=this.outstandingPuts_[_e];tt&&"h"in tt.request&&tt.queued&&(tt.onComplete&&tt.onComplete("disconnect"),delete this.outstandingPuts_[_e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(_e,tt){let nt;tt?nt=tt.map(it=>ObjectToUniqueKey(it)).join("$"):nt="default";const rt=this.removeListen_(_e,nt);rt&&rt.onComplete&&rt.onComplete("permission_denied")}removeListen_(_e,tt){const nt=new Path$1(_e).toString();let rt;if(this.listens.has(nt)){const it=this.listens.get(nt);rt=it.get(tt),it.delete(tt),it.size===0&&this.listens.delete(nt)}else rt=void 0;return rt}onAuthRevoked_(_e,tt){log$1("Auth token revoked: "+_e+"/"+tt),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(_e==="invalid_token"||_e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=INVALID_TOKEN_THRESHOLD&&(this.reconnectDelay_=RECONNECT_MAX_DELAY_FOR_ADMINS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(_e,tt){log$1("App check token revoked: "+_e+"/"+tt),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(_e==="invalid_token"||_e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=INVALID_TOKEN_THRESHOLD&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(_e){this.securityDebugCallback_?this.securityDebugCallback_(_e):"msg"in _e&&console.log("FIREBASE: "+_e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const _e of this.listens.values())for(const tt of _e.values())this.sendListen_(tt);for(let _e=0;_e<this.outstandingPuts_.length;_e++)this.outstandingPuts_[_e]&&this.sendPut_(_e);for(;this.onDisconnectRequestQueue_.length;){const _e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(_e.action,_e.pathString,_e.data,_e.onComplete)}for(let _e=0;_e<this.outstandingGets_.length;_e++)this.outstandingGets_[_e]&&this.sendGet_(_e)}sendConnectStats_(){const _e={};let tt="js";_e["sdk."+tt+"."+SDK_VERSION.replace(/\./g,"-")]=1,isMobileCordova()?_e["framework.cordova"]=1:isReactNative$1()&&(_e["framework.reactnative"]=1),this.reportStats(_e)}shouldReconnect_(){const _e=OnlineMonitor.getInstance().currentlyOnline();return isEmpty(this.interruptReasons_)&&_e}}PersistentConnection.nextPersistentConnectionId_=0;PersistentConnection.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NamedNode{constructor(_e,tt){this.name=_e,this.node=tt}static Wrap(_e,tt){return new NamedNode(_e,tt)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Index{getCompare(){return this.compare.bind(this)}indexedValueChanged(_e,tt){const nt=new NamedNode(MIN_NAME,_e),rt=new NamedNode(MIN_NAME,tt);return this.compare(nt,rt)!==0}minPost(){return NamedNode.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __EMPTY_NODE;class KeyIndex extends Index{static get __EMPTY_NODE(){return __EMPTY_NODE}static set __EMPTY_NODE(_e){__EMPTY_NODE=_e}compare(_e,tt){return nameCompare(_e.name,tt.name)}isDefinedOn(_e){throw assertionError("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(_e,tt){return!1}minPost(){return NamedNode.MIN}maxPost(){return new NamedNode(MAX_NAME,__EMPTY_NODE)}makePost(_e,tt){return assert(typeof _e=="string","KeyIndex indexValue must always be a string."),new NamedNode(_e,__EMPTY_NODE)}toString(){return".key"}}const KEY_INDEX=new KeyIndex;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMapIterator{constructor(_e,tt,nt,rt,it=null){this.isReverse_=rt,this.resultGenerator_=it,this.nodeStack_=[];let ot=1;for(;!_e.isEmpty();)if(_e=_e,ot=tt?nt(_e.key,tt):1,rt&&(ot*=-1),ot<0)this.isReverse_?_e=_e.left:_e=_e.right;else if(ot===0){this.nodeStack_.push(_e);break}else this.nodeStack_.push(_e),this.isReverse_?_e=_e.right:_e=_e.left}getNext(){if(this.nodeStack_.length===0)return null;let _e=this.nodeStack_.pop(),tt;if(this.resultGenerator_?tt=this.resultGenerator_(_e.key,_e.value):tt={key:_e.key,value:_e.value},this.isReverse_)for(_e=_e.left;!_e.isEmpty();)this.nodeStack_.push(_e),_e=_e.right;else for(_e=_e.right;!_e.isEmpty();)this.nodeStack_.push(_e),_e=_e.left;return tt}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const _e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(_e.key,_e.value):{key:_e.key,value:_e.value}}}class LLRBNode{constructor(_e,tt,nt,rt,it){this.key=_e,this.value=tt,this.color=nt??LLRBNode.RED,this.left=rt??SortedMap.EMPTY_NODE,this.right=it??SortedMap.EMPTY_NODE}copy(_e,tt,nt,rt,it){return new LLRBNode(_e??this.key,tt??this.value,nt??this.color,rt??this.left,it??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(_e){return this.left.inorderTraversal(_e)||!!_e(this.key,this.value)||this.right.inorderTraversal(_e)}reverseTraversal(_e){return this.right.reverseTraversal(_e)||_e(this.key,this.value)||this.left.reverseTraversal(_e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(_e,tt,nt){let rt=this;const it=nt(_e,rt.key);return it<0?rt=rt.copy(null,null,null,rt.left.insert(_e,tt,nt),null):it===0?rt=rt.copy(null,tt,null,null,null):rt=rt.copy(null,null,null,null,rt.right.insert(_e,tt,nt)),rt.fixUp_()}removeMin_(){if(this.left.isEmpty())return SortedMap.EMPTY_NODE;let _e=this;return!_e.left.isRed_()&&!_e.left.left.isRed_()&&(_e=_e.moveRedLeft_()),_e=_e.copy(null,null,null,_e.left.removeMin_(),null),_e.fixUp_()}remove(_e,tt){let nt,rt;if(nt=this,tt(_e,nt.key)<0)!nt.left.isEmpty()&&!nt.left.isRed_()&&!nt.left.left.isRed_()&&(nt=nt.moveRedLeft_()),nt=nt.copy(null,null,null,nt.left.remove(_e,tt),null);else{if(nt.left.isRed_()&&(nt=nt.rotateRight_()),!nt.right.isEmpty()&&!nt.right.isRed_()&&!nt.right.left.isRed_()&&(nt=nt.moveRedRight_()),tt(_e,nt.key)===0){if(nt.right.isEmpty())return SortedMap.EMPTY_NODE;rt=nt.right.min_(),nt=nt.copy(rt.key,rt.value,null,null,nt.right.removeMin_())}nt=nt.copy(null,null,null,null,nt.right.remove(_e,tt))}return nt.fixUp_()}isRed_(){return this.color}fixUp_(){let _e=this;return _e.right.isRed_()&&!_e.left.isRed_()&&(_e=_e.rotateLeft_()),_e.left.isRed_()&&_e.left.left.isRed_()&&(_e=_e.rotateRight_()),_e.left.isRed_()&&_e.right.isRed_()&&(_e=_e.colorFlip_()),_e}moveRedLeft_(){let _e=this.colorFlip_();return _e.right.left.isRed_()&&(_e=_e.copy(null,null,null,null,_e.right.rotateRight_()),_e=_e.rotateLeft_(),_e=_e.colorFlip_()),_e}moveRedRight_(){let _e=this.colorFlip_();return _e.left.left.isRed_()&&(_e=_e.rotateRight_(),_e=_e.colorFlip_()),_e}rotateLeft_(){const _e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,_e,null)}rotateRight_(){const _e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,_e)}colorFlip_(){const _e=this.left.copy(null,null,!this.left.color,null,null),tt=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,_e,tt)}checkMaxDepth_(){const _e=this.check_();return Math.pow(2,_e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const _e=this.left.check_();if(_e!==this.right.check_())throw new Error("Black depths differ");return _e+(this.isRed_()?0:1)}}LLRBNode.RED=!0;LLRBNode.BLACK=!1;class LLRBEmptyNode{copy(_e,tt,nt,rt,it){return this}insert(_e,tt,nt){return new LLRBNode(_e,tt,null)}remove(_e,tt){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(_e){return!1}reverseTraversal(_e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class SortedMap{constructor(_e,tt=SortedMap.EMPTY_NODE){this.comparator_=_e,this.root_=tt}insert(_e,tt){return new SortedMap(this.comparator_,this.root_.insert(_e,tt,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))}remove(_e){return new SortedMap(this.comparator_,this.root_.remove(_e,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))}get(_e){let tt,nt=this.root_;for(;!nt.isEmpty();){if(tt=this.comparator_(_e,nt.key),tt===0)return nt.value;tt<0?nt=nt.left:tt>0&&(nt=nt.right)}return null}getPredecessorKey(_e){let tt,nt=this.root_,rt=null;for(;!nt.isEmpty();)if(tt=this.comparator_(_e,nt.key),tt===0){if(nt.left.isEmpty())return rt?rt.key:null;for(nt=nt.left;!nt.right.isEmpty();)nt=nt.right;return nt.key}else tt<0?nt=nt.left:tt>0&&(rt=nt,nt=nt.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(_e){return this.root_.inorderTraversal(_e)}reverseTraversal(_e){return this.root_.reverseTraversal(_e)}getIterator(_e){return new SortedMapIterator(this.root_,null,this.comparator_,!1,_e)}getIteratorFrom(_e,tt){return new SortedMapIterator(this.root_,_e,this.comparator_,!1,tt)}getReverseIteratorFrom(_e,tt){return new SortedMapIterator(this.root_,_e,this.comparator_,!0,tt)}getReverseIterator(_e){return new SortedMapIterator(this.root_,null,this.comparator_,!0,_e)}}SortedMap.EMPTY_NODE=new LLRBEmptyNode;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NAME_ONLY_COMPARATOR(et,_e){return nameCompare(et.name,_e.name)}function NAME_COMPARATOR(et,_e){return nameCompare(et,_e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MAX_NODE$2;function setMaxNode$1(et){MAX_NODE$2=et}const priorityHashText=function(et){return typeof et=="number"?"number:"+doubleToIEEE754String(et):"string:"+et},validatePriorityNode=function(et){if(et.isLeafNode()){const _e=et.val();assert(typeof _e=="string"||typeof _e=="number"||typeof _e=="object"&&contains$2(_e,".sv"),"Priority must be a string or number.")}else assert(et===MAX_NODE$2||et.isEmpty(),"priority of unexpected type.");assert(et===MAX_NODE$2||et.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __childrenNodeConstructor;class LeafNode{constructor(_e,tt=LeafNode.__childrenNodeConstructor.EMPTY_NODE){this.value_=_e,this.priorityNode_=tt,this.lazyHash_=null,assert(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),validatePriorityNode(this.priorityNode_)}static set __childrenNodeConstructor(_e){__childrenNodeConstructor=_e}static get __childrenNodeConstructor(){return __childrenNodeConstructor}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(_e){return new LeafNode(this.value_,_e)}getImmediateChild(_e){return _e===".priority"?this.priorityNode_:LeafNode.__childrenNodeConstructor.EMPTY_NODE}getChild(_e){return pathIsEmpty(_e)?this:pathGetFront(_e)===".priority"?this.priorityNode_:LeafNode.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(_e,tt){return null}updateImmediateChild(_e,tt){return _e===".priority"?this.updatePriority(tt):tt.isEmpty()&&_e!==".priority"?this:LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(_e,tt).updatePriority(this.priorityNode_)}updateChild(_e,tt){const nt=pathGetFront(_e);return nt===null?tt:tt.isEmpty()&&nt!==".priority"?this:(assert(nt!==".priority"||pathGetLength(_e)===1,".priority must be the last token in a path"),this.updateImmediateChild(nt,LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateChild(pathPopFront(_e),tt)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(_e,tt){return!1}val(_e){return _e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let _e="";this.priorityNode_.isEmpty()||(_e+="priority:"+priorityHashText(this.priorityNode_.val())+":");const tt=typeof this.value_;_e+=tt+":",tt==="number"?_e+=doubleToIEEE754String(this.value_):_e+=this.value_,this.lazyHash_=sha1(_e)}return this.lazyHash_}getValue(){return this.value_}compareTo(_e){return _e===LeafNode.__childrenNodeConstructor.EMPTY_NODE?1:_e instanceof LeafNode.__childrenNodeConstructor?-1:(assert(_e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(_e))}compareToLeafNode_(_e){const tt=typeof _e.value_,nt=typeof this.value_,rt=LeafNode.VALUE_TYPE_ORDER.indexOf(tt),it=LeafNode.VALUE_TYPE_ORDER.indexOf(nt);return assert(rt>=0,"Unknown leaf type: "+tt),assert(it>=0,"Unknown leaf type: "+nt),rt===it?nt==="object"?0:this.value_<_e.value_?-1:this.value_===_e.value_?0:1:it-rt}withIndex(){return this}isIndexed(){return!0}equals(_e){if(_e===this)return!0;if(_e.isLeafNode()){const tt=_e;return this.value_===tt.value_&&this.priorityNode_.equals(tt.priorityNode_)}else return!1}}LeafNode.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nodeFromJSON$1,MAX_NODE$1;function setNodeFromJSON(et){nodeFromJSON$1=et}function setMaxNode(et){MAX_NODE$1=et}class PriorityIndex extends Index{compare(_e,tt){const nt=_e.node.getPriority(),rt=tt.node.getPriority(),it=nt.compareTo(rt);return it===0?nameCompare(_e.name,tt.name):it}isDefinedOn(_e){return!_e.getPriority().isEmpty()}indexedValueChanged(_e,tt){return!_e.getPriority().equals(tt.getPriority())}minPost(){return NamedNode.MIN}maxPost(){return new NamedNode(MAX_NAME,new LeafNode("[PRIORITY-POST]",MAX_NODE$1))}makePost(_e,tt){const nt=nodeFromJSON$1(_e);return new NamedNode(tt,new LeafNode("[PRIORITY-POST]",nt))}toString(){return".priority"}}const PRIORITY_INDEX=new PriorityIndex;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LOG_2=Math.log(2);class Base12Num{constructor(_e){const tt=it=>parseInt(Math.log(it)/LOG_2,10),nt=it=>parseInt(Array(it+1).join("1"),2);this.count=tt(_e+1),this.current_=this.count-1;const rt=nt(this.count);this.bits_=_e+1&rt}nextBitIsOne(){const _e=!(this.bits_&1<<this.current_);return this.current_--,_e}}const buildChildSet=function(et,_e,tt,nt){et.sort(_e);const rt=function(at,lt){const ct=lt-at;let ut,dt;if(ct===0)return null;if(ct===1)return ut=et[at],dt=tt?tt(ut):ut,new LLRBNode(dt,ut.node,LLRBNode.BLACK,null,null);{const ft=parseInt(ct/2,10)+at,pt=rt(at,ft),mt=rt(ft+1,lt);return ut=et[ft],dt=tt?tt(ut):ut,new LLRBNode(dt,ut.node,LLRBNode.BLACK,pt,mt)}},it=function(at){let lt=null,ct=null,ut=et.length;const dt=function(pt,mt){const xt=ut-pt,gt=ut;ut-=pt;const ht=rt(xt+1,gt),yt=et[xt],vt=tt?tt(yt):yt;ft(new LLRBNode(vt,yt.node,mt,null,ht))},ft=function(pt){lt?(lt.left=pt,lt=pt):(ct=pt,lt=pt)};for(let pt=0;pt<at.count;++pt){const mt=at.nextBitIsOne(),xt=Math.pow(2,at.count-(pt+1));mt?dt(xt,LLRBNode.BLACK):(dt(xt,LLRBNode.BLACK),dt(xt,LLRBNode.RED))}return ct},ot=new Base12Num(et.length),st=it(ot);return new SortedMap(nt||_e,st)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _defaultIndexMap;const fallbackObject={};class IndexMap{constructor(_e,tt){this.indexes_=_e,this.indexSet_=tt}static get Default(){return assert(fallbackObject&&PRIORITY_INDEX,"ChildrenNode.ts has not been loaded"),_defaultIndexMap=_defaultIndexMap||new IndexMap({".priority":fallbackObject},{".priority":PRIORITY_INDEX}),_defaultIndexMap}get(_e){const tt=safeGet(this.indexes_,_e);if(!tt)throw new Error("No index defined for "+_e);return tt instanceof SortedMap?tt:null}hasIndex(_e){return contains$2(this.indexSet_,_e.toString())}addIndex(_e,tt){assert(_e!==KEY_INDEX,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const nt=[];let rt=!1;const it=tt.getIterator(NamedNode.Wrap);let ot=it.getNext();for(;ot;)rt=rt||_e.isDefinedOn(ot.node),nt.push(ot),ot=it.getNext();let st;rt?st=buildChildSet(nt,_e.getCompare()):st=fallbackObject;const at=_e.toString(),lt=Object.assign({},this.indexSet_);lt[at]=_e;const ct=Object.assign({},this.indexes_);return ct[at]=st,new IndexMap(ct,lt)}addToIndexes(_e,tt){const nt=map$1(this.indexes_,(rt,it)=>{const ot=safeGet(this.indexSet_,it);if(assert(ot,"Missing index implementation for "+it),rt===fallbackObject)if(ot.isDefinedOn(_e.node)){const st=[],at=tt.getIterator(NamedNode.Wrap);let lt=at.getNext();for(;lt;)lt.name!==_e.name&&st.push(lt),lt=at.getNext();return st.push(_e),buildChildSet(st,ot.getCompare())}else return fallbackObject;else{const st=tt.get(_e.name);let at=rt;return st&&(at=at.remove(new NamedNode(_e.name,st))),at.insert(_e,_e.node)}});return new IndexMap(nt,this.indexSet_)}removeFromIndexes(_e,tt){const nt=map$1(this.indexes_,rt=>{if(rt===fallbackObject)return rt;{const it=tt.get(_e.name);return it?rt.remove(new NamedNode(_e.name,it)):rt}});return new IndexMap(nt,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EMPTY_NODE;class ChildrenNode{constructor(_e,tt,nt){this.children_=_e,this.priorityNode_=tt,this.indexMap_=nt,this.lazyHash_=null,this.priorityNode_&&validatePriorityNode(this.priorityNode_),this.children_.isEmpty()&&assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return EMPTY_NODE||(EMPTY_NODE=new ChildrenNode(new SortedMap(NAME_COMPARATOR),null,IndexMap.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||EMPTY_NODE}updatePriority(_e){return this.children_.isEmpty()?this:new ChildrenNode(this.children_,_e,this.indexMap_)}getImmediateChild(_e){if(_e===".priority")return this.getPriority();{const tt=this.children_.get(_e);return tt===null?EMPTY_NODE:tt}}getChild(_e){const tt=pathGetFront(_e);return tt===null?this:this.getImmediateChild(tt).getChild(pathPopFront(_e))}hasChild(_e){return this.children_.get(_e)!==null}updateImmediateChild(_e,tt){if(assert(tt,"We should always be passing snapshot nodes"),_e===".priority")return this.updatePriority(tt);{const nt=new NamedNode(_e,tt);let rt,it;tt.isEmpty()?(rt=this.children_.remove(_e),it=this.indexMap_.removeFromIndexes(nt,this.children_)):(rt=this.children_.insert(_e,tt),it=this.indexMap_.addToIndexes(nt,this.children_));const ot=rt.isEmpty()?EMPTY_NODE:this.priorityNode_;return new ChildrenNode(rt,ot,it)}}updateChild(_e,tt){const nt=pathGetFront(_e);if(nt===null)return tt;{assert(pathGetFront(_e)!==".priority"||pathGetLength(_e)===1,".priority must be the last token in a path");const rt=this.getImmediateChild(nt).updateChild(pathPopFront(_e),tt);return this.updateImmediateChild(nt,rt)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(_e){if(this.isEmpty())return null;const tt={};let nt=0,rt=0,it=!0;if(this.forEachChild(PRIORITY_INDEX,(ot,st)=>{tt[ot]=st.val(_e),nt++,it&&ChildrenNode.INTEGER_REGEXP_.test(ot)?rt=Math.max(rt,Number(ot)):it=!1}),!_e&&it&&rt<2*nt){const ot=[];for(const st in tt)ot[st]=tt[st];return ot}else return _e&&!this.getPriority().isEmpty()&&(tt[".priority"]=this.getPriority().val()),tt}hash(){if(this.lazyHash_===null){let _e="";this.getPriority().isEmpty()||(_e+="priority:"+priorityHashText(this.getPriority().val())+":"),this.forEachChild(PRIORITY_INDEX,(tt,nt)=>{const rt=nt.hash();rt!==""&&(_e+=":"+tt+":"+rt)}),this.lazyHash_=_e===""?"":sha1(_e)}return this.lazyHash_}getPredecessorChildName(_e,tt,nt){const rt=this.resolveIndex_(nt);if(rt){const it=rt.getPredecessorKey(new NamedNode(_e,tt));return it?it.name:null}else return this.children_.getPredecessorKey(_e)}getFirstChildName(_e){const tt=this.resolveIndex_(_e);if(tt){const nt=tt.minKey();return nt&&nt.name}else return this.children_.minKey()}getFirstChild(_e){const tt=this.getFirstChildName(_e);return tt?new NamedNode(tt,this.children_.get(tt)):null}getLastChildName(_e){const tt=this.resolveIndex_(_e);if(tt){const nt=tt.maxKey();return nt&&nt.name}else return this.children_.maxKey()}getLastChild(_e){const tt=this.getLastChildName(_e);return tt?new NamedNode(tt,this.children_.get(tt)):null}forEachChild(_e,tt){const nt=this.resolveIndex_(_e);return nt?nt.inorderTraversal(rt=>tt(rt.name,rt.node)):this.children_.inorderTraversal(tt)}getIterator(_e){return this.getIteratorFrom(_e.minPost(),_e)}getIteratorFrom(_e,tt){const nt=this.resolveIndex_(tt);if(nt)return nt.getIteratorFrom(_e,rt=>rt);{const rt=this.children_.getIteratorFrom(_e.name,NamedNode.Wrap);let it=rt.peek();for(;it!=null&&tt.compare(it,_e)<0;)rt.getNext(),it=rt.peek();return rt}}getReverseIterator(_e){return this.getReverseIteratorFrom(_e.maxPost(),_e)}getReverseIteratorFrom(_e,tt){const nt=this.resolveIndex_(tt);if(nt)return nt.getReverseIteratorFrom(_e,rt=>rt);{const rt=this.children_.getReverseIteratorFrom(_e.name,NamedNode.Wrap);let it=rt.peek();for(;it!=null&&tt.compare(it,_e)>0;)rt.getNext(),it=rt.peek();return rt}}compareTo(_e){return this.isEmpty()?_e.isEmpty()?0:-1:_e.isLeafNode()||_e.isEmpty()?1:_e===MAX_NODE?-1:0}withIndex(_e){if(_e===KEY_INDEX||this.indexMap_.hasIndex(_e))return this;{const tt=this.indexMap_.addIndex(_e,this.children_);return new ChildrenNode(this.children_,this.priorityNode_,tt)}}isIndexed(_e){return _e===KEY_INDEX||this.indexMap_.hasIndex(_e)}equals(_e){if(_e===this)return!0;if(_e.isLeafNode())return!1;{const tt=_e;if(this.getPriority().equals(tt.getPriority()))if(this.children_.count()===tt.children_.count()){const nt=this.getIterator(PRIORITY_INDEX),rt=tt.getIterator(PRIORITY_INDEX);let it=nt.getNext(),ot=rt.getNext();for(;it&&ot;){if(it.name!==ot.name||!it.node.equals(ot.node))return!1;it=nt.getNext(),ot=rt.getNext()}return it===null&&ot===null}else return!1;else return!1}}resolveIndex_(_e){return _e===KEY_INDEX?null:this.indexMap_.get(_e.toString())}}ChildrenNode.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class MaxNode extends ChildrenNode{constructor(){super(new SortedMap(NAME_COMPARATOR),ChildrenNode.EMPTY_NODE,IndexMap.Default)}compareTo(_e){return _e===this?0:1}equals(_e){return _e===this}getPriority(){return this}getImmediateChild(_e){return ChildrenNode.EMPTY_NODE}isEmpty(){return!1}}const MAX_NODE=new MaxNode;Object.defineProperties(NamedNode,{MIN:{value:new NamedNode(MIN_NAME,ChildrenNode.EMPTY_NODE)},MAX:{value:new NamedNode(MAX_NAME,MAX_NODE)}});KeyIndex.__EMPTY_NODE=ChildrenNode.EMPTY_NODE;LeafNode.__childrenNodeConstructor=ChildrenNode;setMaxNode$1(MAX_NODE);setMaxNode(MAX_NODE);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const USE_HINZE=!0;function nodeFromJSON(et,_e=null){if(et===null)return ChildrenNode.EMPTY_NODE;if(typeof et=="object"&&".priority"in et&&(_e=et[".priority"]),assert(_e===null||typeof _e=="string"||typeof _e=="number"||typeof _e=="object"&&".sv"in _e,"Invalid priority type found: "+typeof _e),typeof et=="object"&&".value"in et&&et[".value"]!==null&&(et=et[".value"]),typeof et!="object"||".sv"in et){const tt=et;return new LeafNode(tt,nodeFromJSON(_e))}if(!(et instanceof Array)&&USE_HINZE){const tt=[];let nt=!1;if(each(et,(ot,st)=>{if(ot.substring(0,1)!=="."){const at=nodeFromJSON(st);at.isEmpty()||(nt=nt||!at.getPriority().isEmpty(),tt.push(new NamedNode(ot,at)))}}),tt.length===0)return ChildrenNode.EMPTY_NODE;const it=buildChildSet(tt,NAME_ONLY_COMPARATOR,ot=>ot.name,NAME_COMPARATOR);if(nt){const ot=buildChildSet(tt,PRIORITY_INDEX.getCompare());return new ChildrenNode(it,nodeFromJSON(_e),new IndexMap({".priority":ot},{".priority":PRIORITY_INDEX}))}else return new ChildrenNode(it,nodeFromJSON(_e),IndexMap.Default)}else{let tt=ChildrenNode.EMPTY_NODE;return each(et,(nt,rt)=>{if(contains$2(et,nt)&&nt.substring(0,1)!=="."){const it=nodeFromJSON(rt);(it.isLeafNode()||!it.isEmpty())&&(tt=tt.updateImmediateChild(nt,it))}}),tt.updatePriority(nodeFromJSON(_e))}}setNodeFromJSON(nodeFromJSON);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PathIndex extends Index{constructor(_e){super(),this.indexPath_=_e,assert(!pathIsEmpty(_e)&&pathGetFront(_e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(_e){return _e.getChild(this.indexPath_)}isDefinedOn(_e){return!_e.getChild(this.indexPath_).isEmpty()}compare(_e,tt){const nt=this.extractChild(_e.node),rt=this.extractChild(tt.node),it=nt.compareTo(rt);return it===0?nameCompare(_e.name,tt.name):it}makePost(_e,tt){const nt=nodeFromJSON(_e),rt=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,nt);return new NamedNode(tt,rt)}maxPost(){const _e=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,MAX_NODE);return new NamedNode(MAX_NAME,_e)}toString(){return pathSlice(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ValueIndex extends Index{compare(_e,tt){const nt=_e.node.compareTo(tt.node);return nt===0?nameCompare(_e.name,tt.name):nt}isDefinedOn(_e){return!0}indexedValueChanged(_e,tt){return!_e.equals(tt)}minPost(){return NamedNode.MIN}maxPost(){return NamedNode.MAX}makePost(_e,tt){const nt=nodeFromJSON(_e);return new NamedNode(tt,nt)}toString(){return".value"}}const VALUE_INDEX=new ValueIndex;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function changeValue(et){return{type:"value",snapshotNode:et}}function changeChildAdded(et,_e){return{type:"child_added",snapshotNode:_e,childName:et}}function changeChildRemoved(et,_e){return{type:"child_removed",snapshotNode:_e,childName:et}}function changeChildChanged(et,_e,tt){return{type:"child_changed",snapshotNode:_e,childName:et,oldSnap:tt}}function changeChildMoved(et,_e){return{type:"child_moved",snapshotNode:_e,childName:et}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IndexedFilter{constructor(_e){this.index_=_e}updateChild(_e,tt,nt,rt,it,ot){assert(_e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const st=_e.getImmediateChild(tt);return st.getChild(rt).equals(nt.getChild(rt))&&st.isEmpty()===nt.isEmpty()||(ot!=null&&(nt.isEmpty()?_e.hasChild(tt)?ot.trackChildChange(changeChildRemoved(tt,st)):assert(_e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):st.isEmpty()?ot.trackChildChange(changeChildAdded(tt,nt)):ot.trackChildChange(changeChildChanged(tt,nt,st))),_e.isLeafNode()&&nt.isEmpty())?_e:_e.updateImmediateChild(tt,nt).withIndex(this.index_)}updateFullNode(_e,tt,nt){return nt!=null&&(_e.isLeafNode()||_e.forEachChild(PRIORITY_INDEX,(rt,it)=>{tt.hasChild(rt)||nt.trackChildChange(changeChildRemoved(rt,it))}),tt.isLeafNode()||tt.forEachChild(PRIORITY_INDEX,(rt,it)=>{if(_e.hasChild(rt)){const ot=_e.getImmediateChild(rt);ot.equals(it)||nt.trackChildChange(changeChildChanged(rt,it,ot))}else nt.trackChildChange(changeChildAdded(rt,it))})),tt.withIndex(this.index_)}updatePriority(_e,tt){return _e.isEmpty()?ChildrenNode.EMPTY_NODE:_e.updatePriority(tt)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RangedFilter{constructor(_e){this.indexedFilter_=new IndexedFilter(_e.getIndex()),this.index_=_e.getIndex(),this.startPost_=RangedFilter.getStartPost_(_e),this.endPost_=RangedFilter.getEndPost_(_e),this.startIsInclusive_=!_e.startAfterSet_,this.endIsInclusive_=!_e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(_e){const tt=this.startIsInclusive_?this.index_.compare(this.getStartPost(),_e)<=0:this.index_.compare(this.getStartPost(),_e)<0,nt=this.endIsInclusive_?this.index_.compare(_e,this.getEndPost())<=0:this.index_.compare(_e,this.getEndPost())<0;return tt&&nt}updateChild(_e,tt,nt,rt,it,ot){return this.matches(new NamedNode(tt,nt))||(nt=ChildrenNode.EMPTY_NODE),this.indexedFilter_.updateChild(_e,tt,nt,rt,it,ot)}updateFullNode(_e,tt,nt){tt.isLeafNode()&&(tt=ChildrenNode.EMPTY_NODE);let rt=tt.withIndex(this.index_);rt=rt.updatePriority(ChildrenNode.EMPTY_NODE);const it=this;return tt.forEachChild(PRIORITY_INDEX,(ot,st)=>{it.matches(new NamedNode(ot,st))||(rt=rt.updateImmediateChild(ot,ChildrenNode.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(_e,rt,nt)}updatePriority(_e,tt){return _e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(_e){if(_e.hasStart()){const tt=_e.getIndexStartName();return _e.getIndex().makePost(_e.getIndexStartValue(),tt)}else return _e.getIndex().minPost()}static getEndPost_(_e){if(_e.hasEnd()){const tt=_e.getIndexEndName();return _e.getIndex().makePost(_e.getIndexEndValue(),tt)}else return _e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LimitedFilter{constructor(_e){this.withinDirectionalStart=tt=>this.reverse_?this.withinEndPost(tt):this.withinStartPost(tt),this.withinDirectionalEnd=tt=>this.reverse_?this.withinStartPost(tt):this.withinEndPost(tt),this.withinStartPost=tt=>{const nt=this.index_.compare(this.rangedFilter_.getStartPost(),tt);return this.startIsInclusive_?nt<=0:nt<0},this.withinEndPost=tt=>{const nt=this.index_.compare(tt,this.rangedFilter_.getEndPost());return this.endIsInclusive_?nt<=0:nt<0},this.rangedFilter_=new RangedFilter(_e),this.index_=_e.getIndex(),this.limit_=_e.getLimit(),this.reverse_=!_e.isViewFromLeft(),this.startIsInclusive_=!_e.startAfterSet_,this.endIsInclusive_=!_e.endBeforeSet_}updateChild(_e,tt,nt,rt,it,ot){return this.rangedFilter_.matches(new NamedNode(tt,nt))||(nt=ChildrenNode.EMPTY_NODE),_e.getImmediateChild(tt).equals(nt)?_e:_e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(_e,tt,nt,rt,it,ot):this.fullLimitUpdateChild_(_e,tt,nt,it,ot)}updateFullNode(_e,tt,nt){let rt;if(tt.isLeafNode()||tt.isEmpty())rt=ChildrenNode.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<tt.numChildren()&&tt.isIndexed(this.index_)){rt=ChildrenNode.EMPTY_NODE.withIndex(this.index_);let it;this.reverse_?it=tt.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):it=tt.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let ot=0;for(;it.hasNext()&&ot<this.limit_;){const st=it.getNext();if(this.withinDirectionalStart(st))if(this.withinDirectionalEnd(st))rt=rt.updateImmediateChild(st.name,st.node),ot++;else break;else continue}}else{rt=tt.withIndex(this.index_),rt=rt.updatePriority(ChildrenNode.EMPTY_NODE);let it;this.reverse_?it=rt.getReverseIterator(this.index_):it=rt.getIterator(this.index_);let ot=0;for(;it.hasNext();){const st=it.getNext();ot<this.limit_&&this.withinDirectionalStart(st)&&this.withinDirectionalEnd(st)?ot++:rt=rt.updateImmediateChild(st.name,ChildrenNode.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(_e,rt,nt)}updatePriority(_e,tt){return _e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(_e,tt,nt,rt,it){let ot;if(this.reverse_){const ut=this.index_.getCompare();ot=(dt,ft)=>ut(ft,dt)}else ot=this.index_.getCompare();const st=_e;assert(st.numChildren()===this.limit_,"");const at=new NamedNode(tt,nt),lt=this.reverse_?st.getFirstChild(this.index_):st.getLastChild(this.index_),ct=this.rangedFilter_.matches(at);if(st.hasChild(tt)){const ut=st.getImmediateChild(tt);let dt=rt.getChildAfterChild(this.index_,lt,this.reverse_);for(;dt!=null&&(dt.name===tt||st.hasChild(dt.name));)dt=rt.getChildAfterChild(this.index_,dt,this.reverse_);const ft=dt==null?1:ot(dt,at);if(ct&&!nt.isEmpty()&&ft>=0)return it!=null&&it.trackChildChange(changeChildChanged(tt,nt,ut)),st.updateImmediateChild(tt,nt);{it!=null&&it.trackChildChange(changeChildRemoved(tt,ut));const mt=st.updateImmediateChild(tt,ChildrenNode.EMPTY_NODE);return dt!=null&&this.rangedFilter_.matches(dt)?(it!=null&&it.trackChildChange(changeChildAdded(dt.name,dt.node)),mt.updateImmediateChild(dt.name,dt.node)):mt}}else return nt.isEmpty()?_e:ct&&ot(lt,at)>=0?(it!=null&&(it.trackChildChange(changeChildRemoved(lt.name,lt.node)),it.trackChildChange(changeChildAdded(tt,nt))),st.updateImmediateChild(tt,nt).updateImmediateChild(lt.name,ChildrenNode.EMPTY_NODE)):_e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryParams{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=PRIORITY_INDEX}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:MIN_NAME}hasEnd(){return this.endSet_}getIndexEndValue(){return assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:MAX_NAME}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return assert(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===PRIORITY_INDEX}copy(){const _e=new QueryParams;return _e.limitSet_=this.limitSet_,_e.limit_=this.limit_,_e.startSet_=this.startSet_,_e.startAfterSet_=this.startAfterSet_,_e.indexStartValue_=this.indexStartValue_,_e.startNameSet_=this.startNameSet_,_e.indexStartName_=this.indexStartName_,_e.endSet_=this.endSet_,_e.endBeforeSet_=this.endBeforeSet_,_e.indexEndValue_=this.indexEndValue_,_e.endNameSet_=this.endNameSet_,_e.indexEndName_=this.indexEndName_,_e.index_=this.index_,_e.viewFrom_=this.viewFrom_,_e}}function queryParamsGetNodeFilter(et){return et.loadsAllData()?new IndexedFilter(et.getIndex()):et.hasLimit()?new LimitedFilter(et):new RangedFilter(et)}function queryParamsToRestQueryStringParameters(et){const _e={};if(et.isDefault())return _e;let tt;if(et.index_===PRIORITY_INDEX?tt="$priority":et.index_===VALUE_INDEX?tt="$value":et.index_===KEY_INDEX?tt="$key":(assert(et.index_ instanceof PathIndex,"Unrecognized index type!"),tt=et.index_.toString()),_e.orderBy=stringify(tt),et.startSet_){const nt=et.startAfterSet_?"startAfter":"startAt";_e[nt]=stringify(et.indexStartValue_),et.startNameSet_&&(_e[nt]+=","+stringify(et.indexStartName_))}if(et.endSet_){const nt=et.endBeforeSet_?"endBefore":"endAt";_e[nt]=stringify(et.indexEndValue_),et.endNameSet_&&(_e[nt]+=","+stringify(et.indexEndName_))}return et.limitSet_&&(et.isViewFromLeft()?_e.limitToFirst=et.limit_:_e.limitToLast=et.limit_),_e}function queryParamsGetQueryObject(et){const _e={};if(et.startSet_&&(_e.sp=et.indexStartValue_,et.startNameSet_&&(_e.sn=et.indexStartName_),_e.sin=!et.startAfterSet_),et.endSet_&&(_e.ep=et.indexEndValue_,et.endNameSet_&&(_e.en=et.indexEndName_),_e.ein=!et.endBeforeSet_),et.limitSet_){_e.l=et.limit_;let tt=et.viewFrom_;tt===""&&(et.isViewFromLeft()?tt="l":tt="r"),_e.vf=tt}return et.index_!==PRIORITY_INDEX&&(_e.i=et.index_.toString()),_e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ReadonlyRestClient extends ServerActions{constructor(_e,tt,nt,rt){super(),this.repoInfo_=_e,this.onDataUpdate_=tt,this.authTokenProvider_=nt,this.appCheckTokenProvider_=rt,this.log_=logWrapper("p:rest:"),this.listens_={}}reportStats(_e){throw new Error("Method not implemented.")}static getListenId_(_e,tt){return tt!==void 0?"tag$"+tt:(assert(_e._queryParams.isDefault(),"should have a tag if it's not a default query."),_e._path.toString())}listen(_e,tt,nt,rt){const it=_e._path.toString();this.log_("Listen called for "+it+" "+_e._queryIdentifier);const ot=ReadonlyRestClient.getListenId_(_e,nt),st={};this.listens_[ot]=st;const at=queryParamsToRestQueryStringParameters(_e._queryParams);this.restRequest_(it+".json",at,(lt,ct)=>{let ut=ct;if(lt===404&&(ut=null,lt=null),lt===null&&this.onDataUpdate_(it,ut,!1,nt),safeGet(this.listens_,ot)===st){let dt;lt?lt===401?dt="permission_denied":dt="rest_error:"+lt:dt="ok",rt(dt,null)}})}unlisten(_e,tt){const nt=ReadonlyRestClient.getListenId_(_e,tt);delete this.listens_[nt]}get(_e){const tt=queryParamsToRestQueryStringParameters(_e._queryParams),nt=_e._path.toString(),rt=new Deferred;return this.restRequest_(nt+".json",tt,(it,ot)=>{let st=ot;it===404&&(st=null,it=null),it===null?(this.onDataUpdate_(nt,st,!1,null),rt.resolve(st)):rt.reject(new Error(st))}),rt.promise}refreshAuthToken(_e){}restRequest_(_e,tt={},nt){return tt.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([rt,it])=>{rt&&rt.accessToken&&(tt.auth=rt.accessToken),it&&it.token&&(tt.ac=it.token);const ot=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+_e+"?ns="+this.repoInfo_.namespace+querystring(tt);this.log_("Sending REST request for "+ot);const st=new XMLHttpRequest;st.onreadystatechange=()=>{if(nt&&st.readyState===4){this.log_("REST Response for "+ot+" received. status:",st.status,"response:",st.responseText);let at=null;if(st.status>=200&&st.status<300){try{at=jsonEval(st.responseText)}catch{warn("Failed to parse JSON response for "+ot+": "+st.responseText)}nt(null,at)}else st.status!==401&&st.status!==404&&warn("Got unsuccessful REST response for "+ot+" Status: "+st.status),nt(st.status);nt=null}},st.open("GET",ot,!0),st.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotHolder{constructor(){this.rootNode_=ChildrenNode.EMPTY_NODE}getNode(_e){return this.rootNode_.getChild(_e)}updateSnapshot(_e,tt){this.rootNode_=this.rootNode_.updateChild(_e,tt)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function newSparseSnapshotTree(){return{value:null,children:new Map}}function sparseSnapshotTreeRemember(et,_e,tt){if(pathIsEmpty(_e))et.value=tt,et.children.clear();else if(et.value!==null)et.value=et.value.updateChild(_e,tt);else{const nt=pathGetFront(_e);et.children.has(nt)||et.children.set(nt,newSparseSnapshotTree());const rt=et.children.get(nt);_e=pathPopFront(_e),sparseSnapshotTreeRemember(rt,_e,tt)}}function sparseSnapshotTreeForEachTree(et,_e,tt){et.value!==null?tt(_e,et.value):sparseSnapshotTreeForEachChild(et,(nt,rt)=>{const it=new Path$1(_e.toString()+"/"+nt);sparseSnapshotTreeForEachTree(rt,it,tt)})}function sparseSnapshotTreeForEachChild(et,_e){et.children.forEach((tt,nt)=>{_e(nt,tt)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StatsListener{constructor(_e){this.collection_=_e,this.last_=null}get(){const _e=this.collection_.get(),tt=Object.assign({},_e);return this.last_&&each(this.last_,(nt,rt)=>{tt[nt]=tt[nt]-rt}),this.last_=_e,tt}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FIRST_STATS_MIN_TIME=10*1e3,FIRST_STATS_MAX_TIME=30*1e3,REPORT_STATS_INTERVAL=5*60*1e3;class StatsReporter{constructor(_e,tt){this.server_=tt,this.statsToReport_={},this.statsListener_=new StatsListener(_e);const nt=FIRST_STATS_MIN_TIME+(FIRST_STATS_MAX_TIME-FIRST_STATS_MIN_TIME)*Math.random();setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(nt))}reportStats_(){const _e=this.statsListener_.get(),tt={};let nt=!1;each(_e,(rt,it)=>{it>0&&contains$2(this.statsToReport_,rt)&&(tt[rt]=it,nt=!0)}),nt&&this.server_.reportStats(tt),setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(Math.random()*2*REPORT_STATS_INTERVAL))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OperationType;(function(et){et[et.OVERWRITE=0]="OVERWRITE",et[et.MERGE=1]="MERGE",et[et.ACK_USER_WRITE=2]="ACK_USER_WRITE",et[et.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(OperationType||(OperationType={}));function newOperationSourceUser(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function newOperationSourceServer(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function newOperationSourceServerTaggedQuery(et){return{fromUser:!1,fromServer:!0,queryId:et,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AckUserWrite{constructor(_e,tt,nt){this.path=_e,this.affectedTree=tt,this.revert=nt,this.type=OperationType.ACK_USER_WRITE,this.source=newOperationSourceUser()}operationForChild(_e){if(pathIsEmpty(this.path)){if(this.affectedTree.value!=null)return assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const tt=this.affectedTree.subtree(new Path$1(_e));return new AckUserWrite(newEmptyPath(),tt,this.revert)}}else return assert(pathGetFront(this.path)===_e,"operationForChild called for unrelated child."),new AckUserWrite(pathPopFront(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ListenComplete{constructor(_e,tt){this.source=_e,this.path=tt,this.type=OperationType.LISTEN_COMPLETE}operationForChild(_e){return pathIsEmpty(this.path)?new ListenComplete(this.source,newEmptyPath()):new ListenComplete(this.source,pathPopFront(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overwrite{constructor(_e,tt,nt){this.source=_e,this.path=tt,this.snap=nt,this.type=OperationType.OVERWRITE}operationForChild(_e){return pathIsEmpty(this.path)?new Overwrite(this.source,newEmptyPath(),this.snap.getImmediateChild(_e)):new Overwrite(this.source,pathPopFront(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Merge{constructor(_e,tt,nt){this.source=_e,this.path=tt,this.children=nt,this.type=OperationType.MERGE}operationForChild(_e){if(pathIsEmpty(this.path)){const tt=this.children.subtree(new Path$1(_e));return tt.isEmpty()?null:tt.value?new Overwrite(this.source,newEmptyPath(),tt.value):new Merge(this.source,newEmptyPath(),tt)}else return assert(pathGetFront(this.path)===_e,"Can't get a merge for a child not on the path of the operation"),new Merge(this.source,pathPopFront(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CacheNode{constructor(_e,tt,nt){this.node_=_e,this.fullyInitialized_=tt,this.filtered_=nt}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(_e){if(pathIsEmpty(_e))return this.isFullyInitialized()&&!this.filtered_;const tt=pathGetFront(_e);return this.isCompleteForChild(tt)}isCompleteForChild(_e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(_e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EventGenerator{constructor(_e){this.query_=_e,this.index_=this.query_._queryParams.getIndex()}}function eventGeneratorGenerateEventsForChanges(et,_e,tt,nt){const rt=[],it=[];return _e.forEach(ot=>{ot.type==="child_changed"&&et.index_.indexedValueChanged(ot.oldSnap,ot.snapshotNode)&&it.push(changeChildMoved(ot.childName,ot.snapshotNode))}),eventGeneratorGenerateEventsForType(et,rt,"child_removed",_e,nt,tt),eventGeneratorGenerateEventsForType(et,rt,"child_added",_e,nt,tt),eventGeneratorGenerateEventsForType(et,rt,"child_moved",it,nt,tt),eventGeneratorGenerateEventsForType(et,rt,"child_changed",_e,nt,tt),eventGeneratorGenerateEventsForType(et,rt,"value",_e,nt,tt),rt}function eventGeneratorGenerateEventsForType(et,_e,tt,nt,rt,it){const ot=nt.filter(st=>st.type===tt);ot.sort((st,at)=>eventGeneratorCompareChanges(et,st,at)),ot.forEach(st=>{const at=eventGeneratorMaterializeSingleChange(et,st,it);rt.forEach(lt=>{lt.respondsTo(st.type)&&_e.push(lt.createEvent(at,et.query_))})})}function eventGeneratorMaterializeSingleChange(et,_e,tt){return _e.type==="value"||_e.type==="child_removed"||(_e.prevName=tt.getPredecessorChildName(_e.childName,_e.snapshotNode,et.index_)),_e}function eventGeneratorCompareChanges(et,_e,tt){if(_e.childName==null||tt.childName==null)throw assertionError("Should only compare child_ events.");const nt=new NamedNode(_e.childName,_e.snapshotNode),rt=new NamedNode(tt.childName,tt.snapshotNode);return et.index_.compare(nt,rt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function newViewCache(et,_e){return{eventCache:et,serverCache:_e}}function viewCacheUpdateEventSnap(et,_e,tt,nt){return newViewCache(new CacheNode(_e,tt,nt),et.serverCache)}function viewCacheUpdateServerSnap(et,_e,tt,nt){return newViewCache(et.eventCache,new CacheNode(_e,tt,nt))}function viewCacheGetCompleteEventSnap(et){return et.eventCache.isFullyInitialized()?et.eventCache.getNode():null}function viewCacheGetCompleteServerSnap(et){return et.serverCache.isFullyInitialized()?et.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let emptyChildrenSingleton;const EmptyChildren=()=>(emptyChildrenSingleton||(emptyChildrenSingleton=new SortedMap(stringCompare)),emptyChildrenSingleton);class ImmutableTree{constructor(_e,tt=EmptyChildren()){this.value=_e,this.children=tt}static fromObject(_e){let tt=new ImmutableTree(null);return each(_e,(nt,rt)=>{tt=tt.set(new Path$1(nt),rt)}),tt}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(_e,tt){if(this.value!=null&&tt(this.value))return{path:newEmptyPath(),value:this.value};if(pathIsEmpty(_e))return null;{const nt=pathGetFront(_e),rt=this.children.get(nt);if(rt!==null){const it=rt.findRootMostMatchingPathAndValue(pathPopFront(_e),tt);return it!=null?{path:pathChild(new Path$1(nt),it.path),value:it.value}:null}else return null}}findRootMostValueAndPath(_e){return this.findRootMostMatchingPathAndValue(_e,()=>!0)}subtree(_e){if(pathIsEmpty(_e))return this;{const tt=pathGetFront(_e),nt=this.children.get(tt);return nt!==null?nt.subtree(pathPopFront(_e)):new ImmutableTree(null)}}set(_e,tt){if(pathIsEmpty(_e))return new ImmutableTree(tt,this.children);{const nt=pathGetFront(_e),it=(this.children.get(nt)||new ImmutableTree(null)).set(pathPopFront(_e),tt),ot=this.children.insert(nt,it);return new ImmutableTree(this.value,ot)}}remove(_e){if(pathIsEmpty(_e))return this.children.isEmpty()?new ImmutableTree(null):new ImmutableTree(null,this.children);{const tt=pathGetFront(_e),nt=this.children.get(tt);if(nt){const rt=nt.remove(pathPopFront(_e));let it;return rt.isEmpty()?it=this.children.remove(tt):it=this.children.insert(tt,rt),this.value===null&&it.isEmpty()?new ImmutableTree(null):new ImmutableTree(this.value,it)}else return this}}get(_e){if(pathIsEmpty(_e))return this.value;{const tt=pathGetFront(_e),nt=this.children.get(tt);return nt?nt.get(pathPopFront(_e)):null}}setTree(_e,tt){if(pathIsEmpty(_e))return tt;{const nt=pathGetFront(_e),it=(this.children.get(nt)||new ImmutableTree(null)).setTree(pathPopFront(_e),tt);let ot;return it.isEmpty()?ot=this.children.remove(nt):ot=this.children.insert(nt,it),new ImmutableTree(this.value,ot)}}fold(_e){return this.fold_(newEmptyPath(),_e)}fold_(_e,tt){const nt={};return this.children.inorderTraversal((rt,it)=>{nt[rt]=it.fold_(pathChild(_e,rt),tt)}),tt(_e,this.value,nt)}findOnPath(_e,tt){return this.findOnPath_(_e,newEmptyPath(),tt)}findOnPath_(_e,tt,nt){const rt=this.value?nt(tt,this.value):!1;if(rt)return rt;if(pathIsEmpty(_e))return null;{const it=pathGetFront(_e),ot=this.children.get(it);return ot?ot.findOnPath_(pathPopFront(_e),pathChild(tt,it),nt):null}}foreachOnPath(_e,tt){return this.foreachOnPath_(_e,newEmptyPath(),tt)}foreachOnPath_(_e,tt,nt){if(pathIsEmpty(_e))return this;{this.value&&nt(tt,this.value);const rt=pathGetFront(_e),it=this.children.get(rt);return it?it.foreachOnPath_(pathPopFront(_e),pathChild(tt,rt),nt):new ImmutableTree(null)}}foreach(_e){this.foreach_(newEmptyPath(),_e)}foreach_(_e,tt){this.children.inorderTraversal((nt,rt)=>{rt.foreach_(pathChild(_e,nt),tt)}),this.value&&tt(_e,this.value)}foreachChild(_e){this.children.inorderTraversal((tt,nt)=>{nt.value&&_e(tt,nt.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CompoundWrite{constructor(_e){this.writeTree_=_e}static empty(){return new CompoundWrite(new ImmutableTree(null))}}function compoundWriteAddWrite(et,_e,tt){if(pathIsEmpty(_e))return new CompoundWrite(new ImmutableTree(tt));{const nt=et.writeTree_.findRootMostValueAndPath(_e);if(nt!=null){const rt=nt.path;let it=nt.value;const ot=newRelativePath(rt,_e);return it=it.updateChild(ot,tt),new CompoundWrite(et.writeTree_.set(rt,it))}else{const rt=new ImmutableTree(tt),it=et.writeTree_.setTree(_e,rt);return new CompoundWrite(it)}}}function compoundWriteAddWrites(et,_e,tt){let nt=et;return each(tt,(rt,it)=>{nt=compoundWriteAddWrite(nt,pathChild(_e,rt),it)}),nt}function compoundWriteRemoveWrite(et,_e){if(pathIsEmpty(_e))return CompoundWrite.empty();{const tt=et.writeTree_.setTree(_e,new ImmutableTree(null));return new CompoundWrite(tt)}}function compoundWriteHasCompleteWrite(et,_e){return compoundWriteGetCompleteNode(et,_e)!=null}function compoundWriteGetCompleteNode(et,_e){const tt=et.writeTree_.findRootMostValueAndPath(_e);return tt!=null?et.writeTree_.get(tt.path).getChild(newRelativePath(tt.path,_e)):null}function compoundWriteGetCompleteChildren(et){const _e=[],tt=et.writeTree_.value;return tt!=null?tt.isLeafNode()||tt.forEachChild(PRIORITY_INDEX,(nt,rt)=>{_e.push(new NamedNode(nt,rt))}):et.writeTree_.children.inorderTraversal((nt,rt)=>{rt.value!=null&&_e.push(new NamedNode(nt,rt.value))}),_e}function compoundWriteChildCompoundWrite(et,_e){if(pathIsEmpty(_e))return et;{const tt=compoundWriteGetCompleteNode(et,_e);return tt!=null?new CompoundWrite(new ImmutableTree(tt)):new CompoundWrite(et.writeTree_.subtree(_e))}}function compoundWriteIsEmpty(et){return et.writeTree_.isEmpty()}function compoundWriteApply(et,_e){return applySubtreeWrite(newEmptyPath(),et.writeTree_,_e)}function applySubtreeWrite(et,_e,tt){if(_e.value!=null)return tt.updateChild(et,_e.value);{let nt=null;return _e.children.inorderTraversal((rt,it)=>{rt===".priority"?(assert(it.value!==null,"Priority writes must always be leaf nodes"),nt=it.value):tt=applySubtreeWrite(pathChild(et,rt),it,tt)}),!tt.getChild(et).isEmpty()&&nt!==null&&(tt=tt.updateChild(pathChild(et,".priority"),nt)),tt}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function writeTreeChildWrites(et,_e){return newWriteTreeRef(_e,et)}function writeTreeAddOverwrite(et,_e,tt,nt,rt){assert(nt>et.lastWriteId,"Stacking an older write on top of newer ones"),rt===void 0&&(rt=!0),et.allWrites.push({path:_e,snap:tt,writeId:nt,visible:rt}),rt&&(et.visibleWrites=compoundWriteAddWrite(et.visibleWrites,_e,tt)),et.lastWriteId=nt}function writeTreeGetWrite(et,_e){for(let tt=0;tt<et.allWrites.length;tt++){const nt=et.allWrites[tt];if(nt.writeId===_e)return nt}return null}function writeTreeRemoveWrite(et,_e){const tt=et.allWrites.findIndex(st=>st.writeId===_e);assert(tt>=0,"removeWrite called with nonexistent writeId.");const nt=et.allWrites[tt];et.allWrites.splice(tt,1);let rt=nt.visible,it=!1,ot=et.allWrites.length-1;for(;rt&&ot>=0;){const st=et.allWrites[ot];st.visible&&(ot>=tt&&writeTreeRecordContainsPath_(st,nt.path)?rt=!1:pathContains(nt.path,st.path)&&(it=!0)),ot--}if(rt){if(it)return writeTreeResetTree_(et),!0;if(nt.snap)et.visibleWrites=compoundWriteRemoveWrite(et.visibleWrites,nt.path);else{const st=nt.children;each(st,at=>{et.visibleWrites=compoundWriteRemoveWrite(et.visibleWrites,pathChild(nt.path,at))})}return!0}else return!1}function writeTreeRecordContainsPath_(et,_e){if(et.snap)return pathContains(et.path,_e);for(const tt in et.children)if(et.children.hasOwnProperty(tt)&&pathContains(pathChild(et.path,tt),_e))return!0;return!1}function writeTreeResetTree_(et){et.visibleWrites=writeTreeLayerTree_(et.allWrites,writeTreeDefaultFilter_,newEmptyPath()),et.allWrites.length>0?et.lastWriteId=et.allWrites[et.allWrites.length-1].writeId:et.lastWriteId=-1}function writeTreeDefaultFilter_(et){return et.visible}function writeTreeLayerTree_(et,_e,tt){let nt=CompoundWrite.empty();for(let rt=0;rt<et.length;++rt){const it=et[rt];if(_e(it)){const ot=it.path;let st;if(it.snap)pathContains(tt,ot)?(st=newRelativePath(tt,ot),nt=compoundWriteAddWrite(nt,st,it.snap)):pathContains(ot,tt)&&(st=newRelativePath(ot,tt),nt=compoundWriteAddWrite(nt,newEmptyPath(),it.snap.getChild(st)));else if(it.children){if(pathContains(tt,ot))st=newRelativePath(tt,ot),nt=compoundWriteAddWrites(nt,st,it.children);else if(pathContains(ot,tt))if(st=newRelativePath(ot,tt),pathIsEmpty(st))nt=compoundWriteAddWrites(nt,newEmptyPath(),it.children);else{const at=safeGet(it.children,pathGetFront(st));if(at){const lt=at.getChild(pathPopFront(st));nt=compoundWriteAddWrite(nt,newEmptyPath(),lt)}}}else throw assertionError("WriteRecord should have .snap or .children")}}return nt}function writeTreeCalcCompleteEventCache(et,_e,tt,nt,rt){if(!nt&&!rt){const it=compoundWriteGetCompleteNode(et.visibleWrites,_e);if(it!=null)return it;{const ot=compoundWriteChildCompoundWrite(et.visibleWrites,_e);if(compoundWriteIsEmpty(ot))return tt;if(tt==null&&!compoundWriteHasCompleteWrite(ot,newEmptyPath()))return null;{const st=tt||ChildrenNode.EMPTY_NODE;return compoundWriteApply(ot,st)}}}else{const it=compoundWriteChildCompoundWrite(et.visibleWrites,_e);if(!rt&&compoundWriteIsEmpty(it))return tt;if(!rt&&tt==null&&!compoundWriteHasCompleteWrite(it,newEmptyPath()))return null;{const ot=function(lt){return(lt.visible||rt)&&(!nt||!~nt.indexOf(lt.writeId))&&(pathContains(lt.path,_e)||pathContains(_e,lt.path))},st=writeTreeLayerTree_(et.allWrites,ot,_e),at=tt||ChildrenNode.EMPTY_NODE;return compoundWriteApply(st,at)}}}function writeTreeCalcCompleteEventChildren(et,_e,tt){let nt=ChildrenNode.EMPTY_NODE;const rt=compoundWriteGetCompleteNode(et.visibleWrites,_e);if(rt)return rt.isLeafNode()||rt.forEachChild(PRIORITY_INDEX,(it,ot)=>{nt=nt.updateImmediateChild(it,ot)}),nt;if(tt){const it=compoundWriteChildCompoundWrite(et.visibleWrites,_e);return tt.forEachChild(PRIORITY_INDEX,(ot,st)=>{const at=compoundWriteApply(compoundWriteChildCompoundWrite(it,new Path$1(ot)),st);nt=nt.updateImmediateChild(ot,at)}),compoundWriteGetCompleteChildren(it).forEach(ot=>{nt=nt.updateImmediateChild(ot.name,ot.node)}),nt}else{const it=compoundWriteChildCompoundWrite(et.visibleWrites,_e);return compoundWriteGetCompleteChildren(it).forEach(ot=>{nt=nt.updateImmediateChild(ot.name,ot.node)}),nt}}function writeTreeCalcEventCacheAfterServerOverwrite(et,_e,tt,nt,rt){assert(nt||rt,"Either existingEventSnap or existingServerSnap must exist");const it=pathChild(_e,tt);if(compoundWriteHasCompleteWrite(et.visibleWrites,it))return null;{const ot=compoundWriteChildCompoundWrite(et.visibleWrites,it);return compoundWriteIsEmpty(ot)?rt.getChild(tt):compoundWriteApply(ot,rt.getChild(tt))}}function writeTreeCalcCompleteChild(et,_e,tt,nt){const rt=pathChild(_e,tt),it=compoundWriteGetCompleteNode(et.visibleWrites,rt);if(it!=null)return it;if(nt.isCompleteForChild(tt)){const ot=compoundWriteChildCompoundWrite(et.visibleWrites,rt);return compoundWriteApply(ot,nt.getNode().getImmediateChild(tt))}else return null}function writeTreeShadowingWrite(et,_e){return compoundWriteGetCompleteNode(et.visibleWrites,_e)}function writeTreeCalcIndexedSlice(et,_e,tt,nt,rt,it,ot){let st;const at=compoundWriteChildCompoundWrite(et.visibleWrites,_e),lt=compoundWriteGetCompleteNode(at,newEmptyPath());if(lt!=null)st=lt;else if(tt!=null)st=compoundWriteApply(at,tt);else return[];if(st=st.withIndex(ot),!st.isEmpty()&&!st.isLeafNode()){const ct=[],ut=ot.getCompare(),dt=it?st.getReverseIteratorFrom(nt,ot):st.getIteratorFrom(nt,ot);let ft=dt.getNext();for(;ft&&ct.length<rt;)ut(ft,nt)!==0&&ct.push(ft),ft=dt.getNext();return ct}else return[]}function newWriteTree(){return{visibleWrites:CompoundWrite.empty(),allWrites:[],lastWriteId:-1}}function writeTreeRefCalcCompleteEventCache(et,_e,tt,nt){return writeTreeCalcCompleteEventCache(et.writeTree,et.treePath,_e,tt,nt)}function writeTreeRefCalcCompleteEventChildren(et,_e){return writeTreeCalcCompleteEventChildren(et.writeTree,et.treePath,_e)}function writeTreeRefCalcEventCacheAfterServerOverwrite(et,_e,tt,nt){return writeTreeCalcEventCacheAfterServerOverwrite(et.writeTree,et.treePath,_e,tt,nt)}function writeTreeRefShadowingWrite(et,_e){return writeTreeShadowingWrite(et.writeTree,pathChild(et.treePath,_e))}function writeTreeRefCalcIndexedSlice(et,_e,tt,nt,rt,it){return writeTreeCalcIndexedSlice(et.writeTree,et.treePath,_e,tt,nt,rt,it)}function writeTreeRefCalcCompleteChild(et,_e,tt){return writeTreeCalcCompleteChild(et.writeTree,et.treePath,_e,tt)}function writeTreeRefChild(et,_e){return newWriteTreeRef(pathChild(et.treePath,_e),et.writeTree)}function newWriteTreeRef(et,_e){return{treePath:et,writeTree:_e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ChildChangeAccumulator{constructor(){this.changeMap=new Map}trackChildChange(_e){const tt=_e.type,nt=_e.childName;assert(tt==="child_added"||tt==="child_changed"||tt==="child_removed","Only child changes supported for tracking"),assert(nt!==".priority","Only non-priority child changes can be tracked.");const rt=this.changeMap.get(nt);if(rt){const it=rt.type;if(tt==="child_added"&&it==="child_removed")this.changeMap.set(nt,changeChildChanged(nt,_e.snapshotNode,rt.snapshotNode));else if(tt==="child_removed"&&it==="child_added")this.changeMap.delete(nt);else if(tt==="child_removed"&&it==="child_changed")this.changeMap.set(nt,changeChildRemoved(nt,rt.oldSnap));else if(tt==="child_changed"&&it==="child_added")this.changeMap.set(nt,changeChildAdded(nt,_e.snapshotNode));else if(tt==="child_changed"&&it==="child_changed")this.changeMap.set(nt,changeChildChanged(nt,_e.snapshotNode,rt.oldSnap));else throw assertionError("Illegal combination of changes: "+_e+" occurred after "+rt)}else this.changeMap.set(nt,_e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NoCompleteChildSource_{getCompleteChild(_e){return null}getChildAfterChild(_e,tt,nt){return null}}const NO_COMPLETE_CHILD_SOURCE=new NoCompleteChildSource_;class WriteTreeCompleteChildSource{constructor(_e,tt,nt=null){this.writes_=_e,this.viewCache_=tt,this.optCompleteServerCache_=nt}getCompleteChild(_e){const tt=this.viewCache_.eventCache;if(tt.isCompleteForChild(_e))return tt.getNode().getImmediateChild(_e);{const nt=this.optCompleteServerCache_!=null?new CacheNode(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return writeTreeRefCalcCompleteChild(this.writes_,_e,nt)}}getChildAfterChild(_e,tt,nt){const rt=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:viewCacheGetCompleteServerSnap(this.viewCache_),it=writeTreeRefCalcIndexedSlice(this.writes_,rt,tt,1,nt,_e);return it.length===0?null:it[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function newViewProcessor(et){return{filter:et}}function viewProcessorAssertIndexed(et,_e){assert(_e.eventCache.getNode().isIndexed(et.filter.getIndex()),"Event snap not indexed"),assert(_e.serverCache.getNode().isIndexed(et.filter.getIndex()),"Server snap not indexed")}function viewProcessorApplyOperation(et,_e,tt,nt,rt){const it=new ChildChangeAccumulator;let ot,st;if(tt.type===OperationType.OVERWRITE){const lt=tt;lt.source.fromUser?ot=viewProcessorApplyUserOverwrite(et,_e,lt.path,lt.snap,nt,rt,it):(assert(lt.source.fromServer,"Unknown source."),st=lt.source.tagged||_e.serverCache.isFiltered()&&!pathIsEmpty(lt.path),ot=viewProcessorApplyServerOverwrite(et,_e,lt.path,lt.snap,nt,rt,st,it))}else if(tt.type===OperationType.MERGE){const lt=tt;lt.source.fromUser?ot=viewProcessorApplyUserMerge(et,_e,lt.path,lt.children,nt,rt,it):(assert(lt.source.fromServer,"Unknown source."),st=lt.source.tagged||_e.serverCache.isFiltered(),ot=viewProcessorApplyServerMerge(et,_e,lt.path,lt.children,nt,rt,st,it))}else if(tt.type===OperationType.ACK_USER_WRITE){const lt=tt;lt.revert?ot=viewProcessorRevertUserWrite(et,_e,lt.path,nt,rt,it):ot=viewProcessorAckUserWrite(et,_e,lt.path,lt.affectedTree,nt,rt,it)}else if(tt.type===OperationType.LISTEN_COMPLETE)ot=viewProcessorListenComplete(et,_e,tt.path,nt,it);else throw assertionError("Unknown operation type: "+tt.type);const at=it.getChanges();return viewProcessorMaybeAddValueEvent(_e,ot,at),{viewCache:ot,changes:at}}function viewProcessorMaybeAddValueEvent(et,_e,tt){const nt=_e.eventCache;if(nt.isFullyInitialized()){const rt=nt.getNode().isLeafNode()||nt.getNode().isEmpty(),it=viewCacheGetCompleteEventSnap(et);(tt.length>0||!et.eventCache.isFullyInitialized()||rt&&!nt.getNode().equals(it)||!nt.getNode().getPriority().equals(it.getPriority()))&&tt.push(changeValue(viewCacheGetCompleteEventSnap(_e)))}}function viewProcessorGenerateEventCacheAfterServerEvent(et,_e,tt,nt,rt,it){const ot=_e.eventCache;if(writeTreeRefShadowingWrite(nt,tt)!=null)return _e;{let st,at;if(pathIsEmpty(tt))if(assert(_e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),_e.serverCache.isFiltered()){const lt=viewCacheGetCompleteServerSnap(_e),ct=lt instanceof ChildrenNode?lt:ChildrenNode.EMPTY_NODE,ut=writeTreeRefCalcCompleteEventChildren(nt,ct);st=et.filter.updateFullNode(_e.eventCache.getNode(),ut,it)}else{const lt=writeTreeRefCalcCompleteEventCache(nt,viewCacheGetCompleteServerSnap(_e));st=et.filter.updateFullNode(_e.eventCache.getNode(),lt,it)}else{const lt=pathGetFront(tt);if(lt===".priority"){assert(pathGetLength(tt)===1,"Can't have a priority with additional path components");const ct=ot.getNode();at=_e.serverCache.getNode();const ut=writeTreeRefCalcEventCacheAfterServerOverwrite(nt,tt,ct,at);ut!=null?st=et.filter.updatePriority(ct,ut):st=ot.getNode()}else{const ct=pathPopFront(tt);let ut;if(ot.isCompleteForChild(lt)){at=_e.serverCache.getNode();const dt=writeTreeRefCalcEventCacheAfterServerOverwrite(nt,tt,ot.getNode(),at);dt!=null?ut=ot.getNode().getImmediateChild(lt).updateChild(ct,dt):ut=ot.getNode().getImmediateChild(lt)}else ut=writeTreeRefCalcCompleteChild(nt,lt,_e.serverCache);ut!=null?st=et.filter.updateChild(ot.getNode(),lt,ut,ct,rt,it):st=ot.getNode()}}return viewCacheUpdateEventSnap(_e,st,ot.isFullyInitialized()||pathIsEmpty(tt),et.filter.filtersNodes())}}function viewProcessorApplyServerOverwrite(et,_e,tt,nt,rt,it,ot,st){const at=_e.serverCache;let lt;const ct=ot?et.filter:et.filter.getIndexedFilter();if(pathIsEmpty(tt))lt=ct.updateFullNode(at.getNode(),nt,null);else if(ct.filtersNodes()&&!at.isFiltered()){const ft=at.getNode().updateChild(tt,nt);lt=ct.updateFullNode(at.getNode(),ft,null)}else{const ft=pathGetFront(tt);if(!at.isCompleteForPath(tt)&&pathGetLength(tt)>1)return _e;const pt=pathPopFront(tt),xt=at.getNode().getImmediateChild(ft).updateChild(pt,nt);ft===".priority"?lt=ct.updatePriority(at.getNode(),xt):lt=ct.updateChild(at.getNode(),ft,xt,pt,NO_COMPLETE_CHILD_SOURCE,null)}const ut=viewCacheUpdateServerSnap(_e,lt,at.isFullyInitialized()||pathIsEmpty(tt),ct.filtersNodes()),dt=new WriteTreeCompleteChildSource(rt,ut,it);return viewProcessorGenerateEventCacheAfterServerEvent(et,ut,tt,rt,dt,st)}function viewProcessorApplyUserOverwrite(et,_e,tt,nt,rt,it,ot){const st=_e.eventCache;let at,lt;const ct=new WriteTreeCompleteChildSource(rt,_e,it);if(pathIsEmpty(tt))lt=et.filter.updateFullNode(_e.eventCache.getNode(),nt,ot),at=viewCacheUpdateEventSnap(_e,lt,!0,et.filter.filtersNodes());else{const ut=pathGetFront(tt);if(ut===".priority")lt=et.filter.updatePriority(_e.eventCache.getNode(),nt),at=viewCacheUpdateEventSnap(_e,lt,st.isFullyInitialized(),st.isFiltered());else{const dt=pathPopFront(tt),ft=st.getNode().getImmediateChild(ut);let pt;if(pathIsEmpty(dt))pt=nt;else{const mt=ct.getCompleteChild(ut);mt!=null?pathGetBack(dt)===".priority"&&mt.getChild(pathParent(dt)).isEmpty()?pt=mt:pt=mt.updateChild(dt,nt):pt=ChildrenNode.EMPTY_NODE}if(ft.equals(pt))at=_e;else{const mt=et.filter.updateChild(st.getNode(),ut,pt,dt,ct,ot);at=viewCacheUpdateEventSnap(_e,mt,st.isFullyInitialized(),et.filter.filtersNodes())}}}return at}function viewProcessorCacheHasChild(et,_e){return et.eventCache.isCompleteForChild(_e)}function viewProcessorApplyUserMerge(et,_e,tt,nt,rt,it,ot){let st=_e;return nt.foreach((at,lt)=>{const ct=pathChild(tt,at);viewProcessorCacheHasChild(_e,pathGetFront(ct))&&(st=viewProcessorApplyUserOverwrite(et,st,ct,lt,rt,it,ot))}),nt.foreach((at,lt)=>{const ct=pathChild(tt,at);viewProcessorCacheHasChild(_e,pathGetFront(ct))||(st=viewProcessorApplyUserOverwrite(et,st,ct,lt,rt,it,ot))}),st}function viewProcessorApplyMerge(et,_e,tt){return tt.foreach((nt,rt)=>{_e=_e.updateChild(nt,rt)}),_e}function viewProcessorApplyServerMerge(et,_e,tt,nt,rt,it,ot,st){if(_e.serverCache.getNode().isEmpty()&&!_e.serverCache.isFullyInitialized())return _e;let at=_e,lt;pathIsEmpty(tt)?lt=nt:lt=new ImmutableTree(null).setTree(tt,nt);const ct=_e.serverCache.getNode();return lt.children.inorderTraversal((ut,dt)=>{if(ct.hasChild(ut)){const ft=_e.serverCache.getNode().getImmediateChild(ut),pt=viewProcessorApplyMerge(et,ft,dt);at=viewProcessorApplyServerOverwrite(et,at,new Path$1(ut),pt,rt,it,ot,st)}}),lt.children.inorderTraversal((ut,dt)=>{const ft=!_e.serverCache.isCompleteForChild(ut)&&dt.value===null;if(!ct.hasChild(ut)&&!ft){const pt=_e.serverCache.getNode().getImmediateChild(ut),mt=viewProcessorApplyMerge(et,pt,dt);at=viewProcessorApplyServerOverwrite(et,at,new Path$1(ut),mt,rt,it,ot,st)}}),at}function viewProcessorAckUserWrite(et,_e,tt,nt,rt,it,ot){if(writeTreeRefShadowingWrite(rt,tt)!=null)return _e;const st=_e.serverCache.isFiltered(),at=_e.serverCache;if(nt.value!=null){if(pathIsEmpty(tt)&&at.isFullyInitialized()||at.isCompleteForPath(tt))return viewProcessorApplyServerOverwrite(et,_e,tt,at.getNode().getChild(tt),rt,it,st,ot);if(pathIsEmpty(tt)){let lt=new ImmutableTree(null);return at.getNode().forEachChild(KEY_INDEX,(ct,ut)=>{lt=lt.set(new Path$1(ct),ut)}),viewProcessorApplyServerMerge(et,_e,tt,lt,rt,it,st,ot)}else return _e}else{let lt=new ImmutableTree(null);return nt.foreach((ct,ut)=>{const dt=pathChild(tt,ct);at.isCompleteForPath(dt)&&(lt=lt.set(ct,at.getNode().getChild(dt)))}),viewProcessorApplyServerMerge(et,_e,tt,lt,rt,it,st,ot)}}function viewProcessorListenComplete(et,_e,tt,nt,rt){const it=_e.serverCache,ot=viewCacheUpdateServerSnap(_e,it.getNode(),it.isFullyInitialized()||pathIsEmpty(tt),it.isFiltered());return viewProcessorGenerateEventCacheAfterServerEvent(et,ot,tt,nt,NO_COMPLETE_CHILD_SOURCE,rt)}function viewProcessorRevertUserWrite(et,_e,tt,nt,rt,it){let ot;if(writeTreeRefShadowingWrite(nt,tt)!=null)return _e;{const st=new WriteTreeCompleteChildSource(nt,_e,rt),at=_e.eventCache.getNode();let lt;if(pathIsEmpty(tt)||pathGetFront(tt)===".priority"){let ct;if(_e.serverCache.isFullyInitialized())ct=writeTreeRefCalcCompleteEventCache(nt,viewCacheGetCompleteServerSnap(_e));else{const ut=_e.serverCache.getNode();assert(ut instanceof ChildrenNode,"serverChildren would be complete if leaf node"),ct=writeTreeRefCalcCompleteEventChildren(nt,ut)}ct=ct,lt=et.filter.updateFullNode(at,ct,it)}else{const ct=pathGetFront(tt);let ut=writeTreeRefCalcCompleteChild(nt,ct,_e.serverCache);ut==null&&_e.serverCache.isCompleteForChild(ct)&&(ut=at.getImmediateChild(ct)),ut!=null?lt=et.filter.updateChild(at,ct,ut,pathPopFront(tt),st,it):_e.eventCache.getNode().hasChild(ct)?lt=et.filter.updateChild(at,ct,ChildrenNode.EMPTY_NODE,pathPopFront(tt),st,it):lt=at,lt.isEmpty()&&_e.serverCache.isFullyInitialized()&&(ot=writeTreeRefCalcCompleteEventCache(nt,viewCacheGetCompleteServerSnap(_e)),ot.isLeafNode()&&(lt=et.filter.updateFullNode(lt,ot,it)))}return ot=_e.serverCache.isFullyInitialized()||writeTreeRefShadowingWrite(nt,newEmptyPath())!=null,viewCacheUpdateEventSnap(_e,lt,ot,et.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class View{constructor(_e,tt){this.query_=_e,this.eventRegistrations_=[];const nt=this.query_._queryParams,rt=new IndexedFilter(nt.getIndex()),it=queryParamsGetNodeFilter(nt);this.processor_=newViewProcessor(it);const ot=tt.serverCache,st=tt.eventCache,at=rt.updateFullNode(ChildrenNode.EMPTY_NODE,ot.getNode(),null),lt=it.updateFullNode(ChildrenNode.EMPTY_NODE,st.getNode(),null),ct=new CacheNode(at,ot.isFullyInitialized(),rt.filtersNodes()),ut=new CacheNode(lt,st.isFullyInitialized(),it.filtersNodes());this.viewCache_=newViewCache(ut,ct),this.eventGenerator_=new EventGenerator(this.query_)}get query(){return this.query_}}function viewGetServerCache(et){return et.viewCache_.serverCache.getNode()}function viewGetCompleteNode(et){return viewCacheGetCompleteEventSnap(et.viewCache_)}function viewGetCompleteServerCache(et,_e){const tt=viewCacheGetCompleteServerSnap(et.viewCache_);return tt&&(et.query._queryParams.loadsAllData()||!pathIsEmpty(_e)&&!tt.getImmediateChild(pathGetFront(_e)).isEmpty())?tt.getChild(_e):null}function viewIsEmpty(et){return et.eventRegistrations_.length===0}function viewAddEventRegistration(et,_e){et.eventRegistrations_.push(_e)}function viewRemoveEventRegistration(et,_e,tt){const nt=[];if(tt){assert(_e==null,"A cancel should cancel all event registrations.");const rt=et.query._path;et.eventRegistrations_.forEach(it=>{const ot=it.createCancelEvent(tt,rt);ot&&nt.push(ot)})}if(_e){let rt=[];for(let it=0;it<et.eventRegistrations_.length;++it){const ot=et.eventRegistrations_[it];if(!ot.matches(_e))rt.push(ot);else if(_e.hasAnyCallback()){rt=rt.concat(et.eventRegistrations_.slice(it+1));break}}et.eventRegistrations_=rt}else et.eventRegistrations_=[];return nt}function viewApplyOperation(et,_e,tt,nt){_e.type===OperationType.MERGE&&_e.source.queryId!==null&&(assert(viewCacheGetCompleteServerSnap(et.viewCache_),"We should always have a full cache before handling merges"),assert(viewCacheGetCompleteEventSnap(et.viewCache_),"Missing event cache, even though we have a server cache"));const rt=et.viewCache_,it=viewProcessorApplyOperation(et.processor_,rt,_e,tt,nt);return viewProcessorAssertIndexed(et.processor_,it.viewCache),assert(it.viewCache.serverCache.isFullyInitialized()||!rt.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),et.viewCache_=it.viewCache,viewGenerateEventsForChanges_(et,it.changes,it.viewCache.eventCache.getNode(),null)}function viewGetInitialEvents(et,_e){const tt=et.viewCache_.eventCache,nt=[];return tt.getNode().isLeafNode()||tt.getNode().forEachChild(PRIORITY_INDEX,(it,ot)=>{nt.push(changeChildAdded(it,ot))}),tt.isFullyInitialized()&&nt.push(changeValue(tt.getNode())),viewGenerateEventsForChanges_(et,nt,tt.getNode(),_e)}function viewGenerateEventsForChanges_(et,_e,tt,nt){const rt=nt?[nt]:et.eventRegistrations_;return eventGeneratorGenerateEventsForChanges(et.eventGenerator_,_e,tt,rt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let referenceConstructor$1;class SyncPoint{constructor(){this.views=new Map}}function syncPointSetReferenceConstructor(et){assert(!referenceConstructor$1,"__referenceConstructor has already been defined"),referenceConstructor$1=et}function syncPointGetReferenceConstructor(){return assert(referenceConstructor$1,"Reference.ts has not been loaded"),referenceConstructor$1}function syncPointIsEmpty(et){return et.views.size===0}function syncPointApplyOperation(et,_e,tt,nt){const rt=_e.source.queryId;if(rt!==null){const it=et.views.get(rt);return assert(it!=null,"SyncTree gave us an op for an invalid query."),viewApplyOperation(it,_e,tt,nt)}else{let it=[];for(const ot of et.views.values())it=it.concat(viewApplyOperation(ot,_e,tt,nt));return it}}function syncPointGetView(et,_e,tt,nt,rt){const it=_e._queryIdentifier,ot=et.views.get(it);if(!ot){let st=writeTreeRefCalcCompleteEventCache(tt,rt?nt:null),at=!1;st?at=!0:nt instanceof ChildrenNode?(st=writeTreeRefCalcCompleteEventChildren(tt,nt),at=!1):(st=ChildrenNode.EMPTY_NODE,at=!1);const lt=newViewCache(new CacheNode(st,at,!1),new CacheNode(nt,rt,!1));return new View(_e,lt)}return ot}function syncPointAddEventRegistration(et,_e,tt,nt,rt,it){const ot=syncPointGetView(et,_e,nt,rt,it);return et.views.has(_e._queryIdentifier)||et.views.set(_e._queryIdentifier,ot),viewAddEventRegistration(ot,tt),viewGetInitialEvents(ot,tt)}function syncPointRemoveEventRegistration(et,_e,tt,nt){const rt=_e._queryIdentifier,it=[];let ot=[];const st=syncPointHasCompleteView(et);if(rt==="default")for(const[at,lt]of et.views.entries())ot=ot.concat(viewRemoveEventRegistration(lt,tt,nt)),viewIsEmpty(lt)&&(et.views.delete(at),lt.query._queryParams.loadsAllData()||it.push(lt.query));else{const at=et.views.get(rt);at&&(ot=ot.concat(viewRemoveEventRegistration(at,tt,nt)),viewIsEmpty(at)&&(et.views.delete(rt),at.query._queryParams.loadsAllData()||it.push(at.query)))}return st&&!syncPointHasCompleteView(et)&&it.push(new(syncPointGetReferenceConstructor())(_e._repo,_e._path)),{removed:it,events:ot}}function syncPointGetQueryViews(et){const _e=[];for(const tt of et.views.values())tt.query._queryParams.loadsAllData()||_e.push(tt);return _e}function syncPointGetCompleteServerCache(et,_e){let tt=null;for(const nt of et.views.values())tt=tt||viewGetCompleteServerCache(nt,_e);return tt}function syncPointViewForQuery(et,_e){if(_e._queryParams.loadsAllData())return syncPointGetCompleteView(et);{const nt=_e._queryIdentifier;return et.views.get(nt)}}function syncPointViewExistsForQuery(et,_e){return syncPointViewForQuery(et,_e)!=null}function syncPointHasCompleteView(et){return syncPointGetCompleteView(et)!=null}function syncPointGetCompleteView(et){for(const _e of et.views.values())if(_e.query._queryParams.loadsAllData())return _e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let referenceConstructor;function syncTreeSetReferenceConstructor(et){assert(!referenceConstructor,"__referenceConstructor has already been defined"),referenceConstructor=et}function syncTreeGetReferenceConstructor(){return assert(referenceConstructor,"Reference.ts has not been loaded"),referenceConstructor}let syncTreeNextQueryTag_=1;class SyncTree{constructor(_e){this.listenProvider_=_e,this.syncPointTree_=new ImmutableTree(null),this.pendingWriteTree_=newWriteTree(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function syncTreeApplyUserOverwrite(et,_e,tt,nt,rt){return writeTreeAddOverwrite(et.pendingWriteTree_,_e,tt,nt,rt),rt?syncTreeApplyOperationToSyncPoints_(et,new Overwrite(newOperationSourceUser(),_e,tt)):[]}function syncTreeAckUserWrite(et,_e,tt=!1){const nt=writeTreeGetWrite(et.pendingWriteTree_,_e);if(writeTreeRemoveWrite(et.pendingWriteTree_,_e)){let it=new ImmutableTree(null);return nt.snap!=null?it=it.set(newEmptyPath(),!0):each(nt.children,ot=>{it=it.set(new Path$1(ot),!0)}),syncTreeApplyOperationToSyncPoints_(et,new AckUserWrite(nt.path,it,tt))}else return[]}function syncTreeApplyServerOverwrite(et,_e,tt){return syncTreeApplyOperationToSyncPoints_(et,new Overwrite(newOperationSourceServer(),_e,tt))}function syncTreeApplyServerMerge(et,_e,tt){const nt=ImmutableTree.fromObject(tt);return syncTreeApplyOperationToSyncPoints_(et,new Merge(newOperationSourceServer(),_e,nt))}function syncTreeApplyListenComplete(et,_e){return syncTreeApplyOperationToSyncPoints_(et,new ListenComplete(newOperationSourceServer(),_e))}function syncTreeApplyTaggedListenComplete(et,_e,tt){const nt=syncTreeQueryKeyForTag_(et,tt);if(nt){const rt=syncTreeParseQueryKey_(nt),it=rt.path,ot=rt.queryId,st=newRelativePath(it,_e),at=new ListenComplete(newOperationSourceServerTaggedQuery(ot),st);return syncTreeApplyTaggedOperation_(et,it,at)}else return[]}function syncTreeRemoveEventRegistration(et,_e,tt,nt,rt=!1){const it=_e._path,ot=et.syncPointTree_.get(it);let st=[];if(ot&&(_e._queryIdentifier==="default"||syncPointViewExistsForQuery(ot,_e))){const at=syncPointRemoveEventRegistration(ot,_e,tt,nt);syncPointIsEmpty(ot)&&(et.syncPointTree_=et.syncPointTree_.remove(it));const lt=at.removed;if(st=at.events,!rt){const ct=lt.findIndex(dt=>dt._queryParams.loadsAllData())!==-1,ut=et.syncPointTree_.findOnPath(it,(dt,ft)=>syncPointHasCompleteView(ft));if(ct&&!ut){const dt=et.syncPointTree_.subtree(it);if(!dt.isEmpty()){const ft=syncTreeCollectDistinctViewsForSubTree_(dt);for(let pt=0;pt<ft.length;++pt){const mt=ft[pt],xt=mt.query,gt=syncTreeCreateListenerForView_(et,mt);et.listenProvider_.startListening(syncTreeQueryForListening_(xt),syncTreeTagForQuery(et,xt),gt.hashFn,gt.onComplete)}}}!ut&&lt.length>0&&!nt&&(ct?et.listenProvider_.stopListening(syncTreeQueryForListening_(_e),null):lt.forEach(dt=>{const ft=et.queryToTagMap.get(syncTreeMakeQueryKey_(dt));et.listenProvider_.stopListening(syncTreeQueryForListening_(dt),ft)}))}syncTreeRemoveTags_(et,lt)}return st}function syncTreeApplyTaggedQueryOverwrite(et,_e,tt,nt){const rt=syncTreeQueryKeyForTag_(et,nt);if(rt!=null){const it=syncTreeParseQueryKey_(rt),ot=it.path,st=it.queryId,at=newRelativePath(ot,_e),lt=new Overwrite(newOperationSourceServerTaggedQuery(st),at,tt);return syncTreeApplyTaggedOperation_(et,ot,lt)}else return[]}function syncTreeApplyTaggedQueryMerge(et,_e,tt,nt){const rt=syncTreeQueryKeyForTag_(et,nt);if(rt){const it=syncTreeParseQueryKey_(rt),ot=it.path,st=it.queryId,at=newRelativePath(ot,_e),lt=ImmutableTree.fromObject(tt),ct=new Merge(newOperationSourceServerTaggedQuery(st),at,lt);return syncTreeApplyTaggedOperation_(et,ot,ct)}else return[]}function syncTreeAddEventRegistration(et,_e,tt,nt=!1){const rt=_e._path;let it=null,ot=!1;et.syncPointTree_.foreachOnPath(rt,(dt,ft)=>{const pt=newRelativePath(dt,rt);it=it||syncPointGetCompleteServerCache(ft,pt),ot=ot||syncPointHasCompleteView(ft)});let st=et.syncPointTree_.get(rt);st?(ot=ot||syncPointHasCompleteView(st),it=it||syncPointGetCompleteServerCache(st,newEmptyPath())):(st=new SyncPoint,et.syncPointTree_=et.syncPointTree_.set(rt,st));let at;it!=null?at=!0:(at=!1,it=ChildrenNode.EMPTY_NODE,et.syncPointTree_.subtree(rt).foreachChild((ft,pt)=>{const mt=syncPointGetCompleteServerCache(pt,newEmptyPath());mt&&(it=it.updateImmediateChild(ft,mt))}));const lt=syncPointViewExistsForQuery(st,_e);if(!lt&&!_e._queryParams.loadsAllData()){const dt=syncTreeMakeQueryKey_(_e);assert(!et.queryToTagMap.has(dt),"View does not exist, but we have a tag");const ft=syncTreeGetNextQueryTag_();et.queryToTagMap.set(dt,ft),et.tagToQueryMap.set(ft,dt)}const ct=writeTreeChildWrites(et.pendingWriteTree_,rt);let ut=syncPointAddEventRegistration(st,_e,tt,ct,it,at);if(!lt&&!ot&&!nt){const dt=syncPointViewForQuery(st,_e);ut=ut.concat(syncTreeSetupListener_(et,_e,dt))}return ut}function syncTreeCalcCompleteEventCache(et,_e,tt){const rt=et.pendingWriteTree_,it=et.syncPointTree_.findOnPath(_e,(ot,st)=>{const at=newRelativePath(ot,_e),lt=syncPointGetCompleteServerCache(st,at);if(lt)return lt});return writeTreeCalcCompleteEventCache(rt,_e,it,tt,!0)}function syncTreeGetServerValue(et,_e){const tt=_e._path;let nt=null;et.syncPointTree_.foreachOnPath(tt,(lt,ct)=>{const ut=newRelativePath(lt,tt);nt=nt||syncPointGetCompleteServerCache(ct,ut)});let rt=et.syncPointTree_.get(tt);rt?nt=nt||syncPointGetCompleteServerCache(rt,newEmptyPath()):(rt=new SyncPoint,et.syncPointTree_=et.syncPointTree_.set(tt,rt));const it=nt!=null,ot=it?new CacheNode(nt,!0,!1):null,st=writeTreeChildWrites(et.pendingWriteTree_,_e._path),at=syncPointGetView(rt,_e,st,it?ot.getNode():ChildrenNode.EMPTY_NODE,it);return viewGetCompleteNode(at)}function syncTreeApplyOperationToSyncPoints_(et,_e){return syncTreeApplyOperationHelper_(_e,et.syncPointTree_,null,writeTreeChildWrites(et.pendingWriteTree_,newEmptyPath()))}function syncTreeApplyOperationHelper_(et,_e,tt,nt){if(pathIsEmpty(et.path))return syncTreeApplyOperationDescendantsHelper_(et,_e,tt,nt);{const rt=_e.get(newEmptyPath());tt==null&&rt!=null&&(tt=syncPointGetCompleteServerCache(rt,newEmptyPath()));let it=[];const ot=pathGetFront(et.path),st=et.operationForChild(ot),at=_e.children.get(ot);if(at&&st){const lt=tt?tt.getImmediateChild(ot):null,ct=writeTreeRefChild(nt,ot);it=it.concat(syncTreeApplyOperationHelper_(st,at,lt,ct))}return rt&&(it=it.concat(syncPointApplyOperation(rt,et,nt,tt))),it}}function syncTreeApplyOperationDescendantsHelper_(et,_e,tt,nt){const rt=_e.get(newEmptyPath());tt==null&&rt!=null&&(tt=syncPointGetCompleteServerCache(rt,newEmptyPath()));let it=[];return _e.children.inorderTraversal((ot,st)=>{const at=tt?tt.getImmediateChild(ot):null,lt=writeTreeRefChild(nt,ot),ct=et.operationForChild(ot);ct&&(it=it.concat(syncTreeApplyOperationDescendantsHelper_(ct,st,at,lt)))}),rt&&(it=it.concat(syncPointApplyOperation(rt,et,nt,tt))),it}function syncTreeCreateListenerForView_(et,_e){const tt=_e.query,nt=syncTreeTagForQuery(et,tt);return{hashFn:()=>(viewGetServerCache(_e)||ChildrenNode.EMPTY_NODE).hash(),onComplete:rt=>{if(rt==="ok")return nt?syncTreeApplyTaggedListenComplete(et,tt._path,nt):syncTreeApplyListenComplete(et,tt._path);{const it=errorForServerCode(rt,tt);return syncTreeRemoveEventRegistration(et,tt,null,it)}}}}function syncTreeTagForQuery(et,_e){const tt=syncTreeMakeQueryKey_(_e);return et.queryToTagMap.get(tt)}function syncTreeMakeQueryKey_(et){return et._path.toString()+"$"+et._queryIdentifier}function syncTreeQueryKeyForTag_(et,_e){return et.tagToQueryMap.get(_e)}function syncTreeParseQueryKey_(et){const _e=et.indexOf("$");return assert(_e!==-1&&_e<et.length-1,"Bad queryKey."),{queryId:et.substr(_e+1),path:new Path$1(et.substr(0,_e))}}function syncTreeApplyTaggedOperation_(et,_e,tt){const nt=et.syncPointTree_.get(_e);assert(nt,"Missing sync point for query tag that we're tracking");const rt=writeTreeChildWrites(et.pendingWriteTree_,_e);return syncPointApplyOperation(nt,tt,rt,null)}function syncTreeCollectDistinctViewsForSubTree_(et){return et.fold((_e,tt,nt)=>{if(tt&&syncPointHasCompleteView(tt))return[syncPointGetCompleteView(tt)];{let rt=[];return tt&&(rt=syncPointGetQueryViews(tt)),each(nt,(it,ot)=>{rt=rt.concat(ot)}),rt}})}function syncTreeQueryForListening_(et){return et._queryParams.loadsAllData()&&!et._queryParams.isDefault()?new(syncTreeGetReferenceConstructor())(et._repo,et._path):et}function syncTreeRemoveTags_(et,_e){for(let tt=0;tt<_e.length;++tt){const nt=_e[tt];if(!nt._queryParams.loadsAllData()){const rt=syncTreeMakeQueryKey_(nt),it=et.queryToTagMap.get(rt);et.queryToTagMap.delete(rt),et.tagToQueryMap.delete(it)}}}function syncTreeGetNextQueryTag_(){return syncTreeNextQueryTag_++}function syncTreeSetupListener_(et,_e,tt){const nt=_e._path,rt=syncTreeTagForQuery(et,_e),it=syncTreeCreateListenerForView_(et,tt),ot=et.listenProvider_.startListening(syncTreeQueryForListening_(_e),rt,it.hashFn,it.onComplete),st=et.syncPointTree_.subtree(nt);if(rt)assert(!syncPointHasCompleteView(st.value),"If we're adding a query, it shouldn't be shadowed");else{const at=st.fold((lt,ct,ut)=>{if(!pathIsEmpty(lt)&&ct&&syncPointHasCompleteView(ct))return[syncPointGetCompleteView(ct).query];{let dt=[];return ct&&(dt=dt.concat(syncPointGetQueryViews(ct).map(ft=>ft.query))),each(ut,(ft,pt)=>{dt=dt.concat(pt)}),dt}});for(let lt=0;lt<at.length;++lt){const ct=at[lt];et.listenProvider_.stopListening(syncTreeQueryForListening_(ct),syncTreeTagForQuery(et,ct))}}return ot}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistingValueProvider{constructor(_e){this.node_=_e}getImmediateChild(_e){const tt=this.node_.getImmediateChild(_e);return new ExistingValueProvider(tt)}node(){return this.node_}}class DeferredValueProvider{constructor(_e,tt){this.syncTree_=_e,this.path_=tt}getImmediateChild(_e){const tt=pathChild(this.path_,_e);return new DeferredValueProvider(this.syncTree_,tt)}node(){return syncTreeCalcCompleteEventCache(this.syncTree_,this.path_)}}const generateWithValues=function(et){return et=et||{},et.timestamp=et.timestamp||new Date().getTime(),et},resolveDeferredLeafValue=function(et,_e,tt){if(!et||typeof et!="object")return et;if(assert(".sv"in et,"Unexpected leaf node or priority contents"),typeof et[".sv"]=="string")return resolveScalarDeferredValue(et[".sv"],_e,tt);if(typeof et[".sv"]=="object")return resolveComplexDeferredValue(et[".sv"],_e);assert(!1,"Unexpected server value: "+JSON.stringify(et,null,2))},resolveScalarDeferredValue=function(et,_e,tt){switch(et){case"timestamp":return tt.timestamp;default:assert(!1,"Unexpected server value: "+et)}},resolveComplexDeferredValue=function(et,_e,tt){et.hasOwnProperty("increment")||assert(!1,"Unexpected server value: "+JSON.stringify(et,null,2));const nt=et.increment;typeof nt!="number"&&assert(!1,"Unexpected increment value: "+nt);const rt=_e.node();if(assert(rt!==null&&typeof rt<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!rt.isLeafNode())return nt;const ot=rt.getValue();return typeof ot!="number"?nt:ot+nt},resolveDeferredValueTree=function(et,_e,tt,nt){return resolveDeferredValue(_e,new DeferredValueProvider(tt,et),nt)},resolveDeferredValueSnapshot=function(et,_e,tt){return resolveDeferredValue(et,new ExistingValueProvider(_e),tt)};function resolveDeferredValue(et,_e,tt){const nt=et.getPriority().val(),rt=resolveDeferredLeafValue(nt,_e.getImmediateChild(".priority"),tt);let it;if(et.isLeafNode()){const ot=et,st=resolveDeferredLeafValue(ot.getValue(),_e,tt);return st!==ot.getValue()||rt!==ot.getPriority().val()?new LeafNode(st,nodeFromJSON(rt)):et}else{const ot=et;return it=ot,rt!==ot.getPriority().val()&&(it=it.updatePriority(new LeafNode(rt))),ot.forEachChild(PRIORITY_INDEX,(st,at)=>{const lt=resolveDeferredValue(at,_e.getImmediateChild(st),tt);lt!==at&&(it=it.updateImmediateChild(st,lt))}),it}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tree{constructor(_e="",tt=null,nt={children:{},childCount:0}){this.name=_e,this.parent=tt,this.node=nt}}function treeSubTree(et,_e){let tt=_e instanceof Path$1?_e:new Path$1(_e),nt=et,rt=pathGetFront(tt);for(;rt!==null;){const it=safeGet(nt.node.children,rt)||{children:{},childCount:0};nt=new Tree(rt,nt,it),tt=pathPopFront(tt),rt=pathGetFront(tt)}return nt}function treeGetValue(et){return et.node.value}function treeSetValue(et,_e){et.node.value=_e,treeUpdateParents(et)}function treeHasChildren(et){return et.node.childCount>0}function treeIsEmpty(et){return treeGetValue(et)===void 0&&!treeHasChildren(et)}function treeForEachChild(et,_e){each(et.node.children,(tt,nt)=>{_e(new Tree(tt,et,nt))})}function treeForEachDescendant(et,_e,tt,nt){tt&&!nt&&_e(et),treeForEachChild(et,rt=>{treeForEachDescendant(rt,_e,!0,nt)}),tt&&nt&&_e(et)}function treeForEachAncestor(et,_e,tt){let nt=tt?et:et.parent;for(;nt!==null;){if(_e(nt))return!0;nt=nt.parent}return!1}function treeGetPath(et){return new Path$1(et.parent===null?et.name:treeGetPath(et.parent)+"/"+et.name)}function treeUpdateParents(et){et.parent!==null&&treeUpdateChild(et.parent,et.name,et)}function treeUpdateChild(et,_e,tt){const nt=treeIsEmpty(tt),rt=contains$2(et.node.children,_e);nt&&rt?(delete et.node.children[_e],et.node.childCount--,treeUpdateParents(et)):!nt&&!rt&&(et.node.children[_e]=tt.node,et.node.childCount++,treeUpdateParents(et))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INVALID_KEY_REGEX_=/[\[\].#$\/\u0000-\u001F\u007F]/,INVALID_PATH_REGEX_=/[\[\].#$\u0000-\u001F\u007F]/,MAX_LEAF_SIZE_=10*1024*1024,isValidKey=function(et){return typeof et=="string"&&et.length!==0&&!INVALID_KEY_REGEX_.test(et)},isValidPathString=function(et){return typeof et=="string"&&et.length!==0&&!INVALID_PATH_REGEX_.test(et)},isValidRootPathString=function(et){return et&&(et=et.replace(/^\/*\.info(\/|$)/,"/")),isValidPathString(et)},validateFirebaseDataArg=function(et,_e,tt,nt){nt&&_e===void 0||validateFirebaseData(errorPrefix(et,"value"),_e,tt)},validateFirebaseData=function(et,_e,tt){const nt=tt instanceof Path$1?new ValidationPath(tt,et):tt;if(_e===void 0)throw new Error(et+"contains undefined "+validationPathToErrorString(nt));if(typeof _e=="function")throw new Error(et+"contains a function "+validationPathToErrorString(nt)+" with contents = "+_e.toString());if(isInvalidJSONNumber(_e))throw new Error(et+"contains "+_e.toString()+" "+validationPathToErrorString(nt));if(typeof _e=="string"&&_e.length>MAX_LEAF_SIZE_/3&&stringLength(_e)>MAX_LEAF_SIZE_)throw new Error(et+"contains a string greater than "+MAX_LEAF_SIZE_+" utf8 bytes "+validationPathToErrorString(nt)+" ('"+_e.substring(0,50)+"...')");if(_e&&typeof _e=="object"){let rt=!1,it=!1;if(each(_e,(ot,st)=>{if(ot===".value")rt=!0;else if(ot!==".priority"&&ot!==".sv"&&(it=!0,!isValidKey(ot)))throw new Error(et+" contains an invalid key ("+ot+") "+validationPathToErrorString(nt)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);validationPathPush(nt,ot),validateFirebaseData(et,st,nt),validationPathPop(nt)}),rt&&it)throw new Error(et+' contains ".value" child '+validationPathToErrorString(nt)+" in addition to actual children.")}},validatePathString=function(et,_e,tt,nt){if(!(nt&&tt===void 0)&&!isValidPathString(tt))throw new Error(errorPrefix(et,_e)+'was an invalid path = "'+tt+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},validateRootPathString=function(et,_e,tt,nt){tt&&(tt=tt.replace(/^\/*\.info(\/|$)/,"/")),validatePathString(et,_e,tt,nt)},validateWritablePath=function(et,_e){if(pathGetFront(_e)===".info")throw new Error(et+" failed = Can't modify data under /.info/")},validateUrl=function(et,_e){const tt=_e.path.toString();if(typeof _e.repoInfo.host!="string"||_e.repoInfo.host.length===0||!isValidKey(_e.repoInfo.namespace)&&_e.repoInfo.host.split(":")[0]!=="localhost"||tt.length!==0&&!isValidRootPathString(tt))throw new Error(errorPrefix(et,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EventQueue{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function eventQueueQueueEvents(et,_e){let tt=null;for(let nt=0;nt<_e.length;nt++){const rt=_e[nt],it=rt.getPath();tt!==null&&!pathEquals(it,tt.path)&&(et.eventLists_.push(tt),tt=null),tt===null&&(tt={events:[],path:it}),tt.events.push(rt)}tt&&et.eventLists_.push(tt)}function eventQueueRaiseEventsForChangedPath(et,_e,tt){eventQueueQueueEvents(et,tt),eventQueueRaiseQueuedEventsMatchingPredicate(et,nt=>pathContains(nt,_e)||pathContains(_e,nt))}function eventQueueRaiseQueuedEventsMatchingPredicate(et,_e){et.recursionDepth_++;let tt=!0;for(let nt=0;nt<et.eventLists_.length;nt++){const rt=et.eventLists_[nt];if(rt){const it=rt.path;_e(it)?(eventListRaise(et.eventLists_[nt]),et.eventLists_[nt]=null):tt=!1}}tt&&(et.eventLists_=[]),et.recursionDepth_--}function eventListRaise(et){for(let _e=0;_e<et.events.length;_e++){const tt=et.events[_e];if(tt!==null){et.events[_e]=null;const nt=tt.getEventRunner();logger&&log$1("event: "+tt.toString()),exceptionGuard(nt)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INTERRUPT_REASON="repo_interrupt",MAX_TRANSACTION_RETRIES=25;class Repo{constructor(_e,tt,nt,rt){this.repoInfo_=_e,this.forceRestClient_=tt,this.authTokenProvider_=nt,this.appCheckProvider_=rt,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new EventQueue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=newSparseSnapshotTree(),this.transactionQueueTree_=new Tree,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function repoStart(et,_e,tt){if(et.stats_=statsManagerGetCollection(et.repoInfo_),et.forceRestClient_||beingCrawled())et.server_=new ReadonlyRestClient(et.repoInfo_,(nt,rt,it,ot)=>{repoOnDataUpdate(et,nt,rt,it,ot)},et.authTokenProvider_,et.appCheckProvider_),setTimeout(()=>repoOnConnectStatus(et,!0),0);else{if(typeof tt<"u"&&tt!==null){if(typeof tt!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{stringify(tt)}catch(nt){throw new Error("Invalid authOverride provided: "+nt)}}et.persistentConnection_=new PersistentConnection(et.repoInfo_,_e,(nt,rt,it,ot)=>{repoOnDataUpdate(et,nt,rt,it,ot)},nt=>{repoOnConnectStatus(et,nt)},nt=>{repoOnServerInfoUpdate(et,nt)},et.authTokenProvider_,et.appCheckProvider_,tt),et.server_=et.persistentConnection_}et.authTokenProvider_.addTokenChangeListener(nt=>{et.server_.refreshAuthToken(nt)}),et.appCheckProvider_.addTokenChangeListener(nt=>{et.server_.refreshAppCheckToken(nt.token)}),et.statsReporter_=statsManagerGetOrCreateReporter(et.repoInfo_,()=>new StatsReporter(et.stats_,et.server_)),et.infoData_=new SnapshotHolder,et.infoSyncTree_=new SyncTree({startListening:(nt,rt,it,ot)=>{let st=[];const at=et.infoData_.getNode(nt._path);return at.isEmpty()||(st=syncTreeApplyServerOverwrite(et.infoSyncTree_,nt._path,at),setTimeout(()=>{ot("ok")},0)),st},stopListening:()=>{}}),repoUpdateInfo(et,"connected",!1),et.serverSyncTree_=new SyncTree({startListening:(nt,rt,it,ot)=>(et.server_.listen(nt,it,rt,(st,at)=>{const lt=ot(st,at);eventQueueRaiseEventsForChangedPath(et.eventQueue_,nt._path,lt)}),[]),stopListening:(nt,rt)=>{et.server_.unlisten(nt,rt)}})}function repoServerTime(et){const tt=et.infoData_.getNode(new Path$1(".info/serverTimeOffset")).val()||0;return new Date().getTime()+tt}function repoGenerateServerValues(et){return generateWithValues({timestamp:repoServerTime(et)})}function repoOnDataUpdate(et,_e,tt,nt,rt){et.dataUpdateCount++;const it=new Path$1(_e);tt=et.interceptServerDataCallback_?et.interceptServerDataCallback_(_e,tt):tt;let ot=[];if(rt)if(nt){const at=map$1(tt,lt=>nodeFromJSON(lt));ot=syncTreeApplyTaggedQueryMerge(et.serverSyncTree_,it,at,rt)}else{const at=nodeFromJSON(tt);ot=syncTreeApplyTaggedQueryOverwrite(et.serverSyncTree_,it,at,rt)}else if(nt){const at=map$1(tt,lt=>nodeFromJSON(lt));ot=syncTreeApplyServerMerge(et.serverSyncTree_,it,at)}else{const at=nodeFromJSON(tt);ot=syncTreeApplyServerOverwrite(et.serverSyncTree_,it,at)}let st=it;ot.length>0&&(st=repoRerunTransactions(et,it)),eventQueueRaiseEventsForChangedPath(et.eventQueue_,st,ot)}function repoOnConnectStatus(et,_e){repoUpdateInfo(et,"connected",_e),_e===!1&&repoRunOnDisconnectEvents(et)}function repoOnServerInfoUpdate(et,_e){each(_e,(tt,nt)=>{repoUpdateInfo(et,tt,nt)})}function repoUpdateInfo(et,_e,tt){const nt=new Path$1("/.info/"+_e),rt=nodeFromJSON(tt);et.infoData_.updateSnapshot(nt,rt);const it=syncTreeApplyServerOverwrite(et.infoSyncTree_,nt,rt);eventQueueRaiseEventsForChangedPath(et.eventQueue_,nt,it)}function repoGetNextWriteId(et){return et.nextWriteId_++}function repoGetValue(et,_e,tt){const nt=syncTreeGetServerValue(et.serverSyncTree_,_e);return nt!=null?Promise.resolve(nt):et.server_.get(_e).then(rt=>{const it=nodeFromJSON(rt).withIndex(_e._queryParams.getIndex());syncTreeAddEventRegistration(et.serverSyncTree_,_e,tt,!0);let ot;if(_e._queryParams.loadsAllData())ot=syncTreeApplyServerOverwrite(et.serverSyncTree_,_e._path,it);else{const st=syncTreeTagForQuery(et.serverSyncTree_,_e);ot=syncTreeApplyTaggedQueryOverwrite(et.serverSyncTree_,_e._path,it,st)}return eventQueueRaiseEventsForChangedPath(et.eventQueue_,_e._path,ot),syncTreeRemoveEventRegistration(et.serverSyncTree_,_e,tt,null,!0),it},rt=>(repoLog(et,"get for query "+stringify(_e)+" failed: "+rt),Promise.reject(new Error(rt))))}function repoSetWithPriority(et,_e,tt,nt,rt){repoLog(et,"set",{path:_e.toString(),value:tt,priority:nt});const it=repoGenerateServerValues(et),ot=nodeFromJSON(tt,nt),st=syncTreeCalcCompleteEventCache(et.serverSyncTree_,_e),at=resolveDeferredValueSnapshot(ot,st,it),lt=repoGetNextWriteId(et),ct=syncTreeApplyUserOverwrite(et.serverSyncTree_,_e,at,lt,!0);eventQueueQueueEvents(et.eventQueue_,ct),et.server_.put(_e.toString(),ot.val(!0),(dt,ft)=>{const pt=dt==="ok";pt||warn("set at "+_e+" failed: "+dt);const mt=syncTreeAckUserWrite(et.serverSyncTree_,lt,!pt);eventQueueRaiseEventsForChangedPath(et.eventQueue_,_e,mt),repoCallOnCompleteCallback(et,rt,dt,ft)});const ut=repoAbortTransactions(et,_e);repoRerunTransactions(et,ut),eventQueueRaiseEventsForChangedPath(et.eventQueue_,ut,[])}function repoRunOnDisconnectEvents(et){repoLog(et,"onDisconnectEvents");const _e=repoGenerateServerValues(et),tt=newSparseSnapshotTree();sparseSnapshotTreeForEachTree(et.onDisconnect_,newEmptyPath(),(rt,it)=>{const ot=resolveDeferredValueTree(rt,it,et.serverSyncTree_,_e);sparseSnapshotTreeRemember(tt,rt,ot)});let nt=[];sparseSnapshotTreeForEachTree(tt,newEmptyPath(),(rt,it)=>{nt=nt.concat(syncTreeApplyServerOverwrite(et.serverSyncTree_,rt,it));const ot=repoAbortTransactions(et,rt);repoRerunTransactions(et,ot)}),et.onDisconnect_=newSparseSnapshotTree(),eventQueueRaiseEventsForChangedPath(et.eventQueue_,newEmptyPath(),nt)}function repoInterrupt(et){et.persistentConnection_&&et.persistentConnection_.interrupt(INTERRUPT_REASON)}function repoLog(et,..._e){let tt="";et.persistentConnection_&&(tt=et.persistentConnection_.id+":"),log$1(tt,..._e)}function repoCallOnCompleteCallback(et,_e,tt,nt){_e&&exceptionGuard(()=>{if(tt==="ok")_e(null);else{const rt=(tt||"error").toUpperCase();let it=rt;nt&&(it+=": "+nt);const ot=new Error(it);ot.code=rt,_e(ot)}})}function repoGetLatestState(et,_e,tt){return syncTreeCalcCompleteEventCache(et.serverSyncTree_,_e,tt)||ChildrenNode.EMPTY_NODE}function repoSendReadyTransactions(et,_e=et.transactionQueueTree_){if(_e||repoPruneCompletedTransactionsBelowNode(et,_e),treeGetValue(_e)){const tt=repoBuildTransactionQueue(et,_e);assert(tt.length>0,"Sending zero length transaction queue"),tt.every(rt=>rt.status===0)&&repoSendTransactionQueue(et,treeGetPath(_e),tt)}else treeHasChildren(_e)&&treeForEachChild(_e,tt=>{repoSendReadyTransactions(et,tt)})}function repoSendTransactionQueue(et,_e,tt){const nt=tt.map(lt=>lt.currentWriteId),rt=repoGetLatestState(et,_e,nt);let it=rt;const ot=rt.hash();for(let lt=0;lt<tt.length;lt++){const ct=tt[lt];assert(ct.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),ct.status=1,ct.retryCount++;const ut=newRelativePath(_e,ct.path);it=it.updateChild(ut,ct.currentOutputSnapshotRaw)}const st=it.val(!0),at=_e;et.server_.put(at.toString(),st,lt=>{repoLog(et,"transaction put response",{path:at.toString(),status:lt});let ct=[];if(lt==="ok"){const ut=[];for(let dt=0;dt<tt.length;dt++)tt[dt].status=2,ct=ct.concat(syncTreeAckUserWrite(et.serverSyncTree_,tt[dt].currentWriteId)),tt[dt].onComplete&&ut.push(()=>tt[dt].onComplete(null,!0,tt[dt].currentOutputSnapshotResolved)),tt[dt].unwatcher();repoPruneCompletedTransactionsBelowNode(et,treeSubTree(et.transactionQueueTree_,_e)),repoSendReadyTransactions(et,et.transactionQueueTree_),eventQueueRaiseEventsForChangedPath(et.eventQueue_,_e,ct);for(let dt=0;dt<ut.length;dt++)exceptionGuard(ut[dt])}else{if(lt==="datastale")for(let ut=0;ut<tt.length;ut++)tt[ut].status===3?tt[ut].status=4:tt[ut].status=0;else{warn("transaction at "+at.toString()+" failed: "+lt);for(let ut=0;ut<tt.length;ut++)tt[ut].status=4,tt[ut].abortReason=lt}repoRerunTransactions(et,_e)}},ot)}function repoRerunTransactions(et,_e){const tt=repoGetAncestorTransactionNode(et,_e),nt=treeGetPath(tt),rt=repoBuildTransactionQueue(et,tt);return repoRerunTransactionQueue(et,rt,nt),nt}function repoRerunTransactionQueue(et,_e,tt){if(_e.length===0)return;const nt=[];let rt=[];const ot=_e.filter(st=>st.status===0).map(st=>st.currentWriteId);for(let st=0;st<_e.length;st++){const at=_e[st],lt=newRelativePath(tt,at.path);let ct=!1,ut;if(assert(lt!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),at.status===4)ct=!0,ut=at.abortReason,rt=rt.concat(syncTreeAckUserWrite(et.serverSyncTree_,at.currentWriteId,!0));else if(at.status===0)if(at.retryCount>=MAX_TRANSACTION_RETRIES)ct=!0,ut="maxretry",rt=rt.concat(syncTreeAckUserWrite(et.serverSyncTree_,at.currentWriteId,!0));else{const dt=repoGetLatestState(et,at.path,ot);at.currentInputSnapshot=dt;const ft=_e[st].update(dt.val());if(ft!==void 0){validateFirebaseData("transaction failed: Data returned ",ft,at.path);let pt=nodeFromJSON(ft);typeof ft=="object"&&ft!=null&&contains$2(ft,".priority")||(pt=pt.updatePriority(dt.getPriority()));const xt=at.currentWriteId,gt=repoGenerateServerValues(et),ht=resolveDeferredValueSnapshot(pt,dt,gt);at.currentOutputSnapshotRaw=pt,at.currentOutputSnapshotResolved=ht,at.currentWriteId=repoGetNextWriteId(et),ot.splice(ot.indexOf(xt),1),rt=rt.concat(syncTreeApplyUserOverwrite(et.serverSyncTree_,at.path,ht,at.currentWriteId,at.applyLocally)),rt=rt.concat(syncTreeAckUserWrite(et.serverSyncTree_,xt,!0))}else ct=!0,ut="nodata",rt=rt.concat(syncTreeAckUserWrite(et.serverSyncTree_,at.currentWriteId,!0))}eventQueueRaiseEventsForChangedPath(et.eventQueue_,tt,rt),rt=[],ct&&(_e[st].status=2,function(dt){setTimeout(dt,Math.floor(0))}(_e[st].unwatcher),_e[st].onComplete&&(ut==="nodata"?nt.push(()=>_e[st].onComplete(null,!1,_e[st].currentInputSnapshot)):nt.push(()=>_e[st].onComplete(new Error(ut),!1,null))))}repoPruneCompletedTransactionsBelowNode(et,et.transactionQueueTree_);for(let st=0;st<nt.length;st++)exceptionGuard(nt[st]);repoSendReadyTransactions(et,et.transactionQueueTree_)}function repoGetAncestorTransactionNode(et,_e){let tt,nt=et.transactionQueueTree_;for(tt=pathGetFront(_e);tt!==null&&treeGetValue(nt)===void 0;)nt=treeSubTree(nt,tt),_e=pathPopFront(_e),tt=pathGetFront(_e);return nt}function repoBuildTransactionQueue(et,_e){const tt=[];return repoAggregateTransactionQueuesForNode(et,_e,tt),tt.sort((nt,rt)=>nt.order-rt.order),tt}function repoAggregateTransactionQueuesForNode(et,_e,tt){const nt=treeGetValue(_e);if(nt)for(let rt=0;rt<nt.length;rt++)tt.push(nt[rt]);treeForEachChild(_e,rt=>{repoAggregateTransactionQueuesForNode(et,rt,tt)})}function repoPruneCompletedTransactionsBelowNode(et,_e){const tt=treeGetValue(_e);if(tt){let nt=0;for(let rt=0;rt<tt.length;rt++)tt[rt].status!==2&&(tt[nt]=tt[rt],nt++);tt.length=nt,treeSetValue(_e,tt.length>0?tt:void 0)}treeForEachChild(_e,nt=>{repoPruneCompletedTransactionsBelowNode(et,nt)})}function repoAbortTransactions(et,_e){const tt=treeGetPath(repoGetAncestorTransactionNode(et,_e)),nt=treeSubTree(et.transactionQueueTree_,_e);return treeForEachAncestor(nt,rt=>{repoAbortTransactionsOnNode(et,rt)}),repoAbortTransactionsOnNode(et,nt),treeForEachDescendant(nt,rt=>{repoAbortTransactionsOnNode(et,rt)}),tt}function repoAbortTransactionsOnNode(et,_e){const tt=treeGetValue(_e);if(tt){const nt=[];let rt=[],it=-1;for(let ot=0;ot<tt.length;ot++)tt[ot].status===3||(tt[ot].status===1?(assert(it===ot-1,"All SENT items should be at beginning of queue."),it=ot,tt[ot].status=3,tt[ot].abortReason="set"):(assert(tt[ot].status===0,"Unexpected transaction status in abort"),tt[ot].unwatcher(),rt=rt.concat(syncTreeAckUserWrite(et.serverSyncTree_,tt[ot].currentWriteId,!0)),tt[ot].onComplete&&nt.push(tt[ot].onComplete.bind(null,new Error("set"),!1,null))));it===-1?treeSetValue(_e,void 0):tt.length=it+1,eventQueueRaiseEventsForChangedPath(et.eventQueue_,treeGetPath(_e),rt);for(let ot=0;ot<nt.length;ot++)exceptionGuard(nt[ot])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function decodePath(et){let _e="";const tt=et.split("/");for(let nt=0;nt<tt.length;nt++)if(tt[nt].length>0){let rt=tt[nt];try{rt=decodeURIComponent(rt.replace(/\+/g," "))}catch{}_e+="/"+rt}return _e}function decodeQuery(et){const _e={};et.charAt(0)==="?"&&(et=et.substring(1));for(const tt of et.split("&")){if(tt.length===0)continue;const nt=tt.split("=");nt.length===2?_e[decodeURIComponent(nt[0])]=decodeURIComponent(nt[1]):warn(`Invalid query segment '${tt}' in query '${et}'`)}return _e}const parseRepoInfo=function(et,_e){const tt=parseDatabaseURL(et),nt=tt.namespace;tt.domain==="firebase.com"&&fatal(tt.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!nt||nt==="undefined")&&tt.domain!=="localhost"&&fatal("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),tt.secure||warnIfPageIsSecure();const rt=tt.scheme==="ws"||tt.scheme==="wss";return{repoInfo:new RepoInfo(tt.host,tt.secure,nt,rt,_e,"",nt!==tt.subdomain),path:new Path$1(tt.pathString)}},parseDatabaseURL=function(et){let _e="",tt="",nt="",rt="",it="",ot=!0,st="https",at=443;if(typeof et=="string"){let lt=et.indexOf("//");lt>=0&&(st=et.substring(0,lt-1),et=et.substring(lt+2));let ct=et.indexOf("/");ct===-1&&(ct=et.length);let ut=et.indexOf("?");ut===-1&&(ut=et.length),_e=et.substring(0,Math.min(ct,ut)),ct<ut&&(rt=decodePath(et.substring(ct,ut)));const dt=decodeQuery(et.substring(Math.min(et.length,ut)));lt=_e.indexOf(":"),lt>=0?(ot=st==="https"||st==="wss",at=parseInt(_e.substring(lt+1),10)):lt=_e.length;const ft=_e.slice(0,lt);if(ft.toLowerCase()==="localhost")tt="localhost";else if(ft.split(".").length<=2)tt=ft;else{const pt=_e.indexOf(".");nt=_e.substring(0,pt).toLowerCase(),tt=_e.substring(pt+1),it=nt}"ns"in dt&&(it=dt.ns)}return{host:_e,port:at,domain:tt,subdomain:nt,secure:ot,scheme:st,pathString:rt,namespace:it}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DataEvent{constructor(_e,tt,nt,rt){this.eventType=_e,this.eventRegistration=tt,this.snapshot=nt,this.prevName=rt}getPath(){const _e=this.snapshot.ref;return this.eventType==="value"?_e._path:_e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+stringify(this.snapshot.exportVal())}}class CancelEvent{constructor(_e,tt,nt){this.eventRegistration=_e,this.error=tt,this.path=nt}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CallbackContext{constructor(_e,tt){this.snapshotCallback=_e,this.cancelCallback=tt}onValue(_e,tt){this.snapshotCallback.call(null,_e,tt)}onCancel(_e){return assert(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,_e)}get hasCancelCallback(){return!!this.cancelCallback}matches(_e){return this.snapshotCallback===_e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===_e.snapshotCallback.userCallback&&this.snapshotCallback.context===_e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryImpl{constructor(_e,tt,nt,rt){this._repo=_e,this._path=tt,this._queryParams=nt,this._orderByCalled=rt}get key(){return pathIsEmpty(this._path)?null:pathGetBack(this._path)}get ref(){return new ReferenceImpl(this._repo,this._path)}get _queryIdentifier(){const _e=queryParamsGetQueryObject(this._queryParams),tt=ObjectToUniqueKey(_e);return tt==="{}"?"default":tt}get _queryObject(){return queryParamsGetQueryObject(this._queryParams)}isEqual(_e){if(_e=getModularInstance(_e),!(_e instanceof QueryImpl))return!1;const tt=this._repo===_e._repo,nt=pathEquals(this._path,_e._path),rt=this._queryIdentifier===_e._queryIdentifier;return tt&&nt&&rt}toJSON(){return this.toString()}toString(){return this._repo.toString()+pathToUrlEncodedString(this._path)}}class ReferenceImpl extends QueryImpl{constructor(_e,tt){super(_e,tt,new QueryParams,!1)}get parent(){const _e=pathParent(this._path);return _e===null?null:new ReferenceImpl(this._repo,_e)}get root(){let _e=this;for(;_e.parent!==null;)_e=_e.parent;return _e}}class DataSnapshot{constructor(_e,tt,nt){this._node=_e,this.ref=tt,this._index=nt}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(_e){const tt=new Path$1(_e),nt=child(this.ref,_e);return new DataSnapshot(this._node.getChild(tt),nt,PRIORITY_INDEX)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(_e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(nt,rt)=>_e(new DataSnapshot(rt,child(this.ref,nt),PRIORITY_INDEX)))}hasChild(_e){const tt=new Path$1(_e);return!this._node.getChild(tt).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ref(et,_e){return et=getModularInstance(et),et._checkNotDeleted("ref"),_e!==void 0?child(et._root,_e):et._root}function child(et,_e){return et=getModularInstance(et),pathGetFront(et._path)===null?validateRootPathString("child","path",_e,!1):validatePathString("child","path",_e,!1),new ReferenceImpl(et._repo,pathChild(et._path,_e))}function remove(et){return validateWritablePath("remove",et._path),set(et,null)}function set(et,_e){et=getModularInstance(et),validateWritablePath("set",et._path),validateFirebaseDataArg("set",_e,et._path,!1);const tt=new Deferred;return repoSetWithPriority(et._repo,et._path,_e,null,tt.wrapCallback(()=>{})),tt.promise}function get(et){et=getModularInstance(et);const _e=new CallbackContext(()=>{}),tt=new ValueEventRegistration(_e);return repoGetValue(et._repo,et,tt).then(nt=>new DataSnapshot(nt,new ReferenceImpl(et._repo,et._path),et._queryParams.getIndex()))}class ValueEventRegistration{constructor(_e){this.callbackContext=_e}respondsTo(_e){return _e==="value"}createEvent(_e,tt){const nt=tt._queryParams.getIndex();return new DataEvent("value",this,new DataSnapshot(_e.snapshotNode,new ReferenceImpl(tt._repo,tt._path),nt))}getEventRunner(_e){return _e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(_e.error):()=>this.callbackContext.onValue(_e.snapshot,null)}createCancelEvent(_e,tt){return this.callbackContext.hasCancelCallback?new CancelEvent(this,_e,tt):null}matches(_e){return _e instanceof ValueEventRegistration?!_e.callbackContext||!this.callbackContext?!0:_e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}syncPointSetReferenceConstructor(ReferenceImpl);syncTreeSetReferenceConstructor(ReferenceImpl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FIREBASE_DATABASE_EMULATOR_HOST_VAR="FIREBASE_DATABASE_EMULATOR_HOST",repos={};let useRestClient=!1;function repoManagerApplyEmulatorSettings(et,_e,tt,nt){et.repoInfo_=new RepoInfo(`${_e}:${tt}`,!1,et.repoInfo_.namespace,et.repoInfo_.webSocketOnly,et.repoInfo_.nodeAdmin,et.repoInfo_.persistenceKey,et.repoInfo_.includeNamespaceInQueryParams,!0),nt&&(et.authTokenProvider_=nt)}function repoManagerDatabaseFromApp(et,_e,tt,nt,rt){let it=nt||et.options.databaseURL;it===void 0&&(et.options.projectId||fatal("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),log$1("Using default host for project ",et.options.projectId),it=`${et.options.projectId}-default-rtdb.firebaseio.com`);let ot=parseRepoInfo(it,rt),st=ot.repoInfo,at,lt;typeof process<"u"&&define_process_env_default&&(lt=define_process_env_default[FIREBASE_DATABASE_EMULATOR_HOST_VAR]),lt?(at=!0,it=`http://${lt}?ns=${st.namespace}`,ot=parseRepoInfo(it,rt),st=ot.repoInfo):at=!ot.repoInfo.secure;const ct=rt&&at?new EmulatorTokenProvider(EmulatorTokenProvider.OWNER):new FirebaseAuthTokenProvider(et.name,et.options,_e);validateUrl("Invalid Firebase Database URL",ot),pathIsEmpty(ot.path)||fatal("Database URL must point to the root of a Firebase Database (not including a child path).");const ut=repoManagerCreateRepo(st,et,ct,new AppCheckTokenProvider(et.name,tt));return new Database$1(ut,et)}function repoManagerDeleteRepo(et,_e){const tt=repos[_e];(!tt||tt[et.key]!==et)&&fatal(`Database ${_e}(${et.repoInfo_}) has already been deleted.`),repoInterrupt(et),delete tt[et.key]}function repoManagerCreateRepo(et,_e,tt,nt){let rt=repos[_e.name];rt||(rt={},repos[_e.name]=rt);let it=rt[et.toURLString()];return it&&fatal("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),it=new Repo(et,useRestClient,tt,nt),rt[et.toURLString()]=it,it}let Database$1=class{constructor(_e,tt){this._repoInternal=_e,this.app=tt,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(repoStart(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ReferenceImpl(this._repo,newEmptyPath())),this._rootInternal}_delete(){return this._rootInternal!==null&&(repoManagerDeleteRepo(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(_e){this._rootInternal===null&&fatal("Cannot call "+_e+" on a deleted database.")}};function getDatabase(et=getApp(),_e){const tt=_getProvider(et,"database").getImmediate({identifier:_e});if(!tt._instanceStarted){const nt=getDefaultEmulatorHostnameAndPort("database");nt&&connectDatabaseEmulator(tt,...nt)}return tt}function connectDatabaseEmulator(et,_e,tt,nt={}){et=getModularInstance(et),et._checkNotDeleted("useEmulator"),et._instanceStarted&&fatal("Cannot call useEmulator() after instance has already been initialized.");const rt=et._repoInternal;let it;if(rt.repoInfo_.nodeAdmin)nt.mockUserToken&&fatal('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),it=new EmulatorTokenProvider(EmulatorTokenProvider.OWNER);else if(nt.mockUserToken){const ot=typeof nt.mockUserToken=="string"?nt.mockUserToken:createMockUserToken(nt.mockUserToken,et.app.options.projectId);it=new EmulatorTokenProvider(ot)}repoManagerApplyEmulatorSettings(rt,_e,tt,it)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerDatabase(et){setSDKVersion(SDK_VERSION$1),_registerComponent(new Component("database",(_e,{instanceIdentifier:tt})=>{const nt=_e.getProvider("app").getImmediate(),rt=_e.getProvider("auth-internal"),it=_e.getProvider("app-check-internal");return repoManagerDatabaseFromApp(nt,rt,it,tt)},"PUBLIC").setMultipleInstances(!0)),registerVersion(name,version,et),registerVersion(name,version,"esm2017")}PersistentConnection.prototype.simpleListen=function(et,_e){this.sendRequest("q",{p:et},_e)};PersistentConnection.prototype.echo=function(et,_e){this.sendRequest("echo",{d:et},_e)};registerDatabase();function array(et){return et instanceof Array?et:[et]}function onlyDefined(et){return et.filter(_e=>_e!=null)}function uniq(et){return Array.from(new Set(et))}function uniqById(et,_e,tt=(nt,rt)=>rt){const nt={};return et.forEach(rt=>{const it=_e(rt),ot=nt[it];nt[it]=ot===void 0?rt:tt(ot,rt)}),Object.values(nt)}function isString(et){return typeof et=="string"}async function timedAsync(et,_e="Action"){const tt=Date.now();try{return await et()}finally{const nt=Date.now();console.log(`${_e} took ${formatTime(nt-tt)}`)}}function formatTime(et){return`${et.toLocaleString("en-US")} ms`}const databaseUrl="https://pathfinder-app-a4ed5-default-rtdb.firebaseio.com/",firebaseConfig={apiKey:"AIzaSyDGhIl4CO_-MdEsti5mey_n81kKLOVhEjo",authDomain:"pathfinder-app-a4ed5.firebaseapp.com",projectId:"pathfinder-app-a4ed5",storageBucket:"pathfinder-app-a4ed5.appspot.com",messagingSenderId:"716168429331",appId:"1:716168429331:web:6ebc44bc9dab5a0969a4e6",measurementId:"G-N21ZJVKPQN",databaseUrl},app=initializeApp(firebaseConfig),db=getDatabase(app),auth=getAuth(app);auth.onAuthStateChanged(et=>{setGoogleToken(et==null?void 0:et.uid)});const googleAuthProvider=new GoogleAuthProvider;async function firebaseLoginWithEmail(et,_e){let tt;try{tt=await signInWithEmailAndPassword(auth,et,_e)}catch(nt){if(nt instanceof FirebaseError)if(nt.code==="auth/user-not-found")console.error("User not found"),tt=await createUserWithEmailAndPassword(auth,et,_e);else throw nt}tt&&setGoogleToken(tt.user.uid)}function firebaseResetPassword(et){return sendPasswordResetEmail(auth,et)}function firebaseUser(){return auth.currentUser?new User(auth.currentUser.uid,()=>firebaseLogout()):void 0}async function firebaseLoginWithGoogle(){const _e=(await signInWithPopup(auth,googleAuthProvider)).user;setGoogleToken(_e.uid)}async function firebaseAuthResult(){const et=await getRedirectResult(auth);et&&setGoogleToken(et.user.uid)}async function firebaseLogout(){await signOut(auth),setGoogleToken(void 0)}const FirebaseRepository={loadAll:async(et,_e)=>{console.log("Loading all from Firebase");const tt=await get(ref(db,`u/${et}/${_e}`));if(!tt.exists())return;const nt=tt.val();return Object.values(nt)},load:async(et,_e,tt)=>{console.log("Loading from Firebase");const nt=await get(ref(db,`u/${et}/${_e}/${tt}`));if(nt.exists())return nt.val()},save:async(et,_e,tt,nt)=>timedAsync(()=>set(ref(db,`u/${et}/${_e}/${tt}`),nt),"Saved to Firebase"),delete:async(et,_e,tt)=>remove(ref(db,`u/${et}/${_e}/${tt}`))};class User{constructor(_e,tt){this.id=_e,this.logout=tt}}let activeUser;function RequiresAuth({children:et}){return getGoogleToken()!==void 0?et:jsxRuntimeExports.jsx(Navigate,{to:"/login"})}function setGoogleToken(et){if(et===void 0){localStorage.removeItem("google-token");return}localStorage.setItem("google-token",et)}function getGoogleToken(){return localStorage.getItem("google-token")??void 0}async function logout(){await firebaseLogout(),localStorage.removeItem("google-token"),activeUser=void 0}function getActiveUser(){if(activeUser)return activeUser;const et=getGoogleToken();return activeUser=et?new User(et,logout):void 0,activeUser}function useActiveUser(){return getActiveUser()}var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(et){(function(){var _e={}.hasOwnProperty;function tt(){for(var nt=[],rt=0;rt<arguments.length;rt++){var it=arguments[rt];if(it){var ot=typeof it;if(ot==="string"||ot==="number")nt.push(it);else if(Array.isArray(it)){if(it.length){var st=tt.apply(null,it);st&&nt.push(st)}}else if(ot==="object"){if(it.toString!==Object.prototype.toString&&!it.toString.toString().includes("[native code]")){nt.push(it.toString());continue}for(var at in it)_e.call(it,at)&&it[at]&&nt.push(at)}}}return nt.join(" ")}et.exports?(tt.default=tt,et.exports=tt):window.classNames=tt})()})(classnames);var classnamesExports=classnames.exports;const classNames$1=getDefaultExportFromCjs(classnamesExports);function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(et){for(var _e=1;_e<arguments.length;_e++){var tt=arguments[_e];for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(et[nt]=tt[nt])}return et},_extends$6.apply(this,arguments)}function _objectWithoutPropertiesLoose$c(et,_e){if(et==null)return{};var tt={},nt=Object.keys(et),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_e.indexOf(rt)>=0)&&(tt[rt]=et[rt]);return tt}var invariant$2=function(et,_e,tt,nt,rt,it,ot,st){if(!et){var at;if(_e===void 0)at=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var lt=[tt,nt,rt,it,ot,st],ct=0;at=new Error(_e.replace(/%s/g,function(){return lt[ct++]})),at.name="Invariant Violation"}throw at.framesToPop=1,at}},browser$1=invariant$2;const invariant$3=getDefaultExportFromCjs(browser$1);function defaultKey(et){return"default"+et.charAt(0).toUpperCase()+et.substr(1)}function _toPropertyKey$1(et){var _e=_toPrimitive$1(et,"string");return typeof _e=="symbol"?_e:String(_e)}function _toPrimitive$1(et,_e){if(typeof et!="object"||et===null)return et;var tt=et[Symbol.toPrimitive];if(tt!==void 0){var nt=tt.call(et,_e||"default");if(typeof nt!="object")return nt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_e==="string"?String:Number)(et)}function useUncontrolledProp(et,_e,tt){var nt=reactExports.useRef(et!==void 0),rt=reactExports.useState(_e),it=rt[0],ot=rt[1],st=et!==void 0,at=nt.current;return nt.current=st,!st&&at&&it!==_e&&ot(_e),[st?et:it,reactExports.useCallback(function(lt){for(var ct=arguments.length,ut=new Array(ct>1?ct-1:0),dt=1;dt<ct;dt++)ut[dt-1]=arguments[dt];tt&&tt.apply(void 0,[lt].concat(ut)),ot(lt)},[tt])]}function useUncontrolled(et,_e){return Object.keys(_e).reduce(function(tt,nt){var rt,it=tt,ot=it[defaultKey(nt)],st=it[nt],at=_objectWithoutPropertiesLoose$c(it,[defaultKey(nt),nt].map(_toPropertyKey$1)),lt=_e[nt],ct=useUncontrolledProp(st,ot,et[lt]),ut=ct[0],dt=ct[1];return _extends$6({},at,(rt={},rt[nt]=ut,rt[lt]=dt,rt))},et)}function _setPrototypeOf(et,_e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nt,rt){return nt.__proto__=rt,nt},_setPrototypeOf(et,_e)}function _inheritsLoose(et,_e){et.prototype=Object.create(_e.prototype),et.prototype.constructor=et,_setPrototypeOf(et,_e)}const DEFAULT_BREAKPOINTS=["xxl","xl","lg","md","sm","xs"],DEFAULT_MIN_BREAKPOINT="xs",ThemeContext=reactExports.createContext({prefixes:{},breakpoints:DEFAULT_BREAKPOINTS,minBreakpoint:DEFAULT_MIN_BREAKPOINT});function useBootstrapPrefix(et,_e){const{prefixes:tt}=reactExports.useContext(ThemeContext);return et||tt[_e]||_e}function useBootstrapBreakpoints(){const{breakpoints:et}=reactExports.useContext(ThemeContext);return et}function useBootstrapMinBreakpoint(){const{minBreakpoint:et}=reactExports.useContext(ThemeContext);return et}function useIsRTL(){const{dir:et}=reactExports.useContext(ThemeContext);return et==="rtl"}function ownerDocument(et){return et&&et.ownerDocument||document}function ownerWindow(et){var _e=ownerDocument(et);return _e&&_e.defaultView||window}function getComputedStyle$1(et,_e){return ownerWindow(et).getComputedStyle(et,_e)}var rUpper=/([A-Z])/g;function hyphenate(et){return et.replace(rUpper,"-$1").toLowerCase()}var msPattern=/^ms-/;function hyphenateStyleName(et){return hyphenate(et).replace(msPattern,"-ms-")}var supportedTransforms=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function isTransform(et){return!!(et&&supportedTransforms.test(et))}function style$1(et,_e){var tt="",nt="";if(typeof _e=="string")return et.style.getPropertyValue(hyphenateStyleName(_e))||getComputedStyle$1(et).getPropertyValue(hyphenateStyleName(_e));Object.keys(_e).forEach(function(rt){var it=_e[rt];!it&&it!==0?et.style.removeProperty(hyphenateStyleName(rt)):isTransform(rt)?nt+=rt+"("+it+") ":tt+=hyphenateStyleName(rt)+": "+it+";"}),nt&&(tt+="transform: "+nt+";"),et.style.cssText+=";"+tt}var propTypes$3={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function et(nt,rt,it,ot,st,at){if(at!==ReactPropTypesSecret){var lt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw lt.name="Invariant Violation",lt}}et.isRequired=et;function _e(){return et}var tt={array:et,bigint:et,bool:et,func:et,number:et,object:et,string:et,symbol:et,any:et,arrayOf:_e,element:et,elementType:et,instanceOf:_e,node:et,objectOf:_e,oneOf:_e,oneOfType:_e,shape:_e,exact:_e,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return tt.PropTypes=tt,tt};propTypes$3.exports=factoryWithThrowingShims();var propTypesExports=propTypes$3.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports),config$1={disabled:!1},TransitionGroupContext=React.createContext(null);var forceReflow=function(_e){return _e.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(et){_inheritsLoose(_e,et);function _e(nt,rt){var it;it=et.call(this,nt,rt)||this;var ot=rt,st=ot&&!ot.isMounting?nt.enter:nt.appear,at;return it.appearStatus=null,nt.in?st?(at=EXITED,it.appearStatus=ENTERING):at=ENTERED:nt.unmountOnExit||nt.mountOnEnter?at=UNMOUNTED:at=EXITED,it.state={status:at},it.nextCallback=null,it}_e.getDerivedStateFromProps=function(rt,it){var ot=rt.in;return ot&&it.status===UNMOUNTED?{status:EXITED}:null};var tt=_e.prototype;return tt.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},tt.componentDidUpdate=function(rt){var it=null;if(rt!==this.props){var ot=this.state.status;this.props.in?ot!==ENTERING&&ot!==ENTERED&&(it=ENTERING):(ot===ENTERING||ot===ENTERED)&&(it=EXITING)}this.updateStatus(!1,it)},tt.componentWillUnmount=function(){this.cancelNextCallback()},tt.getTimeouts=function(){var rt=this.props.timeout,it,ot,st;return it=ot=st=rt,rt!=null&&typeof rt!="number"&&(it=rt.exit,ot=rt.enter,st=rt.appear!==void 0?rt.appear:ot),{exit:it,enter:ot,appear:st}},tt.updateStatus=function(rt,it){if(rt===void 0&&(rt=!1),it!==null)if(this.cancelNextCallback(),it===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var ot=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);ot&&forceReflow(ot)}this.performEnter(rt)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},tt.performEnter=function(rt){var it=this,ot=this.props.enter,st=this.context?this.context.isMounting:rt,at=this.props.nodeRef?[st]:[ReactDOM.findDOMNode(this),st],lt=at[0],ct=at[1],ut=this.getTimeouts(),dt=st?ut.appear:ut.enter;if(!rt&&!ot||config$1.disabled){this.safeSetState({status:ENTERED},function(){it.props.onEntered(lt)});return}this.props.onEnter(lt,ct),this.safeSetState({status:ENTERING},function(){it.props.onEntering(lt,ct),it.onTransitionEnd(dt,function(){it.safeSetState({status:ENTERED},function(){it.props.onEntered(lt,ct)})})})},tt.performExit=function(){var rt=this,it=this.props.exit,ot=this.getTimeouts(),st=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!it||config$1.disabled){this.safeSetState({status:EXITED},function(){rt.props.onExited(st)});return}this.props.onExit(st),this.safeSetState({status:EXITING},function(){rt.props.onExiting(st),rt.onTransitionEnd(ot.exit,function(){rt.safeSetState({status:EXITED},function(){rt.props.onExited(st)})})})},tt.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},tt.safeSetState=function(rt,it){it=this.setNextCallback(it),this.setState(rt,it)},tt.setNextCallback=function(rt){var it=this,ot=!0;return this.nextCallback=function(st){ot&&(ot=!1,it.nextCallback=null,rt(st))},this.nextCallback.cancel=function(){ot=!1},this.nextCallback},tt.onTransitionEnd=function(rt,it){this.setNextCallback(it);var ot=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),st=rt==null&&!this.props.addEndListener;if(!ot||st){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var at=this.props.nodeRef?[this.nextCallback]:[ot,this.nextCallback],lt=at[0],ct=at[1];this.props.addEndListener(lt,ct)}rt!=null&&setTimeout(this.nextCallback,rt)},tt.render=function(){var rt=this.state.status;if(rt===UNMOUNTED)return null;var it=this.props,ot=it.children;it.in,it.mountOnEnter,it.unmountOnExit,it.appear,it.enter,it.exit,it.timeout,it.addEndListener,it.onEnter,it.onEntering,it.onEntered,it.onExit,it.onExiting,it.onExited,it.nodeRef;var st=_objectWithoutPropertiesLoose$c(it,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React.createElement(TransitionGroupContext.Provider,{value:null},typeof ot=="function"?ot(rt,st):React.cloneElement(React.Children.only(ot),st))},_e}(React.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop$8(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$8,onEntering:noop$8,onEntered:noop$8,onExit:noop$8,onExiting:noop$8,onExited:noop$8};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;const Transition$1=Transition,canUseDOM=!!(typeof window<"u"&&window.document&&window.document.createElement);var optionsSupported=!1,onceSupported=!1;try{var options$1={get passive(){return optionsSupported=!0},get once(){return onceSupported=optionsSupported=!0}};canUseDOM&&(window.addEventListener("test",options$1,options$1),window.removeEventListener("test",options$1,!0))}catch{}function addEventListener(et,_e,tt,nt){if(nt&&typeof nt!="boolean"&&!onceSupported){var rt=nt.once,it=nt.capture,ot=tt;!onceSupported&&rt&&(ot=tt.__once||function st(at){this.removeEventListener(_e,st,it),tt.call(this,at)},tt.__once=ot),et.addEventListener(_e,ot,optionsSupported?nt:it)}et.addEventListener(_e,tt,nt)}function removeEventListener(et,_e,tt,nt){var rt=nt&&typeof nt!="boolean"?nt.capture:nt;et.removeEventListener(_e,tt,rt),tt.__once&&et.removeEventListener(_e,tt.__once,rt)}function listen(et,_e,tt,nt){return addEventListener(et,_e,tt,nt),function(){removeEventListener(et,_e,tt,nt)}}function triggerEvent(et,_e,tt,nt){if(tt===void 0&&(tt=!1),nt===void 0&&(nt=!0),et){var rt=document.createEvent("HTMLEvents");rt.initEvent(_e,tt,nt),et.dispatchEvent(rt)}}function parseDuration$1(et){var _e=style$1(et,"transitionDuration")||"",tt=_e.indexOf("ms")===-1?1e3:1;return parseFloat(_e)*tt}function emulateTransitionEnd(et,_e,tt){tt===void 0&&(tt=5);var nt=!1,rt=setTimeout(function(){nt||triggerEvent(et,"transitionend",!0)},_e+tt),it=listen(et,"transitionend",function(){nt=!0},{once:!0});return function(){clearTimeout(rt),it()}}function transitionEnd(et,_e,tt,nt){tt==null&&(tt=parseDuration$1(et)||0);var rt=emulateTransitionEnd(et,tt,nt),it=listen(et,"transitionend",_e);return function(){rt(),it()}}function parseDuration(et,_e){const tt=style$1(et,_e)||"",nt=tt.indexOf("ms")===-1?1e3:1;return parseFloat(tt)*nt}function transitionEndListener(et,_e){const tt=parseDuration(et,"transitionDuration"),nt=parseDuration(et,"transitionDelay"),rt=transitionEnd(et,it=>{it.target===et&&(rt(),_e(it))},tt+nt)}function createChainedFunction(...et){return et.filter(_e=>_e!=null).reduce((_e,tt)=>{if(typeof tt!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return _e===null?tt:function(...rt){_e.apply(this,rt),tt.apply(this,rt)}},null)}function triggerBrowserReflow(et){et.offsetHeight}const toFnRef=et=>!et||typeof et=="function"?et:_e=>{et.current=_e};function mergeRefs(et,_e){const tt=toFnRef(et),nt=toFnRef(_e);return rt=>{tt&&tt(rt),nt&&nt(rt)}}function useMergedRefs(et,_e){return reactExports.useMemo(()=>mergeRefs(et,_e),[et,_e])}function safeFindDOMNode(et){return et&&"setState"in et?ReactDOM.findDOMNode(et):et??null}const TransitionWrapper=React.forwardRef(({onEnter:et,onEntering:_e,onEntered:tt,onExit:nt,onExiting:rt,onExited:it,addEndListener:ot,children:st,childRef:at,...lt},ct)=>{const ut=reactExports.useRef(null),dt=useMergedRefs(ut,at),ft=Et=>{dt(safeFindDOMNode(Et))},pt=Et=>bt=>{Et&&ut.current&&Et(ut.current,bt)},mt=reactExports.useCallback(pt(et),[et]),xt=reactExports.useCallback(pt(_e),[_e]),gt=reactExports.useCallback(pt(tt),[tt]),ht=reactExports.useCallback(pt(nt),[nt]),yt=reactExports.useCallback(pt(rt),[rt]),vt=reactExports.useCallback(pt(it),[it]),_t=reactExports.useCallback(pt(ot),[ot]);return jsxRuntimeExports.jsx(Transition$1,{ref:ct,...lt,onEnter:mt,onEntered:gt,onEntering:xt,onExit:ht,onExited:vt,onExiting:yt,addEndListener:_t,nodeRef:ut,children:typeof st=="function"?(Et,bt)=>st(Et,{...bt,ref:ft}):React.cloneElement(st,{ref:ft})})}),TransitionWrapper$1=TransitionWrapper,MARGINS={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function getDefaultDimensionValue(et,_e){const tt=`offset${et[0].toUpperCase()}${et.slice(1)}`,nt=_e[tt],rt=MARGINS[et];return nt+parseInt(style$1(_e,rt[0]),10)+parseInt(style$1(_e,rt[1]),10)}const collapseStyles={[EXITED]:"collapse",[EXITING]:"collapsing",[ENTERING]:"collapsing",[ENTERED]:"collapse show"},Collapse=React.forwardRef(({onEnter:et,onEntering:_e,onEntered:tt,onExit:nt,onExiting:rt,className:it,children:ot,dimension:st="height",in:at=!1,timeout:lt=300,mountOnEnter:ct=!1,unmountOnExit:ut=!1,appear:dt=!1,getDimensionValue:ft=getDefaultDimensionValue,...pt},mt)=>{const xt=typeof st=="function"?st():st,gt=reactExports.useMemo(()=>createChainedFunction(Et=>{Et.style[xt]="0"},et),[xt,et]),ht=reactExports.useMemo(()=>createChainedFunction(Et=>{const bt=`scroll${xt[0].toUpperCase()}${xt.slice(1)}`;Et.style[xt]=`${Et[bt]}px`},_e),[xt,_e]),yt=reactExports.useMemo(()=>createChainedFunction(Et=>{Et.style[xt]=null},tt),[xt,tt]),vt=reactExports.useMemo(()=>createChainedFunction(Et=>{Et.style[xt]=`${ft(xt,Et)}px`,triggerBrowserReflow(Et)},nt),[nt,ft,xt]),_t=reactExports.useMemo(()=>createChainedFunction(Et=>{Et.style[xt]=null},rt),[xt,rt]);return jsxRuntimeExports.jsx(TransitionWrapper$1,{ref:mt,addEndListener:transitionEndListener,...pt,"aria-expanded":pt.role?at:null,onEnter:gt,onEntering:ht,onEntered:yt,onExit:vt,onExiting:_t,childRef:ot.ref,in:at,timeout:lt,mountOnEnter:ct,unmountOnExit:ut,appear:dt,children:(Et,bt)=>React.cloneElement(ot,{...bt,className:classNames$1(it,ot.props.className,collapseStyles[Et],xt==="width"&&"collapse-horizontal")})})}),Collapse$1=Collapse;function isAccordionItemSelected(et,_e){return Array.isArray(et)?et.includes(_e):et===_e}const context$4=reactExports.createContext({});context$4.displayName="AccordionContext";const AccordionContext=context$4,AccordionCollapse=reactExports.forwardRef(({as:et="div",bsPrefix:_e,className:tt,children:nt,eventKey:rt,...it},ot)=>{const{activeEventKey:st}=reactExports.useContext(AccordionContext);return _e=useBootstrapPrefix(_e,"accordion-collapse"),jsxRuntimeExports.jsx(Collapse$1,{ref:ot,in:isAccordionItemSelected(st,rt),...it,className:classNames$1(tt,_e),children:jsxRuntimeExports.jsx(et,{children:reactExports.Children.only(nt)})})});AccordionCollapse.displayName="AccordionCollapse";const AccordionCollapse$1=AccordionCollapse,context$3=reactExports.createContext({eventKey:""});context$3.displayName="AccordionItemContext";const AccordionItemContext=context$3,AccordionBody=reactExports.forwardRef(({as:et="div",bsPrefix:_e,className:tt,onEnter:nt,onEntering:rt,onEntered:it,onExit:ot,onExiting:st,onExited:at,...lt},ct)=>{_e=useBootstrapPrefix(_e,"accordion-body");const{eventKey:ut}=reactExports.useContext(AccordionItemContext);return jsxRuntimeExports.jsx(AccordionCollapse$1,{eventKey:ut,onEnter:nt,onEntering:rt,onEntered:it,onExit:ot,onExiting:st,onExited:at,children:jsxRuntimeExports.jsx(et,{ref:ct,...lt,className:classNames$1(tt,_e)})})});AccordionBody.displayName="AccordionBody";const AccordionBody$1=AccordionBody;function useAccordionButton(et,_e){const{activeEventKey:tt,onSelect:nt,alwaysOpen:rt}=reactExports.useContext(AccordionContext);return it=>{let ot=et===tt?null:et;rt&&(Array.isArray(tt)?tt.includes(et)?ot=tt.filter(st=>st!==et):ot=[...tt,et]:ot=[et]),nt==null||nt(ot,it),_e==null||_e(it)}}const AccordionButton=reactExports.forwardRef(({as:et="button",bsPrefix:_e,className:tt,onClick:nt,...rt},it)=>{_e=useBootstrapPrefix(_e,"accordion-button");const{eventKey:ot}=reactExports.useContext(AccordionItemContext),st=useAccordionButton(ot,nt),{activeEventKey:at}=reactExports.useContext(AccordionContext);return et==="button"&&(rt.type="button"),jsxRuntimeExports.jsx(et,{ref:it,onClick:st,...rt,"aria-expanded":Array.isArray(at)?at.includes(ot):ot===at,className:classNames$1(tt,_e,!isAccordionItemSelected(at,ot)&&"collapsed")})});AccordionButton.displayName="AccordionButton";const AccordionButton$1=AccordionButton,AccordionHeader=reactExports.forwardRef(({as:et="h2",bsPrefix:_e,className:tt,children:nt,onClick:rt,...it},ot)=>(_e=useBootstrapPrefix(_e,"accordion-header"),jsxRuntimeExports.jsx(et,{ref:ot,...it,className:classNames$1(tt,_e),children:jsxRuntimeExports.jsx(AccordionButton$1,{onClick:rt,children:nt})})));AccordionHeader.displayName="AccordionHeader";const AccordionHeader$1=AccordionHeader,AccordionItem=reactExports.forwardRef(({as:et="div",bsPrefix:_e,className:tt,eventKey:nt,...rt},it)=>{_e=useBootstrapPrefix(_e,"accordion-item");const ot=reactExports.useMemo(()=>({eventKey:nt}),[nt]);return jsxRuntimeExports.jsx(AccordionItemContext.Provider,{value:ot,children:jsxRuntimeExports.jsx(et,{ref:it,...rt,className:classNames$1(tt,_e)})})});AccordionItem.displayName="AccordionItem";const AccordionItem$1=AccordionItem,Accordion=reactExports.forwardRef((et,_e)=>{const{as:tt="div",activeKey:nt,bsPrefix:rt,className:it,onSelect:ot,flush:st,alwaysOpen:at,...lt}=useUncontrolled(et,{activeKey:"onSelect"}),ct=useBootstrapPrefix(rt,"accordion"),ut=reactExports.useMemo(()=>({activeEventKey:nt,onSelect:ot,alwaysOpen:at}),[nt,ot,at]);return jsxRuntimeExports.jsx(AccordionContext.Provider,{value:ut,children:jsxRuntimeExports.jsx(tt,{ref:_e,...lt,className:classNames$1(it,ct,st&&`${ct}-flush`)})})});Accordion.displayName="Accordion";const Accordion$1=Object.assign(Accordion,{Button:AccordionButton$1,Collapse:AccordionCollapse$1,Item:AccordionItem$1,Header:AccordionHeader$1,Body:AccordionBody$1});function useCommittedRef(et){const _e=reactExports.useRef(et);return reactExports.useEffect(()=>{_e.current=et},[et]),_e}function useEventCallback(et){const _e=useCommittedRef(et);return reactExports.useCallback(function(...tt){return _e.current&&_e.current(...tt)},[_e])}function useCallbackRef(){return reactExports.useState(null)}function useMounted(){const et=reactExports.useRef(!0),_e=reactExports.useRef(()=>et.current);return reactExports.useEffect(()=>(et.current=!0,()=>{et.current=!1}),[]),_e.current}function usePrevious$1(et){const _e=reactExports.useRef(null);return reactExports.useEffect(()=>{_e.current=et}),_e.current}const isReactNative=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",isDOM=typeof document<"u",useIsomorphicEffect=isDOM||isReactNative?reactExports.useLayoutEffect:reactExports.useEffect,_excluded$e=["as","disabled"];function _objectWithoutPropertiesLoose$b(et,_e){if(et==null)return{};var tt={},nt=Object.keys(et),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_e.indexOf(rt)>=0)&&(tt[rt]=et[rt]);return tt}function isTrivialHref$1(et){return!et||et.trim()==="#"}function useButtonProps({tagName:et,disabled:_e,href:tt,target:nt,rel:rt,role:it,onClick:ot,tabIndex:st=0,type:at}){et||(tt!=null||nt!=null||rt!=null?et="a":et="button");const lt={tagName:et};if(et==="button")return[{type:at||"button",disabled:_e},lt];const ct=dt=>{if((_e||et==="a"&&isTrivialHref$1(tt))&&dt.preventDefault(),_e){dt.stopPropagation();return}ot==null||ot(dt)},ut=dt=>{dt.key===" "&&(dt.preventDefault(),ct(dt))};return et==="a"&&(tt||(tt="#"),_e&&(tt=void 0)),[{role:it??"button",disabled:void 0,tabIndex:_e?void 0:st,href:tt,target:et==="a"?nt:void 0,"aria-disabled":_e||void 0,rel:et==="a"?rt:void 0,onClick:ct,onKeyDown:ut},lt]}const Button$2=reactExports.forwardRef((et,_e)=>{let{as:tt,disabled:nt}=et,rt=_objectWithoutPropertiesLoose$b(et,_excluded$e);const[it,{tagName:ot}]=useButtonProps(Object.assign({tagName:tt,disabled:nt},rt));return jsxRuntimeExports.jsx(ot,Object.assign({},rt,it,{ref:_e}))});Button$2.displayName="Button";const _excluded$d=["onKeyDown"];function _objectWithoutPropertiesLoose$a(et,_e){if(et==null)return{};var tt={},nt=Object.keys(et),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_e.indexOf(rt)>=0)&&(tt[rt]=et[rt]);return tt}function isTrivialHref(et){return!et||et.trim()==="#"}const Anchor=reactExports.forwardRef((et,_e)=>{let{onKeyDown:tt}=et,nt=_objectWithoutPropertiesLoose$a(et,_excluded$d);const[rt]=useButtonProps(Object.assign({tagName:"a"},nt)),it=useEventCallback(ot=>{rt.onKeyDown(ot),tt==null||tt(ot)});return isTrivialHref(nt.href)||nt.role==="button"?jsxRuntimeExports.jsx("a",Object.assign({ref:_e},nt,rt,{onKeyDown:it})):jsxRuntimeExports.jsx("a",Object.assign({ref:_e},nt,{onKeyDown:tt}))});Anchor.displayName="Anchor";const Anchor$1=Anchor,fadeStyles={[ENTERING]:"show",[ENTERED]:"show"},Fade=reactExports.forwardRef(({className:et,children:_e,transitionClasses:tt={},onEnter:nt,...rt},it)=>{const ot={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...rt},st=reactExports.useCallback((at,lt)=>{triggerBrowserReflow(at),nt==null||nt(at,lt)},[nt]);return jsxRuntimeExports.jsx(TransitionWrapper$1,{ref:it,addEndListener:transitionEndListener,...ot,onEnter:st,childRef:_e.ref,children:(at,lt)=>reactExports.cloneElement(_e,{...lt,className:classNames$1("fade",et,_e.props.className,fadeStyles[at],tt[at])})})});Fade.displayName="Fade";const Fade$1=Fade,propTypes$2={"aria-label":PropTypes.string,onClick:PropTypes.func,variant:PropTypes.oneOf(["white"])},CloseButton=reactExports.forwardRef(({className:et,variant:_e,"aria-label":tt="Close",...nt},rt)=>jsxRuntimeExports.jsx("button",{ref:rt,type:"button",className:classNames$1("btn-close",_e&&`btn-close-${_e}`,et),"aria-label":tt,...nt}));CloseButton.displayName="CloseButton";CloseButton.propTypes=propTypes$2;const CloseButton$1=CloseButton,divWithClassName=et=>reactExports.forwardRef((_e,tt)=>jsxRuntimeExports.jsx("div",{..._e,ref:tt,className:classNames$1(_e.className,et)}));var rHyphen=/-(.)/g;function camelize(et){return et.replace(rHyphen,function(_e,tt){return tt.toUpperCase()})}const pascalCase=et=>et[0].toUpperCase()+camelize(et).slice(1);function createWithBsPrefix(et,{displayName:_e=pascalCase(et),Component:tt,defaultProps:nt}={}){const rt=reactExports.forwardRef(({className:it,bsPrefix:ot,as:st=tt||"div",...at},lt)=>{const ct={...nt,...at},ut=useBootstrapPrefix(ot,et);return jsxRuntimeExports.jsx(st,{ref:lt,className:classNames$1(it,ut),...ct})});return rt.displayName=_e,rt}const DivStyledAsH4$1=divWithClassName("h4");DivStyledAsH4$1.displayName="DivStyledAsH4";const AlertHeading=createWithBsPrefix("alert-heading",{Component:DivStyledAsH4$1}),AlertLink=createWithBsPrefix("alert-link",{Component:Anchor$1}),Alert=reactExports.forwardRef((et,_e)=>{const{bsPrefix:tt,show:nt=!0,closeLabel:rt="Close alert",closeVariant:it,className:ot,children:st,variant:at="primary",onClose:lt,dismissible:ct,transition:ut=Fade$1,...dt}=useUncontrolled(et,{show:"onClose"}),ft=useBootstrapPrefix(tt,"alert"),pt=useEventCallback(gt=>{lt&&lt(!1,gt)}),mt=ut===!0?Fade$1:ut,xt=jsxRuntimeExports.jsxs("div",{role:"alert",...mt?void 0:dt,ref:_e,className:classNames$1(ot,ft,at&&`${ft}-${at}`,ct&&`${ft}-dismissible`),children:[ct&&jsxRuntimeExports.jsx(CloseButton$1,{onClick:pt,"aria-label":rt,variant:it}),st]});return mt?jsxRuntimeExports.jsx(mt,{unmountOnExit:!0,...dt,ref:void 0,in:nt,children:xt}):nt?xt:null});Alert.displayName="Alert";const Alert$1=Object.assign(Alert,{Link:AlertLink,Heading:AlertHeading}),Button=reactExports.forwardRef(({as:et,bsPrefix:_e,variant:tt="primary",size:nt,active:rt=!1,disabled:it=!1,className:ot,...st},at)=>{const lt=useBootstrapPrefix(_e,"btn"),[ct,{tagName:ut}]=useButtonProps({tagName:et,disabled:it,...st}),dt=ut;return jsxRuntimeExports.jsx(dt,{...ct,...st,ref:at,disabled:it,className:classNames$1(ot,lt,rt&&"active",tt&&`${lt}-${tt}`,nt&&`${lt}-${nt}`,st.href&&it&&"disabled")})});Button.displayName="Button";const Button$1=Button,ButtonGroup=reactExports.forwardRef(({bsPrefix:et,size:_e,vertical:tt=!1,className:nt,role:rt="group",as:it="div",...ot},st)=>{const at=useBootstrapPrefix(et,"btn-group");let lt=at;return tt&&(lt=`${at}-vertical`),jsxRuntimeExports.jsx(it,{...ot,ref:st,role:rt,className:classNames$1(nt,lt,_e&&`${at}-${_e}`)})});ButtonGroup.displayName="ButtonGroup";const ButtonGroup$1=ButtonGroup,context$2=reactExports.createContext(null);context$2.displayName="CardHeaderContext";const CardHeaderContext=context$2;function useUpdatedRef(et){const _e=reactExports.useRef(et);return _e.current=et,_e}function useWillUnmount(et){const _e=useUpdatedRef(et);reactExports.useEffect(()=>()=>_e.current(),[])}const MAX_DELAY_MS=2**31-1;function setChainedTimeout(et,_e,tt){const nt=tt-Date.now();et.current=nt<=MAX_DELAY_MS?setTimeout(_e,nt):setTimeout(()=>setChainedTimeout(et,_e,tt),MAX_DELAY_MS)}function useTimeout(){const et=useMounted(),_e=reactExports.useRef();return useWillUnmount(()=>clearTimeout(_e.current)),reactExports.useMemo(()=>{const tt=()=>clearTimeout(_e.current);function nt(rt,it=0){et()&&(tt(),it<=MAX_DELAY_MS?_e.current=setTimeout(rt,it):setChainedTimeout(_e,rt,Date.now()+it))}return{set:nt,clear:tt}},[])}function map(et,_e){let tt=0;return reactExports.Children.map(et,nt=>reactExports.isValidElement(nt)?_e(nt,tt++):nt)}function hasChildOfType(et,_e){return reactExports.Children.toArray(et).some(tt=>reactExports.isValidElement(tt)&&tt.type===_e)}function useCol({as:et,bsPrefix:_e,className:tt,...nt}){_e=useBootstrapPrefix(_e,"col");const rt=useBootstrapBreakpoints(),it=useBootstrapMinBreakpoint(),ot=[],st=[];return rt.forEach(at=>{const lt=nt[at];delete nt[at];let ct,ut,dt;typeof lt=="object"&&lt!=null?{span:ct,offset:ut,order:dt}=lt:ct=lt;const ft=at!==it?`-${at}`:"";ct&&ot.push(ct===!0?`${_e}${ft}`:`${_e}${ft}-${ct}`),dt!=null&&st.push(`order${ft}-${dt}`),ut!=null&&st.push(`offset${ft}-${ut}`)}),[{...nt,className:classNames$1(tt,...ot,...st)},{as:et,bsPrefix:_e,spans:ot}]}const Col=reactExports.forwardRef((et,_e)=>{const[{className:tt,...nt},{as:rt="div",bsPrefix:it,spans:ot}]=useCol(et);return jsxRuntimeExports.jsx(rt,{...nt,ref:_e,className:classNames$1(tt,!ot.length&&it)})});Col.displayName="Col";const Col$1=Col;var toArray$1=Function.prototype.bind.call(Function.prototype.call,[].slice);function qsa(et,_e){return toArray$1(et.querySelectorAll(_e))}function useForceUpdate(){const[,et]=reactExports.useReducer(_e=>!_e,!1);return et}var has=Object.prototype.hasOwnProperty;function find$1(et,_e,tt){for(tt of et.keys())if(dequal(tt,_e))return tt}function dequal(et,_e){var tt,nt,rt;if(et===_e)return!0;if(et&&_e&&(tt=et.constructor)===_e.constructor){if(tt===Date)return et.getTime()===_e.getTime();if(tt===RegExp)return et.toString()===_e.toString();if(tt===Array){if((nt=et.length)===_e.length)for(;nt--&&dequal(et[nt],_e[nt]););return nt===-1}if(tt===Set){if(et.size!==_e.size)return!1;for(nt of et)if(rt=nt,rt&&typeof rt=="object"&&(rt=find$1(_e,rt),!rt)||!_e.has(rt))return!1;return!0}if(tt===Map){if(et.size!==_e.size)return!1;for(nt of et)if(rt=nt[0],rt&&typeof rt=="object"&&(rt=find$1(_e,rt),!rt)||!dequal(nt[1],_e.get(rt)))return!1;return!0}if(tt===ArrayBuffer)et=new Uint8Array(et),_e=new Uint8Array(_e);else if(tt===DataView){if((nt=et.byteLength)===_e.byteLength)for(;nt--&&et.getInt8(nt)===_e.getInt8(nt););return nt===-1}if(ArrayBuffer.isView(et)){if((nt=et.byteLength)===_e.byteLength)for(;nt--&&et[nt]===_e[nt];);return nt===-1}if(!tt||typeof et=="object"){nt=0;for(tt in et)if(has.call(et,tt)&&++nt&&!has.call(_e,tt)||!(tt in _e)||!dequal(et[tt],_e[tt]))return!1;return Object.keys(_e).length===nt}}return et!==et&&_e!==_e}function useSafeState(et){const _e=useMounted();return[et[0],reactExports.useCallback(tt=>{if(_e())return et[1](tt)},[_e,et[1]])]}var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end$1="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(et,_e){return et.concat([_e+"-"+start,_e+"-"+end$1])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(et,_e){return et.concat([_e,_e+"-"+start,_e+"-"+end$1])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getBasePlacement(et){return et.split("-")[0]}function getWindow(et){if(et==null)return window;if(et.toString()!=="[object Window]"){var _e=et.ownerDocument;return _e&&_e.defaultView||window}return et}function isElement$1(et){var _e=getWindow(et).Element;return et instanceof _e||et instanceof Element}function isHTMLElement(et){var _e=getWindow(et).HTMLElement;return et instanceof _e||et instanceof HTMLElement}function isShadowRoot(et){if(typeof ShadowRoot>"u")return!1;var _e=getWindow(et).ShadowRoot;return et instanceof _e||et instanceof ShadowRoot}var max=Math.max,min=Math.min,round=Math.round;function getUAString(){var et=navigator.userAgentData;return et!=null&&et.brands&&Array.isArray(et.brands)?et.brands.map(function(_e){return _e.brand+"/"+_e.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(et,_e,tt){_e===void 0&&(_e=!1),tt===void 0&&(tt=!1);var nt=et.getBoundingClientRect(),rt=1,it=1;_e&&isHTMLElement(et)&&(rt=et.offsetWidth>0&&round(nt.width)/et.offsetWidth||1,it=et.offsetHeight>0&&round(nt.height)/et.offsetHeight||1);var ot=isElement$1(et)?getWindow(et):window,st=ot.visualViewport,at=!isLayoutViewport()&&tt,lt=(nt.left+(at&&st?st.offsetLeft:0))/rt,ct=(nt.top+(at&&st?st.offsetTop:0))/it,ut=nt.width/rt,dt=nt.height/it;return{width:ut,height:dt,top:ct,right:lt+ut,bottom:ct+dt,left:lt,x:lt,y:ct}}function getLayoutRect(et){var _e=getBoundingClientRect(et),tt=et.offsetWidth,nt=et.offsetHeight;return Math.abs(_e.width-tt)<=1&&(tt=_e.width),Math.abs(_e.height-nt)<=1&&(nt=_e.height),{x:et.offsetLeft,y:et.offsetTop,width:tt,height:nt}}function contains$1(et,_e){var tt=_e.getRootNode&&_e.getRootNode();if(et.contains(_e))return!0;if(tt&&isShadowRoot(tt)){var nt=_e;do{if(nt&&et.isSameNode(nt))return!0;nt=nt.parentNode||nt.host}while(nt)}return!1}function getNodeName(et){return et?(et.nodeName||"").toLowerCase():null}function getComputedStyle(et){return getWindow(et).getComputedStyle(et)}function isTableElement(et){return["table","td","th"].indexOf(getNodeName(et))>=0}function getDocumentElement$1(et){return((isElement$1(et)?et.ownerDocument:et.document)||window.document).documentElement}function getParentNode(et){return getNodeName(et)==="html"?et:et.assignedSlot||et.parentNode||(isShadowRoot(et)?et.host:null)||getDocumentElement$1(et)}function getTrueOffsetParent(et){return!isHTMLElement(et)||getComputedStyle(et).position==="fixed"?null:et.offsetParent}function getContainingBlock(et){var _e=/firefox/i.test(getUAString()),tt=/Trident/i.test(getUAString());if(tt&&isHTMLElement(et)){var nt=getComputedStyle(et);if(nt.position==="fixed")return null}var rt=getParentNode(et);for(isShadowRoot(rt)&&(rt=rt.host);isHTMLElement(rt)&&["html","body"].indexOf(getNodeName(rt))<0;){var it=getComputedStyle(rt);if(it.transform!=="none"||it.perspective!=="none"||it.contain==="paint"||["transform","perspective"].indexOf(it.willChange)!==-1||_e&&it.willChange==="filter"||_e&&it.filter&&it.filter!=="none")return rt;rt=rt.parentNode}return null}function getOffsetParent(et){for(var _e=getWindow(et),tt=getTrueOffsetParent(et);tt&&isTableElement(tt)&&getComputedStyle(tt).position==="static";)tt=getTrueOffsetParent(tt);return tt&&(getNodeName(tt)==="html"||getNodeName(tt)==="body"&&getComputedStyle(tt).position==="static")?_e:tt||getContainingBlock(et)||_e}function getMainAxisFromPlacement(et){return["top","bottom"].indexOf(et)>=0?"x":"y"}function within(et,_e,tt){return max(et,min(_e,tt))}function withinMaxClamp(et,_e,tt){var nt=within(et,_e,tt);return nt>tt?tt:nt}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(et){return Object.assign({},getFreshSideObject(),et)}function expandToHashMap(et,_e){return _e.reduce(function(tt,nt){return tt[nt]=et,tt},{})}var toPaddingObject=function(_e,tt){return _e=typeof _e=="function"?_e(Object.assign({},tt.rects,{placement:tt.placement})):_e,mergePaddingObject(typeof _e!="number"?_e:expandToHashMap(_e,basePlacements))};function arrow(et){var _e,tt=et.state,nt=et.name,rt=et.options,it=tt.elements.arrow,ot=tt.modifiersData.popperOffsets,st=getBasePlacement(tt.placement),at=getMainAxisFromPlacement(st),lt=[left,right].indexOf(st)>=0,ct=lt?"height":"width";if(!(!it||!ot)){var ut=toPaddingObject(rt.padding,tt),dt=getLayoutRect(it),ft=at==="y"?top:left,pt=at==="y"?bottom:right,mt=tt.rects.reference[ct]+tt.rects.reference[at]-ot[at]-tt.rects.popper[ct],xt=ot[at]-tt.rects.reference[at],gt=getOffsetParent(it),ht=gt?at==="y"?gt.clientHeight||0:gt.clientWidth||0:0,yt=mt/2-xt/2,vt=ut[ft],_t=ht-dt[ct]-ut[pt],Et=ht/2-dt[ct]/2+yt,bt=within(vt,Et,_t),St=at;tt.modifiersData[nt]=(_e={},_e[St]=bt,_e.centerOffset=bt-Et,_e)}}function effect$1(et){var _e=et.state,tt=et.options,nt=tt.element,rt=nt===void 0?"[data-popper-arrow]":nt;rt!=null&&(typeof rt=="string"&&(rt=_e.elements.popper.querySelector(rt),!rt)||contains$1(_e.elements.popper,rt)&&(_e.elements.arrow=rt))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(et){return et.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(et,_e){var tt=et.x,nt=et.y,rt=_e.devicePixelRatio||1;return{x:round(tt*rt)/rt||0,y:round(nt*rt)/rt||0}}function mapToStyles(et){var _e,tt=et.popper,nt=et.popperRect,rt=et.placement,it=et.variation,ot=et.offsets,st=et.position,at=et.gpuAcceleration,lt=et.adaptive,ct=et.roundOffsets,ut=et.isFixed,dt=ot.x,ft=dt===void 0?0:dt,pt=ot.y,mt=pt===void 0?0:pt,xt=typeof ct=="function"?ct({x:ft,y:mt}):{x:ft,y:mt};ft=xt.x,mt=xt.y;var gt=ot.hasOwnProperty("x"),ht=ot.hasOwnProperty("y"),yt=left,vt=top,_t=window;if(lt){var Et=getOffsetParent(tt),bt="clientHeight",St="clientWidth";if(Et===getWindow(tt)&&(Et=getDocumentElement$1(tt),getComputedStyle(Et).position!=="static"&&st==="absolute"&&(bt="scrollHeight",St="scrollWidth")),Et=Et,rt===top||(rt===left||rt===right)&&it===end$1){vt=bottom;var wt=ut&&Et===_t&&_t.visualViewport?_t.visualViewport.height:Et[bt];mt-=wt-nt.height,mt*=at?1:-1}if(rt===left||(rt===top||rt===bottom)&&it===end$1){yt=right;var Rt=ut&&Et===_t&&_t.visualViewport?_t.visualViewport.width:Et[St];ft-=Rt-nt.width,ft*=at?1:-1}}var Nt=Object.assign({position:st},lt&&unsetSides),kt=ct===!0?roundOffsetsByDPR({x:ft,y:mt},getWindow(tt)):{x:ft,y:mt};if(ft=kt.x,mt=kt.y,at){var Pt;return Object.assign({},Nt,(Pt={},Pt[vt]=ht?"0":"",Pt[yt]=gt?"0":"",Pt.transform=(_t.devicePixelRatio||1)<=1?"translate("+ft+"px, "+mt+"px)":"translate3d("+ft+"px, "+mt+"px, 0)",Pt))}return Object.assign({},Nt,(_e={},_e[vt]=ht?mt+"px":"",_e[yt]=gt?ft+"px":"",_e.transform="",_e))}function computeStyles(et){var _e=et.state,tt=et.options,nt=tt.gpuAcceleration,rt=nt===void 0?!0:nt,it=tt.adaptive,ot=it===void 0?!0:it,st=tt.roundOffsets,at=st===void 0?!0:st,lt={placement:getBasePlacement(_e.placement),variation:getVariation(_e.placement),popper:_e.elements.popper,popperRect:_e.rects.popper,gpuAcceleration:rt,isFixed:_e.options.strategy==="fixed"};_e.modifiersData.popperOffsets!=null&&(_e.styles.popper=Object.assign({},_e.styles.popper,mapToStyles(Object.assign({},lt,{offsets:_e.modifiersData.popperOffsets,position:_e.options.strategy,adaptive:ot,roundOffsets:at})))),_e.modifiersData.arrow!=null&&(_e.styles.arrow=Object.assign({},_e.styles.arrow,mapToStyles(Object.assign({},lt,{offsets:_e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:at})))),_e.attributes.popper=Object.assign({},_e.attributes.popper,{"data-popper-placement":_e.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(et){var _e=et.state,tt=et.instance,nt=et.options,rt=nt.scroll,it=rt===void 0?!0:rt,ot=nt.resize,st=ot===void 0?!0:ot,at=getWindow(_e.elements.popper),lt=[].concat(_e.scrollParents.reference,_e.scrollParents.popper);return it&&lt.forEach(function(ct){ct.addEventListener("scroll",tt.update,passive)}),st&&at.addEventListener("resize",tt.update,passive),function(){it&&lt.forEach(function(ct){ct.removeEventListener("scroll",tt.update,passive)}),st&&at.removeEventListener("resize",tt.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(et){return et.replace(/left|right|bottom|top/g,function(_e){return hash$1[_e]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(et){return et.replace(/start|end/g,function(_e){return hash[_e]})}function getWindowScroll$2(et){var _e=getWindow(et),tt=_e.pageXOffset,nt=_e.pageYOffset;return{scrollLeft:tt,scrollTop:nt}}function getWindowScrollBarX(et){return getBoundingClientRect(getDocumentElement$1(et)).left+getWindowScroll$2(et).scrollLeft}function getViewportRect(et,_e){var tt=getWindow(et),nt=getDocumentElement$1(et),rt=tt.visualViewport,it=nt.clientWidth,ot=nt.clientHeight,st=0,at=0;if(rt){it=rt.width,ot=rt.height;var lt=isLayoutViewport();(lt||!lt&&_e==="fixed")&&(st=rt.offsetLeft,at=rt.offsetTop)}return{width:it,height:ot,x:st+getWindowScrollBarX(et),y:at}}function getDocumentRect(et){var _e,tt=getDocumentElement$1(et),nt=getWindowScroll$2(et),rt=(_e=et.ownerDocument)==null?void 0:_e.body,it=max(tt.scrollWidth,tt.clientWidth,rt?rt.scrollWidth:0,rt?rt.clientWidth:0),ot=max(tt.scrollHeight,tt.clientHeight,rt?rt.scrollHeight:0,rt?rt.clientHeight:0),st=-nt.scrollLeft+getWindowScrollBarX(et),at=-nt.scrollTop;return getComputedStyle(rt||tt).direction==="rtl"&&(st+=max(tt.clientWidth,rt?rt.clientWidth:0)-it),{width:it,height:ot,x:st,y:at}}function isScrollParent(et){var _e=getComputedStyle(et),tt=_e.overflow,nt=_e.overflowX,rt=_e.overflowY;return/auto|scroll|overlay|hidden/.test(tt+rt+nt)}function getScrollParent(et){return["html","body","#document"].indexOf(getNodeName(et))>=0?et.ownerDocument.body:isHTMLElement(et)&&isScrollParent(et)?et:getScrollParent(getParentNode(et))}function listScrollParents(et,_e){var tt;_e===void 0&&(_e=[]);var nt=getScrollParent(et),rt=nt===((tt=et.ownerDocument)==null?void 0:tt.body),it=getWindow(nt),ot=rt?[it].concat(it.visualViewport||[],isScrollParent(nt)?nt:[]):nt,st=_e.concat(ot);return rt?st:st.concat(listScrollParents(getParentNode(ot)))}function rectToClientRect(et){return Object.assign({},et,{left:et.x,top:et.y,right:et.x+et.width,bottom:et.y+et.height})}function getInnerBoundingClientRect(et,_e){var tt=getBoundingClientRect(et,!1,_e==="fixed");return tt.top=tt.top+et.clientTop,tt.left=tt.left+et.clientLeft,tt.bottom=tt.top+et.clientHeight,tt.right=tt.left+et.clientWidth,tt.width=et.clientWidth,tt.height=et.clientHeight,tt.x=tt.left,tt.y=tt.top,tt}function getClientRectFromMixedType(et,_e,tt){return _e===viewport?rectToClientRect(getViewportRect(et,tt)):isElement$1(_e)?getInnerBoundingClientRect(_e,tt):rectToClientRect(getDocumentRect(getDocumentElement$1(et)))}function getClippingParents(et){var _e=listScrollParents(getParentNode(et)),tt=["absolute","fixed"].indexOf(getComputedStyle(et).position)>=0,nt=tt&&isHTMLElement(et)?getOffsetParent(et):et;return isElement$1(nt)?_e.filter(function(rt){return isElement$1(rt)&&contains$1(rt,nt)&&getNodeName(rt)!=="body"}):[]}function getClippingRect(et,_e,tt,nt){var rt=_e==="clippingParents"?getClippingParents(et):[].concat(_e),it=[].concat(rt,[tt]),ot=it[0],st=it.reduce(function(at,lt){var ct=getClientRectFromMixedType(et,lt,nt);return at.top=max(ct.top,at.top),at.right=min(ct.right,at.right),at.bottom=min(ct.bottom,at.bottom),at.left=max(ct.left,at.left),at},getClientRectFromMixedType(et,ot,nt));return st.width=st.right-st.left,st.height=st.bottom-st.top,st.x=st.left,st.y=st.top,st}function computeOffsets(et){var _e=et.reference,tt=et.element,nt=et.placement,rt=nt?getBasePlacement(nt):null,it=nt?getVariation(nt):null,ot=_e.x+_e.width/2-tt.width/2,st=_e.y+_e.height/2-tt.height/2,at;switch(rt){case top:at={x:ot,y:_e.y-tt.height};break;case bottom:at={x:ot,y:_e.y+_e.height};break;case right:at={x:_e.x+_e.width,y:st};break;case left:at={x:_e.x-tt.width,y:st};break;default:at={x:_e.x,y:_e.y}}var lt=rt?getMainAxisFromPlacement(rt):null;if(lt!=null){var ct=lt==="y"?"height":"width";switch(it){case start:at[lt]=at[lt]-(_e[ct]/2-tt[ct]/2);break;case end$1:at[lt]=at[lt]+(_e[ct]/2-tt[ct]/2);break}}return at}function detectOverflow(et,_e){_e===void 0&&(_e={});var tt=_e,nt=tt.placement,rt=nt===void 0?et.placement:nt,it=tt.strategy,ot=it===void 0?et.strategy:it,st=tt.boundary,at=st===void 0?clippingParents:st,lt=tt.rootBoundary,ct=lt===void 0?viewport:lt,ut=tt.elementContext,dt=ut===void 0?popper:ut,ft=tt.altBoundary,pt=ft===void 0?!1:ft,mt=tt.padding,xt=mt===void 0?0:mt,gt=mergePaddingObject(typeof xt!="number"?xt:expandToHashMap(xt,basePlacements)),ht=dt===popper?reference:popper,yt=et.rects.popper,vt=et.elements[pt?ht:dt],_t=getClippingRect(isElement$1(vt)?vt:vt.contextElement||getDocumentElement$1(et.elements.popper),at,ct,ot),Et=getBoundingClientRect(et.elements.reference),bt=computeOffsets({reference:Et,element:yt,strategy:"absolute",placement:rt}),St=rectToClientRect(Object.assign({},yt,bt)),wt=dt===popper?St:Et,Rt={top:_t.top-wt.top+gt.top,bottom:wt.bottom-_t.bottom+gt.bottom,left:_t.left-wt.left+gt.left,right:wt.right-_t.right+gt.right},Nt=et.modifiersData.offset;if(dt===popper&&Nt){var kt=Nt[rt];Object.keys(Rt).forEach(function(Pt){var jt=[right,bottom].indexOf(Pt)>=0?1:-1,Wt=[top,bottom].indexOf(Pt)>=0?"y":"x";Rt[Pt]+=kt[Wt]*jt})}return Rt}function computeAutoPlacement(et,_e){_e===void 0&&(_e={});var tt=_e,nt=tt.placement,rt=tt.boundary,it=tt.rootBoundary,ot=tt.padding,st=tt.flipVariations,at=tt.allowedAutoPlacements,lt=at===void 0?placements:at,ct=getVariation(nt),ut=ct?st?variationPlacements:variationPlacements.filter(function(pt){return getVariation(pt)===ct}):basePlacements,dt=ut.filter(function(pt){return lt.indexOf(pt)>=0});dt.length===0&&(dt=ut);var ft=dt.reduce(function(pt,mt){return pt[mt]=detectOverflow(et,{placement:mt,boundary:rt,rootBoundary:it,padding:ot})[getBasePlacement(mt)],pt},{});return Object.keys(ft).sort(function(pt,mt){return ft[pt]-ft[mt]})}function getExpandedFallbackPlacements(et){if(getBasePlacement(et)===auto)return[];var _e=getOppositePlacement(et);return[getOppositeVariationPlacement(et),_e,getOppositeVariationPlacement(_e)]}function flip(et){var _e=et.state,tt=et.options,nt=et.name;if(!_e.modifiersData[nt]._skip){for(var rt=tt.mainAxis,it=rt===void 0?!0:rt,ot=tt.altAxis,st=ot===void 0?!0:ot,at=tt.fallbackPlacements,lt=tt.padding,ct=tt.boundary,ut=tt.rootBoundary,dt=tt.altBoundary,ft=tt.flipVariations,pt=ft===void 0?!0:ft,mt=tt.allowedAutoPlacements,xt=_e.options.placement,gt=getBasePlacement(xt),ht=gt===xt,yt=at||(ht||!pt?[getOppositePlacement(xt)]:getExpandedFallbackPlacements(xt)),vt=[xt].concat(yt).reduce(function(Kt,Qt){return Kt.concat(getBasePlacement(Qt)===auto?computeAutoPlacement(_e,{placement:Qt,boundary:ct,rootBoundary:ut,padding:lt,flipVariations:pt,allowedAutoPlacements:mt}):Qt)},[]),_t=_e.rects.reference,Et=_e.rects.popper,bt=new Map,St=!0,wt=vt[0],Rt=0;Rt<vt.length;Rt++){var Nt=vt[Rt],kt=getBasePlacement(Nt),Pt=getVariation(Nt)===start,jt=[top,bottom].indexOf(kt)>=0,Wt=jt?"width":"height",Ht=detectOverflow(_e,{placement:Nt,boundary:ct,rootBoundary:ut,altBoundary:dt,padding:lt}),tn=jt?Pt?right:left:Pt?bottom:top;_t[Wt]>Et[Wt]&&(tn=getOppositePlacement(tn));var Ot=getOppositePlacement(tn),Lt=[];if(it&&Lt.push(Ht[kt]<=0),st&&Lt.push(Ht[tn]<=0,Ht[Ot]<=0),Lt.every(function(Kt){return Kt})){wt=Nt,St=!1;break}bt.set(Nt,Lt)}if(St)for(var Mt=pt?3:1,Jt=function(Qt){var sn=vt.find(function(hn){var nn=bt.get(hn);if(nn)return nn.slice(0,Qt).every(function(It){return It})});if(sn)return wt=sn,"break"},qt=Mt;qt>0;qt--){var on=Jt(qt);if(on==="break")break}_e.placement!==wt&&(_e.modifiersData[nt]._skip=!0,_e.placement=wt,_e.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(et,_e,tt){return tt===void 0&&(tt={x:0,y:0}),{top:et.top-_e.height-tt.y,right:et.right-_e.width+tt.x,bottom:et.bottom-_e.height+tt.y,left:et.left-_e.width-tt.x}}function isAnySideFullyClipped(et){return[top,right,bottom,left].some(function(_e){return et[_e]>=0})}function hide(et){var _e=et.state,tt=et.name,nt=_e.rects.reference,rt=_e.rects.popper,it=_e.modifiersData.preventOverflow,ot=detectOverflow(_e,{elementContext:"reference"}),st=detectOverflow(_e,{altBoundary:!0}),at=getSideOffsets(ot,nt),lt=getSideOffsets(st,rt,it),ct=isAnySideFullyClipped(at),ut=isAnySideFullyClipped(lt);_e.modifiersData[tt]={referenceClippingOffsets:at,popperEscapeOffsets:lt,isReferenceHidden:ct,hasPopperEscaped:ut},_e.attributes.popper=Object.assign({},_e.attributes.popper,{"data-popper-reference-hidden":ct,"data-popper-escaped":ut})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(et,_e,tt){var nt=getBasePlacement(et),rt=[left,top].indexOf(nt)>=0?-1:1,it=typeof tt=="function"?tt(Object.assign({},_e,{placement:et})):tt,ot=it[0],st=it[1];return ot=ot||0,st=(st||0)*rt,[left,right].indexOf(nt)>=0?{x:st,y:ot}:{x:ot,y:st}}function offset$1(et){var _e=et.state,tt=et.options,nt=et.name,rt=tt.offset,it=rt===void 0?[0,0]:rt,ot=placements.reduce(function(ct,ut){return ct[ut]=distanceAndSkiddingToXY(ut,_e.rects,it),ct},{}),st=ot[_e.placement],at=st.x,lt=st.y;_e.modifiersData.popperOffsets!=null&&(_e.modifiersData.popperOffsets.x+=at,_e.modifiersData.popperOffsets.y+=lt),_e.modifiersData[nt]=ot}const offset$2={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset$1};function popperOffsets(et){var _e=et.state,tt=et.name;_e.modifiersData[tt]=computeOffsets({reference:_e.rects.reference,element:_e.rects.popper,strategy:"absolute",placement:_e.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(et){return et==="x"?"y":"x"}function preventOverflow(et){var _e=et.state,tt=et.options,nt=et.name,rt=tt.mainAxis,it=rt===void 0?!0:rt,ot=tt.altAxis,st=ot===void 0?!1:ot,at=tt.boundary,lt=tt.rootBoundary,ct=tt.altBoundary,ut=tt.padding,dt=tt.tether,ft=dt===void 0?!0:dt,pt=tt.tetherOffset,mt=pt===void 0?0:pt,xt=detectOverflow(_e,{boundary:at,rootBoundary:lt,padding:ut,altBoundary:ct}),gt=getBasePlacement(_e.placement),ht=getVariation(_e.placement),yt=!ht,vt=getMainAxisFromPlacement(gt),_t=getAltAxis(vt),Et=_e.modifiersData.popperOffsets,bt=_e.rects.reference,St=_e.rects.popper,wt=typeof mt=="function"?mt(Object.assign({},_e.rects,{placement:_e.placement})):mt,Rt=typeof wt=="number"?{mainAxis:wt,altAxis:wt}:Object.assign({mainAxis:0,altAxis:0},wt),Nt=_e.modifiersData.offset?_e.modifiersData.offset[_e.placement]:null,kt={x:0,y:0};if(Et){if(it){var Pt,jt=vt==="y"?top:left,Wt=vt==="y"?bottom:right,Ht=vt==="y"?"height":"width",tn=Et[vt],Ot=tn+xt[jt],Lt=tn-xt[Wt],Mt=ft?-St[Ht]/2:0,Jt=ht===start?bt[Ht]:St[Ht],qt=ht===start?-St[Ht]:-bt[Ht],on=_e.elements.arrow,Kt=ft&&on?getLayoutRect(on):{width:0,height:0},Qt=_e.modifiersData["arrow#persistent"]?_e.modifiersData["arrow#persistent"].padding:getFreshSideObject(),sn=Qt[jt],hn=Qt[Wt],nn=within(0,bt[Ht],Kt[Ht]),It=yt?bt[Ht]/2-Mt-nn-sn-Rt.mainAxis:Jt-nn-sn-Rt.mainAxis,Tt=yt?-bt[Ht]/2+Mt+nn+hn+Rt.mainAxis:qt+nn+hn+Rt.mainAxis,At=_e.elements.arrow&&getOffsetParent(_e.elements.arrow),Bt=At?vt==="y"?At.clientTop||0:At.clientLeft||0:0,Ft=(Pt=Nt==null?void 0:Nt[vt])!=null?Pt:0,Gt=tn+It-Ft-Bt,zt=tn+Tt-Ft,pn=within(ft?min(Ot,Gt):Ot,tn,ft?max(Lt,zt):Lt);Et[vt]=pn,kt[vt]=pn-tn}if(st){var an,En=vt==="x"?top:left,_n=vt==="x"?bottom:right,fn=Et[_t],wn=_t==="y"?"height":"width",On=fn+xt[En],$n=fn-xt[_n],Nn=[top,left].indexOf(gt)!==-1,rn=(an=Nt==null?void 0:Nt[_t])!=null?an:0,bn=Nn?On:fn-bt[wn]-St[wn]-rn+Rt.altAxis,Tn=Nn?fn+bt[wn]+St[wn]-rn-Rt.altAxis:$n,An=ft&&Nn?withinMaxClamp(bn,fn,Tn):within(ft?bn:On,fn,ft?Tn:$n);Et[_t]=An,kt[_t]=An-fn}_e.modifiersData[nt]=kt}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(et){return{scrollLeft:et.scrollLeft,scrollTop:et.scrollTop}}function getNodeScroll(et){return et===getWindow(et)||!isHTMLElement(et)?getWindowScroll$2(et):getHTMLElementScroll(et)}function isElementScaled(et){var _e=et.getBoundingClientRect(),tt=round(_e.width)/et.offsetWidth||1,nt=round(_e.height)/et.offsetHeight||1;return tt!==1||nt!==1}function getCompositeRect(et,_e,tt){tt===void 0&&(tt=!1);var nt=isHTMLElement(_e),rt=isHTMLElement(_e)&&isElementScaled(_e),it=getDocumentElement$1(_e),ot=getBoundingClientRect(et,rt,tt),st={scrollLeft:0,scrollTop:0},at={x:0,y:0};return(nt||!nt&&!tt)&&((getNodeName(_e)!=="body"||isScrollParent(it))&&(st=getNodeScroll(_e)),isHTMLElement(_e)?(at=getBoundingClientRect(_e,!0),at.x+=_e.clientLeft,at.y+=_e.clientTop):it&&(at.x=getWindowScrollBarX(it))),{x:ot.left+st.scrollLeft-at.x,y:ot.top+st.scrollTop-at.y,width:ot.width,height:ot.height}}function order(et){var _e=new Map,tt=new Set,nt=[];et.forEach(function(it){_e.set(it.name,it)});function rt(it){tt.add(it.name);var ot=[].concat(it.requires||[],it.requiresIfExists||[]);ot.forEach(function(st){if(!tt.has(st)){var at=_e.get(st);at&&rt(at)}}),nt.push(it)}return et.forEach(function(it){tt.has(it.name)||rt(it)}),nt}function orderModifiers(et){var _e=order(et);return modifierPhases.reduce(function(tt,nt){return tt.concat(_e.filter(function(rt){return rt.phase===nt}))},[])}function debounce(et){var _e;return function(){return _e||(_e=new Promise(function(tt){Promise.resolve().then(function(){_e=void 0,tt(et())})})),_e}}function mergeByName(et){var _e=et.reduce(function(tt,nt){var rt=tt[nt.name];return tt[nt.name]=rt?Object.assign({},rt,nt,{options:Object.assign({},rt.options,nt.options),data:Object.assign({},rt.data,nt.data)}):nt,tt},{});return Object.keys(_e).map(function(tt){return _e[tt]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var et=arguments.length,_e=new Array(et),tt=0;tt<et;tt++)_e[tt]=arguments[tt];return!_e.some(function(nt){return!(nt&&typeof nt.getBoundingClientRect=="function")})}function popperGenerator(et){et===void 0&&(et={});var _e=et,tt=_e.defaultModifiers,nt=tt===void 0?[]:tt,rt=_e.defaultOptions,it=rt===void 0?DEFAULT_OPTIONS:rt;return function(st,at,lt){lt===void 0&&(lt=it);var ct={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,it),modifiersData:{},elements:{reference:st,popper:at},attributes:{},styles:{}},ut=[],dt=!1,ft={state:ct,setOptions:function(gt){var ht=typeof gt=="function"?gt(ct.options):gt;mt(),ct.options=Object.assign({},it,ct.options,ht),ct.scrollParents={reference:isElement$1(st)?listScrollParents(st):st.contextElement?listScrollParents(st.contextElement):[],popper:listScrollParents(at)};var yt=orderModifiers(mergeByName([].concat(nt,ct.options.modifiers)));return ct.orderedModifiers=yt.filter(function(vt){return vt.enabled}),pt(),ft.update()},forceUpdate:function(){if(!dt){var gt=ct.elements,ht=gt.reference,yt=gt.popper;if(areValidElements(ht,yt)){ct.rects={reference:getCompositeRect(ht,getOffsetParent(yt),ct.options.strategy==="fixed"),popper:getLayoutRect(yt)},ct.reset=!1,ct.placement=ct.options.placement,ct.orderedModifiers.forEach(function(Rt){return ct.modifiersData[Rt.name]=Object.assign({},Rt.data)});for(var vt=0;vt<ct.orderedModifiers.length;vt++){if(ct.reset===!0){ct.reset=!1,vt=-1;continue}var _t=ct.orderedModifiers[vt],Et=_t.fn,bt=_t.options,St=bt===void 0?{}:bt,wt=_t.name;typeof Et=="function"&&(ct=Et({state:ct,options:St,name:wt,instance:ft})||ct)}}}},update:debounce(function(){return new Promise(function(xt){ft.forceUpdate(),xt(ct)})}),destroy:function(){mt(),dt=!0}};if(!areValidElements(st,at))return ft;ft.setOptions(lt).then(function(xt){!dt&&lt.onFirstUpdate&&lt.onFirstUpdate(xt)});function pt(){ct.orderedModifiers.forEach(function(xt){var gt=xt.name,ht=xt.options,yt=ht===void 0?{}:ht,vt=xt.effect;if(typeof vt=="function"){var _t=vt({state:ct,name:gt,instance:ft,options:yt}),Et=function(){};ut.push(_t||Et)}})}function mt(){ut.forEach(function(xt){return xt()}),ut=[]}return ft}}const createPopper=popperGenerator({defaultModifiers:[hide$1,popperOffsets$1,computeStyles$1,eventListeners,offset$2,flip$1,preventOverflow$1,arrow$1]}),_excluded$c=["enabled","placement","strategy","modifiers"];function _objectWithoutPropertiesLoose$9(et,_e){if(et==null)return{};var tt={},nt=Object.keys(et),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_e.indexOf(rt)>=0)&&(tt[rt]=et[rt]);return tt}const disabledApplyStylesModifier={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},ariaDescribedByModifier={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:et})=>()=>{const{reference:_e,popper:tt}=et.elements;if("removeAttribute"in _e){const nt=(_e.getAttribute("aria-describedby")||"").split(",").filter(rt=>rt.trim()!==tt.id);nt.length?_e.setAttribute("aria-describedby",nt.join(",")):_e.removeAttribute("aria-describedby")}},fn:({state:et})=>{var _e;const{popper:tt,reference:nt}=et.elements,rt=(_e=tt.getAttribute("role"))==null?void 0:_e.toLowerCase();if(tt.id&&rt==="tooltip"&&"setAttribute"in nt){const it=nt.getAttribute("aria-describedby");if(it&&it.split(",").indexOf(tt.id)!==-1)return;nt.setAttribute("aria-describedby",it?`${it},${tt.id}`:tt.id)}}},EMPTY_MODIFIERS=[];function usePopper(et,_e,tt={}){let{enabled:nt=!0,placement:rt="bottom",strategy:it="absolute",modifiers:ot=EMPTY_MODIFIERS}=tt,st=_objectWithoutPropertiesLoose$9(tt,_excluded$c);const at=reactExports.useRef(ot),lt=reactExports.useRef(),ct=reactExports.useCallback(()=>{var xt;(xt=lt.current)==null||xt.update()},[]),ut=reactExports.useCallback(()=>{var xt;(xt=lt.current)==null||xt.forceUpdate()},[]),[dt,ft]=useSafeState(reactExports.useState({placement:rt,update:ct,forceUpdate:ut,attributes:{},styles:{popper:{},arrow:{}}})),pt=reactExports.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:xt})=>{const gt={},ht={};Object.keys(xt.elements).forEach(yt=>{gt[yt]=xt.styles[yt],ht[yt]=xt.attributes[yt]}),ft({state:xt,styles:gt,attributes:ht,update:ct,forceUpdate:ut,placement:xt.placement})}}),[ct,ut,ft]),mt=reactExports.useMemo(()=>(dequal(at.current,ot)||(at.current=ot),at.current),[ot]);return reactExports.useEffect(()=>{!lt.current||!nt||lt.current.setOptions({placement:rt,strategy:it,modifiers:[...mt,pt,disabledApplyStylesModifier]})},[it,rt,pt,nt,mt]),reactExports.useEffect(()=>{if(!(!nt||et==null||_e==null))return lt.current=createPopper(et,_e,Object.assign({},st,{placement:rt,strategy:it,modifiers:[...mt,ariaDescribedByModifier,pt]})),()=>{lt.current!=null&&(lt.current.destroy(),lt.current=void 0,ft(xt=>Object.assign({},xt,{attributes:{},styles:{popper:{}}})))}},[nt,et,_e]),dt}function contains(et,_e){if(et.contains)return et.contains(_e);if(et.compareDocumentPosition)return et===_e||!!(et.compareDocumentPosition(_e)&16)}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1),noop$7=()=>{};function isLeftClickEvent(et){return et.button===0}function isModifiedEvent(et){return!!(et.metaKey||et.altKey||et.ctrlKey||et.shiftKey)}const getRefTarget=et=>et&&("current"in et?et.current:et),InitialTriggerEvents={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function useClickOutside(et,_e=noop$7,{disabled:tt,clickTrigger:nt="click"}={}){const rt=reactExports.useRef(!1),it=reactExports.useRef(!1),ot=reactExports.useCallback(lt=>{const ct=getRefTarget(et);warning$1(!!ct,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),rt.current=!ct||isModifiedEvent(lt)||!isLeftClickEvent(lt)||!!contains(ct,lt.target)||it.current,it.current=!1},[et]),st=useEventCallback(lt=>{const ct=getRefTarget(et);ct&&contains(ct,lt.target)&&(it.current=!0)}),at=useEventCallback(lt=>{rt.current||_e(lt)});reactExports.useEffect(()=>{var lt,ct;if(tt||et==null)return;const ut=ownerDocument(getRefTarget(et)),dt=ut.defaultView||window;let ft=(lt=dt.event)!=null?lt:(ct=dt.parent)==null?void 0:ct.event,pt=null;InitialTriggerEvents[nt]&&(pt=listen(ut,InitialTriggerEvents[nt],st,!0));const mt=listen(ut,nt,ot,!0),xt=listen(ut,nt,ht=>{if(ht===ft){ft=void 0;return}at(ht)});let gt=[];return"ontouchstart"in ut.documentElement&&(gt=[].slice.call(ut.body.children).map(ht=>listen(ht,"mousemove",noop$7))),()=>{pt==null||pt(),mt(),xt(),gt.forEach(ht=>ht())}},[et,tt,nt,ot,st,at])}function toModifierMap(et){const _e={};return Array.isArray(et)?(et==null||et.forEach(tt=>{_e[tt.name]=tt}),_e):et||_e}function toModifierArray(et={}){return Array.isArray(et)?et:Object.keys(et).map(_e=>(et[_e].name=_e,et[_e]))}function mergeOptionsWithPopperConfig({enabled:et,enableEvents:_e,placement:tt,flip:nt,offset:rt,fixed:it,containerPadding:ot,arrowElement:st,popperConfig:at={}}){var lt,ct,ut,dt,ft;const pt=toModifierMap(at.modifiers);return Object.assign({},at,{placement:tt,enabled:et,strategy:it?"fixed":at.strategy,modifiers:toModifierArray(Object.assign({},pt,{eventListeners:{enabled:_e,options:(lt=pt.eventListeners)==null?void 0:lt.options},preventOverflow:Object.assign({},pt.preventOverflow,{options:ot?Object.assign({padding:ot},(ct=pt.preventOverflow)==null?void 0:ct.options):(ut=pt.preventOverflow)==null?void 0:ut.options}),offset:{options:Object.assign({offset:rt},(dt=pt.offset)==null?void 0:dt.options)},arrow:Object.assign({},pt.arrow,{enabled:!!st,options:Object.assign({},(ft=pt.arrow)==null?void 0:ft.options,{element:st})}),flip:Object.assign({enabled:!!nt},pt.flip)}))})}const SelectableContext=reactExports.createContext(null),makeEventKey=(et,_e=null)=>et!=null?String(et):_e||null,SelectableContext$1=SelectableContext,NavContext=reactExports.createContext(null);NavContext.displayName="NavContext";const NavContext$1=NavContext,ATTRIBUTE_PREFIX="data-rr-ui-",PROPERTY_PREFIX="rrUi";function dataAttr(et){return`${ATTRIBUTE_PREFIX}${et}`}function dataProp(et){return`${PROPERTY_PREFIX}${et}`}const Context=reactExports.createContext(canUseDOM?window:void 0);Context.Provider;function useWindow(){return reactExports.useContext(Context)}const context$1=reactExports.createContext(null);context$1.displayName="InputGroupContext";const InputGroupContext=context$1,context=reactExports.createContext(null);context.displayName="NavbarContext";const NavbarContext=context,propTypes$1={type:PropTypes.string,tooltip:PropTypes.bool,as:PropTypes.elementType},Feedback=reactExports.forwardRef(({as:et="div",className:_e,type:tt="valid",tooltip:nt=!1,...rt},it)=>jsxRuntimeExports.jsx(et,{...rt,ref:it,className:classNames$1(_e,`${tt}-${nt?"tooltip":"feedback"}`)}));Feedback.displayName="Feedback";Feedback.propTypes=propTypes$1;const Feedback$1=Feedback,FormContext=reactExports.createContext({}),FormContext$1=FormContext,FormCheckInput=reactExports.forwardRef(({id:et,bsPrefix:_e,className:tt,type:nt="checkbox",isValid:rt=!1,isInvalid:it=!1,as:ot="input",...st},at)=>{const{controlId:lt}=reactExports.useContext(FormContext$1);return _e=useBootstrapPrefix(_e,"form-check-input"),jsxRuntimeExports.jsx(ot,{...st,ref:at,type:nt,id:et||lt,className:classNames$1(tt,_e,rt&&"is-valid",it&&"is-invalid")})});FormCheckInput.displayName="FormCheckInput";const FormCheckInput$1=FormCheckInput,FormCheckLabel=reactExports.forwardRef(({bsPrefix:et,className:_e,htmlFor:tt,...nt},rt)=>{const{controlId:it}=reactExports.useContext(FormContext$1);return et=useBootstrapPrefix(et,"form-check-label"),jsxRuntimeExports.jsx("label",{...nt,ref:rt,htmlFor:tt||it,className:classNames$1(_e,et)})});FormCheckLabel.displayName="FormCheckLabel";const FormCheckLabel$1=FormCheckLabel,FormCheck=reactExports.forwardRef(({id:et,bsPrefix:_e,bsSwitchPrefix:tt,inline:nt=!1,reverse:rt=!1,disabled:it=!1,isValid:ot=!1,isInvalid:st=!1,feedbackTooltip:at=!1,feedback:lt,feedbackType:ct,className:ut,style:dt,title:ft="",type:pt="checkbox",label:mt,children:xt,as:gt="input",...ht},yt)=>{_e=useBootstrapPrefix(_e,"form-check"),tt=useBootstrapPrefix(tt,"form-switch");const{controlId:vt}=reactExports.useContext(FormContext$1),_t=reactExports.useMemo(()=>({controlId:et||vt}),[vt,et]),Et=!xt&&mt!=null&&mt!==!1||hasChildOfType(xt,FormCheckLabel$1),bt=jsxRuntimeExports.jsx(FormCheckInput$1,{...ht,type:pt==="switch"?"checkbox":pt,ref:yt,isValid:ot,isInvalid:st,disabled:it,as:gt});return jsxRuntimeExports.jsx(FormContext$1.Provider,{value:_t,children:jsxRuntimeExports.jsx("div",{style:dt,className:classNames$1(ut,Et&&_e,nt&&`${_e}-inline`,rt&&`${_e}-reverse`,pt==="switch"&&tt),children:xt||jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[bt,Et&&jsxRuntimeExports.jsx(FormCheckLabel$1,{title:ft,children:mt}),lt&&jsxRuntimeExports.jsx(Feedback$1,{type:ct,tooltip:at,children:lt})]})})})});FormCheck.displayName="FormCheck";const FormCheck$1=Object.assign(FormCheck,{Input:FormCheckInput$1,Label:FormCheckLabel$1}),FormControl=reactExports.forwardRef(({bsPrefix:et,type:_e,size:tt,htmlSize:nt,id:rt,className:it,isValid:ot=!1,isInvalid:st=!1,plaintext:at,readOnly:lt,as:ct="input",...ut},dt)=>{const{controlId:ft}=reactExports.useContext(FormContext$1);et=useBootstrapPrefix(et,"form-control");let pt;return at?pt={[`${et}-plaintext`]:!0}:pt={[et]:!0,[`${et}-${tt}`]:tt},jsxRuntimeExports.jsx(ct,{...ut,type:_e,size:nt,ref:dt,readOnly:lt,id:rt||ft,className:classNames$1(it,pt,ot&&"is-valid",st&&"is-invalid",_e==="color"&&`${et}-color`)})});FormControl.displayName="FormControl";const FormControl$1=Object.assign(FormControl,{Feedback:Feedback$1}),FormFloating=createWithBsPrefix("form-floating"),FormGroup=reactExports.forwardRef(({controlId:et,as:_e="div",...tt},nt)=>{const rt=reactExports.useMemo(()=>({controlId:et}),[et]);return jsxRuntimeExports.jsx(FormContext$1.Provider,{value:rt,children:jsxRuntimeExports.jsx(_e,{...tt,ref:nt})})});FormGroup.displayName="FormGroup";const FormGroup$1=FormGroup,FormLabel=reactExports.forwardRef(({as:et="label",bsPrefix:_e,column:tt=!1,visuallyHidden:nt=!1,className:rt,htmlFor:it,...ot},st)=>{const{controlId:at}=reactExports.useContext(FormContext$1);_e=useBootstrapPrefix(_e,"form-label");let lt="col-form-label";typeof tt=="string"&&(lt=`${lt} ${lt}-${tt}`);const ct=classNames$1(rt,_e,nt&&"visually-hidden",tt&&lt);return it=it||at,tt?jsxRuntimeExports.jsx(Col$1,{ref:st,as:"label",className:ct,htmlFor:it,...ot}):jsxRuntimeExports.jsx(et,{ref:st,className:ct,htmlFor:it,...ot})});FormLabel.displayName="FormLabel";const FormLabel$1=FormLabel,FormRange=reactExports.forwardRef(({bsPrefix:et,className:_e,id:tt,...nt},rt)=>{const{controlId:it}=reactExports.useContext(FormContext$1);return et=useBootstrapPrefix(et,"form-range"),jsxRuntimeExports.jsx("input",{...nt,type:"range",ref:rt,className:classNames$1(_e,et),id:tt||it})});FormRange.displayName="FormRange";const FormRange$1=FormRange,FormSelect=reactExports.forwardRef(({bsPrefix:et,size:_e,htmlSize:tt,className:nt,isValid:rt=!1,isInvalid:it=!1,id:ot,...st},at)=>{const{controlId:lt}=reactExports.useContext(FormContext$1);return et=useBootstrapPrefix(et,"form-select"),jsxRuntimeExports.jsx("select",{...st,size:tt,ref:at,className:classNames$1(nt,et,_e&&`${et}-${_e}`,rt&&"is-valid",it&&"is-invalid"),id:ot||lt})});FormSelect.displayName="FormSelect";const FormSelect$1=FormSelect,FormText=reactExports.forwardRef(({bsPrefix:et,className:_e,as:tt="small",muted:nt,...rt},it)=>(et=useBootstrapPrefix(et,"form-text"),jsxRuntimeExports.jsx(tt,{...rt,ref:it,className:classNames$1(_e,et,nt&&"text-muted")})));FormText.displayName="FormText";const FormText$1=FormText,Switch=reactExports.forwardRef((et,_e)=>jsxRuntimeExports.jsx(FormCheck$1,{...et,ref:_e,type:"switch"}));Switch.displayName="Switch";const Switch$1=Object.assign(Switch,{Input:FormCheck$1.Input,Label:FormCheck$1.Label}),FloatingLabel=reactExports.forwardRef(({bsPrefix:et,className:_e,children:tt,controlId:nt,label:rt,...it},ot)=>(et=useBootstrapPrefix(et,"form-floating"),jsxRuntimeExports.jsxs(FormGroup$1,{ref:ot,className:classNames$1(_e,et),controlId:nt,...it,children:[tt,jsxRuntimeExports.jsx("label",{htmlFor:nt,children:rt})]})));FloatingLabel.displayName="FloatingLabel";const FloatingLabel$1=FloatingLabel,propTypes={_ref:PropTypes.any,validated:PropTypes.bool,as:PropTypes.elementType},Form=reactExports.forwardRef(({className:et,validated:_e,as:tt="form",...nt},rt)=>jsxRuntimeExports.jsx(tt,{...nt,ref:rt,className:classNames$1(et,_e&&"was-validated")}));Form.displayName="Form";Form.propTypes=propTypes;const Form$1=Object.assign(Form,{Group:FormGroup$1,Control:FormControl$1,Floating:FormFloating,Check:FormCheck$1,Switch:Switch$1,Label:FormLabel$1,Text:FormText$1,Range:FormRange$1,Select:FormSelect$1,FloatingLabel:FloatingLabel$1}),Container=reactExports.forwardRef(({bsPrefix:et,fluid:_e=!1,as:tt="div",className:nt,...rt},it)=>{const ot=useBootstrapPrefix(et,"container"),st=typeof _e=="string"?`-${_e}`:"-fluid";return jsxRuntimeExports.jsx(tt,{ref:it,...rt,className:classNames$1(nt,_e?`${ot}${st}`:ot)})});Container.displayName="Container";const Container$1=Container,InputGroupText=createWithBsPrefix("input-group-text",{Component:"span"}),InputGroupCheckbox=et=>jsxRuntimeExports.jsx(InputGroupText,{children:jsxRuntimeExports.jsx(FormCheckInput$1,{type:"checkbox",...et})}),InputGroupRadio=et=>jsxRuntimeExports.jsx(InputGroupText,{children:jsxRuntimeExports.jsx(FormCheckInput$1,{type:"radio",...et})}),InputGroup=reactExports.forwardRef(({bsPrefix:et,size:_e,hasValidation:tt,className:nt,as:rt="div",...it},ot)=>{et=useBootstrapPrefix(et,"input-group");const st=reactExports.useMemo(()=>({}),[]);return jsxRuntimeExports.jsx(InputGroupContext.Provider,{value:st,children:jsxRuntimeExports.jsx(rt,{ref:ot,...it,className:classNames$1(nt,et,_e&&`${et}-${_e}`,tt&&"has-validation")})})});InputGroup.displayName="InputGroup";const InputGroup$1=Object.assign(InputGroup,{Text:InputGroupText,Radio:InputGroupRadio,Checkbox:InputGroupCheckbox}),TabContext=reactExports.createContext(null),TabContext$1=TabContext,_excluded$b=["as","active","eventKey"];function _objectWithoutPropertiesLoose$8(et,_e){if(et==null)return{};var tt={},nt=Object.keys(et),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_e.indexOf(rt)>=0)&&(tt[rt]=et[rt]);return tt}function useNavItem({key:et,onClick:_e,active:tt,id:nt,role:rt,disabled:it}){const ot=reactExports.useContext(SelectableContext$1),st=reactExports.useContext(NavContext$1),at=reactExports.useContext(TabContext$1);let lt=tt;const ct={role:rt};if(st){!rt&&st.role==="tablist"&&(ct.role="tab");const ut=st.getControllerId(et??null),dt=st.getControlledId(et??null);ct[dataAttr("event-key")]=et,ct.id=ut||nt,lt=tt==null&&et!=null?st.activeKey===et:tt,(lt||!(at!=null&&at.unmountOnExit)&&!(at!=null&&at.mountOnEnter))&&(ct["aria-controls"]=dt)}return ct.role==="tab"&&(ct["aria-selected"]=lt,lt||(ct.tabIndex=-1),it&&(ct.tabIndex=-1,ct["aria-disabled"]=!0)),ct.onClick=useEventCallback(ut=>{it||(_e==null||_e(ut),et!=null&&ot&&!ut.isPropagationStopped()&&ot(et,ut))}),[ct,{isActive:lt}]}const NavItem$1=reactExports.forwardRef((et,_e)=>{let{as:tt=Button$2,active:nt,eventKey:rt}=et,it=_objectWithoutPropertiesLoose$8(et,_excluded$b);const[ot,st]=useNavItem(Object.assign({key:makeEventKey(rt,it.href),active:nt},it));return ot[dataAttr("active")]=st.isActive,jsxRuntimeExports.jsx(tt,Object.assign({},it,ot,{ref:_e}))});NavItem$1.displayName="NavItem";const NavItem$2=NavItem$1,_excluded$a=["as","onSelect","activeKey","role","onKeyDown"];function _objectWithoutPropertiesLoose$7(et,_e){if(et==null)return{};var tt={},nt=Object.keys(et),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_e.indexOf(rt)>=0)&&(tt[rt]=et[rt]);return tt}const noop$6=()=>{},EVENT_KEY_ATTR=dataAttr("event-key"),Nav$2=reactExports.forwardRef((et,_e)=>{let{as:tt="div",onSelect:nt,activeKey:rt,role:it,onKeyDown:ot}=et,st=_objectWithoutPropertiesLoose$7(et,_excluded$a);const at=useForceUpdate(),lt=reactExports.useRef(!1),ct=reactExports.useContext(SelectableContext$1),ut=reactExports.useContext(TabContext$1);let dt,ft;ut&&(it=it||"tablist",rt=ut.activeKey,dt=ut.getControlledId,ft=ut.getControllerId);const pt=reactExports.useRef(null),mt=yt=>{const vt=pt.current;if(!vt)return null;const _t=qsa(vt,`[${EVENT_KEY_ATTR}]:not([aria-disabled=true])`),Et=vt.querySelector("[aria-selected=true]");if(!Et||Et!==document.activeElement)return null;const bt=_t.indexOf(Et);if(bt===-1)return null;let St=bt+yt;return St>=_t.length&&(St=0),St<0&&(St=_t.length-1),_t[St]},xt=(yt,vt)=>{yt!=null&&(nt==null||nt(yt,vt),ct==null||ct(yt,vt))},gt=yt=>{if(ot==null||ot(yt),!ut)return;let vt;switch(yt.key){case"ArrowLeft":case"ArrowUp":vt=mt(-1);break;case"ArrowRight":case"ArrowDown":vt=mt(1);break;default:return}vt&&(yt.preventDefault(),xt(vt.dataset[dataProp("EventKey")]||null,yt),lt.current=!0,at())};reactExports.useEffect(()=>{if(pt.current&&lt.current){const yt=pt.current.querySelector(`[${EVENT_KEY_ATTR}][aria-selected=true]`);yt==null||yt.focus()}lt.current=!1});const ht=useMergedRefs(_e,pt);return jsxRuntimeExports.jsx(SelectableContext$1.Provider,{value:xt,children:jsxRuntimeExports.jsx(NavContext$1.Provider,{value:{role:it,activeKey:makeEventKey(rt),getControlledId:dt||noop$6,getControllerId:ft||noop$6},children:jsxRuntimeExports.jsx(tt,Object.assign({},st,{onKeyDown:gt,ref:ht,role:it}))})})});Nav$2.displayName="Nav";const BaseNav=Object.assign(Nav$2,{Item:NavItem$2});var size$1;function scrollbarSize(et){if((!size$1&&size$1!==0||et)&&canUseDOM){var _e=document.createElement("div");_e.style.position="absolute",_e.style.top="-9999px",_e.style.width="50px",_e.style.height="50px",_e.style.overflow="scroll",document.body.appendChild(_e),size$1=_e.offsetWidth-_e.clientWidth,document.body.removeChild(_e)}return size$1}function activeElement(et){et===void 0&&(et=ownerDocument());try{var _e=et.activeElement;return!_e||!_e.nodeName?null:_e}catch{return et.body}}function getBodyScrollbarWidth(et=document){const _e=et.defaultView;return Math.abs(_e.innerWidth-et.documentElement.clientWidth)}const OPEN_DATA_ATTRIBUTE=dataAttr("modal-open");class ModalManager{constructor({ownerDocument:_e,handleContainerOverflow:tt=!0,isRTL:nt=!1}={}){this.handleContainerOverflow=tt,this.isRTL=nt,this.modals=[],this.ownerDocument=_e}getScrollbarWidth(){return getBodyScrollbarWidth(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(_e){}removeModalAttributes(_e){}setContainerStyle(_e){const tt={overflow:"hidden"},nt=this.isRTL?"paddingLeft":"paddingRight",rt=this.getElement();_e.style={overflow:rt.style.overflow,[nt]:rt.style[nt]},_e.scrollBarWidth&&(tt[nt]=`${parseInt(style$1(rt,nt)||"0",10)+_e.scrollBarWidth}px`),rt.setAttribute(OPEN_DATA_ATTRIBUTE,""),style$1(rt,tt)}reset(){[...this.modals].forEach(_e=>this.remove(_e))}removeContainerStyle(_e){const tt=this.getElement();tt.removeAttribute(OPEN_DATA_ATTRIBUTE),Object.assign(tt.style,_e.style)}add(_e){let tt=this.modals.indexOf(_e);return tt!==-1||(tt=this.modals.length,this.modals.push(_e),this.setModalAttributes(_e),tt!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),tt}remove(_e){const tt=this.modals.indexOf(_e);tt!==-1&&(this.modals.splice(tt,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(_e))}isTopModal(_e){return!!this.modals.length&&this.modals[this.modals.length-1]===_e}}const ModalManager$1=ModalManager,resolveContainerRef=(et,_e)=>canUseDOM?et==null?(_e||ownerDocument()).body:(typeof et=="function"&&(et=et()),et&&"current"in et&&(et=et.current),et&&("nodeType"in et||et.getBoundingClientRect)?et:null):null;function useWaitForDOMRef(et,_e){const tt=useWindow(),[nt,rt]=reactExports.useState(()=>resolveContainerRef(et,tt==null?void 0:tt.document));if(!nt){const it=resolveContainerRef(et);it&&rt(it)}return reactExports.useEffect(()=>{_e&&nt&&_e(nt)},[_e,nt]),reactExports.useEffect(()=>{const it=resolveContainerRef(et);it!==nt&&rt(it)},[et,nt]),nt}function NoopTransition({children:et,in:_e,onExited:tt,mountOnEnter:nt,unmountOnExit:rt}){const it=reactExports.useRef(null),ot=reactExports.useRef(_e),st=useEventCallback(tt);reactExports.useEffect(()=>{_e?ot.current=!0:st(it.current)},[_e,st]);const at=useMergedRefs(it,et.ref),lt=reactExports.cloneElement(et,{ref:at});return _e?lt:rt||!ot.current&&nt?null:lt}function useTransition({in:et,onTransition:_e}){const tt=reactExports.useRef(null),nt=reactExports.useRef(!0),rt=useEventCallback(_e);return useIsomorphicEffect(()=>{if(!tt.current)return;let it=!1;return rt({in:et,element:tt.current,initial:nt.current,isStale:()=>it}),()=>{it=!0}},[et,rt]),useIsomorphicEffect(()=>(nt.current=!1,()=>{nt.current=!0}),[]),tt}function ImperativeTransition({children:et,in:_e,onExited:tt,onEntered:nt,transition:rt}){const[it,ot]=reactExports.useState(!_e);_e&&it&&ot(!1);const st=useTransition({in:!!_e,onTransition:lt=>{const ct=()=>{lt.isStale()||(lt.in?nt==null||nt(lt.element,lt.initial):(ot(!0),tt==null||tt(lt.element)))};Promise.resolve(rt(lt)).then(ct,ut=>{throw lt.in||ot(!0),ut})}}),at=useMergedRefs(st,et.ref);return it&&!_e?null:reactExports.cloneElement(et,{ref:at})}function renderTransition(et,_e,tt){return et?jsxRuntimeExports.jsx(et,Object.assign({},tt)):_e?jsxRuntimeExports.jsx(ImperativeTransition,Object.assign({},tt,{transition:_e})):jsxRuntimeExports.jsx(NoopTransition,Object.assign({},tt))}function isEscKey(et){return et.code==="Escape"||et.keyCode===27}const _excluded$9=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function _objectWithoutPropertiesLoose$6(et,_e){if(et==null)return{};var tt={},nt=Object.keys(et),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_e.indexOf(rt)>=0)&&(tt[rt]=et[rt]);return tt}let manager;function getManager(et){return manager||(manager=new ModalManager$1({ownerDocument:et==null?void 0:et.document})),manager}function useModalManager(et){const _e=useWindow(),tt=et||getManager(_e),nt=reactExports.useRef({dialog:null,backdrop:null});return Object.assign(nt.current,{add:()=>tt.add(nt.current),remove:()=>tt.remove(nt.current),isTopModal:()=>tt.isTopModal(nt.current),setDialogRef:reactExports.useCallback(rt=>{nt.current.dialog=rt},[]),setBackdropRef:reactExports.useCallback(rt=>{nt.current.backdrop=rt},[])})}const Modal$2=reactExports.forwardRef((et,_e)=>{let{show:tt=!1,role:nt="dialog",className:rt,style:it,children:ot,backdrop:st=!0,keyboard:at=!0,onBackdropClick:lt,onEscapeKeyDown:ct,transition:ut,runTransition:dt,backdropTransition:ft,runBackdropTransition:pt,autoFocus:mt=!0,enforceFocus:xt=!0,restoreFocus:gt=!0,restoreFocusOptions:ht,renderDialog:yt,renderBackdrop:vt=zt=>jsxRuntimeExports.jsx("div",Object.assign({},zt)),manager:_t,container:Et,onShow:bt,onHide:St=()=>{},onExit:wt,onExited:Rt,onExiting:Nt,onEnter:kt,onEntering:Pt,onEntered:jt}=et,Wt=_objectWithoutPropertiesLoose$6(et,_excluded$9);const Ht=useWindow(),tn=useWaitForDOMRef(Et),Ot=useModalManager(_t),Lt=useMounted(),Mt=usePrevious$1(tt),[Jt,qt]=reactExports.useState(!tt),on=reactExports.useRef(null);reactExports.useImperativeHandle(_e,()=>Ot,[Ot]),canUseDOM&&!Mt&&tt&&(on.current=activeElement(Ht==null?void 0:Ht.document)),tt&&Jt&&qt(!1);const Kt=useEventCallback(()=>{if(Ot.add(),Tt.current=listen(document,"keydown",nn),It.current=listen(document,"focus",()=>setTimeout(sn),!0),bt&&bt(),mt){var zt,pn;const an=activeElement((zt=(pn=Ot.dialog)==null?void 0:pn.ownerDocument)!=null?zt:Ht==null?void 0:Ht.document);Ot.dialog&&an&&!contains(Ot.dialog,an)&&(on.current=an,Ot.dialog.focus())}}),Qt=useEventCallback(()=>{if(Ot.remove(),Tt.current==null||Tt.current(),It.current==null||It.current(),gt){var zt;(zt=on.current)==null||zt.focus==null||zt.focus(ht),on.current=null}});reactExports.useEffect(()=>{!tt||!tn||Kt()},[tt,tn,Kt]),reactExports.useEffect(()=>{Jt&&Qt()},[Jt,Qt]),useWillUnmount(()=>{Qt()});const sn=useEventCallback(()=>{if(!xt||!Lt()||!Ot.isTopModal())return;const zt=activeElement(Ht==null?void 0:Ht.document);Ot.dialog&&zt&&!contains(Ot.dialog,zt)&&Ot.dialog.focus()}),hn=useEventCallback(zt=>{zt.target===zt.currentTarget&&(lt==null||lt(zt),st===!0&&St())}),nn=useEventCallback(zt=>{at&&isEscKey(zt)&&Ot.isTopModal()&&(ct==null||ct(zt),zt.defaultPrevented||St())}),It=reactExports.useRef(),Tt=reactExports.useRef(),At=(...zt)=>{qt(!0),Rt==null||Rt(...zt)};if(!tn)return null;const Bt=Object.assign({role:nt,ref:Ot.setDialogRef,"aria-modal":nt==="dialog"?!0:void 0},Wt,{style:it,className:rt,tabIndex:-1});let Ft=yt?yt(Bt):jsxRuntimeExports.jsx("div",Object.assign({},Bt,{children:reactExports.cloneElement(ot,{role:"document"})}));Ft=renderTransition(ut,dt,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!tt,onExit:wt,onExiting:Nt,onExited:At,onEnter:kt,onEntering:Pt,onEntered:jt,children:Ft});let Gt=null;return st&&(Gt=vt({ref:Ot.setBackdropRef,onClick:hn}),Gt=renderTransition(ft,pt,{in:!!tt,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Gt})),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ReactDOM.createPortal(jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Gt,Ft]}),tn)})});Modal$2.displayName="Modal";const BaseModal=Object.assign(Modal$2,{Manager:ModalManager$1});function hasClass(et,_e){return et.classList?!!_e&&et.classList.contains(_e):(" "+(et.className.baseVal||et.className)+" ").indexOf(" "+_e+" ")!==-1}function addClass(et,_e){et.classList?et.classList.add(_e):hasClass(et,_e)||(typeof et.className=="string"?et.className=et.className+" "+_e:et.setAttribute("class",(et.className&&et.className.baseVal||"")+" "+_e))}function replaceClassName(et,_e){return et.replace(new RegExp("(^|\\s)"+_e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function removeClass(et,_e){et.classList?et.classList.remove(_e):typeof et.className=="string"?et.className=replaceClassName(et.className,_e):et.setAttribute("class",replaceClassName(et.className&&et.className.baseVal||"",_e))}const Selector={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class BootstrapModalManager extends ModalManager$1{adjustAndStore(_e,tt,nt){const rt=tt.style[_e];tt.dataset[_e]=rt,style$1(tt,{[_e]:`${parseFloat(style$1(tt,_e))+nt}px`})}restore(_e,tt){const nt=tt.dataset[_e];nt!==void 0&&(delete tt.dataset[_e],style$1(tt,{[_e]:nt}))}setContainerStyle(_e){super.setContainerStyle(_e);const tt=this.getElement();if(addClass(tt,"modal-open"),!_e.scrollBarWidth)return;const nt=this.isRTL?"paddingLeft":"paddingRight",rt=this.isRTL?"marginLeft":"marginRight";qsa(tt,Selector.FIXED_CONTENT).forEach(it=>this.adjustAndStore(nt,it,_e.scrollBarWidth)),qsa(tt,Selector.STICKY_CONTENT).forEach(it=>this.adjustAndStore(rt,it,-_e.scrollBarWidth)),qsa(tt,Selector.NAVBAR_TOGGLER).forEach(it=>this.adjustAndStore(rt,it,_e.scrollBarWidth))}removeContainerStyle(_e){super.removeContainerStyle(_e);const tt=this.getElement();removeClass(tt,"modal-open");const nt=this.isRTL?"paddingLeft":"paddingRight",rt=this.isRTL?"marginLeft":"marginRight";qsa(tt,Selector.FIXED_CONTENT).forEach(it=>this.restore(nt,it)),qsa(tt,Selector.STICKY_CONTENT).forEach(it=>this.restore(rt,it)),qsa(tt,Selector.NAVBAR_TOGGLER).forEach(it=>this.restore(rt,it))}}let sharedManager;function getSharedManager(et){return sharedManager||(sharedManager=new BootstrapModalManager(et)),sharedManager}const ModalBody=createWithBsPrefix("modal-body"),ModalContext=reactExports.createContext({onHide(){}}),ModalContext$1=ModalContext,ModalDialog=reactExports.forwardRef(({bsPrefix:et,className:_e,contentClassName:tt,centered:nt,size:rt,fullscreen:it,children:ot,scrollable:st,...at},lt)=>{et=useBootstrapPrefix(et,"modal");const ct=`${et}-dialog`,ut=typeof it=="string"?`${et}-fullscreen-${it}`:`${et}-fullscreen`;return jsxRuntimeExports.jsx("div",{...at,ref:lt,className:classNames$1(ct,_e,rt&&`${et}-${rt}`,nt&&`${ct}-centered`,st&&`${ct}-scrollable`,it&&ut),children:jsxRuntimeExports.jsx("div",{className:classNames$1(`${et}-content`,tt),children:ot})})});ModalDialog.displayName="ModalDialog";const ModalDialog$1=ModalDialog,ModalFooter=createWithBsPrefix("modal-footer"),AbstractModalHeader=reactExports.forwardRef(({closeLabel:et="Close",closeVariant:_e,closeButton:tt=!1,onHide:nt,children:rt,...it},ot)=>{const st=reactExports.useContext(ModalContext$1),at=useEventCallback(()=>{st==null||st.onHide(),nt==null||nt()});return jsxRuntimeExports.jsxs("div",{ref:ot,...it,children:[rt,tt&&jsxRuntimeExports.jsx(CloseButton$1,{"aria-label":et,variant:_e,onClick:at})]})}),AbstractModalHeader$1=AbstractModalHeader,ModalHeader=reactExports.forwardRef(({bsPrefix:et,className:_e,closeLabel:tt="Close",closeButton:nt=!1,...rt},it)=>(et=useBootstrapPrefix(et,"modal-header"),jsxRuntimeExports.jsx(AbstractModalHeader$1,{ref:it,...rt,className:classNames$1(_e,et),closeLabel:tt,closeButton:nt})));ModalHeader.displayName="ModalHeader";const ModalHeader$1=ModalHeader,DivStyledAsH4=divWithClassName("h4"),ModalTitle=createWithBsPrefix("modal-title",{Component:DivStyledAsH4});function DialogTransition$1(et){return jsxRuntimeExports.jsx(Fade$1,{...et,timeout:null})}function BackdropTransition$1(et){return jsxRuntimeExports.jsx(Fade$1,{...et,timeout:null})}const Modal=reactExports.forwardRef(({bsPrefix:et,className:_e,style:tt,dialogClassName:nt,contentClassName:rt,children:it,dialogAs:ot=ModalDialog$1,"aria-labelledby":st,"aria-describedby":at,"aria-label":lt,show:ct=!1,animation:ut=!0,backdrop:dt=!0,keyboard:ft=!0,onEscapeKeyDown:pt,onShow:mt,onHide:xt,container:gt,autoFocus:ht=!0,enforceFocus:yt=!0,restoreFocus:vt=!0,restoreFocusOptions:_t,onEntered:Et,onExit:bt,onExiting:St,onEnter:wt,onEntering:Rt,onExited:Nt,backdropClassName:kt,manager:Pt,...jt},Wt)=>{const[Ht,tn]=reactExports.useState({}),[Ot,Lt]=reactExports.useState(!1),Mt=reactExports.useRef(!1),Jt=reactExports.useRef(!1),qt=reactExports.useRef(null),[on,Kt]=useCallbackRef(),Qt=useMergedRefs(Wt,Kt),sn=useEventCallback(xt),hn=useIsRTL();et=useBootstrapPrefix(et,"modal");const nn=reactExports.useMemo(()=>({onHide:sn}),[sn]);function It(){return Pt||getSharedManager({isRTL:hn})}function Tt(rn){if(!canUseDOM)return;const bn=It().getScrollbarWidth()>0,Tn=rn.scrollHeight>ownerDocument(rn).documentElement.clientHeight;tn({paddingRight:bn&&!Tn?scrollbarSize():void 0,paddingLeft:!bn&&Tn?scrollbarSize():void 0})}const At=useEventCallback(()=>{on&&Tt(on.dialog)});useWillUnmount(()=>{removeEventListener(window,"resize",At),qt.current==null||qt.current()});const Bt=()=>{Mt.current=!0},Ft=rn=>{Mt.current&&on&&rn.target===on.dialog&&(Jt.current=!0),Mt.current=!1},Gt=()=>{Lt(!0),qt.current=transitionEnd(on.dialog,()=>{Lt(!1)})},zt=rn=>{rn.target===rn.currentTarget&&Gt()},pn=rn=>{if(dt==="static"){zt(rn);return}if(Jt.current||rn.target!==rn.currentTarget){Jt.current=!1;return}xt==null||xt()},an=rn=>{ft?pt==null||pt(rn):(rn.preventDefault(),dt==="static"&&Gt())},En=(rn,bn)=>{rn&&Tt(rn),wt==null||wt(rn,bn)},_n=rn=>{qt.current==null||qt.current(),bt==null||bt(rn)},fn=(rn,bn)=>{Rt==null||Rt(rn,bn),addEventListener(window,"resize",At)},wn=rn=>{rn&&(rn.style.display=""),Nt==null||Nt(rn),removeEventListener(window,"resize",At)},On=reactExports.useCallback(rn=>jsxRuntimeExports.jsx("div",{...rn,className:classNames$1(`${et}-backdrop`,kt,!ut&&"show")}),[ut,kt,et]),$n={...tt,...Ht};$n.display="block";const Nn=rn=>jsxRuntimeExports.jsx("div",{role:"dialog",...rn,style:$n,className:classNames$1(_e,et,Ot&&`${et}-static`,!ut&&"show"),onClick:dt?pn:void 0,onMouseUp:Ft,"aria-label":lt,"aria-labelledby":st,"aria-describedby":at,children:jsxRuntimeExports.jsx(ot,{...jt,onMouseDown:Bt,className:nt,contentClassName:rt,children:it})});return jsxRuntimeExports.jsx(ModalContext$1.Provider,{value:nn,children:jsxRuntimeExports.jsx(BaseModal,{show:ct,ref:Qt,backdrop:dt,container:gt,keyboard:!0,autoFocus:ht,enforceFocus:yt,restoreFocus:vt,restoreFocusOptions:_t,onEscapeKeyDown:an,onShow:mt,onHide:xt,onEnter:En,onEntering:fn,onEntered:Et,onExit:_n,onExiting:St,onExited:wn,manager:It(),transition:ut?DialogTransition$1:void 0,backdropTransition:ut?BackdropTransition$1:void 0,renderBackdrop:On,renderDialog:Nn})})});Modal.displayName="Modal";const Modal$1=Object.assign(Modal,{Body:ModalBody,Header:ModalHeader$1,Title:ModalTitle,Footer:ModalFooter,Dialog:ModalDialog$1,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});var all={exports:{}},createChainableTypeChecker={exports:{}};(function(et,_e){Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=tt;function tt(nt){function rt(ot,st,at,lt,ct,ut){var dt=lt||"<<anonymous>>",ft=ut||at;if(st[at]==null)return ot?new Error("Required "+ct+" `"+ft+"` was not specified "+("in `"+dt+"`.")):null;for(var pt=arguments.length,mt=Array(pt>6?pt-6:0),xt=6;xt<pt;xt++)mt[xt-6]=arguments[xt];return nt.apply(void 0,[st,at,dt,ct,ft].concat(mt))}var it=rt.bind(null,!1);return it.isRequired=rt.bind(null,!0),it}et.exports=_e.default})(createChainableTypeChecker,createChainableTypeChecker.exports);var createChainableTypeCheckerExports=createChainableTypeChecker.exports;(function(et,_e){Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=it;var tt=createChainableTypeCheckerExports,nt=rt(tt);function rt(ot){return ot&&ot.__esModule?ot:{default:ot}}function it(){for(var ot=arguments.length,st=Array(ot),at=0;at<ot;at++)st[at]=arguments[at];function lt(){for(var ct=arguments.length,ut=Array(ct),dt=0;dt<ct;dt++)ut[dt]=arguments[dt];var ft=null;return st.forEach(function(pt){if(ft==null){var mt=pt.apply(void 0,ut);mt!=null&&(ft=mt)}}),ft}return(0,nt.default)(lt)}et.exports=_e.default})(all,all.exports);const NavItem=createWithBsPrefix("nav-item"),NavLink=reactExports.forwardRef(({bsPrefix:et,className:_e,as:tt=Anchor$1,active:nt,eventKey:rt,disabled:it=!1,...ot},st)=>{et=useBootstrapPrefix(et,"nav-link");const[at,lt]=useNavItem({key:makeEventKey(rt,ot.href),active:nt,disabled:it,...ot});return jsxRuntimeExports.jsx(tt,{...ot,...at,ref:st,disabled:it,className:classNames$1(_e,et,it&&"disabled",lt.isActive&&"active")})});NavLink.displayName="NavLink";const NavLink$1=NavLink,Nav=reactExports.forwardRef((et,_e)=>{const{as:tt="div",bsPrefix:nt,variant:rt,fill:it=!1,justify:ot=!1,navbar:st,navbarScroll:at,className:lt,activeKey:ct,...ut}=useUncontrolled(et,{activeKey:"onSelect"}),dt=useBootstrapPrefix(nt,"nav");let ft,pt,mt=!1;const xt=reactExports.useContext(NavbarContext),gt=reactExports.useContext(CardHeaderContext);return xt?(ft=xt.bsPrefix,mt=st??!0):gt&&({cardHeaderBsPrefix:pt}=gt),jsxRuntimeExports.jsx(BaseNav,{as:tt,ref:_e,activeKey:ct,className:classNames$1(lt,{[dt]:!mt,[`${ft}-nav`]:mt,[`${ft}-nav-scroll`]:mt&&at,[`${pt}-${rt}`]:!!pt,[`${dt}-${rt}`]:!!rt,[`${dt}-fill`]:it,[`${dt}-justified`]:ot}),...ut})});Nav.displayName="Nav";const Nav$1=Object.assign(Nav,{Item:NavItem,Link:NavLink$1}),NavbarBrand=reactExports.forwardRef(({bsPrefix:et,className:_e,as:tt,...nt},rt)=>{et=useBootstrapPrefix(et,"navbar-brand");const it=tt||(nt.href?"a":"span");return jsxRuntimeExports.jsx(it,{...nt,ref:rt,className:classNames$1(_e,et)})});NavbarBrand.displayName="NavbarBrand";const NavbarBrand$1=NavbarBrand,NavbarCollapse=reactExports.forwardRef(({children:et,bsPrefix:_e,...tt},nt)=>{_e=useBootstrapPrefix(_e,"navbar-collapse");const rt=reactExports.useContext(NavbarContext);return jsxRuntimeExports.jsx(Collapse$1,{in:!!(rt&&rt.expanded),...tt,children:jsxRuntimeExports.jsx("div",{ref:nt,className:_e,children:et})})});NavbarCollapse.displayName="NavbarCollapse";const NavbarCollapse$1=NavbarCollapse,NavbarToggle=reactExports.forwardRef(({bsPrefix:et,className:_e,children:tt,label:nt="Toggle navigation",as:rt="button",onClick:it,...ot},st)=>{et=useBootstrapPrefix(et,"navbar-toggler");const{onToggle:at,expanded:lt}=reactExports.useContext(NavbarContext)||{},ct=useEventCallback(ut=>{it&&it(ut),at&&at()});return rt==="button"&&(ot.type="button"),jsxRuntimeExports.jsx(rt,{...ot,ref:st,onClick:ct,"aria-label":nt,className:classNames$1(_e,et,!lt&&"collapsed"),children:tt||jsxRuntimeExports.jsx("span",{className:`${et}-icon`})})});NavbarToggle.displayName="NavbarToggle";const NavbarToggle$1=NavbarToggle,matchersByWindow=new WeakMap,getMatcher=(et,_e)=>{if(!et||!_e)return;const tt=matchersByWindow.get(_e)||new Map;matchersByWindow.set(_e,tt);let nt=tt.get(et);return nt||(nt=_e.matchMedia(et),nt.refCount=0,tt.set(nt.media,nt)),nt};function useMediaQuery(et,_e=typeof window>"u"?void 0:window){const tt=getMatcher(et,_e),[nt,rt]=reactExports.useState(()=>tt?tt.matches:!1);return useIsomorphicEffect(()=>{let it=getMatcher(et,_e);if(!it)return rt(!1);let ot=matchersByWindow.get(_e);const st=()=>{rt(it.matches)};return it.refCount++,it.addListener(st),st(),()=>{it.removeListener(st),it.refCount--,it.refCount<=0&&(ot==null||ot.delete(it.media)),it=void 0}},[et]),nt}function createBreakpointHook(et){const _e=Object.keys(et);function tt(st,at){return st===at?at:st?`${st} and ${at}`:at}function nt(st){return _e[Math.min(_e.indexOf(st)+1,_e.length-1)]}function rt(st){const at=nt(st);let lt=et[at];return typeof lt=="number"?lt=`${lt-.2}px`:lt=`calc(${lt} - 0.2px)`,`(max-width: ${lt})`}function it(st){let at=et[st];return typeof at=="number"&&(at=`${at}px`),`(min-width: ${at})`}function ot(st,at,lt){let ct;typeof st=="object"?(ct=st,lt=at,at=!0):(at=at||!0,ct={[st]:at});let ut=reactExports.useMemo(()=>Object.entries(ct).reduce((dt,[ft,pt])=>((pt==="up"||pt===!0)&&(dt=tt(dt,it(ft))),(pt==="down"||pt===!0)&&(dt=tt(dt,rt(ft))),dt),""),[JSON.stringify(ct)]);return useMediaQuery(ut,lt)}return ot}const useBreakpoint=createBreakpointHook({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),OffcanvasBody=createWithBsPrefix("offcanvas-body"),transitionStyles={[ENTERING]:"show",[ENTERED]:"show"},OffcanvasToggling=reactExports.forwardRef(({bsPrefix:et,className:_e,children:tt,in:nt=!1,mountOnEnter:rt=!1,unmountOnExit:it=!1,appear:ot=!1,...st},at)=>(et=useBootstrapPrefix(et,"offcanvas"),jsxRuntimeExports.jsx(TransitionWrapper$1,{ref:at,addEndListener:transitionEndListener,in:nt,mountOnEnter:rt,unmountOnExit:it,appear:ot,...st,childRef:tt.ref,children:(lt,ct)=>reactExports.cloneElement(tt,{...ct,className:classNames$1(_e,tt.props.className,(lt===ENTERING||lt===EXITING)&&`${et}-toggling`,transitionStyles[lt])})})));OffcanvasToggling.displayName="OffcanvasToggling";const OffcanvasToggling$1=OffcanvasToggling,OffcanvasHeader=reactExports.forwardRef(({bsPrefix:et,className:_e,closeLabel:tt="Close",closeButton:nt=!1,...rt},it)=>(et=useBootstrapPrefix(et,"offcanvas-header"),jsxRuntimeExports.jsx(AbstractModalHeader$1,{ref:it,...rt,className:classNames$1(_e,et),closeLabel:tt,closeButton:nt})));OffcanvasHeader.displayName="OffcanvasHeader";const OffcanvasHeader$1=OffcanvasHeader,DivStyledAsH5=divWithClassName("h5"),OffcanvasTitle=createWithBsPrefix("offcanvas-title",{Component:DivStyledAsH5});function DialogTransition(et){return jsxRuntimeExports.jsx(OffcanvasToggling$1,{...et})}function BackdropTransition(et){return jsxRuntimeExports.jsx(Fade$1,{...et})}const Offcanvas=reactExports.forwardRef(({bsPrefix:et,className:_e,children:tt,"aria-labelledby":nt,placement:rt="start",responsive:it,show:ot=!1,backdrop:st=!0,keyboard:at=!0,scroll:lt=!1,onEscapeKeyDown:ct,onShow:ut,onHide:dt,container:ft,autoFocus:pt=!0,enforceFocus:mt=!0,restoreFocus:xt=!0,restoreFocusOptions:gt,onEntered:ht,onExit:yt,onExiting:vt,onEnter:_t,onEntering:Et,onExited:bt,backdropClassName:St,manager:wt,renderStaticNode:Rt=!1,...Nt},kt)=>{const Pt=reactExports.useRef();et=useBootstrapPrefix(et,"offcanvas");const{onToggle:jt}=reactExports.useContext(NavbarContext)||{},[Wt,Ht]=reactExports.useState(!1),tn=useBreakpoint(it||"xs","up");reactExports.useEffect(()=>{Ht(it?ot&&!tn:ot)},[ot,it,tn]);const Ot=useEventCallback(()=>{jt==null||jt(),dt==null||dt()}),Lt=reactExports.useMemo(()=>({onHide:Ot}),[Ot]);function Mt(){return wt||(lt?(Pt.current||(Pt.current=new BootstrapModalManager({handleContainerOverflow:!1})),Pt.current):getSharedManager())}const Jt=(Qt,...sn)=>{Qt&&(Qt.style.visibility="visible"),_t==null||_t(Qt,...sn)},qt=(Qt,...sn)=>{Qt&&(Qt.style.visibility=""),bt==null||bt(...sn)},on=reactExports.useCallback(Qt=>jsxRuntimeExports.jsx("div",{...Qt,className:classNames$1(`${et}-backdrop`,St)}),[St,et]),Kt=Qt=>jsxRuntimeExports.jsx("div",{...Qt,...Nt,className:classNames$1(_e,it?`${et}-${it}`:et,`${et}-${rt}`),"aria-labelledby":nt,children:tt});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!Wt&&(it||Rt)&&Kt({}),jsxRuntimeExports.jsx(ModalContext$1.Provider,{value:Lt,children:jsxRuntimeExports.jsx(BaseModal,{show:Wt,ref:kt,backdrop:st,container:ft,keyboard:at,autoFocus:pt,enforceFocus:mt&&!lt,restoreFocus:xt,restoreFocusOptions:gt,onEscapeKeyDown:ct,onShow:ut,onHide:Ot,onEnter:Jt,onEntering:Et,onEntered:ht,onExit:yt,onExiting:vt,onExited:qt,manager:Mt(),transition:DialogTransition,backdropTransition:BackdropTransition,renderBackdrop:on,renderDialog:Kt})})]})});Offcanvas.displayName="Offcanvas";const Offcanvas$1=Object.assign(Offcanvas,{Body:OffcanvasBody,Header:OffcanvasHeader$1,Title:OffcanvasTitle}),NavbarOffcanvas=reactExports.forwardRef((et,_e)=>{const tt=reactExports.useContext(NavbarContext);return jsxRuntimeExports.jsx(Offcanvas$1,{ref:_e,show:!!(tt!=null&&tt.expanded),...et,renderStaticNode:!0})});NavbarOffcanvas.displayName="NavbarOffcanvas";const NavbarOffcanvas$1=NavbarOffcanvas,NavbarText=createWithBsPrefix("navbar-text",{Component:"span"}),Navbar=reactExports.forwardRef((et,_e)=>{const{bsPrefix:tt,expand:nt=!0,variant:rt="light",bg:it,fixed:ot,sticky:st,className:at,as:lt="nav",expanded:ct,onToggle:ut,onSelect:dt,collapseOnSelect:ft=!1,...pt}=useUncontrolled(et,{expanded:"onToggle"}),mt=useBootstrapPrefix(tt,"navbar"),xt=reactExports.useCallback((...yt)=>{dt==null||dt(...yt),ft&&ct&&(ut==null||ut(!1))},[dt,ft,ct,ut]);pt.role===void 0&&lt!=="nav"&&(pt.role="navigation");let gt=`${mt}-expand`;typeof nt=="string"&&(gt=`${gt}-${nt}`);const ht=reactExports.useMemo(()=>({onToggle:()=>ut==null?void 0:ut(!ct),bsPrefix:mt,expanded:!!ct,expand:nt}),[mt,ct,nt,ut]);return jsxRuntimeExports.jsx(NavbarContext.Provider,{value:ht,children:jsxRuntimeExports.jsx(SelectableContext$1.Provider,{value:xt,children:jsxRuntimeExports.jsx(lt,{ref:_e,...pt,className:classNames$1(at,mt,nt&&gt,rt&&`${mt}-${rt}`,it&&`bg-${it}`,st&&`sticky-${st}`,ot&&`fixed-${ot}`)})})})});Navbar.displayName="Navbar";const Navbar$1=Object.assign(Navbar,{Brand:NavbarBrand$1,Collapse:NavbarCollapse$1,Offcanvas:NavbarOffcanvas$1,Text:NavbarText,Toggle:NavbarToggle$1}),noop$5=()=>{};function useRootClose(et,_e,{disabled:tt,clickTrigger:nt}={}){const rt=_e||noop$5;useClickOutside(et,rt,{disabled:tt,clickTrigger:nt});const it=useEventCallback(ot=>{isEscKey(ot)&&rt(ot)});reactExports.useEffect(()=>{if(tt||et==null)return;const ot=ownerDocument(getRefTarget(et));let st=(ot.defaultView||window).event;const at=listen(ot,"keyup",lt=>{if(lt===st){st=void 0;return}it(lt)});return()=>{at()}},[et,tt,it])}const Overlay$2=reactExports.forwardRef((et,_e)=>{const{flip:tt,offset:nt,placement:rt,containerPadding:it,popperConfig:ot={},transition:st,runTransition:at}=et,[lt,ct]=useCallbackRef(),[ut,dt]=useCallbackRef(),ft=useMergedRefs(ct,_e),pt=useWaitForDOMRef(et.container),mt=useWaitForDOMRef(et.target),[xt,gt]=reactExports.useState(!et.show),ht=usePopper(mt,lt,mergeOptionsWithPopperConfig({placement:rt,enableEvents:!!et.show,containerPadding:it||5,flip:tt,offset:nt,arrowElement:ut,popperConfig:ot}));et.show&&xt&&gt(!1);const yt=(...Nt)=>{gt(!0),et.onExited&&et.onExited(...Nt)},vt=et.show||!xt;if(useRootClose(lt,et.onHide,{disabled:!et.rootClose||et.rootCloseDisabled,clickTrigger:et.rootCloseEvent}),!vt)return null;const{onExit:_t,onExiting:Et,onEnter:bt,onEntering:St,onEntered:wt}=et;let Rt=et.children(Object.assign({},ht.attributes.popper,{style:ht.styles.popper,ref:ft}),{popper:ht,placement:rt,show:!!et.show,arrowProps:Object.assign({},ht.attributes.arrow,{style:ht.styles.arrow,ref:dt})});return Rt=renderTransition(st,at,{in:!!et.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Rt,onExit:_t,onExiting:Et,onExited:yt,onEnter:bt,onEntering:St,onEntered:wt}),pt?ReactDOM.createPortal(Rt,pt):null});Overlay$2.displayName="Overlay";const BaseOverlay=Overlay$2,PopoverHeader=createWithBsPrefix("popover-header"),PopoverBody=createWithBsPrefix("popover-body");function getOverlayDirection(et,_e){let tt=et;return et==="left"?tt=_e?"end":"start":et==="right"&&(tt=_e?"start":"end"),tt}function getInitialPopperStyles(et="absolute"){return{position:et,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const Popover=reactExports.forwardRef(({bsPrefix:et,placement:_e="right",className:tt,style:nt,children:rt,body:it,arrowProps:ot,hasDoneInitialMeasure:st,popper:at,show:lt,...ct},ut)=>{const dt=useBootstrapPrefix(et,"popover"),ft=useIsRTL(),[pt]=(_e==null?void 0:_e.split("-"))||[],mt=getOverlayDirection(pt,ft);let xt=nt;return lt&&!st&&(xt={...nt,...getInitialPopperStyles(at==null?void 0:at.strategy)}),jsxRuntimeExports.jsxs("div",{ref:ut,role:"tooltip",style:xt,"x-placement":pt,className:classNames$1(tt,dt,pt&&`bs-popover-${mt}`),...ct,children:[jsxRuntimeExports.jsx("div",{className:"popover-arrow",...ot}),it?jsxRuntimeExports.jsx(PopoverBody,{children:rt}):rt]})}),Popover$1=Object.assign(Popover,{Header:PopoverHeader,Body:PopoverBody,POPPER_OFFSET:[0,8]}),Tooltip=reactExports.forwardRef(({bsPrefix:et,placement:_e="right",className:tt,style:nt,children:rt,arrowProps:it,hasDoneInitialMeasure:ot,popper:st,show:at,...lt},ct)=>{et=useBootstrapPrefix(et,"tooltip");const ut=useIsRTL(),[dt]=(_e==null?void 0:_e.split("-"))||[],ft=getOverlayDirection(dt,ut);let pt=nt;return at&&!ot&&(pt={...nt,...getInitialPopperStyles(st==null?void 0:st.strategy)}),jsxRuntimeExports.jsxs("div",{ref:ct,style:pt,role:"tooltip","x-placement":dt,className:classNames$1(tt,et,`bs-tooltip-${ft}`),...lt,children:[jsxRuntimeExports.jsx("div",{className:"tooltip-arrow",...it}),jsxRuntimeExports.jsx("div",{className:`${et}-inner`,children:rt})]})});Tooltip.displayName="Tooltip";const Tooltip$1=Object.assign(Tooltip,{TOOLTIP_OFFSET:[0,6]});function useOverlayOffset(et){const _e=reactExports.useRef(null),tt=useBootstrapPrefix(void 0,"popover"),nt=useBootstrapPrefix(void 0,"tooltip"),rt=reactExports.useMemo(()=>({name:"offset",options:{offset:()=>{if(et)return et;if(_e.current){if(hasClass(_e.current,tt))return Popover$1.POPPER_OFFSET;if(hasClass(_e.current,nt))return Tooltip$1.TOOLTIP_OFFSET}return[0,0]}}}),[et,tt,nt]);return[_e,[rt]]}function wrapRefs(et,_e){const{ref:tt}=et,{ref:nt}=_e;et.ref=tt.__wrapped||(tt.__wrapped=rt=>tt(safeFindDOMNode(rt))),_e.ref=nt.__wrapped||(nt.__wrapped=rt=>nt(safeFindDOMNode(rt)))}const Overlay=reactExports.forwardRef(({children:et,transition:_e=Fade$1,popperConfig:tt={},rootClose:nt=!1,placement:rt="top",show:it=!1,...ot},st)=>{const at=reactExports.useRef({}),[lt,ct]=reactExports.useState(null),[ut,dt]=useOverlayOffset(ot.offset),ft=useMergedRefs(st,ut),pt=_e===!0?Fade$1:_e||void 0,mt=useEventCallback(xt=>{ct(xt),tt==null||tt.onFirstUpdate==null||tt.onFirstUpdate(xt)});return useIsomorphicEffect(()=>{lt&&(at.current.scheduleUpdate==null||at.current.scheduleUpdate())},[lt]),reactExports.useEffect(()=>{it||ct(null)},[it]),jsxRuntimeExports.jsx(BaseOverlay,{...ot,ref:ft,popperConfig:{...tt,modifiers:dt.concat(tt.modifiers||[]),onFirstUpdate:mt},transition:pt,rootClose:nt,placement:rt,show:it,children:(xt,{arrowProps:gt,popper:ht,show:yt})=>{var vt,_t;wrapRefs(xt,gt);const Et=ht==null?void 0:ht.placement,bt=Object.assign(at.current,{state:ht==null?void 0:ht.state,scheduleUpdate:ht==null?void 0:ht.update,placement:Et,outOfBoundaries:(ht==null||(vt=ht.state)==null||(_t=vt.modifiersData.hide)==null?void 0:_t.isReferenceHidden)||!1,strategy:tt.strategy}),St=!!lt;return typeof et=="function"?et({...xt,placement:Et,show:yt,...!_e&&yt&&{className:"show"},popper:bt,arrowProps:gt,hasDoneInitialMeasure:St}):reactExports.cloneElement(et,{...xt,placement:Et,arrowProps:gt,popper:bt,hasDoneInitialMeasure:St,className:classNames$1(et.props.className,!_e&&yt&&"show"),style:{...et.props.style,...xt.style}})}})});Overlay.displayName="Overlay";const Overlay$1=Overlay;function normalizeDelay(et){return et&&typeof et=="object"?et:{show:et,hide:et}}function handleMouseOverOut(et,_e,tt){const[nt]=_e,rt=nt.currentTarget,it=nt.relatedTarget||nt.nativeEvent[tt];(!it||it!==rt)&&!contains(rt,it)&&et(..._e)}function OverlayTrigger({trigger:et=["hover","focus"],overlay:_e,children:tt,popperConfig:nt={},show:rt,defaultShow:it=!1,onToggle:ot,delay:st,placement:at,flip:lt=at&&at.indexOf("auto")!==-1,...ct}){const ut=reactExports.useRef(null),dt=useMergedRefs(ut,tt.ref),ft=useTimeout(),pt=reactExports.useRef(""),[mt,xt]=useUncontrolledProp(rt,it,ot),gt=normalizeDelay(st),{onFocus:ht,onBlur:yt,onClick:vt}=typeof tt!="function"?reactExports.Children.only(tt).props:{},_t=Wt=>{dt(safeFindDOMNode(Wt))},Et=reactExports.useCallback(()=>{if(ft.clear(),pt.current="show",!gt.show){xt(!0);return}ft.set(()=>{pt.current==="show"&&xt(!0)},gt.show)},[gt.show,xt,ft]),bt=reactExports.useCallback(()=>{if(ft.clear(),pt.current="hide",!gt.hide){xt(!1);return}ft.set(()=>{pt.current==="hide"&&xt(!1)},gt.hide)},[gt.hide,xt,ft]),St=reactExports.useCallback((...Wt)=>{Et(),ht==null||ht(...Wt)},[Et,ht]),wt=reactExports.useCallback((...Wt)=>{bt(),yt==null||yt(...Wt)},[bt,yt]),Rt=reactExports.useCallback((...Wt)=>{xt(!mt),vt==null||vt(...Wt)},[vt,xt,mt]),Nt=reactExports.useCallback((...Wt)=>{handleMouseOverOut(Et,Wt,"fromElement")},[Et]),kt=reactExports.useCallback((...Wt)=>{handleMouseOverOut(bt,Wt,"toElement")},[bt]),Pt=et==null?[]:[].concat(et),jt={ref:_t};return Pt.indexOf("click")!==-1&&(jt.onClick=Rt),Pt.indexOf("focus")!==-1&&(jt.onFocus=St,jt.onBlur=wt),Pt.indexOf("hover")!==-1&&(jt.onMouseOver=Nt,jt.onMouseOut=kt),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[typeof tt=="function"?tt(jt):reactExports.cloneElement(tt,jt),jsxRuntimeExports.jsx(Overlay$1,{...ct,show:mt,onHide:bt,flip:lt,placement:at,popperConfig:nt,target:ut.current,children:_e})]})}const Row=reactExports.forwardRef(({bsPrefix:et,className:_e,as:tt="div",...nt},rt)=>{const it=useBootstrapPrefix(et,"row"),ot=useBootstrapBreakpoints(),st=useBootstrapMinBreakpoint(),at=`${it}-cols`,lt=[];return ot.forEach(ct=>{const ut=nt[ct];delete nt[ct];let dt;ut!=null&&typeof ut=="object"?{cols:dt}=ut:dt=ut;const ft=ct!==st?`-${ct}`:"";dt!=null&&lt.push(`${at}${ft}-${dt}`)}),jsxRuntimeExports.jsx(tt,{ref:rt,...nt,className:classNames$1(_e,it,...lt)})});Row.displayName="Row";const Row$1=Row,Table=reactExports.forwardRef(({bsPrefix:et,className:_e,striped:tt,bordered:nt,borderless:rt,hover:it,size:ot,variant:st,responsive:at,...lt},ct)=>{const ut=useBootstrapPrefix(et,"table"),dt=classNames$1(_e,ut,st&&`${ut}-${st}`,ot&&`${ut}-${ot}`,tt&&`${ut}-${typeof tt=="string"?`striped-${tt}`:"striped"}`,nt&&`${ut}-bordered`,rt&&`${ut}-borderless`,it&&`${ut}-hover`),ft=jsxRuntimeExports.jsx("table",{...lt,className:dt,ref:ct});if(at){let pt=`${ut}-responsive`;return typeof at=="string"&&(pt=`${pt}-${at}`),jsxRuntimeExports.jsx("div",{className:pt,children:ft})}return ft}),Table$1=Table,noop$4=()=>{},ToggleButton=reactExports.forwardRef(({bsPrefix:et,name:_e,className:tt,checked:nt,type:rt,onChange:it,value:ot,disabled:st,id:at,inputRef:lt,...ct},ut)=>(et=useBootstrapPrefix(et,"btn-check"),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{className:et,name:_e,type:rt,value:ot,ref:lt,autoComplete:"off",checked:!!nt,disabled:!!st,onChange:it||noop$4,id:at}),jsxRuntimeExports.jsx(Button$1,{...ct,ref:ut,className:classNames$1(tt,st&&"disabled"),type:void 0,role:void 0,as:"label",htmlFor:at})]})));ToggleButton.displayName="ToggleButton";const ToggleButton$1=ToggleButton,ToggleButtonGroup=reactExports.forwardRef((et,_e)=>{const{children:tt,type:nt="radio",name:rt,value:it,onChange:ot,vertical:st=!1,...at}=useUncontrolled(et,{value:"onChange"}),lt=()=>it==null?[]:[].concat(it),ct=(ut,dt)=>{if(!ot)return;const ft=lt(),pt=ft.indexOf(ut)!==-1;if(nt==="radio"){pt||ot(ut,dt);return}ot(pt?ft.filter(mt=>mt!==ut):[...ft,ut],dt)};return nt!=="radio"||rt||invariant$3(!1),jsxRuntimeExports.jsx(ButtonGroup$1,{...at,ref:_e,vertical:st,children:map(tt,ut=>{const dt=lt(),{value:ft,onChange:pt}=ut.props,mt=xt=>ct(ft,xt);return reactExports.cloneElement(ut,{type:nt,name:ut.name||rt,checked:dt.indexOf(ft)!==-1,onChange:createChainedFunction(pt,mt)})})})}),ToggleButtonGroup$1=Object.assign(ToggleButtonGroup,{Button:ToggleButton$1});var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),__assign=function(){return __assign=Object.assign||function(et){for(var _e,tt=1,nt=arguments.length;tt<nt;tt++){_e=arguments[tt];for(var rt in _e)Object.prototype.hasOwnProperty.call(_e,rt)&&(et[rt]=_e[rt])}return et},__assign.apply(this,arguments)},__rest=function(et,_e){var tt={};for(var nt in et)Object.prototype.hasOwnProperty.call(et,nt)&&_e.indexOf(nt)<0&&(tt[nt]=et[nt]);if(et!=null&&typeof Object.getOwnPropertySymbols=="function")for(var rt=0,nt=Object.getOwnPropertySymbols(et);rt<nt.length;rt++)_e.indexOf(nt[rt])<0&&Object.prototype.propertyIsEnumerable.call(et,nt[rt])&&(tt[nt[rt]]=et[nt[rt]]);return tt};function Tree2Element(et){return et&&et.map(function(_e,tt){return React.createElement(_e.tag,__assign({key:tt},_e.attr),Tree2Element(_e.child))})}function GenIcon(et){return function(_e){return React.createElement(IconBase,__assign({attr:__assign({},et.attr)},_e),Tree2Element(et.child))}}function IconBase(et){var _e=function(tt){var nt=et.attr,rt=et.size,it=et.title,ot=__rest(et,["attr","size","title"]),st=rt||tt.size||"1em",at;return tt.className&&(at=tt.className),et.className&&(at=(at?at+" ":"")+et.className),React.createElement("svg",__assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},tt.attr,nt,ot,{className:at,style:__assign(__assign({color:et.color||tt.color},tt.style),et.style),height:st,width:st,xmlns:"http://www.w3.org/2000/svg"}),it&&React.createElement("title",null,it),et.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,function(tt){return _e(tt)}):_e(DefaultContext)}function MdDragIndicator(et){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}}]})(et)}function MdLogout(et){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"}}]})(et)}function Navigation(){const et=useNavigate(),_e="/equipment",tt=useActiveUser();return jsxRuntimeExports.jsx(Navbar$1,{id:"primary-nav-bar",bg:"primary",variant:"dark",expand:"lg",children:jsxRuntimeExports.jsxs(Container$1,{children:[jsxRuntimeExports.jsx(Navbar$1.Brand,{className:"mb-0 h1",onClick:()=>et(_e),children:"Pathfinder 1E Tools"}),jsxRuntimeExports.jsx(Navbar$1.Collapse,{id:"basic-navbar-nav",children:jsxRuntimeExports.jsx(Nav$1,{className:"me-auto",children:jsxRuntimeExports.jsx(Nav$1.Link,{onClick:()=>et(_e),children:"Equipment"})})}),tt&&jsxRuntimeExports.jsxs(Button$1,{className:"logout-button",variant:"link",style:{color:"white"},onClick:()=>{tt==null||tt.logout().then(()=>et("/login"))},children:[jsxRuntimeExports.jsx(MdLogout,{})," Logout"]})]})})}function EditorLayout(){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Navigation,{}),jsxRuntimeExports.jsx(Outlet,{})]})}function EditorLayoutRoute(){return jsxRuntimeExports.jsx(EditorLayout,{})}function useAsyncMemo(et,_e,tt){const[nt,rt]=reactExports.useState(tt),[it,ot]=reactExports.useState(!0),[st,at]=reactExports.useState();return reactExports.useEffect(()=>{let lt=!0;return et().then(ct=>{lt&&(rt(ct),at(void 0),ot(!1))}).catch(ct=>{console.error(ct),lt&&(at(ct),ot(!1))}),()=>{lt=!1}},_e),[nt,it,st]}const panel="_panel_6bp2u_1",clickable="_clickable_6bp2u_7",styles$N={panel,clickable};function Panel({className:et,children:_e,onClick:tt,...nt}){const rt=reactExports.useMemo(()=>{const it=[styles$N.panel];return tt&&it.push(styles$N.clickable),et&&it.push(et),it.join(" ")},[et]);return jsxRuntimeExports.jsx("div",{...nt,onClick:tt,className:rt,children:_e})}function TextInput({value:et,id:_e,onChange:tt,onEnter:nt,readonly:rt=!1,placeholder:it,autoFocus:ot=!1}){const[st,at]=reactExports.useState(et);reactExports.useEffect(()=>at(et),[et]);function lt(ct){ct.key==="Enter"&&(nt==null||nt(st))}return jsxRuntimeExports.jsx("input",{id:_e,type:"text",value:st,readOnly:rt,tabIndex:rt?-1:0,placeholder:it,autoFocus:ot,onFocus:ct=>ct.target.select(),onChange:ct=>!rt&&at(ct.target.value),onKeyUp:lt,onBlur:ct=>!rt&&(tt==null?void 0:tt(st))})}function NewCharacterDialog({show:et,onCreate:_e,onCancel:tt}){const[nt,rt]=reactExports.useState("");function it(ot){_e(ot)}return jsxRuntimeExports.jsxs(Modal$1,{show:et,onHide:tt,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,size:"lg",scrollable:!0,className:"pf-new-character-dialog",children:[jsxRuntimeExports.jsx(Modal$1.Header,{className:"title",closeButton:!0,closeVariant:"white",children:jsxRuntimeExports.jsx(Modal$1.Title,{children:"Create Character"})}),jsxRuntimeExports.jsx(Modal$1.Body,{children:jsxRuntimeExports.jsxs(Container$1,{children:[jsxRuntimeExports.jsx("label",{children:"Character Name"}),jsxRuntimeExports.jsx(TextInput,{value:nt,onChange:rt,onEnter:it,autoFocus:!0})]})}),jsxRuntimeExports.jsx(Modal$1.Footer,{children:jsxRuntimeExports.jsx(Button$1,{size:"lg",onClick:ot=>it(nt),children:"Create"})})]})}const controls$1="_controls_14ooi_1",character="_character_14ooi_5",nameContainer$1="_nameContainer_14ooi_11",deleteButtonContainer$1="_deleteButtonContainer_14ooi_17",styles$M={controls:controls$1,character,nameContainer:nameContainer$1,deleteButtonContainer:deleteButtonContainer$1},loading="_loading_1hi0d_1",styles$L={loading};function LoadingBlock(){return jsxRuntimeExports.jsxs("div",{className:styles$L.loading,children:[jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{})]})}var _excluded$8=["color","size","title"];function _extends$5(){return _extends$5=Object.assign||function(et){for(var _e=1;_e<arguments.length;_e++){var tt=arguments[_e];for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(et[nt]=tt[nt])}return et},_extends$5.apply(this,arguments)}function _objectWithoutProperties$5(et,_e){if(et==null)return{};var tt=_objectWithoutPropertiesLoose$5(et,_e),nt,rt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(et);for(rt=0;rt<it.length;rt++)nt=it[rt],!(_e.indexOf(nt)>=0)&&Object.prototype.propertyIsEnumerable.call(et,nt)&&(tt[nt]=et[nt])}return tt}function _objectWithoutPropertiesLoose$5(et,_e){if(et==null)return{};var tt={},nt=Object.keys(et),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_e.indexOf(rt)>=0)&&(tt[rt]=et[rt]);return tt}var CaretDownFill=reactExports.forwardRef(function(et,_e){var tt=et.color,nt=et.size,rt=et.title,it=_objectWithoutProperties$5(et,_excluded$8);return React.createElement("svg",_extends$5({ref:_e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:nt,height:nt,fill:tt},it),rt?React.createElement("title",null,rt):null,React.createElement("path",{d:"M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"}))});CaretDownFill.propTypes={color:PropTypes.string,size:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),title:PropTypes.string};CaretDownFill.defaultProps={color:"currentColor",size:"1em",title:null};const CaretDownFill$1=CaretDownFill;var _excluded$7=["color","size","title"];function _extends$4(){return _extends$4=Object.assign||function(et){for(var _e=1;_e<arguments.length;_e++){var tt=arguments[_e];for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(et[nt]=tt[nt])}return et},_extends$4.apply(this,arguments)}function _objectWithoutProperties$4(et,_e){if(et==null)return{};var tt=_objectWithoutPropertiesLoose$4(et,_e),nt,rt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(et);for(rt=0;rt<it.length;rt++)nt=it[rt],!(_e.indexOf(nt)>=0)&&Object.prototype.propertyIsEnumerable.call(et,nt)&&(tt[nt]=et[nt])}return tt}function _objectWithoutPropertiesLoose$4(et,_e){if(et==null)return{};var tt={},nt=Object.keys(et),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_e.indexOf(rt)>=0)&&(tt[rt]=et[rt]);return tt}var CaretRightFill=reactExports.forwardRef(function(et,_e){var tt=et.color,nt=et.size,rt=et.title,it=_objectWithoutProperties$4(et,_excluded$7);return React.createElement("svg",_extends$4({ref:_e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:nt,height:nt,fill:tt},it),rt?React.createElement("title",null,rt):null,React.createElement("path",{d:"m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"}))});CaretRightFill.propTypes={color:PropTypes.string,size:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),title:PropTypes.string};CaretRightFill.defaultProps={color:"currentColor",size:"1em",title:null};const CaretRightFill$1=CaretRightFill;var _excluded$6=["color","size","title"];function _extends$3(){return _extends$3=Object.assign||function(et){for(var _e=1;_e<arguments.length;_e++){var tt=arguments[_e];for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(et[nt]=tt[nt])}return et},_extends$3.apply(this,arguments)}function _objectWithoutProperties$3(et,_e){if(et==null)return{};var tt=_objectWithoutPropertiesLoose$3(et,_e),nt,rt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(et);for(rt=0;rt<it.length;rt++)nt=it[rt],!(_e.indexOf(nt)>=0)&&Object.prototype.propertyIsEnumerable.call(et,nt)&&(tt[nt]=et[nt])}return tt}function _objectWithoutPropertiesLoose$3(et,_e){if(et==null)return{};var tt={},nt=Object.keys(et),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_e.indexOf(rt)>=0)&&(tt[rt]=et[rt]);return tt}var Google=reactExports.forwardRef(function(et,_e){var tt=et.color,nt=et.size,rt=et.title,it=_objectWithoutProperties$3(et,_excluded$6);return React.createElement("svg",_extends$3({ref:_e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:nt,height:nt,fill:tt},it),rt?React.createElement("title",null,rt):null,React.createElement("path",{d:"M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z"}))});Google.propTypes={color:PropTypes.string,size:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),title:PropTypes.string};Google.defaultProps={color:"currentColor",size:"1em",title:null};const Google$1=Google;var _excluded$5=["color","size","title"];function _extends$2(){return _extends$2=Object.assign||function(et){for(var _e=1;_e<arguments.length;_e++){var tt=arguments[_e];for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(et[nt]=tt[nt])}return et},_extends$2.apply(this,arguments)}function _objectWithoutProperties$2(et,_e){if(et==null)return{};var tt=_objectWithoutPropertiesLoose$2(et,_e),nt,rt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(et);for(rt=0;rt<it.length;rt++)nt=it[rt],!(_e.indexOf(nt)>=0)&&Object.prototype.propertyIsEnumerable.call(et,nt)&&(tt[nt]=et[nt])}return tt}function _objectWithoutPropertiesLoose$2(et,_e){if(et==null)return{};var tt={},nt=Object.keys(et),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_e.indexOf(rt)>=0)&&(tt[rt]=et[rt]);return tt}var Lock=reactExports.forwardRef(function(et,_e){var tt=et.color,nt=et.size,rt=et.title,it=_objectWithoutProperties$2(et,_excluded$5);return React.createElement("svg",_extends$2({ref:_e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:nt,height:nt,fill:tt},it),rt?React.createElement("title",null,rt):null,React.createElement("path",{d:"M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2zM5 8h6a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1z"}))});Lock.propTypes={color:PropTypes.string,size:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),title:PropTypes.string};Lock.defaultProps={color:"currentColor",size:"1em",title:null};const Lock$1=Lock;var _excluded$4=["color","size","title"];function _extends$1(){return _extends$1=Object.assign||function(et){for(var _e=1;_e<arguments.length;_e++){var tt=arguments[_e];for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(et[nt]=tt[nt])}return et},_extends$1.apply(this,arguments)}function _objectWithoutProperties$1(et,_e){if(et==null)return{};var tt=_objectWithoutPropertiesLoose$1(et,_e),nt,rt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(et);for(rt=0;rt<it.length;rt++)nt=it[rt],!(_e.indexOf(nt)>=0)&&Object.prototype.propertyIsEnumerable.call(et,nt)&&(tt[nt]=et[nt])}return tt}function _objectWithoutPropertiesLoose$1(et,_e){if(et==null)return{};var tt={},nt=Object.keys(et),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_e.indexOf(rt)>=0)&&(tt[rt]=et[rt]);return tt}var PencilSquare=reactExports.forwardRef(function(et,_e){var tt=et.color,nt=et.size,rt=et.title,it=_objectWithoutProperties$1(et,_excluded$4);return React.createElement("svg",_extends$1({ref:_e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:nt,height:nt,fill:tt},it),rt?React.createElement("title",null,rt):null,React.createElement("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}),React.createElement("path",{fillRule:"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"}))});PencilSquare.propTypes={color:PropTypes.string,size:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),title:PropTypes.string};PencilSquare.defaultProps={color:"currentColor",size:"1em",title:null};const PencilSquare$1=PencilSquare;var _excluded$3=["color","size","title"];function _extends(){return _extends=Object.assign||function(et){for(var _e=1;_e<arguments.length;_e++){var tt=arguments[_e];for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(et[nt]=tt[nt])}return et},_extends.apply(this,arguments)}function _objectWithoutProperties(et,_e){if(et==null)return{};var tt=_objectWithoutPropertiesLoose(et,_e),nt,rt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(et);for(rt=0;rt<it.length;rt++)nt=it[rt],!(_e.indexOf(nt)>=0)&&Object.prototype.propertyIsEnumerable.call(et,nt)&&(tt[nt]=et[nt])}return tt}function _objectWithoutPropertiesLoose(et,_e){if(et==null)return{};var tt={},nt=Object.keys(et),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_e.indexOf(rt)>=0)&&(tt[rt]=et[rt]);return tt}var Trash=reactExports.forwardRef(function(et,_e){var tt=et.color,nt=et.size,rt=et.title,it=_objectWithoutProperties(et,_excluded$3);return React.createElement("svg",_extends({ref:_e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:nt,height:nt,fill:tt},it),rt?React.createElement("title",null,rt):null,React.createElement("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),React.createElement("path",{fillRule:"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"}))});Trash.propTypes={color:PropTypes.string,size:PropTypes.oneOfType([PropTypes.string,PropTypes.number]),title:PropTypes.string};Trash.defaultProps={color:"currentColor",size:"1em",title:null};const Trash$1=Trash,icon$1="_icon_bpuo8_1",styles$K={icon:icon$1};function DeleteIcon(){return jsxRuntimeExports.jsx(Trash$1,{className:styles$K.icon})}function classNames(et){return et.filter(_e=>_e!==void 0).join(" ")}const DatabaseContext=reactExports.createContext(void 0);function useDatabase(){const et=reactExports.useContext(DatabaseContext);if(et===void 0)throw new Error("Context must be used within a Provider");return et}const ItemDatabaseContext=reactExports.createContext(void 0);function useItemDatabase(){const et=reactExports.useContext(ItemDatabaseContext);if(et===void 0)throw new Error("Context must be used within a Provider");return et}const CharacterStoreContext=reactExports.createContext(void 0);function useCharacterStore(){const et=reactExports.useContext(CharacterStoreContext);if(et===void 0)throw new Error("Context must be used within a Provider");return et}const EquipmentSetStoreContext=reactExports.createContext(void 0);function useEquipmentSetStore(){const et=reactExports.useContext(EquipmentSetStoreContext);if(et===void 0)throw new Error("Context must be used within a Provider");return et}function CharacterList(){const et=useCharacterStore(),_e=useNavigate(),[tt,nt]=reactExports.useState([]),[rt,it]=useAsyncMemo(()=>et.list(),[et]);reactExports.useEffect(()=>{nt(rt)},[rt]);const ot=async at=>{const lt=await et.create({character_name:at});_e(`/character/edit/${lt.id}`)},st=async at=>{nt(tt.filter(lt=>lt.id!==at)),await et.delete(at)};return jsxRuntimeExports.jsxs("main",{children:[jsxRuntimeExports.jsx("header",{children:"Characters"}),jsxRuntimeExports.jsxs("section",{children:[it?jsxRuntimeExports.jsx(LoadingBlock,{}):jsxRuntimeExports.jsx("div",{className:styles$M.characters,children:tt==null?void 0:tt.map(at=>jsxRuntimeExports.jsx(CharacterListEntry,{character:at,onDelete:st},at.id))}),jsxRuntimeExports.jsx("div",{className:styles$M.controls,children:jsxRuntimeExports.jsx(AddCharacterButton$1,{disabled:it,onCreate:ot})})]})]})}function CharacterListEntry({character:et,onDelete:_e}){const tt=useNavigate();return jsxRuntimeExports.jsxs(Panel,{className:styles$M.character,children:[jsxRuntimeExports.jsx("div",{className:classNames([styles$M.nameContainer,"clickable"]),onClick:()=>{tt(`/character/edit/${et.id}`)},children:et.name}),jsxRuntimeExports.jsx("div",{className:classNames([styles$M.deleteButtonContainer,"clickable"]),onClick:()=>{_e(et.id)},children:jsxRuntimeExports.jsx(DeleteIcon,{})})]})}function AddCharacterButton$1({onCreate:et,disabled:_e=!1}){const[tt,nt]=reactExports.useState(!1);function rt(ot){nt(!1),et(ot)}function it(){nt(!1)}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button$1,{disabled:_e,onClick:ot=>nt(!0),size:"lg",children:"+ Character"}),tt&&jsxRuntimeExports.jsx(NewCharacterDialog,{show:tt,onCreate:rt,onCancel:it})]})}let e$2=class{constructor(_e){this.value=_e}asText(){return this.value}asNumber(){return parseFloat(this.value)}asBoolean(){return!["false","no","0",""].includes(this.value.toLowerCase())}equals(_e){return _e.hasValue()&&this.value===_e.asText()}toString(){return this.asText()}map(_e){return _e(this)}hasValue(){return!0}},t$1=class{constructor(_e){this.value=_e}asText(){return this.value.toString()}asNumber(){return this.value}asBoolean(){return this.value>0}equals(_e){return _e.hasValue()&&this.value===_e.asNumber()}toString(){return this.asText()}map(_e){return _e(this)}hasValue(){return!0}};class s{constructor(_e){this.value=_e}asBoolean(){return this.value}asNumber(){return this.value?1:0}asText(){return this.value?"true":"false"}map(_e){return _e(this)}hasValue(){return!0}equals(_e){return _e.hasValue()&&this.value===_e.asBoolean()}toString(){return this.asText()}}let r$2=class{asBoolean(){return!1}asNumber(){return 0}asText(){return""}map(_e){return this}hasValue(){return!1}equals(_e){return!_e.hasValue()}toString(){return this.asText()}};r$2.Instance=new r$2;let n$2=class Gn{static of(_e){return _e===void 0?r$2.Instance:typeof _e=="string"?new e$2(_e):typeof _e=="number"?new t$1(_e):typeof _e=="boolean"?_e?Gn.True:Gn.False:void 0}};n$2.True=new s(!0),n$2.False=new s(!1),n$2.None=r$2.Instance;class a extends n$2{constructor(_e,tt){super(),this.id=_e,this.value=tt}asBoolean(){return this.value.asBoolean()}asNumber(){return this.value.asNumber()}asText(){return this.value.asText()}hasValue(){return this.value.hasValue()}equals(_e){return this.value.equals(_e)}}class o{static just(_e){return _e instanceof n$2?new o.StaticResolvable(_e):new o.StaticResolvable(n$2.of(_e))}map(_e){return new o.MappedResolvable(this,_e)}}o.StaticResolvable=class extends o{constructor(et){super(),this.resolved=et}resolve(et){return this.resolved}asFormula(){return this.resolved.asText()}},o.MappedResolvable=class extends o{constructor(et,_e){super(),this.resolvable=et,this.mapFn=_e}resolve(et){return this.mapFn(this.resolvable.resolve(et))}asFormula(){return this.resolvable.asFormula()}},o.True=new o.StaticResolvable(n$2.True),o.False=new o.StaticResolvable(n$2.False),o.None=new o.StaticResolvable(n$2.None);class i{constructor(_e,tt){this.value=_e,this.name=tt}asBoolean(){return this.value.asBoolean()}asNumber(){return this.value.asNumber()}asText(){return this.value.asText()}asName(){return this.name}map(_e){return _e(this)}equals(_e){return this.value.equals(_e)}hasValue(){return this.value.hasValue()}}let u$1=class{constructor(_e,tt,nt){this.value=_e,this.prefix=tt,this.suffix=nt}asBoolean(){return this.value.asBoolean()}asNumber(){return this.value.asNumber()}asText(){return this.value.asText()}asQuotedText(){return this.prefix+this.asText()+this.suffix}map(_e){return _e(this)}equals(_e){return this.value.equals(_e)}hasValue(){return this.value.hasValue()}},h$2=class{static of(_e){return new p$3(_e)}};h$2.Empty=new class{get(et){}resolve(et){}keys(){return[]}search(et){return[]}};let l$2=class{resolve(_e){var tt;return(tt=this.get(_e))===null||tt===void 0?void 0:tt.resolve(this)}search(_e){return f$2.find(this,_e)}},f$2=class{static find(_e,tt){const nt=new RegExp(this.escapeRegExp(tt).replace(/\\\*/g,".*?"));return _e.keys().filter(rt=>nt.test(rt)).map(rt=>{const it=_e.resolve(rt);if(it!==void 0)return new a(rt,it)}).filter(rt=>rt!==void 0).map(rt=>rt)}static escapeRegExp(_e){return _e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}},p$3=class extends l$2{constructor(_e){super(),this.state=_e}get(_e){const tt=this.state[_e];return tt instanceof o?tt:o.just(tt)}resolve(_e){const tt=this.state[_e];return tt instanceof o?tt.resolve(this):n$2.of(tt)}set(_e,tt){this.state[_e]=tt}remove(_e){delete this.state[_e]}keys(){return Object.keys(this.state)}rename(_e,tt){_e in this.state&&(this.state[tt]=this.state[_e],delete this.state[_e])}},m$2=class extends Error{constructor(_e){super(_e)}};const v$2=["1","2","3","4","5","6","7","8","9","0"],w$2=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],x$2=[...w$2,...v$2,"_"];let b$2=class extends Error{constructor(_e,tt,nt){super(_e),this.text=tt,this.index=nt}},g$2=class Jn{constructor(){this.root=new E$1}ignoreWhitespaces(){return this.add(" ",_e=>{})}add(_e,tt){return typeof _e!="string"?(nt=_e,_e=Array.isArray(nt)?nt:[nt],this.addBranch(_e,tt)):this.addBranch([A$2(_e)],tt);var nt}addBranch(_e,tt){return k$2.of(_e).chainTo(this.root,tt),this}parse(_e){const tt=[];for(let nt=0;nt<_e.length;nt++){const rt=this.root.walk(_e,nt);if(!(rt.length>0))throw new b$2(Jn.generateParseErrorMessage(nt,_e,`did not expect character: '${_e[nt]}'`),_e,nt);{const it=rt[0],ot=it.get();ot!==void 0&&tt.push(ot),nt=it.endIndex-1}}return tt}static generateParseErrorMessage(_e,tt,nt){let rt=`Parse error at index ${_e} of "${tt}": ${nt}`;return rt+=`
${tt}
${" ".repeat(_e)}^`,rt}};class N{constructor(_e,tt,nt,rt){this.text=_e,this.startIndex=tt,this.endIndex=nt,this.mapper=rt}get(){return this.mapper(this.text.substring(this.startIndex,this.endIndex))}}class ${static match(_e){return new L(_e)}}class L extends ${constructor(_e){super(),this.matcher=_e}node(){return new B$1(this.matcher)}repeats(_e=0,tt=void 0){return new q$2(this.matcher,_e,tt)}optional(){return this.repeats(0,1)}not(){return new L(new j(this.matcher))}}let q$2=class extends ${constructor(_e,tt,nt){super(),this.matcher=_e,this.minLength=tt,this.maxLength=nt}node(){return new S(this.matcher,this.minLength,this.maxLength)}},F$1=class extends ${constructor(_e,tt){super(),this.closeSequence=_e,this.escapeSequence=tt}node(){return new R(this.closeSequence,this.escapeSequence)}},k$2=class Qn{static of(_e){return new Qn(_e)}constructor(_e){this.expressions=_e}chainTo(_e,tt,nt=!0){let rt=_e;for(let it of this.expressions)rt=it instanceof $?rt.add(it.node()):it.chainTo(rt,tt,!1);if(nt){let it=rt;if(it.mapper!==void 0)throw new Error("Conflicting tokens");it.mapper=tt}return rt}};class T{static of(_e){return new T(_e)}constructor(_e){this.expressions=_e}chainTo(_e,tt,nt=!0){let rt=_e;rt.mapper=tt;for(let it of this.expressions)rt=it instanceof y$2?rt.add(it):it.chainTo(rt,tt,!1);if(nt){let it=rt;if(it.mapper!==void 0)throw new Error("Conflicting tokens");it.mapper=tt}return rt}}let y$2=class Xn{constructor(){this.id=Xn.idCounter++,this.children=void 0}add(_e){this.children===void 0&&(this.children=[]);for(let tt of this.children)if(tt.equals(_e))return tt;return this.children.push(_e),_e}walkChildren(_e,tt,nt){return this.children===void 0?[]:this.children.flatMap(rt=>rt.walk(_e,tt,nt))}};y$2.idCounter=1;let E$1=class extends y$2{walk(_e,tt=0,nt=tt){return this.walkChildren(_e,tt,nt)}equals(_e){return!1}},B$1=class Zn extends y$2{constructor(_e){super(),this.matcher=_e,this.mapper=void 0}walk(_e,tt,nt){if(!this.matches(_e,tt,nt))return[];const rt=this.walkChildren(_e,tt,nt+1);return rt.length>0?rt:this.mapper!==void 0?[new N(_e,tt,nt+1,this.mapper)]:[]}matches(_e,tt,nt){const rt=_e[nt];return rt!==void 0&&this.matcher.matches(rt)}equals(_e){return _e instanceof Zn&&this.matcher.equals(_e.matcher)}};class S extends y$2{constructor(_e,tt,nt){super(),this.matcher=_e,this.minLength=tt,this.maxLength=nt,this.mapper=void 0}walk(_e,tt,nt){const rt=this.minLength,it=this.calculateMaxLength(_e,nt);let ot=0;for(let at=_e[nt];at!==void 0&&this.matcher.matches(at)&&ot<it;at=_e[nt])nt++,ot++;if(ot<rt)return[];const st=this.walkChildren(_e,tt,nt);return ot>it||st.length>0?st:this.mapper!==void 0?[new N(_e,tt,nt,this.mapper)]:[]}equals(_e){return _e instanceof S&&this.matcher.equals(_e.matcher)&&this.minLength===_e.minLength&&this.maxLength===_e.maxLength}calculateMaxLength(_e,tt){const nt=_e.length-tt;return this.maxLength!==void 0?Math.min(this.maxLength,nt):nt}}class R extends y$2{constructor(_e,tt){super(),this.closeSequence=_e,this.escapeSequence=tt,this.mapper=void 0}walk(_e,tt,nt){for(;nt<_e.length;nt++)for(let rt=0;rt<this.closeSequence.length&&_e[nt+rt]===this.closeSequence[rt]&&!this.isEscaped(_e,nt);rt++)if(rt===this.closeSequence.length-1){const it=this.walkChildren(_e,tt,nt);return it.length>0?it:this.mapper!==void 0&&nt>tt?[new N(_e,tt,nt,this.mapper)]:[]}return this.mapper!==void 0&&nt===_e.length?[new N(_e,tt,nt,this.mapper)]:[]}isEscaped(_e,tt){if(this.escapeSequence===void 0)return!1;for(let nt=tt-this.escapeSequence.length+1,rt=0;rt<this.escapeSequence.length;nt++,rt++)if(nt<0&&nt>=tt||_e[nt]!==this.escapeSequence[rt])return!1;return!0}equals(_e){return _e instanceof R&&this.closeSequence===_e.closeSequence}}class M{constructor(_e){this.character=_e}matches(_e){return this.character===_e}equals(_e){return _e instanceof M&&this.character===_e.character}}class V{constructor(_e){this.allowed=_e}matches(_e){return this.allowed.includes(_e)}equals(_e){return _e instanceof V&&function(tt,nt){if(tt.length!==nt.length)return!1;for(let rt=0;rt<tt.length;rt++)if(tt[rt]!==nt[rt])return!1;return!0}(this.allowed,_e.allowed)}}let I$1=class{matches(_e){return _e!==void 0}equals(_e){return _e instanceof V}};class j{constructor(_e){this.matcher=_e}matches(_e){return!this.matcher.matches(_e)}equals(_e){return _e instanceof j&&this.matcher.equals(_e.matcher)}}function C$1(et){return Array.isArray(et)&&et.length===1&&(et=et[0]),$.match(Array.isArray(et)?new V(et):new M(et))}function A$2(et){return k$2.of(Array.from(et).map(_e=>C$1(_e)))}function O(...et){return k$2.of(et.map(_e=>typeof _e=="string"?A$2(_e):_e))}function P(...et){return T.of([O(...et)])}function U(et,_e,tt=void 0){return O(A$2(et),function(nt,rt=void 0){return O(new F$1(nt,rt))}(_e,tt),A$2(_e))}new class extends ${constructor(){super(),this.matcher=new I$1}node(){return new B$1(this.matcher)}except(...et){return new L(new j(new V(et)))}repeats(et=0,_e=void 0){return new q$2(this.matcher,et,_e)}optional(){return this.repeats(0,1)}not(){return new L(new j(this.matcher))}};const z$2=O(C$1(v$2).repeats(1));O(C$1(x$2).repeats(1));const D$1=O(C$1([...x$2,":",".","#","*"]).repeats(1)),Q=O(z$2),W=O(Q,".",z$2);O(Q,P(".",z$2));const G$1=C$1(w$2);function H$1(et,_e){switch(et){case 0:return()=>n$2.of(_e());case 1:return tt=>{var nt;return n$2.of(_e((nt=tt==null?void 0:tt.asNumber())!==null&&nt!==void 0?nt:0))};case 2:return(tt,nt)=>{var rt,it;return n$2.of(_e((rt=tt==null?void 0:tt.asNumber())!==null&&rt!==void 0?rt:0,(it=nt==null?void 0:nt.asNumber())!==null&&it!==void 0?it:0))};case 3:return(tt,nt,rt)=>{var it,ot,st;return n$2.of(_e((it=tt==null?void 0:tt.asNumber())!==null&&it!==void 0?it:0,(ot=nt==null?void 0:nt.asNumber())!==null&&ot!==void 0?ot:0,(st=rt==null?void 0:rt.asNumber())!==null&&st!==void 0?st:0))};default:throw new Error(`Unsupported number of operands: ${et}`)}}var J;(function(et){et[et.Left=1]="Left",et[et.Right=2]="Right"})(J||(J={}));class K{constructor(_e,tt,nt){this.name=_e,this.operands=tt,this.fn=nt}execute(_e,tt,nt){switch(this.operands){case 0:return this.fn();case 1:return this.fn(_e);case 2:return this.fn(_e,tt);case 3:return this.fn(_e,tt,nt);default:throw new Error(`Unsupported number of operands: ${this.operands}`)}}}class X extends K{constructor(_e,tt,nt){super(_e,tt,nt)}}class Y{constructor(_e,tt){this.name=_e,this.fn=tt}execute(_e){return this.fn(_e)}}class Z extends K{constructor(_e,tt,nt,rt,it){super(_e,rt,it),this.name=_e,this.precedence=tt,this.associativity=nt}}class _{constructor(_e,tt){this.unary=_e,this.binary=tt}}class ee{constructor(_e,tt){this.key=_e,this.resolver=tt}resolve(_e){var tt;return(tt=this.resolver(_e,this.key))!==null&&tt!==void 0?tt:n$2.None}toString(){return this.key}}class te{constructor(_e,tt){this.text=_e,this.decorator=tt}apply(_e){return this.decorator(this.text,_e)}}class se{constructor(_e,tt=void 0,nt=void 0){this.resolver=_e,this.prefix=tt,this.suffix=nt}resolve(_e){return this.prefix&&this.suffix?this.resolver(_e).map(tt=>new u$1(tt,this.prefix,this.suffix)):this.resolver(_e)}}class re{constructor(){this.bracketFn=_e=>_e,this.parser=new g$2().ignoreWhitespaces().add([Q],_e=>parseInt(_e)).add([W],_e=>parseFloat(_e)).add("(",_e=>_e).add(")",_e=>_e).add(",",_e=>_e).add(U('"','"','\\"'),_e=>new se(()=>n$2.of(_e.slice(1,-1)),'"','"')).add(U("'","'","\\'"),_e=>new se(()=>n$2.of(_e.slice(1,-1)),"'","'"))}operator(_e,tt,nt,rt,it){return this.parser.add(_e,ot=>new Z(_e,tt,nt,rt,it)),this}biOperator(_e,tt,nt,rt,it,ot,st){return this.parser.add(_e,at=>new _(new Z(_e,tt,nt,1,rt),new Z(_e,it,ot,2,st))),this}intOperator(_e,tt,nt,rt,it){return this.operator(_e,tt,nt,rt,H$1(rt,it))}function(_e,tt,nt){return this.parser.add(_e,rt=>new X(_e,tt,nt)),this}varargsFunction(_e,tt){return this.parser.add(_e,nt=>new Y(_e,tt)),this}intFunction(_e,tt,nt){return this.function(_e,tt,H$1(tt,nt))}variable(_e,tt,nt){return this.parser.add([A$2(_e),G$1,P(D$1),A$2(tt)],rt=>new ee(rt,(it,ot)=>nt(it,ot.substring(_e.length,ot.length-tt.length)))),this}comment(_e,tt,nt=(rt,it)=>it){return this.parser.add(U(_e,tt),rt=>new te(rt.substring(_e.length,rt.length-tt.length),nt)),this}term(_e,tt){return this.parser.add([A$2(_e)],nt=>new ee(nt,rt=>tt(rt))),this}brackets(_e){return this.bracketFn=_e,this}parse(_e){let tt=[],nt=[],rt=[];const it=this.parser.parse(_e);for(let ot=0;ot<it.length;ot++){let st=it[ot],at=ot>0?it[ot-1]:void 0;if(st instanceof _){let lt=st;st=lt.binary,(!at||at instanceof Z||at==="("||at===",")&&(st=lt.unary)}if(st instanceof Z){let lt=st,ct=nt.at(-1);ct instanceof Z&&(lt.precedence<ct.precedence||lt.associativity===J.Left&&lt.precedence===ct.precedence)&&(nt.pop(),tt.push(ct)),nt.push(lt)}else if(st instanceof X)nt.push(st),rt.push(1);else if(st instanceof Y)nt.push(st),rt.push(1);else if(st instanceof ee)tt.push(st);else if(st instanceof se)tt.push(st);else if(st instanceof te)tt.push(st);else switch(st){case" ":case"{":case"}":break;case",":for(rt[rt.length-1]++;nt.length>0;){let lt=nt.pop();if(lt==="("){nt.push(lt);break}tt.push(lt)}break;case"(":nt.push(st);break;case")":for(;nt.length>0;){let lt=nt.pop();if(lt==="(")break;tt.push(lt)}if(nt.at(-1)instanceof X){const lt=rt.pop(),ct=nt.pop();if(lt!==ct.operands)throw new Error(`${ct.name} expected ${ct.operands} parameters, but got ${lt}`);tt.push(ct)}else nt.at(-1)instanceof Y&&(tt.push(rt.pop()),tt.push(nt.pop()));break;default:tt.push(n$2.of(st))}}for(;nt.length>0;)tt.push(nt.pop());return new ne(tt,_e)}}class ne extends o{static parser(){return new re}constructor(_e,tt){super(),this.stack=_e,this.originalFormula=tt}asFormula(){return this.originalFormula}resolve(_e=h$2.Empty){let tt=[],nt=[...this.stack];for(;nt.length>0;){let rt=nt.shift();if(rt instanceof K){let it=rt;if(it.operands===0)tt.push(it.execute());else if(it.operands===1){let ot=tt.pop();if(ot===void 0)throw new m$2(`Error executing function "${it.name}" in "${this.asFormula()}" because parameter was undefined`);tt.push(it.execute(ot))}else if(it.operands===2){let ot=tt.pop(),st=tt.pop();if(st===void 0)throw new m$2(`Error executing function "${it.name}" in "${this.asFormula()}" because first parameter was undefined`);if(ot===void 0)throw new m$2(`Error executing function "${it.name}" in "${this.asFormula()}" because second parameter was undefined`);tt.push(it.execute(st,ot))}else{if(it.operands!==3)throw new Error("Unsupported number of operands: "+it.operands);{let ot=tt.pop(),st=tt.pop(),at=tt.pop();if(at===void 0)throw new m$2(`Error executing function "${it.name}" in "${this.asFormula()}" because first parameter was undefined`);if(st===void 0)throw new m$2(`Error executing function "${it.name}" in "${this.asFormula()}" because second parameter was undefined`);if(ot===void 0)throw new m$2(`Error executing function "${it.name}" in "${this.asFormula()}" because third parameter was undefined`);tt.push(it.execute(at,st,ot))}}}else if(rt instanceof Y){let it=rt,ot=[],st=tt.pop();for(;st-- >0;)ot.push(tt.pop());tt.push(it.execute(ot))}else if(rt instanceof te){const it=tt.pop();tt.push(rt.apply(it))}else if(rt instanceof se&&(rt=rt.resolve(_e)),rt instanceof ee&&(rt=rt.resolve(_e),rt instanceof ne)){const it=rt.stack;for(let ot=it.length-1;ot>=0;ot--)nt.unshift(it[ot])}else{for(;rt instanceof o;)rt=rt.resolve(_e);tt.push(rt)}}return tt.pop()}}function ae(et){return(..._e)=>n$2.of(et(..._e.map(ie)))}function oe(et){return(..._e)=>n$2.of(`${et}(${_e.map(ie).join(",")})`)}function ie(et){return et instanceof u$1?et.asQuotedText():et.asText()}class ue extends n$2{asNumber(){throw ue.UnsupportedException}asBoolean(){throw ue.UnsupportedException}}ue.UnsupportedException=new Error("Not available for optimization");class ce extends ue{constructor(_e){super(),this.values=[],_e.forEach(tt=>{tt instanceof ce?this.values.unshift(...tt.values):this.values.unshift(tt)})}asText(){return this.values.length===1?ie(this.values[0]):`any(${this.values.map(ie).join(",")})`}}class he extends ue{constructor(_e){super(),this.values=[],_e.forEach(tt=>{tt instanceof he?this.values.unshift(...tt.values):this.values.unshift(tt)})}asText(){return this.values.length===1?ie(this.values[0]):`all(${this.values.map(ie).join(",")})`}}class le extends ue{static create(_e){return(tt,nt)=>new le(_e,tt,nt)}constructor(_e,tt,nt){super(),this.operator=_e,this.a=tt,this.b=nt}asText(){return`(${this.asTextNoBrackets()})`}asTextNoBrackets(){return this.format(this.a)+this.operator+this.format(this.b)}format(_e){if(_e instanceof le)switch(this.operator){case"+":case"-":switch(_e.operator){case"+":case"-":return _e.asTextNoBrackets();default:return ie(_e)}case"*":case"/":switch(_e.operator){case"*":case"/":return _e.asTextNoBrackets();default:return ie(_e)}default:return ie(_e)}return ie(_e)}}class fe{static optimize(_e){const tt=this.Parser.parse(_e).resolve();return tt instanceof le?tt.asTextNoBrackets():ie(tt)}}fe.Parser=ne.parser().operator("^",4,J.Right,2,le.create("^")).operator("*",3,J.Left,2,le.create("*")).operator("/",3,J.Left,2,le.create("/")).operator("+",2,J.Left,2,le.create("+")).operator("-",2,J.Left,2,le.create("-")).operator("!",2,J.Left,1,ae(et=>`!${et}`)).operator("<",3,J.Left,2,ae((et,_e)=>`${et}<${_e}`)).operator("<=",3,J.Left,2,ae((et,_e)=>`${et}<=${_e}`)).operator(">",3,J.Left,2,ae((et,_e)=>`${et}>${_e}`)).operator(">=",3,J.Left,2,ae((et,_e)=>`${et}>=${_e}`)).operator("==",3,J.Left,2,ae((et,_e)=>`${et}==${_e}`)).operator("!=",3,J.Left,2,ae((et,_e)=>`${et}!=${_e}`)).operator("AND",1,J.Left,2,(et,_e)=>new he([_e,et])).operator("OR",1,J.Left,2,(et,_e)=>new ce([_e,et])).term("true",()=>n$2.of("true")).term("false",()=>n$2.of("false")).term("null",()=>n$2.of("null")).function("abs",1,oe("abs")).function("min",2,oe("min")).function("max",2,oe("max")).function("floor",1,oe("floor")).function("ceil",1,oe("ceil")).function("signed",1,oe("signed")).function("if",3,oe("if")).function("concat",2,oe("concat")).function("ordinal",1,oe("ordinal")).varargsFunction("any",et=>new ce(et)).varargsFunction("all",et=>new he(et)).variable("@","",(et,_e)=>n$2.of(`@${_e}`)).variable("@{","}",(et,_e)=>n$2.of(`@{${_e}}`)).variable("min(@",")",(et,_e)=>n$2.of(`min(@${_e})`)).variable("max(@",")",(et,_e)=>n$2.of(`max(@${_e})`)).variable("sum(@",")",(et,_e)=>n$2.of(`sum(@${_e})`)).comment("[","]",(et,_e)=>new u$1(_e,"",`[${et}]`));class pe{static parse(_e){return _e instanceof o?_e:this.Parser.parse(_e)}static optimize(_e){return fe.optimize(_e)}static noneIfEmpty(_e){return _e.length>0?_e:[]}static variableFn(_e,tt){return _e.get(tt)}static minFn(_e,tt){return pe.noneIfEmpty(_e.search(tt)).reduce((nt,rt)=>nt.asNumber()<rt.asNumber()?nt:rt)}static maxFn(_e,tt){return pe.noneIfEmpty(_e.search(tt)).reduce((nt,rt)=>nt.asNumber()>rt.asNumber()?nt:rt,n$2.None)}static sumFn(_e,tt){return _e.search(tt).reduce((nt,rt)=>pe.addFn(nt,rt),n$2.None)}static addFn(_e,tt){return(_e??n$2.None).equals(n$2.None)&&(tt??n$2.None).equals(n$2.None)?n$2.None:n$2.of(_e.asNumber()+tt.asNumber())}}pe.Parser=ne.parser().biOperator("-",4,J.Left,et=>n$2.of(-et.asNumber()),2,J.Left,(et,_e)=>n$2.of(et.asNumber()-_e.asNumber())).operator("^",4,J.Right,2,(et,_e)=>n$2.of(Math.pow(et.asNumber(),_e.asNumber()))).operator("*",3,J.Left,2,(et,_e)=>n$2.of(et.asNumber()*_e.asNumber())).operator("/",3,J.Left,2,(et,_e)=>n$2.of(et.asNumber()/_e.asNumber())).operator("+",2,J.Left,2,pe.addFn).operator("!",2,J.Left,1,et=>n$2.of(!et.asBoolean())).operator("<",3,J.Left,2,(et,_e)=>n$2.of(et.asNumber()<_e.asNumber())).operator("<=",3,J.Left,2,(et,_e)=>n$2.of(et.asNumber()<=_e.asNumber())).operator(">",3,J.Left,2,(et,_e)=>n$2.of(et.asNumber()>_e.asNumber())).operator(">=",3,J.Left,2,(et,_e)=>n$2.of(et.asNumber()>=_e.asNumber())).operator("==",3,J.Left,2,(et,_e)=>n$2.of(et.equals(_e))).operator("!=",3,J.Left,2,(et,_e)=>n$2.of(!et.equals(_e))).operator("AND",1,J.Left,2,(et,_e)=>n$2.of(et.asBoolean()&&_e.asBoolean())).operator("OR",1,J.Left,2,(et,_e)=>n$2.of(et.asBoolean()||_e.asBoolean())).term("true",()=>n$2.of(!0)).term("false",()=>n$2.of(!1)).term("null",()=>n$2.None).function("abs",1,et=>n$2.of(Math.abs(et.asNumber()))).function("min",2,(et,_e)=>n$2.of(Math.min(et.asNumber(),_e.asNumber()))).function("max",2,(et,_e)=>n$2.of(Math.max(et.asNumber(),_e.asNumber()))).function("floor",1,et=>n$2.of(Math.floor(et.asNumber()))).function("ceil",1,et=>n$2.of(Math.ceil(et.asNumber()))).function("signed",1,et=>n$2.of((et.asNumber()<0?"":"+")+et.asNumber())).function("if",3,(et,_e,tt)=>et.asBoolean()?_e:tt).function("concat",2,(et,_e)=>n$2.of(et.asText()+_e.asText())).function("ordinal",1,et=>n$2.of(function(_e){let tt=["th","st","nd","rd"],nt=_e%100;return _e+(tt[(nt-20)%10]||tt[nt]||tt[0])}(et.asNumber()))).varargsFunction("any",et=>n$2.of(et.some(_e=>_e.asBoolean()))).varargsFunction("all",et=>n$2.of(et.every(_e=>_e.asBoolean()))).variable("@","",pe.variableFn).variable("@{","}",pe.variableFn).variable("min(@",")",pe.minFn).variable("max(@",")",pe.maxFn).variable("sum(@",")",pe.sumFn).comment("[","]",(et,_e)=>new i(_e,et));const Mn=class Mn extends o{constructor(_e,tt){super(),this.original=_e,this.parts=tt}static parse(_e){if(_e instanceof Mn)return _e;const tt=[],nt=new RegExp(this.InlineRegex,"g");let rt,it=0;for(;(rt=nt.exec(_e))!==null;){let st=_e.substring(it,rt.index);st.length>0&&tt.push(st.replaceAll("\\{","{").replaceAll("\\}","}")),tt.push(pe.parse(rt[1])),it=rt.index+rt[0].length}const ot=_e.substring(it).replaceAll("\\{","{").replaceAll("\\}","}");return ot.length>0&&tt.push(ot),new Mn(_e,tt)}resolve(_e){return n$2.of(this.parts.map(tt=>{var nt;return tt instanceof o?(nt=tt.resolve(_e))==null?void 0:nt.asText():tt}).join(""))}asFormula(){return this.original}};ln(Mn,"InlineRegex",new RegExp("(?<!\\\\)\\{(.*?)}"));let Expression=Mn;class CharacterAtLevel extends l$2{constructor(_e,tt,nt=[],rt={},it=[]){super(),this.level=_e,this.character=tt,this.features=nt,this.state=rt,this.choices=it}selected(_e,tt){typeof _e!="string"&&(_e=_e.path);const nt=this.character.selected(_e)??"";return tt===void 0?nt:array(nt)[tt]}hasSelection(_e){return this.selected(_e)!==""}choice(_e){return this.choices.find(tt=>tt.path===_e)}choicesOfType(_e){return this.choices.filter(tt=>tt.type===_e)}modify(_e){const tt={...this.state};return _e(tt),new CharacterAtLevel(this.level,this.character,this.features,tt,this.choices)}get(_e){if(_e.includes("{"))return Expression.parse(_e);let tt=this.state[_e];return tt===void 0?o.None:typeof tt=="string"&&tt.includes("{")?Expression.parse(tt):tt instanceof o?tt:o.just(tt)}has(_e){return _e in this.state}keys(){return Object.keys(this.state)}diff(_e){var ot,st;const tt={...this.state};for(const at of _e.keys()){const lt=((ot=this.resolve(at))==null?void 0:ot.asNumber())??0,ct=((st=_e.resolve(at))==null?void 0:st.asNumber())??0;lt-ct>0||delete tt[at]}const nt=this.features.filter(at=>tt[at.key]!==void 0),rt=new Set(_e.choices.map(at=>at.path)),it=this.choices.filter(at=>!rt.has(at.path));return new CharacterAtLevel(this.level,this.character,nt,tt,it)}without(_e){const tt={...this.state},nt=h$2.of(tt),rt=nt.resolve(_e),it=(rt==null?void 0:rt.asNumber())??0;return it===0||it===1?nt.remove(_e):nt.set(_e,it-1),new CharacterAtLevel(this.level,this.character,this.features,tt,this.choices)}withoutChoice(_e){return this.character.atLevel(this.level,_e)}}class Path{static of(_e){return _e.toString().replace("#","_")}static combine(..._e){return _e.map(tt=>tt.toString()).reduce(Path.combineTwo)}static combineTwo(_e,tt){return _e=Path.of(_e),tt=Path.of(tt),_e===""?tt.toString():tt==""?_e.toString():_e+":"+tt}constructor(){}}const Fn=class Fn{constructor(_e=[]){this.entries=_e}add(_e,tt){return this.entries.push(new PrerequisiteValidationEntry(_e,tt)),this}isValid(){return this.entries.length==0?!0:this.entries.map(_e=>_e.valid).reduce((_e,tt)=>_e&&tt)}isEmpty(){return this.entries.length===0}};ln(Fn,"Empty",new Fn([]));let PrerequisiteValidation=Fn;class PrerequisiteValidationEntry{constructor(_e,tt){this.description=_e,this.valid=tt}}var TreeNodeOperator=(et=>(et[et.ALL=0]="ALL",et[et.ANY=1]="ANY",et))(TreeNodeOperator||{});class FormattedValue extends n$2{constructor(_e,tt){super(),this.actual=_e,this.formatted=tt}asBoolean(){return this.actual.asBoolean()}asNumber(){return this.actual.asNumber()}asText(){return this.actual.asText()}asFormatted(){return this.formatted}equals(_e){return!1}}class TreeNodeValue extends FormattedValue{constructor(_e,tt,nt){const rt=nt.map(at=>at instanceof FormattedValue?at.asFormatted():at.asText()).reverse(),it=tt===0?"; and ":", or ",ot=tt===1?", ":"; ";let st=rt.length>1?rt.slice(0,-1).join(ot)+it:"";st=st+rt[rt.length-1],super(_e,st),this.operator=tt,this.children=nt}mapChildren(_e){return this.children.map(_e)}equals(_e){return!1}}function formatNumberOp(et,_e,tt,nt){const rt=et instanceof FormattedValue?et.asFormatted():et.asText(),it=_e instanceof FormattedValue?_e.asFormatted():_e.asText(),ot=tt(et.asNumber(),_e.asNumber()),st=nt(rt,it);return new FormattedValue(n$2.of(ot),st)}function formatBooleanOp(et,_e,tt,nt){const rt=et instanceof FormattedValue?et.asFormatted():et.asText(),it=_e instanceof FormattedValue?_e.asFormatted():(_e==null?void 0:_e.asText())??"",ot=tt(et.asBoolean(),(_e==null?void 0:_e.asBoolean())??!1),st=nt(rt,it);return new FormattedValue(n$2.of(ot),st)}function createTreeNode(et,..._e){let tt;switch(et){case 0:tt=_e.reduce((nt,rt)=>n$2.of(nt.asBoolean()&&rt.asBoolean()),n$2.of(!0));break;case 1:tt=_e.reduce((nt,rt)=>n$2.of(nt.asBoolean()||rt.asBoolean()),n$2.of(!1));break}return new TreeNodeValue(tt,et,_e)}class FormulaFormatter{constructor(_e){ln(this,"Parser");this.lookup=_e,this.Parser=ne.parser().operator("^",4,J.Right,2,(tt,nt)=>n$2.of(Math.pow(tt.asNumber(),nt.asNumber()))).operator("*",3,J.Left,2,(tt,nt)=>n$2.of(tt.asNumber()*nt.asNumber())).operator("/",3,J.Left,2,(tt,nt)=>n$2.of(tt.asNumber()/nt.asNumber())).operator("+",2,J.Left,2,(tt,nt)=>n$2.of(tt.asNumber()+nt.asNumber())).operator("-",2,J.Left,2,(tt,nt)=>n$2.of(((tt==null?void 0:tt.asNumber())??0)-nt.asNumber())).operator("!",2,J.Left,1,tt=>formatBooleanOp(tt,void 0,nt=>!nt,nt=>`Do not already have ${nt}`)).operator("<",3,J.Left,2,(tt,nt)=>formatNumberOp(tt,nt,(rt,it)=>rt>it,(rt,it)=>`${rt} less than ${it}`)).operator("<=",3,J.Left,2,(tt,nt)=>formatNumberOp(tt,nt,(rt,it)=>rt>=it,(rt,it)=>`${rt} is ${it} or less`)).operator(">",3,J.Left,2,(tt,nt)=>formatNumberOp(tt,nt,(rt,it)=>rt>it,(rt,it)=>`${rt} greater than ${it}`)).operator(">=",3,J.Left,2,(tt,nt)=>formatNumberOp(tt,nt,(rt,it)=>rt>=it,(rt,it)=>`${rt} ${it}`)).operator("==",3,J.Left,2,(tt,nt)=>formatNumberOp(tt,nt,(rt,it)=>rt===it,(rt,it)=>`${rt} is ${it}`)).operator("!=",3,J.Left,2,(tt,nt)=>formatNumberOp(tt,nt,(rt,it)=>rt!==it,(rt,it)=>`${rt} is not ${it}`)).operator("AND",1,J.Left,2,(tt,nt)=>createTreeNode(0,tt,nt)).operator("OR",1,J.Left,2,(tt,nt)=>createTreeNode(1,tt,nt)).term("true",()=>n$2.of(!0)).term("false",()=>n$2.of(!1)).function("abs",1,tt=>n$2.of(Math.abs(tt.asNumber()))).function("min",2,(tt,nt)=>n$2.of(Math.min(tt.asNumber(),nt.asNumber()))).function("max",2,(tt,nt)=>n$2.of(Math.max(tt.asNumber(),nt.asNumber()))).function("floor",1,tt=>n$2.of(Math.floor(tt.asNumber()))).function("ceil",1,tt=>n$2.of(Math.ceil(tt.asNumber()))).function("signed",1,tt=>n$2.of((tt.asNumber()<0?"":"+")+tt.asNumber())).function("if",3,(tt,nt,rt)=>tt.asBoolean()?nt:rt).function("concat",2,(tt,nt)=>n$2.of(tt.asText()+nt.asText())).varargsFunction("any",tt=>createTreeNode(1,...tt)).varargsFunction("all",tt=>createTreeNode(0,...tt)).variable("@","",(tt,nt)=>{const rt=tt.resolve(nt);return rt?new FormattedValue(rt,this.lookup(nt)):new FormattedValue(n$2.None,"???")}).variable("min(@",")",(tt,nt)=>{const rt=FormulaFormatter.noneIfEmpty(tt.search(nt)).reduce((it,ot)=>it.asNumber()<ot.asNumber()?it:ot);return new FormattedValue(rt,"")}).variable("max(@",")",(tt,nt)=>{const rt=FormulaFormatter.noneIfEmpty(tt.search(nt)).reduce((it,ot)=>it.asNumber()>ot.asNumber()?it:ot);return new FormattedValue(rt,"")}).variable("sum(@",")",(tt,nt)=>{const rt=FormulaFormatter.noneIfEmpty(tt.search(nt)).reduce((it,ot)=>n$2.of(it.asNumber()+ot.asNumber()));return new FormattedValue(rt,"")}).comment("[","]",(tt,nt)=>new FormattedValue(nt,tt))}format(_e,tt){if(_e===void 0)return;const nt=_e.asFormula();let rt=this.Parser.parse(nt).resolve(tt);if(rt!==void 0)return rt instanceof TreeNodeValue?rt:new TreeNodeValue(rt,0,[rt])}static noneIfEmpty(_e){return _e.length>0?_e:[n$2.None]}}class FeatureSummary{constructor(_e,tt,nt,rt,it,ot){this.key=_e,this.name=tt,this.label=nt,this.tags=rt,this.enabledFormula=it,this.maxStacks=ot}checkPrerequisites(_e,tt){var st;const nt=new PrerequisiteValidation;let rt=pe.parse(this.enabledFormula);(this.maxStacks!==null?(((st=_e.resolve(this.key))==null?void 0:st.asNumber())??0)<this.maxStacks:!0)||nt.add("Must not already have this feature",!1);const ot=new FormulaFormatter(at=>tt.name(at)).format(rt,_e);return ot&&(ot.operator===TreeNodeOperator.ALL?ot.mapChildren(at=>nt.add(this.resolvedValueText(at),at.asBoolean())):nt.add(ot.asFormatted(),ot.asBoolean())),nt}resolvedValueText(_e){return _e instanceof FormattedValue?_e.asFormatted():_e instanceof i?_e.asName():_e.asText()}isEnabled(_e){var tt;return((tt=pe.parse(this.enabledFormula).resolve(_e))==null?void 0:tt.asBoolean())??!0}}class Feature extends FeatureSummary{constructor(tt,nt,rt,it,ot,st,at,lt){super(tt,nt,rt,it,ot,st);ln(this,"featureModifications");this.description=at,this.traits=lt}async resolve(tt,nt){const rt=Path.combine(tt,this.key),it=await Promise.all(this.traits.map(ot=>ot.resolve(rt,nt)));return new ResolvedFeature(rt,this,it)}}class ResolvedFeature{constructor(_e,tt,nt){this.path=_e,this.origin=tt,this.children=nt}applyTo(_e){_e.increment(this.origin.key),this.children.forEach(tt=>tt.applyTo(_e))}}var ChoiceInputType=(et=>(et[et.Text=0]="Text",et[et.Select=1]="Select",et))(ChoiceInputType||{});class ResolvedChoice{}class MultiSelectChoice{constructor(_e,tt,nt,rt,it,ot,st,at){this.key=_e,this.label=tt,this.type=nt,this.optionTags=rt,this.featureIds=it,this.categories=ot,this.sortBy=st,this.repeatingIndex=at}async resolve(_e,tt){const nt=Path.combine(_e,this.key);let rt=array(tt.selection(nt)),it=((rt==null?void 0:rt.length)??[])>0?(await Promise.all(rt.map(ot=>tt.feature(ot)))).filter(ot=>ot!==void 0):[];return rt.forEach(ot=>tt.register(ot)),new ResolvedMultiSelectChoice(nt,this.key,this.label,this.type,this.optionTags,this.featureIds,this.categories,this.sortBy,this.repeatingIndex,await Promise.all(it.map(ot=>ot.resolve(_e,tt))))}}class BaseResolvedSelectChoice extends ResolvedChoice{constructor(){super(...arguments);ln(this,"inputType",1)}options(tt,nt,rt){let it=[...this.optionTags];return rt&&rt!==""&&(it=it.map(ot=>ot+"+"+rt)),[...tt.query(it),...this.featureIds.flatMap(ot=>{const st=tt.feature(ot);return st!==void 0?[st]:[]})].filter(ot=>!nt||ot.name.toLowerCase().includes(nt.toLowerCase())).sort((ot,st)=>{switch(this.sortBy){case"name":return ot.name.localeCompare(st.name);default:return 0}})}}class ResolvedMultiSelectChoice extends BaseResolvedSelectChoice{constructor(tt,nt,rt,it,ot,st,at,lt,ct,ut){super();ln(this,"inputType",1);this.path=tt,this.key=nt,this.label=rt,this.type=it,this.optionTags=ot,this.featureIds=st,this.categories=at,this.sortBy=lt,this.repeatingIndex=ct,this.selected=ut}applyTo(tt){if(tt.withoutChoicePath!==this.path)return this.selected.forEach(nt=>nt.applyTo(tt))}get children(){return this.selected}}class SelectChoice{constructor(_e,tt,nt,rt,it,ot,st,at){this.key=_e,this.label=tt,this.type=nt,this.optionTags=rt,this.featureIds=it,this.categories=ot,this.sortBy=st,this.repeatingIndex=at}async resolve(_e,tt){const nt=this.repeatingIndex===0?Path.combine(_e,this.key):Path.combine(_e,this.key,this.repeatingIndex);let rt=tt.selection(nt),it=rt!==void 0?await tt.feature(rt):void 0;if(this.repeatingIndex>0&&it===void 0){const st=Path.combine(_e,this.key,this.repeatingIndex+1);tt.swapSelections(nt,st),rt=tt.selection(nt),it=rt!==void 0?await tt.feature(rt):void 0}tt.register(rt);let ot;return this.repeatingIndex>0&&it!==void 0&&(ot=await new SelectChoice(this.key,this.label,this.type,this.optionTags,this.featureIds,this.categories,this.sortBy,this.repeatingIndex+1).resolve(_e,tt)),new ResolvedSelectChoice(nt,this.key,this.label,this.type,this.optionTags,this.featureIds,this.categories,this.sortBy,this.repeatingIndex,await(it==null?void 0:it.resolve(_e,tt)),ot)}}class ResolvedSelectChoice extends BaseResolvedSelectChoice{constructor(tt,nt,rt,it,ot,st,at,lt,ct,ut,dt){super();ln(this,"inputType",1);this.path=tt,this.key=nt,this.label=rt,this.type=it,this.optionTags=ot,this.featureIds=st,this.categories=at,this.sortBy=lt,this.repeatingIndex=ct,this.selected=ut,this.repeatedChoice=dt}applyTo(tt){var nt;if(tt.withoutChoicePath!==this.path)return(nt=this.selected)==null?void 0:nt.applyTo(tt)}get children(){return this.selected!==void 0?this.repeatedChoice!==void 0?[this.selected,this.repeatedChoice]:[this.selected]:[]}}class TextChoice{constructor(_e,tt,nt,rt){this.key=_e,this.label=tt,this.type=nt,this.repeatingIndex=rt}async resolve(_e,tt){const nt=Path.combine(_e,this.key),rt=tt.selection(nt);return new ResolvedTextChoice(nt,this.key,this.label,this.type,this.repeatingIndex,rt)}}class ResolvedTextChoice extends ResolvedChoice{constructor(tt,nt,rt,it,ot,st){super();ln(this,"inputType",0);ln(this,"children",[]);this.path=tt,this.key=nt,this.label=rt,this.type=it,this.repeatingIndex=ot,this.value=st}applyTo(tt){this.value!==void 0&&tt.set(this.path,this.value)}}class FeatureSelectCategory{constructor(_e,tt){this.label=_e,this.tag=tt}}class AppliedState{constructor(_e=void 0){ln(this,"rawState");ln(this,"dataContext");ln(this,"stackModifications",[]);this.withoutChoicePath=_e,this.rawState={},this.dataContext=h$2.of(this.rawState)}increment(_e,tt=1){const nt=this.getAsNumber(_e);this.set(_e,nt+tt)}set(_e,tt){this.dataContext.set(_e,tt),this.modifications(_e,this.getAsNumber(_e)).forEach(nt=>nt.applyModification(this))}getAsNumber(_e){var tt;return((tt=this.dataContext.resolve(_e))==null?void 0:tt.asNumber())??0}registerModification(_e){this.stackModifications.push(_e),this.getAsNumber(_e.targetFeatureId)>=_e.targetStackCount&&_e.applyModification(this)}modifications(_e,tt){return this.stackModifications.filter(nt=>nt.targetFeatureId===_e&&nt.targetStackCount===tt)}}class Character{constructor(_e,tt,nt,rt,it=void 0){ln(this,"resolvedTemplate");this.id=_e,this.template=tt,this.database=nt,this.selections=rt,this.resolvedTemplate=it}get name(){return this.selected("character_name")??""}static create(_e,tt,nt){return new Character(_e,tt,nt,{},void 0)}atLevel(_e,tt=void 0){var lt;const nt=new AppliedState(tt),rt=(lt=this.resolvedTemplate)==null?void 0:lt.atLevel(_e);rt==null||rt.applyTo(nt);const it={},ot=[];rt==null||rt.traverse(ct=>{if(ct instanceof ResolvedFeature){const ut=ct.origin;if(nt.getAsNumber(ut.key)<=0)return!1;it[ut.key]=ut}return!(ct instanceof ResolvedChoice&&(ot.push(ct),ct.path===tt))});const st=Object.values(it);return new CharacterAtLevel(_e,this,st,nt.rawState,ot)}pack(){return{id:this.id,selections:this.selections}}selected(_e){return this.selections[_e]}async select(_e,tt){return this.selectAll({[_e]:tt})}async selectAll(_e){const tt={...this.selections,..._e},nt=await timedAsync(()=>this.template.resolve(this.database,tt),"Resolving Character");return new Character(this.id,this.template,this.database,tt,nt)}}class CharacterSummary{constructor(_e,tt){this.id=_e,this.name=tt}}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let et=0;et<256;++et)byteToHex.push((et+256).toString(16).slice(1));function unsafeStringify(et,_e=0){return byteToHex[et[_e+0]]+byteToHex[et[_e+1]]+byteToHex[et[_e+2]]+byteToHex[et[_e+3]]+"-"+byteToHex[et[_e+4]]+byteToHex[et[_e+5]]+"-"+byteToHex[et[_e+6]]+byteToHex[et[_e+7]]+"-"+byteToHex[et[_e+8]]+byteToHex[et[_e+9]]+"-"+byteToHex[et[_e+10]]+byteToHex[et[_e+11]]+byteToHex[et[_e+12]]+byteToHex[et[_e+13]]+byteToHex[et[_e+14]]+byteToHex[et[_e+15]]}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(et,_e,tt){if(native.randomUUID&&!_e&&!et)return native.randomUUID();et=et||{};const nt=et.random||(et.rng||rng)();if(nt[6]=nt[6]&15|64,nt[8]=nt[8]&63|128,_e){tt=tt||0;for(let rt=0;rt<16;++rt)_e[tt+rt]=nt[rt];return _e}return unsafeStringify(nt)}class CharacterStore{constructor(_e,tt){this.template=_e,this.database=tt}async list(){const _e=await this.loadAllPacked();return await Promise.all(_e.map(tt=>new CharacterSummary(tt.id,tt.selections.character_name)))}async load(_e){const tt=await this.loadPacked(_e);if(tt)return await this.unpack(tt)}async save(_e){const tt=_e.pack();return this.savePacked(tt)}async create(_e){const tt=v4();let nt=Character.create(tt,this.template,this.database);return nt=await nt.selectAll(_e),await this.save(nt),nt}async delete(_e){await this.deletePacked(_e)}async unpack(_e){return await Character.create(_e.id,this.template,this.database).selectAll(_e.selections)}}class FirebaseCharacterStore extends CharacterStore{constructor(_e,tt){super(_e,tt)}async loadPacked(_e){const tt=getActiveUser();if(!tt){console.warn("Unable to access Firebase: no user logged in");return}const nt=await timedAsync(()=>FirebaseRepository.load(tt.id,"character",_e),"Loading from Firebase");if(!nt){console.warn("No character found for: "+_e);return}return{id:nt.id,selections:nt.selections??nt.choices}}async loadAllPacked(){const _e=getActiveUser();return _e?(await FirebaseRepository.loadAll(_e.id,"character")??[]).map(nt=>({id:nt.id,selections:nt.selections??nt.choices})):(console.warn("Unable to access Firebase: no user logged in"),[])}async savePacked(_e){const tt=getActiveUser();if(!tt){console.warn("Unable to access Firebase: no user logged in");return}await FirebaseRepository.save(tt.id,"character",_e.id,_e)}async deletePacked(_e){const tt=getActiveUser();if(!tt){console.warn("Unable to access Firebase: no user logged in");return}await FirebaseRepository.delete(tt.id,"character",_e)}}var src={exports:{}},indexLight={exports:{}},indexMinimal={},minimal$1={},aspromise=asPromise$1;function asPromise$1(et,_e){for(var tt=new Array(arguments.length-1),nt=0,rt=2,it=!0;rt<arguments.length;)tt[nt++]=arguments[rt++];return new Promise(function(st,at){tt[nt]=function(ct){if(it)if(it=!1,ct)at(ct);else{for(var ut=new Array(arguments.length-1),dt=0;dt<ut.length;)ut[dt++]=arguments[dt];st.apply(null,ut)}};try{et.apply(_e||null,tt)}catch(lt){it&&(it=!1,at(lt))}})}var base64$1={};(function(et){var _e=et;_e.length=function(st){var at=st.length;if(!at)return 0;for(var lt=0;--at%4>1&&st.charAt(at)==="=";)++lt;return Math.ceil(st.length*3)/4-lt};for(var tt=new Array(64),nt=new Array(123),rt=0;rt<64;)nt[tt[rt]=rt<26?rt+65:rt<52?rt+71:rt<62?rt-4:rt-59|43]=rt++;_e.encode=function(st,at,lt){for(var ct=null,ut=[],dt=0,ft=0,pt;at<lt;){var mt=st[at++];switch(ft){case 0:ut[dt++]=tt[mt>>2],pt=(mt&3)<<4,ft=1;break;case 1:ut[dt++]=tt[pt|mt>>4],pt=(mt&15)<<2,ft=2;break;case 2:ut[dt++]=tt[pt|mt>>6],ut[dt++]=tt[mt&63],ft=0;break}dt>8191&&((ct||(ct=[])).push(String.fromCharCode.apply(String,ut)),dt=0)}return ft&&(ut[dt++]=tt[pt],ut[dt++]=61,ft===1&&(ut[dt++]=61)),ct?(dt&&ct.push(String.fromCharCode.apply(String,ut.slice(0,dt))),ct.join("")):String.fromCharCode.apply(String,ut.slice(0,dt))};var it="invalid encoding";_e.decode=function(st,at,lt){for(var ct=lt,ut=0,dt,ft=0;ft<st.length;){var pt=st.charCodeAt(ft++);if(pt===61&&ut>1)break;if((pt=nt[pt])===void 0)throw Error(it);switch(ut){case 0:dt=pt,ut=1;break;case 1:at[lt++]=dt<<2|(pt&48)>>4,dt=pt,ut=2;break;case 2:at[lt++]=(dt&15)<<4|(pt&60)>>2,dt=pt,ut=3;break;case 3:at[lt++]=(dt&3)<<6|pt,ut=0;break}}if(ut===1)throw Error(it);return lt-ct},_e.test=function(st){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(st)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(_e,tt,nt){return(this._listeners[_e]||(this._listeners[_e]=[])).push({fn:tt,ctx:nt||this}),this};EventEmitter.prototype.off=function(_e,tt){if(_e===void 0)this._listeners={};else if(tt===void 0)this._listeners[_e]=[];else for(var nt=this._listeners[_e],rt=0;rt<nt.length;)nt[rt].fn===tt?nt.splice(rt,1):++rt;return this};EventEmitter.prototype.emit=function(_e){var tt=this._listeners[_e];if(tt){for(var nt=[],rt=1;rt<arguments.length;)nt.push(arguments[rt++]);for(rt=0;rt<tt.length;)tt[rt].fn.apply(tt[rt++].ctx,nt)}return this};var float=factory(factory);function factory(et){return typeof Float32Array<"u"?function(){var _e=new Float32Array([-0]),tt=new Uint8Array(_e.buffer),nt=tt[3]===128;function rt(at,lt,ct){_e[0]=at,lt[ct]=tt[0],lt[ct+1]=tt[1],lt[ct+2]=tt[2],lt[ct+3]=tt[3]}function it(at,lt,ct){_e[0]=at,lt[ct]=tt[3],lt[ct+1]=tt[2],lt[ct+2]=tt[1],lt[ct+3]=tt[0]}et.writeFloatLE=nt?rt:it,et.writeFloatBE=nt?it:rt;function ot(at,lt){return tt[0]=at[lt],tt[1]=at[lt+1],tt[2]=at[lt+2],tt[3]=at[lt+3],_e[0]}function st(at,lt){return tt[3]=at[lt],tt[2]=at[lt+1],tt[1]=at[lt+2],tt[0]=at[lt+3],_e[0]}et.readFloatLE=nt?ot:st,et.readFloatBE=nt?st:ot}():function(){function _e(nt,rt,it,ot){var st=rt<0?1:0;if(st&&(rt=-rt),rt===0)nt(1/rt>0?0:2147483648,it,ot);else if(isNaN(rt))nt(2143289344,it,ot);else if(rt>34028234663852886e22)nt((st<<31|2139095040)>>>0,it,ot);else if(rt<11754943508222875e-54)nt((st<<31|Math.round(rt/1401298464324817e-60))>>>0,it,ot);else{var at=Math.floor(Math.log(rt)/Math.LN2),lt=Math.round(rt*Math.pow(2,-at)*8388608)&8388607;nt((st<<31|at+127<<23|lt)>>>0,it,ot)}}et.writeFloatLE=_e.bind(null,writeUintLE),et.writeFloatBE=_e.bind(null,writeUintBE);function tt(nt,rt,it){var ot=nt(rt,it),st=(ot>>31)*2+1,at=ot>>>23&255,lt=ot&8388607;return at===255?lt?NaN:st*(1/0):at===0?st*1401298464324817e-60*lt:st*Math.pow(2,at-150)*(lt+8388608)}et.readFloatLE=tt.bind(null,readUintLE),et.readFloatBE=tt.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var _e=new Float64Array([-0]),tt=new Uint8Array(_e.buffer),nt=tt[7]===128;function rt(at,lt,ct){_e[0]=at,lt[ct]=tt[0],lt[ct+1]=tt[1],lt[ct+2]=tt[2],lt[ct+3]=tt[3],lt[ct+4]=tt[4],lt[ct+5]=tt[5],lt[ct+6]=tt[6],lt[ct+7]=tt[7]}function it(at,lt,ct){_e[0]=at,lt[ct]=tt[7],lt[ct+1]=tt[6],lt[ct+2]=tt[5],lt[ct+3]=tt[4],lt[ct+4]=tt[3],lt[ct+5]=tt[2],lt[ct+6]=tt[1],lt[ct+7]=tt[0]}et.writeDoubleLE=nt?rt:it,et.writeDoubleBE=nt?it:rt;function ot(at,lt){return tt[0]=at[lt],tt[1]=at[lt+1],tt[2]=at[lt+2],tt[3]=at[lt+3],tt[4]=at[lt+4],tt[5]=at[lt+5],tt[6]=at[lt+6],tt[7]=at[lt+7],_e[0]}function st(at,lt){return tt[7]=at[lt],tt[6]=at[lt+1],tt[5]=at[lt+2],tt[4]=at[lt+3],tt[3]=at[lt+4],tt[2]=at[lt+5],tt[1]=at[lt+6],tt[0]=at[lt+7],_e[0]}et.readDoubleLE=nt?ot:st,et.readDoubleBE=nt?st:ot}():function(){function _e(nt,rt,it,ot,st,at){var lt=ot<0?1:0;if(lt&&(ot=-ot),ot===0)nt(0,st,at+rt),nt(1/ot>0?0:2147483648,st,at+it);else if(isNaN(ot))nt(0,st,at+rt),nt(2146959360,st,at+it);else if(ot>17976931348623157e292)nt(0,st,at+rt),nt((lt<<31|2146435072)>>>0,st,at+it);else{var ct;if(ot<22250738585072014e-324)ct=ot/5e-324,nt(ct>>>0,st,at+rt),nt((lt<<31|ct/4294967296)>>>0,st,at+it);else{var ut=Math.floor(Math.log(ot)/Math.LN2);ut===1024&&(ut=1023),ct=ot*Math.pow(2,-ut),nt(ct*4503599627370496>>>0,st,at+rt),nt((lt<<31|ut+1023<<20|ct*1048576&1048575)>>>0,st,at+it)}}}et.writeDoubleLE=_e.bind(null,writeUintLE,0,4),et.writeDoubleBE=_e.bind(null,writeUintBE,4,0);function tt(nt,rt,it,ot,st){var at=nt(ot,st+rt),lt=nt(ot,st+it),ct=(lt>>31)*2+1,ut=lt>>>20&2047,dt=4294967296*(lt&1048575)+at;return ut===2047?dt?NaN:ct*(1/0):ut===0?ct*5e-324*dt:ct*Math.pow(2,ut-1075)*(dt+4503599627370496)}et.readDoubleLE=tt.bind(null,readUintLE,0,4),et.readDoubleBE=tt.bind(null,readUintBE,4,0)}(),et}function writeUintLE(et,_e,tt){_e[tt]=et&255,_e[tt+1]=et>>>8&255,_e[tt+2]=et>>>16&255,_e[tt+3]=et>>>24}function writeUintBE(et,_e,tt){_e[tt]=et>>>24,_e[tt+1]=et>>>16&255,_e[tt+2]=et>>>8&255,_e[tt+3]=et&255}function readUintLE(et,_e){return(et[_e]|et[_e+1]<<8|et[_e+2]<<16|et[_e+3]<<24)>>>0}function readUintBE(et,_e){return(et[_e]<<24|et[_e+1]<<16|et[_e+2]<<8|et[_e+3])>>>0}var inquire_1=inquire$1;function inquire$1(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(et){}return null}var utf8$2={};(function(et){var _e=et;_e.length=function(nt){for(var rt=0,it=0,ot=0;ot<nt.length;++ot)it=nt.charCodeAt(ot),it<128?rt+=1:it<2048?rt+=2:(it&64512)===55296&&(nt.charCodeAt(ot+1)&64512)===56320?(++ot,rt+=4):rt+=3;return rt},_e.read=function(nt,rt,it){var ot=it-rt;if(ot<1)return"";for(var st=null,at=[],lt=0,ct;rt<it;)ct=nt[rt++],ct<128?at[lt++]=ct:ct>191&&ct<224?at[lt++]=(ct&31)<<6|nt[rt++]&63:ct>239&&ct<365?(ct=((ct&7)<<18|(nt[rt++]&63)<<12|(nt[rt++]&63)<<6|nt[rt++]&63)-65536,at[lt++]=55296+(ct>>10),at[lt++]=56320+(ct&1023)):at[lt++]=(ct&15)<<12|(nt[rt++]&63)<<6|nt[rt++]&63,lt>8191&&((st||(st=[])).push(String.fromCharCode.apply(String,at)),lt=0);return st?(lt&&st.push(String.fromCharCode.apply(String,at.slice(0,lt))),st.join("")):String.fromCharCode.apply(String,at.slice(0,lt))},_e.write=function(nt,rt,it){for(var ot=it,st,at,lt=0;lt<nt.length;++lt)st=nt.charCodeAt(lt),st<128?rt[it++]=st:st<2048?(rt[it++]=st>>6|192,rt[it++]=st&63|128):(st&64512)===55296&&((at=nt.charCodeAt(lt+1))&64512)===56320?(st=65536+((st&1023)<<10)+(at&1023),++lt,rt[it++]=st>>18|240,rt[it++]=st>>12&63|128,rt[it++]=st>>6&63|128,rt[it++]=st&63|128):(rt[it++]=st>>12|224,rt[it++]=st>>6&63|128,rt[it++]=st&63|128);return it-ot}})(utf8$2);var pool_1=pool;function pool(et,_e,tt){var nt=tt||8192,rt=nt>>>1,it=null,ot=nt;return function(at){if(at<1||at>rt)return et(at);ot+at>nt&&(it=et(nt),ot=0);var lt=_e.call(it,ot,ot+=at);return ot&7&&(ot=(ot|7)+1),lt}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=_e;var et=requireMinimal();function _e(it,ot){this.lo=it>>>0,this.hi=ot>>>0}var tt=_e.zero=new _e(0,0);tt.toNumber=function(){return 0},tt.zzEncode=tt.zzDecode=function(){return this},tt.length=function(){return 1};var nt=_e.zeroHash="\0\0\0\0\0\0\0\0";_e.fromNumber=function(ot){if(ot===0)return tt;var st=ot<0;st&&(ot=-ot);var at=ot>>>0,lt=(ot-at)/4294967296>>>0;return st&&(lt=~lt>>>0,at=~at>>>0,++at>4294967295&&(at=0,++lt>4294967295&&(lt=0))),new _e(at,lt)},_e.from=function(ot){if(typeof ot=="number")return _e.fromNumber(ot);if(et.isString(ot))if(et.Long)ot=et.Long.fromString(ot);else return _e.fromNumber(parseInt(ot,10));return ot.low||ot.high?new _e(ot.low>>>0,ot.high>>>0):tt},_e.prototype.toNumber=function(ot){if(!ot&&this.hi>>>31){var st=~this.lo+1>>>0,at=~this.hi>>>0;return st||(at=at+1>>>0),-(st+at*4294967296)}return this.lo+this.hi*4294967296},_e.prototype.toLong=function(ot){return et.Long?new et.Long(this.lo|0,this.hi|0,!!ot):{low:this.lo|0,high:this.hi|0,unsigned:!!ot}};var rt=String.prototype.charCodeAt;return _e.fromHash=function(ot){return ot===nt?tt:new _e((rt.call(ot,0)|rt.call(ot,1)<<8|rt.call(ot,2)<<16|rt.call(ot,3)<<24)>>>0,(rt.call(ot,4)|rt.call(ot,5)<<8|rt.call(ot,6)<<16|rt.call(ot,7)<<24)>>>0)},_e.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},_e.prototype.zzEncode=function(){var ot=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^ot)>>>0,this.lo=(this.lo<<1^ot)>>>0,this},_e.prototype.zzDecode=function(){var ot=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^ot)>>>0,this.hi=(this.hi>>>1^ot)>>>0,this},_e.prototype.length=function(){var ot=this.lo,st=(this.lo>>>28|this.hi<<4)>>>0,at=this.hi>>>24;return at===0?st===0?ot<16384?ot<128?1:2:ot<2097152?3:4:st<16384?st<128?5:6:st<2097152?7:8:at<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(et){var _e=et;_e.asPromise=aspromise,_e.base64=base64$1,_e.EventEmitter=eventemitter,_e.float=float,_e.inquire=inquire_1,_e.utf8=utf8$2,_e.pool=pool_1,_e.LongBits=requireLongbits(),_e.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),_e.global=_e.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,_e.emptyArray=Object.freeze?Object.freeze([]):[],_e.emptyObject=Object.freeze?Object.freeze({}):{},_e.isInteger=Number.isInteger||function(it){return typeof it=="number"&&isFinite(it)&&Math.floor(it)===it},_e.isString=function(it){return typeof it=="string"||it instanceof String},_e.isObject=function(it){return it&&typeof it=="object"},_e.isset=_e.isSet=function(it,ot){var st=it[ot];return st!=null&&it.hasOwnProperty(ot)?typeof st!="object"||(Array.isArray(st)?st.length:Object.keys(st).length)>0:!1},_e.Buffer=function(){try{var rt=_e.inquire("buffer").Buffer;return rt.prototype.utf8Write?rt:null}catch{return null}}(),_e._Buffer_from=null,_e._Buffer_allocUnsafe=null,_e.newBuffer=function(it){return typeof it=="number"?_e.Buffer?_e._Buffer_allocUnsafe(it):new _e.Array(it):_e.Buffer?_e._Buffer_from(it):typeof Uint8Array>"u"?it:new Uint8Array(it)},_e.Array=typeof Uint8Array<"u"?Uint8Array:Array,_e.Long=_e.global.dcodeIO&&_e.global.dcodeIO.Long||_e.global.Long||_e.inquire("long"),_e.key2Re=/^true|false|0|1$/,_e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,_e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,_e.longToHash=function(it){return it?_e.LongBits.from(it).toHash():_e.LongBits.zeroHash},_e.longFromHash=function(it,ot){var st=_e.LongBits.fromHash(it);return _e.Long?_e.Long.fromBits(st.lo,st.hi,ot):st.toNumber(!!ot)};function tt(rt,it,ot){for(var st=Object.keys(it),at=0;at<st.length;++at)(rt[st[at]]===void 0||!ot)&&(rt[st[at]]=it[st[at]]);return rt}_e.merge=tt,_e.lcFirst=function(it){return it.charAt(0).toLowerCase()+it.substring(1)};function nt(rt){function it(ot,st){if(!(this instanceof it))return new it(ot,st);Object.defineProperty(this,"message",{get:function(){return ot}}),Error.captureStackTrace?Error.captureStackTrace(this,it):Object.defineProperty(this,"stack",{value:new Error().stack||""}),st&&tt(this,st)}return it.prototype=Object.create(Error.prototype,{constructor:{value:it,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return rt},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),it}_e.newError=nt,_e.ProtocolError=nt("ProtocolError"),_e.oneOfGetter=function(it){for(var ot={},st=0;st<it.length;++st)ot[it[st]]=1;return function(){for(var at=Object.keys(this),lt=at.length-1;lt>-1;--lt)if(ot[at[lt]]===1&&this[at[lt]]!==void 0&&this[at[lt]]!==null)return at[lt]}},_e.oneOfSetter=function(it){return function(ot){for(var st=0;st<it.length;++st)it[st]!==ot&&delete this[it[st]]}},_e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},_e._configure=function(){var rt=_e.Buffer;if(!rt){_e._Buffer_from=_e._Buffer_allocUnsafe=null;return}_e._Buffer_from=rt.from!==Uint8Array.from&&rt.from||function(ot,st){return new rt(ot,st)},_e._Buffer_allocUnsafe=rt.allocUnsafe||function(ot){return new rt(ot)}}}(minimal$1)),minimal$1}var writer=Writer$1,util$7=requireMinimal(),BufferWriter$1,LongBits$1=util$7.LongBits,base64=util$7.base64,utf8$1=util$7.utf8;function Op(et,_e,tt){this.fn=et,this.len=_e,this.next=void 0,this.val=tt}function noop$3(){}function State(et){this.head=et.head,this.tail=et.tail,this.len=et.len,this.next=et.states}function Writer$1(){this.len=0,this.head=new Op(noop$3,0,0),this.tail=this.head,this.states=null}var create$2=function et(){return util$7.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$2();Writer$1.alloc=function et(_e){return new util$7.Array(_e)};util$7.Array!==Array&&(Writer$1.alloc=util$7.pool(Writer$1.alloc,util$7.Array.prototype.subarray));Writer$1.prototype._push=function et(_e,tt,nt){return this.tail=this.tail.next=new Op(_e,tt,nt),this.len+=tt,this};function writeByte(et,_e,tt){_e[tt]=et&255}function writeVarint32(et,_e,tt){for(;et>127;)_e[tt++]=et&127|128,et>>>=7;_e[tt]=et}function VarintOp(et,_e){this.len=et,this.next=void 0,this.val=_e}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function et(_e){return this.len+=(this.tail=this.tail.next=new VarintOp((_e=_e>>>0)<128?1:_e<16384?2:_e<2097152?3:_e<268435456?4:5,_e)).len,this};Writer$1.prototype.int32=function et(_e){return _e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(_e)):this.uint32(_e)};Writer$1.prototype.sint32=function et(_e){return this.uint32((_e<<1^_e>>31)>>>0)};function writeVarint64(et,_e,tt){for(;et.hi;)_e[tt++]=et.lo&127|128,et.lo=(et.lo>>>7|et.hi<<25)>>>0,et.hi>>>=7;for(;et.lo>127;)_e[tt++]=et.lo&127|128,et.lo=et.lo>>>7;_e[tt++]=et.lo}Writer$1.prototype.uint64=function et(_e){var tt=LongBits$1.from(_e);return this._push(writeVarint64,tt.length(),tt)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function et(_e){var tt=LongBits$1.from(_e).zzEncode();return this._push(writeVarint64,tt.length(),tt)};Writer$1.prototype.bool=function et(_e){return this._push(writeByte,1,_e?1:0)};function writeFixed32(et,_e,tt){_e[tt]=et&255,_e[tt+1]=et>>>8&255,_e[tt+2]=et>>>16&255,_e[tt+3]=et>>>24}Writer$1.prototype.fixed32=function et(_e){return this._push(writeFixed32,4,_e>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function et(_e){var tt=LongBits$1.from(_e);return this._push(writeFixed32,4,tt.lo)._push(writeFixed32,4,tt.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function et(_e){return this._push(util$7.float.writeFloatLE,4,_e)};Writer$1.prototype.double=function et(_e){return this._push(util$7.float.writeDoubleLE,8,_e)};var writeBytes=util$7.Array.prototype.set?function et(_e,tt,nt){tt.set(_e,nt)}:function et(_e,tt,nt){for(var rt=0;rt<_e.length;++rt)tt[nt+rt]=_e[rt]};Writer$1.prototype.bytes=function et(_e){var tt=_e.length>>>0;if(!tt)return this._push(writeByte,1,0);if(util$7.isString(_e)){var nt=Writer$1.alloc(tt=base64.length(_e));base64.decode(_e,nt,0),_e=nt}return this.uint32(tt)._push(writeBytes,tt,_e)};Writer$1.prototype.string=function et(_e){var tt=utf8$1.length(_e);return tt?this.uint32(tt)._push(utf8$1.write,tt,_e):this._push(writeByte,1,0)};Writer$1.prototype.fork=function et(){return this.states=new State(this),this.head=this.tail=new Op(noop$3,0,0),this.len=0,this};Writer$1.prototype.reset=function et(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$3,0,0),this.len=0),this};Writer$1.prototype.ldelim=function et(){var _e=this.head,tt=this.tail,nt=this.len;return this.reset().uint32(nt),nt&&(this.tail.next=_e.next,this.tail=tt,this.len+=nt),this};Writer$1.prototype.finish=function et(){for(var _e=this.head.next,tt=this.constructor.alloc(this.len),nt=0;_e;)_e.fn(_e.val,tt,nt),nt+=_e.len,_e=_e.next;return tt};Writer$1._configure=function(et){BufferWriter$1=et,Writer$1.create=create$2(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$6=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$6._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$6.Buffer&&util$6.Buffer.prototype instanceof Uint8Array&&util$6.Buffer.prototype.set.name==="set"?function(_e,tt,nt){tt.set(_e,nt)}:function(_e,tt,nt){if(_e.copy)_e.copy(tt,nt,0,_e.length);else for(var rt=0;rt<_e.length;)tt[nt++]=_e[rt++]}};BufferWriter.prototype.bytes=function et(_e){util$6.isString(_e)&&(_e=util$6._Buffer_from(_e,"base64"));var tt=_e.length>>>0;return this.uint32(tt),tt&&this._push(BufferWriter.writeBytesBuffer,tt,_e),this};function writeStringBuffer(et,_e,tt){et.length<40?util$6.utf8.write(et,_e,tt):_e.utf8Write?_e.utf8Write(et,tt):_e.write(et,tt)}BufferWriter.prototype.string=function et(_e){var tt=util$6.Buffer.byteLength(_e);return this.uint32(tt),tt&&this._push(writeStringBuffer,tt,_e),this};BufferWriter._configure();var reader=Reader$1,util$5=requireMinimal(),BufferReader$1,LongBits=util$5.LongBits,utf8=util$5.utf8;function indexOutOfRange(et,_e){return RangeError("index out of range: "+et.pos+" + "+(_e||1)+" > "+et.len)}function Reader$1(et){this.buf=et,this.pos=0,this.len=et.length}var create_array=typeof Uint8Array<"u"?function et(_e){if(_e instanceof Uint8Array||Array.isArray(_e))return new Reader$1(_e);throw Error("illegal buffer")}:function et(_e){if(Array.isArray(_e))return new Reader$1(_e);throw Error("illegal buffer")},create$1=function et(){return util$5.Buffer?function(tt){return(Reader$1.create=function(rt){return util$5.Buffer.isBuffer(rt)?new BufferReader$1(rt):create_array(rt)})(tt)}:create_array};Reader$1.create=create$1();Reader$1.prototype._slice=util$5.Array.prototype.subarray||util$5.Array.prototype.slice;Reader$1.prototype.uint32=function et(){var _e=4294967295;return function(){if(_e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(_e=(_e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(_e=(_e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(_e=(_e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(_e=(_e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return _e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return _e}}();Reader$1.prototype.int32=function et(){return this.uint32()|0};Reader$1.prototype.sint32=function et(){var _e=this.uint32();return _e>>>1^-(_e&1)|0};function readLongVarint(){var et=new LongBits(0,0),_e=0;if(this.len-this.pos>4){for(;_e<4;++_e)if(et.lo=(et.lo|(this.buf[this.pos]&127)<<_e*7)>>>0,this.buf[this.pos++]<128)return et;if(et.lo=(et.lo|(this.buf[this.pos]&127)<<28)>>>0,et.hi=(et.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return et;_e=0}else{for(;_e<3;++_e){if(this.pos>=this.len)throw indexOutOfRange(this);if(et.lo=(et.lo|(this.buf[this.pos]&127)<<_e*7)>>>0,this.buf[this.pos++]<128)return et}return et.lo=(et.lo|(this.buf[this.pos++]&127)<<_e*7)>>>0,et}if(this.len-this.pos>4){for(;_e<5;++_e)if(et.hi=(et.hi|(this.buf[this.pos]&127)<<_e*7+3)>>>0,this.buf[this.pos++]<128)return et}else for(;_e<5;++_e){if(this.pos>=this.len)throw indexOutOfRange(this);if(et.hi=(et.hi|(this.buf[this.pos]&127)<<_e*7+3)>>>0,this.buf[this.pos++]<128)return et}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function et(){return this.uint32()!==0};function readFixed32_end(et,_e){return(et[_e-4]|et[_e-3]<<8|et[_e-2]<<16|et[_e-1]<<24)>>>0}Reader$1.prototype.fixed32=function et(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function et(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function et(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var _e=util$5.float.readFloatLE(this.buf,this.pos);return this.pos+=4,_e};Reader$1.prototype.double=function et(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var _e=util$5.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,_e};Reader$1.prototype.bytes=function et(){var _e=this.uint32(),tt=this.pos,nt=this.pos+_e;if(nt>this.len)throw indexOutOfRange(this,_e);return this.pos+=_e,Array.isArray(this.buf)?this.buf.slice(tt,nt):tt===nt?new this.buf.constructor(0):this._slice.call(this.buf,tt,nt)};Reader$1.prototype.string=function et(){var _e=this.bytes();return utf8.read(_e,0,_e.length)};Reader$1.prototype.skip=function et(_e){if(typeof _e=="number"){if(this.pos+_e>this.len)throw indexOutOfRange(this,_e);this.pos+=_e}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(et){switch(et){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(et=this.uint32()&7)!==4;)this.skipType(et);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+et+" at offset "+this.pos)}return this};Reader$1._configure=function(et){BufferReader$1=et,Reader$1.create=create$1(),BufferReader$1._configure();var _e=util$5.Long?"toLong":"toNumber";util$5.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[_e](!1)},uint64:function(){return readLongVarint.call(this)[_e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[_e](!1)},fixed64:function(){return readFixed64.call(this)[_e](!0)},sfixed64:function(){return readFixed64.call(this)[_e](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$4=requireMinimal();function BufferReader(et){Reader.call(this,et)}BufferReader._configure=function(){util$4.Buffer&&(BufferReader.prototype._slice=util$4.Buffer.prototype.slice)};BufferReader.prototype.string=function et(){var _e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+_e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+_e,this.len))};BufferReader._configure();var rpc={},service$1=Service$1,util$3=requireMinimal();(Service$1.prototype=Object.create(util$3.EventEmitter.prototype)).constructor=Service$1;function Service$1(et,_e,tt){if(typeof et!="function")throw TypeError("rpcImpl must be a function");util$3.EventEmitter.call(this),this.rpcImpl=et,this.requestDelimited=!!_e,this.responseDelimited=!!tt}Service$1.prototype.rpcCall=function et(_e,tt,nt,rt,it){if(!rt)throw TypeError("request must be specified");var ot=this;if(!it)return util$3.asPromise(et,ot,_e,tt,nt,rt);if(!ot.rpcImpl){setTimeout(function(){it(Error("already ended"))},0);return}try{return ot.rpcImpl(_e,tt[ot.requestDelimited?"encodeDelimited":"encode"](rt).finish(),function(at,lt){if(at)return ot.emit("error",at,_e),it(at);if(lt===null){ot.end(!0);return}if(!(lt instanceof nt))try{lt=nt[ot.responseDelimited?"decodeDelimited":"decode"](lt)}catch(ct){return ot.emit("error",ct,_e),it(ct)}return ot.emit("data",lt,_e),it(null,lt)})}catch(st){ot.emit("error",st,_e),setTimeout(function(){it(st)},0);return}};Service$1.prototype.end=function et(_e){return this.rpcImpl&&(_e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(et){var _e=et;_e.Service=service$1})(rpc);var roots={};(function(et){var _e=et;_e.build="minimal",_e.Writer=writer,_e.BufferWriter=writer_buffer,_e.Reader=reader,_e.BufferReader=reader_buffer,_e.util=requireMinimal(),_e.rpc=rpc,_e.roots=roots,_e.configure=tt;function tt(){_e.util._configure(),_e.Writer._configure(_e.BufferWriter),_e.Reader._configure(_e.BufferReader)}tt()})(indexMinimal);var util$2={exports:{}},codegen_1=codegen;function codegen(et,_e){typeof et=="string"&&(_e=et,et=void 0);var tt=[];function nt(it){if(typeof it!="string"){var ot=rt();if(codegen.verbose&&console.log("codegen: "+ot),ot="return "+ot,it){for(var st=Object.keys(it),at=new Array(st.length+1),lt=new Array(st.length),ct=0;ct<st.length;)at[ct]=st[ct],lt[ct]=it[st[ct++]];return at[ct]=ot,Function.apply(null,at).apply(null,lt)}return Function(ot)()}for(var ut=new Array(arguments.length-1),dt=0;dt<ut.length;)ut[dt]=arguments[++dt];if(dt=0,it=it.replace(/%([%dfijs])/g,function(pt,mt){var xt=ut[dt++];switch(mt){case"d":case"f":return String(Number(xt));case"i":return String(Math.floor(xt));case"j":return JSON.stringify(xt);case"s":return String(xt)}return"%"}),dt!==ut.length)throw Error("parameter count mismatch");return tt.push(it),nt}function rt(it){return"function "+(it||_e||"")+"("+(et&&et.join(",")||"")+`){
  `+tt.join(`
  `)+`
}`}return nt.toString=rt,nt}codegen.verbose=!1;var fetch_1=fetch$1,asPromise=aspromise,inquire=inquire_1,fs=inquire("fs");function fetch$1(et,_e,tt){return typeof _e=="function"?(tt=_e,_e={}):_e||(_e={}),tt?!_e.xhr&&fs&&fs.readFile?fs.readFile(et,function(rt,it){return rt&&typeof XMLHttpRequest<"u"?fetch$1.xhr(et,_e,tt):rt?tt(rt):tt(null,_e.binary?it:it.toString("utf8"))}):fetch$1.xhr(et,_e,tt):asPromise(fetch$1,this,et,_e)}fetch$1.xhr=function et(_e,tt,nt){var rt=new XMLHttpRequest;rt.onreadystatechange=function(){if(rt.readyState===4){if(rt.status!==0&&rt.status!==200)return nt(Error("status "+rt.status));if(tt.binary){var ot=rt.response;if(!ot){ot=[];for(var st=0;st<rt.responseText.length;++st)ot.push(rt.responseText.charCodeAt(st)&255)}return nt(null,typeof Uint8Array<"u"?new Uint8Array(ot):ot)}return nt(null,rt.responseText)}},tt.binary&&("overrideMimeType"in rt&&rt.overrideMimeType("text/plain; charset=x-user-defined"),rt.responseType="arraybuffer"),rt.open("GET",_e),rt.send()};var path={};(function(et){var _e=et,tt=_e.isAbsolute=function(it){return/^(?:\/|\w+:)/.test(it)},nt=_e.normalize=function(it){it=it.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var ot=it.split("/"),st=tt(it),at="";st&&(at=ot.shift()+"/");for(var lt=0;lt<ot.length;)ot[lt]===".."?lt>0&&ot[lt-1]!==".."?ot.splice(--lt,2):st?ot.splice(lt,1):++lt:ot[lt]==="."?ot.splice(lt,1):++lt;return at+ot.join("/")};_e.resolve=function(it,ot,st){return st||(ot=nt(ot)),tt(ot)?ot:(st||(it=nt(it)),(it=it.replace(/(?:\/|^)[^/]+$/,"")).length?nt(it+"/"+ot):ot)}})(path);var types$1={},hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(et){var _e=et,tt=requireUtil(),nt=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function rt(it,ot){var st=0,at={};for(ot|=0;st<it.length;)at[nt[st+ot]]=it[st++];return at}_e.basic=rt([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),_e.defaults=rt([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",tt.emptyArray,null]),_e.long=rt([0,0,0,1,1],7),_e.mapKey=rt([0,0,0,5,5,0,0,0,1,1,0,2],2),_e.packed=rt([1,5,0,0,0,5,5,0,0,0,1,1,0])}(types$1)),types$1}var field,hasRequiredField;function requireField(){if(hasRequiredField)return field;hasRequiredField=1,field=ot;var et=requireObject();((ot.prototype=Object.create(et.prototype)).constructor=ot).className="Field";var _e=require_enum(),tt=requireTypes(),nt=requireUtil(),rt,it=/^required|optional|repeated$/;ot.fromJSON=function(at,lt){return new ot(at,lt.id,lt.type,lt.rule,lt.extend,lt.options,lt.comment)};function ot(st,at,lt,ct,ut,dt,ft){if(nt.isObject(ct)?(ft=ut,dt=ct,ct=ut=void 0):nt.isObject(ut)&&(ft=dt,dt=ut,ut=void 0),et.call(this,st,dt),!nt.isInteger(at)||at<0)throw TypeError("id must be a non-negative integer");if(!nt.isString(lt))throw TypeError("type must be a string");if(ct!==void 0&&!it.test(ct=ct.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(ut!==void 0&&!nt.isString(ut))throw TypeError("extend must be a string");ct==="proto3_optional"&&(ct="optional"),this.rule=ct&&ct!=="optional"?ct:void 0,this.type=lt,this.id=at,this.extend=ut||void 0,this.required=ct==="required",this.optional=!this.required,this.repeated=ct==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=nt.Long?tt.long[lt]!==void 0:!1,this.bytes=lt==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=ft}return Object.defineProperty(ot.prototype,"packed",{get:function(){return this._packed===null&&(this._packed=this.getOption("packed")!==!1),this._packed}}),ot.prototype.setOption=function(at,lt,ct){return at==="packed"&&(this._packed=null),et.prototype.setOption.call(this,at,lt,ct)},ot.prototype.toJSON=function(at){var lt=at?!!at.keepComments:!1;return nt.toObject(["rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",lt?this.comment:void 0])},ot.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=tt.defaults[this.type])===void 0?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof rt?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof _e&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&((this.options.packed===!0||this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof _e))&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=nt.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var at;nt.base64.test(this.typeDefault)?nt.base64.decode(this.typeDefault,at=nt.newBuffer(nt.base64.length(this.typeDefault)),0):nt.utf8.write(this.typeDefault,at=nt.newBuffer(nt.utf8.length(this.typeDefault)),0),this.typeDefault=at}return this.map?this.defaultValue=nt.emptyObject:this.repeated?this.defaultValue=nt.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof rt&&(this.parent.ctor.prototype[this.name]=this.defaultValue),et.prototype.resolve.call(this)},ot.d=function(at,lt,ct,ut){return typeof lt=="function"?lt=nt.decorateType(lt).name:lt&&typeof lt=="object"&&(lt=nt.decorateEnum(lt).name),function(ft,pt){nt.decorateType(ft.constructor).add(new ot(pt,at,lt,ct,{default:ut}))}},ot._configure=function(at){rt=at},field}var oneof,hasRequiredOneof;function requireOneof(){if(hasRequiredOneof)return oneof;hasRequiredOneof=1,oneof=nt;var et=requireObject();((nt.prototype=Object.create(et.prototype)).constructor=nt).className="OneOf";var _e=requireField(),tt=requireUtil();function nt(it,ot,st,at){if(Array.isArray(ot)||(st=ot,ot=void 0),et.call(this,it,st),!(ot===void 0||Array.isArray(ot)))throw TypeError("fieldNames must be an Array");this.oneof=ot||[],this.fieldsArray=[],this.comment=at}nt.fromJSON=function(ot,st){return new nt(ot,st.oneof,st.options,st.comment)},nt.prototype.toJSON=function(ot){var st=ot?!!ot.keepComments:!1;return tt.toObject(["options",this.options,"oneof",this.oneof,"comment",st?this.comment:void 0])};function rt(it){if(it.parent)for(var ot=0;ot<it.fieldsArray.length;++ot)it.fieldsArray[ot].parent||it.parent.add(it.fieldsArray[ot])}return nt.prototype.add=function(ot){if(!(ot instanceof _e))throw TypeError("field must be a Field");return ot.parent&&ot.parent!==this.parent&&ot.parent.remove(ot),this.oneof.push(ot.name),this.fieldsArray.push(ot),ot.partOf=this,rt(this),this},nt.prototype.remove=function(ot){if(!(ot instanceof _e))throw TypeError("field must be a Field");var st=this.fieldsArray.indexOf(ot);if(st<0)throw Error(ot+" is not a member of "+this);return this.fieldsArray.splice(st,1),st=this.oneof.indexOf(ot.name),st>-1&&this.oneof.splice(st,1),ot.partOf=null,this},nt.prototype.onAdd=function(ot){et.prototype.onAdd.call(this,ot);for(var st=this,at=0;at<this.oneof.length;++at){var lt=ot.get(this.oneof[at]);lt&&!lt.partOf&&(lt.partOf=st,st.fieldsArray.push(lt))}rt(this)},nt.prototype.onRemove=function(ot){for(var st=0,at;st<this.fieldsArray.length;++st)(at=this.fieldsArray[st]).parent&&at.parent.remove(at);et.prototype.onRemove.call(this,ot)},nt.d=function(){for(var ot=new Array(arguments.length),st=0;st<arguments.length;)ot[st]=arguments[st++];return function(lt,ct){tt.decorateType(lt.constructor).add(new nt(ct,ot)),Object.defineProperty(lt,ct,{get:tt.oneOfGetter(ot),set:tt.oneOfSetter(ot)})}},oneof}var namespace,hasRequiredNamespace;function requireNamespace(){if(hasRequiredNamespace)return namespace;hasRequiredNamespace=1,namespace=at;var et=requireObject();((at.prototype=Object.create(et.prototype)).constructor=at).className="Namespace";var _e=requireField(),tt=requireUtil(),nt=requireOneof(),rt,it,ot;at.fromJSON=function(ut,dt){return new at(ut,dt.options).addJSON(dt.nested)};function st(ct,ut){if(ct&&ct.length){for(var dt={},ft=0;ft<ct.length;++ft)dt[ct[ft].name]=ct[ft].toJSON(ut);return dt}}at.arrayToJSON=st,at.isReservedId=function(ut,dt){if(ut){for(var ft=0;ft<ut.length;++ft)if(typeof ut[ft]!="string"&&ut[ft][0]<=dt&&ut[ft][1]>dt)return!0}return!1},at.isReservedName=function(ut,dt){if(ut){for(var ft=0;ft<ut.length;++ft)if(ut[ft]===dt)return!0}return!1};function at(ct,ut){et.call(this,ct,ut),this.nested=void 0,this._nestedArray=null}function lt(ct){return ct._nestedArray=null,ct}return Object.defineProperty(at.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=tt.toArray(this.nested))}}),at.prototype.toJSON=function(ut){return tt.toObject(["options",this.options,"nested",st(this.nestedArray,ut)])},at.prototype.addJSON=function(ut){var dt=this;if(ut)for(var ft=Object.keys(ut),pt=0,mt;pt<ft.length;++pt)mt=ut[ft[pt]],dt.add((mt.fields!==void 0?rt.fromJSON:mt.values!==void 0?ot.fromJSON:mt.methods!==void 0?it.fromJSON:mt.id!==void 0?_e.fromJSON:at.fromJSON)(ft[pt],mt));return this},at.prototype.get=function(ut){return this.nested&&this.nested[ut]||null},at.prototype.getEnum=function(ut){if(this.nested&&this.nested[ut]instanceof ot)return this.nested[ut].values;throw Error("no such enum: "+ut)},at.prototype.add=function(ut){if(!(ut instanceof _e&&ut.extend!==void 0||ut instanceof rt||ut instanceof nt||ut instanceof ot||ut instanceof it||ut instanceof at))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var dt=this.get(ut.name);if(dt)if(dt instanceof at&&ut instanceof at&&!(dt instanceof rt||dt instanceof it)){for(var ft=dt.nestedArray,pt=0;pt<ft.length;++pt)ut.add(ft[pt]);this.remove(dt),this.nested||(this.nested={}),ut.setOptions(dt.options,!0)}else throw Error("duplicate name '"+ut.name+"' in "+this)}return this.nested[ut.name]=ut,ut.onAdd(this),lt(this)},at.prototype.remove=function(ut){if(!(ut instanceof et))throw TypeError("object must be a ReflectionObject");if(ut.parent!==this)throw Error(ut+" is not a member of "+this);return delete this.nested[ut.name],Object.keys(this.nested).length||(this.nested=void 0),ut.onRemove(this),lt(this)},at.prototype.define=function(ut,dt){if(tt.isString(ut))ut=ut.split(".");else if(!Array.isArray(ut))throw TypeError("illegal path");if(ut&&ut.length&&ut[0]==="")throw Error("path must be relative");for(var ft=this;ut.length>0;){var pt=ut.shift();if(ft.nested&&ft.nested[pt]){if(ft=ft.nested[pt],!(ft instanceof at))throw Error("path conflicts with non-namespace objects")}else ft.add(ft=new at(pt))}return dt&&ft.addJSON(dt),ft},at.prototype.resolveAll=function(){for(var ut=this.nestedArray,dt=0;dt<ut.length;)ut[dt]instanceof at?ut[dt++].resolveAll():ut[dt++].resolve();return this.resolve()},at.prototype.lookup=function(ut,dt,ft){if(typeof dt=="boolean"?(ft=dt,dt=void 0):dt&&!Array.isArray(dt)&&(dt=[dt]),tt.isString(ut)&&ut.length){if(ut===".")return this.root;ut=ut.split(".")}else if(!ut.length)return this;if(ut[0]==="")return this.root.lookup(ut.slice(1),dt);var pt=this.get(ut[0]);if(pt){if(ut.length===1){if(!dt||dt.indexOf(pt.constructor)>-1)return pt}else if(pt instanceof at&&(pt=pt.lookup(ut.slice(1),dt,!0)))return pt}else for(var mt=0;mt<this.nestedArray.length;++mt)if(this._nestedArray[mt]instanceof at&&(pt=this._nestedArray[mt].lookup(ut,dt,!0)))return pt;return this.parent===null||ft?null:this.parent.lookup(ut,dt)},at.prototype.lookupType=function(ut){var dt=this.lookup(ut,[rt]);if(!dt)throw Error("no such type: "+ut);return dt},at.prototype.lookupEnum=function(ut){var dt=this.lookup(ut,[ot]);if(!dt)throw Error("no such Enum '"+ut+"' in "+this);return dt},at.prototype.lookupTypeOrEnum=function(ut){var dt=this.lookup(ut,[rt,ot]);if(!dt)throw Error("no such Type or Enum '"+ut+"' in "+this);return dt},at.prototype.lookupService=function(ut){var dt=this.lookup(ut,[it]);if(!dt)throw Error("no such Service '"+ut+"' in "+this);return dt},at._configure=function(ct,ut,dt){rt=ct,it=ut,ot=dt},namespace}var mapfield,hasRequiredMapfield;function requireMapfield(){if(hasRequiredMapfield)return mapfield;hasRequiredMapfield=1,mapfield=nt;var et=requireField();((nt.prototype=Object.create(et.prototype)).constructor=nt).className="MapField";var _e=requireTypes(),tt=requireUtil();function nt(rt,it,ot,st,at,lt){if(et.call(this,rt,it,st,void 0,void 0,at,lt),!tt.isString(ot))throw TypeError("keyType must be a string");this.keyType=ot,this.resolvedKeyType=null,this.map=!0}return nt.fromJSON=function(it,ot){return new nt(it,ot.id,ot.keyType,ot.type,ot.options,ot.comment)},nt.prototype.toJSON=function(it){var ot=it?!!it.keepComments:!1;return tt.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",ot?this.comment:void 0])},nt.prototype.resolve=function(){if(this.resolved)return this;if(_e.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return et.prototype.resolve.call(this)},nt.d=function(it,ot,st){return typeof st=="function"?st=tt.decorateType(st).name:st&&typeof st=="object"&&(st=tt.decorateEnum(st).name),function(lt,ct){tt.decorateType(lt.constructor).add(new nt(ct,it,ot,st))}},mapfield}var method,hasRequiredMethod;function requireMethod(){if(hasRequiredMethod)return method;hasRequiredMethod=1,method=tt;var et=requireObject();((tt.prototype=Object.create(et.prototype)).constructor=tt).className="Method";var _e=requireUtil();function tt(nt,rt,it,ot,st,at,lt,ct,ut){if(_e.isObject(st)?(lt=st,st=at=void 0):_e.isObject(at)&&(lt=at,at=void 0),!(rt===void 0||_e.isString(rt)))throw TypeError("type must be a string");if(!_e.isString(it))throw TypeError("requestType must be a string");if(!_e.isString(ot))throw TypeError("responseType must be a string");et.call(this,nt,lt),this.type=rt||"rpc",this.requestType=it,this.requestStream=st?!0:void 0,this.responseType=ot,this.responseStream=at?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=ct,this.parsedOptions=ut}return tt.fromJSON=function(rt,it){return new tt(rt,it.type,it.requestType,it.responseType,it.requestStream,it.responseStream,it.options,it.comment,it.parsedOptions)},tt.prototype.toJSON=function(rt){var it=rt?!!rt.keepComments:!1;return _e.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",it?this.comment:void 0,"parsedOptions",this.parsedOptions])},tt.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),et.prototype.resolve.call(this))},method}var service,hasRequiredService;function requireService(){if(hasRequiredService)return service;hasRequiredService=1,service=rt;var et=requireNamespace();((rt.prototype=Object.create(et.prototype)).constructor=rt).className="Service";var _e=requireMethod(),tt=requireUtil(),nt=rpc;function rt(ot,st){et.call(this,ot,st),this.methods={},this._methodsArray=null}rt.fromJSON=function(st,at){var lt=new rt(st,at.options);if(at.methods)for(var ct=Object.keys(at.methods),ut=0;ut<ct.length;++ut)lt.add(_e.fromJSON(ct[ut],at.methods[ct[ut]]));return at.nested&&lt.addJSON(at.nested),lt.comment=at.comment,lt},rt.prototype.toJSON=function(st){var at=et.prototype.toJSON.call(this,st),lt=st?!!st.keepComments:!1;return tt.toObject(["options",at&&at.options||void 0,"methods",et.arrayToJSON(this.methodsArray,st)||{},"nested",at&&at.nested||void 0,"comment",lt?this.comment:void 0])},Object.defineProperty(rt.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=tt.toArray(this.methods))}});function it(ot){return ot._methodsArray=null,ot}return rt.prototype.get=function(st){return this.methods[st]||et.prototype.get.call(this,st)},rt.prototype.resolveAll=function(){for(var st=this.methodsArray,at=0;at<st.length;++at)st[at].resolve();return et.prototype.resolve.call(this)},rt.prototype.add=function(st){if(this.get(st.name))throw Error("duplicate name '"+st.name+"' in "+this);return st instanceof _e?(this.methods[st.name]=st,st.parent=this,it(this)):et.prototype.add.call(this,st)},rt.prototype.remove=function(st){if(st instanceof _e){if(this.methods[st.name]!==st)throw Error(st+" is not a member of "+this);return delete this.methods[st.name],st.parent=null,it(this)}return et.prototype.remove.call(this,st)},rt.prototype.create=function(st,at,lt){for(var ct=new nt.Service(st,at,lt),ut=0,dt;ut<this.methodsArray.length;++ut){var ft=tt.lcFirst((dt=this._methodsArray[ut]).resolve().name).replace(/[^$\w_]/g,"");ct[ft]=tt.codegen(["r","c"],tt.isReserved(ft)?ft+"_":ft)("return this.rpcCall(m,q,s,r,c)")({m:dt,q:dt.resolvedRequestType.ctor,s:dt.resolvedResponseType.ctor})}return ct},service}var message=Message,util$1=requireMinimal();function Message(et){if(et)for(var _e=Object.keys(et),tt=0;tt<_e.length;++tt)this[_e[tt]]=et[_e[tt]]}Message.create=function et(_e){return this.$type.create(_e)};Message.encode=function et(_e,tt){return this.$type.encode(_e,tt)};Message.encodeDelimited=function et(_e,tt){return this.$type.encodeDelimited(_e,tt)};Message.decode=function et(_e){return this.$type.decode(_e)};Message.decodeDelimited=function et(_e){return this.$type.decodeDelimited(_e)};Message.verify=function et(_e){return this.$type.verify(_e)};Message.fromObject=function et(_e){return this.$type.fromObject(_e)};Message.toObject=function et(_e,tt){return this.$type.toObject(_e,tt)};Message.prototype.toJSON=function et(){return this.$type.toObject(this,util$1.toJSONOptions)};var decoder_1,hasRequiredDecoder;function requireDecoder(){if(hasRequiredDecoder)return decoder_1;hasRequiredDecoder=1,decoder_1=rt;var et=require_enum(),_e=requireTypes(),tt=requireUtil();function nt(it){return"missing required '"+it.name+"'"}function rt(it){var ot=tt.codegen(["r","l"],it.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(it.fieldsArray.filter(function(dt){return dt.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");it.group&&ot("if((t&7)===4)")("break"),ot("switch(t>>>3){");for(var st=0;st<it.fieldsArray.length;++st){var at=it._fieldsArray[st].resolve(),lt=at.resolvedType instanceof et?"int32":at.type,ct="m"+tt.safeProp(at.name);ot("case %i: {",at.id),at.map?(ot("if(%s===util.emptyObject)",ct)("%s={}",ct)("var c2 = r.uint32()+r.pos"),_e.defaults[at.keyType]!==void 0?ot("k=%j",_e.defaults[at.keyType]):ot("k=null"),_e.defaults[lt]!==void 0?ot("value=%j",_e.defaults[lt]):ot("value=null"),ot("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",at.keyType)("case 2:"),_e.basic[lt]===void 0?ot("value=types[%i].decode(r,r.uint32())",st):ot("value=r.%s()",lt),ot("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),_e.long[at.keyType]!==void 0?ot('%s[typeof k==="object"?util.longToHash(k):k]=value',ct):ot("%s[k]=value",ct)):at.repeated?(ot("if(!(%s&&%s.length))",ct,ct)("%s=[]",ct),_e.packed[lt]!==void 0&&ot("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",ct,lt)("}else"),_e.basic[lt]===void 0?ot(at.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",ct,st):ot("%s.push(r.%s())",ct,lt)):_e.basic[lt]===void 0?ot(at.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",ct,st):ot("%s=r.%s()",ct,lt),ot("break")("}")}for(ot("default:")("r.skipType(t&7)")("break")("}")("}"),st=0;st<it._fieldsArray.length;++st){var ut=it._fieldsArray[st];ut.required&&ot("if(!m.hasOwnProperty(%j))",ut.name)("throw util.ProtocolError(%j,{instance:m})",nt(ut))}return ot("return m")}return decoder_1}var verifier_1,hasRequiredVerifier;function requireVerifier(){if(hasRequiredVerifier)return verifier_1;hasRequiredVerifier=1,verifier_1=it;var et=require_enum(),_e=requireUtil();function tt(ot,st){return ot.name+": "+st+(ot.repeated&&st!=="array"?"[]":ot.map&&st!=="object"?"{k:"+ot.keyType+"}":"")+" expected"}function nt(ot,st,at,lt){if(st.resolvedType)if(st.resolvedType instanceof et){ot("switch(%s){",lt)("default:")("return%j",tt(st,"enum value"));for(var ct=Object.keys(st.resolvedType.values),ut=0;ut<ct.length;++ut)ot("case %i:",st.resolvedType.values[ct[ut]]);ot("break")("}")}else ot("{")("var e=types[%i].verify(%s);",at,lt)("if(e)")("return%j+e",st.name+".")("}");else switch(st.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":ot("if(!util.isInteger(%s))",lt)("return%j",tt(st,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":ot("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",lt,lt,lt,lt)("return%j",tt(st,"integer|Long"));break;case"float":case"double":ot('if(typeof %s!=="number")',lt)("return%j",tt(st,"number"));break;case"bool":ot('if(typeof %s!=="boolean")',lt)("return%j",tt(st,"boolean"));break;case"string":ot("if(!util.isString(%s))",lt)("return%j",tt(st,"string"));break;case"bytes":ot('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',lt,lt,lt)("return%j",tt(st,"buffer"));break}return ot}function rt(ot,st,at){switch(st.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":ot("if(!util.key32Re.test(%s))",at)("return%j",tt(st,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":ot("if(!util.key64Re.test(%s))",at)("return%j",tt(st,"integer|Long key"));break;case"bool":ot("if(!util.key2Re.test(%s))",at)("return%j",tt(st,"boolean key"));break}return ot}function it(ot){var st=_e.codegen(["m"],ot.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),at=ot.oneofsArray,lt={};at.length&&st("var p={}");for(var ct=0;ct<ot.fieldsArray.length;++ct){var ut=ot._fieldsArray[ct].resolve(),dt="m"+_e.safeProp(ut.name);if(ut.optional&&st("if(%s!=null&&m.hasOwnProperty(%j)){",dt,ut.name),ut.map)st("if(!util.isObject(%s))",dt)("return%j",tt(ut,"object"))("var k=Object.keys(%s)",dt)("for(var i=0;i<k.length;++i){"),rt(st,ut,"k[i]"),nt(st,ut,ct,dt+"[k[i]]")("}");else if(ut.repeated)st("if(!Array.isArray(%s))",dt)("return%j",tt(ut,"array"))("for(var i=0;i<%s.length;++i){",dt),nt(st,ut,ct,dt+"[i]")("}");else{if(ut.partOf){var ft=_e.safeProp(ut.partOf.name);lt[ut.partOf.name]===1&&st("if(p%s===1)",ft)("return%j",ut.partOf.name+": multiple values"),lt[ut.partOf.name]=1,st("p%s=1",ft)}nt(st,ut,ct,dt)}ut.optional&&st("}")}return st("return null")}return verifier_1}var converter={},hasRequiredConverter;function requireConverter(){return hasRequiredConverter||(hasRequiredConverter=1,function(et){var _e=et,tt=require_enum(),nt=requireUtil();function rt(ot,st,at,lt){var ct=!1;if(st.resolvedType)if(st.resolvedType instanceof tt){ot("switch(d%s){",lt);for(var ut=st.resolvedType.values,dt=Object.keys(ut),ft=0;ft<dt.length;++ft)ut[dt[ft]]===st.typeDefault&&!ct&&(ot("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',lt,lt,lt),st.repeated||ot("break"),ct=!0),ot("case%j:",dt[ft])("case %i:",ut[dt[ft]])("m%s=%j",lt,ut[dt[ft]])("break");ot("}")}else ot('if(typeof d%s!=="object")',lt)("throw TypeError(%j)",st.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",lt,at,lt);else{var pt=!1;switch(st.type){case"double":case"float":ot("m%s=Number(d%s)",lt,lt);break;case"uint32":case"fixed32":ot("m%s=d%s>>>0",lt,lt);break;case"int32":case"sint32":case"sfixed32":ot("m%s=d%s|0",lt,lt);break;case"uint64":pt=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":ot("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",lt,lt,pt)('else if(typeof d%s==="string")',lt)("m%s=parseInt(d%s,10)",lt,lt)('else if(typeof d%s==="number")',lt)("m%s=d%s",lt,lt)('else if(typeof d%s==="object")',lt)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",lt,lt,lt,pt?"true":"");break;case"bytes":ot('if(typeof d%s==="string")',lt)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",lt,lt,lt)("else if(d%s.length >= 0)",lt)("m%s=d%s",lt,lt);break;case"string":ot("m%s=String(d%s)",lt,lt);break;case"bool":ot("m%s=Boolean(d%s)",lt,lt);break}}return ot}_e.fromObject=function(st){var at=st.fieldsArray,lt=nt.codegen(["d"],st.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!at.length)return lt("return new this.ctor");lt("var m=new this.ctor");for(var ct=0;ct<at.length;++ct){var ut=at[ct].resolve(),dt=nt.safeProp(ut.name);ut.map?(lt("if(d%s){",dt)('if(typeof d%s!=="object")',dt)("throw TypeError(%j)",ut.fullName+": object expected")("m%s={}",dt)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",dt),rt(lt,ut,ct,dt+"[ks[i]]")("}")("}")):ut.repeated?(lt("if(d%s){",dt)("if(!Array.isArray(d%s))",dt)("throw TypeError(%j)",ut.fullName+": array expected")("m%s=[]",dt)("for(var i=0;i<d%s.length;++i){",dt),rt(lt,ut,ct,dt+"[i]")("}")("}")):(ut.resolvedType instanceof tt||lt("if(d%s!=null){",dt),rt(lt,ut,ct,dt),ut.resolvedType instanceof tt||lt("}"))}return lt("return m")};function it(ot,st,at,lt){if(st.resolvedType)st.resolvedType instanceof tt?ot("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",lt,at,lt,lt,at,lt,lt):ot("d%s=types[%i].toObject(m%s,o)",lt,at,lt);else{var ct=!1;switch(st.type){case"double":case"float":ot("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",lt,lt,lt,lt);break;case"uint64":ct=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":ot('if(typeof m%s==="number")',lt)("d%s=o.longs===String?String(m%s):m%s",lt,lt,lt)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",lt,lt,lt,lt,ct?"true":"",lt);break;case"bytes":ot("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",lt,lt,lt,lt,lt);break;default:ot("d%s=m%s",lt,lt);break}}return ot}_e.toObject=function(st){var at=st.fieldsArray.slice().sort(nt.compareFieldsById);if(!at.length)return nt.codegen()("return {}");for(var lt=nt.codegen(["m","o"],st.name+"$toObject")("if(!o)")("o={}")("var d={}"),ct=[],ut=[],dt=[],ft=0;ft<at.length;++ft)at[ft].partOf||(at[ft].resolve().repeated?ct:at[ft].map?ut:dt).push(at[ft]);if(ct.length){for(lt("if(o.arrays||o.defaults){"),ft=0;ft<ct.length;++ft)lt("d%s=[]",nt.safeProp(ct[ft].name));lt("}")}if(ut.length){for(lt("if(o.objects||o.defaults){"),ft=0;ft<ut.length;++ft)lt("d%s={}",nt.safeProp(ut[ft].name));lt("}")}if(dt.length){for(lt("if(o.defaults){"),ft=0;ft<dt.length;++ft){var pt=dt[ft],mt=nt.safeProp(pt.name);if(pt.resolvedType instanceof tt)lt("d%s=o.enums===String?%j:%j",mt,pt.resolvedType.valuesById[pt.typeDefault],pt.typeDefault);else if(pt.long)lt("if(util.Long){")("var n=new util.Long(%i,%i,%j)",pt.typeDefault.low,pt.typeDefault.high,pt.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",mt)("}else")("d%s=o.longs===String?%j:%i",mt,pt.typeDefault.toString(),pt.typeDefault.toNumber());else if(pt.bytes){var xt="["+Array.prototype.slice.call(pt.typeDefault).join(",")+"]";lt("if(o.bytes===String)d%s=%j",mt,String.fromCharCode.apply(String,pt.typeDefault))("else{")("d%s=%s",mt,xt)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",mt,mt)("}")}else lt("d%s=%j",mt,pt.typeDefault)}lt("}")}var gt=!1;for(ft=0;ft<at.length;++ft){var pt=at[ft],ht=st._fieldsArray.indexOf(pt),mt=nt.safeProp(pt.name);pt.map?(gt||(gt=!0,lt("var ks2")),lt("if(m%s&&(ks2=Object.keys(m%s)).length){",mt,mt)("d%s={}",mt)("for(var j=0;j<ks2.length;++j){"),it(lt,pt,ht,mt+"[ks2[j]]")("}")):pt.repeated?(lt("if(m%s&&m%s.length){",mt,mt)("d%s=[]",mt)("for(var j=0;j<m%s.length;++j){",mt),it(lt,pt,ht,mt+"[j]")("}")):(lt("if(m%s!=null&&m.hasOwnProperty(%j)){",mt,pt.name),it(lt,pt,ht,mt),pt.partOf&&lt("if(o.oneofs)")("d%s=%j",nt.safeProp(pt.partOf.name),pt.name)),lt("}")}return lt("return d")}}(converter)),converter}var wrappers={};(function(et){var _e=et,tt=message;_e[".google.protobuf.Any"]={fromObject:function(nt){if(nt&&nt["@type"]){var rt=nt["@type"].substring(nt["@type"].lastIndexOf("/")+1),it=this.lookup(rt);if(it){var ot=nt["@type"].charAt(0)==="."?nt["@type"].slice(1):nt["@type"];return ot.indexOf("/")===-1&&(ot="/"+ot),this.create({type_url:ot,value:it.encode(it.fromObject(nt)).finish()})}}return this.fromObject(nt)},toObject:function(nt,rt){var it="type.googleapis.com/",ot="",st="";if(rt&&rt.json&&nt.type_url&&nt.value){st=nt.type_url.substring(nt.type_url.lastIndexOf("/")+1),ot=nt.type_url.substring(0,nt.type_url.lastIndexOf("/")+1);var at=this.lookup(st);at&&(nt=at.decode(nt.value))}if(!(nt instanceof this.ctor)&&nt instanceof tt){var lt=nt.$type.toObject(nt,rt),ct=nt.$type.fullName[0]==="."?nt.$type.fullName.slice(1):nt.$type.fullName;return ot===""&&(ot=it),st=ot+ct,lt["@type"]=st,lt}return this.toObject(nt,rt)}}})(wrappers);var type$1,hasRequiredType;function requireType(){if(hasRequiredType)return type$1;hasRequiredType=1,type$1=mt;var et=requireNamespace();((mt.prototype=Object.create(et.prototype)).constructor=mt).className="Type";var _e=require_enum(),tt=requireOneof(),nt=requireField(),rt=requireMapfield(),it=requireService(),ot=message,st=reader,at=writer,lt=requireUtil(),ct=requireEncoder(),ut=requireDecoder(),dt=requireVerifier(),ft=requireConverter(),pt=wrappers;function mt(gt,ht){et.call(this,gt,ht),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(mt.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var gt=Object.keys(this.fields),ht=0;ht<gt.length;++ht){var yt=this.fields[gt[ht]],vt=yt.id;if(this._fieldsById[vt])throw Error("duplicate id "+vt+" in "+this);this._fieldsById[vt]=yt}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=lt.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=lt.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=mt.generateConstructor(this)())},set:function(gt){var ht=gt.prototype;ht instanceof ot||((gt.prototype=new ot).constructor=gt,lt.merge(gt.prototype,ht)),gt.$type=gt.prototype.$type=this,lt.merge(gt,ot,!0),this._ctor=gt;for(var yt=0;yt<this.fieldsArray.length;++yt)this._fieldsArray[yt].resolve();var vt={};for(yt=0;yt<this.oneofsArray.length;++yt)vt[this._oneofsArray[yt].resolve().name]={get:lt.oneOfGetter(this._oneofsArray[yt].oneof),set:lt.oneOfSetter(this._oneofsArray[yt].oneof)};yt&&Object.defineProperties(gt.prototype,vt)}}}),mt.generateConstructor=function(ht){for(var yt=lt.codegen(["p"],ht.name),vt=0,_t;vt<ht.fieldsArray.length;++vt)(_t=ht._fieldsArray[vt]).map?yt("this%s={}",lt.safeProp(_t.name)):_t.repeated&&yt("this%s=[]",lt.safeProp(_t.name));return yt("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function xt(gt){return gt._fieldsById=gt._fieldsArray=gt._oneofsArray=null,delete gt.encode,delete gt.decode,delete gt.verify,gt}return mt.fromJSON=function(ht,yt){var vt=new mt(ht,yt.options);vt.extensions=yt.extensions,vt.reserved=yt.reserved;for(var _t=Object.keys(yt.fields),Et=0;Et<_t.length;++Et)vt.add((typeof yt.fields[_t[Et]].keyType<"u"?rt.fromJSON:nt.fromJSON)(_t[Et],yt.fields[_t[Et]]));if(yt.oneofs)for(_t=Object.keys(yt.oneofs),Et=0;Et<_t.length;++Et)vt.add(tt.fromJSON(_t[Et],yt.oneofs[_t[Et]]));if(yt.nested)for(_t=Object.keys(yt.nested),Et=0;Et<_t.length;++Et){var bt=yt.nested[_t[Et]];vt.add((bt.id!==void 0?nt.fromJSON:bt.fields!==void 0?mt.fromJSON:bt.values!==void 0?_e.fromJSON:bt.methods!==void 0?it.fromJSON:et.fromJSON)(_t[Et],bt))}return yt.extensions&&yt.extensions.length&&(vt.extensions=yt.extensions),yt.reserved&&yt.reserved.length&&(vt.reserved=yt.reserved),yt.group&&(vt.group=!0),yt.comment&&(vt.comment=yt.comment),vt},mt.prototype.toJSON=function(ht){var yt=et.prototype.toJSON.call(this,ht),vt=ht?!!ht.keepComments:!1;return lt.toObject(["options",yt&&yt.options||void 0,"oneofs",et.arrayToJSON(this.oneofsArray,ht),"fields",et.arrayToJSON(this.fieldsArray.filter(function(_t){return!_t.declaringField}),ht)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",yt&&yt.nested||void 0,"comment",vt?this.comment:void 0])},mt.prototype.resolveAll=function(){for(var ht=this.fieldsArray,yt=0;yt<ht.length;)ht[yt++].resolve();var vt=this.oneofsArray;for(yt=0;yt<vt.length;)vt[yt++].resolve();return et.prototype.resolveAll.call(this)},mt.prototype.get=function(ht){return this.fields[ht]||this.oneofs&&this.oneofs[ht]||this.nested&&this.nested[ht]||null},mt.prototype.add=function(ht){if(this.get(ht.name))throw Error("duplicate name '"+ht.name+"' in "+this);if(ht instanceof nt&&ht.extend===void 0){if(this._fieldsById?this._fieldsById[ht.id]:this.fieldsById[ht.id])throw Error("duplicate id "+ht.id+" in "+this);if(this.isReservedId(ht.id))throw Error("id "+ht.id+" is reserved in "+this);if(this.isReservedName(ht.name))throw Error("name '"+ht.name+"' is reserved in "+this);return ht.parent&&ht.parent.remove(ht),this.fields[ht.name]=ht,ht.message=this,ht.onAdd(this),xt(this)}return ht instanceof tt?(this.oneofs||(this.oneofs={}),this.oneofs[ht.name]=ht,ht.onAdd(this),xt(this)):et.prototype.add.call(this,ht)},mt.prototype.remove=function(ht){if(ht instanceof nt&&ht.extend===void 0){if(!this.fields||this.fields[ht.name]!==ht)throw Error(ht+" is not a member of "+this);return delete this.fields[ht.name],ht.parent=null,ht.onRemove(this),xt(this)}if(ht instanceof tt){if(!this.oneofs||this.oneofs[ht.name]!==ht)throw Error(ht+" is not a member of "+this);return delete this.oneofs[ht.name],ht.parent=null,ht.onRemove(this),xt(this)}return et.prototype.remove.call(this,ht)},mt.prototype.isReservedId=function(ht){return et.isReservedId(this.reserved,ht)},mt.prototype.isReservedName=function(ht){return et.isReservedName(this.reserved,ht)},mt.prototype.create=function(ht){return new this.ctor(ht)},mt.prototype.setup=function(){for(var ht=this.fullName,yt=[],vt=0;vt<this.fieldsArray.length;++vt)yt.push(this._fieldsArray[vt].resolve().resolvedType);this.encode=ct(this)({Writer:at,types:yt,util:lt}),this.decode=ut(this)({Reader:st,types:yt,util:lt}),this.verify=dt(this)({types:yt,util:lt}),this.fromObject=ft.fromObject(this)({types:yt,util:lt}),this.toObject=ft.toObject(this)({types:yt,util:lt});var _t=pt[ht];if(_t){var Et=Object.create(this);Et.fromObject=this.fromObject,this.fromObject=_t.fromObject.bind(Et),Et.toObject=this.toObject,this.toObject=_t.toObject.bind(Et)}return this},mt.prototype.encode=function(ht,yt){return this.setup().encode(ht,yt)},mt.prototype.encodeDelimited=function(ht,yt){return this.encode(ht,yt&&yt.len?yt.fork():yt).ldelim()},mt.prototype.decode=function(ht,yt){return this.setup().decode(ht,yt)},mt.prototype.decodeDelimited=function(ht){return ht instanceof st||(ht=st.create(ht)),this.decode(ht,ht.uint32())},mt.prototype.verify=function(ht){return this.setup().verify(ht)},mt.prototype.fromObject=function(ht){return this.setup().fromObject(ht)},mt.prototype.toObject=function(ht,yt){return this.setup().toObject(ht,yt)},mt.d=function(ht){return function(vt){lt.decorateType(vt,ht)}},type$1}var root$5,hasRequiredRoot;function requireRoot(){if(hasRequiredRoot)return root$5;hasRequiredRoot=1,root$5=at;var et=requireNamespace();((at.prototype=Object.create(et.prototype)).constructor=at).className="Root";var _e=requireField(),tt=require_enum(),nt=requireOneof(),rt=requireUtil(),it,ot,st;function at(dt){et.call(this,"",dt),this.deferred=[],this.files=[]}at.fromJSON=function(ft,pt){return pt||(pt=new at),ft.options&&pt.setOptions(ft.options),pt.addJSON(ft.nested)},at.prototype.resolvePath=rt.path.resolve,at.prototype.fetch=rt.fetch;function lt(){}at.prototype.load=function dt(ft,pt,mt){typeof pt=="function"&&(mt=pt,pt=void 0);var xt=this;if(!mt)return rt.asPromise(dt,xt,ft,pt);var gt=mt===lt;function ht(wt,Rt){if(mt){var Nt=mt;if(mt=null,gt)throw wt;Nt(wt,Rt)}}function yt(wt){var Rt=wt.lastIndexOf("google/protobuf/");if(Rt>-1){var Nt=wt.substring(Rt);if(Nt in st)return Nt}return null}function vt(wt,Rt){try{if(rt.isString(Rt)&&Rt.charAt(0)==="{"&&(Rt=JSON.parse(Rt)),!rt.isString(Rt))xt.setOptions(Rt.options).addJSON(Rt.nested);else{ot.filename=wt;var Nt=ot(Rt,xt,pt),kt,Pt=0;if(Nt.imports)for(;Pt<Nt.imports.length;++Pt)(kt=yt(Nt.imports[Pt])||xt.resolvePath(wt,Nt.imports[Pt]))&&_t(kt);if(Nt.weakImports)for(Pt=0;Pt<Nt.weakImports.length;++Pt)(kt=yt(Nt.weakImports[Pt])||xt.resolvePath(wt,Nt.weakImports[Pt]))&&_t(kt,!0)}}catch(jt){ht(jt)}!gt&&!Et&&ht(null,xt)}function _t(wt,Rt){if(wt=yt(wt)||wt,!(xt.files.indexOf(wt)>-1)){if(xt.files.push(wt),wt in st){gt?vt(wt,st[wt]):(++Et,setTimeout(function(){--Et,vt(wt,st[wt])}));return}if(gt){var Nt;try{Nt=rt.fs.readFileSync(wt).toString("utf8")}catch(kt){Rt||ht(kt);return}vt(wt,Nt)}else++Et,xt.fetch(wt,function(kt,Pt){if(--Et,!!mt){if(kt){Rt?Et||ht(null,xt):ht(kt);return}vt(wt,Pt)}})}}var Et=0;rt.isString(ft)&&(ft=[ft]);for(var bt=0,St;bt<ft.length;++bt)(St=xt.resolvePath("",ft[bt]))&&_t(St);if(gt)return xt;Et||ht(null,xt)},at.prototype.loadSync=function(ft,pt){if(!rt.isNode)throw Error("not supported");return this.load(ft,pt,lt)},at.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(ft){return"'extend "+ft.extend+"' in "+ft.parent.fullName}).join(", "));return et.prototype.resolveAll.call(this)};var ct=/^[A-Z]/;function ut(dt,ft){var pt=ft.parent.lookup(ft.extend);if(pt){var mt=new _e(ft.fullName,ft.id,ft.type,ft.rule,void 0,ft.options);return pt.get(mt.name)||(mt.declaringField=ft,ft.extensionField=mt,pt.add(mt)),!0}return!1}return at.prototype._handleAdd=function(ft){if(ft instanceof _e)ft.extend!==void 0&&!ft.extensionField&&(ut(this,ft)||this.deferred.push(ft));else if(ft instanceof tt)ct.test(ft.name)&&(ft.parent[ft.name]=ft.values);else if(!(ft instanceof nt)){if(ft instanceof it)for(var pt=0;pt<this.deferred.length;)ut(this,this.deferred[pt])?this.deferred.splice(pt,1):++pt;for(var mt=0;mt<ft.nestedArray.length;++mt)this._handleAdd(ft._nestedArray[mt]);ct.test(ft.name)&&(ft.parent[ft.name]=ft)}},at.prototype._handleRemove=function(ft){if(ft instanceof _e){if(ft.extend!==void 0)if(ft.extensionField)ft.extensionField.parent.remove(ft.extensionField),ft.extensionField=null;else{var pt=this.deferred.indexOf(ft);pt>-1&&this.deferred.splice(pt,1)}}else if(ft instanceof tt)ct.test(ft.name)&&delete ft.parent[ft.name];else if(ft instanceof et){for(var mt=0;mt<ft.nestedArray.length;++mt)this._handleRemove(ft._nestedArray[mt]);ct.test(ft.name)&&delete ft.parent[ft.name]}},at._configure=function(dt,ft,pt){it=dt,ot=ft,st=pt},root$5}var hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util$2.exports;hasRequiredUtil=1;var et=util$2.exports=requireMinimal(),_e=roots,tt,nt;et.codegen=codegen_1,et.fetch=fetch_1,et.path=path,et.fs=et.inquire("fs"),et.toArray=function(lt){if(lt){for(var ct=Object.keys(lt),ut=new Array(ct.length),dt=0;dt<ct.length;)ut[dt]=lt[ct[dt++]];return ut}return[]},et.toObject=function(lt){for(var ct={},ut=0;ut<lt.length;){var dt=lt[ut++],ft=lt[ut++];ft!==void 0&&(ct[dt]=ft)}return ct};var rt=/\\/g,it=/"/g;et.isReserved=function(lt){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(lt)},et.safeProp=function(lt){return!/^[$\w_]+$/.test(lt)||et.isReserved(lt)?'["'+lt.replace(rt,"\\\\").replace(it,'\\"')+'"]':"."+lt},et.ucFirst=function(lt){return lt.charAt(0).toUpperCase()+lt.substring(1)};var ot=/_([a-z])/g;et.camelCase=function(lt){return lt.substring(0,1)+lt.substring(1).replace(ot,function(ct,ut){return ut.toUpperCase()})},et.compareFieldsById=function(lt,ct){return lt.id-ct.id},et.decorateType=function(lt,ct){if(lt.$type)return ct&&lt.$type.name!==ct&&(et.decorateRoot.remove(lt.$type),lt.$type.name=ct,et.decorateRoot.add(lt.$type)),lt.$type;tt||(tt=requireType());var ut=new tt(ct||lt.name);return et.decorateRoot.add(ut),ut.ctor=lt,Object.defineProperty(lt,"$type",{value:ut,enumerable:!1}),Object.defineProperty(lt.prototype,"$type",{value:ut,enumerable:!1}),ut};var st=0;return et.decorateEnum=function(lt){if(lt.$type)return lt.$type;nt||(nt=require_enum());var ct=new nt("Enum"+st++,lt);return et.decorateRoot.add(ct),Object.defineProperty(lt,"$type",{value:ct,enumerable:!1}),ct},et.setProperty=function(lt,ct,ut){function dt(ft,pt,mt){var xt=pt.shift();if(xt==="__proto__"||xt==="prototype")return ft;if(pt.length>0)ft[xt]=dt(ft[xt]||{},pt,mt);else{var gt=ft[xt];gt&&(mt=[].concat(gt).concat(mt)),ft[xt]=mt}return ft}if(typeof lt!="object")throw TypeError("dst must be an object");if(!ct)throw TypeError("path must be specified");return ct=ct.split("."),dt(lt,ct,ut)},Object.defineProperty(et,"decorateRoot",{get:function(){return _e.decorated||(_e.decorated=new(requireRoot()))}}),util$2.exports}var object,hasRequiredObject;function requireObject(){if(hasRequiredObject)return object;hasRequiredObject=1,object=tt,tt.className="ReflectionObject";var et=requireUtil(),_e;function tt(nt,rt){if(!et.isString(nt))throw TypeError("name must be a string");if(rt&&!et.isObject(rt))throw TypeError("options must be an object");this.options=rt,this.parsedOptions=null,this.name=nt,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}return Object.defineProperties(tt.prototype,{root:{get:function(){for(var nt=this;nt.parent!==null;)nt=nt.parent;return nt}},fullName:{get:function(){for(var nt=[this.name],rt=this.parent;rt;)nt.unshift(rt.name),rt=rt.parent;return nt.join(".")}}}),tt.prototype.toJSON=function(){throw Error()},tt.prototype.onAdd=function(rt){this.parent&&this.parent!==rt&&this.parent.remove(this),this.parent=rt,this.resolved=!1;var it=rt.root;it instanceof _e&&it._handleAdd(this)},tt.prototype.onRemove=function(rt){var it=rt.root;it instanceof _e&&it._handleRemove(this),this.parent=null,this.resolved=!1},tt.prototype.resolve=function(){return this.resolved?this:(this.root instanceof _e&&(this.resolved=!0),this)},tt.prototype.getOption=function(rt){if(this.options)return this.options[rt]},tt.prototype.setOption=function(rt,it,ot){return(!ot||!this.options||this.options[rt]===void 0)&&((this.options||(this.options={}))[rt]=it),this},tt.prototype.setParsedOption=function(rt,it,ot){this.parsedOptions||(this.parsedOptions=[]);var st=this.parsedOptions;if(ot){var at=st.find(function(ut){return Object.prototype.hasOwnProperty.call(ut,rt)});if(at){var lt=at[rt];et.setProperty(lt,ot,it)}else at={},at[rt]=et.setProperty({},ot,it),st.push(at)}else{var ct={};ct[rt]=it,st.push(ct)}return this},tt.prototype.setOptions=function(rt,it){if(rt)for(var ot=Object.keys(rt),st=0;st<ot.length;++st)this.setOption(ot[st],rt[ot[st]],it);return this},tt.prototype.toString=function(){var rt=this.constructor.className,it=this.fullName;return it.length?rt+" "+it:rt},tt._configure=function(nt){_e=nt},object}var _enum,hasRequired_enum;function require_enum(){if(hasRequired_enum)return _enum;hasRequired_enum=1,_enum=nt;var et=requireObject();((nt.prototype=Object.create(et.prototype)).constructor=nt).className="Enum";var _e=requireNamespace(),tt=requireUtil();function nt(rt,it,ot,st,at,lt){if(et.call(this,rt,ot),it&&typeof it!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=st,this.comments=at||{},this.valuesOptions=lt,this.reserved=void 0,it)for(var ct=Object.keys(it),ut=0;ut<ct.length;++ut)typeof it[ct[ut]]=="number"&&(this.valuesById[this.values[ct[ut]]=it[ct[ut]]]=ct[ut])}return nt.fromJSON=function(it,ot){var st=new nt(it,ot.values,ot.options,ot.comment,ot.comments);return st.reserved=ot.reserved,st},nt.prototype.toJSON=function(it){var ot=it?!!it.keepComments:!1;return tt.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",ot?this.comment:void 0,"comments",ot?this.comments:void 0])},nt.prototype.add=function(it,ot,st,at){if(!tt.isString(it))throw TypeError("name must be a string");if(!tt.isInteger(ot))throw TypeError("id must be an integer");if(this.values[it]!==void 0)throw Error("duplicate name '"+it+"' in "+this);if(this.isReservedId(ot))throw Error("id "+ot+" is reserved in "+this);if(this.isReservedName(it))throw Error("name '"+it+"' is reserved in "+this);if(this.valuesById[ot]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+ot+" in "+this);this.values[it]=ot}else this.valuesById[this.values[it]=ot]=it;return at&&(this.valuesOptions===void 0&&(this.valuesOptions={}),this.valuesOptions[it]=at||null),this.comments[it]=st||null,this},nt.prototype.remove=function(it){if(!tt.isString(it))throw TypeError("name must be a string");var ot=this.values[it];if(ot==null)throw Error("name '"+it+"' does not exist in "+this);return delete this.valuesById[ot],delete this.values[it],delete this.comments[it],this.valuesOptions&&delete this.valuesOptions[it],this},nt.prototype.isReservedId=function(it){return _e.isReservedId(this.reserved,it)},nt.prototype.isReservedName=function(it){return _e.isReservedName(this.reserved,it)},_enum}var encoder_1,hasRequiredEncoder;function requireEncoder(){if(hasRequiredEncoder)return encoder_1;hasRequiredEncoder=1,encoder_1=rt;var et=require_enum(),_e=requireTypes(),tt=requireUtil();function nt(it,ot,st,at){return ot.resolvedType.group?it("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",st,at,(ot.id<<3|3)>>>0,(ot.id<<3|4)>>>0):it("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",st,at,(ot.id<<3|2)>>>0)}function rt(it){for(var ot=tt.codegen(["m","w"],it.name+"$encode")("if(!w)")("w=Writer.create()"),st,at,lt=it.fieldsArray.slice().sort(tt.compareFieldsById),st=0;st<lt.length;++st){var ct=lt[st].resolve(),ut=it._fieldsArray.indexOf(ct),dt=ct.resolvedType instanceof et?"int32":ct.type,ft=_e.basic[dt];at="m"+tt.safeProp(ct.name),ct.map?(ot("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",at,ct.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",at)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(ct.id<<3|2)>>>0,8|_e.mapKey[ct.keyType],ct.keyType),ft===void 0?ot("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",ut,at):ot(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|ft,dt,at),ot("}")("}")):ct.repeated?(ot("if(%s!=null&&%s.length){",at,at),ct.packed&&_e.packed[dt]!==void 0?ot("w.uint32(%i).fork()",(ct.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",at)("w.%s(%s[i])",dt,at)("w.ldelim()"):(ot("for(var i=0;i<%s.length;++i)",at),ft===void 0?nt(ot,ct,ut,at+"[i]"):ot("w.uint32(%i).%s(%s[i])",(ct.id<<3|ft)>>>0,dt,at)),ot("}")):(ct.optional&&ot("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",at,ct.name),ft===void 0?nt(ot,ct,ut,at):ot("w.uint32(%i).%s(%s)",(ct.id<<3|ft)>>>0,dt,at))}return ot("return w")}return encoder_1}var protobuf$1=indexLight.exports=indexMinimal;protobuf$1.build="light";function load(et,_e,tt){return typeof _e=="function"?(tt=_e,_e=new protobuf$1.Root):_e||(_e=new protobuf$1.Root),_e.load(et,tt)}protobuf$1.load=load;function loadSync(et,_e){return _e||(_e=new protobuf$1.Root),_e.loadSync(et)}protobuf$1.loadSync=loadSync;protobuf$1.encoder=requireEncoder();protobuf$1.decoder=requireDecoder();protobuf$1.verifier=requireVerifier();protobuf$1.converter=requireConverter();protobuf$1.ReflectionObject=requireObject();protobuf$1.Namespace=requireNamespace();protobuf$1.Root=requireRoot();protobuf$1.Enum=require_enum();protobuf$1.Type=requireType();protobuf$1.Field=requireField();protobuf$1.OneOf=requireOneof();protobuf$1.MapField=requireMapfield();protobuf$1.Service=requireService();protobuf$1.Method=requireMethod();protobuf$1.Message=message;protobuf$1.wrappers=wrappers;protobuf$1.types=requireTypes();protobuf$1.util=requireUtil();protobuf$1.ReflectionObject._configure(protobuf$1.Root);protobuf$1.Namespace._configure(protobuf$1.Type,protobuf$1.Service,protobuf$1.Enum);protobuf$1.Root._configure(protobuf$1.Type);protobuf$1.Field._configure(protobuf$1.Type);var indexLightExports=indexLight.exports,tokenize_1=tokenize$1,delimRe=/[\s{}=;:[\],'"()<>]/g,stringDoubleRe=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,stringSingleRe=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,setCommentRe=/^ *[*/]+ */,setCommentAltRe=/^\s*\*?\/*/,setCommentSplitRe=/\n/g,whitespaceRe=/\s/,unescapeRe=/\\(.?)/g,unescapeMap={0:"\0",r:"\r",n:`
`,t:"	"};function unescape(et){return et.replace(unescapeRe,function(_e,tt){switch(tt){case"\\":case"":return tt;default:return unescapeMap[tt]||""}})}tokenize$1.unescape=unescape;function tokenize$1(et,_e){et=et.toString();var tt=0,nt=et.length,rt=1,it=0,ot={},st=[],at=null;function lt(vt){return Error("illegal "+vt+" (line "+rt+")")}function ct(){var vt=at==="'"?stringSingleRe:stringDoubleRe;vt.lastIndex=tt-1;var _t=vt.exec(et);if(!_t)throw lt("string");return tt=vt.lastIndex,xt(at),at=null,unescape(_t[1])}function ut(vt){return et.charAt(vt)}function dt(vt,_t,Et){var bt={type:et.charAt(vt++),lineEmpty:!1,leading:Et},St;_e?St=2:St=3;var wt=vt-St,Rt;do if(--wt<0||(Rt=et.charAt(wt))===`
`){bt.lineEmpty=!0;break}while(Rt===" "||Rt==="	");for(var Nt=et.substring(vt,_t).split(setCommentSplitRe),kt=0;kt<Nt.length;++kt)Nt[kt]=Nt[kt].replace(_e?setCommentAltRe:setCommentRe,"").trim();bt.text=Nt.join(`
`).trim(),ot[rt]=bt,it=rt}function ft(vt){var _t=pt(vt),Et=et.substring(vt,_t),bt=/^\s*\/{1,2}/.test(Et);return bt}function pt(vt){for(var _t=vt;_t<nt&&ut(_t)!==`
`;)_t++;return _t}function mt(){if(st.length>0)return st.shift();if(at)return ct();var vt,_t,Et,bt,St,wt=tt===0;do{if(tt===nt)return null;for(vt=!1;whitespaceRe.test(Et=ut(tt));)if(Et===`
`&&(wt=!0,++rt),++tt===nt)return null;if(ut(tt)==="/"){if(++tt===nt)throw lt("comment");if(ut(tt)==="/")if(_e){if(bt=tt,St=!1,ft(tt)){St=!0;do if(tt=pt(tt),tt===nt||(tt++,!wt))break;while(ft(tt))}else tt=Math.min(nt,pt(tt)+1);St&&(dt(bt,tt,wt),wt=!0),rt++,vt=!0}else{for(St=ut(bt=tt+1)==="/";ut(++tt)!==`
`;)if(tt===nt)return null;++tt,St&&(dt(bt,tt-1,wt),wt=!0),++rt,vt=!0}else if((Et=ut(tt))==="*"){bt=tt+1,St=_e||ut(bt)==="*";do{if(Et===`
`&&++rt,++tt===nt)throw lt("comment");_t=Et,Et=ut(tt)}while(_t!=="*"||Et!=="/");++tt,St&&(dt(bt,tt-2,wt),wt=!0),vt=!0}else return"/"}}while(vt);var Rt=tt;delimRe.lastIndex=0;var Nt=delimRe.test(ut(Rt++));if(!Nt)for(;Rt<nt&&!delimRe.test(ut(Rt));)++Rt;var kt=et.substring(tt,tt=Rt);return(kt==='"'||kt==="'")&&(at=kt),kt}function xt(vt){st.push(vt)}function gt(){if(!st.length){var vt=mt();if(vt===null)return null;xt(vt)}return st[0]}function ht(vt,_t){var Et=gt(),bt=Et===vt;if(bt)return mt(),!0;if(!_t)throw lt("token '"+Et+"', '"+vt+"' expected");return!1}function yt(vt){var _t=null,Et;return vt===void 0?(Et=ot[rt-1],delete ot[rt-1],Et&&(_e||Et.type==="*"||Et.lineEmpty)&&(_t=Et.leading?Et.text:null)):(it<vt&&gt(),Et=ot[vt],delete ot[vt],Et&&!Et.lineEmpty&&(_e||Et.type==="/")&&(_t=Et.leading?null:Et.text)),_t}return Object.defineProperty({next:mt,peek:gt,push:xt,skip:ht,cmnt:yt},"line",{get:function(){return rt}})}var parse_1=parse$1;parse$1.filename=null;parse$1.defaults={keepCase:!1};var tokenize=tokenize_1,Root=requireRoot(),Type=requireType(),Field=requireField(),MapField=requireMapfield(),OneOf=requireOneof(),Enum=require_enum(),Service=requireService(),Method=requireMethod(),types=requireTypes(),util=requireUtil(),base10Re=/^[1-9][0-9]*$/,base10NegRe=/^-?[1-9][0-9]*$/,base16Re=/^0[x][0-9a-fA-F]+$/,base16NegRe=/^-?0[x][0-9a-fA-F]+$/,base8Re=/^0[0-7]+$/,base8NegRe=/^-?0[0-7]+$/,numberRe=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,nameRe=/^[a-zA-Z_][a-zA-Z_0-9]*$/,typeRefRe=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,fqTypeRefRe=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function parse$1(et,_e,tt){_e instanceof Root||(tt=_e,_e=new Root),tt||(tt=parse$1.defaults);var nt=tt.preferTrailingComment||!1,rt=tokenize(et,tt.alternateCommentMode||!1),it=rt.next,ot=rt.push,st=rt.peek,at=rt.skip,lt=rt.cmnt,ct=!0,ut,dt,ft,pt,mt=!1,xt=_e,gt=tt.keepCase?function(It){return It}:util.camelCase;function ht(It,Tt,At){var Bt=parse$1.filename;return At||(parse$1.filename=null),Error("illegal "+(Tt||"token")+" '"+It+"' ("+(Bt?Bt+", ":"")+"line "+rt.line+")")}function yt(){var It=[],Tt;do{if((Tt=it())!=='"'&&Tt!=="'")throw ht(Tt);It.push(it()),at(Tt),Tt=st()}while(Tt==='"'||Tt==="'");return It.join("")}function vt(It){var Tt=it();switch(Tt){case"'":case'"':return ot(Tt),yt();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return Et(Tt,!0)}catch{if(It&&typeRefRe.test(Tt))return Tt;throw ht(Tt,"value")}}function _t(It,Tt){var At,Bt;do Tt&&((At=st())==='"'||At==="'")?It.push(yt()):It.push([Bt=bt(it()),at("to",!0)?bt(it()):Bt]);while(at(",",!0));at(";")}function Et(It,Tt){var At=1;switch(It.charAt(0)==="-"&&(At=-1,It=It.substring(1)),It){case"inf":case"INF":case"Inf":return At*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(base10Re.test(It))return At*parseInt(It,10);if(base16Re.test(It))return At*parseInt(It,16);if(base8Re.test(It))return At*parseInt(It,8);if(numberRe.test(It))return At*parseFloat(It);throw ht(It,"number",Tt)}function bt(It,Tt){switch(It){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!Tt&&It.charAt(0)==="-")throw ht(It,"id");if(base10NegRe.test(It))return parseInt(It,10);if(base16NegRe.test(It))return parseInt(It,16);if(base8NegRe.test(It))return parseInt(It,8);throw ht(It,"id")}function St(){if(ut!==void 0)throw ht("package");if(ut=it(),!typeRefRe.test(ut))throw ht(ut,"name");xt=xt.define(ut),at(";")}function wt(){var It=st(),Tt;switch(It){case"weak":Tt=ft||(ft=[]),it();break;case"public":it();default:Tt=dt||(dt=[]);break}It=yt(),at(";"),Tt.push(It)}function Rt(){if(at("="),pt=yt(),mt=pt==="proto3",!mt&&pt!=="proto2")throw ht(pt,"syntax");at(";")}function Nt(It,Tt){switch(Tt){case"option":return Mt(It,Tt),at(";"),!0;case"message":return Pt(It,Tt),!0;case"enum":return Ot(It,Tt),!0;case"service":return Qt(It,Tt),!0;case"extend":return hn(It,Tt),!0}return!1}function kt(It,Tt,At){var Bt=rt.line;if(It&&(typeof It.comment!="string"&&(It.comment=lt()),It.filename=parse$1.filename),at("{",!0)){for(var Ft;(Ft=it())!=="}";)Tt(Ft);at(";",!0)}else At&&At(),at(";"),It&&(typeof It.comment!="string"||nt)&&(It.comment=lt(Bt)||It.comment)}function Pt(It,Tt){if(!nameRe.test(Tt=it()))throw ht(Tt,"type name");var At=new Type(Tt);kt(At,function(Ft){if(!Nt(At,Ft))switch(Ft){case"map":Ht(At);break;case"required":case"repeated":jt(At,Ft);break;case"optional":mt?jt(At,"proto3_optional"):jt(At,"optional");break;case"oneof":tn(At,Ft);break;case"extensions":_t(At.extensions||(At.extensions=[]));break;case"reserved":_t(At.reserved||(At.reserved=[]),!0);break;default:if(!mt||!typeRefRe.test(Ft))throw ht(Ft);ot(Ft),jt(At,"optional");break}}),It.add(At)}function jt(It,Tt,At){var Bt=it();if(Bt==="group"){Wt(It,Tt);return}for(;Bt.endsWith(".")||st().startsWith(".");)Bt+=it();if(!typeRefRe.test(Bt))throw ht(Bt,"type");var Ft=it();if(!nameRe.test(Ft))throw ht(Ft,"name");Ft=gt(Ft),at("=");var Gt=new Field(Ft,bt(it()),Bt,Tt,At);if(kt(Gt,function(an){if(an==="option")Mt(Gt,an),at(";");else throw ht(an)},function(){Kt(Gt)}),Tt==="proto3_optional"){var zt=new OneOf("_"+Ft);Gt.setOption("proto3_optional",!0),zt.add(Gt),It.add(zt)}else It.add(Gt);!mt&&Gt.repeated&&(types.packed[Bt]!==void 0||types.basic[Bt]===void 0)&&Gt.setOption("packed",!1,!0)}function Wt(It,Tt){var At=it();if(!nameRe.test(At))throw ht(At,"name");var Bt=util.lcFirst(At);At===Bt&&(At=util.ucFirst(At)),at("=");var Ft=bt(it()),Gt=new Type(At);Gt.group=!0;var zt=new Field(Bt,Ft,At,Tt);zt.filename=parse$1.filename,kt(Gt,function(an){switch(an){case"option":Mt(Gt,an),at(";");break;case"required":case"repeated":jt(Gt,an);break;case"optional":mt?jt(Gt,"proto3_optional"):jt(Gt,"optional");break;case"message":Pt(Gt,an);break;case"enum":Ot(Gt,an);break;default:throw ht(an)}}),It.add(Gt).add(zt)}function Ht(It){at("<");var Tt=it();if(types.mapKey[Tt]===void 0)throw ht(Tt,"type");at(",");var At=it();if(!typeRefRe.test(At))throw ht(At,"type");at(">");var Bt=it();if(!nameRe.test(Bt))throw ht(Bt,"name");at("=");var Ft=new MapField(gt(Bt),bt(it()),Tt,At);kt(Ft,function(zt){if(zt==="option")Mt(Ft,zt),at(";");else throw ht(zt)},function(){Kt(Ft)}),It.add(Ft)}function tn(It,Tt){if(!nameRe.test(Tt=it()))throw ht(Tt,"name");var At=new OneOf(gt(Tt));kt(At,function(Ft){Ft==="option"?(Mt(At,Ft),at(";")):(ot(Ft),jt(At,"optional"))}),It.add(At)}function Ot(It,Tt){if(!nameRe.test(Tt=it()))throw ht(Tt,"name");var At=new Enum(Tt);kt(At,function(Ft){switch(Ft){case"option":Mt(At,Ft),at(";");break;case"reserved":_t(At.reserved||(At.reserved=[]),!0);break;default:Lt(At,Ft)}}),It.add(At)}function Lt(It,Tt){if(!nameRe.test(Tt))throw ht(Tt,"name");at("=");var At=bt(it(),!0),Bt={options:void 0};Bt.setOption=function(Ft,Gt){this.options===void 0&&(this.options={}),this.options[Ft]=Gt},kt(Bt,function(Gt){if(Gt==="option")Mt(Bt,Gt),at(";");else throw ht(Gt)},function(){Kt(Bt)}),It.add(Tt,At,Bt.comment,Bt.options)}function Mt(It,Tt){var At=at("(",!0);if(!typeRefRe.test(Tt=it()))throw ht(Tt,"name");var Bt=Tt,Ft=Bt,Gt;At&&(at(")"),Bt="("+Bt+")",Ft=Bt,Tt=st(),fqTypeRefRe.test(Tt)&&(Gt=Tt.slice(1),Bt+=Tt,it())),at("=");var zt=Jt(It,Bt);on(It,Ft,zt,Gt)}function Jt(It,Tt){if(at("{",!0)){for(var At={};!at("}",!0);){if(!nameRe.test(nn=it()))throw ht(nn,"name");var Bt,Ft=nn;if(at(":",!0),st()==="{")Bt=Jt(It,Tt+"."+nn);else if(st()==="["){Bt=[];var Gt;if(at("[",!0)){do Gt=vt(!0),Bt.push(Gt);while(at(",",!0));at("]"),typeof Gt<"u"&&qt(It,Tt+"."+nn,Gt)}}else Bt=vt(!0),qt(It,Tt+"."+nn,Bt);var zt=At[Ft];zt&&(Bt=[].concat(zt).concat(Bt)),At[Ft]=Bt,at(",",!0),at(";",!0)}return At}var pn=vt(!0);return qt(It,Tt,pn),pn}function qt(It,Tt,At){It.setOption&&It.setOption(Tt,At)}function on(It,Tt,At,Bt){It.setParsedOption&&It.setParsedOption(Tt,At,Bt)}function Kt(It){if(at("[",!0)){do Mt(It,"option");while(at(",",!0));at("]")}return It}function Qt(It,Tt){if(!nameRe.test(Tt=it()))throw ht(Tt,"service name");var At=new Service(Tt);kt(At,function(Ft){if(!Nt(At,Ft))if(Ft==="rpc")sn(At,Ft);else throw ht(Ft)}),It.add(At)}function sn(It,Tt){var At=lt(),Bt=Tt;if(!nameRe.test(Tt=it()))throw ht(Tt,"name");var Ft=Tt,Gt,zt,pn,an;if(at("("),at("stream",!0)&&(zt=!0),!typeRefRe.test(Tt=it())||(Gt=Tt,at(")"),at("returns"),at("("),at("stream",!0)&&(an=!0),!typeRefRe.test(Tt=it())))throw ht(Tt);pn=Tt,at(")");var En=new Method(Ft,Bt,Gt,pn,zt,an);En.comment=At,kt(En,function(fn){if(fn==="option")Mt(En,fn),at(";");else throw ht(fn)}),It.add(En)}function hn(It,Tt){if(!typeRefRe.test(Tt=it()))throw ht(Tt,"reference");var At=Tt;kt(null,function(Ft){switch(Ft){case"required":case"repeated":jt(It,Ft,At);break;case"optional":mt?jt(It,"proto3_optional",At):jt(It,"optional",At);break;default:if(!mt||!typeRefRe.test(Ft))throw ht(Ft);ot(Ft),jt(It,"optional",At);break}})}for(var nn;(nn=it())!==null;)switch(nn){case"package":if(!ct)throw ht(nn);St();break;case"import":if(!ct)throw ht(nn);wt();break;case"syntax":if(!ct)throw ht(nn);Rt();break;case"option":Mt(xt,nn),at(";");break;default:if(Nt(xt,nn)){ct=!1;continue}throw ht(nn)}return parse$1.filename=null,{package:ut,imports:dt,weakImports:ft,syntax:pt,root:_e}}var common_1=common,commonRe=/\/|\./;function common(et,_e){commonRe.test(et)||(et="google/protobuf/"+et+".proto",_e={nested:{google:{nested:{protobuf:{nested:_e}}}}}),common[et]=_e}common("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var timeType;common("duration",{Duration:timeType={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}});common("timestamp",{Timestamp:timeType});common("empty",{Empty:{fields:{}}});common("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}});common("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}});common("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}});common.get=function et(_e){return common[_e]||null};var protobuf=src.exports=indexLightExports;protobuf.build="full";protobuf.tokenize=tokenize_1;protobuf.parse=parse_1;protobuf.common=common_1;protobuf.Root._configure(protobuf.Type,protobuf.parse,protobuf.common);var srcExports=src.exports,protobufjs=srcExports;async function fetchProto(et,_e){et=et.startsWith("/")?et.substring(1):et,et="/pathfinder-app/"+et;const tt=await protobufjs.util.fetch(et,{binary:!0});return _e(tt)}class Description{constructor(_e,tt){this.text=_e,this.sections=tt}static empty(){return this.of("")}static of(_e){return new Description(_e,{})}}class ItemDatabase{constructor(_e){this.modules=_e}summaries(){return uniqById(this.modules.flatMap(_e=>_e.summaries()),_e=>_e.name)}async load(_e){for(let tt of this.modules)if(tt.item(_e))return await tt.load(_e)}summary(_e){for(let tt of this.modules){const nt=tt.item(_e);if(nt)return nt}}options(){return this.modules.flatMap(_e=>_e.options())}option(_e){for(let tt of this.modules){const nt=tt.option(_e);if(nt)return nt}}optionSet(_e){for(let tt of this.modules){const nt=tt.optionSet(_e);if(nt)return nt}}}class Database{constructor(_e){this.modules=_e}features(){return this.modules.flatMap(_e=>_e.features())}feature(_e){for(let tt of this.modules){const nt=tt.feature(_e);if(nt)return nt}}async description(_e){for(let tt of this.modules)if(tt.feature(_e))return(await tt.load(_e)).description;return Description.empty()}async load(_e){for(let tt of this.modules)if(tt.feature(_e))return await tt.load(_e)}name(_e){var tt;return _e===void 0?"":((tt=this.feature(_e))==null?void 0:tt.name)??""}query(_e){return this.modules.flatMap(tt=>tt.query(_e))}async itemDatabase(){return new ItemDatabase(await Promise.all(this.modules.map(_e=>_e.itemDatabase())))}}class SetFormulaEffect{constructor(_e,tt){ln(this,"children",[]);this.targetKey=_e,this.formula=tt}applyTo(_e){try{_e.set(this.targetKey,pe.parse(this.formula))}catch(tt){throw console.error("Unable to parse: "+this.formula),tt}}async resolve(){return this}}class SetNumberEffect{constructor(_e,tt){ln(this,"children",[]);this.targetKey=_e,this.value=tt}applyTo(_e){_e.set(this.targetKey,this.value)}async resolve(){return this}}class AddEffect{constructor(_e,tt){ln(this,"children",[]);this.targetKey=_e,this.delta=tt}applyTo(_e){_e.increment(this.targetKey,this.delta)}async resolve(){return this}}var minimal=indexMinimal;const $Reader=minimal.Reader,$Writer=minimal.Writer,$util=minimal.util,$root=minimal.roots["/Users/knichol/dev/personal/pathfinder-app/pathfinder-vite/../pathfinder-generator/src/main/proto"]||(minimal.roots["/Users/knichol/dev/personal/pathfinder-app/pathfinder-vite/../pathfinder-generator/src/main/proto"]={}),data=$root.data=(()=>{const et={};return et.ChoiceDbo=function(){function _e(nt){if(nt)for(let rt=Object.keys(nt),it=0;it<rt.length;++it)nt[rt[it]]!=null&&(this[rt[it]]=nt[rt[it]])}_e.prototype.choiceId="",_e.prototype.label="",_e.prototype.type="",_e.prototype.repeating=!1,_e.prototype.text=null,_e.prototype.featureSelect=null;let tt;return Object.defineProperty(_e.prototype,"input",{get:$util.oneOfGetter(tt=["text","featureSelect"]),set:$util.oneOfSetter(tt)}),_e.create=function(rt){return new _e(rt)},_e.encode=function(rt,it){return it||(it=$Writer.create()),rt.choiceId!=null&&Object.hasOwnProperty.call(rt,"choiceId")&&it.uint32(10).string(rt.choiceId),rt.label!=null&&Object.hasOwnProperty.call(rt,"label")&&it.uint32(18).string(rt.label),rt.type!=null&&Object.hasOwnProperty.call(rt,"type")&&it.uint32(26).string(rt.type),rt.repeating!=null&&Object.hasOwnProperty.call(rt,"repeating")&&it.uint32(32).bool(rt.repeating),rt.text!=null&&Object.hasOwnProperty.call(rt,"text")&&$root.data.TextChoiceInputDbo.encode(rt.text,it.uint32(802).fork()).ldelim(),rt.featureSelect!=null&&Object.hasOwnProperty.call(rt,"featureSelect")&&$root.data.FeatureSelectChoiceInputDbo.encode(rt.featureSelect,it.uint32(810).fork()).ldelim(),it},_e.encodeDelimited=function(rt,it){return this.encode(rt,it).ldelim()},_e.decode=function(rt,it){rt instanceof $Reader||(rt=$Reader.create(rt));let ot=it===void 0?rt.len:rt.pos+it,st=new $root.data.ChoiceDbo;for(;rt.pos<ot;){let at=rt.uint32();switch(at>>>3){case 1:{st.choiceId=rt.string();break}case 2:{st.label=rt.string();break}case 3:{st.type=rt.string();break}case 4:{st.repeating=rt.bool();break}case 100:{st.text=$root.data.TextChoiceInputDbo.decode(rt,rt.uint32());break}case 101:{st.featureSelect=$root.data.FeatureSelectChoiceInputDbo.decode(rt,rt.uint32());break}default:rt.skipType(at&7);break}}return st},_e.decodeDelimited=function(rt){return rt instanceof $Reader||(rt=new $Reader(rt)),this.decode(rt,rt.uint32())},_e.verify=function(rt){if(typeof rt!="object"||rt===null)return"object expected";let it={};if(rt.choiceId!=null&&rt.hasOwnProperty("choiceId")&&!$util.isString(rt.choiceId))return"choiceId: string expected";if(rt.label!=null&&rt.hasOwnProperty("label")&&!$util.isString(rt.label))return"label: string expected";if(rt.type!=null&&rt.hasOwnProperty("type")&&!$util.isString(rt.type))return"type: string expected";if(rt.repeating!=null&&rt.hasOwnProperty("repeating")&&typeof rt.repeating!="boolean")return"repeating: boolean expected";if(rt.text!=null&&rt.hasOwnProperty("text")){it.input=1;{let ot=$root.data.TextChoiceInputDbo.verify(rt.text);if(ot)return"text."+ot}}if(rt.featureSelect!=null&&rt.hasOwnProperty("featureSelect")){if(it.input===1)return"input: multiple values";it.input=1;{let ot=$root.data.FeatureSelectChoiceInputDbo.verify(rt.featureSelect);if(ot)return"featureSelect."+ot}}return null},_e.fromObject=function(rt){if(rt instanceof $root.data.ChoiceDbo)return rt;let it=new $root.data.ChoiceDbo;if(rt.choiceId!=null&&(it.choiceId=String(rt.choiceId)),rt.label!=null&&(it.label=String(rt.label)),rt.type!=null&&(it.type=String(rt.type)),rt.repeating!=null&&(it.repeating=!!rt.repeating),rt.text!=null){if(typeof rt.text!="object")throw TypeError(".data.ChoiceDbo.text: object expected");it.text=$root.data.TextChoiceInputDbo.fromObject(rt.text)}if(rt.featureSelect!=null){if(typeof rt.featureSelect!="object")throw TypeError(".data.ChoiceDbo.featureSelect: object expected");it.featureSelect=$root.data.FeatureSelectChoiceInputDbo.fromObject(rt.featureSelect)}return it},_e.toObject=function(rt,it){it||(it={});let ot={};return it.defaults&&(ot.choiceId="",ot.label="",ot.type="",ot.repeating=!1),rt.choiceId!=null&&rt.hasOwnProperty("choiceId")&&(ot.choiceId=rt.choiceId),rt.label!=null&&rt.hasOwnProperty("label")&&(ot.label=rt.label),rt.type!=null&&rt.hasOwnProperty("type")&&(ot.type=rt.type),rt.repeating!=null&&rt.hasOwnProperty("repeating")&&(ot.repeating=rt.repeating),rt.text!=null&&rt.hasOwnProperty("text")&&(ot.text=$root.data.TextChoiceInputDbo.toObject(rt.text,it),it.oneofs&&(ot.input="text")),rt.featureSelect!=null&&rt.hasOwnProperty("featureSelect")&&(ot.featureSelect=$root.data.FeatureSelectChoiceInputDbo.toObject(rt.featureSelect,it),it.oneofs&&(ot.input="featureSelect")),ot},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(rt){return rt===void 0&&(rt="type.googleapis.com"),rt+"/data.ChoiceDbo"},_e}(),et.TextChoiceInputDbo=function(){function _e(tt){if(tt)for(let nt=Object.keys(tt),rt=0;rt<nt.length;++rt)tt[nt[rt]]!=null&&(this[nt[rt]]=tt[nt[rt]])}return _e.create=function(nt){return new _e(nt)},_e.encode=function(nt,rt){return rt||(rt=$Writer.create()),rt},_e.encodeDelimited=function(nt,rt){return this.encode(nt,rt).ldelim()},_e.decode=function(nt,rt){nt instanceof $Reader||(nt=$Reader.create(nt));let it=rt===void 0?nt.len:nt.pos+rt,ot=new $root.data.TextChoiceInputDbo;for(;nt.pos<it;){let st=nt.uint32();switch(st>>>3){default:nt.skipType(st&7);break}}return ot},_e.decodeDelimited=function(nt){return nt instanceof $Reader||(nt=new $Reader(nt)),this.decode(nt,nt.uint32())},_e.verify=function(nt){return typeof nt!="object"||nt===null?"object expected":null},_e.fromObject=function(nt){return nt instanceof $root.data.TextChoiceInputDbo?nt:new $root.data.TextChoiceInputDbo},_e.toObject=function(){return{}},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/data.TextChoiceInputDbo"},_e}(),et.FeatureSelectChoiceInputDbo=function(){function _e(tt){if(this.optionTags=[],this.featureIds=[],this.categories=[],tt)for(let nt=Object.keys(tt),rt=0;rt<nt.length;++rt)tt[nt[rt]]!=null&&(this[nt[rt]]=tt[nt[rt]])}return _e.prototype.optionTags=$util.emptyArray,_e.prototype.featureIds=$util.emptyArray,_e.prototype.categories=$util.emptyArray,_e.prototype.sortBy=0,_e.create=function(nt){return new _e(nt)},_e.encode=function(nt,rt){if(rt||(rt=$Writer.create()),nt.optionTags!=null&&nt.optionTags.length)for(let it=0;it<nt.optionTags.length;++it)rt.uint32(10).string(nt.optionTags[it]);if(nt.featureIds!=null&&nt.featureIds.length)for(let it=0;it<nt.featureIds.length;++it)rt.uint32(18).string(nt.featureIds[it]);if(nt.categories!=null&&nt.categories.length)for(let it=0;it<nt.categories.length;++it)$root.data.FeatureSelectChoiceCategoryDbo.encode(nt.categories[it],rt.uint32(26).fork()).ldelim();return nt.sortBy!=null&&Object.hasOwnProperty.call(nt,"sortBy")&&rt.uint32(32).int32(nt.sortBy),rt},_e.encodeDelimited=function(nt,rt){return this.encode(nt,rt).ldelim()},_e.decode=function(nt,rt){nt instanceof $Reader||(nt=$Reader.create(nt));let it=rt===void 0?nt.len:nt.pos+rt,ot=new $root.data.FeatureSelectChoiceInputDbo;for(;nt.pos<it;){let st=nt.uint32();switch(st>>>3){case 1:{ot.optionTags&&ot.optionTags.length||(ot.optionTags=[]),ot.optionTags.push(nt.string());break}case 2:{ot.featureIds&&ot.featureIds.length||(ot.featureIds=[]),ot.featureIds.push(nt.string());break}case 3:{ot.categories&&ot.categories.length||(ot.categories=[]),ot.categories.push($root.data.FeatureSelectChoiceCategoryDbo.decode(nt,nt.uint32()));break}case 4:{ot.sortBy=nt.int32();break}default:nt.skipType(st&7);break}}return ot},_e.decodeDelimited=function(nt){return nt instanceof $Reader||(nt=new $Reader(nt)),this.decode(nt,nt.uint32())},_e.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.optionTags!=null&&nt.hasOwnProperty("optionTags")){if(!Array.isArray(nt.optionTags))return"optionTags: array expected";for(let rt=0;rt<nt.optionTags.length;++rt)if(!$util.isString(nt.optionTags[rt]))return"optionTags: string[] expected"}if(nt.featureIds!=null&&nt.hasOwnProperty("featureIds")){if(!Array.isArray(nt.featureIds))return"featureIds: array expected";for(let rt=0;rt<nt.featureIds.length;++rt)if(!$util.isString(nt.featureIds[rt]))return"featureIds: string[] expected"}if(nt.categories!=null&&nt.hasOwnProperty("categories")){if(!Array.isArray(nt.categories))return"categories: array expected";for(let rt=0;rt<nt.categories.length;++rt){let it=$root.data.FeatureSelectChoiceCategoryDbo.verify(nt.categories[rt]);if(it)return"categories."+it}}if(nt.sortBy!=null&&nt.hasOwnProperty("sortBy"))switch(nt.sortBy){default:return"sortBy: enum value expected";case 0:case 1:break}return null},_e.fromObject=function(nt){if(nt instanceof $root.data.FeatureSelectChoiceInputDbo)return nt;let rt=new $root.data.FeatureSelectChoiceInputDbo;if(nt.optionTags){if(!Array.isArray(nt.optionTags))throw TypeError(".data.FeatureSelectChoiceInputDbo.optionTags: array expected");rt.optionTags=[];for(let it=0;it<nt.optionTags.length;++it)rt.optionTags[it]=String(nt.optionTags[it])}if(nt.featureIds){if(!Array.isArray(nt.featureIds))throw TypeError(".data.FeatureSelectChoiceInputDbo.featureIds: array expected");rt.featureIds=[];for(let it=0;it<nt.featureIds.length;++it)rt.featureIds[it]=String(nt.featureIds[it])}if(nt.categories){if(!Array.isArray(nt.categories))throw TypeError(".data.FeatureSelectChoiceInputDbo.categories: array expected");rt.categories=[];for(let it=0;it<nt.categories.length;++it){if(typeof nt.categories[it]!="object")throw TypeError(".data.FeatureSelectChoiceInputDbo.categories: object expected");rt.categories[it]=$root.data.FeatureSelectChoiceCategoryDbo.fromObject(nt.categories[it])}}switch(nt.sortBy){default:if(typeof nt.sortBy=="number"){rt.sortBy=nt.sortBy;break}break;case"FEATURE_SELECT_CHOICE_SORTBY_NONE":case 0:rt.sortBy=0;break;case"FEATURE_SELECT_CHOICE_SORTBY_NAME":case 1:rt.sortBy=1;break}return rt},_e.toObject=function(nt,rt){rt||(rt={});let it={};if((rt.arrays||rt.defaults)&&(it.optionTags=[],it.featureIds=[],it.categories=[]),rt.defaults&&(it.sortBy=rt.enums===String?"FEATURE_SELECT_CHOICE_SORTBY_NONE":0),nt.optionTags&&nt.optionTags.length){it.optionTags=[];for(let ot=0;ot<nt.optionTags.length;++ot)it.optionTags[ot]=nt.optionTags[ot]}if(nt.featureIds&&nt.featureIds.length){it.featureIds=[];for(let ot=0;ot<nt.featureIds.length;++ot)it.featureIds[ot]=nt.featureIds[ot]}if(nt.categories&&nt.categories.length){it.categories=[];for(let ot=0;ot<nt.categories.length;++ot)it.categories[ot]=$root.data.FeatureSelectChoiceCategoryDbo.toObject(nt.categories[ot],rt)}return nt.sortBy!=null&&nt.hasOwnProperty("sortBy")&&(it.sortBy=rt.enums===String?$root.data.FeatureSelectChoiceSortByDbo[nt.sortBy]===void 0?nt.sortBy:$root.data.FeatureSelectChoiceSortByDbo[nt.sortBy]:nt.sortBy),it},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/data.FeatureSelectChoiceInputDbo"},_e}(),et.FeatureSelectChoiceCategoryDbo=function(){function _e(tt){if(tt)for(let nt=Object.keys(tt),rt=0;rt<nt.length;++rt)tt[nt[rt]]!=null&&(this[nt[rt]]=tt[nt[rt]])}return _e.prototype.label="",_e.prototype.tag="",_e.create=function(nt){return new _e(nt)},_e.encode=function(nt,rt){return rt||(rt=$Writer.create()),nt.label!=null&&Object.hasOwnProperty.call(nt,"label")&&rt.uint32(10).string(nt.label),nt.tag!=null&&Object.hasOwnProperty.call(nt,"tag")&&rt.uint32(18).string(nt.tag),rt},_e.encodeDelimited=function(nt,rt){return this.encode(nt,rt).ldelim()},_e.decode=function(nt,rt){nt instanceof $Reader||(nt=$Reader.create(nt));let it=rt===void 0?nt.len:nt.pos+rt,ot=new $root.data.FeatureSelectChoiceCategoryDbo;for(;nt.pos<it;){let st=nt.uint32();switch(st>>>3){case 1:{ot.label=nt.string();break}case 2:{ot.tag=nt.string();break}default:nt.skipType(st&7);break}}return ot},_e.decodeDelimited=function(nt){return nt instanceof $Reader||(nt=new $Reader(nt)),this.decode(nt,nt.uint32())},_e.verify=function(nt){return typeof nt!="object"||nt===null?"object expected":nt.label!=null&&nt.hasOwnProperty("label")&&!$util.isString(nt.label)?"label: string expected":nt.tag!=null&&nt.hasOwnProperty("tag")&&!$util.isString(nt.tag)?"tag: string expected":null},_e.fromObject=function(nt){if(nt instanceof $root.data.FeatureSelectChoiceCategoryDbo)return nt;let rt=new $root.data.FeatureSelectChoiceCategoryDbo;return nt.label!=null&&(rt.label=String(nt.label)),nt.tag!=null&&(rt.tag=String(nt.tag)),rt},_e.toObject=function(nt,rt){rt||(rt={});let it={};return rt.defaults&&(it.label="",it.tag=""),nt.label!=null&&nt.hasOwnProperty("label")&&(it.label=nt.label),nt.tag!=null&&nt.hasOwnProperty("tag")&&(it.tag=nt.tag),it},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/data.FeatureSelectChoiceCategoryDbo"},_e}(),et.FeatureSelectChoiceSortByDbo=function(){const _e={},tt=Object.create(_e);return tt[_e[0]="FEATURE_SELECT_CHOICE_SORTBY_NONE"]=0,tt[_e[1]="FEATURE_SELECT_CHOICE_SORTBY_NAME"]=1,tt}(),et.StacksDbo=function(){function _e(nt){if(nt)for(let rt=Object.keys(nt),it=0;it<rt.length;++it)nt[rt[it]]!=null&&(this[rt[it]]=nt[rt[it]])}_e.prototype.fixedStack=null,_e.prototype.repeatingStack=null;let tt;return Object.defineProperty(_e.prototype,"stackable",{get:$util.oneOfGetter(tt=["fixedStack","repeatingStack"]),set:$util.oneOfSetter(tt)}),_e.create=function(rt){return new _e(rt)},_e.encode=function(rt,it){return it||(it=$Writer.create()),rt.fixedStack!=null&&Object.hasOwnProperty.call(rt,"fixedStack")&&$root.data.FixedStackDbo.encode(rt.fixedStack,it.uint32(10).fork()).ldelim(),rt.repeatingStack!=null&&Object.hasOwnProperty.call(rt,"repeatingStack")&&$root.data.StackDbo.encode(rt.repeatingStack,it.uint32(18).fork()).ldelim(),it},_e.encodeDelimited=function(rt,it){return this.encode(rt,it).ldelim()},_e.decode=function(rt,it){rt instanceof $Reader||(rt=$Reader.create(rt));let ot=it===void 0?rt.len:rt.pos+it,st=new $root.data.StacksDbo;for(;rt.pos<ot;){let at=rt.uint32();switch(at>>>3){case 1:{st.fixedStack=$root.data.FixedStackDbo.decode(rt,rt.uint32());break}case 2:{st.repeatingStack=$root.data.StackDbo.decode(rt,rt.uint32());break}default:rt.skipType(at&7);break}}return st},_e.decodeDelimited=function(rt){return rt instanceof $Reader||(rt=new $Reader(rt)),this.decode(rt,rt.uint32())},_e.verify=function(rt){if(typeof rt!="object"||rt===null)return"object expected";let it={};if(rt.fixedStack!=null&&rt.hasOwnProperty("fixedStack")){it.stackable=1;{let ot=$root.data.FixedStackDbo.verify(rt.fixedStack);if(ot)return"fixedStack."+ot}}if(rt.repeatingStack!=null&&rt.hasOwnProperty("repeatingStack")){if(it.stackable===1)return"stackable: multiple values";it.stackable=1;{let ot=$root.data.StackDbo.verify(rt.repeatingStack);if(ot)return"repeatingStack."+ot}}return null},_e.fromObject=function(rt){if(rt instanceof $root.data.StacksDbo)return rt;let it=new $root.data.StacksDbo;if(rt.fixedStack!=null){if(typeof rt.fixedStack!="object")throw TypeError(".data.StacksDbo.fixedStack: object expected");it.fixedStack=$root.data.FixedStackDbo.fromObject(rt.fixedStack)}if(rt.repeatingStack!=null){if(typeof rt.repeatingStack!="object")throw TypeError(".data.StacksDbo.repeatingStack: object expected");it.repeatingStack=$root.data.StackDbo.fromObject(rt.repeatingStack)}return it},_e.toObject=function(rt,it){it||(it={});let ot={};return rt.fixedStack!=null&&rt.hasOwnProperty("fixedStack")&&(ot.fixedStack=$root.data.FixedStackDbo.toObject(rt.fixedStack,it),it.oneofs&&(ot.stackable="fixedStack")),rt.repeatingStack!=null&&rt.hasOwnProperty("repeatingStack")&&(ot.repeatingStack=$root.data.StackDbo.toObject(rt.repeatingStack,it),it.oneofs&&(ot.stackable="repeatingStack")),ot},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(rt){return rt===void 0&&(rt="type.googleapis.com"),rt+"/data.StacksDbo"},_e}(),et.FixedStackDbo=function(){function _e(tt){if(this.stacks=[],tt)for(let nt=Object.keys(tt),rt=0;rt<nt.length;++rt)tt[nt[rt]]!=null&&(this[nt[rt]]=tt[nt[rt]])}return _e.prototype.stacks=$util.emptyArray,_e.create=function(nt){return new _e(nt)},_e.encode=function(nt,rt){if(rt||(rt=$Writer.create()),nt.stacks!=null&&nt.stacks.length)for(let it=0;it<nt.stacks.length;++it)$root.data.StackDbo.encode(nt.stacks[it],rt.uint32(10).fork()).ldelim();return rt},_e.encodeDelimited=function(nt,rt){return this.encode(nt,rt).ldelim()},_e.decode=function(nt,rt){nt instanceof $Reader||(nt=$Reader.create(nt));let it=rt===void 0?nt.len:nt.pos+rt,ot=new $root.data.FixedStackDbo;for(;nt.pos<it;){let st=nt.uint32();switch(st>>>3){case 1:{ot.stacks&&ot.stacks.length||(ot.stacks=[]),ot.stacks.push($root.data.StackDbo.decode(nt,nt.uint32()));break}default:nt.skipType(st&7);break}}return ot},_e.decodeDelimited=function(nt){return nt instanceof $Reader||(nt=new $Reader(nt)),this.decode(nt,nt.uint32())},_e.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.stacks!=null&&nt.hasOwnProperty("stacks")){if(!Array.isArray(nt.stacks))return"stacks: array expected";for(let rt=0;rt<nt.stacks.length;++rt){let it=$root.data.StackDbo.verify(nt.stacks[rt]);if(it)return"stacks."+it}}return null},_e.fromObject=function(nt){if(nt instanceof $root.data.FixedStackDbo)return nt;let rt=new $root.data.FixedStackDbo;if(nt.stacks){if(!Array.isArray(nt.stacks))throw TypeError(".data.FixedStackDbo.stacks: array expected");rt.stacks=[];for(let it=0;it<nt.stacks.length;++it){if(typeof nt.stacks[it]!="object")throw TypeError(".data.FixedStackDbo.stacks: object expected");rt.stacks[it]=$root.data.StackDbo.fromObject(nt.stacks[it])}}return rt},_e.toObject=function(nt,rt){rt||(rt={});let it={};if((rt.arrays||rt.defaults)&&(it.stacks=[]),nt.stacks&&nt.stacks.length){it.stacks=[];for(let ot=0;ot<nt.stacks.length;++ot)it.stacks[ot]=$root.data.StackDbo.toObject(nt.stacks[ot],rt)}return it},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/data.FixedStackDbo"},_e}(),et.StackDbo=function(){function _e(tt){if(this.effects=[],this.links=[],this.choices=[],this.featureModifications=[],tt)for(let nt=Object.keys(tt),rt=0;rt<nt.length;++rt)tt[nt[rt]]!=null&&(this[nt[rt]]=tt[nt[rt]])}return _e.prototype.effects=$util.emptyArray,_e.prototype.links=$util.emptyArray,_e.prototype.choices=$util.emptyArray,_e.prototype.featureModifications=$util.emptyArray,_e.create=function(nt){return new _e(nt)},_e.encode=function(nt,rt){if(rt||(rt=$Writer.create()),nt.effects!=null&&nt.effects.length)for(let it=0;it<nt.effects.length;++it)$root.data.EffectDbo.encode(nt.effects[it],rt.uint32(810).fork()).ldelim();if(nt.links!=null&&nt.links.length)for(let it=0;it<nt.links.length;++it)rt.uint32(818).string(nt.links[it]);if(nt.choices!=null&&nt.choices.length)for(let it=0;it<nt.choices.length;++it)$root.data.ChoiceDbo.encode(nt.choices[it],rt.uint32(826).fork()).ldelim();if(nt.featureModifications!=null&&nt.featureModifications.length)for(let it=0;it<nt.featureModifications.length;++it)$root.data.FeatureModificationDbo.encode(nt.featureModifications[it],rt.uint32(834).fork()).ldelim();return rt},_e.encodeDelimited=function(nt,rt){return this.encode(nt,rt).ldelim()},_e.decode=function(nt,rt){nt instanceof $Reader||(nt=$Reader.create(nt));let it=rt===void 0?nt.len:nt.pos+rt,ot=new $root.data.StackDbo;for(;nt.pos<it;){let st=nt.uint32();switch(st>>>3){case 101:{ot.effects&&ot.effects.length||(ot.effects=[]),ot.effects.push($root.data.EffectDbo.decode(nt,nt.uint32()));break}case 102:{ot.links&&ot.links.length||(ot.links=[]),ot.links.push(nt.string());break}case 103:{ot.choices&&ot.choices.length||(ot.choices=[]),ot.choices.push($root.data.ChoiceDbo.decode(nt,nt.uint32()));break}case 104:{ot.featureModifications&&ot.featureModifications.length||(ot.featureModifications=[]),ot.featureModifications.push($root.data.FeatureModificationDbo.decode(nt,nt.uint32()));break}default:nt.skipType(st&7);break}}return ot},_e.decodeDelimited=function(nt){return nt instanceof $Reader||(nt=new $Reader(nt)),this.decode(nt,nt.uint32())},_e.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.effects!=null&&nt.hasOwnProperty("effects")){if(!Array.isArray(nt.effects))return"effects: array expected";for(let rt=0;rt<nt.effects.length;++rt){let it=$root.data.EffectDbo.verify(nt.effects[rt]);if(it)return"effects."+it}}if(nt.links!=null&&nt.hasOwnProperty("links")){if(!Array.isArray(nt.links))return"links: array expected";for(let rt=0;rt<nt.links.length;++rt)if(!$util.isString(nt.links[rt]))return"links: string[] expected"}if(nt.choices!=null&&nt.hasOwnProperty("choices")){if(!Array.isArray(nt.choices))return"choices: array expected";for(let rt=0;rt<nt.choices.length;++rt){let it=$root.data.ChoiceDbo.verify(nt.choices[rt]);if(it)return"choices."+it}}if(nt.featureModifications!=null&&nt.hasOwnProperty("featureModifications")){if(!Array.isArray(nt.featureModifications))return"featureModifications: array expected";for(let rt=0;rt<nt.featureModifications.length;++rt){let it=$root.data.FeatureModificationDbo.verify(nt.featureModifications[rt]);if(it)return"featureModifications."+it}}return null},_e.fromObject=function(nt){if(nt instanceof $root.data.StackDbo)return nt;let rt=new $root.data.StackDbo;if(nt.effects){if(!Array.isArray(nt.effects))throw TypeError(".data.StackDbo.effects: array expected");rt.effects=[];for(let it=0;it<nt.effects.length;++it){if(typeof nt.effects[it]!="object")throw TypeError(".data.StackDbo.effects: object expected");rt.effects[it]=$root.data.EffectDbo.fromObject(nt.effects[it])}}if(nt.links){if(!Array.isArray(nt.links))throw TypeError(".data.StackDbo.links: array expected");rt.links=[];for(let it=0;it<nt.links.length;++it)rt.links[it]=String(nt.links[it])}if(nt.choices){if(!Array.isArray(nt.choices))throw TypeError(".data.StackDbo.choices: array expected");rt.choices=[];for(let it=0;it<nt.choices.length;++it){if(typeof nt.choices[it]!="object")throw TypeError(".data.StackDbo.choices: object expected");rt.choices[it]=$root.data.ChoiceDbo.fromObject(nt.choices[it])}}if(nt.featureModifications){if(!Array.isArray(nt.featureModifications))throw TypeError(".data.StackDbo.featureModifications: array expected");rt.featureModifications=[];for(let it=0;it<nt.featureModifications.length;++it){if(typeof nt.featureModifications[it]!="object")throw TypeError(".data.StackDbo.featureModifications: object expected");rt.featureModifications[it]=$root.data.FeatureModificationDbo.fromObject(nt.featureModifications[it])}}return rt},_e.toObject=function(nt,rt){rt||(rt={});let it={};if((rt.arrays||rt.defaults)&&(it.effects=[],it.links=[],it.choices=[],it.featureModifications=[]),nt.effects&&nt.effects.length){it.effects=[];for(let ot=0;ot<nt.effects.length;++ot)it.effects[ot]=$root.data.EffectDbo.toObject(nt.effects[ot],rt)}if(nt.links&&nt.links.length){it.links=[];for(let ot=0;ot<nt.links.length;++ot)it.links[ot]=nt.links[ot]}if(nt.choices&&nt.choices.length){it.choices=[];for(let ot=0;ot<nt.choices.length;++ot)it.choices[ot]=$root.data.ChoiceDbo.toObject(nt.choices[ot],rt)}if(nt.featureModifications&&nt.featureModifications.length){it.featureModifications=[];for(let ot=0;ot<nt.featureModifications.length;++ot)it.featureModifications[ot]=$root.data.FeatureModificationDbo.toObject(nt.featureModifications[ot],rt)}return it},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/data.StackDbo"},_e}(),et.ConditionalStackDbo=function(){function _e(tt){if(this.effects=[],this.links=[],this.choices=[],this.featureModifications=[],tt)for(let nt=Object.keys(tt),rt=0;rt<nt.length;++rt)tt[nt[rt]]!=null&&(this[nt[rt]]=tt[nt[rt]])}return _e.prototype.conditionFormula="",_e.prototype.effects=$util.emptyArray,_e.prototype.links=$util.emptyArray,_e.prototype.choices=$util.emptyArray,_e.prototype.featureModifications=$util.emptyArray,_e.create=function(nt){return new _e(nt)},_e.encode=function(nt,rt){if(rt||(rt=$Writer.create()),nt.conditionFormula!=null&&Object.hasOwnProperty.call(nt,"conditionFormula")&&rt.uint32(10).string(nt.conditionFormula),nt.effects!=null&&nt.effects.length)for(let it=0;it<nt.effects.length;++it)$root.data.EffectDbo.encode(nt.effects[it],rt.uint32(810).fork()).ldelim();if(nt.links!=null&&nt.links.length)for(let it=0;it<nt.links.length;++it)rt.uint32(818).string(nt.links[it]);if(nt.choices!=null&&nt.choices.length)for(let it=0;it<nt.choices.length;++it)$root.data.ChoiceDbo.encode(nt.choices[it],rt.uint32(826).fork()).ldelim();if(nt.featureModifications!=null&&nt.featureModifications.length)for(let it=0;it<nt.featureModifications.length;++it)$root.data.FeatureModificationDbo.encode(nt.featureModifications[it],rt.uint32(834).fork()).ldelim();return rt},_e.encodeDelimited=function(nt,rt){return this.encode(nt,rt).ldelim()},_e.decode=function(nt,rt){nt instanceof $Reader||(nt=$Reader.create(nt));let it=rt===void 0?nt.len:nt.pos+rt,ot=new $root.data.ConditionalStackDbo;for(;nt.pos<it;){let st=nt.uint32();switch(st>>>3){case 1:{ot.conditionFormula=nt.string();break}case 101:{ot.effects&&ot.effects.length||(ot.effects=[]),ot.effects.push($root.data.EffectDbo.decode(nt,nt.uint32()));break}case 102:{ot.links&&ot.links.length||(ot.links=[]),ot.links.push(nt.string());break}case 103:{ot.choices&&ot.choices.length||(ot.choices=[]),ot.choices.push($root.data.ChoiceDbo.decode(nt,nt.uint32()));break}case 104:{ot.featureModifications&&ot.featureModifications.length||(ot.featureModifications=[]),ot.featureModifications.push($root.data.FeatureModificationDbo.decode(nt,nt.uint32()));break}default:nt.skipType(st&7);break}}return ot},_e.decodeDelimited=function(nt){return nt instanceof $Reader||(nt=new $Reader(nt)),this.decode(nt,nt.uint32())},_e.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.conditionFormula!=null&&nt.hasOwnProperty("conditionFormula")&&!$util.isString(nt.conditionFormula))return"conditionFormula: string expected";if(nt.effects!=null&&nt.hasOwnProperty("effects")){if(!Array.isArray(nt.effects))return"effects: array expected";for(let rt=0;rt<nt.effects.length;++rt){let it=$root.data.EffectDbo.verify(nt.effects[rt]);if(it)return"effects."+it}}if(nt.links!=null&&nt.hasOwnProperty("links")){if(!Array.isArray(nt.links))return"links: array expected";for(let rt=0;rt<nt.links.length;++rt)if(!$util.isString(nt.links[rt]))return"links: string[] expected"}if(nt.choices!=null&&nt.hasOwnProperty("choices")){if(!Array.isArray(nt.choices))return"choices: array expected";for(let rt=0;rt<nt.choices.length;++rt){let it=$root.data.ChoiceDbo.verify(nt.choices[rt]);if(it)return"choices."+it}}if(nt.featureModifications!=null&&nt.hasOwnProperty("featureModifications")){if(!Array.isArray(nt.featureModifications))return"featureModifications: array expected";for(let rt=0;rt<nt.featureModifications.length;++rt){let it=$root.data.FeatureModificationDbo.verify(nt.featureModifications[rt]);if(it)return"featureModifications."+it}}return null},_e.fromObject=function(nt){if(nt instanceof $root.data.ConditionalStackDbo)return nt;let rt=new $root.data.ConditionalStackDbo;if(nt.conditionFormula!=null&&(rt.conditionFormula=String(nt.conditionFormula)),nt.effects){if(!Array.isArray(nt.effects))throw TypeError(".data.ConditionalStackDbo.effects: array expected");rt.effects=[];for(let it=0;it<nt.effects.length;++it){if(typeof nt.effects[it]!="object")throw TypeError(".data.ConditionalStackDbo.effects: object expected");rt.effects[it]=$root.data.EffectDbo.fromObject(nt.effects[it])}}if(nt.links){if(!Array.isArray(nt.links))throw TypeError(".data.ConditionalStackDbo.links: array expected");rt.links=[];for(let it=0;it<nt.links.length;++it)rt.links[it]=String(nt.links[it])}if(nt.choices){if(!Array.isArray(nt.choices))throw TypeError(".data.ConditionalStackDbo.choices: array expected");rt.choices=[];for(let it=0;it<nt.choices.length;++it){if(typeof nt.choices[it]!="object")throw TypeError(".data.ConditionalStackDbo.choices: object expected");rt.choices[it]=$root.data.ChoiceDbo.fromObject(nt.choices[it])}}if(nt.featureModifications){if(!Array.isArray(nt.featureModifications))throw TypeError(".data.ConditionalStackDbo.featureModifications: array expected");rt.featureModifications=[];for(let it=0;it<nt.featureModifications.length;++it){if(typeof nt.featureModifications[it]!="object")throw TypeError(".data.ConditionalStackDbo.featureModifications: object expected");rt.featureModifications[it]=$root.data.FeatureModificationDbo.fromObject(nt.featureModifications[it])}}return rt},_e.toObject=function(nt,rt){rt||(rt={});let it={};if((rt.arrays||rt.defaults)&&(it.effects=[],it.links=[],it.choices=[],it.featureModifications=[]),rt.defaults&&(it.conditionFormula=""),nt.conditionFormula!=null&&nt.hasOwnProperty("conditionFormula")&&(it.conditionFormula=nt.conditionFormula),nt.effects&&nt.effects.length){it.effects=[];for(let ot=0;ot<nt.effects.length;++ot)it.effects[ot]=$root.data.EffectDbo.toObject(nt.effects[ot],rt)}if(nt.links&&nt.links.length){it.links=[];for(let ot=0;ot<nt.links.length;++ot)it.links[ot]=nt.links[ot]}if(nt.choices&&nt.choices.length){it.choices=[];for(let ot=0;ot<nt.choices.length;++ot)it.choices[ot]=$root.data.ChoiceDbo.toObject(nt.choices[ot],rt)}if(nt.featureModifications&&nt.featureModifications.length){it.featureModifications=[];for(let ot=0;ot<nt.featureModifications.length;++ot)it.featureModifications[ot]=$root.data.FeatureModificationDbo.toObject(nt.featureModifications[ot],rt)}return it},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/data.ConditionalStackDbo"},_e}(),et.EffectDbo=function(){function _e(nt){if(nt)for(let rt=Object.keys(nt),it=0;it<rt.length;++it)nt[rt[it]]!=null&&(this[rt[it]]=nt[rt[it]])}_e.prototype.conditionFormula=null,_e.prototype.setAction=null,_e.prototype.addAction=null;let tt;return Object.defineProperty(_e.prototype,"_conditionFormula",{get:$util.oneOfGetter(tt=["conditionFormula"]),set:$util.oneOfSetter(tt)}),Object.defineProperty(_e.prototype,"action",{get:$util.oneOfGetter(tt=["setAction","addAction"]),set:$util.oneOfSetter(tt)}),_e.create=function(rt){return new _e(rt)},_e.encode=function(rt,it){return it||(it=$Writer.create()),rt.conditionFormula!=null&&Object.hasOwnProperty.call(rt,"conditionFormula")&&it.uint32(10).string(rt.conditionFormula),rt.setAction!=null&&Object.hasOwnProperty.call(rt,"setAction")&&$root.data.EffectDbo.SetActionDbo.encode(rt.setAction,it.uint32(18).fork()).ldelim(),rt.addAction!=null&&Object.hasOwnProperty.call(rt,"addAction")&&$root.data.EffectDbo.AddActionDbo.encode(rt.addAction,it.uint32(26).fork()).ldelim(),it},_e.encodeDelimited=function(rt,it){return this.encode(rt,it).ldelim()},_e.decode=function(rt,it){rt instanceof $Reader||(rt=$Reader.create(rt));let ot=it===void 0?rt.len:rt.pos+it,st=new $root.data.EffectDbo;for(;rt.pos<ot;){let at=rt.uint32();switch(at>>>3){case 1:{st.conditionFormula=rt.string();break}case 2:{st.setAction=$root.data.EffectDbo.SetActionDbo.decode(rt,rt.uint32());break}case 3:{st.addAction=$root.data.EffectDbo.AddActionDbo.decode(rt,rt.uint32());break}default:rt.skipType(at&7);break}}return st},_e.decodeDelimited=function(rt){return rt instanceof $Reader||(rt=new $Reader(rt)),this.decode(rt,rt.uint32())},_e.verify=function(rt){if(typeof rt!="object"||rt===null)return"object expected";let it={};if(rt.conditionFormula!=null&&rt.hasOwnProperty("conditionFormula")&&(it._conditionFormula=1,!$util.isString(rt.conditionFormula)))return"conditionFormula: string expected";if(rt.setAction!=null&&rt.hasOwnProperty("setAction")){it.action=1;{let ot=$root.data.EffectDbo.SetActionDbo.verify(rt.setAction);if(ot)return"setAction."+ot}}if(rt.addAction!=null&&rt.hasOwnProperty("addAction")){if(it.action===1)return"action: multiple values";it.action=1;{let ot=$root.data.EffectDbo.AddActionDbo.verify(rt.addAction);if(ot)return"addAction."+ot}}return null},_e.fromObject=function(rt){if(rt instanceof $root.data.EffectDbo)return rt;let it=new $root.data.EffectDbo;if(rt.conditionFormula!=null&&(it.conditionFormula=String(rt.conditionFormula)),rt.setAction!=null){if(typeof rt.setAction!="object")throw TypeError(".data.EffectDbo.setAction: object expected");it.setAction=$root.data.EffectDbo.SetActionDbo.fromObject(rt.setAction)}if(rt.addAction!=null){if(typeof rt.addAction!="object")throw TypeError(".data.EffectDbo.addAction: object expected");it.addAction=$root.data.EffectDbo.AddActionDbo.fromObject(rt.addAction)}return it},_e.toObject=function(rt,it){it||(it={});let ot={};return rt.conditionFormula!=null&&rt.hasOwnProperty("conditionFormula")&&(ot.conditionFormula=rt.conditionFormula,it.oneofs&&(ot._conditionFormula="conditionFormula")),rt.setAction!=null&&rt.hasOwnProperty("setAction")&&(ot.setAction=$root.data.EffectDbo.SetActionDbo.toObject(rt.setAction,it),it.oneofs&&(ot.action="setAction")),rt.addAction!=null&&rt.hasOwnProperty("addAction")&&(ot.addAction=$root.data.EffectDbo.AddActionDbo.toObject(rt.addAction,it),it.oneofs&&(ot.action="addAction")),ot},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(rt){return rt===void 0&&(rt="type.googleapis.com"),rt+"/data.EffectDbo"},_e.SetActionDbo=function(){function nt(it){if(it)for(let ot=Object.keys(it),st=0;st<ot.length;++st)it[ot[st]]!=null&&(this[ot[st]]=it[ot[st]])}nt.prototype.targetKey="",nt.prototype.formula=null,nt.prototype.numberValue=null;let rt;return Object.defineProperty(nt.prototype,"value",{get:$util.oneOfGetter(rt=["formula","numberValue"]),set:$util.oneOfSetter(rt)}),nt.create=function(ot){return new nt(ot)},nt.encode=function(ot,st){return st||(st=$Writer.create()),ot.targetKey!=null&&Object.hasOwnProperty.call(ot,"targetKey")&&st.uint32(10).string(ot.targetKey),ot.formula!=null&&Object.hasOwnProperty.call(ot,"formula")&&st.uint32(18).string(ot.formula),ot.numberValue!=null&&Object.hasOwnProperty.call(ot,"numberValue")&&st.uint32(24).int32(ot.numberValue),st},nt.encodeDelimited=function(ot,st){return this.encode(ot,st).ldelim()},nt.decode=function(ot,st){ot instanceof $Reader||(ot=$Reader.create(ot));let at=st===void 0?ot.len:ot.pos+st,lt=new $root.data.EffectDbo.SetActionDbo;for(;ot.pos<at;){let ct=ot.uint32();switch(ct>>>3){case 1:{lt.targetKey=ot.string();break}case 2:{lt.formula=ot.string();break}case 3:{lt.numberValue=ot.int32();break}default:ot.skipType(ct&7);break}}return lt},nt.decodeDelimited=function(ot){return ot instanceof $Reader||(ot=new $Reader(ot)),this.decode(ot,ot.uint32())},nt.verify=function(ot){if(typeof ot!="object"||ot===null)return"object expected";let st={};if(ot.targetKey!=null&&ot.hasOwnProperty("targetKey")&&!$util.isString(ot.targetKey))return"targetKey: string expected";if(ot.formula!=null&&ot.hasOwnProperty("formula")&&(st.value=1,!$util.isString(ot.formula)))return"formula: string expected";if(ot.numberValue!=null&&ot.hasOwnProperty("numberValue")){if(st.value===1)return"value: multiple values";if(st.value=1,!$util.isInteger(ot.numberValue))return"numberValue: integer expected"}return null},nt.fromObject=function(ot){if(ot instanceof $root.data.EffectDbo.SetActionDbo)return ot;let st=new $root.data.EffectDbo.SetActionDbo;return ot.targetKey!=null&&(st.targetKey=String(ot.targetKey)),ot.formula!=null&&(st.formula=String(ot.formula)),ot.numberValue!=null&&(st.numberValue=ot.numberValue|0),st},nt.toObject=function(ot,st){st||(st={});let at={};return st.defaults&&(at.targetKey=""),ot.targetKey!=null&&ot.hasOwnProperty("targetKey")&&(at.targetKey=ot.targetKey),ot.formula!=null&&ot.hasOwnProperty("formula")&&(at.formula=ot.formula,st.oneofs&&(at.value="formula")),ot.numberValue!=null&&ot.hasOwnProperty("numberValue")&&(at.numberValue=ot.numberValue,st.oneofs&&(at.value="numberValue")),at},nt.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},nt.getTypeUrl=function(ot){return ot===void 0&&(ot="type.googleapis.com"),ot+"/data.EffectDbo.SetActionDbo"},nt}(),_e.AddActionDbo=function(){function nt(rt){if(rt)for(let it=Object.keys(rt),ot=0;ot<it.length;++ot)rt[it[ot]]!=null&&(this[it[ot]]=rt[it[ot]])}return nt.prototype.targetKey="",nt.prototype.numberDelta=0,nt.create=function(it){return new nt(it)},nt.encode=function(it,ot){return ot||(ot=$Writer.create()),it.targetKey!=null&&Object.hasOwnProperty.call(it,"targetKey")&&ot.uint32(10).string(it.targetKey),it.numberDelta!=null&&Object.hasOwnProperty.call(it,"numberDelta")&&ot.uint32(16).int32(it.numberDelta),ot},nt.encodeDelimited=function(it,ot){return this.encode(it,ot).ldelim()},nt.decode=function(it,ot){it instanceof $Reader||(it=$Reader.create(it));let st=ot===void 0?it.len:it.pos+ot,at=new $root.data.EffectDbo.AddActionDbo;for(;it.pos<st;){let lt=it.uint32();switch(lt>>>3){case 1:{at.targetKey=it.string();break}case 2:{at.numberDelta=it.int32();break}default:it.skipType(lt&7);break}}return at},nt.decodeDelimited=function(it){return it instanceof $Reader||(it=new $Reader(it)),this.decode(it,it.uint32())},nt.verify=function(it){return typeof it!="object"||it===null?"object expected":it.targetKey!=null&&it.hasOwnProperty("targetKey")&&!$util.isString(it.targetKey)?"targetKey: string expected":it.numberDelta!=null&&it.hasOwnProperty("numberDelta")&&!$util.isInteger(it.numberDelta)?"numberDelta: integer expected":null},nt.fromObject=function(it){if(it instanceof $root.data.EffectDbo.AddActionDbo)return it;let ot=new $root.data.EffectDbo.AddActionDbo;return it.targetKey!=null&&(ot.targetKey=String(it.targetKey)),it.numberDelta!=null&&(ot.numberDelta=it.numberDelta|0),ot},nt.toObject=function(it,ot){ot||(ot={});let st={};return ot.defaults&&(st.targetKey="",st.numberDelta=0),it.targetKey!=null&&it.hasOwnProperty("targetKey")&&(st.targetKey=it.targetKey),it.numberDelta!=null&&it.hasOwnProperty("numberDelta")&&(st.numberDelta=it.numberDelta),st},nt.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},nt.getTypeUrl=function(it){return it===void 0&&(it="type.googleapis.com"),it+"/data.EffectDbo.AddActionDbo"},nt}(),_e}(),et.FeatureModificationDbo=function(){function _e(tt){if(this.stackModifications=[],tt)for(let nt=Object.keys(tt),rt=0;rt<nt.length;++rt)tt[nt[rt]]!=null&&(this[nt[rt]]=tt[nt[rt]])}return _e.prototype.targetFeatureId="",_e.prototype.stackModifications=$util.emptyArray,_e.create=function(nt){return new _e(nt)},_e.encode=function(nt,rt){if(rt||(rt=$Writer.create()),nt.targetFeatureId!=null&&Object.hasOwnProperty.call(nt,"targetFeatureId")&&rt.uint32(10).string(nt.targetFeatureId),nt.stackModifications!=null&&nt.stackModifications.length)for(let it=0;it<nt.stackModifications.length;++it)$root.data.StackModificationDbo.encode(nt.stackModifications[it],rt.uint32(18).fork()).ldelim();return rt},_e.encodeDelimited=function(nt,rt){return this.encode(nt,rt).ldelim()},_e.decode=function(nt,rt){nt instanceof $Reader||(nt=$Reader.create(nt));let it=rt===void 0?nt.len:nt.pos+rt,ot=new $root.data.FeatureModificationDbo;for(;nt.pos<it;){let st=nt.uint32();switch(st>>>3){case 1:{ot.targetFeatureId=nt.string();break}case 2:{ot.stackModifications&&ot.stackModifications.length||(ot.stackModifications=[]),ot.stackModifications.push($root.data.StackModificationDbo.decode(nt,nt.uint32()));break}default:nt.skipType(st&7);break}}return ot},_e.decodeDelimited=function(nt){return nt instanceof $Reader||(nt=new $Reader(nt)),this.decode(nt,nt.uint32())},_e.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.targetFeatureId!=null&&nt.hasOwnProperty("targetFeatureId")&&!$util.isString(nt.targetFeatureId))return"targetFeatureId: string expected";if(nt.stackModifications!=null&&nt.hasOwnProperty("stackModifications")){if(!Array.isArray(nt.stackModifications))return"stackModifications: array expected";for(let rt=0;rt<nt.stackModifications.length;++rt){let it=$root.data.StackModificationDbo.verify(nt.stackModifications[rt]);if(it)return"stackModifications."+it}}return null},_e.fromObject=function(nt){if(nt instanceof $root.data.FeatureModificationDbo)return nt;let rt=new $root.data.FeatureModificationDbo;if(nt.targetFeatureId!=null&&(rt.targetFeatureId=String(nt.targetFeatureId)),nt.stackModifications){if(!Array.isArray(nt.stackModifications))throw TypeError(".data.FeatureModificationDbo.stackModifications: array expected");rt.stackModifications=[];for(let it=0;it<nt.stackModifications.length;++it){if(typeof nt.stackModifications[it]!="object")throw TypeError(".data.FeatureModificationDbo.stackModifications: object expected");rt.stackModifications[it]=$root.data.StackModificationDbo.fromObject(nt.stackModifications[it])}}return rt},_e.toObject=function(nt,rt){rt||(rt={});let it={};if((rt.arrays||rt.defaults)&&(it.stackModifications=[]),rt.defaults&&(it.targetFeatureId=""),nt.targetFeatureId!=null&&nt.hasOwnProperty("targetFeatureId")&&(it.targetFeatureId=nt.targetFeatureId),nt.stackModifications&&nt.stackModifications.length){it.stackModifications=[];for(let ot=0;ot<nt.stackModifications.length;++ot)it.stackModifications[ot]=$root.data.StackModificationDbo.toObject(nt.stackModifications[ot],rt)}return it},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/data.FeatureModificationDbo"},_e}(),et.StackModificationDbo=function(){function _e(tt){if(this.linksToAdd=[],this.linksToRemove=[],tt)for(let nt=Object.keys(tt),rt=0;rt<nt.length;++rt)tt[nt[rt]]!=null&&(this[nt[rt]]=tt[nt[rt]])}return _e.prototype.targetStackCount=0,_e.prototype.linksToAdd=$util.emptyArray,_e.prototype.linksToRemove=$util.emptyArray,_e.create=function(nt){return new _e(nt)},_e.encode=function(nt,rt){if(rt||(rt=$Writer.create()),nt.targetStackCount!=null&&Object.hasOwnProperty.call(nt,"targetStackCount")&&rt.uint32(8).int32(nt.targetStackCount),nt.linksToAdd!=null&&nt.linksToAdd.length)for(let it=0;it<nt.linksToAdd.length;++it)rt.uint32(18).string(nt.linksToAdd[it]);if(nt.linksToRemove!=null&&nt.linksToRemove.length)for(let it=0;it<nt.linksToRemove.length;++it)rt.uint32(26).string(nt.linksToRemove[it]);return rt},_e.encodeDelimited=function(nt,rt){return this.encode(nt,rt).ldelim()},_e.decode=function(nt,rt){nt instanceof $Reader||(nt=$Reader.create(nt));let it=rt===void 0?nt.len:nt.pos+rt,ot=new $root.data.StackModificationDbo;for(;nt.pos<it;){let st=nt.uint32();switch(st>>>3){case 1:{ot.targetStackCount=nt.int32();break}case 2:{ot.linksToAdd&&ot.linksToAdd.length||(ot.linksToAdd=[]),ot.linksToAdd.push(nt.string());break}case 3:{ot.linksToRemove&&ot.linksToRemove.length||(ot.linksToRemove=[]),ot.linksToRemove.push(nt.string());break}default:nt.skipType(st&7);break}}return ot},_e.decodeDelimited=function(nt){return nt instanceof $Reader||(nt=new $Reader(nt)),this.decode(nt,nt.uint32())},_e.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.targetStackCount!=null&&nt.hasOwnProperty("targetStackCount")&&!$util.isInteger(nt.targetStackCount))return"targetStackCount: integer expected";if(nt.linksToAdd!=null&&nt.hasOwnProperty("linksToAdd")){if(!Array.isArray(nt.linksToAdd))return"linksToAdd: array expected";for(let rt=0;rt<nt.linksToAdd.length;++rt)if(!$util.isString(nt.linksToAdd[rt]))return"linksToAdd: string[] expected"}if(nt.linksToRemove!=null&&nt.hasOwnProperty("linksToRemove")){if(!Array.isArray(nt.linksToRemove))return"linksToRemove: array expected";for(let rt=0;rt<nt.linksToRemove.length;++rt)if(!$util.isString(nt.linksToRemove[rt]))return"linksToRemove: string[] expected"}return null},_e.fromObject=function(nt){if(nt instanceof $root.data.StackModificationDbo)return nt;let rt=new $root.data.StackModificationDbo;if(nt.targetStackCount!=null&&(rt.targetStackCount=nt.targetStackCount|0),nt.linksToAdd){if(!Array.isArray(nt.linksToAdd))throw TypeError(".data.StackModificationDbo.linksToAdd: array expected");rt.linksToAdd=[];for(let it=0;it<nt.linksToAdd.length;++it)rt.linksToAdd[it]=String(nt.linksToAdd[it])}if(nt.linksToRemove){if(!Array.isArray(nt.linksToRemove))throw TypeError(".data.StackModificationDbo.linksToRemove: array expected");rt.linksToRemove=[];for(let it=0;it<nt.linksToRemove.length;++it)rt.linksToRemove[it]=String(nt.linksToRemove[it])}return rt},_e.toObject=function(nt,rt){rt||(rt={});let it={};if((rt.arrays||rt.defaults)&&(it.linksToAdd=[],it.linksToRemove=[]),rt.defaults&&(it.targetStackCount=0),nt.targetStackCount!=null&&nt.hasOwnProperty("targetStackCount")&&(it.targetStackCount=nt.targetStackCount),nt.linksToAdd&&nt.linksToAdd.length){it.linksToAdd=[];for(let ot=0;ot<nt.linksToAdd.length;++ot)it.linksToAdd[ot]=nt.linksToAdd[ot]}if(nt.linksToRemove&&nt.linksToRemove.length){it.linksToRemove=[];for(let ot=0;ot<nt.linksToRemove.length;++ot)it.linksToRemove[ot]=nt.linksToRemove[ot]}return it},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/data.StackModificationDbo"},_e}(),et.DescriptionDbo=function(){function _e(tt){if(this.sections={},tt)for(let nt=Object.keys(tt),rt=0;rt<nt.length;++rt)tt[nt[rt]]!=null&&(this[nt[rt]]=tt[nt[rt]])}return _e.prototype.text="",_e.prototype.sections=$util.emptyObject,_e.create=function(nt){return new _e(nt)},_e.encode=function(nt,rt){if(rt||(rt=$Writer.create()),nt.text!=null&&Object.hasOwnProperty.call(nt,"text")&&rt.uint32(10).string(nt.text),nt.sections!=null&&Object.hasOwnProperty.call(nt,"sections"))for(let it=Object.keys(nt.sections),ot=0;ot<it.length;++ot)rt.uint32(18).fork().uint32(10).string(it[ot]).uint32(18).string(nt.sections[it[ot]]).ldelim();return rt},_e.encodeDelimited=function(nt,rt){return this.encode(nt,rt).ldelim()},_e.decode=function(nt,rt){nt instanceof $Reader||(nt=$Reader.create(nt));let it=rt===void 0?nt.len:nt.pos+rt,ot=new $root.data.DescriptionDbo,st,at;for(;nt.pos<it;){let lt=nt.uint32();switch(lt>>>3){case 1:{ot.text=nt.string();break}case 2:{ot.sections===$util.emptyObject&&(ot.sections={});let ct=nt.uint32()+nt.pos;for(st="",at="";nt.pos<ct;){let ut=nt.uint32();switch(ut>>>3){case 1:st=nt.string();break;case 2:at=nt.string();break;default:nt.skipType(ut&7);break}}ot.sections[st]=at;break}default:nt.skipType(lt&7);break}}return ot},_e.decodeDelimited=function(nt){return nt instanceof $Reader||(nt=new $Reader(nt)),this.decode(nt,nt.uint32())},_e.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.text!=null&&nt.hasOwnProperty("text")&&!$util.isString(nt.text))return"text: string expected";if(nt.sections!=null&&nt.hasOwnProperty("sections")){if(!$util.isObject(nt.sections))return"sections: object expected";let rt=Object.keys(nt.sections);for(let it=0;it<rt.length;++it)if(!$util.isString(nt.sections[rt[it]]))return"sections: string{k:string} expected"}return null},_e.fromObject=function(nt){if(nt instanceof $root.data.DescriptionDbo)return nt;let rt=new $root.data.DescriptionDbo;if(nt.text!=null&&(rt.text=String(nt.text)),nt.sections){if(typeof nt.sections!="object")throw TypeError(".data.DescriptionDbo.sections: object expected");rt.sections={};for(let it=Object.keys(nt.sections),ot=0;ot<it.length;++ot)rt.sections[it[ot]]=String(nt.sections[it[ot]])}return rt},_e.toObject=function(nt,rt){rt||(rt={});let it={};(rt.objects||rt.defaults)&&(it.sections={}),rt.defaults&&(it.text=""),nt.text!=null&&nt.hasOwnProperty("text")&&(it.text=nt.text);let ot;if(nt.sections&&(ot=Object.keys(nt.sections)).length){it.sections={};for(let st=0;st<ot.length;++st)it.sections[ot[st]]=nt.sections[ot[st]]}return it},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/data.DescriptionDbo"},_e}(),et.FeatureSummaryDbo=function(){function _e(nt){if(this.tags=[],nt)for(let rt=Object.keys(nt),it=0;it<rt.length;++it)nt[rt[it]]!=null&&(this[rt[it]]=nt[rt[it]])}_e.prototype.id="",_e.prototype.name="",_e.prototype.tags=$util.emptyArray,_e.prototype.enabledFormula="",_e.prototype.maxStacks=null,_e.prototype.label=null,_e.prototype.options=null,_e.prototype.typeAlias="";let tt;return Object.defineProperty(_e.prototype,"_maxStacks",{get:$util.oneOfGetter(tt=["maxStacks"]),set:$util.oneOfSetter(tt)}),Object.defineProperty(_e.prototype,"_label",{get:$util.oneOfGetter(tt=["label"]),set:$util.oneOfSetter(tt)}),_e.create=function(rt){return new _e(rt)},_e.encode=function(rt,it){if(it||(it=$Writer.create()),rt.id!=null&&Object.hasOwnProperty.call(rt,"id")&&it.uint32(10).string(rt.id),rt.name!=null&&Object.hasOwnProperty.call(rt,"name")&&it.uint32(18).string(rt.name),rt.tags!=null&&rt.tags.length)for(let ot=0;ot<rt.tags.length;++ot)it.uint32(26).string(rt.tags[ot]);return rt.enabledFormula!=null&&Object.hasOwnProperty.call(rt,"enabledFormula")&&it.uint32(34).string(rt.enabledFormula),rt.maxStacks!=null&&Object.hasOwnProperty.call(rt,"maxStacks")&&it.uint32(40).uint32(rt.maxStacks),rt.label!=null&&Object.hasOwnProperty.call(rt,"label")&&it.uint32(50).string(rt.label),rt.options!=null&&Object.hasOwnProperty.call(rt,"options")&&$root.data.FeatureOptionsDbo.encode(rt.options,it.uint32(58).fork()).ldelim(),rt.typeAlias!=null&&Object.hasOwnProperty.call(rt,"typeAlias")&&it.uint32(66).string(rt.typeAlias),it},_e.encodeDelimited=function(rt,it){return this.encode(rt,it).ldelim()},_e.decode=function(rt,it){rt instanceof $Reader||(rt=$Reader.create(rt));let ot=it===void 0?rt.len:rt.pos+it,st=new $root.data.FeatureSummaryDbo;for(;rt.pos<ot;){let at=rt.uint32();switch(at>>>3){case 1:{st.id=rt.string();break}case 2:{st.name=rt.string();break}case 3:{st.tags&&st.tags.length||(st.tags=[]),st.tags.push(rt.string());break}case 4:{st.enabledFormula=rt.string();break}case 5:{st.maxStacks=rt.uint32();break}case 6:{st.label=rt.string();break}case 7:{st.options=$root.data.FeatureOptionsDbo.decode(rt,rt.uint32());break}case 8:{st.typeAlias=rt.string();break}default:rt.skipType(at&7);break}}return st},_e.decodeDelimited=function(rt){return rt instanceof $Reader||(rt=new $Reader(rt)),this.decode(rt,rt.uint32())},_e.verify=function(rt){if(typeof rt!="object"||rt===null)return"object expected";if(rt.id!=null&&rt.hasOwnProperty("id")&&!$util.isString(rt.id))return"id: string expected";if(rt.name!=null&&rt.hasOwnProperty("name")&&!$util.isString(rt.name))return"name: string expected";if(rt.tags!=null&&rt.hasOwnProperty("tags")){if(!Array.isArray(rt.tags))return"tags: array expected";for(let it=0;it<rt.tags.length;++it)if(!$util.isString(rt.tags[it]))return"tags: string[] expected"}if(rt.enabledFormula!=null&&rt.hasOwnProperty("enabledFormula")&&!$util.isString(rt.enabledFormula))return"enabledFormula: string expected";if(rt.maxStacks!=null&&rt.hasOwnProperty("maxStacks")&&!$util.isInteger(rt.maxStacks))return"maxStacks: integer expected";if(rt.label!=null&&rt.hasOwnProperty("label")&&!$util.isString(rt.label))return"label: string expected";if(rt.options!=null&&rt.hasOwnProperty("options")){let it=$root.data.FeatureOptionsDbo.verify(rt.options);if(it)return"options."+it}return rt.typeAlias!=null&&rt.hasOwnProperty("typeAlias")&&!$util.isString(rt.typeAlias)?"typeAlias: string expected":null},_e.fromObject=function(rt){if(rt instanceof $root.data.FeatureSummaryDbo)return rt;let it=new $root.data.FeatureSummaryDbo;if(rt.id!=null&&(it.id=String(rt.id)),rt.name!=null&&(it.name=String(rt.name)),rt.tags){if(!Array.isArray(rt.tags))throw TypeError(".data.FeatureSummaryDbo.tags: array expected");it.tags=[];for(let ot=0;ot<rt.tags.length;++ot)it.tags[ot]=String(rt.tags[ot])}if(rt.enabledFormula!=null&&(it.enabledFormula=String(rt.enabledFormula)),rt.maxStacks!=null&&(it.maxStacks=rt.maxStacks>>>0),rt.label!=null&&(it.label=String(rt.label)),rt.options!=null){if(typeof rt.options!="object")throw TypeError(".data.FeatureSummaryDbo.options: object expected");it.options=$root.data.FeatureOptionsDbo.fromObject(rt.options)}return rt.typeAlias!=null&&(it.typeAlias=String(rt.typeAlias)),it},_e.toObject=function(rt,it){it||(it={});let ot={};if((it.arrays||it.defaults)&&(ot.tags=[]),it.defaults&&(ot.id="",ot.name="",ot.enabledFormula="",ot.options=null,ot.typeAlias=""),rt.id!=null&&rt.hasOwnProperty("id")&&(ot.id=rt.id),rt.name!=null&&rt.hasOwnProperty("name")&&(ot.name=rt.name),rt.tags&&rt.tags.length){ot.tags=[];for(let st=0;st<rt.tags.length;++st)ot.tags[st]=rt.tags[st]}return rt.enabledFormula!=null&&rt.hasOwnProperty("enabledFormula")&&(ot.enabledFormula=rt.enabledFormula),rt.maxStacks!=null&&rt.hasOwnProperty("maxStacks")&&(ot.maxStacks=rt.maxStacks,it.oneofs&&(ot._maxStacks="maxStacks")),rt.label!=null&&rt.hasOwnProperty("label")&&(ot.label=rt.label,it.oneofs&&(ot._label="label")),rt.options!=null&&rt.hasOwnProperty("options")&&(ot.options=$root.data.FeatureOptionsDbo.toObject(rt.options,it)),rt.typeAlias!=null&&rt.hasOwnProperty("typeAlias")&&(ot.typeAlias=rt.typeAlias),ot},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(rt){return rt===void 0&&(rt="type.googleapis.com"),rt+"/data.FeatureSummaryDbo"},_e}(),et.FeatureDbo=function(){function _e(nt){if(this.tags=[],this.conditionalStacks=[],nt)for(let rt=Object.keys(nt),it=0;it<rt.length;++it)nt[rt[it]]!=null&&(this[rt[it]]=nt[rt[it]])}_e.prototype.id="",_e.prototype.name="",_e.prototype.tags=$util.emptyArray,_e.prototype.enabledFormula="",_e.prototype.maxStacks=null,_e.prototype.label=null,_e.prototype.options=null,_e.prototype.typeAlias="",_e.prototype.description=null,_e.prototype.stacks=null,_e.prototype.conditionalStacks=$util.emptyArray;let tt;return Object.defineProperty(_e.prototype,"_maxStacks",{get:$util.oneOfGetter(tt=["maxStacks"]),set:$util.oneOfSetter(tt)}),Object.defineProperty(_e.prototype,"_label",{get:$util.oneOfGetter(tt=["label"]),set:$util.oneOfSetter(tt)}),_e.create=function(rt){return new _e(rt)},_e.encode=function(rt,it){if(it||(it=$Writer.create()),rt.id!=null&&Object.hasOwnProperty.call(rt,"id")&&it.uint32(10).string(rt.id),rt.name!=null&&Object.hasOwnProperty.call(rt,"name")&&it.uint32(18).string(rt.name),rt.tags!=null&&rt.tags.length)for(let ot=0;ot<rt.tags.length;++ot)it.uint32(26).string(rt.tags[ot]);if(rt.enabledFormula!=null&&Object.hasOwnProperty.call(rt,"enabledFormula")&&it.uint32(34).string(rt.enabledFormula),rt.maxStacks!=null&&Object.hasOwnProperty.call(rt,"maxStacks")&&it.uint32(40).uint32(rt.maxStacks),rt.label!=null&&Object.hasOwnProperty.call(rt,"label")&&it.uint32(50).string(rt.label),rt.options!=null&&Object.hasOwnProperty.call(rt,"options")&&$root.data.FeatureOptionsDbo.encode(rt.options,it.uint32(58).fork()).ldelim(),rt.typeAlias!=null&&Object.hasOwnProperty.call(rt,"typeAlias")&&it.uint32(66).string(rt.typeAlias),rt.description!=null&&Object.hasOwnProperty.call(rt,"description")&&$root.data.DescriptionDbo.encode(rt.description,it.uint32(802).fork()).ldelim(),rt.stacks!=null&&Object.hasOwnProperty.call(rt,"stacks")&&$root.data.StacksDbo.encode(rt.stacks,it.uint32(810).fork()).ldelim(),rt.conditionalStacks!=null&&rt.conditionalStacks.length)for(let ot=0;ot<rt.conditionalStacks.length;++ot)$root.data.ConditionalStackDbo.encode(rt.conditionalStacks[ot],it.uint32(826).fork()).ldelim();return it},_e.encodeDelimited=function(rt,it){return this.encode(rt,it).ldelim()},_e.decode=function(rt,it){rt instanceof $Reader||(rt=$Reader.create(rt));let ot=it===void 0?rt.len:rt.pos+it,st=new $root.data.FeatureDbo;for(;rt.pos<ot;){let at=rt.uint32();switch(at>>>3){case 1:{st.id=rt.string();break}case 2:{st.name=rt.string();break}case 3:{st.tags&&st.tags.length||(st.tags=[]),st.tags.push(rt.string());break}case 4:{st.enabledFormula=rt.string();break}case 5:{st.maxStacks=rt.uint32();break}case 6:{st.label=rt.string();break}case 7:{st.options=$root.data.FeatureOptionsDbo.decode(rt,rt.uint32());break}case 8:{st.typeAlias=rt.string();break}case 100:{st.description=$root.data.DescriptionDbo.decode(rt,rt.uint32());break}case 101:{st.stacks=$root.data.StacksDbo.decode(rt,rt.uint32());break}case 103:{st.conditionalStacks&&st.conditionalStacks.length||(st.conditionalStacks=[]),st.conditionalStacks.push($root.data.ConditionalStackDbo.decode(rt,rt.uint32()));break}default:rt.skipType(at&7);break}}return st},_e.decodeDelimited=function(rt){return rt instanceof $Reader||(rt=new $Reader(rt)),this.decode(rt,rt.uint32())},_e.verify=function(rt){if(typeof rt!="object"||rt===null)return"object expected";if(rt.id!=null&&rt.hasOwnProperty("id")&&!$util.isString(rt.id))return"id: string expected";if(rt.name!=null&&rt.hasOwnProperty("name")&&!$util.isString(rt.name))return"name: string expected";if(rt.tags!=null&&rt.hasOwnProperty("tags")){if(!Array.isArray(rt.tags))return"tags: array expected";for(let it=0;it<rt.tags.length;++it)if(!$util.isString(rt.tags[it]))return"tags: string[] expected"}if(rt.enabledFormula!=null&&rt.hasOwnProperty("enabledFormula")&&!$util.isString(rt.enabledFormula))return"enabledFormula: string expected";if(rt.maxStacks!=null&&rt.hasOwnProperty("maxStacks")&&!$util.isInteger(rt.maxStacks))return"maxStacks: integer expected";if(rt.label!=null&&rt.hasOwnProperty("label")&&!$util.isString(rt.label))return"label: string expected";if(rt.options!=null&&rt.hasOwnProperty("options")){let it=$root.data.FeatureOptionsDbo.verify(rt.options);if(it)return"options."+it}if(rt.typeAlias!=null&&rt.hasOwnProperty("typeAlias")&&!$util.isString(rt.typeAlias))return"typeAlias: string expected";if(rt.description!=null&&rt.hasOwnProperty("description")){let it=$root.data.DescriptionDbo.verify(rt.description);if(it)return"description."+it}if(rt.stacks!=null&&rt.hasOwnProperty("stacks")){let it=$root.data.StacksDbo.verify(rt.stacks);if(it)return"stacks."+it}if(rt.conditionalStacks!=null&&rt.hasOwnProperty("conditionalStacks")){if(!Array.isArray(rt.conditionalStacks))return"conditionalStacks: array expected";for(let it=0;it<rt.conditionalStacks.length;++it){let ot=$root.data.ConditionalStackDbo.verify(rt.conditionalStacks[it]);if(ot)return"conditionalStacks."+ot}}return null},_e.fromObject=function(rt){if(rt instanceof $root.data.FeatureDbo)return rt;let it=new $root.data.FeatureDbo;if(rt.id!=null&&(it.id=String(rt.id)),rt.name!=null&&(it.name=String(rt.name)),rt.tags){if(!Array.isArray(rt.tags))throw TypeError(".data.FeatureDbo.tags: array expected");it.tags=[];for(let ot=0;ot<rt.tags.length;++ot)it.tags[ot]=String(rt.tags[ot])}if(rt.enabledFormula!=null&&(it.enabledFormula=String(rt.enabledFormula)),rt.maxStacks!=null&&(it.maxStacks=rt.maxStacks>>>0),rt.label!=null&&(it.label=String(rt.label)),rt.options!=null){if(typeof rt.options!="object")throw TypeError(".data.FeatureDbo.options: object expected");it.options=$root.data.FeatureOptionsDbo.fromObject(rt.options)}if(rt.typeAlias!=null&&(it.typeAlias=String(rt.typeAlias)),rt.description!=null){if(typeof rt.description!="object")throw TypeError(".data.FeatureDbo.description: object expected");it.description=$root.data.DescriptionDbo.fromObject(rt.description)}if(rt.stacks!=null){if(typeof rt.stacks!="object")throw TypeError(".data.FeatureDbo.stacks: object expected");it.stacks=$root.data.StacksDbo.fromObject(rt.stacks)}if(rt.conditionalStacks){if(!Array.isArray(rt.conditionalStacks))throw TypeError(".data.FeatureDbo.conditionalStacks: array expected");it.conditionalStacks=[];for(let ot=0;ot<rt.conditionalStacks.length;++ot){if(typeof rt.conditionalStacks[ot]!="object")throw TypeError(".data.FeatureDbo.conditionalStacks: object expected");it.conditionalStacks[ot]=$root.data.ConditionalStackDbo.fromObject(rt.conditionalStacks[ot])}}return it},_e.toObject=function(rt,it){it||(it={});let ot={};if((it.arrays||it.defaults)&&(ot.tags=[],ot.conditionalStacks=[]),it.defaults&&(ot.id="",ot.name="",ot.enabledFormula="",ot.options=null,ot.typeAlias="",ot.description=null,ot.stacks=null),rt.id!=null&&rt.hasOwnProperty("id")&&(ot.id=rt.id),rt.name!=null&&rt.hasOwnProperty("name")&&(ot.name=rt.name),rt.tags&&rt.tags.length){ot.tags=[];for(let st=0;st<rt.tags.length;++st)ot.tags[st]=rt.tags[st]}if(rt.enabledFormula!=null&&rt.hasOwnProperty("enabledFormula")&&(ot.enabledFormula=rt.enabledFormula),rt.maxStacks!=null&&rt.hasOwnProperty("maxStacks")&&(ot.maxStacks=rt.maxStacks,it.oneofs&&(ot._maxStacks="maxStacks")),rt.label!=null&&rt.hasOwnProperty("label")&&(ot.label=rt.label,it.oneofs&&(ot._label="label")),rt.options!=null&&rt.hasOwnProperty("options")&&(ot.options=$root.data.FeatureOptionsDbo.toObject(rt.options,it)),rt.typeAlias!=null&&rt.hasOwnProperty("typeAlias")&&(ot.typeAlias=rt.typeAlias),rt.description!=null&&rt.hasOwnProperty("description")&&(ot.description=$root.data.DescriptionDbo.toObject(rt.description,it)),rt.stacks!=null&&rt.hasOwnProperty("stacks")&&(ot.stacks=$root.data.StacksDbo.toObject(rt.stacks,it)),rt.conditionalStacks&&rt.conditionalStacks.length){ot.conditionalStacks=[];for(let st=0;st<rt.conditionalStacks.length;++st)ot.conditionalStacks[st]=$root.data.ConditionalStackDbo.toObject(rt.conditionalStacks[st],it)}return ot},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(rt){return rt===void 0&&(rt="type.googleapis.com"),rt+"/data.FeatureDbo"},_e}(),et.FeatureOptionsDbo=function(){function _e(nt){if(nt)for(let rt=Object.keys(nt),it=0;it<rt.length;++it)nt[rt[it]]!=null&&(this[rt[it]]=nt[rt[it]])}_e.prototype.select=null;let tt;return Object.defineProperty(_e.prototype,"option",{get:$util.oneOfGetter(tt=["select"]),set:$util.oneOfSetter(tt)}),_e.create=function(rt){return new _e(rt)},_e.encode=function(rt,it){return it||(it=$Writer.create()),rt.select!=null&&Object.hasOwnProperty.call(rt,"select")&&$root.data.FeatureOptionsDbo.Select.encode(rt.select,it.uint32(10).fork()).ldelim(),it},_e.encodeDelimited=function(rt,it){return this.encode(rt,it).ldelim()},_e.decode=function(rt,it){rt instanceof $Reader||(rt=$Reader.create(rt));let ot=it===void 0?rt.len:rt.pos+it,st=new $root.data.FeatureOptionsDbo;for(;rt.pos<ot;){let at=rt.uint32();switch(at>>>3){case 1:{st.select=$root.data.FeatureOptionsDbo.Select.decode(rt,rt.uint32());break}default:rt.skipType(at&7);break}}return st},_e.decodeDelimited=function(rt){return rt instanceof $Reader||(rt=new $Reader(rt)),this.decode(rt,rt.uint32())},_e.verify=function(rt){if(typeof rt!="object"||rt===null)return"object expected";if(rt.select!=null&&rt.hasOwnProperty("select")){let it=$root.data.FeatureOptionsDbo.Select.verify(rt.select);if(it)return"select."+it}return null},_e.fromObject=function(rt){if(rt instanceof $root.data.FeatureOptionsDbo)return rt;let it=new $root.data.FeatureOptionsDbo;if(rt.select!=null){if(typeof rt.select!="object")throw TypeError(".data.FeatureOptionsDbo.select: object expected");it.select=$root.data.FeatureOptionsDbo.Select.fromObject(rt.select)}return it},_e.toObject=function(rt,it){it||(it={});let ot={};return rt.select!=null&&rt.hasOwnProperty("select")&&(ot.select=$root.data.FeatureOptionsDbo.Select.toObject(rt.select,it),it.oneofs&&(ot.option="select")),ot},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(rt){return rt===void 0&&(rt="type.googleapis.com"),rt+"/data.FeatureOptionsDbo"},_e.Select=function(){function nt(rt){if(rt)for(let it=Object.keys(rt),ot=0;ot<it.length;++ot)rt[it[ot]]!=null&&(this[it[ot]]=rt[it[ot]])}return nt.prototype.optionTag="",nt.prototype.idTemplate="",nt.prototype.prerequisitesTemplate="",nt.create=function(it){return new nt(it)},nt.encode=function(it,ot){return ot||(ot=$Writer.create()),it.optionTag!=null&&Object.hasOwnProperty.call(it,"optionTag")&&ot.uint32(10).string(it.optionTag),it.idTemplate!=null&&Object.hasOwnProperty.call(it,"idTemplate")&&ot.uint32(18).string(it.idTemplate),it.prerequisitesTemplate!=null&&Object.hasOwnProperty.call(it,"prerequisitesTemplate")&&ot.uint32(26).string(it.prerequisitesTemplate),ot},nt.encodeDelimited=function(it,ot){return this.encode(it,ot).ldelim()},nt.decode=function(it,ot){it instanceof $Reader||(it=$Reader.create(it));let st=ot===void 0?it.len:it.pos+ot,at=new $root.data.FeatureOptionsDbo.Select;for(;it.pos<st;){let lt=it.uint32();switch(lt>>>3){case 1:{at.optionTag=it.string();break}case 2:{at.idTemplate=it.string();break}case 3:{at.prerequisitesTemplate=it.string();break}default:it.skipType(lt&7);break}}return at},nt.decodeDelimited=function(it){return it instanceof $Reader||(it=new $Reader(it)),this.decode(it,it.uint32())},nt.verify=function(it){return typeof it!="object"||it===null?"object expected":it.optionTag!=null&&it.hasOwnProperty("optionTag")&&!$util.isString(it.optionTag)?"optionTag: string expected":it.idTemplate!=null&&it.hasOwnProperty("idTemplate")&&!$util.isString(it.idTemplate)?"idTemplate: string expected":it.prerequisitesTemplate!=null&&it.hasOwnProperty("prerequisitesTemplate")&&!$util.isString(it.prerequisitesTemplate)?"prerequisitesTemplate: string expected":null},nt.fromObject=function(it){if(it instanceof $root.data.FeatureOptionsDbo.Select)return it;let ot=new $root.data.FeatureOptionsDbo.Select;return it.optionTag!=null&&(ot.optionTag=String(it.optionTag)),it.idTemplate!=null&&(ot.idTemplate=String(it.idTemplate)),it.prerequisitesTemplate!=null&&(ot.prerequisitesTemplate=String(it.prerequisitesTemplate)),ot},nt.toObject=function(it,ot){ot||(ot={});let st={};return ot.defaults&&(st.optionTag="",st.idTemplate="",st.prerequisitesTemplate=""),it.optionTag!=null&&it.hasOwnProperty("optionTag")&&(st.optionTag=it.optionTag),it.idTemplate!=null&&it.hasOwnProperty("idTemplate")&&(st.idTemplate=it.idTemplate),it.prerequisitesTemplate!=null&&it.hasOwnProperty("prerequisitesTemplate")&&(st.prerequisitesTemplate=it.prerequisitesTemplate),st},nt.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},nt.getTypeUrl=function(it){return it===void 0&&(it="type.googleapis.com"),it+"/data.FeatureOptionsDbo.Select"},nt}(),_e}(),et.CharacterTemplateDbo=function(){function _e(tt){if(this.levels=[],tt)for(let nt=Object.keys(tt),rt=0;rt<nt.length;++rt)tt[nt[rt]]!=null&&(this[nt[rt]]=tt[nt[rt]])}return _e.prototype.levels=$util.emptyArray,_e.create=function(nt){return new _e(nt)},_e.encode=function(nt,rt){if(rt||(rt=$Writer.create()),nt.levels!=null&&nt.levels.length)for(let it=0;it<nt.levels.length;++it)$root.data.CharacterLevelTemplateDbo.encode(nt.levels[it],rt.uint32(10).fork()).ldelim();return rt},_e.encodeDelimited=function(nt,rt){return this.encode(nt,rt).ldelim()},_e.decode=function(nt,rt){nt instanceof $Reader||(nt=$Reader.create(nt));let it=rt===void 0?nt.len:nt.pos+rt,ot=new $root.data.CharacterTemplateDbo;for(;nt.pos<it;){let st=nt.uint32();switch(st>>>3){case 1:{ot.levels&&ot.levels.length||(ot.levels=[]),ot.levels.push($root.data.CharacterLevelTemplateDbo.decode(nt,nt.uint32()));break}default:nt.skipType(st&7);break}}return ot},_e.decodeDelimited=function(nt){return nt instanceof $Reader||(nt=new $Reader(nt)),this.decode(nt,nt.uint32())},_e.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.levels!=null&&nt.hasOwnProperty("levels")){if(!Array.isArray(nt.levels))return"levels: array expected";for(let rt=0;rt<nt.levels.length;++rt){let it=$root.data.CharacterLevelTemplateDbo.verify(nt.levels[rt]);if(it)return"levels."+it}}return null},_e.fromObject=function(nt){if(nt instanceof $root.data.CharacterTemplateDbo)return nt;let rt=new $root.data.CharacterTemplateDbo;if(nt.levels){if(!Array.isArray(nt.levels))throw TypeError(".data.CharacterTemplateDbo.levels: array expected");rt.levels=[];for(let it=0;it<nt.levels.length;++it){if(typeof nt.levels[it]!="object")throw TypeError(".data.CharacterTemplateDbo.levels: object expected");rt.levels[it]=$root.data.CharacterLevelTemplateDbo.fromObject(nt.levels[it])}}return rt},_e.toObject=function(nt,rt){rt||(rt={});let it={};if((rt.arrays||rt.defaults)&&(it.levels=[]),nt.levels&&nt.levels.length){it.levels=[];for(let ot=0;ot<nt.levels.length;++ot)it.levels[ot]=$root.data.CharacterLevelTemplateDbo.toObject(nt.levels[ot],rt)}return it},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/data.CharacterTemplateDbo"},_e}(),et.CharacterLevelTemplateDbo=function(){function _e(tt){if(this.effects=[],this.links=[],this.choices=[],tt)for(let nt=Object.keys(tt),rt=0;rt<nt.length;++rt)tt[nt[rt]]!=null&&(this[nt[rt]]=tt[nt[rt]])}return _e.prototype.levelNumber=0,_e.prototype.effects=$util.emptyArray,_e.prototype.links=$util.emptyArray,_e.prototype.choices=$util.emptyArray,_e.create=function(nt){return new _e(nt)},_e.encode=function(nt,rt){if(rt||(rt=$Writer.create()),nt.levelNumber!=null&&Object.hasOwnProperty.call(nt,"levelNumber")&&rt.uint32(8).uint32(nt.levelNumber),nt.effects!=null&&nt.effects.length)for(let it=0;it<nt.effects.length;++it)$root.data.EffectDbo.encode(nt.effects[it],rt.uint32(810).fork()).ldelim();if(nt.links!=null&&nt.links.length)for(let it=0;it<nt.links.length;++it)rt.uint32(818).string(nt.links[it]);if(nt.choices!=null&&nt.choices.length)for(let it=0;it<nt.choices.length;++it)$root.data.ChoiceDbo.encode(nt.choices[it],rt.uint32(826).fork()).ldelim();return rt},_e.encodeDelimited=function(nt,rt){return this.encode(nt,rt).ldelim()},_e.decode=function(nt,rt){nt instanceof $Reader||(nt=$Reader.create(nt));let it=rt===void 0?nt.len:nt.pos+rt,ot=new $root.data.CharacterLevelTemplateDbo;for(;nt.pos<it;){let st=nt.uint32();switch(st>>>3){case 1:{ot.levelNumber=nt.uint32();break}case 101:{ot.effects&&ot.effects.length||(ot.effects=[]),ot.effects.push($root.data.EffectDbo.decode(nt,nt.uint32()));break}case 102:{ot.links&&ot.links.length||(ot.links=[]),ot.links.push(nt.string());break}case 103:{ot.choices&&ot.choices.length||(ot.choices=[]),ot.choices.push($root.data.ChoiceDbo.decode(nt,nt.uint32()));break}default:nt.skipType(st&7);break}}return ot},_e.decodeDelimited=function(nt){return nt instanceof $Reader||(nt=new $Reader(nt)),this.decode(nt,nt.uint32())},_e.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.levelNumber!=null&&nt.hasOwnProperty("levelNumber")&&!$util.isInteger(nt.levelNumber))return"levelNumber: integer expected";if(nt.effects!=null&&nt.hasOwnProperty("effects")){if(!Array.isArray(nt.effects))return"effects: array expected";for(let rt=0;rt<nt.effects.length;++rt){let it=$root.data.EffectDbo.verify(nt.effects[rt]);if(it)return"effects."+it}}if(nt.links!=null&&nt.hasOwnProperty("links")){if(!Array.isArray(nt.links))return"links: array expected";for(let rt=0;rt<nt.links.length;++rt)if(!$util.isString(nt.links[rt]))return"links: string[] expected"}if(nt.choices!=null&&nt.hasOwnProperty("choices")){if(!Array.isArray(nt.choices))return"choices: array expected";for(let rt=0;rt<nt.choices.length;++rt){let it=$root.data.ChoiceDbo.verify(nt.choices[rt]);if(it)return"choices."+it}}return null},_e.fromObject=function(nt){if(nt instanceof $root.data.CharacterLevelTemplateDbo)return nt;let rt=new $root.data.CharacterLevelTemplateDbo;if(nt.levelNumber!=null&&(rt.levelNumber=nt.levelNumber>>>0),nt.effects){if(!Array.isArray(nt.effects))throw TypeError(".data.CharacterLevelTemplateDbo.effects: array expected");rt.effects=[];for(let it=0;it<nt.effects.length;++it){if(typeof nt.effects[it]!="object")throw TypeError(".data.CharacterLevelTemplateDbo.effects: object expected");rt.effects[it]=$root.data.EffectDbo.fromObject(nt.effects[it])}}if(nt.links){if(!Array.isArray(nt.links))throw TypeError(".data.CharacterLevelTemplateDbo.links: array expected");rt.links=[];for(let it=0;it<nt.links.length;++it)rt.links[it]=String(nt.links[it])}if(nt.choices){if(!Array.isArray(nt.choices))throw TypeError(".data.CharacterLevelTemplateDbo.choices: array expected");rt.choices=[];for(let it=0;it<nt.choices.length;++it){if(typeof nt.choices[it]!="object")throw TypeError(".data.CharacterLevelTemplateDbo.choices: object expected");rt.choices[it]=$root.data.ChoiceDbo.fromObject(nt.choices[it])}}return rt},_e.toObject=function(nt,rt){rt||(rt={});let it={};if((rt.arrays||rt.defaults)&&(it.effects=[],it.links=[],it.choices=[]),rt.defaults&&(it.levelNumber=0),nt.levelNumber!=null&&nt.hasOwnProperty("levelNumber")&&(it.levelNumber=nt.levelNumber),nt.effects&&nt.effects.length){it.effects=[];for(let ot=0;ot<nt.effects.length;++ot)it.effects[ot]=$root.data.EffectDbo.toObject(nt.effects[ot],rt)}if(nt.links&&nt.links.length){it.links=[];for(let ot=0;ot<nt.links.length;++ot)it.links[ot]=nt.links[ot]}if(nt.choices&&nt.choices.length){it.choices=[];for(let ot=0;ot<nt.choices.length;++ot)it.choices[ot]=$root.data.ChoiceDbo.toObject(nt.choices[ot],rt)}return it},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/data.CharacterLevelTemplateDbo"},_e}(),et.SourceModuleDbo=function(){function _e(tt){if(this.features=[],tt)for(let nt=Object.keys(tt),rt=0;rt<nt.length;++rt)tt[nt[rt]]!=null&&(this[nt[rt]]=tt[nt[rt]])}return _e.prototype.sourceId="",_e.prototype.features=$util.emptyArray,_e.create=function(nt){return new _e(nt)},_e.encode=function(nt,rt){if(rt||(rt=$Writer.create()),nt.sourceId!=null&&Object.hasOwnProperty.call(nt,"sourceId")&&rt.uint32(10).string(nt.sourceId),nt.features!=null&&nt.features.length)for(let it=0;it<nt.features.length;++it)$root.data.FeatureSummaryDbo.encode(nt.features[it],rt.uint32(18).fork()).ldelim();return rt},_e.encodeDelimited=function(nt,rt){return this.encode(nt,rt).ldelim()},_e.decode=function(nt,rt){nt instanceof $Reader||(nt=$Reader.create(nt));let it=rt===void 0?nt.len:nt.pos+rt,ot=new $root.data.SourceModuleDbo;for(;nt.pos<it;){let st=nt.uint32();switch(st>>>3){case 1:{ot.sourceId=nt.string();break}case 2:{ot.features&&ot.features.length||(ot.features=[]),ot.features.push($root.data.FeatureSummaryDbo.decode(nt,nt.uint32()));break}default:nt.skipType(st&7);break}}return ot},_e.decodeDelimited=function(nt){return nt instanceof $Reader||(nt=new $Reader(nt)),this.decode(nt,nt.uint32())},_e.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.sourceId!=null&&nt.hasOwnProperty("sourceId")&&!$util.isString(nt.sourceId))return"sourceId: string expected";if(nt.features!=null&&nt.hasOwnProperty("features")){if(!Array.isArray(nt.features))return"features: array expected";for(let rt=0;rt<nt.features.length;++rt){let it=$root.data.FeatureSummaryDbo.verify(nt.features[rt]);if(it)return"features."+it}}return null},_e.fromObject=function(nt){if(nt instanceof $root.data.SourceModuleDbo)return nt;let rt=new $root.data.SourceModuleDbo;if(nt.sourceId!=null&&(rt.sourceId=String(nt.sourceId)),nt.features){if(!Array.isArray(nt.features))throw TypeError(".data.SourceModuleDbo.features: array expected");rt.features=[];for(let it=0;it<nt.features.length;++it){if(typeof nt.features[it]!="object")throw TypeError(".data.SourceModuleDbo.features: object expected");rt.features[it]=$root.data.FeatureSummaryDbo.fromObject(nt.features[it])}}return rt},_e.toObject=function(nt,rt){rt||(rt={});let it={};if((rt.arrays||rt.defaults)&&(it.features=[]),rt.defaults&&(it.sourceId=""),nt.sourceId!=null&&nt.hasOwnProperty("sourceId")&&(it.sourceId=nt.sourceId),nt.features&&nt.features.length){it.features=[];for(let ot=0;ot<nt.features.length;++ot)it.features[ot]=$root.data.FeatureSummaryDbo.toObject(nt.features[ot],rt)}return it},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/data.SourceModuleDbo"},_e}(),et.SourceModuleItemDatabaseDbo=function(){function _e(tt){if(this.items=[],this.optionSets=[],this.options=[],tt)for(let nt=Object.keys(tt),rt=0;rt<nt.length;++rt)tt[nt[rt]]!=null&&(this[nt[rt]]=tt[nt[rt]])}return _e.prototype.sourceId=0,_e.prototype.sourceCode="",_e.prototype.items=$util.emptyArray,_e.prototype.optionSets=$util.emptyArray,_e.prototype.options=$util.emptyArray,_e.create=function(nt){return new _e(nt)},_e.encode=function(nt,rt){if(rt||(rt=$Writer.create()),nt.sourceId!=null&&Object.hasOwnProperty.call(nt,"sourceId")&&rt.uint32(8).uint32(nt.sourceId),nt.sourceCode!=null&&Object.hasOwnProperty.call(nt,"sourceCode")&&rt.uint32(18).string(nt.sourceCode),nt.items!=null&&nt.items.length)for(let it=0;it<nt.items.length;++it)$root.data.ItemSummaryDbo.encode(nt.items[it],rt.uint32(26).fork()).ldelim();if(nt.optionSets!=null&&nt.optionSets.length)for(let it=0;it<nt.optionSets.length;++it)$root.data.ItemOptionSetDbo.encode(nt.optionSets[it],rt.uint32(34).fork()).ldelim();if(nt.options!=null&&nt.options.length)for(let it=0;it<nt.options.length;++it)$root.data.ItemOptionDbo.encode(nt.options[it],rt.uint32(42).fork()).ldelim();return rt},_e.encodeDelimited=function(nt,rt){return this.encode(nt,rt).ldelim()},_e.decode=function(nt,rt){nt instanceof $Reader||(nt=$Reader.create(nt));let it=rt===void 0?nt.len:nt.pos+rt,ot=new $root.data.SourceModuleItemDatabaseDbo;for(;nt.pos<it;){let st=nt.uint32();switch(st>>>3){case 1:{ot.sourceId=nt.uint32();break}case 2:{ot.sourceCode=nt.string();break}case 3:{ot.items&&ot.items.length||(ot.items=[]),ot.items.push($root.data.ItemSummaryDbo.decode(nt,nt.uint32()));break}case 4:{ot.optionSets&&ot.optionSets.length||(ot.optionSets=[]),ot.optionSets.push($root.data.ItemOptionSetDbo.decode(nt,nt.uint32()));break}case 5:{ot.options&&ot.options.length||(ot.options=[]),ot.options.push($root.data.ItemOptionDbo.decode(nt,nt.uint32()));break}default:nt.skipType(st&7);break}}return ot},_e.decodeDelimited=function(nt){return nt instanceof $Reader||(nt=new $Reader(nt)),this.decode(nt,nt.uint32())},_e.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.sourceId!=null&&nt.hasOwnProperty("sourceId")&&!$util.isInteger(nt.sourceId))return"sourceId: integer expected";if(nt.sourceCode!=null&&nt.hasOwnProperty("sourceCode")&&!$util.isString(nt.sourceCode))return"sourceCode: string expected";if(nt.items!=null&&nt.hasOwnProperty("items")){if(!Array.isArray(nt.items))return"items: array expected";for(let rt=0;rt<nt.items.length;++rt){let it=$root.data.ItemSummaryDbo.verify(nt.items[rt]);if(it)return"items."+it}}if(nt.optionSets!=null&&nt.hasOwnProperty("optionSets")){if(!Array.isArray(nt.optionSets))return"optionSets: array expected";for(let rt=0;rt<nt.optionSets.length;++rt){let it=$root.data.ItemOptionSetDbo.verify(nt.optionSets[rt]);if(it)return"optionSets."+it}}if(nt.options!=null&&nt.hasOwnProperty("options")){if(!Array.isArray(nt.options))return"options: array expected";for(let rt=0;rt<nt.options.length;++rt){let it=$root.data.ItemOptionDbo.verify(nt.options[rt]);if(it)return"options."+it}}return null},_e.fromObject=function(nt){if(nt instanceof $root.data.SourceModuleItemDatabaseDbo)return nt;let rt=new $root.data.SourceModuleItemDatabaseDbo;if(nt.sourceId!=null&&(rt.sourceId=nt.sourceId>>>0),nt.sourceCode!=null&&(rt.sourceCode=String(nt.sourceCode)),nt.items){if(!Array.isArray(nt.items))throw TypeError(".data.SourceModuleItemDatabaseDbo.items: array expected");rt.items=[];for(let it=0;it<nt.items.length;++it){if(typeof nt.items[it]!="object")throw TypeError(".data.SourceModuleItemDatabaseDbo.items: object expected");rt.items[it]=$root.data.ItemSummaryDbo.fromObject(nt.items[it])}}if(nt.optionSets){if(!Array.isArray(nt.optionSets))throw TypeError(".data.SourceModuleItemDatabaseDbo.optionSets: array expected");rt.optionSets=[];for(let it=0;it<nt.optionSets.length;++it){if(typeof nt.optionSets[it]!="object")throw TypeError(".data.SourceModuleItemDatabaseDbo.optionSets: object expected");rt.optionSets[it]=$root.data.ItemOptionSetDbo.fromObject(nt.optionSets[it])}}if(nt.options){if(!Array.isArray(nt.options))throw TypeError(".data.SourceModuleItemDatabaseDbo.options: array expected");rt.options=[];for(let it=0;it<nt.options.length;++it){if(typeof nt.options[it]!="object")throw TypeError(".data.SourceModuleItemDatabaseDbo.options: object expected");rt.options[it]=$root.data.ItemOptionDbo.fromObject(nt.options[it])}}return rt},_e.toObject=function(nt,rt){rt||(rt={});let it={};if((rt.arrays||rt.defaults)&&(it.items=[],it.optionSets=[],it.options=[]),rt.defaults&&(it.sourceId=0,it.sourceCode=""),nt.sourceId!=null&&nt.hasOwnProperty("sourceId")&&(it.sourceId=nt.sourceId),nt.sourceCode!=null&&nt.hasOwnProperty("sourceCode")&&(it.sourceCode=nt.sourceCode),nt.items&&nt.items.length){it.items=[];for(let ot=0;ot<nt.items.length;++ot)it.items[ot]=$root.data.ItemSummaryDbo.toObject(nt.items[ot],rt)}if(nt.optionSets&&nt.optionSets.length){it.optionSets=[];for(let ot=0;ot<nt.optionSets.length;++ot)it.optionSets[ot]=$root.data.ItemOptionSetDbo.toObject(nt.optionSets[ot],rt)}if(nt.options&&nt.options.length){it.options=[];for(let ot=0;ot<nt.options.length;++ot)it.options[ot]=$root.data.ItemOptionDbo.toObject(nt.options[ot],rt)}return it},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/data.SourceModuleItemDatabaseDbo"},_e}(),et.ItemSummaryDbo=function(){function _e(tt){if(this.tags=[],this.optionSets=[],tt)for(let nt=Object.keys(tt),rt=0;rt<nt.length;++rt)tt[nt[rt]]!=null&&(this[nt[rt]]=tt[nt[rt]])}return _e.prototype.id=0,_e.prototype.name="",_e.prototype.tags=$util.emptyArray,_e.prototype.cost=0,_e.prototype.optionSets=$util.emptyArray,_e.prototype.weight=0,_e.create=function(nt){return new _e(nt)},_e.encode=function(nt,rt){if(rt||(rt=$Writer.create()),nt.id!=null&&Object.hasOwnProperty.call(nt,"id")&&rt.uint32(8).uint32(nt.id),nt.name!=null&&Object.hasOwnProperty.call(nt,"name")&&rt.uint32(18).string(nt.name),nt.tags!=null&&nt.tags.length)for(let it=0;it<nt.tags.length;++it)rt.uint32(26).string(nt.tags[it]);if(nt.cost!=null&&Object.hasOwnProperty.call(nt,"cost")&&rt.uint32(33).double(nt.cost),nt.optionSets!=null&&nt.optionSets.length){rt.uint32(42).fork();for(let it=0;it<nt.optionSets.length;++it)rt.uint32(nt.optionSets[it]);rt.ldelim()}return nt.weight!=null&&Object.hasOwnProperty.call(nt,"weight")&&rt.uint32(49).double(nt.weight),rt},_e.encodeDelimited=function(nt,rt){return this.encode(nt,rt).ldelim()},_e.decode=function(nt,rt){nt instanceof $Reader||(nt=$Reader.create(nt));let it=rt===void 0?nt.len:nt.pos+rt,ot=new $root.data.ItemSummaryDbo;for(;nt.pos<it;){let st=nt.uint32();switch(st>>>3){case 1:{ot.id=nt.uint32();break}case 2:{ot.name=nt.string();break}case 3:{ot.tags&&ot.tags.length||(ot.tags=[]),ot.tags.push(nt.string());break}case 4:{ot.cost=nt.double();break}case 5:{if(ot.optionSets&&ot.optionSets.length||(ot.optionSets=[]),(st&7)===2){let at=nt.uint32()+nt.pos;for(;nt.pos<at;)ot.optionSets.push(nt.uint32())}else ot.optionSets.push(nt.uint32());break}case 6:{ot.weight=nt.double();break}default:nt.skipType(st&7);break}}return ot},_e.decodeDelimited=function(nt){return nt instanceof $Reader||(nt=new $Reader(nt)),this.decode(nt,nt.uint32())},_e.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.id!=null&&nt.hasOwnProperty("id")&&!$util.isInteger(nt.id))return"id: integer expected";if(nt.name!=null&&nt.hasOwnProperty("name")&&!$util.isString(nt.name))return"name: string expected";if(nt.tags!=null&&nt.hasOwnProperty("tags")){if(!Array.isArray(nt.tags))return"tags: array expected";for(let rt=0;rt<nt.tags.length;++rt)if(!$util.isString(nt.tags[rt]))return"tags: string[] expected"}if(nt.cost!=null&&nt.hasOwnProperty("cost")&&typeof nt.cost!="number")return"cost: number expected";if(nt.optionSets!=null&&nt.hasOwnProperty("optionSets")){if(!Array.isArray(nt.optionSets))return"optionSets: array expected";for(let rt=0;rt<nt.optionSets.length;++rt)if(!$util.isInteger(nt.optionSets[rt]))return"optionSets: integer[] expected"}return nt.weight!=null&&nt.hasOwnProperty("weight")&&typeof nt.weight!="number"?"weight: number expected":null},_e.fromObject=function(nt){if(nt instanceof $root.data.ItemSummaryDbo)return nt;let rt=new $root.data.ItemSummaryDbo;if(nt.id!=null&&(rt.id=nt.id>>>0),nt.name!=null&&(rt.name=String(nt.name)),nt.tags){if(!Array.isArray(nt.tags))throw TypeError(".data.ItemSummaryDbo.tags: array expected");rt.tags=[];for(let it=0;it<nt.tags.length;++it)rt.tags[it]=String(nt.tags[it])}if(nt.cost!=null&&(rt.cost=Number(nt.cost)),nt.optionSets){if(!Array.isArray(nt.optionSets))throw TypeError(".data.ItemSummaryDbo.optionSets: array expected");rt.optionSets=[];for(let it=0;it<nt.optionSets.length;++it)rt.optionSets[it]=nt.optionSets[it]>>>0}return nt.weight!=null&&(rt.weight=Number(nt.weight)),rt},_e.toObject=function(nt,rt){rt||(rt={});let it={};if((rt.arrays||rt.defaults)&&(it.tags=[],it.optionSets=[]),rt.defaults&&(it.id=0,it.name="",it.cost=0,it.weight=0),nt.id!=null&&nt.hasOwnProperty("id")&&(it.id=nt.id),nt.name!=null&&nt.hasOwnProperty("name")&&(it.name=nt.name),nt.tags&&nt.tags.length){it.tags=[];for(let ot=0;ot<nt.tags.length;++ot)it.tags[ot]=nt.tags[ot]}if(nt.cost!=null&&nt.hasOwnProperty("cost")&&(it.cost=rt.json&&!isFinite(nt.cost)?String(nt.cost):nt.cost),nt.optionSets&&nt.optionSets.length){it.optionSets=[];for(let ot=0;ot<nt.optionSets.length;++ot)it.optionSets[ot]=nt.optionSets[ot]}return nt.weight!=null&&nt.hasOwnProperty("weight")&&(it.weight=rt.json&&!isFinite(nt.weight)?String(nt.weight):nt.weight),it},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/data.ItemSummaryDbo"},_e}(),et.ItemDbo=function(){function _e(tt){if(this.tags=[],this.optionSets=[],tt)for(let nt=Object.keys(tt),rt=0;rt<nt.length;++rt)tt[nt[rt]]!=null&&(this[nt[rt]]=tt[nt[rt]])}return _e.prototype.id=0,_e.prototype.name="",_e.prototype.tags=$util.emptyArray,_e.prototype.cost=0,_e.prototype.optionSets=$util.emptyArray,_e.prototype.weight=0,_e.prototype.description=null,_e.create=function(nt){return new _e(nt)},_e.encode=function(nt,rt){if(rt||(rt=$Writer.create()),nt.id!=null&&Object.hasOwnProperty.call(nt,"id")&&rt.uint32(8).uint32(nt.id),nt.name!=null&&Object.hasOwnProperty.call(nt,"name")&&rt.uint32(18).string(nt.name),nt.tags!=null&&nt.tags.length)for(let it=0;it<nt.tags.length;++it)rt.uint32(26).string(nt.tags[it]);if(nt.cost!=null&&Object.hasOwnProperty.call(nt,"cost")&&rt.uint32(33).double(nt.cost),nt.optionSets!=null&&nt.optionSets.length){rt.uint32(42).fork();for(let it=0;it<nt.optionSets.length;++it)rt.uint32(nt.optionSets[it]);rt.ldelim()}return nt.weight!=null&&Object.hasOwnProperty.call(nt,"weight")&&rt.uint32(49).double(nt.weight),nt.description!=null&&Object.hasOwnProperty.call(nt,"description")&&$root.data.DescriptionDbo.encode(nt.description,rt.uint32(802).fork()).ldelim(),rt},_e.encodeDelimited=function(nt,rt){return this.encode(nt,rt).ldelim()},_e.decode=function(nt,rt){nt instanceof $Reader||(nt=$Reader.create(nt));let it=rt===void 0?nt.len:nt.pos+rt,ot=new $root.data.ItemDbo;for(;nt.pos<it;){let st=nt.uint32();switch(st>>>3){case 1:{ot.id=nt.uint32();break}case 2:{ot.name=nt.string();break}case 3:{ot.tags&&ot.tags.length||(ot.tags=[]),ot.tags.push(nt.string());break}case 4:{ot.cost=nt.double();break}case 5:{if(ot.optionSets&&ot.optionSets.length||(ot.optionSets=[]),(st&7)===2){let at=nt.uint32()+nt.pos;for(;nt.pos<at;)ot.optionSets.push(nt.uint32())}else ot.optionSets.push(nt.uint32());break}case 6:{ot.weight=nt.double();break}case 100:{ot.description=$root.data.DescriptionDbo.decode(nt,nt.uint32());break}default:nt.skipType(st&7);break}}return ot},_e.decodeDelimited=function(nt){return nt instanceof $Reader||(nt=new $Reader(nt)),this.decode(nt,nt.uint32())},_e.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.id!=null&&nt.hasOwnProperty("id")&&!$util.isInteger(nt.id))return"id: integer expected";if(nt.name!=null&&nt.hasOwnProperty("name")&&!$util.isString(nt.name))return"name: string expected";if(nt.tags!=null&&nt.hasOwnProperty("tags")){if(!Array.isArray(nt.tags))return"tags: array expected";for(let rt=0;rt<nt.tags.length;++rt)if(!$util.isString(nt.tags[rt]))return"tags: string[] expected"}if(nt.cost!=null&&nt.hasOwnProperty("cost")&&typeof nt.cost!="number")return"cost: number expected";if(nt.optionSets!=null&&nt.hasOwnProperty("optionSets")){if(!Array.isArray(nt.optionSets))return"optionSets: array expected";for(let rt=0;rt<nt.optionSets.length;++rt)if(!$util.isInteger(nt.optionSets[rt]))return"optionSets: integer[] expected"}if(nt.weight!=null&&nt.hasOwnProperty("weight")&&typeof nt.weight!="number")return"weight: number expected";if(nt.description!=null&&nt.hasOwnProperty("description")){let rt=$root.data.DescriptionDbo.verify(nt.description);if(rt)return"description."+rt}return null},_e.fromObject=function(nt){if(nt instanceof $root.data.ItemDbo)return nt;let rt=new $root.data.ItemDbo;if(nt.id!=null&&(rt.id=nt.id>>>0),nt.name!=null&&(rt.name=String(nt.name)),nt.tags){if(!Array.isArray(nt.tags))throw TypeError(".data.ItemDbo.tags: array expected");rt.tags=[];for(let it=0;it<nt.tags.length;++it)rt.tags[it]=String(nt.tags[it])}if(nt.cost!=null&&(rt.cost=Number(nt.cost)),nt.optionSets){if(!Array.isArray(nt.optionSets))throw TypeError(".data.ItemDbo.optionSets: array expected");rt.optionSets=[];for(let it=0;it<nt.optionSets.length;++it)rt.optionSets[it]=nt.optionSets[it]>>>0}if(nt.weight!=null&&(rt.weight=Number(nt.weight)),nt.description!=null){if(typeof nt.description!="object")throw TypeError(".data.ItemDbo.description: object expected");rt.description=$root.data.DescriptionDbo.fromObject(nt.description)}return rt},_e.toObject=function(nt,rt){rt||(rt={});let it={};if((rt.arrays||rt.defaults)&&(it.tags=[],it.optionSets=[]),rt.defaults&&(it.id=0,it.name="",it.cost=0,it.weight=0,it.description=null),nt.id!=null&&nt.hasOwnProperty("id")&&(it.id=nt.id),nt.name!=null&&nt.hasOwnProperty("name")&&(it.name=nt.name),nt.tags&&nt.tags.length){it.tags=[];for(let ot=0;ot<nt.tags.length;++ot)it.tags[ot]=nt.tags[ot]}if(nt.cost!=null&&nt.hasOwnProperty("cost")&&(it.cost=rt.json&&!isFinite(nt.cost)?String(nt.cost):nt.cost),nt.optionSets&&nt.optionSets.length){it.optionSets=[];for(let ot=0;ot<nt.optionSets.length;++ot)it.optionSets[ot]=nt.optionSets[ot]}return nt.weight!=null&&nt.hasOwnProperty("weight")&&(it.weight=rt.json&&!isFinite(nt.weight)?String(nt.weight):nt.weight),nt.description!=null&&nt.hasOwnProperty("description")&&(it.description=$root.data.DescriptionDbo.toObject(nt.description,rt)),it},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/data.ItemDbo"},_e}(),et.ItemOptionSetDbo=function(){function _e(tt){if(this.pointCurrencyCost={},this.optionTags=[],tt)for(let nt=Object.keys(tt),rt=0;rt<nt.length;++rt)tt[nt[rt]]!=null&&(this[nt[rt]]=tt[nt[rt]])}return _e.prototype.id=0,_e.prototype.hasPoints=!1,_e.prototype.hasMaxPoints=!1,_e.prototype.maxPoints=0,_e.prototype.pointCurrencyCost=$util.emptyObject,_e.prototype.optionTags=$util.emptyArray,_e.create=function(nt){return new _e(nt)},_e.encode=function(nt,rt){if(rt||(rt=$Writer.create()),nt.id!=null&&Object.hasOwnProperty.call(nt,"id")&&rt.uint32(8).uint32(nt.id),nt.hasPoints!=null&&Object.hasOwnProperty.call(nt,"hasPoints")&&rt.uint32(16).bool(nt.hasPoints),nt.hasMaxPoints!=null&&Object.hasOwnProperty.call(nt,"hasMaxPoints")&&rt.uint32(24).bool(nt.hasMaxPoints),nt.maxPoints!=null&&Object.hasOwnProperty.call(nt,"maxPoints")&&rt.uint32(32).uint32(nt.maxPoints),nt.pointCurrencyCost!=null&&Object.hasOwnProperty.call(nt,"pointCurrencyCost"))for(let it=Object.keys(nt.pointCurrencyCost),ot=0;ot<it.length;++ot)rt.uint32(42).fork().uint32(8).uint32(it[ot]).uint32(17).double(nt.pointCurrencyCost[it[ot]]).ldelim();if(nt.optionTags!=null&&nt.optionTags.length){rt.uint32(50).fork();for(let it=0;it<nt.optionTags.length;++it)rt.int32(nt.optionTags[it]);rt.ldelim()}return rt},_e.encodeDelimited=function(nt,rt){return this.encode(nt,rt).ldelim()},_e.decode=function(nt,rt){nt instanceof $Reader||(nt=$Reader.create(nt));let it=rt===void 0?nt.len:nt.pos+rt,ot=new $root.data.ItemOptionSetDbo,st,at;for(;nt.pos<it;){let lt=nt.uint32();switch(lt>>>3){case 1:{ot.id=nt.uint32();break}case 2:{ot.hasPoints=nt.bool();break}case 3:{ot.hasMaxPoints=nt.bool();break}case 4:{ot.maxPoints=nt.uint32();break}case 5:{ot.pointCurrencyCost===$util.emptyObject&&(ot.pointCurrencyCost={});let ct=nt.uint32()+nt.pos;for(st=0,at=0;nt.pos<ct;){let ut=nt.uint32();switch(ut>>>3){case 1:st=nt.uint32();break;case 2:at=nt.double();break;default:nt.skipType(ut&7);break}}ot.pointCurrencyCost[st]=at;break}case 6:{if(ot.optionTags&&ot.optionTags.length||(ot.optionTags=[]),(lt&7)===2){let ct=nt.uint32()+nt.pos;for(;nt.pos<ct;)ot.optionTags.push(nt.int32())}else ot.optionTags.push(nt.int32());break}default:nt.skipType(lt&7);break}}return ot},_e.decodeDelimited=function(nt){return nt instanceof $Reader||(nt=new $Reader(nt)),this.decode(nt,nt.uint32())},_e.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.id!=null&&nt.hasOwnProperty("id")&&!$util.isInteger(nt.id))return"id: integer expected";if(nt.hasPoints!=null&&nt.hasOwnProperty("hasPoints")&&typeof nt.hasPoints!="boolean")return"hasPoints: boolean expected";if(nt.hasMaxPoints!=null&&nt.hasOwnProperty("hasMaxPoints")&&typeof nt.hasMaxPoints!="boolean")return"hasMaxPoints: boolean expected";if(nt.maxPoints!=null&&nt.hasOwnProperty("maxPoints")&&!$util.isInteger(nt.maxPoints))return"maxPoints: integer expected";if(nt.pointCurrencyCost!=null&&nt.hasOwnProperty("pointCurrencyCost")){if(!$util.isObject(nt.pointCurrencyCost))return"pointCurrencyCost: object expected";let rt=Object.keys(nt.pointCurrencyCost);for(let it=0;it<rt.length;++it){if(!$util.key32Re.test(rt[it]))return"pointCurrencyCost: integer key{k:uint32} expected";if(typeof nt.pointCurrencyCost[rt[it]]!="number")return"pointCurrencyCost: number{k:uint32} expected"}}if(nt.optionTags!=null&&nt.hasOwnProperty("optionTags")){if(!Array.isArray(nt.optionTags))return"optionTags: array expected";for(let rt=0;rt<nt.optionTags.length;++rt)if(!$util.isInteger(nt.optionTags[rt]))return"optionTags: integer[] expected"}return null},_e.fromObject=function(nt){if(nt instanceof $root.data.ItemOptionSetDbo)return nt;let rt=new $root.data.ItemOptionSetDbo;if(nt.id!=null&&(rt.id=nt.id>>>0),nt.hasPoints!=null&&(rt.hasPoints=!!nt.hasPoints),nt.hasMaxPoints!=null&&(rt.hasMaxPoints=!!nt.hasMaxPoints),nt.maxPoints!=null&&(rt.maxPoints=nt.maxPoints>>>0),nt.pointCurrencyCost){if(typeof nt.pointCurrencyCost!="object")throw TypeError(".data.ItemOptionSetDbo.pointCurrencyCost: object expected");rt.pointCurrencyCost={};for(let it=Object.keys(nt.pointCurrencyCost),ot=0;ot<it.length;++ot)rt.pointCurrencyCost[it[ot]]=Number(nt.pointCurrencyCost[it[ot]])}if(nt.optionTags){if(!Array.isArray(nt.optionTags))throw TypeError(".data.ItemOptionSetDbo.optionTags: array expected");rt.optionTags=[];for(let it=0;it<nt.optionTags.length;++it)rt.optionTags[it]=nt.optionTags[it]|0}return rt},_e.toObject=function(nt,rt){rt||(rt={});let it={};(rt.arrays||rt.defaults)&&(it.optionTags=[]),(rt.objects||rt.defaults)&&(it.pointCurrencyCost={}),rt.defaults&&(it.id=0,it.hasPoints=!1,it.hasMaxPoints=!1,it.maxPoints=0),nt.id!=null&&nt.hasOwnProperty("id")&&(it.id=nt.id),nt.hasPoints!=null&&nt.hasOwnProperty("hasPoints")&&(it.hasPoints=nt.hasPoints),nt.hasMaxPoints!=null&&nt.hasOwnProperty("hasMaxPoints")&&(it.hasMaxPoints=nt.hasMaxPoints),nt.maxPoints!=null&&nt.hasOwnProperty("maxPoints")&&(it.maxPoints=nt.maxPoints);let ot;if(nt.pointCurrencyCost&&(ot=Object.keys(nt.pointCurrencyCost)).length){it.pointCurrencyCost={};for(let st=0;st<ot.length;++st)it.pointCurrencyCost[ot[st]]=rt.json&&!isFinite(nt.pointCurrencyCost[ot[st]])?String(nt.pointCurrencyCost[ot[st]]):nt.pointCurrencyCost[ot[st]]}if(nt.optionTags&&nt.optionTags.length){it.optionTags=[];for(let st=0;st<nt.optionTags.length;++st)it.optionTags[st]=nt.optionTags[st]}return it},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/data.ItemOptionSetDbo"},_e}(),et.ItemOptionDbo=function(){function _e(tt){if(this.tags=[],tt)for(let nt=Object.keys(tt),rt=0;rt<nt.length;++rt)tt[nt[rt]]!=null&&(this[nt[rt]]=tt[nt[rt]])}return _e.prototype.id=0,_e.prototype.name="",_e.prototype.baseNamePrefix="",_e.prototype.baseNamePostfix="",_e.prototype.pointCost=0,_e.prototype.currencyCost=0,_e.prototype.tags=$util.emptyArray,_e.prototype.uniquenessTag=0,_e.prototype.currencyCostByWeight=0,_e.create=function(nt){return new _e(nt)},_e.encode=function(nt,rt){if(rt||(rt=$Writer.create()),nt.id!=null&&Object.hasOwnProperty.call(nt,"id")&&rt.uint32(8).uint32(nt.id),nt.name!=null&&Object.hasOwnProperty.call(nt,"name")&&rt.uint32(18).string(nt.name),nt.baseNamePrefix!=null&&Object.hasOwnProperty.call(nt,"baseNamePrefix")&&rt.uint32(26).string(nt.baseNamePrefix),nt.baseNamePostfix!=null&&Object.hasOwnProperty.call(nt,"baseNamePostfix")&&rt.uint32(34).string(nt.baseNamePostfix),nt.pointCost!=null&&Object.hasOwnProperty.call(nt,"pointCost")&&rt.uint32(40).uint32(nt.pointCost),nt.currencyCost!=null&&Object.hasOwnProperty.call(nt,"currencyCost")&&rt.uint32(49).double(nt.currencyCost),nt.tags!=null&&nt.tags.length){rt.uint32(58).fork();for(let it=0;it<nt.tags.length;++it)rt.uint32(nt.tags[it]);rt.ldelim()}return nt.uniquenessTag!=null&&Object.hasOwnProperty.call(nt,"uniquenessTag")&&rt.uint32(64).uint32(nt.uniquenessTag),nt.currencyCostByWeight!=null&&Object.hasOwnProperty.call(nt,"currencyCostByWeight")&&rt.uint32(73).double(nt.currencyCostByWeight),rt},_e.encodeDelimited=function(nt,rt){return this.encode(nt,rt).ldelim()},_e.decode=function(nt,rt){nt instanceof $Reader||(nt=$Reader.create(nt));let it=rt===void 0?nt.len:nt.pos+rt,ot=new $root.data.ItemOptionDbo;for(;nt.pos<it;){let st=nt.uint32();switch(st>>>3){case 1:{ot.id=nt.uint32();break}case 2:{ot.name=nt.string();break}case 3:{ot.baseNamePrefix=nt.string();break}case 4:{ot.baseNamePostfix=nt.string();break}case 5:{ot.pointCost=nt.uint32();break}case 6:{ot.currencyCost=nt.double();break}case 7:{if(ot.tags&&ot.tags.length||(ot.tags=[]),(st&7)===2){let at=nt.uint32()+nt.pos;for(;nt.pos<at;)ot.tags.push(nt.uint32())}else ot.tags.push(nt.uint32());break}case 8:{ot.uniquenessTag=nt.uint32();break}case 9:{ot.currencyCostByWeight=nt.double();break}default:nt.skipType(st&7);break}}return ot},_e.decodeDelimited=function(nt){return nt instanceof $Reader||(nt=new $Reader(nt)),this.decode(nt,nt.uint32())},_e.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.id!=null&&nt.hasOwnProperty("id")&&!$util.isInteger(nt.id))return"id: integer expected";if(nt.name!=null&&nt.hasOwnProperty("name")&&!$util.isString(nt.name))return"name: string expected";if(nt.baseNamePrefix!=null&&nt.hasOwnProperty("baseNamePrefix")&&!$util.isString(nt.baseNamePrefix))return"baseNamePrefix: string expected";if(nt.baseNamePostfix!=null&&nt.hasOwnProperty("baseNamePostfix")&&!$util.isString(nt.baseNamePostfix))return"baseNamePostfix: string expected";if(nt.pointCost!=null&&nt.hasOwnProperty("pointCost")&&!$util.isInteger(nt.pointCost))return"pointCost: integer expected";if(nt.currencyCost!=null&&nt.hasOwnProperty("currencyCost")&&typeof nt.currencyCost!="number")return"currencyCost: number expected";if(nt.tags!=null&&nt.hasOwnProperty("tags")){if(!Array.isArray(nt.tags))return"tags: array expected";for(let rt=0;rt<nt.tags.length;++rt)if(!$util.isInteger(nt.tags[rt]))return"tags: integer[] expected"}return nt.uniquenessTag!=null&&nt.hasOwnProperty("uniquenessTag")&&!$util.isInteger(nt.uniquenessTag)?"uniquenessTag: integer expected":nt.currencyCostByWeight!=null&&nt.hasOwnProperty("currencyCostByWeight")&&typeof nt.currencyCostByWeight!="number"?"currencyCostByWeight: number expected":null},_e.fromObject=function(nt){if(nt instanceof $root.data.ItemOptionDbo)return nt;let rt=new $root.data.ItemOptionDbo;if(nt.id!=null&&(rt.id=nt.id>>>0),nt.name!=null&&(rt.name=String(nt.name)),nt.baseNamePrefix!=null&&(rt.baseNamePrefix=String(nt.baseNamePrefix)),nt.baseNamePostfix!=null&&(rt.baseNamePostfix=String(nt.baseNamePostfix)),nt.pointCost!=null&&(rt.pointCost=nt.pointCost>>>0),nt.currencyCost!=null&&(rt.currencyCost=Number(nt.currencyCost)),nt.tags){if(!Array.isArray(nt.tags))throw TypeError(".data.ItemOptionDbo.tags: array expected");rt.tags=[];for(let it=0;it<nt.tags.length;++it)rt.tags[it]=nt.tags[it]>>>0}return nt.uniquenessTag!=null&&(rt.uniquenessTag=nt.uniquenessTag>>>0),nt.currencyCostByWeight!=null&&(rt.currencyCostByWeight=Number(nt.currencyCostByWeight)),rt},_e.toObject=function(nt,rt){rt||(rt={});let it={};if((rt.arrays||rt.defaults)&&(it.tags=[]),rt.defaults&&(it.id=0,it.name="",it.baseNamePrefix="",it.baseNamePostfix="",it.pointCost=0,it.currencyCost=0,it.uniquenessTag=0,it.currencyCostByWeight=0),nt.id!=null&&nt.hasOwnProperty("id")&&(it.id=nt.id),nt.name!=null&&nt.hasOwnProperty("name")&&(it.name=nt.name),nt.baseNamePrefix!=null&&nt.hasOwnProperty("baseNamePrefix")&&(it.baseNamePrefix=nt.baseNamePrefix),nt.baseNamePostfix!=null&&nt.hasOwnProperty("baseNamePostfix")&&(it.baseNamePostfix=nt.baseNamePostfix),nt.pointCost!=null&&nt.hasOwnProperty("pointCost")&&(it.pointCost=nt.pointCost),nt.currencyCost!=null&&nt.hasOwnProperty("currencyCost")&&(it.currencyCost=rt.json&&!isFinite(nt.currencyCost)?String(nt.currencyCost):nt.currencyCost),nt.tags&&nt.tags.length){it.tags=[];for(let ot=0;ot<nt.tags.length;++ot)it.tags[ot]=nt.tags[ot]}return nt.uniquenessTag!=null&&nt.hasOwnProperty("uniquenessTag")&&(it.uniquenessTag=nt.uniquenessTag),nt.currencyCostByWeight!=null&&nt.hasOwnProperty("currencyCostByWeight")&&(it.currencyCostByWeight=rt.json&&!isFinite(nt.currencyCostByWeight)?String(nt.currencyCostByWeight):nt.currencyCostByWeight),it},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/data.ItemOptionDbo"},_e}(),et.IdDatabaseDbo=function(){function _e(tt){if(this.codeToId={},tt)for(let nt=Object.keys(tt),rt=0;rt<nt.length;++rt)tt[nt[rt]]!=null&&(this[nt[rt]]=tt[nt[rt]])}return _e.prototype.codeToId=$util.emptyObject,_e.create=function(nt){return new _e(nt)},_e.encode=function(nt,rt){if(rt||(rt=$Writer.create()),nt.codeToId!=null&&Object.hasOwnProperty.call(nt,"codeToId"))for(let it=Object.keys(nt.codeToId),ot=0;ot<it.length;++ot)rt.uint32(10).fork().uint32(10).string(it[ot]).uint32(16).uint32(nt.codeToId[it[ot]]).ldelim();return rt},_e.encodeDelimited=function(nt,rt){return this.encode(nt,rt).ldelim()},_e.decode=function(nt,rt){nt instanceof $Reader||(nt=$Reader.create(nt));let it=rt===void 0?nt.len:nt.pos+rt,ot=new $root.data.IdDatabaseDbo,st,at;for(;nt.pos<it;){let lt=nt.uint32();switch(lt>>>3){case 1:{ot.codeToId===$util.emptyObject&&(ot.codeToId={});let ct=nt.uint32()+nt.pos;for(st="",at=0;nt.pos<ct;){let ut=nt.uint32();switch(ut>>>3){case 1:st=nt.string();break;case 2:at=nt.uint32();break;default:nt.skipType(ut&7);break}}ot.codeToId[st]=at;break}default:nt.skipType(lt&7);break}}return ot},_e.decodeDelimited=function(nt){return nt instanceof $Reader||(nt=new $Reader(nt)),this.decode(nt,nt.uint32())},_e.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.codeToId!=null&&nt.hasOwnProperty("codeToId")){if(!$util.isObject(nt.codeToId))return"codeToId: object expected";let rt=Object.keys(nt.codeToId);for(let it=0;it<rt.length;++it)if(!$util.isInteger(nt.codeToId[rt[it]]))return"codeToId: integer{k:string} expected"}return null},_e.fromObject=function(nt){if(nt instanceof $root.data.IdDatabaseDbo)return nt;let rt=new $root.data.IdDatabaseDbo;if(nt.codeToId){if(typeof nt.codeToId!="object")throw TypeError(".data.IdDatabaseDbo.codeToId: object expected");rt.codeToId={};for(let it=Object.keys(nt.codeToId),ot=0;ot<it.length;++ot)rt.codeToId[it[ot]]=nt.codeToId[it[ot]]>>>0}return rt},_e.toObject=function(nt,rt){rt||(rt={});let it={};(rt.objects||rt.defaults)&&(it.codeToId={});let ot;if(nt.codeToId&&(ot=Object.keys(nt.codeToId)).length){it.codeToId={};for(let st=0;st<ot.length;++st)it.codeToId[ot[st]]=nt.codeToId[ot[st]]}return it},_e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},_e.getTypeUrl=function(nt){return nt===void 0&&(nt="type.googleapis.com"),nt+"/data.IdDatabaseDbo"},_e}(),et})();class Link{constructor(_e){this.key=_e}async resolve(_e,tt){const nt=await tt.feature(this.key),rt=await(nt==null?void 0:nt.resolve(_e,tt));if(rt===void 0)throw new Error("Feature not found: "+this.key);return tt.register(this.key),new ResolvedLink(rt)}}class ResolvedLink{constructor(_e){this.feature=_e}get children(){return[this.feature]}applyTo(_e){this.feature.applyTo(_e)}}const Bn=class Bn{constructor(_e){this.traits=_e}instance(_e,tt){return new FeatureStack(_e,tt,this.traits)}};ln(Bn,"Empty",new Bn([]));let Stack=Bn;class FeatureStack{constructor(_e,tt,nt){this.featureId=_e,this.stackNumber=tt,this.traits=nt}async resolve(_e,tt){return new ResolvedStack(this.featureId,this.stackNumber,await Promise.all(this.traits.map(nt=>nt.resolve(_e,tt))))}}class ResolvedStack{constructor(_e,tt,nt){this.featureId=_e,this.stackNumber=tt,this.children=nt}applyTo(_e){this.children.forEach(tt=>tt.applyTo(_e)),_e.modifications(this.featureId,this.stackNumber)}}class FeatureModification{constructor(_e,tt){this.targetFeatureId=_e,this.stackModifications=tt}async resolve(_e,tt){return new ResolvedFeatureModification(this.targetFeatureId,await Promise.all(this.stackModifications.map(nt=>nt.resolve(_e,tt))))}}class ResolvedFeatureModification{constructor(_e,tt){this.targetFeatureId=_e,this.stackModifications=tt}get children(){return this.stackModifications}applyTo(_e){this.stackModifications.forEach(tt=>tt.applyTo(_e))}}class StackModification{constructor(_e,tt,nt,rt){this.targetFeatureId=_e,this.targetStackCount=tt,this.linksToAdd=nt,this.linksToRemove=rt}async resolve(_e,tt){return new ResolvedStackModification(this.targetFeatureId,this.targetStackCount,await Promise.all(this.linksToAdd.map(nt=>nt.resolve(_e,tt))),this.linksToRemove)}}class ResolvedStackModification{constructor(_e,tt,nt,rt){this.targetFeatureId=_e,this.targetStackCount=tt,this.linksToAdd=nt,this.linksToRemove=rt}applyTo(_e){_e.registerModification(this)}applyModification(_e){this.linksToAdd.forEach(tt=>tt.applyTo(_e)),this.linksToRemove.forEach(tt=>_e.increment(tt,-1))}get children(){return this.linksToAdd}}class FixedStack{constructor(_e,tt){this.featureId=_e,this.stacks=tt}next(_e){return(this.stacks[_e-1]??Stack.Empty).instance(this.featureId,_e+1)}resolve(_e,tt){const nt=tt.count(this.featureId);return this.next(nt).resolve(_e,tt)}}class RepeatingStack{constructor(_e,tt){this.featureId=_e,this.stack=tt}async resolve(_e,tt){const nt=tt.count(this.featureId);return this.stack.instance(this.featureId,nt+1).resolve(_e,tt)}}class ResolvedEntityContext{constructor(_e,tt){ln(this,"cache",{});ln(this,"counts",{});this.featureLoader=_e,this.selections=tt}async feature(_e){const tt=this.cache[_e];if(tt!==void 0)return tt;const nt=await this.featureLoader(_e);return nt!==void 0&&(this.cache[_e]=nt),nt}selection(_e){return this.selections[_e]}swapSelections(_e,tt){const nt=this.selections[_e];this.selections[_e]=this.selections[tt],this.selections[tt]=nt,(this.selections[_e]===void 0||this.selections[_e]==="")&&delete this.selections[_e],(this.selections[tt]===void 0||this.selections[tt]==="")&&delete this.selections[tt]}register(_e,tt=1){_e&&(this.counts[_e]=(this.counts[_e]??0)+tt)}count(_e){return this.counts[_e]??0}}function traverseTrait(et,_e){traverseTraitWithDepth(et,0,_e)}function traverseTraitWithDepth(et,_e,tt){tt(et,_e)&&et.children.forEach(nt=>{traverseTraitWithDepth(nt,_e+1,tt)})}class CharacterTemplate{constructor(_e){this.levelTemplates=_e}async resolve(_e,tt){const nt=new ResolvedEntityContext(it=>_e.load(it),tt),rt=await Promise.all(this.levelTemplates.map(it=>it.resolve(nt)));return new ResolvedCharacterTemplate(rt)}}class ResolvedCharacterTemplate{constructor(_e){this.resolvedLevelTemplates=_e}atLevel(_e){return new ResolvedCharacterTemplateAtLevel(_e,this.resolvedLevelTemplates.filter(tt=>tt.levelNumber<=_e))}}class ResolvedCharacterTemplateAtLevel{constructor(_e,tt){this.characterLevel=_e,this.resolvedLevelTemplates=tt}applyTo(_e){this.resolvedLevelTemplates.forEach(tt=>tt.applyTo(_e))}traverse(_e){this.resolvedLevelTemplates.forEach(tt=>tt.traverse(_e))}}class CharacterLevelTemplate{constructor(_e,tt){this.levelNumber=_e,this.traits=tt}async resolve(_e){const tt=Path.of(this.levelNumber>0?this.levelNumber:""),nt=this.traits.map(it=>it.resolve(tt,_e)),rt=await Promise.all(nt);return new ResolvedCharacterLevelTemplate(this.levelNumber,rt)}}class ResolvedCharacterLevelTemplate{constructor(_e,tt){this.levelNumber=_e,this.traits=tt}applyTo(_e){this.traits.forEach(tt=>tt.applyTo(_e))}traverse(_e){this.traits.forEach(tt=>traverseTrait(tt,_e))}}class Item{constructor(_e,tt,nt,rt,it,ot,st,at){this.itemId=_e,this.sourceId=tt,this.name=nt,this.cost=rt,this.weight=it,this.tags=ot,this.optionSetIds=st,this.description=at}}class ItemOption{constructor(_e,tt,nt,rt,it,ot,st,at,lt){this.id=_e,this.name=tt,this.baseNamePrefix=nt,this.baseNamePostfix=rt,this.pointCost=it,this.currencyCost=ot,this.currencyCostByWeight=st,this.tags=at,this.uniquenessTag=lt}}class ItemOptionSet{constructor(_e,tt,nt,rt,it,ot){this.id=_e,this.hasPoints=tt,this.hasMaxPoints=nt,this.maxPoints=rt,this.pointCurrencyCosts=it,this.optionTags=ot}}class ItemSummary{constructor(_e,tt,nt,rt,it,ot,st){this.itemId=_e,this.sourceId=tt,this.name=nt,this.cost=rt,this.weight=it,this.tags=ot,this.optionSetIds=st}get uid(){return this.itemId.toString()}}const StacksDbo=data.StacksDbo,StackDbo=data.StackDbo,FeatureSelectChoiceSortByDbo=data.FeatureSelectChoiceSortByDbo;function decodeFeatureSummary(et){return new FeatureSummary(et.id,et.name,et.label??void 0,et.tags,et.enabledFormula,et.maxStacks??null)}function decodeFeature(et){var _e,tt;return new Feature(et.id,et.name,et.label??void 0,et.tags,et.enabledFormula,et.maxStacks??null,new Description(((_e=et.description)==null?void 0:_e.text)??"",((tt=et.description)==null?void 0:tt.sections)??{}),[decodeStacks(et.id,et.stacks??new StacksDbo)])}function decodeItemSummary(et,_e){return new ItemSummary(et.id,_e,et.name,et.cost,et.weight,et.tags??[],et.optionSets??[])}function decodeItem(et,_e){var tt,nt;return new Item(et.id,_e,et.name,et.cost,et.weight,et.tags??[],et.optionSets??[],new Description(((tt=et.description)==null?void 0:tt.text)??"",((nt=et.description)==null?void 0:nt.sections)??{}))}function decodeItemOption(et){return new ItemOption(et.id,et.name,et.baseNamePrefix,et.baseNamePostfix,et.pointCost,et.currencyCost,et.currencyCostByWeight,et.tags,et.uniquenessTag)}function decodeItemOptionSet(et){return new ItemOptionSet(et.id,et.hasPoints,et.hasMaxPoints,et.maxPoints,et.pointCurrencyCost,et.optionTags)}function decodeEffect(et){let _e;if(et.addAction)_e=new AddEffect(et.addAction.targetKey,et.addAction.numberDelta);else if(et.setAction&&et.setAction.formula!==void 0&&et.setAction.formula!==null)_e=new SetFormulaEffect(et.setAction.targetKey,et.setAction.formula);else if(et.setAction&&et.setAction.numberValue!==void 0&&et.setAction.numberValue!==null)_e=new SetNumberEffect(et.setAction.targetKey,et.setAction.numberValue);else throw new Error("Unknown effect: "+JSON.stringify(et));return _e}function decodeChoice(et){var _e,tt,nt,rt,it,ot,st,at,lt,ct;switch(et.input){case"text":return new TextChoice(et.choiceId,et.label,et.type,et.repeating?1:0);case"featureSelect":return et.repeating?new MultiSelectChoice(et.choiceId,et.label,et.type,((_e=et.featureSelect)==null?void 0:_e.optionTags)??[],((tt=et.featureSelect)==null?void 0:tt.featureIds)??[],((rt=(nt=et.featureSelect)==null?void 0:nt.categories)==null?void 0:rt.map(decodeFeatureSelectCategory))??[],decodeFeatureSelectSortBy((it=et.featureSelect)==null?void 0:it.sortBy),et.repeating?1:0):new SelectChoice(et.choiceId,et.label,et.type,((ot=et.featureSelect)==null?void 0:ot.optionTags)??[],((st=et.featureSelect)==null?void 0:st.featureIds)??[],((lt=(at=et.featureSelect)==null?void 0:at.categories)==null?void 0:lt.map(decodeFeatureSelectCategory))??[],decodeFeatureSelectSortBy((ct=et.featureSelect)==null?void 0:ct.sortBy),et.repeating?1:0);default:throw new Error("Unknown choice type: "+et.input)}}function decodeFeatureSelectCategory(et){return new FeatureSelectCategory(et.label,et.tag)}function decodeFeatureSelectSortBy(et){switch(et){case FeatureSelectChoiceSortByDbo.FEATURE_SELECT_CHOICE_SORTBY_NAME:return"name";default:return"none"}}function decodeLink(et){return new Link(et)}function decodeStack(et){return new Stack([...et.effects.map(decodeEffect),...et.links.map(decodeLink),...et.choices.map(decodeChoice),...et.featureModifications.map(decodeFeatureModification)])}function decodeStacks(et,_e){var tt;switch(_e.stackable){case"fixedStack":return new FixedStack(et,((tt=_e.fixedStack)==null?void 0:tt.stacks.map(decodeStack))??[]);case"repeatingStack":return new RepeatingStack(et,decodeStack(_e.repeatingStack??new StackDbo));default:return new RepeatingStack(et,Stack.Empty)}}function decodeFeatureModification(et){return new FeatureModification(et.targetFeatureId,et.stackModifications.map(_e=>decodeStackModification(et.targetFeatureId,_e)))}function decodeStackModification(et,_e){return new StackModification(et,_e.targetStackCount,_e.linksToAdd.map(tt=>new Link(tt)),_e.linksToRemove)}function decodeCharacterTemplate(et){return new CharacterTemplate(et.levels.map(decodeCharacterLevelTemplate))}function decodeCharacterLevelTemplate(et){return new CharacterLevelTemplate(et.levelNumber,[...et.effects.map(decodeEffect),...et.links.map(decodeLink),...et.choices.map(decodeChoice)])}function matchTags(et,_e){return _e.some(tt=>et.includes(tt))}function hasTag(et,_e){return _e.split("+").every(nt=>et.includes(nt.toLowerCase()))}const ItemDbo=data.ItemDbo,FeatureDbo=data.FeatureDbo,SourceModuleItemDatabaseDbo=data.SourceModuleItemDatabaseDbo;class SourceModule{query(_e){return _e.some(tt=>hasTag(Array.from(this.tags),tt))?this.features().filter(tt=>_e.some(nt=>nt===this.sourceCode||hasTag(tt.tags,nt))):[]}}class SourceModuleItemDatabase{constructor(_e,tt,nt,rt,it){this.sourceId=_e,this.sourceCode=tt,this.summaryById=nt,this.optionsById=rt,this.optionSetsById=it}summaries(){return Object.values(this.summaryById)}async load(_e){const tt=_e.toString(),nt=await fetchProto(`db/${this.sourceCode}/${tt}.bin`,ItemDbo.decode);return decodeItem(nt,this.sourceId)}item(_e){return this.summaryById[_e]}option(_e){return this.optionsById[_e]}optionSet(_e){return this.optionSetsById[_e]}options(){return Object.values(this.optionsById)}}class ExternalSourceModule extends SourceModule{constructor(_e,tt,nt){super(),this.sourceCode=_e,this.featuresById=tt,this.tags=nt}static create(_e,tt){const nt={};let rt=new Set;for(let it of tt){nt[it.key]=it;for(const ot of it.tags)rt=rt.add(ot)}return new ExternalSourceModule(_e,nt,rt)}features(){return Object.values(this.featuresById)}feature(_e){return this.featuresById[_e]}async load(_e){const tt=_e.replace(":","_").replace("#","_"),nt=await fetchProto(`db/${this.sourceCode}/${tt}.bin`,FeatureDbo.decode);return decodeFeature(nt)}async itemDatabase(){const _e=await fetchProto(`db/${this.sourceCode}_items.bin`,SourceModuleItemDatabaseDbo.decode),tt=_e.items.map(ot=>decodeItemSummary(ot,_e.sourceId)),nt={};tt.forEach(ot=>nt[ot.itemId]=ot);const rt={};_e.options.forEach(ot=>{const st=decodeItemOption(ot);rt[st.id]=st});const it={};return _e.optionSets.forEach(ot=>{const st=decodeItemOptionSet(ot);it[st.id]=st}),new SourceModuleItemDatabase(_e.sourceId,this.sourceCode,nt,rt,it)}}const CharacterTemplateDbo=data.CharacterTemplateDbo,SourceModuleDbo=data.SourceModuleDbo,Modules=[loadModule("PZO1110"),loadModule("PZO1114"),loadModule("PZO1115"),loadModule("PZO1117"),loadModule("PZO1118"),loadModule("PZO1123"),loadModule("PZO1129"),loadModule("PZO1131"),loadModule("PZO1132"),loadModule("PZO9476")];async function loadBaseCharacterTemplate(){const et=await fetchProto("db/character_template.bin",CharacterTemplateDbo.decode);return decodeCharacterTemplate(et)}async function loadModule(et){const _e=await fetchProto(`db/${et}.bin`,SourceModuleDbo.decode);return ExternalSourceModule.create(_e.sourceId,_e.features.map(decodeFeatureSummary))}async function initializePathfinderDatabase(){const et=await Promise.all(Modules);return new Database(et)}class EquipmentSet{constructor(_e,tt,nt,rt,it){this.id=_e,this.name=tt,this.budget=nt,this.equipment=rt,this.itemDatabase=it}static unpack(_e,tt){var nt;return new EquipmentSet(tt.id,tt.name,tt.budget??void 0,((nt=tt.equipment)==null?void 0:nt.map(rt=>Equipment.unpack(_e,rt)))??[],_e)}pack(){return{id:this.id,name:this.name,budget:this.budget??null,equipment:this.equipment.map(_e=>_e.pack())}}static create(_e,tt){return new EquipmentSet(v4(),_e,void 0,[],tt)}add(_e,tt,nt=void 0){const rt=this.itemDatabase.summary(_e);if(!rt)throw new Error("Item not found: "+_e);const it=onlyDefined(tt.map(at=>this.itemDatabase.option(at))),ot=Equipment.create(rt,!0,it,this.itemDatabase),st=[...this.equipment];return nt!==void 0?st.splice(nt,0,ot):st.push(ot),new EquipmentSet(this.id,this.name,this.budget,st,this.itemDatabase)}remove(_e){return new EquipmentSet(this.id,this.name,this.budget,this.equipment.filter(tt=>tt.uid!==_e),this.itemDatabase)}modify(_e,tt){return new EquipmentSet(this.id,this.name,this.budget,this.equipment.map(nt=>nt.uid===_e?tt(nt):nt),this.itemDatabase)}move(_e,tt){const nt=[...this.equipment],rt=nt[_e];return nt.splice(_e,1),nt.splice(tt,0,rt),new EquipmentSet(this.id,this.name,this.budget,nt,this.itemDatabase)}setBudget(_e){return new EquipmentSet(this.id,this.name,_e,this.equipment,this.itemDatabase)}}class Equipment{constructor(_e,tt,nt,rt,it,ot,st){this.uid=_e,this.name=tt,this.cost=nt,this.weight=rt,this.item=it,this.options=ot,this.included=st}static unpack(_e,tt){const[nt,rt,...it]=tt,ot=_e.summary(nt);if(!ot)throw new Error("Unknown item ID: "+nt);const st=it.map(at=>_e.option(at)).filter(at=>at!==void 0);return Equipment.create(ot,rt===1,st,_e)}static create(_e,tt,nt,rt){let it=_e.name;for(let st of nt)st.baseNamePrefix.length>0&&(it=st.baseNamePrefix+" "+it),st.baseNamePostfix.length>0&&(it=it+" "+st.baseNamePostfix);let ot=_e.cost;for(let st of nt)ot+=st.currencyCost;for(let st of _e.optionSetIds){const at=rt.optionSet(st);if(!at)continue;let lt=0;for(let ct of nt)matchTags(at.optionTags,ct.tags)&&(lt+=ct.pointCost);lt>0&&(ot+=(at==null?void 0:at.pointCurrencyCosts[lt])??0)}return new Equipment(v4(),it,ot,_e.weight,_e,nt,tt)}pack(){return[this.item.itemId,this.included?1:0,...this.options.map(_e=>_e.id)]}include(_e){return new Equipment(this.uid,this.name,this.cost,this.weight,this.item,this.options,_e)}}class EquipmentSetStore{constructor(_e){this.database=_e}async list(){const _e=await this.loadAllPacked();return await Promise.all(_e.map(tt=>EquipmentSet.unpack(this.database,tt)))}async load(_e){const tt=await this.loadPacked(_e);if(tt)return await this.unpack(tt)}async save(_e){const tt=_e.pack();return this.savePacked(tt)}async create(_e){let tt=EquipmentSet.create(_e,this.database);return await this.save(tt),tt}async delete(_e){await this.deletePacked(_e)}async unpack(_e){return EquipmentSet.unpack(this.database,_e)}}class FirebaseEquipmentSetStore extends EquipmentSetStore{constructor(_e){super(_e)}async loadPacked(_e){const tt=getActiveUser();if(!tt){console.warn("Unable to access Firebase: no user logged in");return}const nt=await timedAsync(()=>FirebaseRepository.load(tt.id,"equipment",_e),"Loading from Firebase");if(!nt){console.warn("No Equipment Set found for: "+_e);return}return{id:nt.id,name:nt.name,budget:nt.budget,equipment:nt.equipment}}async loadAllPacked(){const _e=getActiveUser();return _e?(await FirebaseRepository.loadAll(_e.id,"equipment")??[]).map(nt=>({id:nt.id,name:nt.name,budget:nt.budget,equipment:nt.equipment})):(console.warn("Unable to access Firebase: no user logged in"),[])}async savePacked(_e){const tt=getActiveUser();if(!tt){console.warn("Unable to access Firebase: no user logged in");return}await FirebaseRepository.save(tt.id,"equipment",_e.id,_e)}async deletePacked(_e){const tt=getActiveUser();if(!tt){console.warn("Unable to access Firebase: no user logged in");return}await FirebaseRepository.delete(tt.id,"equipment",_e)}}let globalDatabase,globalCharacterStore,globalEquipmentSetStore;async function initializeCharacterStore(){const et=await loadBaseCharacterTemplate(),_e=await withGlobalDatabase();return new FirebaseCharacterStore(et,_e)}async function initializeEquipmentSetStore(){const et=await withGlobalDatabase();return new FirebaseEquipmentSetStore(await et.itemDatabase())}async function withGlobalCharacterStore(){return globalCharacterStore||(globalCharacterStore=initializeCharacterStore()),globalCharacterStore}async function withGlobalEquipmentSetStore(){return globalEquipmentSetStore||(globalEquipmentSetStore=initializeEquipmentSetStore()),globalEquipmentSetStore}function withGlobalDatabase(){return globalDatabase||(globalDatabase=initializePathfinderDatabase()),globalDatabase}async function characterListLoader(){return{characterStore:await withGlobalCharacterStore()}}function CharacterListRoute(){const{characterStore:et}=useLoaderData();return jsxRuntimeExports.jsx(RequiresAuth,{children:jsxRuntimeExports.jsx(CharacterStoreContext.Provider,{value:et,children:jsxRuntimeExports.jsx(CharacterList,{})})})}const prerequisiteHeader="_prerequisiteHeader_1oscz_1",prerequisites="_prerequisites_1oscz_8",prerequisitesValid="_prerequisitesValid_1oscz_15 _prerequisites_1oscz_8",prerequisitesInvalid="_prerequisitesInvalid_1oscz_21 _prerequisites_1oscz_8",p$2="_p_1oscz_1",sectionLabel="_sectionLabel_1oscz_31",styles$J={prerequisiteHeader,prerequisites,prerequisitesValid,prerequisitesInvalid,p:p$2,sectionLabel},block="_block_1egrb_1",element$4="_element_1egrb_7",elementInvalid="_elementInvalid_1egrb_11 _element_1egrb_7",blockHeader="_blockHeader_1egrb_16",tooltip="_tooltip_1egrb_22",styles$I={block,element:element$4,elementInvalid,blockHeader,tooltip};function PrerequisiteList({formula:et,validation:_e}){const tt=jsxRuntimeExports.jsx(Tooltip$1,{className:styles$I.tooltip,children:et});return jsxRuntimeExports.jsx(OverlayTrigger,{placement:"bottom",trigger:["hover","focus"],overlay:tt,children:jsxRuntimeExports.jsx("div",{children:_e.entries.map((nt,rt)=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(PrerequisiteValidationEntryBlock,{entry:nt})},rt))})})}function PrerequisiteValidationEntryBlock({entry:et}){return jsxRuntimeExports.jsx("span",{className:classNames([et.valid?styles$I.element:styles$I.elementInvalid]),children:et.description})}function FeatureDescription({feature:et,description:_e}){_e??(_e="description"in et?et.description:void 0),_e??(_e=Description.empty());const tt=reactExports.useMemo(()=>{if(!_e||_e.text==="")return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});let nt=splitIntoParagraphs(_e.text);return(!_e.sections||Object.keys(_e.sections).length>0)&&(nt=jsxRuntimeExports.jsx("i",{children:nt})),jsxRuntimeExports.jsx("span",{children:nt})},[_e]);return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:styles$J.p,children:tt}),Object.keys(_e.sections).map(nt=>jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsxs("span",{className:styles$J.sectionLabel,children:[nt,":"]})," ",jsxRuntimeExports.jsx("span",{className:styles$J.p,children:_e==null?void 0:_e.sections[nt]})]},nt))]})}function splitIntoParagraphs(et){return et.split(/\n+/).map((_e,tt)=>jsxRuntimeExports.jsx("p",{children:_e},tt))}function SelectionFeatureDescription({feature:et,description:_e,characterAtLevel:tt}){const nt=useDatabase(),rt=reactExports.useMemo(()=>!et||!tt?PrerequisiteValidation.Empty:et.checkPrerequisites(tt,nt),[et,tt]),it=reactExports.useMemo(()=>rt.isValid(),[rt]),ot=!rt.isEmpty();return jsxRuntimeExports.jsxs("div",{children:[ot&&tt!==void 0&&jsxRuntimeExports.jsxs("div",{className:it?styles$J.prerequisitesValid:styles$J.prerequisitesInvalid,children:[jsxRuntimeExports.jsx("div",{className:styles$J.prerequisiteHeader,children:"Prerequisites"}),jsxRuntimeExports.jsx(PrerequisiteList,{validation:rt,formula:et.enabledFormula})]}),jsxRuntimeExports.jsx(FeatureDescription,{feature:et,description:_e})]})}const label$d="_label_cndbd_1",type="_type_cndbd_7",removeButton="_removeButton_cndbd_15",styles$H={label:label$d,type,removeButton},button$4="_button_kmf8t_1",buttonDragging="_buttonDragging_kmf8t_1",group="_group_kmf8t_31",active$2="_active_kmf8t_35",disabled$2="_disabled_kmf8t_40",styles$G={button:button$4,buttonDragging,group,active:active$2,disabled:disabled$2},pill="_pill_130tv_1",race$1="_race_130tv_6",witch_hex="_witch_hex_130tv_6",white="_white_130tv_6",link="_link_130tv_39",feat="_feat_130tv_62",green="_green_130tv_70",red="_red_130tv_75",blue="_blue_130tv_80",special="_special_130tv_87",rage_power="_rage_power_130tv_87",class_feature="_class_feature_130tv_94",ability="_ability_130tv_100",variants={pill,default:"_default_130tv_6",race:race$1,class:"_class_130tv_6",witch_hex,white,"header-link":"_header-link_130tv_14",link,feat,green,red,blue,special,rage_power,class_feature,ability,"list-item":"_list-item_130tv_106","add-button":"_add-button_130tv_110"};function ButtonBlock({variant:et="default",className:_e,labelPrefix:tt=void 0,children:nt=void 0,disabled:rt=!1,dragging:it=!1,...ot}){const st=reactExports.useMemo(()=>{const at=[it?styles$G.buttonDragging:styles$G.button,_e];return rt?at.push(styles$G.disabled):array(et).forEach(ct=>at.push(variants[ct])),classNames(at)},[it,_e,et,rt]);return jsxRuntimeExports.jsx("div",{...ot,className:st,children:nt})}const collapsed="_collapsed_15009_1",expanded="_expanded_15009_5",expanding="_expanding_15009_5",collapsing="_collapsing_15009_5",item="_item_15009_5",button$3="_button_15009_5",body$1="_body_15009_9",active$1="_active_15009_15",disabled$1="_disabled_15009_20",styles$F={collapsed,expanded,expanding,collapsing,item,button:button$3,body:body$1,active:active$1,disabled:disabled$1};function useOnScreen(et,_e="0px"){const[tt,nt]=reactExports.useState(!1);return reactExports.useEffect(()=>{if(et===void 0)return;let rt;const it=new IntersectionObserver(([ot])=>{nt(ot.isIntersecting)},{rootMargin:_e});return et.current&&(rt=et.current,it.observe(rt)),()=>{rt&&it.unobserve(rt)}},[et,_e]),tt}const SelectBlock=({activeKey:et,onChange:_e,children:tt})=>{function nt(rt){_e==null||_e(typeof rt=="string"?rt:void 0)}return jsxRuntimeExports.jsx(Accordion$1,{activeKey:et,className:styles$F.control,onSelect:nt,flush:!1,children:tt})};function SelectBlockItem({itemKey:et,label:_e,bodyFn:tt,style:nt=void 0,scrollTo:rt=!1,disabled:it=!1,variant:ot="special",children:st=void 0}){return tt!==void 0||st!==void 0?jsxRuntimeExports.jsx(SelectBlockItemWithBody,{itemKey:et,label:_e,bodyFn:tt,scrollTo:rt,disabled:it,style:nt,variant:ot,children:st}):jsxRuntimeExports.jsx(SelectBlockItemWithoutBody,{itemKey:et,label:_e,scrollTo:rt,disabled:it,style:nt,variant:ot})}function SelectBlockItemWithoutBody({itemKey:et,label:_e,scrollTo:tt,disabled:nt,variant:rt}){const{activeEventKey:it}=reactExports.useContext(AccordionContext),ot=et===it,st=useAccordionButton(et),at=[styles$F.item],lt=[styles$F.button,styles$F.collapsed];return ot&&lt.push(styles$F.active),jsxRuntimeExports.jsx("div",{className:classNames(at),children:jsxRuntimeExports.jsx(ButtonBlock,{variant:rt,disabled:nt,className:classNames(lt),onClick:st,children:_e})})}function SelectBlockItemWithBody({itemKey:et,label:_e,scrollTo:tt,bodyFn:nt,disabled:rt,variant:it,children:ot}){const st=reactExports.useRef(null),at=useOnScreen(st),{activeEventKey:lt}=reactExports.useContext(AccordionContext),ct=et===lt,[ut,dt]=reactExports.useState(ct),[ft,pt]=reactExports.useState(!1),[mt,xt]=reactExports.useState(!1),[gt,ht]=reactExports.useState(!ct),yt=at||ct,[vt,_t]=reactExports.useState();reactExports.useEffect(()=>{if(!yt){_t(void 0);return}if(nt===void 0){_t(ot);return}let Pt=!0,jt=!0;return nt().then(Wt=>{jt&&_t(Wt),Pt=!1}),()=>{jt=!1,Pt||_t(void 0)}},[et,yt,nt]),reactExports.useEffect(()=>{!tt||!st.current||st.current.scrollIntoView({behavior:"instant",block:"start"})},[st]);const Et=useAccordionButton(et),bt=()=>{pt(!0),dt(!1),xt(!1),ht(!1)},St=()=>{pt(!1),dt(!0),ht(!1)},wt=()=>{pt(!1),dt(!1),xt(!0),ht(!1)},Rt=()=>{xt(!1),dt(!1),ht(!0)},Nt=[styles$F.item],kt=[styles$F.button];return ut&&kt.push(styles$F.expanded),ft&&kt.push(styles$F.expanding),mt&&kt.push(styles$F.collapsing),gt&&kt.push(styles$F.collapsed),ct&&kt.push(styles$F.active),jsxRuntimeExports.jsx("div",{className:classNames(Nt),ref:st,children:yt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ButtonBlock,{variant:it,disabled:rt,className:classNames(kt),onClick:Et,children:_e}),jsxRuntimeExports.jsx(Accordion$1.Collapse,{eventKey:et,appear:ct,onEntering:Pt=>bt(),onEntered:Pt=>St(),onExiting:Pt=>wt(),onExited:Pt=>Rt(),children:jsxRuntimeExports.jsx("div",{className:styles$F.body,children:vt})})]}):jsxRuntimeExports.jsx(ButtonBlock,{variant:it,className:classNames(kt)})})}function SelectBlockItemContainer({label:et,childrenFn:_e,disabled:tt,variant:nt}){const rt=reactExports.useRef(null),[it,ot]=reactExports.useState(!1),[st,at]=reactExports.useState(!1),[lt,ct]=reactExports.useState(!1),[ut,dt]=reactExports.useState(!0),[ft,pt]=reactExports.useState(!1),[mt,xt]=reactExports.useState(jsxRuntimeExports.jsx(LoadingBlock,{}));function gt(){pt(!ft)}const ht=()=>{xt(_e()),at(!0),ot(!1),ct(!1),dt(!1)},yt=()=>{at(!1),ot(!0),dt(!1)},vt=()=>{at(!1),ot(!1),ct(!0),dt(!1)},_t=()=>{ct(!1),ot(!1),dt(!0),xt(jsxRuntimeExports.jsx(LoadingBlock,{}))},Et=[styles$F.item],bt=[styles$F.button];it&&bt.push(styles$F.expanded),st&&bt.push(styles$F.expanding),lt&&bt.push(styles$F.collapsing),ut&&bt.push(styles$F.collapsed);const St=ft?jsxRuntimeExports.jsx(CaretDownFill$1,{}):jsxRuntimeExports.jsx(CaretRightFill$1,{});return jsxRuntimeExports.jsxs("div",{className:classNames(Et),ref:rt,children:[jsxRuntimeExports.jsxs(ButtonBlock,{variant:nt,disabled:tt,className:classNames(bt),onClick:wt=>gt(),children:[St," ",et]}),jsxRuntimeExports.jsx(Collapse$1,{in:ft,onEntering:wt=>ht(),onEntered:wt=>yt(),onExiting:wt=>vt(),onExited:wt=>_t(),children:jsxRuntimeExports.jsx("div",{className:styles$F.body,children:mt})})]})}SelectBlock.Item=SelectBlockItem;SelectBlock.ItemContainer=SelectBlockItemContainer;class ChoiceSelectorOption{constructor(_e,tt,nt,rt){this.id=_e,this.label=tt,this.isValidFn=nt,this.descriptionFn=rt}get isValid(){return typeof this.isValidFn=="boolean"?this.isValidFn:this.isValidFn()}}class ChoiceSelectorCategory{constructor(_e,tt,nt=tt){this.label=_e,this.tag=tt,this.key=nt}}function ChoiceSelectorList({options:et,variant:_e,selected:tt,onSelect:nt,onChangeSelection:rt}){function it(ot,st){return jsxRuntimeExports.jsx(SelectBlock.Item,{itemKey:ot.id,label:jsxRuntimeExports.jsx(FeatureButtonLabel$1,{id:ot.id,label:ot.label}),bodyFn:ot.descriptionFn,disabled:!ot.isValid,scrollTo:ot.id===tt,variant:_e},ot.id+st)}return jsxRuntimeExports.jsx(SelectBlock,{activeKey:tt,onChange:nt,children:et.map(it)})}function FeatureButtonLabel$1({id:et,label:_e}){return jsxRuntimeExports.jsx("div",{className:"d-flex flex-row gap-2 flex-grow-1",children:jsxRuntimeExports.jsx("div",{className:"d-flex align-self-center flex-grow-1",children:_e??et})})}const dialog$1="_dialog_jhjae_1",title$4="_title_jhjae_1",header$6="_header_jhjae_12",body="_body_jhjae_19",footer$1="_footer_jhjae_22",styles$E={dialog:dialog$1,title:title$4,header:header$6,body,footer:footer$1};function FaFileLines(et){return GenIcon({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM112 256H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"}}]})(et)}function FaMagnifyingGlass(et){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"}}]})(et)}function SearchBar(et){const[_e,tt]=reactExports.useState(""),{query:nt,onSearch:rt}=et;reactExports.useEffect(()=>tt(nt),[nt]);let it=reactExports.useRef(null);return reactExports.useEffect(()=>{var ot;(ot=it.current)==null||ot.focus()},[]),jsxRuntimeExports.jsx(Form$1,{className:"pf-search-bar",onSubmit:ot=>{rt(_e),ot.preventDefault()},children:jsxRuntimeExports.jsxs(InputGroup$1,{children:[jsxRuntimeExports.jsx(InputGroup$1.Text,{children:jsxRuntimeExports.jsx(FaMagnifyingGlass,{})}),jsxRuntimeExports.jsx(Form$1.Control,{ref:it,value:_e,onChange:ot=>tt(ot.target.value),placeholder:"Search"}),jsxRuntimeExports.jsx(Button$1,{type:"submit",variant:"primary",children:"Search"})]})})}const SearchCategory=new ChoiceSelectorCategory(jsxRuntimeExports.jsx(FaMagnifyingGlass,{}),"","_search");function ChoiceSelectorDialog({choiceName:et,show:_e,value:tt,onSelect:nt,onCancel:rt,onChangeSelection:it,optionsFn:ot,categories:st=[],search:at=!1,variant:lt="special"}){const[ct,ut]=reactExports.useState(tt),[dt,ft]=reactExports.useState(""),[pt,mt]=reactExports.useState(()=>(st==null?void 0:st.length)>0?st[0]:void 0),xt=reactExports.useMemo(()=>array(ot(dt,pt)),[ot,dt,pt]),gt=reactExports.useMemo(()=>dt.trim().length>0,[dt]),ht=reactExports.useMemo(()=>gt||xt.length<=20,[gt,xt]),[yt,vt]=reactExports.useTransition();function _t(Pt){if(ut(tt),!(Pt===void 0||!pt))for(let jt of st){const Wt=array(ot(void 0,jt));for(let Ht of Wt)if(Ht.id===Pt){mt(jt);return}}}reactExports.useEffect(()=>{gt&&mt(SearchCategory)},[gt]),reactExports.useEffect(()=>{pt!==SearchCategory&&ft("")},[_e,pt]),reactExports.useEffect(()=>{_t(tt)},[tt]);const Et=reactExports.useMemo(()=>{let Pt=xt;return ht||(Pt=Pt.filter(jt=>jt.isValid)),Pt.sort((jt,Wt)=>jt.isValid&&!Wt.isValid?-1:!jt.isValid&&Wt.isValid?1:0)},[xt,dt,gt,ht]),bt=ct!==void 0&&ct!=="",St=at===!0||at==="auto"&&(Et.length>10||(st==null?void 0:st.length)>0)||gt,wt=Pt=>{ut(Pt),it==null||it(Pt)},Rt=Pt=>{const jt=[SearchCategory,...st].find(Wt=>Wt.key===(Pt!==""?Pt:"all"));vt(()=>mt(jt))};function Nt(Pt){vt(()=>ft(Pt))}function kt(){nt==null||nt(ct??"")}return jsxRuntimeExports.jsxs(Modal$1,{show:_e,onHide:rt,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,size:"lg",scrollable:!0,fullscreen:"md-down",className:styles$E.dialog,children:[jsxRuntimeExports.jsx(Modal$1.Header,{className:styles$E.title,closeButton:!0,closeVariant:"white",children:jsxRuntimeExports.jsxs(Modal$1.Title,{children:["Select ",et]})}),((st==null?void 0:st.length)>0||St)&&jsxRuntimeExports.jsxs(Modal$1.Header,{className:styles$E.header,children:[st.length>0&&jsxRuntimeExports.jsxs(ToggleButtonGroup$1,{className:styles$E.categories,value:(pt==null?void 0:pt.key)??"",onChange:Rt,name:"category",type:"radio",children:[at&&jsxRuntimeExports.jsx(ToggleButton$1,{disabled:!gt,id:SearchCategory.key,value:SearchCategory.key,children:SearchCategory.label}),st.map(Pt=>{const jt=Pt.key!==""?Pt.key:"_blank";return jsxRuntimeExports.jsx(ToggleButton$1,{id:jt,value:Pt.key,children:Pt.label},jt)})]}),St&&jsxRuntimeExports.jsx(SearchBar,{query:dt,onSearch:Nt})]}),jsxRuntimeExports.jsx(Modal$1.Body,{className:styles$E.body,children:yt?jsxRuntimeExports.jsx(LoadingBlock,{}):Et.length>0&&jsxRuntimeExports.jsx(ChoiceSelectorList,{selected:ct,options:Et,onSelect:wt,variant:lt})||jsxRuntimeExports.jsx(Alert$1,{variant:"warning",children:"None found"})}),jsxRuntimeExports.jsx(Modal$1.Footer,{className:styles$E.footer,children:jsxRuntimeExports.jsx(Button$1,{size:"lg",className:"w-100",disabled:!bt,onClick:kt,children:"Select"})})]})}const icon="_icon_bpuo8_1",styles$D={icon};function EditIcon(){return jsxRuntimeExports.jsx(PencilSquare$1,{className:styles$D.icon})}function ChoiceSelectButton({choiceName:et,value:_e,id:tt,onSelect:nt,optionsFn:rt,categoriesFn:it,buttonLabel:ot,children:st,actionVerb:at="Select",removable:lt=!1,variant:ct="white",dialogVariant:ut=ct,search:dt=!1,sortBy:ft="none"}){const[pt,mt]=reactExports.useState(!1),[xt,gt]=reactExports.useState(!1),[ht,yt]=reactExports.useState(!1),[vt,_t]=reactExports.useState(),Et=()=>{it&&_t(it()),yt(!0)},bt=()=>{yt(!1),_t(void 0)},St=jt=>{nt==null||nt(jt),yt(!1),_t(void 0)},wt=jt=>{mt(!0),jt.stopPropagation()},Rt=()=>{gt(!0),nt==null||nt("")},Nt=reactExports.useMemo(()=>_e!==""&&_e!==void 0?array(rt(void 0,void 0)).filter(jt=>jt.id===_e).map(jt=>jt.label).at(0):void 0,[_e]),kt=st??jsxRuntimeExports.jsxs("div",{className:styles$H.label,children:[jsxRuntimeExports.jsx(EditIcon,{})," ",ot??Nt??jsxRuntimeExports.jsxs("i",{children:[at," ",et]})]}),Pt=lt?jsxRuntimeExports.jsx(CloseButton$1,{className:styles$H.removeButton,onClick:wt}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});return xt?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Collapse$1,{in:!pt,onExited:Rt,children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs(ButtonBlock,{id:tt,variant:ct,onClick:jt=>Et(),children:[kt," ",Pt]})})}),ht&&jsxRuntimeExports.jsx(ChoiceSelectorDialog,{choiceName:et,variant:ut,value:_e,show:ht,onSelect:St,onCancel:bt,optionsFn:rt,categories:vt,search:dt,sortBy:ft})]})}function DataChoiceSelectButton({choiceRef:et,choiceIndex:_e,characterAtLevel:tt,id:nt,onSelect:rt,label:it,buttonLabel:ot,variant:st,dialogVariant:at,descriptionFn:lt,search:ct,children:ut}){const dt=useDatabase(),ft=reactExports.useMemo(()=>tt.selected(et)!==void 0?tt.withoutChoice(et.path):tt,[tt,et]);function pt(mt){rt==null||rt(mt??"")}return jsxRuntimeExports.jsx(ChoiceSelectButton,{id:nt,choiceName:it??et.label,variant:st??"default",dialogVariant:at??st??"default",value:tt.selected(et,_e),buttonLabel:ot,onSelect:pt,search:ct,optionsFn:(mt,xt)=>queryOptions(dt,et,mt,xt).map(gt=>featureToChoiceSelectorOption(gt,dt,ft,lt)),categoriesFn:()=>et.categories.map(mt=>new ChoiceSelectorCategory(mt.label,mt.tag)),children:ut,actionVerb:et.repeatingIndex===0?"Select":"Add",removable:et.repeatingIndex>0&&tt.selected(et,_e)!==void 0})}function queryOptions(et,_e,tt,nt){return _e.options(et,tt,nt==null?void 0:nt.tag)}function featureToChoiceSelectorOption(et,_e,tt,nt,rt){const it=async ot=>{const st=await _e.load(ot);if(!st)return"";const at=st.description;return nt!==void 0?nt(at):jsxRuntimeExports.jsx(SelectionFeatureDescription,{feature:st,description:at,characterAtLevel:tt})};return new ChoiceSelectorOption(et.key,et.name,()=>et.isEnabled(tt),async()=>it(et.key))}const dialog="_dialog_13rnf_1",title$3="_title_13rnf_1",header$5="_header_13rnf_12",footer="_footer_13rnf_18",styles$C={dialog,title:title$3,header:header$5,footer};function PromptDialog({show:et,prompt:_e,onConfirm:tt,onCancel:nt}){function rt(){tt==null||tt()}function it(){tt==null||tt()}return jsxRuntimeExports.jsxs(Modal$1,{show:et,onHide:nt,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,scrollable:!1,fullscreen:"md-down",className:styles$C.dialog,children:[jsxRuntimeExports.jsx(Modal$1.Header,{className:styles$C.title,closeButton:!1,children:jsxRuntimeExports.jsx(Modal$1.Title,{children:_e})}),jsxRuntimeExports.jsx(Modal$1.Body,{className:styles$C.body,children:jsxRuntimeExports.jsxs("div",{className:"d-flex justify-content-evenly",children:[jsxRuntimeExports.jsx(Button$1,{size:"lg",className:"w-50 me-3",onClick:rt,children:"Yes"}),jsxRuntimeExports.jsx(Button$1,{size:"lg",className:"w-50 mw-3",onClick:it,children:"No"})]})})]})}const control$2="_control_1se8s_1",bonus="_bonus_1se8s_8",header$4="_header_1se8s_13",penalty="_penalty_1se8s_17",border="_border_1se8s_26",input="_input_1se8s_44",mod="_mod_1se8s_55",styles$B={control:control$2,bonus,header:header$4,penalty,border,input,mod};function AbilityScoreEditor({label:et,score:_e,base:tt,onClick:nt}){const rt=reactExports.useMemo(()=>{const st=Math.floor((_e-10)/2);return st<0?st.toString():"+"+st},[_e]),it=_e>tt,ot=_e<tt;return jsxRuntimeExports.jsxs("div",{className:classNames([styles$B.control,"clickable",it&&styles$B.bonus||void 0,ot&&styles$B.penalty||void 0]),onClick:nt,children:[jsxRuntimeExports.jsx("div",{className:styles$B.header,children:et}),jsxRuntimeExports.jsx("div",{className:styles$B.input,children:_e}),jsxRuntimeExports.jsx("div",{className:styles$B.border}),jsxRuntimeExports.jsx("div",{className:styles$B.mod,children:rt})]})}const control$1="_control_12ln6_1",cost="_cost_12ln6_7",abilityScores$1="_abilityScores_12ln6_11",styles$A={control:control$1,cost,abilityScores:abilityScores$1},AbilityScoreOptions=[7,8,9,10,11,12,13,14,15,16,17,18,19,20].map(et=>new ChoiceSelectorOption(et.toString(),abilityScoreLabel(et),!0));function AbilityScoresEditor({characterAtLevel:et,onChange:_e}){var tt;return jsxRuntimeExports.jsxs("div",{className:styles$A.control,children:[jsxRuntimeExports.jsx("div",{className:styles$A.cost,children:jsxRuntimeExports.jsxs("code",{children:["Ability Point Cost: ",(tt=et.resolve("ability_point_cost"))==null?void 0:tt.asNumber()]})}),jsxRuntimeExports.jsx("div",{className:styles$A.abilityScores,children:["str","dex","con","int","wis","cha"].map(nt=>jsxRuntimeExports.jsx(AbilityScoreItem,{ability:nt,characterAtLevel:et,onChange:_e},nt))}),jsxRuntimeExports.jsx("div",{children:et.choicesOfType("asi").map(nt=>jsxRuntimeExports.jsx(DataChoiceSelectButton,{choiceRef:nt,characterAtLevel:et,onSelect:rt=>_e==null?void 0:_e(nt,rt)},nt.path))})]})}function AbilityScoreItem({ability:et,characterAtLevel:_e,onChange:tt}){const[nt,rt]=reactExports.useState(!1),it=reactExports.useMemo(()=>{var lt;return((lt=_e.resolve(`${et}_score`))==null?void 0:lt.asNumber())??0},[et,_e]),ot=reactExports.useMemo(()=>{var lt;return((lt=_e.resolve(`${et}:base`))==null?void 0:lt.asNumber())??0},[et,_e]),st=reactExports.useMemo(()=>_e.choice(et+":base"),[et,_e]);function at(lt){st&&(tt==null||tt(st,lt),rt(!1))}if(!st){console.error(`No choice for ${et}`);return}return jsxRuntimeExports.jsxs("div",{className:styles$A.abilityScore,children:[jsxRuntimeExports.jsx(AbilityScoreEditor,{label:et.toUpperCase(),score:it,base:ot,onClick:()=>rt(!0)}),jsxRuntimeExports.jsx(ChoiceSelectorDialog,{choiceName:st.label,show:nt,value:ot.toString(),optionsFn:()=>AbilityScoreOptions,onSelect:at,search:!1,onCancel:()=>rt(!1),variant:"white",sortBy:"none"})]},st.path)}function abilityScoreLabel(et){const _e=Math.floor(et/2)-5,tt=_e>=0?`+${_e}`:_e;return jsxRuntimeExports.jsxs("span",{children:[et," ",jsxRuntimeExports.jsxs("code",{children:["(",tt,")"]})]},`score-${et}`)}function LevelStatsDisplay({characterAtLevel:et}){var _e,tt,nt,rt;return jsxRuntimeExports.jsxs(Container$1,{className:"level-stats-display",children:[jsxRuntimeExports.jsxs(Row$1,{children:[jsxRuntimeExports.jsx(Col$1,{className:"header",children:"BAB"}),jsxRuntimeExports.jsx(Col$1,{className:"header",children:"Fortitude"}),jsxRuntimeExports.jsx(Col$1,{className:"header",children:"Reflex"}),jsxRuntimeExports.jsx(Col$1,{className:"header",children:"Will"})]}),jsxRuntimeExports.jsxs(Row$1,{children:[jsxRuntimeExports.jsx(Col$1,{className:"numeric-value",children:(_e=et.resolve("{signed(@bab)}"))==null?void 0:_e.asText()}),jsxRuntimeExports.jsx(Col$1,{className:"numeric-value",children:(tt=et.resolve("{signed(@fort:base)}"))==null?void 0:tt.asText()}),jsxRuntimeExports.jsx(Col$1,{className:"numeric-value",children:(nt=et.resolve("{signed(@ref:base)}"))==null?void 0:nt.asText()}),jsxRuntimeExports.jsx(Col$1,{className:"numeric-value",children:(rt=et.resolve("{signed(@will:base)}"))==null?void 0:rt.asText()})]})]})}function CharacterFeatureList({characterAtLevel:et,features:_e}){return jsxRuntimeExports.jsx(SelectBlock,{children:_e.map(tt=>jsxRuntimeExports.jsx(SelectBlock.Item,{itemKey:tt.key,label:jsxRuntimeExports.jsx(FeatureButtonLabel,{characterAtLevel:et,feature:tt}),variant:determineVariant(tt),bodyFn:async()=>jsxRuntimeExports.jsx(FeatureDescription,{feature:tt,characterAtLevel:et})},tt.key))})}function FeatureButtonLabel({characterAtLevel:et,feature:_e,type:tt=void 0}){const nt=reactExports.useMemo(()=>_e.label!==void 0?Expression.parse(_e.label).resolve(et).asText():_e.name,[_e,et]);return reactExports.useMemo(()=>{var ot,st;const rt=/(^[a-z]| [a-z])/ig;let it=((st=(ot=_e.name.match(rt))==null?void 0:ot.slice(0,2))==null?void 0:st.join(""))??"";return it=it.replace(" ",""),it.length===1&&(it=_e.name.substring(0,2)),it},[_e]),jsxRuntimeExports.jsx("div",{className:"d-flex flex-row gap-2 align-self-stretch",children:jsxRuntimeExports.jsx("div",{className:"d-flex align-self-center",children:nt})})}function determineVariant(et){for(let _e of et.tags)if(_e in variants)return _e;return"default"}function GiBookmark(et){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M161.22 19.563l-2.5 5.375-106.44 225.5-1 2.093c-24.493 28.208-34.917 58.587-33.593 88.19 1.38 30.852 15.12 60.388 36.376 86.81l2.812 3.5h49.72c4.817-3.836 8.93-7.817 12.405-12.03 1.758-2.132 3.38-4.358 4.875-6.656H65.97c-17.813-23.187-28.526-47.848-29.626-72.438-1.123-25.11 7.337-50.594 29.937-76.125H498.157l-5.25-12.874-91.844-225.5-2.375-5.843H161.22zm11.843 18.687h177.343l52.656 41.594 38.407 94.28-58.845 70.94H75.47L173.062 38.25zM75.156 282.625c-15.31 18.98-20.975 37.778-20.125 56.438.84 18.398 8.276 36.95 20.5 54.468h57.19c4.392-13.517 6.344-29.847 6.78-50.436h-16.188v-18.688h16.313v-.187h115.749v.186h17.156v18.688h-17.25c-.287 17.8-1.447 34.638-4 50.437h221.626c-9.034-36.872-9.112-74.006-.03-110.905H75.155zm83 60.28c-.77 37.698-6.46 65.83-24.72 87.97-14.595 17.7-36.19 30.747-67.28 42.813 8.69 1.658 17.214 3.225 26.53 5.25 14.048 3.052 27.912 6.338 39.033 9.25 5.56 1.455 10.44 2.826 14.374 4.062 1.94.61 3.533 1.074 5.03 1.625 35.245-13.464 55.78-32.897 68.345-58.72 11.944-24.55 16.287-55.713 16.936-92.25h-78.25zm89.25 69.44c-1.632 6.425-3.532 12.668-5.812 18.686h257.03v-18.686H247.407z"}}]})(et)}function GiLockedChest(et){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M146.857 20.842c-12.535-.036-24.268 2.86-37.285 9.424h.004C61.356 54.6 19.966 120.734 17.982 175.91l41.848 14.236c4.33-61.89 47.057-128.37 101.527-155.86h.002c4.423-2.23 8.822-4.162 13.185-5.8l-22.26-7.45c-1.83-.123-3.637-.19-5.428-.194zm59.34 20.19c-10.478-.09-22.832 3.093-36.424 9.943l.004-.004c-48.23 24.34-89.625 90.513-91.548 145.436l156.485 53.24c3.865-62.22 46.797-129.372 101.613-157.035h.002l.002-.003c4.303-2.168 8.584-4.056 12.832-5.666l-134.54-45.036c-2.652-.542-5.458-.847-8.427-.873zm174.97 58.323c-10.476-.09-22.83 3.092-36.42 9.94l-.005.002c-48.577 24.518-90.225 91.473-91.586 146.623l46.205 15.72c3.914-62.188 46.825-129.274 101.607-156.92 4.522-2.283 9.04-4.258 13.53-5.91l-26.544-8.884c-2.164-.35-4.423-.55-6.785-.57zm63.554 22.014c-10.267.093-22.094 3.353-35.333 10.034-47.158 23.8-87.777 87.587-91.362 141.75l174.55-73.726c-.404-39.01-10.754-61.304-24.415-71.082-2.347-1.68-4.867-3.057-7.55-4.137l-.01.034-4.735-1.584c-3.48-.887-7.195-1.327-11.144-1.29zM17.9 195.622l-.035 187.484L59.46 397.58V209.764L17.9 195.624zM78.15 216.12v187.962l156.282 54.37V269.288l-29.053-9.886v119.43l-101.054-34.082V225.025L78.15 216.12zm414.22 3.683L318.433 293.27v189.236l173.935-73.504v-189.2zm-369.354 11.582v99.947l63.675 21.477v-99.763l-63.674-21.662zm31.306 28.797c9.705 0 17.573 7.867 17.573 17.572 0 6.34-3.37 11.88-8.407 14.97v28.53h-18.69v-28.746c-4.838-3.13-8.048-8.562-8.048-14.754 0-9.705 7.867-17.572 17.572-17.572zm98.797 15.464v189.307l46.626 16.22V291.51l-46.627-15.864z"}}]})(et)}function SpellBookEditor({characterAtLevel:et,onChange:_e}){return jsxRuntimeExports.jsxs("table",{border:2,cellPadding:"5px",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{children:"0th"}),jsxRuntimeExports.jsx("th",{children:"1st"}),jsxRuntimeExports.jsx("th",{children:"2nd"}),jsxRuntimeExports.jsx("th",{children:"3rd"}),jsxRuntimeExports.jsx("th",{children:"4th"}),jsxRuntimeExports.jsx("th",{children:"5th"}),jsxRuntimeExports.jsx("th",{children:"6th"}),jsxRuntimeExports.jsx("th",{children:"7th"}),jsxRuntimeExports.jsx("th",{children:"8th"}),jsxRuntimeExports.jsx("th",{children:"9th"})]})}),jsxRuntimeExports.jsx("tbody",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:spellsKnown(et,0)}),jsxRuntimeExports.jsx("td",{children:spellsKnown(et,1)}),jsxRuntimeExports.jsx("td",{children:spellsKnown(et,2)}),jsxRuntimeExports.jsx("td",{children:spellsKnown(et,3)}),jsxRuntimeExports.jsx("td",{children:spellsKnown(et,4)}),jsxRuntimeExports.jsx("td",{children:spellsKnown(et,5)}),jsxRuntimeExports.jsx("td",{children:spellsKnown(et,6)}),jsxRuntimeExports.jsx("td",{children:spellsKnown(et,7)}),jsxRuntimeExports.jsx("td",{children:spellsKnown(et,8)}),jsxRuntimeExports.jsx("td",{children:spellsKnown(et,9)})]})})]})}function spellsKnown(et,_e){const tt=et.resolve(`{sum(@trait:level_${_e}_spells_per_day#*)}`)??n$2.None;return tt.equals(n$2.of(""))?"-":tt.asText()}function SpellBookEditorDialog({characterAtLevel:et,show:_e,onCancel:tt,onChange:nt}){return jsxRuntimeExports.jsxs(Modal$1,{show:_e,onHide:tt,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,size:"lg",scrollable:!0,fullscreen:"md-down",className:styles$E.dialog,children:[jsxRuntimeExports.jsx(Modal$1.Header,{className:styles$E.title,closeButton:!0,closeVariant:"white",children:jsxRuntimeExports.jsxs(Modal$1.Title,{children:["Level ",et.level," Spell Book"]})}),jsxRuntimeExports.jsx(Modal$1.Body,{className:styles$E.body,children:jsxRuntimeExports.jsx(SpellBookEditor,{characterAtLevel:et,onChange:nt})})]})}const button$2="_button_14o63_1",styles$z={button:button$2};function SpellBookEditorButton({characterAtLevel:et,onChange:_e}){const[tt,nt]=reactExports.useState(!1);function rt(){nt(!0)}function it(){nt(!1)}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:styles$z.button,children:jsxRuntimeExports.jsx(GiBookmark,{size:64,className:"clickable",onClick:ot=>rt()})}),jsxRuntimeExports.jsx(SpellBookEditorDialog,{characterAtLevel:et,show:tt,onCancel:it,onChange:_e})]})}function ButtonBlockGroup({children:et,className:_e,...tt}){return jsxRuntimeExports.jsx("div",{...tt,className:classNames([styles$G.group,_e]),children:et})}function ArchetypeEditor({characterAtLevel:et,onChange:_e}){const tt=reactExports.useMemo(()=>et.choicesOfType("archetype")[0],[et]);if(!tt)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});const nt=reactExports.useMemo(()=>array(et.selected(tt))??[],[et,tt]);return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(ButtonBlockGroup,{children:nt.map((rt,it)=>jsxRuntimeExports.jsx(EditArchetypeButton,{choiceRef:tt,selectedIndex:it,characterAtLevel:et,onChange:_e},tt.path+"/"+it))}),jsxRuntimeExports.jsx(AddArchetypeButton,{choiceRef:tt,selectedIndex:-1,characterAtLevel:et,onChange:_e})]})}function EditArchetypeButton({choiceRef:et,selectedIndex:_e,characterAtLevel:tt,onChange:nt}){const rt=reactExports.useMemo(()=>array(tt.selected(et)),[et,tt]);return jsxRuntimeExports.jsx(DataChoiceSelectButton,{choiceRef:et,choiceIndex:_e,characterAtLevel:tt,variant:["default","list-item"],onSelect:it=>{it&&it!==""?rt[_e]=it:delete rt[_e],nt(et,rt)}})}function AddArchetypeButton({choiceRef:et,characterAtLevel:_e,onChange:tt}){const nt=reactExports.useMemo(()=>array(_e.selected(et)),[et,_e]);return jsxRuntimeExports.jsx(DataChoiceSelectButton,{choiceRef:et,choiceIndex:-1,characterAtLevel:_e,variant:"link",dialogVariant:"default",onSelect:rt=>{nt.push(rt),tt(et,nt)},children:"+ Add Archetype"})}const description$1="_description_lxkvd_1",styles$y={description:description$1};function ItemDescription({item:et}){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:styles$y.description,children:et.description.text}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Source:"})," ",et.sourceId]})]})}const text$1="_text_1pavk_1",unit="_unit_1pavk_5",styles$x={text:text$1,unit};function Quantity({amount:et,unit:_e}){return jsxRuntimeExports.jsxs("span",{className:styles$x.text,children:[et,_e&&jsxRuntimeExports.jsx("span",{className:styles$x.unit,children:_e})]})}function Currency({gp:et}){const[_e,tt]=reactExports.useMemo(()=>{if(et===0)return[0,"gp"];let nt=et,rt="gp";return nt<1&&(nt=nt*10,rt="sp"),nt<1&&(nt=nt*10,rt="bp"),[Intl.NumberFormat().format(nt),rt]},[et]);return et===0?jsxRuntimeExports.jsx("span",{children:"--"}):jsxRuntimeExports.jsx(Quantity,{amount:_e,unit:tt})}function EquipmentEditor({characterAtLevel:et,onChange:_e}){const tt=useDatabase(),[nt]=useAsyncMemo(()=>tt.itemDatabase(),[tt]),rt=reactExports.useMemo(()=>et.choicesOfType("equipment")[0],[et]),it=reactExports.useMemo(()=>nt===void 0||rt===void 0?[]:(array(et.selected(rt))??[]).map(at=>nt.summary(parseInt(at))).filter(at=>at!==void 0),[et,nt,rt]),ot=reactExports.useMemo(()=>it.map(st=>st.cost).reduce((st,at)=>st+at,0),[it]);return nt?rt===void 0?jsxRuntimeExports.jsx("div",{children:"Not Available"}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{children:["Total Cost: ",jsxRuntimeExports.jsx(Currency,{gp:ot})]}),jsxRuntimeExports.jsx(ButtonBlockGroup,{children:it.map((st,at)=>jsxRuntimeExports.jsx(EditItemButton,{itemDatabase:nt,choiceRef:rt,selectedIndex:at,characterAtLevel:et,onChange:_e},st.uid))}),jsxRuntimeExports.jsx(AddItemButton,{choiceRef:rt,itemDatabase:nt,characterAtLevel:et,onChange:_e})]}):jsxRuntimeExports.jsx(LoadingBlock,{})}function EditItemButton({choiceRef:et,selectedIndex:_e=0,characterAtLevel:tt,itemDatabase:nt,onChange:rt}){return jsxRuntimeExports.jsx(ItemChoiceSelectButton,{choiceRef:et,choiceIndex:_e,characterAtLevel:tt,itemDatabase:nt,variant:["default","list-item"],onSelect:it=>{let ot=array(tt.selected(et));it&&it!==""?ot[_e]=it:_e!==void 0&&ot.splice(_e,1),rt(et,ot)}})}function AddItemButton({choiceRef:et,characterAtLevel:_e,itemDatabase:tt,onChange:nt}){return jsxRuntimeExports.jsx(ItemChoiceSelectButton,{choiceRef:et,characterAtLevel:_e,itemDatabase:tt,variant:"link",dialogVariant:"default",onSelect:rt=>{const it=_e.selected(et),ot=it!==""?array(it):[];ot.push(rt),nt(et,ot)},children:"+ Add Item"})}function ItemChoiceSelectButton({choiceRef:et,characterAtLevel:_e,choiceIndex:tt,itemDatabase:nt,onSelect:rt,variant:it,dialogVariant:ot,children:st}){const at=reactExports.useMemo(()=>tt===void 0?void 0:_e.selected(et,tt),[_e,et,tt]);return jsxRuntimeExports.jsx(ChoiceSelectButton,{choiceName:et.label,value:at,variant:it,dialogVariant:ot,search:!0,removable:at!==void 0,optionsFn:(lt,ct)=>itemOptions(lt,nt),onSelect:rt,children:st})}function ItemLabel({item:et}){return jsxRuntimeExports.jsxs("div",{className:"d-flex flex-grow-1",children:[jsxRuntimeExports.jsx("div",{className:"flex-grow-1",children:et.name}),jsxRuntimeExports.jsxs("div",{children:["(",jsxRuntimeExports.jsx(Currency,{gp:et.cost}),")"]})]})}function itemOptions(et,_e){return _e.summaries().filter(tt=>!et||tt.name.toLowerCase().includes(et.toLowerCase())).map(tt=>new ChoiceSelectorOption(tt.itemId.toString(),jsxRuntimeExports.jsx(ItemLabel,{item:tt}),!0,async()=>{const nt=await _e.load(tt.itemId);return nt?jsxRuntimeExports.jsx(ItemDescription,{item:nt}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}))}function EquipmentEditorDialog({characterAtLevel:et,show:_e,onCancel:tt,onChange:nt}){return jsxRuntimeExports.jsxs(Modal$1,{show:_e,onHide:tt,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,size:"lg",scrollable:!0,fullscreen:"md-down",className:styles$E.dialog,children:[jsxRuntimeExports.jsx(Modal$1.Header,{className:styles$E.title,closeButton:!0,closeVariant:"white",children:jsxRuntimeExports.jsxs(Modal$1.Title,{children:["Level ",et.level," Equipment"]})}),jsxRuntimeExports.jsx(Modal$1.Body,{className:styles$E.body,children:jsxRuntimeExports.jsx(EquipmentEditor,{characterAtLevel:et,onChange:nt})})]})}const button$1="_button_14o63_1",styles$w={button:button$1};function EquipmentEditorButton({characterAtLevel:et,onChange:_e}){const[tt,nt]=reactExports.useState(!1);function rt(){nt(!0)}function it(){nt(!1)}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:styles$w.button,children:jsxRuntimeExports.jsx(GiLockedChest,{size:64,className:"clickable",onClick:ot=>rt()})}),jsxRuntimeExports.jsx(EquipmentEditorDialog,{characterAtLevel:et,show:tt,onCancel:it,onChange:_e})]})}function CharacterLevelEditor({characterAtLevel:et,characterAtPreviousLevel:_e,onChange:tt}){const nt=reactExports.useMemo(()=>et.diff(_e),[et,_e]),rt=reactExports.useMemo(()=>nt.features.filter(showFeature).filter(it=>notFromChoice(it,et)),[nt]);return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(ArchetypeEditor,{characterAtLevel:nt,onChange:tt}),jsxRuntimeExports.jsx(LevelStatsDisplay,{characterAtLevel:et}),jsxRuntimeExports.jsxs("div",{className:"d-flex flex-row gap-2",children:[et.search("ability:spellcasting#*").filter(it=>it.id.startsWith("ability:spellcasting#")).map(it=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(SpellBookEditorButton,{characterAtLevel:et,onChange:tt})},it.id)),jsxRuntimeExports.jsx(EquipmentEditorButton,{characterAtLevel:et,onChange:tt})]}),nt.choices.filter(it=>showChoice(it)).filter(it=>it.inputType===ChoiceInputType.Select).map(it=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{children:it.label}),jsxRuntimeExports.jsx(DataChoiceSelectButton,{choiceRef:it,search:"auto",characterAtLevel:et,onSelect:ot=>tt(it,ot)},it.path)]})),rt.length>0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{children:"New Features"}),jsxRuntimeExports.jsx(CharacterFeatureList,{characterAtLevel:et,features:rt})]})]})}function notFromChoice(et,_e){return!_e.choices.find(tt=>_e.selected(tt)===et.key)}function showChoice(et){return!(et.type==="class"||et.type==="spell"||et.type==="archetype"||et.type==="equipment")}function showFeature(et){return!(et.tags.includes("archetype")||et.tags.includes("class")||et.key.startsWith("proficiency:")||et.tags.includes("spell"))}function SelectClassButton({characterAtLevel:et}){const _e=useDatabase(),tt=reactExports.useMemo(()=>et.choices.find(rt=>rt.type==="class"),[et]),nt=reactExports.useMemo(()=>tt!==void 0?et.selected(tt):void 0,[tt,et]);return reactExports.useMemo(()=>nt!==void 0?_e.name(nt):jsxRuntimeExports.jsx("i",{children:"Select Class"}),[_e,nt]),tt===void 0?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsx(DataChoiceSelectButton,{variant:"header-link",dialogVariant:"class",choiceRef:tt,characterAtLevel:et})}function DataChoiceTextInput({choiceRef:et,characterAtLevel:_e,id:tt,onSelect:nt}){return jsxRuntimeExports.jsx(TextInput,{id:tt,value:_e.selected(et),onChange:nt})}function CharacterEditor({loaded:et}){const[_e,tt]=reactExports.useState(et),[nt,rt]=reactExports.useState(!1),it=useCharacterStore(),ot=reactExports.useMemo(()=>{const ut=[];for(let dt=0;dt<=20;dt++)ut[dt]=_e.atLevel(dt);return ut},[_e]),st=ot[0];async function at(ut){const dt=await ut(_e);tt(dt),await it.save(dt)}function lt(ut,dt){isString(dt)&&_e.selected(ut.path)===dt||(ut.path==="favored_class"&&rt(!0),at(ft=>ft.selectAll({[ut.path]:dt})))}function ct(){var ft;const ut={},dt=(ft=_e.selected("favored_class"))==null?void 0:ft.replace("favored_class","class");if(dt){for(let pt=1;pt<=20;pt++)ut[`${pt}:class`]=dt;at(pt=>pt.selectAll(ut))}}return jsxRuntimeExports.jsxs("main",{children:[jsxRuntimeExports.jsx("header",{children:"Character Information"}),jsxRuntimeExports.jsxs("section",{children:[st.choices.filter(ut=>ut.type!=="ability_score"&&ut.type!=="asi").map(ut=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:ut.path,children:ut.label}),ut.inputType===ChoiceInputType.Text&&jsxRuntimeExports.jsx(DataChoiceTextInput,{id:ut.path,choiceRef:ut,characterAtLevel:st.withoutChoice(ut.path),onSelect:dt=>lt(ut,dt)}),ut.inputType===ChoiceInputType.Select&&jsxRuntimeExports.jsx(DataChoiceSelectButton,{id:ut.path,choiceRef:ut,characterAtLevel:st.withoutChoice(ut.path),onSelect:dt=>lt(ut,dt)})]},ut.path)),jsxRuntimeExports.jsx(PromptDialog,{show:nt,prompt:"Change all class levels to favored class?",onCancel:()=>rt(!1),onConfirm:()=>{ct(),rt(!1)}})]}),jsxRuntimeExports.jsx("header",{children:"Ability Scores"}),jsxRuntimeExports.jsx("section",{children:jsxRuntimeExports.jsx(AbilityScoresEditor,{characterAtLevel:st,onChange:lt})}),ot.slice(1).map(ut=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("header",{children:[jsxRuntimeExports.jsxs("div",{children:["Level ",ut.level]}),jsxRuntimeExports.jsx("div",{children:" - "}),jsxRuntimeExports.jsx(SelectClassButton,{characterAtLevel:ut}),jsxRuntimeExports.jsx("div",{className:"character-sheet-button",children:jsxRuntimeExports.jsx(Link$1,{to:`/character/sheet/${_e.id}/${ut.level}`,target:"_blank",rel:"noopener noreferrer",children:jsxRuntimeExports.jsx(FaFileLines,{})})})]}),jsxRuntimeExports.jsx("section",{children:jsxRuntimeExports.jsx(CharacterLevelEditor,{characterAtLevel:ut,characterAtPreviousLevel:ot[ut.level-1],onChange:lt})})]},`level-${ut.level}`))]})}function CharacterEdit({loaded:et}){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(CharacterEditor,{loaded:et}),jsxRuntimeExports.jsx("div",{className:"spacer"})]})}async function characterEditLoader({params:et}){const _e=et.id;if(!_e)throw new Error("No character ID specified");const tt=await withGlobalCharacterStore(),nt=await timedAsync(()=>tt.load(_e),"Loading character");if(!nt)throw new Error("Character not found");const rt=await withGlobalDatabase();if(!rt)throw new Error("Unable to initialize database");return{character:nt,characterStore:tt,database:rt}}function CharacterEditRoute(){const{character:et,characterStore:_e,database:tt}=useLoaderData();return jsxRuntimeExports.jsx(DatabaseContext.Provider,{value:tt,children:jsxRuntimeExports.jsx(CharacterStoreContext.Provider,{value:_e,children:jsxRuntimeExports.jsx(CharacterEdit,{loaded:et})})})}const root$4="_root_ws79p_1",content="_content_ws79p_10",button="_button_ws79p_20",emailSubmit="_emailSubmit_ws79p_28",signinIcon="_signinIcon_ws79p_32",error="_error_ws79p_37",line="_line_ws79p_43",styles$v={root:root$4,content,button,emailSubmit,signinIcon,error,line};function Login(){const et=useNavigate(),[_e,tt]=reactExports.useState(),[nt,rt]=reactExports.useState(),[it,ot]=reactExports.useState(),[st,at]=reactExports.useState(),[lt,ct]=reactExports.useState(""),[ut,dt]=reactExports.useState(""),ft="/equipment";reactExports.useEffect(()=>{firebaseUser()&&et(ft,{replace:!0})},[et]);async function pt(xt,gt){try{ot(void 0),at(void 0),tt(void 0),rt(void 0),await xt}catch(ht){if(ht instanceof FirebaseError)switch(ht.code){case AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY.INVALID_AUTH:case AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY.INVALID_PASSWORD:gt(jsxRuntimeExports.jsx(InvalidCredentialsError,{email:lt}));break;default:gt(jsxRuntimeExports.jsx(ErrorMessage,{error:ht}));break}else ht instanceof Error?gt(jsxRuntimeExports.jsx(ErrorMessage,{error:ht})):gt(jsxRuntimeExports.jsx(ErrorMessage,{error:ht==null?void 0:ht.toString()}))}firebaseUser()&&et(ft)}async function mt(xt){xt.preventDefault(),ot(void 0),at(void 0),tt(void 0),rt(void 0);let gt=!0;lt===""&&(gt=!1,tt(jsxRuntimeExports.jsx(ErrorMessage,{error:"Email address required"}))),ut===""&&(gt=!1,rt(jsxRuntimeExports.jsx(ErrorMessage,{error:"Password required"}))),gt&&await pt(firebaseLoginWithEmail(lt,ut),ot)}return jsxRuntimeExports.jsxs("main",{className:styles$v.root,children:[jsxRuntimeExports.jsx("legend",{children:"Login"}),jsxRuntimeExports.jsxs("div",{className:styles$v.content,children:[jsxRuntimeExports.jsx("p",{children:"If an account does not already exist for the given email address, a new one will be created with the password you used."}),jsxRuntimeExports.jsxs("form",{className:"w-100",onSubmit:mt,children:[it&&jsxRuntimeExports.jsx("div",{className:styles$v.error,children:it}),jsxRuntimeExports.jsx("label",{children:"Email"}),jsxRuntimeExports.jsx("input",{type:"email",value:lt,onChange:xt=>ct(xt.target.value)}),_e&&jsxRuntimeExports.jsx("div",{className:styles$v.error,children:_e}),jsxRuntimeExports.jsx("label",{children:"Password"}),jsxRuntimeExports.jsx("input",{type:"password",value:ut,onChange:xt=>dt(xt.target.value)}),nt&&jsxRuntimeExports.jsx("div",{className:styles$v.error,children:nt}),jsxRuntimeExports.jsxs(Button$1,{type:"submit",className:`${styles$v.button} ${styles$v.emailSubmit}`,size:"lg",children:[jsxRuntimeExports.jsx(Lock$1,{className:styles$v.signinIcon}),"Login"]})]}),jsxRuntimeExports.jsx("div",{className:styles$v.line,children:jsxRuntimeExports.jsx("span",{children:"OR"})}),st&&jsxRuntimeExports.jsx("div",{className:styles$v.error,children:st}),jsxRuntimeExports.jsxs(Button$1,{className:styles$v.button,size:"lg",onClick:()=>pt(firebaseLoginWithGoogle(),at),children:[jsxRuntimeExports.jsx(Google$1,{className:styles$v.signinIcon}),"Continue with Google"]})]})]})}function InvalidCredentialsError({email:et}){return jsxRuntimeExports.jsxs("div",{className:styles$v.error,children:["Invalid username or password. Click here to reset your password: ",jsxRuntimeExports.jsx(ResetPasswordLink,{email:et})]})}function ErrorMessage({error:et}){const _e=reactExports.useMemo(()=>et instanceof Error?et.message:et,[et]);return et===void 0?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:_e&&jsxRuntimeExports.jsx("div",{className:styles$v.error,children:_e})})}function ResetPasswordLink({email:et,onSent:_e}){const[tt,nt]=reactExports.useState("Reset Password");async function rt(){nt("Sending..."),await firebaseResetPassword(et),nt("Sent!"),_e==null||_e()}return jsxRuntimeExports.jsx(Button$1,{variant:"danger",className:styles$v.button,onClick:rt,children:tt})}async function loginLoader(){return await firebaseAuthResult(),null}function LoginRoute(){return jsxRuntimeExports.jsx(Login,{})}function CharacterAtLevelDebugView(){const et=useCharacterAtLevel(),_e=reactExports.useMemo(()=>et.keys().sort((tt,nt)=>tt.charCodeAt(0)-nt.charCodeAt(0)),[et]);return jsxRuntimeExports.jsxs(Table$1,{striped:!0,bordered:!0,children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"header primary",children:[jsxRuntimeExports.jsx("th",{children:"Key"}),jsxRuntimeExports.jsx("th",{children:"Value"}),jsxRuntimeExports.jsx("th",{children:"Formula"})]})}),jsxRuntimeExports.jsx("tbody",{children:_e.map(tt=>{var nt;return jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:tt}),jsxRuntimeExports.jsx("td",{children:(nt=et.resolve(tt))==null?void 0:nt.asText()}),jsxRuntimeExports.jsx("td",{})]},tt)})})]})}const section$9="_section_ytw2x_20",row$2="_row_ytw2x_26",col="_col_ytw2x_32",styles$u={section:section$9,row:row$2,col},Section=({className:et,children:_e,...tt})=>jsxRuntimeExports.jsx("div",{className:classNames([styles$u.section,et]),...tt,children:_e});Section.Row=({className:et,children:_e,...tt})=>jsxRuntimeExports.jsx("div",{className:classNames(["hstack",styles$u.row,et]),...tt,children:_e});Section.Column=({className:et,children:_e,...tt})=>jsxRuntimeExports.jsx("div",{className:classNames(["vstack",styles$u.col,et]),...tt,children:_e});const root$3="_root_1t9nt_1",label$c="_label_1t9nt_13",styles$t={root:root$3,label:label$c};function BoxedValue({label:et,className:_e,children:tt}){return jsxRuntimeExports.jsxs("div",{className:classNames([styles$t.root,"box",_e]),"data-label":et,children:[tt,et&&jsxRuntimeExports.jsx("div",{className:styles$t.label,children:et})]})}const root$2="_root_19cap_1",styles$s={root:root$2};function Header({className:et,children:_e,...tt}){return jsxRuntimeExports.jsx("div",{className:classNames([styles$s.root,et]),...tt,children:_e})}const root$1="_root_wxqu2_1",styles$r={root:root$1};function Label({className:et,children:_e,...tt}){return jsxRuntimeExports.jsx("div",{className:classNames([styles$r.root,et]),...tt,children:_e})}const header$3="_header_1p8ut_1",label$b="_label_1p8ut_10",value$a="_value_1p8ut_14",styles$q={header:header$3,label:label$b,value:value$a};function AbilityScoreSection({className:et,..._e}){return jsxRuntimeExports.jsx(Section,{className:classNames([styles$q.section,et]),..._e,children:jsxRuntimeExports.jsxs(Section.Column,{children:[jsxRuntimeExports.jsxs(Section.Column,{className:"header-gap",children:[jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(Header,{className:styles$q.header,children:"Ability Name"}),jsxRuntimeExports.jsx(Header,{className:styles$q.header,children:"Ability Score"}),jsxRuntimeExports.jsx(Header,{className:styles$q.header,children:"Ability Modifier"}),jsxRuntimeExports.jsx(Header,{className:styles$q.header,children:"Temp Adjustment"}),jsxRuntimeExports.jsx(Header,{className:styles$q.header,children:"Temp Modifier"})]}),jsxRuntimeExports.jsx(AbilityScoreRow,{ability:"str"})]}),jsxRuntimeExports.jsx(AbilityScoreRow,{ability:"dex"}),jsxRuntimeExports.jsx(AbilityScoreRow,{ability:"con"}),jsxRuntimeExports.jsx(AbilityScoreRow,{ability:"int"}),jsxRuntimeExports.jsx(AbilityScoreRow,{ability:"wis"}),jsxRuntimeExports.jsx(AbilityScoreRow,{ability:"cha"})]})})}function AbilityScoreRow({ability:et}){const _e=useCharacterAtLevel(),tt=reactExports.useMemo(()=>{var rt;return((rt=_e.resolve(`${et}_score`))==null?void 0:rt.asText())??""},[et,_e]),nt=reactExports.useMemo(()=>{var rt;return((rt=_e.resolve(`${et}_mod`))==null?void 0:rt.asText())??""},[et,_e]);return jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(Label,{className:styles$q.label,children:et}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$q.value,children:tt}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$q.value,children:nt}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$q.value}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$q.value})]})}const element$3="_element_dqz9v_1",styles$p={element:element$3};function CaptionedBoxedValue({captionTop:et,captionBottom:_e,className:tt,...nt}){return jsxRuntimeExports.jsxs(Section.Column,{className:classNames(["header-gap",styles$p.element,tt]),children:[et&&jsxRuntimeExports.jsx(Header,{children:et}),jsxRuntimeExports.jsx(BoxedValue,{...nt}),_e&&jsxRuntimeExports.jsx(Header,{children:_e})]})}let Alignment$1=class{constructor(_e,tt){this.id=_e,this.name=tt}};const Alignments={all:[new Alignment$1("alignment:cg","Chaotic Good"),new Alignment$1("alignment:cn","Chaotic Neutral"),new Alignment$1("alignment:ce","Chaotic Evil"),new Alignment$1("alignment:ng","Neutral Good"),new Alignment$1("alignment:n","Neutral"),new Alignment$1("alignment:ne","Neutral Evil"),new Alignment$1("alignment:lg","Lawful Good"),new Alignment$1("alignment:ln","Lawful Neutral"),new Alignment$1("alignment:le","Lawful Evil")],find:et=>Alignments.all.find(_e=>_e.id===et)},mn=class mn{constructor(_e,tt,nt,rt){this.id=_e,this.shortName=tt,this.longName=nt,this.acModifier=rt}static fromId(_e){switch(_e){case 0:return this.NONE;case 1:return this.FINE;case 2:return this.DIMINUTIVE;case 3:return this.TINY;case 4:return this.SMALL;case 5:return this.MEDIUM;case 6:return this.LARGE;case 7:return this.HUGE;case 8:return this.GARGANTUAN;case 9:return this.COLOSSAL}}};ln(mn,"NONE",new mn(0,"-","N/A",0)),ln(mn,"FINE",new mn(1,"F","Fine",8)),ln(mn,"DIMINUTIVE",new mn(2,"D","Diminutive",4)),ln(mn,"TINY",new mn(3,"T","Tiny",2)),ln(mn,"SMALL",new mn(4,"S","Small",1)),ln(mn,"MEDIUM",new mn(5,"M","Medium",0)),ln(mn,"LARGE",new mn(6,"L","Large",-1)),ln(mn,"HUGE",new mn(7,"H","Huge",-2)),ln(mn,"GARGANTUAN",new mn(8,"G","Gargantuan",-4)),ln(mn,"COLOSSAL",new mn(9,"C","Colossal",-8));let CreatureSize=mn;const CharacterName=value$9("character_name"),Alignment=value$9("alignment",et=>{var _e;return((_e=Alignments.find(et))==null?void 0:_e.name)??"Unknown"}),TotalHealth=value$9("hp_total"),BaseAttackBonus=value$9("bab"),CMB=value$9("cmb"),CMD=value$9("cmd"),Initiative=value$9("initiative"),StrengthMod=value$9("str_mod"),DexterityMod=value$9("dex_mod"),SizeMod=value$9("size_mod"),Value=et=>jsxRuntimeExports.jsx(CharacterValue,{...et});function value$9(et,_e){return tt=>jsxRuntimeExports.jsx(CharacterValue,{dataKey:et,lookupFn:_e,...tt})}function CharacterLevel(){const et=useCharacterAtLevel(),_e=useDatabase(),tt=reactExports.useMemo(()=>uniq(et.choices.filter(rt=>rt.type==="class").map(rt=>et.selected(rt)).filter(rt=>rt!=="")).map(rt=>{var st;if(!rt)return"Unknown";const it=((st=et.resolve(rt))==null?void 0:st.asNumber())??0;return`${_e.name(rt)??"Unknown"} ${it}`}).join("/"),[et,_e]);return jsxRuntimeExports.jsx("span",{children:tt})}function Race(){const et=useCharacterAtLevel(),_e=useDatabase(),tt=reactExports.useMemo(()=>{const nt=et.choices.find(it=>it.type==="race"),rt=nt!==void 0?et.selected(nt):void 0;return _e.name(rt)??"Unknown"},[et,_e]);return jsxRuntimeExports.jsx("span",{children:tt})}function Size(){const et=useCharacterAtLevel(),_e=reactExports.useMemo(()=>{var nt;const tt=et.resolve("size");return tt===void 0?"Unknown":((nt=CreatureSize.fromId(tt.asNumber()))==null?void 0:nt.longName)??"Unknown"},[et]);return jsxRuntimeExports.jsx("span",{children:_e})}function CharacterValue({dataKey:et,lookupFn:_e,fallback:tt="",modifier:nt=!1}){const rt=useCharacterAtLevel(),it=reactExports.useMemo(()=>{var st;let ot=(st=rt.resolve(et))==null?void 0:st.asText();if(!(ot===void 0||ot===""))return _e!==void 0&&(ot=_e(ot)),nt&&ot!==""&&(ot=ot.startsWith("-")?ot:"+"+ot),ot},[et,rt,_e,nt]);return jsxRuntimeExports.jsx("span",{children:it??tt})}const element$2="_element_e6f0v_1",styles$o={element:element$2};function Operator({className:et,children:_e,...tt}){return jsxRuntimeExports.jsx("div",{className:classNames([styles$o.element,"box",et]),...tt,children:_e})}const element$1="_element_i7aqi_1",styles$n={element:element$1};function PlainValue({className:et,children:_e,...tt}){return jsxRuntimeExports.jsx("div",{className:classNames([styles$n.element,"box",et]),...tt,children:_e})}const label$a="_label_2bh8i_1",value$8="_value_2bh8i_5",scalar="_scalar_2bh8i_10",touchValue="_touchValue_2bh8i_14 _value_2bh8i_5",flatFootedValue="_flatFootedValue_2bh8i_18 _value_2bh8i_5",modifiersValue$1="_modifiersValue_2bh8i_22 _value_2bh8i_5",styles$m={label:label$a,value:value$8,scalar,touchValue,flatFootedValue,modifiersValue:modifiersValue$1};function ArmorSection({className:et,..._e}){return jsxRuntimeExports.jsx(Section,{className:classNames([styles$m.section,et]),..._e,children:jsxRuntimeExports.jsxs(Section.Column,{children:[jsxRuntimeExports.jsxs(Section.Row,{className:"align-items-start",children:[jsxRuntimeExports.jsx(Label,{className:styles$m.label,children:"AC"}),jsxRuntimeExports.jsx(CaptionedBoxedValue,{captionBottom:"Total",className:styles$m.value,children:jsxRuntimeExports.jsx(CharacterValue,{dataKey:"ac"})}),jsxRuntimeExports.jsx(Operator,{children:"="}),jsxRuntimeExports.jsx(PlainValue,{className:styles$m.scalar,children:"10"}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(CaptionedBoxedValue,{captionBottom:"Armor Bonus",className:styles$m.value,children:jsxRuntimeExports.jsx(CharacterValue,{dataKey:"ac:armor",fallback:"0"})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(CaptionedBoxedValue,{captionBottom:"Shield Bonus",className:styles$m.value,children:jsxRuntimeExports.jsx(CharacterValue,{dataKey:"ac:shield",fallback:"0"})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(CaptionedBoxedValue,{captionBottom:"Dexterity Modifier",className:styles$m.value,children:jsxRuntimeExports.jsx(DexterityMod,{})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(CaptionedBoxedValue,{captionBottom:"Size Modifier",className:styles$m.value,children:jsxRuntimeExports.jsx(SizeMod,{})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(CaptionedBoxedValue,{captionBottom:"Natural Armor",className:styles$m.value,children:jsxRuntimeExports.jsx(CharacterValue,{dataKey:"ac:natural",fallback:"0"})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(CaptionedBoxedValue,{captionBottom:"Deflection Bonus",className:styles$m.value,children:jsxRuntimeExports.jsx(CharacterValue,{dataKey:"ac:deflection",fallback:"0"})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(CaptionedBoxedValue,{captionBottom:"Misc Modifier",className:styles$m.value,children:jsxRuntimeExports.jsx(CharacterValue,{dataKey:"ac:misc"})})]}),jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(Label,{className:styles$m.label,children:"Touch"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$m.touchValue,children:jsxRuntimeExports.jsx(CharacterValue,{dataKey:"ac:touch"})}),jsxRuntimeExports.jsx(Label,{className:styles$m.label,children:"Flat-Footed"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$m.flatFootedValue,children:jsxRuntimeExports.jsx(CharacterValue,{dataKey:"ac:flat"})}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$m.modifiersValue,label:"Modifiers"})]})]})})}const section$8="_section_wmpm6_1",label$9="_label_wmpm6_5",value$7="_value_wmpm6_11",styles$l={section:section$8,label:label$9,value:value$7};function BabSection({className:et,..._e}){return jsxRuntimeExports.jsxs(Section,{className:classNames([styles$l.section,et]),..._e,children:[jsxRuntimeExports.jsx(Label,{className:styles$l.label,children:"Base Attack Bonus"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$l.value,children:jsxRuntimeExports.jsx(BaseAttackBonus,{modifier:!0})})]})}const root="_root_aru1x_1",underlined$1="_underlined_aru1x_7 _underlined_18hg9_35",label$8="_label_aru1x_11 _label_18hg9_40",styles$k={root,underlined:underlined$1,label:label$8};function UnderlinedValue({label:et,className:_e,children:tt}){return jsxRuntimeExports.jsxs("div",{className:`${styles$k.root} ${_e??""}`,children:[jsxRuntimeExports.jsx("div",{className:styles$k.underlined,children:tt}),et&&jsxRuntimeExports.jsx("div",{className:styles$k.label,children:et})]})}const section$7="_section_12kwy_1",row$1="_row_12kwy_6",characterName="_characterName_12kwy_10",alignment="_alignment_12kwy_14",playerName="_playerName_12kwy_18",characterLevel="_characterLevel_12kwy_22",deity="_deity_12kwy_26",homeland="_homeland_12kwy_30",race="_race_12kwy_34",size="_size_12kwy_38",gender="_gender_12kwy_42",age="_age_12kwy_46",height="_height_12kwy_50",weight="_weight_12kwy_54",hair="_hair_12kwy_58",eyes="_eyes_12kwy_62",styles$j={section:section$7,row:row$1,characterName,alignment,playerName,characterLevel,deity,homeland,race,size,gender,age,height,weight,hair,eyes};function CharacterInfoSection({className:et,..._e}){return jsxRuntimeExports.jsx(Section,{className:classNames([styles$j.section,et]),..._e,children:jsxRuntimeExports.jsxs(Section.Column,{className:"header-gap",children:[jsxRuntimeExports.jsxs(Section.Row,{className:styles$j.row,children:[jsxRuntimeExports.jsx(UnderlinedValue,{label:"Character Name",className:styles$j.characterName,children:jsxRuntimeExports.jsx(CharacterName,{})}),jsxRuntimeExports.jsx(UnderlinedValue,{label:"Alignment",className:styles$j.alignment,children:jsxRuntimeExports.jsx(Alignment,{})}),jsxRuntimeExports.jsx(UnderlinedValue,{label:"Player",className:styles$j.playerName})]}),jsxRuntimeExports.jsxs(Section.Row,{className:styles$j.row,children:[jsxRuntimeExports.jsx(UnderlinedValue,{label:"Character Level",className:styles$j.characterLevel,children:jsxRuntimeExports.jsx(CharacterLevel,{})}),jsxRuntimeExports.jsx(UnderlinedValue,{label:"Deity",className:styles$j.deity}),jsxRuntimeExports.jsx(UnderlinedValue,{label:"Homeland",className:styles$j.homeland})]}),jsxRuntimeExports.jsxs(Section.Row,{className:styles$j.row,children:[jsxRuntimeExports.jsx(UnderlinedValue,{label:"Race",className:styles$j.race,children:jsxRuntimeExports.jsx(Race,{})}),jsxRuntimeExports.jsx(UnderlinedValue,{label:"Size",className:styles$j.size,children:jsxRuntimeExports.jsx(Size,{})}),jsxRuntimeExports.jsx(UnderlinedValue,{label:"Gender",className:styles$j.gender}),jsxRuntimeExports.jsx(UnderlinedValue,{label:"Age",className:styles$j.age}),jsxRuntimeExports.jsx(UnderlinedValue,{label:"Height",className:styles$j.height}),jsxRuntimeExports.jsx(UnderlinedValue,{label:"Weight",className:styles$j.weight}),jsxRuntimeExports.jsx(UnderlinedValue,{label:"Hair",className:styles$j.hair}),jsxRuntimeExports.jsx(UnderlinedValue,{label:"Eyes",className:styles$j.eyes})]})]})})}const section$6="_section_1w0b9_1",label$7="_label_1w0b9_5",value$6="_value_1w0b9_9",modifiers$1="_modifiers_1w0b9_13",headerRow$1="_headerRow_1w0b9_17",headerOperator="_headerOperator_1w0b9_22",styles$i={section:section$6,label:label$7,value:value$6,modifiers:modifiers$1,headerRow:headerRow$1,headerOperator};function CombatManeuverSection({className:et,..._e}){return jsxRuntimeExports.jsx(Section,{className:classNames([styles$i.section,et]),..._e,children:jsxRuntimeExports.jsxs(Section.Column,{children:[jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsxs(Section.Column,{className:"header-gap flex-grow-0",style:{marginBottom:"0.5em"},children:[jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(Label,{className:styles$i.label,children:"CMB"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$i.value,children:jsxRuntimeExports.jsx(CMB,{})}),jsxRuntimeExports.jsx(Operator,{children:"="}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$i.value,children:jsxRuntimeExports.jsx(BaseAttackBonus,{})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$i.value,children:jsxRuntimeExports.jsx(StrengthMod,{})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$i.value,children:jsxRuntimeExports.jsx(SizeMod,{})})]}),jsxRuntimeExports.jsxs(Section.Row,{className:styles$i.headerRow,children:[jsxRuntimeExports.jsx(Header,{className:classNames([styles$i.label,styles$i.header])}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$i.value,styles$i.header]),children:"Total"}),jsxRuntimeExports.jsx(Operator,{className:styles$i.headerOperator,children:"="}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$i.value,styles$i.header]),children:"Base Attack Bonus"}),jsxRuntimeExports.jsx(Operator,{className:styles$i.headerOperator,children:"="}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$i.value,styles$i.header]),children:"Strength Modifier"}),jsxRuntimeExports.jsx(Operator,{className:styles$i.headerOperator,children:"="}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$i.value,styles$i.header]),children:"Size Modifier"})]})]}),jsxRuntimeExports.jsx(Section.Column,{className:"flex-fill",children:jsxRuntimeExports.jsx(BoxedValue,{className:styles$i.modifiers,label:"Modifiers"})})]}),jsxRuntimeExports.jsxs(Section.Column,{className:"header-gap",children:[jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(Label,{className:styles$i.label,children:"CMD"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$i.value,children:jsxRuntimeExports.jsx(CMD,{})}),jsxRuntimeExports.jsx(Operator,{children:"="}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$i.value,children:jsxRuntimeExports.jsx(BaseAttackBonus,{})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$i.value,children:jsxRuntimeExports.jsx(StrengthMod,{})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$i.value,children:jsxRuntimeExports.jsx(DexterityMod,{})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$i.value,children:jsxRuntimeExports.jsx(SizeMod,{})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(PlainValue,{children:"10"})]}),jsxRuntimeExports.jsxs(Section.Row,{className:styles$i.headerRow,children:[jsxRuntimeExports.jsx(Header,{className:classNames([styles$i.label,styles$i.header])}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$i.value,styles$i.header]),children:"Total"}),jsxRuntimeExports.jsx(Operator,{className:styles$i.headerOperator,children:"="}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$i.value,styles$i.header]),children:"Base Attack Bonus"}),jsxRuntimeExports.jsx(Operator,{className:styles$i.headerOperator,children:"+"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$i.value,styles$i.header]),children:"Strength Modifier"}),jsxRuntimeExports.jsx(Operator,{className:styles$i.headerOperator,children:"+"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$i.value,styles$i.header]),children:"Dexterity Modifier"}),jsxRuntimeExports.jsx(Operator,{className:styles$i.headerOperator,children:"+"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$i.value,styles$i.header]),children:"Size Modifier"}),jsxRuntimeExports.jsx(Operator,{className:styles$i.headerOperator,children:"+"}),jsxRuntimeExports.jsx(PlainValue,{className:styles$i.headerOperator,children:"10"})]})]})]})})}const section$5="_section_zet6w_1",label$6="_label_zet6w_5",totalHealth="_totalHealth_zet6w_9",dr="_dr_zet6w_13",header$2="_header_zet6w_17",currentHp="_currentHp_zet6w_23",styles$h={section:section$5,label:label$6,totalHealth,dr,header:header$2,currentHp};function HealthSection({className:et,..._e}){return jsxRuntimeExports.jsx(Section,{className:classNames([styles$h.section,et]),..._e,children:jsxRuntimeExports.jsxs(Section.Column,{children:[jsxRuntimeExports.jsxs(Section.Row,{className:"no-grow",children:[jsxRuntimeExports.jsx(Label,{className:styles$h.label,children:"HP"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$h.totalHealth,label:"Total",children:jsxRuntimeExports.jsx(TotalHealth,{})}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$h.dr,label:"DR"})]}),jsxRuntimeExports.jsxs(Section.Column,{className:"flex-grow-1",children:[jsxRuntimeExports.jsxs(Section.Column,{className:"no-gap flex-grow-1",children:[jsxRuntimeExports.jsx(Header,{className:styles$h.header,children:"Current HP"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$h.currentHp})]}),jsxRuntimeExports.jsxs(Section.Column,{className:"no-gap no-grow",children:[jsxRuntimeExports.jsx(Header,{className:styles$h.header,children:"Nonlethal Damage"}),jsxRuntimeExports.jsx(BoxedValue,{})]})]})]})})}const section$4="_section_1s3gj_1",label$5="_label_1s3gj_6",styles$g={section:section$4,label:label$5};function InitiativeSection({className:et,..._e}){return jsxRuntimeExports.jsxs(Section,{className:classNames([styles$g.section,et]),..._e,children:[jsxRuntimeExports.jsx(Label,{className:styles$g.label,children:"Initiative"}),jsxRuntimeExports.jsx(Section.Row,{children:jsxRuntimeExports.jsxs(Section.Row,{className:"align-items-start",children:[jsxRuntimeExports.jsx(CaptionedBoxedValue,{captionBottom:"Total",className:styles$g.value,children:jsxRuntimeExports.jsx(Initiative,{})}),jsxRuntimeExports.jsx(Operator,{children:"="}),jsxRuntimeExports.jsx(CaptionedBoxedValue,{captionBottom:"DEX Modifier",className:styles$g.value,children:jsxRuntimeExports.jsx(DexterityMod,{})}),jsxRuntimeExports.jsx(Operator,{children:"+"}),jsxRuntimeExports.jsx(CaptionedBoxedValue,{captionBottom:"Misc Modifier",className:styles$g.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"initiative:misc"})})]})})]})}const section$3="_section_n9vu8_1",title$2="_title_n9vu8_5",value$5="_value_n9vu8_9",styles$f={section:section$3,title:title$2,value:value$5};function LanguagesSection({className:et,..._e}){return jsxRuntimeExports.jsxs(Section,{className:classNames(["no-gap",styles$f.section,et]),..._e,children:[jsxRuntimeExports.jsx("div",{className:classNames(["title",styles$f.title]),children:"Languages:"}),jsxRuntimeExports.jsx(UnderlinedValue,{className:styles$f.value}),jsxRuntimeExports.jsx(UnderlinedValue,{className:styles$f.value}),jsxRuntimeExports.jsx(UnderlinedValue,{className:styles$f.value})]})}const label$4="_label_1igtk_1",header$1="_header_1igtk_6",value$4="_value_1igtk_11",operator$1="_operator_1igtk_16",headerDivider="_headerDivider_1igtk_21",modifiersValue="_modifiersValue_1igtk_26",styles$e={label:label$4,header:header$1,value:value$4,operator:operator$1,headerDivider,modifiersValue};function SavingThrowsSection({className:et,..._e}){return jsxRuntimeExports.jsx(Section,{className:classNames([styles$e.section,et]),..._e,children:jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsxs(Section.Column,{children:[jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(Header,{className:classNames([styles$e.label,styles$e.header]),children:"Saving Throws"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$e.value,styles$e.header]),children:"Total"}),jsxRuntimeExports.jsx("div",{className:classNames([styles$e.operator,styles$e.headerDivider]),children:"="}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$e.value,styles$e.header]),children:"Base Save"}),jsxRuntimeExports.jsx("div",{className:classNames([styles$e.operator,styles$e.headerDivider]),children:"+"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$e.value,styles$e.header]),children:"Ability Modifier"}),jsxRuntimeExports.jsx("div",{className:classNames([styles$e.operator,styles$e.headerDivider]),children:"+"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$e.value,styles$e.header]),children:"Magic Modifier"}),jsxRuntimeExports.jsx("div",{className:classNames([styles$e.operator,styles$e.headerDivider]),children:"+"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$e.value,styles$e.header]),children:"Misc Modifier"}),jsxRuntimeExports.jsx("div",{className:classNames([styles$e.operator,styles$e.headerDivider]),children:"+"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$e.value,styles$e.header]),children:"Temporary Modifier"})]}),jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(Label,{className:styles$e.label,children:"Fortitude"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"fort_save",fallback:"0"})}),jsxRuntimeExports.jsx("div",{className:styles$e.operator,children:"="}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"fort:base",fallback:"0"})}),jsxRuntimeExports.jsx("div",{className:styles$e.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"con_mod",fallback:"0"})}),jsxRuntimeExports.jsx("div",{className:styles$e.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.value}),jsxRuntimeExports.jsx("div",{className:styles$e.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.value}),jsxRuntimeExports.jsx("div",{className:styles$e.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.value})]}),jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(Label,{className:styles$e.label,children:"Reflex"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"ref_save",fallback:"0"})}),jsxRuntimeExports.jsx("div",{className:styles$e.operator,children:"="}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"ref:base",fallback:"0"})}),jsxRuntimeExports.jsx("div",{className:styles$e.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"dex_mod",fallback:"0"})}),jsxRuntimeExports.jsx("div",{className:styles$e.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.value}),jsxRuntimeExports.jsx("div",{className:styles$e.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.value}),jsxRuntimeExports.jsx("div",{className:styles$e.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.value})]}),jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(Label,{className:styles$e.label,children:"Will"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"will_save",fallback:"0"})}),jsxRuntimeExports.jsx("div",{className:styles$e.operator,children:"="}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"will:base",fallback:"0"})}),jsxRuntimeExports.jsx("div",{className:styles$e.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"wis_mod",fallback:"0"})}),jsxRuntimeExports.jsx("div",{className:styles$e.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.value}),jsxRuntimeExports.jsx("div",{className:styles$e.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.value}),jsxRuntimeExports.jsx("div",{className:styles$e.operator,children:"+"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.value})]})]}),jsxRuntimeExports.jsx(Section.Column,{children:jsxRuntimeExports.jsx(BoxedValue,{className:styles$e.modifiersValue,label:"Modifiers"})})]})})}const skillRow="_skillRow_ckpnr_1",skillName="_skillName_ckpnr_6",value$3="_value_ckpnr_15",abilityName="_abilityName_ckpnr_22",operator="_operator_ckpnr_27",title$1="_title_ckpnr_32",modifierLine="_modifierLine_ckpnr_36",classTrainedBox="_classTrainedBox_ckpnr_40",classTrainedBoxChecked="_classTrainedBoxChecked_ckpnr_47 _classTrainedBox_ckpnr_40",classTrainedBoxUnchecked="_classTrainedBoxUnchecked_ckpnr_52 _classTrainedBox_ckpnr_40",styles$d={skillRow,skillName,value:value$3,abilityName,operator,title:title$1,modifierLine,classTrainedBox,classTrainedBoxChecked,classTrainedBoxUnchecked};class Skill{constructor(_e,tt,nt,rt,it){this.id=_e,this.name=tt,this.untrained=nt,this.armorCheckPenalty=rt,this.keyAbility=it}}const Skills={all:[new Skill("skill:acrobatics","Acrobatics",!0,!0,"dex"),new Skill("skill:appraise","Appraise",!0,!1,"int"),new Skill("skill:bluff","Bluff",!0,!1,"cha"),new Skill("skill:climb","Climb",!0,!0,"str"),new Skill("skill:craft","Craft",!0,!1,"int"),new Skill("skill:diplomacy","Diplomacy",!0,!1,"cha"),new Skill("skill:disable_device","Disable Device",!1,!0,"dex"),new Skill("skill:disguise","Disguise",!0,!1,"cha"),new Skill("skill:escape_artist","Escape Artist",!0,!0,"dex"),new Skill("skill:fly","Fly",!0,!0,"dex"),new Skill("skill:handle_animal","Handle Animal",!1,!1,"cha"),new Skill("skill:heal","Heal",!0,!1,"wis"),new Skill("skill:intimidate","Intimidate",!0,!1,"cha"),new Skill("skill:knowledge_arcana","Knowledge (arcana)",!1,!1,"int"),new Skill("skill:knowledge_dungeoneering","Knowledge (dungeoneering)",!1,!1,"int"),new Skill("skill:knowledge_engineering","Knowledge (engineering)",!1,!1,"int"),new Skill("skill:knowledge_geography","Knowledge (geography)",!1,!1,"int"),new Skill("skill:knowledge_history","Knowledge (history)",!1,!1,"int"),new Skill("skill:knowledge_local","Knowledge (local)",!1,!1,"int"),new Skill("skill:knowledge_nature","Knowledge (nature)",!1,!1,"int"),new Skill("skill:knowledge_nobility","Knowledge (nobility)",!1,!1,"int"),new Skill("skill:knowledge_planes","Knowledge (planes)",!1,!1,"int"),new Skill("skill:knowledge_religion","Knowledge (religion)",!1,!1,"int"),new Skill("skill:linguistics","Linguistics",!1,!1,"int"),new Skill("skill:perception","Perception",!0,!1,"wis"),new Skill("skill:perform","Perform",!0,!1,"cha"),new Skill("skill:profession","Profession",!1,!1,"wis"),new Skill("skill:ride","Ride",!0,!0,"dex"),new Skill("skill:sense_motive","Sense Motive",!0,!1,"wis"),new Skill("skill:sleight_of_hand","Sleight of Hand",!1,!0,"dex"),new Skill("skill:spellcraft","Spellcraft",!1,!1,"int"),new Skill("skill:stealth","Stealth",!0,!0,"dex"),new Skill("skill:survival","Survival",!0,!1,"wis"),new Skill("skill:swim","Swim",!0,!0,"str"),new Skill("skill:use_magic_device","Use Magic Device",!1,!1,"cha")],find:et=>{const[_e,tt]=et.split("#"),nt=Skills.all.find(rt=>rt.id===_e);if(nt)return tt?new Skill(et,`${nt.name} (${tt})`,nt.untrained,nt.armorCheckPenalty,nt.keyAbility):nt}};function SkillsSection({className:et,..._e}){const tt=useCharacterAtLevel();return jsxRuntimeExports.jsx(Section,{className:classNames([styles$d.section,et]),..._e,children:jsxRuntimeExports.jsxs(Section.Column,{children:[jsxRuntimeExports.jsx(Label,{className:styles$d.label,children:"Skills"}),Skills.all.map(nt=>{var rt,it,ot,st;return jsxRuntimeExports.jsxs(Section.Row,{className:styles$d.skillRow,children:[jsxRuntimeExports.jsx(ClassTrainedBox,{skill:nt,characterAtLevel:tt}),jsxRuntimeExports.jsxs("div",{className:styles$d.skillName,children:[nt.name,nt.untrained?"":"*"]}),jsxRuntimeExports.jsx(UnderlinedValue,{className:styles$d.value,children:(((rt=tt.resolve(nt.id))==null?void 0:rt.asNumber())??0)+(((it=tt.resolve(nt.keyAbility+"_mod"))==null?void 0:it.asNumber())??0)}),jsxRuntimeExports.jsxs("div",{className:styles$d.operator,children:["= ",jsxRuntimeExports.jsx("span",{className:styles$d.abilityName,children:nt.keyAbility})]}),jsxRuntimeExports.jsx(UnderlinedValue,{className:styles$d.value,children:(ot=tt.resolve(nt.keyAbility+"_mod"))==null?void 0:ot.asText()}),jsxRuntimeExports.jsx("div",{className:styles$d.operator,children:"+"}),jsxRuntimeExports.jsx(UnderlinedValue,{className:styles$d.value,children:(st=tt.resolve(nt.id))==null?void 0:st.asNumber()}),jsxRuntimeExports.jsx("div",{className:styles$d.operator,children:"+"}),jsxRuntimeExports.jsx(UnderlinedValue,{className:styles$d.value})]},nt.id)}),jsxRuntimeExports.jsxs(Section.Column,{className:"no-gap",children:[jsxRuntimeExports.jsx("div",{className:classNames(["title",styles$d.title]),children:"Conditional Modifiers:"}),jsxRuntimeExports.jsx(UnderlinedValue,{className:styles$d.modifierLine}),jsxRuntimeExports.jsx(UnderlinedValue,{className:styles$d.modifierLine})]})]})})}function ClassTrainedBox({skill:et,characterAtLevel:_e}){const tt=reactExports.useMemo(()=>{var nt;return((nt=_e.resolve("trained:"+et.id))==null?void 0:nt.asBoolean())??!1},[et,_e]);return jsxRuntimeExports.jsx("div",{className:tt?styles$d.classTrainedBoxChecked:styles$d.classTrainedBoxUnchecked})}const label$3="_label_t0yvf_1",header="_header_t0yvf_5",headerRow="_headerRow_t0yvf_9",value$2="_value_t0yvf_13",valueFly="_valueFly_t0yvf_13",modifiers="_modifiers_t0yvf_23",styles$c={label:label$3,header,headerRow,value:value$2,valueFly,modifiers};function SpeedSection({className:et,..._e}){return jsxRuntimeExports.jsxs(Section,{className:classNames([styles$c.section,et]),..._e,children:[jsxRuntimeExports.jsxs(Section.Column,{children:[jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(Label,{className:styles$c.label,children:"Speed"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$c.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"speed:base"})}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$c.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"speed:armor"})})]}),jsxRuntimeExports.jsxs(Section.Row,{className:styles$c.headerRow,children:[jsxRuntimeExports.jsx(Header,{className:classNames([styles$c.label,styles$c.header])}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$c.value,styles$c.header]),children:"Base Speed"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$c.value,styles$c.header]),children:"With Armor"})]}),jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(BoxedValue,{className:styles$c.valueFly,children:jsxRuntimeExports.jsx(Value,{dataKey:"speed:fly"})}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$c.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"speed:swim"})}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$c.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"speed:climb"})}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$c.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"speed:burrow"})})]}),jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(Header,{className:classNames([styles$c.valueFly,styles$c.header]),children:"Fly"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$c.value,styles$c.header]),children:"Swim"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$c.value,styles$c.header]),children:"Climb"}),jsxRuntimeExports.jsx(Header,{className:classNames([styles$c.value,styles$c.header]),children:"Burrow"})]})]}),jsxRuntimeExports.jsx(Section.Column,{children:jsxRuntimeExports.jsx(BoxedValue,{className:styles$c.modifiers,label:"Temp Modifier"})})]})}const section$2="_section_161km_1",label$2="_label_161km_5",value$1="_value_161km_14",styles$b={section:section$2,label:label$2,value:value$1};function SpellResistanceSection({className:et,..._e}){return jsxRuntimeExports.jsxs(Section,{className:classNames([styles$b.section,et]),..._e,children:[jsxRuntimeExports.jsx(Label,{className:styles$b.label,children:"Spell Resistance"}),jsxRuntimeExports.jsx(BoxedValue,{className:styles$b.value,children:jsxRuntimeExports.jsx(Value,{dataKey:"sr"})})]})}const section$1="_section_1xj6y_1",row="_row_1xj6y_7",element="_element_1xj6y_13",title="_title_1xj6y_16",value="_value_1xj6y_31",leftValue="_leftValue_1xj6y_38",damage="_damage_1xj6y_57",styles$a={section:section$1,row,element,title,value,leftValue,damage};function WeaponSection({className:et,..._e}){return jsxRuntimeExports.jsxs(Section,{className:classNames([styles$a.section,et]),..._e,children:[jsxRuntimeExports.jsxs("div",{className:styles$a.row,children:[jsxRuntimeExports.jsxs("div",{className:styles$a.element,children:[jsxRuntimeExports.jsx("div",{className:styles$a.title,children:"Weapon"}),jsxRuntimeExports.jsx("div",{className:classNames([styles$a.value,styles$a.leftValue])})]}),jsxRuntimeExports.jsxs("div",{className:styles$a.element,children:[jsxRuntimeExports.jsx("div",{className:styles$a.title,children:"Attack Bonus"}),jsxRuntimeExports.jsx("div",{className:styles$a.value})]}),jsxRuntimeExports.jsxs("div",{className:styles$a.element,children:[jsxRuntimeExports.jsx("div",{className:styles$a.title,children:"Critical"}),jsxRuntimeExports.jsx("div",{className:styles$a.value})]})]}),jsxRuntimeExports.jsxs("div",{className:styles$a.row,children:[jsxRuntimeExports.jsxs("div",{className:styles$a.element,children:[jsxRuntimeExports.jsx("div",{className:styles$a.title,children:"Type"}),jsxRuntimeExports.jsx("div",{className:classNames([styles$a.value,styles$a.leftValue])})]}),jsxRuntimeExports.jsxs("div",{className:styles$a.element,children:[jsxRuntimeExports.jsx("div",{className:styles$a.title,children:"Range"}),jsxRuntimeExports.jsx("div",{className:styles$a.value})]}),jsxRuntimeExports.jsxs("div",{className:styles$a.element,children:[jsxRuntimeExports.jsx("div",{className:styles$a.title,children:"Ammunition"}),jsxRuntimeExports.jsx("div",{className:styles$a.value})]}),jsxRuntimeExports.jsxs("div",{className:classNames([styles$a.element,styles$a.damage]),children:[jsxRuntimeExports.jsx("div",{className:styles$a.title,children:"Damage"}),jsxRuntimeExports.jsx("div",{className:styles$a.value})]})]})]})}const page="_page_1j865_2",styles$9={page};function PrintablePage({className:et,children:_e,...tt}){return jsxRuntimeExports.jsx("div",{className:classNames([styles$9.page,et]),...tt,children:_e})}const sheet="_sheet_18hg9_21",leftColumn="_leftColumn_18hg9_25",rightColumn="_rightColumn_18hg9_30",underlined="_underlined_18hg9_35",label$1="_label_18hg9_40",characterInfo="_characterInfo_18hg9_46",abilityScores="_abilityScores_18hg9_50",health="_health_18hg9_53",initiative="_initiative_18hg9_58",styles$8={sheet,leftColumn,rightColumn,underlined,label:label$1,characterInfo,abilityScores,health,initiative},CharacterSheetContext=reactExports.createContext(void 0);function useCharacterSheetContext(){const et=reactExports.useContext(CharacterSheetContext);if(et===void 0)throw Error("Must be used in a provider");return et}function useCharacterAtLevel(){return useCharacterSheetContext().characterAtLevel}function CharacterSheet(et){return jsxRuntimeExports.jsx(Section.Column,{children:jsxRuntimeExports.jsxs(CharacterSheetContext.Provider,{value:et,children:[jsxRuntimeExports.jsxs(PrintablePage,{className:styles$8.sheet,children:[jsxRuntimeExports.jsx(Section.Row,{children:jsxRuntimeExports.jsx(CharacterInfoSection,{className:styles$8.characterInfo})}),jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsxs(Section.Column,{className:styles$8.leftColumn,children:[jsxRuntimeExports.jsxs(Section.Row,{className:"align-items-start",children:[jsxRuntimeExports.jsx(AbilityScoreSection,{className:styles$8.abilityScores}),jsxRuntimeExports.jsxs(Section.Column,{children:[jsxRuntimeExports.jsx(HealthSection,{className:styles$8.health}),jsxRuntimeExports.jsx(InitiativeSection,{className:styles$8.initiative})]})]}),jsxRuntimeExports.jsxs(Section.Column,{children:[jsxRuntimeExports.jsx(ArmorSection,{className:styles$8.armor}),jsxRuntimeExports.jsx(SavingThrowsSection,{className:styles$8.savingThrows}),jsxRuntimeExports.jsxs(Section.Row,{children:[jsxRuntimeExports.jsx(BabSection,{className:styles$8.bab}),jsxRuntimeExports.jsx(SpellResistanceSection,{className:styles$8.spellResistance})]}),jsxRuntimeExports.jsx(CombatManeuverSection,{className:styles$8.combatManeuver}),jsxRuntimeExports.jsx(WeaponSection,{}),jsxRuntimeExports.jsx(WeaponSection,{}),jsxRuntimeExports.jsx(WeaponSection,{}),jsxRuntimeExports.jsx(WeaponSection,{})]})]}),jsxRuntimeExports.jsxs(Section.Column,{className:styles$8.rightColumn,children:[jsxRuntimeExports.jsx(SpeedSection,{}),jsxRuntimeExports.jsx(SkillsSection,{}),jsxRuntimeExports.jsx(LanguagesSection,{})]})]})]}),jsxRuntimeExports.jsx(PrintablePage,{style:{display:"flex"},children:jsxRuntimeExports.jsx(CharacterAtLevelDebugView,{})})]})})}async function characterSheetLoader({params:et}){const _e=et.id,tt=et.level;if(_e===void 0)throw new Response("Character ID required",{status:400});if(tt===void 0)throw new Response("Character level required",{status:400});const nt=await withGlobalCharacterStore(),rt=await timedAsync(()=>nt.load(_e),"Loading character");if(rt===void 0)throw new Response("Character not found",{status:404});const it=await withGlobalDatabase();if(!it)throw new Error("Unable to initialize database");const ot=rt.atLevel(tt);if(ot===void 0)throw new Response("Character level not found",{status:404});return{characterAtLevel:ot,database:it}}function CharacterSheetRoute(){const{characterAtLevel:et,database:_e}=useLoaderData();return jsxRuntimeExports.jsx(DatabaseContext.Provider,{value:_e,children:jsxRuntimeExports.jsx(CharacterSheet,{characterAtLevel:et,database:_e})})}const controls="_controls_v6ngv_1",equipmentSets="_equipmentSets_v6ngv_5",equipmentSet="_equipmentSet_v6ngv_5",nameContainer="_nameContainer_v6ngv_16",deleteButtonContainer="_deleteButtonContainer_v6ngv_22",styles$7={controls,equipmentSets,equipmentSet,nameContainer,deleteButtonContainer};function NewEquipmentSetDialog({show:et,onCreate:_e,onCancel:tt}){const[nt,rt]=reactExports.useState("");function it(ot){_e(ot)}return jsxRuntimeExports.jsxs(Modal$1,{show:et,onHide:tt,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,size:"lg",scrollable:!0,className:"pf-new-equipment-set-dialog",children:[jsxRuntimeExports.jsx(Modal$1.Header,{className:"title",closeButton:!0,closeVariant:"white",children:jsxRuntimeExports.jsx(Modal$1.Title,{children:"Create Equipment Set"})}),jsxRuntimeExports.jsx(Modal$1.Body,{children:jsxRuntimeExports.jsxs(Container$1,{children:[jsxRuntimeExports.jsx("label",{children:"Equipment Set Name"}),jsxRuntimeExports.jsx(TextInput,{value:nt,onChange:rt,onEnter:it,autoFocus:!0})]})}),jsxRuntimeExports.jsx(Modal$1.Footer,{children:jsxRuntimeExports.jsx(Button$1,{size:"lg",onClick:ot=>it(nt),children:"Create"})})]})}function EquipmentSetList(){const et=useEquipmentSetStore(),_e=useNavigate(),[tt,nt]=reactExports.useState([]),[rt,it]=useAsyncMemo(()=>et.list(),[et]);reactExports.useEffect(()=>{nt(rt)},[rt]);const ot=async at=>{const lt=await et.create(at);_e(`/equipment/edit/${lt.id}`)},st=async at=>{nt(tt.filter(lt=>lt.id!==at)),await et.delete(at)};return jsxRuntimeExports.jsxs("main",{children:[jsxRuntimeExports.jsx("header",{children:"Equipment Sets"}),jsxRuntimeExports.jsxs("section",{children:[it?jsxRuntimeExports.jsx(LoadingBlock,{}):jsxRuntimeExports.jsx("div",{className:styles$7.equipmentSets,children:tt==null?void 0:tt.map(at=>jsxRuntimeExports.jsx(EquipmentSetListEntry,{equipmentSet:at,onDelete:st},at.id))}),jsxRuntimeExports.jsx("div",{className:styles$7.controls,children:jsxRuntimeExports.jsx(AddCharacterButton,{disabled:it,onCreate:ot})})]})]})}function EquipmentSetListEntry({equipmentSet:et,onDelete:_e}){const tt=useNavigate();return jsxRuntimeExports.jsxs(Panel,{className:styles$7.equipmentSet,children:[jsxRuntimeExports.jsx("div",{className:classNames([styles$7.nameContainer,"clickable"]),onClick:()=>{tt(`/equipment/edit/${et.id}`)},children:et.name}),jsxRuntimeExports.jsx("div",{className:classNames([styles$7.deleteButtonContainer,"clickable"]),onClick:()=>{_e(et.id)},children:jsxRuntimeExports.jsx(DeleteIcon,{})})]})}function AddCharacterButton({onCreate:et,disabled:_e=!1}){const[tt,nt]=reactExports.useState(!1);function rt(ot){nt(!1),et(ot)}function it(){nt(!1)}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button$1,{disabled:_e,onClick:ot=>nt(!0),size:"lg",children:"+ Equipment Set"}),tt&&jsxRuntimeExports.jsx(NewEquipmentSetDialog,{show:tt,onCreate:rt,onCancel:it})]})}async function equipmentSetListLoader(){return{equipmentSetStore:await withGlobalEquipmentSetStore()}}function EquipmentSetListRoute(){const{equipmentSetStore:et}=useLoaderData();return jsxRuntimeExports.jsx(RequiresAuth,{children:jsxRuntimeExports.jsx(EquipmentSetStoreContext.Provider,{value:et,children:jsxRuntimeExports.jsx(EquipmentSetList,{})})})}const description="_description_x5z68_1",optionSets="_optionSets_x5z68_5",options="_options_x5z68_11",option="_option_x5z68_5",selectedOption="_selectedOption_x5z68_22",styles$6={description,optionSets,options,option,selectedOption};function ItemOptionSetSelector({optionSet:et,selectedOptions:_e,onChangeOptions:tt}){const nt=useItemDatabase(),[rt,it]=reactExports.useState(_e),ot=reactExports.useMemo(()=>et?nt.options().filter(lt=>matchTags(lt.tags,et.optionTags)):[],[nt,et]);function st(lt){if(rt.find(dt=>dt.id===lt.id)!==void 0){const dt=rt.filter(ft=>ft.id!==lt.id);it(dt),tt==null||tt(dt);return}const ut=rt.filter(dt=>dt.uniquenessTag!==lt.uniquenessTag);ut.push(lt),it(ut),tt==null||tt(ut)}function at(lt){return(rt==null?void 0:rt.map(ct=>ct.id).includes(lt.id))??!1}return jsxRuntimeExports.jsx("div",{className:styles$6.options,children:ot.map(lt=>jsxRuntimeExports.jsx(ButtonBlock,{onClick:()=>st(lt),className:styles$6.option+" "+(at(lt)?styles$6.selectedOption:""),children:lt.name},lt.id))})}function EquipmentDescription({item:et,selectedOptions:_e,onChangeOptions:tt}){const nt=useItemDatabase(),rt=reactExports.useMemo(()=>onlyDefined(et.optionSetIds.map(it=>nt.optionSet(it))),[nt,et]);return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:styles$6.description,children:et.description.text}),jsxRuntimeExports.jsx("div",{className:styles$6.optionSets,children:rt.map(it=>jsxRuntimeExports.jsx(ItemOptionSetSelector,{optionSet:it,selectedOptions:_e,onChangeOptions:tt},it.id))})]})}function EquipmentSearchDialog({show:et,value:_e,onSelect:tt,onCancel:nt}){const rt=useItemDatabase(),[it,ot]=reactExports.useState((_e==null?void 0:_e.options)??[]);function st(ct){ot(ct)}reactExports.useEffect(()=>{ot((_e==null?void 0:_e.options)??[])},[_e]);function at(ct){const ut=parseInt(ct),dt=rt.summary(ut);tt==null||tt(dt,it)}const lt=reactExports.useMemo(()=>{let ct=[new ChoiceSelectorCategory("Weapons","weapon"),new ChoiceSelectorCategory("Armor","armor"),new ChoiceSelectorCategory("Potions","potion"),new ChoiceSelectorCategory("Wands","wand")];return _e&&(ct=[new ChoiceSelectorCategory("Edit","*"),...ct]),ct},[_e]);return jsxRuntimeExports.jsx(ChoiceSelectorDialog,{choiceName:"Add Item",show:et,search:!0,value:_e==null?void 0:_e.item.uid,onSelect:at,onCancel:nt,categories:lt,variant:"blue",optionsFn:(ct,ut)=>{let dt=rt.summaries().filter(ft=>!ct||ft.name.toLowerCase().includes(ct.toLowerCase())).filter(ft=>!(ut!=null&&ut.tag)||ft.tags.includes(ut.tag)).sort((ft,pt)=>ft.name.localeCompare(pt.name));return(ut==null?void 0:ut.tag)==="*"&&_e&&(dt=[_e.item]),dt.map(ft=>new ChoiceSelectorOption(ft.uid,ft.name,!0,async()=>{const pt=await rt.load(ft.itemId);return pt?jsxRuntimeExports.jsx(EquipmentDescription,{item:pt,selectedOptions:it,onChangeOptions:st}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}))}})}function _typeof(et){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_e){return typeof _e}:function(_e){return _e&&typeof Symbol=="function"&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e},_typeof(et)}function _toPrimitive(et,_e){if(_typeof(et)!=="object"||et===null)return et;var tt=et[Symbol.toPrimitive];if(tt!==void 0){var nt=tt.call(et,_e||"default");if(_typeof(nt)!=="object")return nt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_e==="string"?String:Number)(et)}function _toPropertyKey(et){var _e=_toPrimitive(et,"string");return _typeof(_e)==="symbol"?_e:String(_e)}function _defineProperty(et,_e,tt){return _e=_toPropertyKey(_e),_e in et?Object.defineProperty(et,_e,{value:tt,enumerable:!0,configurable:!0,writable:!0}):et[_e]=tt,et}function ownKeys(et,_e){var tt=Object.keys(et);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(et);_e&&(nt=nt.filter(function(rt){return Object.getOwnPropertyDescriptor(et,rt).enumerable})),tt.push.apply(tt,nt)}return tt}function _objectSpread2(et){for(var _e=1;_e<arguments.length;_e++){var tt=arguments[_e]!=null?arguments[_e]:{};_e%2?ownKeys(Object(tt),!0).forEach(function(nt){_defineProperty(et,nt,tt[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(tt)):ownKeys(Object(tt)).forEach(function(nt){Object.defineProperty(et,nt,Object.getOwnPropertyDescriptor(tt,nt))})}return et}function formatProdErrorMessage(et){return"Minified Redux error #"+et+"; visit https://redux.js.org/Errors?code="+et+" for the full message or use the non-minified dev environment for full errors. "}var $$observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),randomString=function et(){return Math.random().toString(36).substring(7).split("").join(".")},ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function et(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject(et){if(typeof et!="object"||et===null)return!1;for(var _e=et;Object.getPrototypeOf(_e)!==null;)_e=Object.getPrototypeOf(_e);return Object.getPrototypeOf(et)===_e}function createStore$1(et,_e,tt){var nt;if(typeof _e=="function"&&typeof tt=="function"||typeof tt=="function"&&typeof arguments[3]=="function")throw new Error(formatProdErrorMessage(0));if(typeof _e=="function"&&typeof tt>"u"&&(tt=_e,_e=void 0),typeof tt<"u"){if(typeof tt!="function")throw new Error(formatProdErrorMessage(1));return tt(createStore$1)(et,_e)}if(typeof et!="function")throw new Error(formatProdErrorMessage(2));var rt=et,it=_e,ot=[],st=ot,at=!1;function lt(){st===ot&&(st=ot.slice())}function ct(){if(at)throw new Error(formatProdErrorMessage(3));return it}function ut(mt){if(typeof mt!="function")throw new Error(formatProdErrorMessage(4));if(at)throw new Error(formatProdErrorMessage(5));var xt=!0;return lt(),st.push(mt),function(){if(xt){if(at)throw new Error(formatProdErrorMessage(6));xt=!1,lt();var ht=st.indexOf(mt);st.splice(ht,1),ot=null}}}function dt(mt){if(!isPlainObject(mt))throw new Error(formatProdErrorMessage(7));if(typeof mt.type>"u")throw new Error(formatProdErrorMessage(8));if(at)throw new Error(formatProdErrorMessage(9));try{at=!0,it=rt(it,mt)}finally{at=!1}for(var xt=ot=st,gt=0;gt<xt.length;gt++){var ht=xt[gt];ht()}return mt}function ft(mt){if(typeof mt!="function")throw new Error(formatProdErrorMessage(10));rt=mt,dt({type:ActionTypes.REPLACE})}function pt(){var mt,xt=ut;return mt={subscribe:function(ht){if(typeof ht!="object"||ht===null)throw new Error(formatProdErrorMessage(11));function yt(){ht.next&&ht.next(ct())}yt();var vt=xt(yt);return{unsubscribe:vt}}},mt[$$observable]=function(){return this},mt}return dt({type:ActionTypes.INIT}),nt={dispatch:dt,subscribe:ut,getState:ct,replaceReducer:ft},nt[$$observable]=pt,nt}function bindActionCreator(et,_e){return function(){return _e(et.apply(this,arguments))}}function bindActionCreators$1(et,_e){if(typeof et=="function")return bindActionCreator(et,_e);if(typeof et!="object"||et===null)throw new Error(formatProdErrorMessage(16));var tt={};for(var nt in et){var rt=et[nt];typeof rt=="function"&&(tt[nt]=bindActionCreator(rt,_e))}return tt}function compose(){for(var et=arguments.length,_e=new Array(et),tt=0;tt<et;tt++)_e[tt]=arguments[tt];return _e.length===0?function(nt){return nt}:_e.length===1?_e[0]:_e.reduce(function(nt,rt){return function(){return nt(rt.apply(void 0,arguments))}})}function applyMiddleware(){for(var et=arguments.length,_e=new Array(et),tt=0;tt<et;tt++)_e[tt]=arguments[tt];return function(nt){return function(){var rt=nt.apply(void 0,arguments),it=function(){throw new Error(formatProdErrorMessage(15))},ot={getState:rt.getState,dispatch:function(){return it.apply(void 0,arguments)}},st=_e.map(function(at){return at(ot)});return it=compose.apply(void 0,st)(rt.dispatch),_objectSpread2(_objectSpread2({},rt),{},{dispatch:it})}}}var ReactReduxContext=React.createContext(null);function defaultNoopBatch(et){et()}var batch=defaultNoopBatch,setBatch=function et(_e){return batch=_e},getBatch=function et(){return batch};function createListenerCollection(){var et=getBatch(),_e=null,tt=null;return{clear:function(){_e=null,tt=null},notify:function(){et(function(){for(var rt=_e;rt;)rt.callback(),rt=rt.next})},get:function(){for(var rt=[],it=_e;it;)rt.push(it),it=it.next;return rt},subscribe:function(rt){var it=!0,ot=tt={callback:rt,next:null,prev:tt};return ot.prev?ot.prev.next=ot:_e=ot,function(){!it||_e===null||(it=!1,ot.next?ot.next.prev=ot.prev:tt=ot.prev,ot.prev?ot.prev.next=ot.next:_e=ot.next)}}}}var nullListeners={notify:function et(){},get:function et(){return[]}};function createSubscription(et,_e){var tt,nt=nullListeners;function rt(ut){return at(),nt.subscribe(ut)}function it(){nt.notify()}function ot(){ct.onStateChange&&ct.onStateChange()}function st(){return!!tt}function at(){tt||(tt=_e?_e.addNestedSub(ot):et.subscribe(ot),nt=createListenerCollection())}function lt(){tt&&(tt(),tt=void 0,nt.clear(),nt=nullListeners)}var ct={addNestedSub:rt,notifyNestedSubs:it,handleChangeWrapper:ot,isSubscribed:st,trySubscribe:at,tryUnsubscribe:lt,getListeners:function(){return nt}};return ct}var useIsomorphicLayoutEffect$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function Provider(et){var _e=et.store,tt=et.context,nt=et.children,rt=reactExports.useMemo(function(){var st=createSubscription(_e);return{store:_e,subscription:st}},[_e]),it=reactExports.useMemo(function(){return _e.getState()},[_e]);useIsomorphicLayoutEffect$1(function(){var st=rt.subscription;return st.onStateChange=st.notifyNestedSubs,st.trySubscribe(),it!==_e.getState()&&st.notifyNestedSubs(),function(){st.tryUnsubscribe(),st.onStateChange=null}},[rt,it]);var ot=tt||ReactReduxContext;return React.createElement(ot.Provider,{value:rt},nt)}var reactIs$2={exports:{}},reactIs_production_min$1={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$1=typeof Symbol=="function"&&Symbol.for,c$1=b$1?Symbol.for("react.element"):60103,d$1=b$1?Symbol.for("react.portal"):60106,e$1=b$1?Symbol.for("react.fragment"):60107,f$1=b$1?Symbol.for("react.strict_mode"):60108,g$1=b$1?Symbol.for("react.profiler"):60114,h$1=b$1?Symbol.for("react.provider"):60109,k$1=b$1?Symbol.for("react.context"):60110,l$1=b$1?Symbol.for("react.async_mode"):60111,m$1=b$1?Symbol.for("react.concurrent_mode"):60111,n$1=b$1?Symbol.for("react.forward_ref"):60112,p$1=b$1?Symbol.for("react.suspense"):60113,q$1=b$1?Symbol.for("react.suspense_list"):60120,r$1=b$1?Symbol.for("react.memo"):60115,t=b$1?Symbol.for("react.lazy"):60116,v$1=b$1?Symbol.for("react.block"):60121,w$1=b$1?Symbol.for("react.fundamental"):60117,x$1=b$1?Symbol.for("react.responder"):60118,y$1=b$1?Symbol.for("react.scope"):60119;function z$1(et){if(typeof et=="object"&&et!==null){var _e=et.$$typeof;switch(_e){case c$1:switch(et=et.type,et){case l$1:case m$1:case e$1:case g$1:case f$1:case p$1:return et;default:switch(et=et&&et.$$typeof,et){case k$1:case n$1:case t:case r$1:case h$1:return et;default:return _e}}case d$1:return _e}}}function A$1(et){return z$1(et)===m$1}reactIs_production_min$1.AsyncMode=l$1;reactIs_production_min$1.ConcurrentMode=m$1;reactIs_production_min$1.ContextConsumer=k$1;reactIs_production_min$1.ContextProvider=h$1;reactIs_production_min$1.Element=c$1;reactIs_production_min$1.ForwardRef=n$1;reactIs_production_min$1.Fragment=e$1;reactIs_production_min$1.Lazy=t;reactIs_production_min$1.Memo=r$1;reactIs_production_min$1.Portal=d$1;reactIs_production_min$1.Profiler=g$1;reactIs_production_min$1.StrictMode=f$1;reactIs_production_min$1.Suspense=p$1;reactIs_production_min$1.isAsyncMode=function(et){return A$1(et)||z$1(et)===l$1};reactIs_production_min$1.isConcurrentMode=A$1;reactIs_production_min$1.isContextConsumer=function(et){return z$1(et)===k$1};reactIs_production_min$1.isContextProvider=function(et){return z$1(et)===h$1};reactIs_production_min$1.isElement=function(et){return typeof et=="object"&&et!==null&&et.$$typeof===c$1};reactIs_production_min$1.isForwardRef=function(et){return z$1(et)===n$1};reactIs_production_min$1.isFragment=function(et){return z$1(et)===e$1};reactIs_production_min$1.isLazy=function(et){return z$1(et)===t};reactIs_production_min$1.isMemo=function(et){return z$1(et)===r$1};reactIs_production_min$1.isPortal=function(et){return z$1(et)===d$1};reactIs_production_min$1.isProfiler=function(et){return z$1(et)===g$1};reactIs_production_min$1.isStrictMode=function(et){return z$1(et)===f$1};reactIs_production_min$1.isSuspense=function(et){return z$1(et)===p$1};reactIs_production_min$1.isValidElementType=function(et){return typeof et=="string"||typeof et=="function"||et===e$1||et===m$1||et===g$1||et===f$1||et===p$1||et===q$1||typeof et=="object"&&et!==null&&(et.$$typeof===t||et.$$typeof===r$1||et.$$typeof===h$1||et.$$typeof===k$1||et.$$typeof===n$1||et.$$typeof===w$1||et.$$typeof===x$1||et.$$typeof===y$1||et.$$typeof===v$1)};reactIs_production_min$1.typeOf=z$1;reactIs$2.exports=reactIs_production_min$1;var reactIsExports$1=reactIs$2.exports,reactIs$1=reactIsExports$1,REACT_STATICS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KNOWN_STATICS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs$1.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs$1.Memo]=MEMO_STATICS;function getStatics(et){return reactIs$1.isMemo(et)?MEMO_STATICS:TYPE_STATICS[et.$$typeof]||REACT_STATICS}var defineProperty=Object.defineProperty,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf=Object.getPrototypeOf,objectPrototype=Object.prototype;function hoistNonReactStatics(et,_e,tt){if(typeof _e!="string"){if(objectPrototype){var nt=getPrototypeOf(_e);nt&&nt!==objectPrototype&&hoistNonReactStatics(et,nt,tt)}var rt=getOwnPropertyNames(_e);getOwnPropertySymbols&&(rt=rt.concat(getOwnPropertySymbols(_e)));for(var it=getStatics(et),ot=getStatics(_e),st=0;st<rt.length;++st){var at=rt[st];if(!KNOWN_STATICS[at]&&!(tt&&tt[at])&&!(ot&&ot[at])&&!(it&&it[at])){var lt=getOwnPropertyDescriptor(_e,at);try{defineProperty(et,at,lt)}catch{}}}}return et}var hoistNonReactStatics_cjs=hoistNonReactStatics;const hoistStatics=getDefaultExportFromCjs(hoistNonReactStatics_cjs);var reactIs={exports:{}},reactIs_production_min={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=60103,c=60106,d=60107,e=60108,f=60114,g=60109,h=60110,k=60112,l=60113,m=60120,n=60115,p=60116,q=60121,r=60122,u=60117,v=60129,w=60131;if(typeof Symbol=="function"&&Symbol.for){var x=Symbol.for;b=x("react.element"),c=x("react.portal"),d=x("react.fragment"),e=x("react.strict_mode"),f=x("react.profiler"),g=x("react.provider"),h=x("react.context"),k=x("react.forward_ref"),l=x("react.suspense"),m=x("react.suspense_list"),n=x("react.memo"),p=x("react.lazy"),q=x("react.block"),r=x("react.server.block"),u=x("react.fundamental"),v=x("react.debug_trace_mode"),w=x("react.legacy_hidden")}function y(et){if(typeof et=="object"&&et!==null){var _e=et.$$typeof;switch(_e){case b:switch(et=et.type,et){case d:case f:case e:case l:case m:return et;default:switch(et=et&&et.$$typeof,et){case h:case k:case p:case n:case g:return et;default:return _e}}case c:return _e}}}var z=g,A=b,B=k,C=d,D=p,E=n,F=c,G=f,H=e,I=l;reactIs_production_min.ContextConsumer=h;reactIs_production_min.ContextProvider=z;reactIs_production_min.Element=A;reactIs_production_min.ForwardRef=B;reactIs_production_min.Fragment=C;reactIs_production_min.Lazy=D;reactIs_production_min.Memo=E;reactIs_production_min.Portal=F;reactIs_production_min.Profiler=G;reactIs_production_min.StrictMode=H;reactIs_production_min.Suspense=I;reactIs_production_min.isAsyncMode=function(){return!1};reactIs_production_min.isConcurrentMode=function(){return!1};reactIs_production_min.isContextConsumer=function(et){return y(et)===h};reactIs_production_min.isContextProvider=function(et){return y(et)===g};reactIs_production_min.isElement=function(et){return typeof et=="object"&&et!==null&&et.$$typeof===b};reactIs_production_min.isForwardRef=function(et){return y(et)===k};reactIs_production_min.isFragment=function(et){return y(et)===d};reactIs_production_min.isLazy=function(et){return y(et)===p};reactIs_production_min.isMemo=function(et){return y(et)===n};reactIs_production_min.isPortal=function(et){return y(et)===c};reactIs_production_min.isProfiler=function(et){return y(et)===f};reactIs_production_min.isStrictMode=function(et){return y(et)===e};reactIs_production_min.isSuspense=function(et){return y(et)===l};reactIs_production_min.isValidElementType=function(et){return typeof et=="string"||typeof et=="function"||et===d||et===f||et===v||et===e||et===l||et===m||et===w||typeof et=="object"&&et!==null&&(et.$$typeof===p||et.$$typeof===n||et.$$typeof===g||et.$$typeof===h||et.$$typeof===k||et.$$typeof===u||et.$$typeof===q||et[0]===r)};reactIs_production_min.typeOf=y;reactIs.exports=reactIs_production_min;var reactIsExports=reactIs.exports,_excluded$2=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],_excluded2=["reactReduxForwardedRef"],EMPTY_ARRAY=[],NO_SUBSCRIPTION_ARRAY=[null,null];function storeStateUpdatesReducer(et,_e){var tt=et[1];return[_e.payload,tt+1]}function useIsomorphicLayoutEffectWithArgs(et,_e,tt){useIsomorphicLayoutEffect$1(function(){return et.apply(void 0,_e)},tt)}function captureWrapperProps(et,_e,tt,nt,rt,it,ot){et.current=nt,_e.current=rt,tt.current=!1,it.current&&(it.current=null,ot())}function subscribeUpdates(et,_e,tt,nt,rt,it,ot,st,at,lt){if(et){var ct=!1,ut=null,dt=function(){if(!ct){var mt=_e.getState(),xt,gt;try{xt=nt(mt,rt.current)}catch(ht){gt=ht,ut=ht}gt||(ut=null),xt===it.current?ot.current||at():(it.current=xt,st.current=xt,ot.current=!0,lt({type:"STORE_UPDATED",payload:{error:gt}}))}};tt.onStateChange=dt,tt.trySubscribe(),dt();var ft=function(){if(ct=!0,tt.tryUnsubscribe(),tt.onStateChange=null,ut)throw ut};return ft}}var initStateUpdates=function et(){return[null,0]};function connectAdvanced(et,_e){_e===void 0&&(_e={});var tt=_e,nt=tt.getDisplayName,rt=nt===void 0?function(yt){return"ConnectAdvanced("+yt+")"}:nt,it=tt.methodName,ot=it===void 0?"connectAdvanced":it,st=tt.renderCountProp,at=st===void 0?void 0:st,lt=tt.shouldHandleStateChanges,ct=lt===void 0?!0:lt,ut=tt.storeKey,dt=ut===void 0?"store":ut;tt.withRef;var ft=tt.forwardRef,pt=ft===void 0?!1:ft,mt=tt.context,xt=mt===void 0?ReactReduxContext:mt,gt=_objectWithoutPropertiesLoose$c(tt,_excluded$2),ht=xt;return function(vt){var _t=vt.displayName||vt.name||"Component",Et=rt(_t),bt=_extends$6({},gt,{getDisplayName:rt,methodName:ot,renderCountProp:at,shouldHandleStateChanges:ct,storeKey:dt,displayName:Et,wrappedComponentName:_t,WrappedComponent:vt}),St=gt.pure;function wt(jt){return et(jt.dispatch,bt)}var Rt=St?reactExports.useMemo:function(jt){return jt()};function Nt(jt){var Wt=reactExports.useMemo(function(){var _n=jt.reactReduxForwardedRef,fn=_objectWithoutPropertiesLoose$c(jt,_excluded2);return[jt.context,_n,fn]},[jt]),Ht=Wt[0],tn=Wt[1],Ot=Wt[2],Lt=reactExports.useMemo(function(){return Ht&&Ht.Consumer&&reactIsExports.isContextConsumer(React.createElement(Ht.Consumer,null))?Ht:ht},[Ht,ht]),Mt=reactExports.useContext(Lt),Jt=!!jt.store&&!!jt.store.getState&&!!jt.store.dispatch;Mt&&Mt.store;var qt=Jt?jt.store:Mt.store,on=reactExports.useMemo(function(){return wt(qt)},[qt]),Kt=reactExports.useMemo(function(){if(!ct)return NO_SUBSCRIPTION_ARRAY;var _n=createSubscription(qt,Jt?null:Mt.subscription),fn=_n.notifyNestedSubs.bind(_n);return[_n,fn]},[qt,Jt,Mt]),Qt=Kt[0],sn=Kt[1],hn=reactExports.useMemo(function(){return Jt?Mt:_extends$6({},Mt,{subscription:Qt})},[Jt,Mt,Qt]),nn=reactExports.useReducer(storeStateUpdatesReducer,EMPTY_ARRAY,initStateUpdates),It=nn[0],Tt=It[0],At=nn[1];if(Tt&&Tt.error)throw Tt.error;var Bt=reactExports.useRef(),Ft=reactExports.useRef(Ot),Gt=reactExports.useRef(),zt=reactExports.useRef(!1),pn=Rt(function(){return Gt.current&&Ot===Ft.current?Gt.current:on(qt.getState(),Ot)},[qt,Tt,Ot]);useIsomorphicLayoutEffectWithArgs(captureWrapperProps,[Ft,Bt,zt,Ot,pn,Gt,sn]),useIsomorphicLayoutEffectWithArgs(subscribeUpdates,[ct,qt,Qt,on,Ft,Bt,zt,Gt,sn,At],[qt,Qt,on]);var an=reactExports.useMemo(function(){return React.createElement(vt,_extends$6({},pn,{ref:tn}))},[tn,vt,pn]),En=reactExports.useMemo(function(){return ct?React.createElement(Lt.Provider,{value:hn},an):an},[Lt,an,hn]);return En}var kt=St?React.memo(Nt):Nt;if(kt.WrappedComponent=vt,kt.displayName=Nt.displayName=Et,pt){var Pt=React.forwardRef(function(Wt,Ht){return React.createElement(kt,_extends$6({},Wt,{reactReduxForwardedRef:Ht}))});return Pt.displayName=Et,Pt.WrappedComponent=vt,hoistStatics(Pt,vt)}return hoistStatics(kt,vt)}}function is(et,_e){return et===_e?et!==0||_e!==0||1/et===1/_e:et!==et&&_e!==_e}function shallowEqual(et,_e){if(is(et,_e))return!0;if(typeof et!="object"||et===null||typeof _e!="object"||_e===null)return!1;var tt=Object.keys(et),nt=Object.keys(_e);if(tt.length!==nt.length)return!1;for(var rt=0;rt<tt.length;rt++)if(!Object.prototype.hasOwnProperty.call(_e,tt[rt])||!is(et[tt[rt]],_e[tt[rt]]))return!1;return!0}function bindActionCreators(et,_e){var tt={},nt=function(ot){var st=et[ot];typeof st=="function"&&(tt[ot]=function(){return _e(st.apply(void 0,arguments))})};for(var rt in et)nt(rt);return tt}function wrapMapToPropsConstant(et){return function(tt,nt){var rt=et(tt,nt);function it(){return rt}return it.dependsOnOwnProps=!1,it}}function getDependsOnOwnProps(et){return et.dependsOnOwnProps!==null&&et.dependsOnOwnProps!==void 0?!!et.dependsOnOwnProps:et.length!==1}function wrapMapToPropsFunc(et,_e){return function(nt,rt){rt.displayName;var it=function(st,at){return it.dependsOnOwnProps?it.mapToProps(st,at):it.mapToProps(st)};return it.dependsOnOwnProps=!0,it.mapToProps=function(st,at){it.mapToProps=et,it.dependsOnOwnProps=getDependsOnOwnProps(et);var lt=it(st,at);return typeof lt=="function"&&(it.mapToProps=lt,it.dependsOnOwnProps=getDependsOnOwnProps(lt),lt=it(st,at)),lt},it}}function whenMapDispatchToPropsIsFunction(et){return typeof et=="function"?wrapMapToPropsFunc(et):void 0}function whenMapDispatchToPropsIsMissing(et){return et?void 0:wrapMapToPropsConstant(function(_e){return{dispatch:_e}})}function whenMapDispatchToPropsIsObject(et){return et&&typeof et=="object"?wrapMapToPropsConstant(function(_e){return bindActionCreators(et,_e)}):void 0}const defaultMapDispatchToPropsFactories=[whenMapDispatchToPropsIsFunction,whenMapDispatchToPropsIsMissing,whenMapDispatchToPropsIsObject];function whenMapStateToPropsIsFunction(et){return typeof et=="function"?wrapMapToPropsFunc(et):void 0}function whenMapStateToPropsIsMissing(et){return et?void 0:wrapMapToPropsConstant(function(){return{}})}const defaultMapStateToPropsFactories=[whenMapStateToPropsIsFunction,whenMapStateToPropsIsMissing];function defaultMergeProps(et,_e,tt){return _extends$6({},tt,et,_e)}function wrapMergePropsFunc(et){return function(tt,nt){nt.displayName;var rt=nt.pure,it=nt.areMergedPropsEqual,ot=!1,st;return function(lt,ct,ut){var dt=et(lt,ct,ut);return ot?(!rt||!it(dt,st))&&(st=dt):(ot=!0,st=dt),st}}}function whenMergePropsIsFunction(et){return typeof et=="function"?wrapMergePropsFunc(et):void 0}function whenMergePropsIsOmitted(et){return et?void 0:function(){return defaultMergeProps}}const defaultMergePropsFactories=[whenMergePropsIsFunction,whenMergePropsIsOmitted];var _excluded$1=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function impureFinalPropsSelectorFactory(et,_e,tt,nt){return function(it,ot){return tt(et(it,ot),_e(nt,ot),ot)}}function pureFinalPropsSelectorFactory(et,_e,tt,nt,rt){var it=rt.areStatesEqual,ot=rt.areOwnPropsEqual,st=rt.areStatePropsEqual,at=!1,lt,ct,ut,dt,ft;function pt(yt,vt){return lt=yt,ct=vt,ut=et(lt,ct),dt=_e(nt,ct),ft=tt(ut,dt,ct),at=!0,ft}function mt(){return ut=et(lt,ct),_e.dependsOnOwnProps&&(dt=_e(nt,ct)),ft=tt(ut,dt,ct),ft}function xt(){return et.dependsOnOwnProps&&(ut=et(lt,ct)),_e.dependsOnOwnProps&&(dt=_e(nt,ct)),ft=tt(ut,dt,ct),ft}function gt(){var yt=et(lt,ct),vt=!st(yt,ut);return ut=yt,vt&&(ft=tt(ut,dt,ct)),ft}function ht(yt,vt){var _t=!ot(vt,ct),Et=!it(yt,lt,vt,ct);return lt=yt,ct=vt,_t&&Et?mt():_t?xt():Et?gt():ft}return function(vt,_t){return at?ht(vt,_t):pt(vt,_t)}}function finalPropsSelectorFactory(et,_e){var tt=_e.initMapStateToProps,nt=_e.initMapDispatchToProps,rt=_e.initMergeProps,it=_objectWithoutPropertiesLoose$c(_e,_excluded$1),ot=tt(et,it),st=nt(et,it),at=rt(et,it),lt=it.pure?pureFinalPropsSelectorFactory:impureFinalPropsSelectorFactory;return lt(ot,st,at,et,it)}var _excluded=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function match(et,_e,tt){for(var nt=_e.length-1;nt>=0;nt--){var rt=_e[nt](et);if(rt)return rt}return function(it,ot){throw new Error("Invalid value of type "+typeof et+" for "+tt+" argument when connecting component "+ot.wrappedComponentName+".")}}function strictEqual(et,_e){return et===_e}function createConnect(et){var _e=et===void 0?{}:et,tt=_e.connectHOC,nt=tt===void 0?connectAdvanced:tt,rt=_e.mapStateToPropsFactories,it=rt===void 0?defaultMapStateToPropsFactories:rt,ot=_e.mapDispatchToPropsFactories,st=ot===void 0?defaultMapDispatchToPropsFactories:ot,at=_e.mergePropsFactories,lt=at===void 0?defaultMergePropsFactories:at,ct=_e.selectorFactory,ut=ct===void 0?finalPropsSelectorFactory:ct;return function(ft,pt,mt,xt){xt===void 0&&(xt={});var gt=xt,ht=gt.pure,yt=ht===void 0?!0:ht,vt=gt.areStatesEqual,_t=vt===void 0?strictEqual:vt,Et=gt.areOwnPropsEqual,bt=Et===void 0?shallowEqual:Et,St=gt.areStatePropsEqual,wt=St===void 0?shallowEqual:St,Rt=gt.areMergedPropsEqual,Nt=Rt===void 0?shallowEqual:Rt,kt=_objectWithoutPropertiesLoose$c(gt,_excluded),Pt=match(ft,it,"mapStateToProps"),jt=match(pt,st,"mapDispatchToProps"),Wt=match(mt,lt,"mergeProps");return nt(ut,_extends$6({methodName:"connect",getDisplayName:function(tn){return"Connect("+tn+")"},shouldHandleStateChanges:!!ft,initMapStateToProps:Pt,initMapDispatchToProps:jt,initMergeProps:Wt,pure:yt,areStatesEqual:_t,areOwnPropsEqual:bt,areStatePropsEqual:wt,areMergedPropsEqual:Nt},kt))}}const connect=createConnect();setBatch(reactDomExports.unstable_batchedUpdates);function areInputsEqual$1(et,_e){if(et.length!==_e.length)return!1;for(var tt=0;tt<et.length;tt++)if(et[tt]!==_e[tt])return!1;return!0}function useMemoOne(et,_e){var tt=reactExports.useState(function(){return{inputs:_e,result:et()}})[0],nt=reactExports.useRef(!0),rt=reactExports.useRef(tt),it=nt.current||!!(_e&&rt.current.inputs&&areInputsEqual$1(_e,rt.current.inputs)),ot=it?rt.current:{inputs:_e,result:et()};return reactExports.useEffect(function(){nt.current=!1,rt.current=ot},[ot]),ot.result}function useCallbackOne(et,_e){return useMemoOne(function(){return et},_e)}var useMemo=useMemoOne,useCallback=useCallbackOne,prefix$2="Invariant failed";function invariant$1(et,_e){if(!et)throw new Error(prefix$2)}var getRect=function et(_e){var tt=_e.top,nt=_e.right,rt=_e.bottom,it=_e.left,ot=nt-it,st=rt-tt,at={top:tt,right:nt,bottom:rt,left:it,width:ot,height:st,x:it,y:tt,center:{x:(nt+it)/2,y:(rt+tt)/2}};return at},expand=function et(_e,tt){return{top:_e.top-tt.top,left:_e.left-tt.left,bottom:_e.bottom+tt.bottom,right:_e.right+tt.right}},shrink=function et(_e,tt){return{top:_e.top+tt.top,left:_e.left+tt.left,bottom:_e.bottom-tt.bottom,right:_e.right-tt.right}},shift=function et(_e,tt){return{top:_e.top+tt.y,left:_e.left+tt.x,bottom:_e.bottom+tt.y,right:_e.right+tt.x}},noSpacing$1={top:0,right:0,bottom:0,left:0},createBox=function et(_e){var tt=_e.borderBox,nt=_e.margin,rt=nt===void 0?noSpacing$1:nt,it=_e.border,ot=it===void 0?noSpacing$1:it,st=_e.padding,at=st===void 0?noSpacing$1:st,lt=getRect(expand(tt,rt)),ct=getRect(shrink(tt,ot)),ut=getRect(shrink(ct,at));return{marginBox:lt,borderBox:getRect(tt),paddingBox:ct,contentBox:ut,margin:rt,border:ot,padding:at}},parse=function et(_e){var tt=_e.slice(0,-2),nt=_e.slice(-2);if(nt!=="px")return 0;var rt=Number(tt);return isNaN(rt)&&invariant$1(!1),rt},getWindowScroll$1=function et(){return{x:window.pageXOffset,y:window.pageYOffset}},offset=function et(_e,tt){var nt=_e.borderBox,rt=_e.border,it=_e.margin,ot=_e.padding,st=shift(nt,tt);return createBox({borderBox:st,border:rt,margin:it,padding:ot})},withScroll=function et(_e,tt){return tt===void 0&&(tt=getWindowScroll$1()),offset(_e,tt)},calculateBox=function et(_e,tt){var nt={top:parse(tt.marginTop),right:parse(tt.marginRight),bottom:parse(tt.marginBottom),left:parse(tt.marginLeft)},rt={top:parse(tt.paddingTop),right:parse(tt.paddingRight),bottom:parse(tt.paddingBottom),left:parse(tt.paddingLeft)},it={top:parse(tt.borderTopWidth),right:parse(tt.borderRightWidth),bottom:parse(tt.borderBottomWidth),left:parse(tt.borderLeftWidth)};return createBox({borderBox:_e,margin:nt,padding:rt,border:it})},getBox=function et(_e){var tt=_e.getBoundingClientRect(),nt=window.getComputedStyle(_e);return calculateBox(tt,nt)},safeIsNaN=Number.isNaN||function et(_e){return typeof _e=="number"&&_e!==_e};function isEqual$2(et,_e){return!!(et===_e||safeIsNaN(et)&&safeIsNaN(_e))}function areInputsEqual(et,_e){if(et.length!==_e.length)return!1;for(var tt=0;tt<et.length;tt++)if(!isEqual$2(et[tt],_e[tt]))return!1;return!0}function memoizeOne(et,_e){_e===void 0&&(_e=areInputsEqual);var tt,nt=[],rt,it=!1;function ot(){for(var st=[],at=0;at<arguments.length;at++)st[at]=arguments[at];return it&&tt===this&&_e(st,nt)||(rt=et.apply(this,st),it=!0,tt=this,nt=st),rt}return ot}var rafSchd=function et(_e){var tt=[],nt=null,rt=function(){for(var ot=arguments.length,st=new Array(ot),at=0;at<ot;at++)st[at]=arguments[at];tt=st,!nt&&(nt=requestAnimationFrame(function(){nt=null,_e.apply(void 0,tt)}))};return rt.cancel=function(){nt&&(cancelAnimationFrame(nt),nt=null)},rt};function log(et,_e){}log.bind(null,"warn");log.bind(null,"error");function noop(){}function getOptions(et,_e){return _extends$6({},et,{},_e)}function bindEvents(et,_e,tt){var nt=_e.map(function(rt){var it=getOptions(tt,rt.options);return et.addEventListener(rt.eventName,rt.fn,it),function(){et.removeEventListener(rt.eventName,rt.fn,it)}});return function(){nt.forEach(function(it){it()})}}var prefix="Invariant failed";function RbdInvariant(et){this.message=et}RbdInvariant.prototype.toString=function et(){return this.message};function invariant(et,_e){if(!et)throw new RbdInvariant(prefix)}var ErrorBoundary=function(et){_inheritsLoose(_e,et);function _e(){for(var nt,rt=arguments.length,it=new Array(rt),ot=0;ot<rt;ot++)it[ot]=arguments[ot];return nt=et.call.apply(et,[this].concat(it))||this,nt.callbacks=null,nt.unbind=noop,nt.onWindowError=function(st){var at=nt.getCallbacks();at.isDragging()&&at.tryAbort();var lt=st.error;lt instanceof RbdInvariant&&st.preventDefault()},nt.getCallbacks=function(){if(!nt.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return nt.callbacks},nt.setCallbacks=function(st){nt.callbacks=st},nt}var tt=_e.prototype;return tt.componentDidMount=function(){this.unbind=bindEvents(window,[{eventName:"error",fn:this.onWindowError}])},tt.componentDidCatch=function(rt){if(rt instanceof RbdInvariant){this.setState({});return}throw rt},tt.componentWillUnmount=function(){this.unbind()},tt.render=function(){return this.props.children(this.setCallbacks)},_e}(React.Component),dragHandleUsageInstructions=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,position=function et(_e){return _e+1},onDragStart=function et(_e){return`
  You have lifted an item in position `+position(_e.source.index)+`
`},withLocation=function et(_e,tt){var nt=_e.droppableId===tt.droppableId,rt=position(_e.index),it=position(tt.index);return nt?`
      You have moved the item from position `+rt+`
      to position `+it+`
    `:`
    You have moved the item from position `+rt+`
    in list `+_e.droppableId+`
    to list `+tt.droppableId+`
    in position `+it+`
  `},withCombine=function et(_e,tt,nt){var rt=tt.droppableId===nt.droppableId;return rt?`
      The item `+_e+`
      has been combined with `+nt.draggableId:`
      The item `+_e+`
      in list `+tt.droppableId+`
      has been combined with `+nt.draggableId+`
      in list `+nt.droppableId+`
    `},onDragUpdate=function et(_e){var tt=_e.destination;if(tt)return withLocation(_e.source,tt);var nt=_e.combine;return nt?withCombine(_e.draggableId,_e.source,nt):"You are over an area that cannot be dropped on"},returnedToStart=function et(_e){return`
  The item has returned to its starting position
  of `+position(_e.index)+`
`},onDragEnd=function et(_e){if(_e.reason==="CANCEL")return`
      Movement cancelled.
      `+returnedToStart(_e.source)+`
    `;var tt=_e.destination,nt=_e.combine;return tt?`
      You have dropped the item.
      `+withLocation(_e.source,tt)+`
    `:nt?`
      You have dropped the item.
      `+withCombine(_e.draggableId,_e.source,nt)+`
    `:`
    The item has been dropped while not over a drop area.
    `+returnedToStart(_e.source)+`
  `},preset={dragHandleUsageInstructions,onDragStart,onDragUpdate,onDragEnd},origin={x:0,y:0},add=function et(_e,tt){return{x:_e.x+tt.x,y:_e.y+tt.y}},subtract=function et(_e,tt){return{x:_e.x-tt.x,y:_e.y-tt.y}},isEqual=function et(_e,tt){return _e.x===tt.x&&_e.y===tt.y},negate=function et(_e){return{x:_e.x!==0?-_e.x:0,y:_e.y!==0?-_e.y:0}},patch=function et(_e,tt,nt){var rt;return nt===void 0&&(nt=0),rt={},rt[_e]=tt,rt[_e==="x"?"y":"x"]=nt,rt},distance=function et(_e,tt){return Math.sqrt(Math.pow(tt.x-_e.x,2)+Math.pow(tt.y-_e.y,2))},closest=function et(_e,tt){return Math.min.apply(Math,tt.map(function(nt){return distance(_e,nt)}))},apply=function et(_e){return function(tt){return{x:_e(tt.x),y:_e(tt.y)}}},executeClip=function(et,_e){var tt=getRect({top:Math.max(_e.top,et.top),right:Math.min(_e.right,et.right),bottom:Math.min(_e.bottom,et.bottom),left:Math.max(_e.left,et.left)});return tt.width<=0||tt.height<=0?null:tt},offsetByPosition=function et(_e,tt){return{top:_e.top+tt.y,left:_e.left+tt.x,bottom:_e.bottom+tt.y,right:_e.right+tt.x}},getCorners=function et(_e){return[{x:_e.left,y:_e.top},{x:_e.right,y:_e.top},{x:_e.left,y:_e.bottom},{x:_e.right,y:_e.bottom}]},noSpacing={top:0,right:0,bottom:0,left:0},scroll=function et(_e,tt){return tt?offsetByPosition(_e,tt.scroll.diff.displacement):_e},increase=function et(_e,tt,nt){if(nt&&nt.increasedBy){var rt;return _extends$6({},_e,(rt={},rt[tt.end]=_e[tt.end]+nt.increasedBy[tt.line],rt))}return _e},clip=function et(_e,tt){return tt&&tt.shouldClipSubject?executeClip(tt.pageMarginBox,_e):getRect(_e)},getSubject=function(et){var _e=et.page,tt=et.withPlaceholder,nt=et.axis,rt=et.frame,it=scroll(_e.marginBox,rt),ot=increase(it,nt,tt),st=clip(ot,rt);return{page:_e,withPlaceholder:tt,active:st}},scrollDroppable=function(et,_e){et.frame||invariant(!1);var tt=et.frame,nt=subtract(_e,tt.scroll.initial),rt=negate(nt),it=_extends$6({},tt,{scroll:{initial:tt.scroll.initial,current:_e,diff:{value:nt,displacement:rt},max:tt.scroll.max}}),ot=getSubject({page:et.subject.page,withPlaceholder:et.subject.withPlaceholder,axis:et.axis,frame:it}),st=_extends$6({},et,{frame:it,subject:ot});return st};function values(et){return Object.values?Object.values(et):Object.keys(et).map(function(_e){return et[_e]})}function findIndex(et,_e){if(et.findIndex)return et.findIndex(_e);for(var tt=0;tt<et.length;tt++)if(_e(et[tt]))return tt;return-1}function find(et,_e){if(et.find)return et.find(_e);var tt=findIndex(et,_e);if(tt!==-1)return et[tt]}function toArray(et){return Array.prototype.slice.call(et)}var toDroppableMap=memoizeOne(function(et){return et.reduce(function(_e,tt){return _e[tt.descriptor.id]=tt,_e},{})}),toDraggableMap=memoizeOne(function(et){return et.reduce(function(_e,tt){return _e[tt.descriptor.id]=tt,_e},{})}),toDroppableList=memoizeOne(function(et){return values(et)}),toDraggableList=memoizeOne(function(et){return values(et)}),getDraggablesInsideDroppable=memoizeOne(function(et,_e){var tt=toDraggableList(_e).filter(function(nt){return et===nt.descriptor.droppableId}).sort(function(nt,rt){return nt.descriptor.index-rt.descriptor.index});return tt});function tryGetDestination(et){return et.at&&et.at.type==="REORDER"?et.at.destination:null}function tryGetCombine(et){return et.at&&et.at.type==="COMBINE"?et.at.combine:null}var removeDraggableFromList=memoizeOne(function(et,_e){return _e.filter(function(tt){return tt.descriptor.id!==et.descriptor.id})}),moveToNextCombine=function(et){var _e=et.isMovingForward,tt=et.draggable,nt=et.destination,rt=et.insideDestination,it=et.previousImpact;if(!nt.isCombineEnabled)return null;var ot=tryGetDestination(it);if(!ot)return null;function st(mt){var xt={type:"COMBINE",combine:{draggableId:mt,droppableId:nt.descriptor.id}};return _extends$6({},it,{at:xt})}var at=it.displaced.all,lt=at.length?at[0]:null;if(_e)return lt?st(lt):null;var ct=removeDraggableFromList(tt,rt);if(!lt){if(!ct.length)return null;var ut=ct[ct.length-1];return st(ut.descriptor.id)}var dt=findIndex(ct,function(mt){return mt.descriptor.id===lt});dt===-1&&invariant(!1);var ft=dt-1;if(ft<0)return null;var pt=ct[ft];return st(pt.descriptor.id)},isHomeOf=function(et,_e){return et.descriptor.droppableId===_e.descriptor.id},noDisplacedBy={point:origin,value:0},emptyGroups={invisible:{},visible:{},all:[]},noImpact={displaced:emptyGroups,displacedBy:noDisplacedBy,at:null},isWithin=function(et,_e){return function(tt){return et<=tt&&tt<=_e}},isPartiallyVisibleThroughFrame=function(et){var _e=isWithin(et.top,et.bottom),tt=isWithin(et.left,et.right);return function(nt){var rt=_e(nt.top)&&_e(nt.bottom)&&tt(nt.left)&&tt(nt.right);if(rt)return!0;var it=_e(nt.top)||_e(nt.bottom),ot=tt(nt.left)||tt(nt.right),st=it&&ot;if(st)return!0;var at=nt.top<et.top&&nt.bottom>et.bottom,lt=nt.left<et.left&&nt.right>et.right,ct=at&&lt;if(ct)return!0;var ut=at&&ot||lt&&it;return ut}},isTotallyVisibleThroughFrame=function(et){var _e=isWithin(et.top,et.bottom),tt=isWithin(et.left,et.right);return function(nt){var rt=_e(nt.top)&&_e(nt.bottom)&&tt(nt.left)&&tt(nt.right);return rt}},vertical={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},horizontal={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},isTotallyVisibleThroughFrameOnAxis=function(et){return function(_e){var tt=isWithin(_e.top,_e.bottom),nt=isWithin(_e.left,_e.right);return function(rt){return et===vertical?tt(rt.top)&&tt(rt.bottom):nt(rt.left)&&nt(rt.right)}}},getDroppableDisplaced=function et(_e,tt){var nt=tt.frame?tt.frame.scroll.diff.displacement:origin;return offsetByPosition(_e,nt)},isVisibleInDroppable=function et(_e,tt,nt){return tt.subject.active?nt(tt.subject.active)(_e):!1},isVisibleInViewport=function et(_e,tt,nt){return nt(tt)(_e)},isVisible=function et(_e){var tt=_e.target,nt=_e.destination,rt=_e.viewport,it=_e.withDroppableDisplacement,ot=_e.isVisibleThroughFrameFn,st=it?getDroppableDisplaced(tt,nt):tt;return isVisibleInDroppable(st,nt,ot)&&isVisibleInViewport(st,rt,ot)},isPartiallyVisible=function et(_e){return isVisible(_extends$6({},_e,{isVisibleThroughFrameFn:isPartiallyVisibleThroughFrame}))},isTotallyVisible=function et(_e){return isVisible(_extends$6({},_e,{isVisibleThroughFrameFn:isTotallyVisibleThroughFrame}))},isTotallyVisibleOnAxis=function et(_e){return isVisible(_extends$6({},_e,{isVisibleThroughFrameFn:isTotallyVisibleThroughFrameOnAxis(_e.destination.axis)}))},getShouldAnimate=function et(_e,tt,nt){if(typeof nt=="boolean")return nt;if(!tt)return!0;var rt=tt.invisible,it=tt.visible;if(rt[_e])return!1;var ot=it[_e];return ot?ot.shouldAnimate:!0};function getTarget(et,_e){var tt=et.page.marginBox,nt={top:_e.point.y,right:0,bottom:0,left:_e.point.x};return getRect(expand(tt,nt))}function getDisplacementGroups(et){var _e=et.afterDragging,tt=et.destination,nt=et.displacedBy,rt=et.viewport,it=et.forceShouldAnimate,ot=et.last;return _e.reduce(function(at,lt){var ct=getTarget(lt,nt),ut=lt.descriptor.id;at.all.push(ut);var dt=isPartiallyVisible({target:ct,destination:tt,viewport:rt,withDroppableDisplacement:!0});if(!dt)return at.invisible[lt.descriptor.id]=!0,at;var ft=getShouldAnimate(ut,ot,it),pt={draggableId:ut,shouldAnimate:ft};return at.visible[ut]=pt,at},{all:[],visible:{},invisible:{}})}function getIndexOfLastItem(et,_e){if(!et.length)return 0;var tt=et[et.length-1].descriptor.index;return _e.inHomeList?tt:tt+1}function goAtEnd(et){var _e=et.insideDestination,tt=et.inHomeList,nt=et.displacedBy,rt=et.destination,it=getIndexOfLastItem(_e,{inHomeList:tt});return{displaced:emptyGroups,displacedBy:nt,at:{type:"REORDER",destination:{droppableId:rt.descriptor.id,index:it}}}}function calculateReorderImpact(et){var _e=et.draggable,tt=et.insideDestination,nt=et.destination,rt=et.viewport,it=et.displacedBy,ot=et.last,st=et.index,at=et.forceShouldAnimate,lt=isHomeOf(_e,nt);if(st==null)return goAtEnd({insideDestination:tt,inHomeList:lt,displacedBy:it,destination:nt});var ct=find(tt,function(mt){return mt.descriptor.index===st});if(!ct)return goAtEnd({insideDestination:tt,inHomeList:lt,displacedBy:it,destination:nt});var ut=removeDraggableFromList(_e,tt),dt=tt.indexOf(ct),ft=ut.slice(dt),pt=getDisplacementGroups({afterDragging:ft,destination:nt,displacedBy:it,last:ot,viewport:rt.frame,forceShouldAnimate:at});return{displaced:pt,displacedBy:it,at:{type:"REORDER",destination:{droppableId:nt.descriptor.id,index:st}}}}function didStartAfterCritical(et,_e){return!!_e.effected[et]}var fromCombine=function(et){var _e=et.isMovingForward,tt=et.destination,nt=et.draggables,rt=et.combine,it=et.afterCritical;if(!tt.isCombineEnabled)return null;var ot=rt.draggableId,st=nt[ot],at=st.descriptor.index,lt=didStartAfterCritical(ot,it);return lt?_e?at:at-1:_e?at+1:at},fromReorder=function(et){var _e=et.isMovingForward,tt=et.isInHomeList,nt=et.insideDestination,rt=et.location;if(!nt.length)return null;var it=rt.index,ot=_e?it+1:it-1,st=nt[0].descriptor.index,at=nt[nt.length-1].descriptor.index,lt=tt?at:at+1;return ot<st||ot>lt?null:ot},moveToNextIndex=function(et){var _e=et.isMovingForward,tt=et.isInHomeList,nt=et.draggable,rt=et.draggables,it=et.destination,ot=et.insideDestination,st=et.previousImpact,at=et.viewport,lt=et.afterCritical,ct=st.at;if(ct||invariant(!1),ct.type==="REORDER"){var ut=fromReorder({isMovingForward:_e,isInHomeList:tt,location:ct.destination,insideDestination:ot});return ut==null?null:calculateReorderImpact({draggable:nt,insideDestination:ot,destination:it,viewport:at,last:st.displaced,displacedBy:st.displacedBy,index:ut})}var dt=fromCombine({isMovingForward:_e,destination:it,displaced:st.displaced,draggables:rt,combine:ct.combine,afterCritical:lt});return dt==null?null:calculateReorderImpact({draggable:nt,insideDestination:ot,destination:it,viewport:at,last:st.displaced,displacedBy:st.displacedBy,index:dt})},getCombinedItemDisplacement=function(et){var _e=et.displaced,tt=et.afterCritical,nt=et.combineWith,rt=et.displacedBy,it=!!(_e.visible[nt]||_e.invisible[nt]);return didStartAfterCritical(nt,tt)?it?origin:negate(rt.point):it?rt.point:origin},whenCombining=function(et){var _e=et.afterCritical,tt=et.impact,nt=et.draggables,rt=tryGetCombine(tt);rt||invariant(!1);var it=rt.draggableId,ot=nt[it].page.borderBox.center,st=getCombinedItemDisplacement({displaced:tt.displaced,afterCritical:_e,combineWith:it,displacedBy:tt.displacedBy});return add(ot,st)},distanceFromStartToBorderBoxCenter=function et(_e,tt){return tt.margin[_e.start]+tt.borderBox[_e.size]/2},distanceFromEndToBorderBoxCenter=function et(_e,tt){return tt.margin[_e.end]+tt.borderBox[_e.size]/2},getCrossAxisBorderBoxCenter=function et(_e,tt,nt){return tt[_e.crossAxisStart]+nt.margin[_e.crossAxisStart]+nt.borderBox[_e.crossAxisSize]/2},goAfter=function et(_e){var tt=_e.axis,nt=_e.moveRelativeTo,rt=_e.isMoving;return patch(tt.line,nt.marginBox[tt.end]+distanceFromStartToBorderBoxCenter(tt,rt),getCrossAxisBorderBoxCenter(tt,nt.marginBox,rt))},goBefore=function et(_e){var tt=_e.axis,nt=_e.moveRelativeTo,rt=_e.isMoving;return patch(tt.line,nt.marginBox[tt.start]-distanceFromEndToBorderBoxCenter(tt,rt),getCrossAxisBorderBoxCenter(tt,nt.marginBox,rt))},goIntoStart=function et(_e){var tt=_e.axis,nt=_e.moveInto,rt=_e.isMoving;return patch(tt.line,nt.contentBox[tt.start]+distanceFromStartToBorderBoxCenter(tt,rt),getCrossAxisBorderBoxCenter(tt,nt.contentBox,rt))},whenReordering=function(et){var _e=et.impact,tt=et.draggable,nt=et.draggables,rt=et.droppable,it=et.afterCritical,ot=getDraggablesInsideDroppable(rt.descriptor.id,nt),st=tt.page,at=rt.axis;if(!ot.length)return goIntoStart({axis:at,moveInto:rt.page,isMoving:st});var lt=_e.displaced,ct=_e.displacedBy,ut=lt.all[0];if(ut){var dt=nt[ut];if(didStartAfterCritical(ut,it))return goBefore({axis:at,moveRelativeTo:dt.page,isMoving:st});var ft=offset(dt.page,ct.point);return goBefore({axis:at,moveRelativeTo:ft,isMoving:st})}var pt=ot[ot.length-1];if(pt.descriptor.id===tt.descriptor.id)return st.borderBox.center;if(didStartAfterCritical(pt.descriptor.id,it)){var mt=offset(pt.page,negate(it.displacedBy.point));return goAfter({axis:at,moveRelativeTo:mt,isMoving:st})}return goAfter({axis:at,moveRelativeTo:pt.page,isMoving:st})},withDroppableDisplacement=function(et,_e){var tt=et.frame;return tt?add(_e,tt.scroll.diff.displacement):_e},getResultWithoutDroppableDisplacement=function et(_e){var tt=_e.impact,nt=_e.draggable,rt=_e.droppable,it=_e.draggables,ot=_e.afterCritical,st=nt.page.borderBox.center,at=tt.at;return!rt||!at?st:at.type==="REORDER"?whenReordering({impact:tt,draggable:nt,draggables:it,droppable:rt,afterCritical:ot}):whenCombining({impact:tt,draggables:it,afterCritical:ot})},getPageBorderBoxCenterFromImpact=function(et){var _e=getResultWithoutDroppableDisplacement(et),tt=et.droppable,nt=tt?withDroppableDisplacement(tt,_e):_e;return nt},scrollViewport=function(et,_e){var tt=subtract(_e,et.scroll.initial),nt=negate(tt),rt=getRect({top:_e.y,bottom:_e.y+et.frame.height,left:_e.x,right:_e.x+et.frame.width}),it={frame:rt,scroll:{initial:et.scroll.initial,max:et.scroll.max,current:_e,diff:{value:tt,displacement:nt}}};return it};function getDraggables(et,_e){return et.map(function(tt){return _e[tt]})}function tryGetVisible(et,_e){for(var tt=0;tt<_e.length;tt++){var nt=_e[tt].visible[et];if(nt)return nt}return null}var speculativelyIncrease=function(et){var _e=et.impact,tt=et.viewport,nt=et.destination,rt=et.draggables,it=et.maxScrollChange,ot=scrollViewport(tt,add(tt.scroll.current,it)),st=nt.frame?scrollDroppable(nt,add(nt.frame.scroll.current,it)):nt,at=_e.displaced,lt=getDisplacementGroups({afterDragging:getDraggables(at.all,rt),destination:nt,displacedBy:_e.displacedBy,viewport:ot.frame,last:at,forceShouldAnimate:!1}),ct=getDisplacementGroups({afterDragging:getDraggables(at.all,rt),destination:st,displacedBy:_e.displacedBy,viewport:tt.frame,last:at,forceShouldAnimate:!1}),ut={},dt={},ft=[at,lt,ct];at.all.forEach(function(mt){var xt=tryGetVisible(mt,ft);if(xt){dt[mt]=xt;return}ut[mt]=!0});var pt=_extends$6({},_e,{displaced:{all:at.all,invisible:ut,visible:dt}});return pt},withViewportDisplacement=function(et,_e){return add(et.scroll.diff.displacement,_e)},getClientFromPageBorderBoxCenter=function(et){var _e=et.pageBorderBoxCenter,tt=et.draggable,nt=et.viewport,rt=withViewportDisplacement(nt,_e),it=subtract(rt,tt.page.borderBox.center);return add(tt.client.borderBox.center,it)},isTotallyVisibleInNewLocation=function(et){var _e=et.draggable,tt=et.destination,nt=et.newPageBorderBoxCenter,rt=et.viewport,it=et.withDroppableDisplacement,ot=et.onlyOnMainAxis,st=ot===void 0?!1:ot,at=subtract(nt,_e.page.borderBox.center),lt=offsetByPosition(_e.page.borderBox,at),ct={target:lt,destination:tt,withDroppableDisplacement:it,viewport:rt};return st?isTotallyVisibleOnAxis(ct):isTotallyVisible(ct)},moveToNextPlace=function(et){var _e=et.isMovingForward,tt=et.draggable,nt=et.destination,rt=et.draggables,it=et.previousImpact,ot=et.viewport,st=et.previousPageBorderBoxCenter,at=et.previousClientSelection,lt=et.afterCritical;if(!nt.isEnabled)return null;var ct=getDraggablesInsideDroppable(nt.descriptor.id,rt),ut=isHomeOf(tt,nt),dt=moveToNextCombine({isMovingForward:_e,draggable:tt,destination:nt,insideDestination:ct,previousImpact:it})||moveToNextIndex({isMovingForward:_e,isInHomeList:ut,draggable:tt,draggables:rt,destination:nt,insideDestination:ct,previousImpact:it,viewport:ot,afterCritical:lt});if(!dt)return null;var ft=getPageBorderBoxCenterFromImpact({impact:dt,draggable:tt,droppable:nt,draggables:rt,afterCritical:lt}),pt=isTotallyVisibleInNewLocation({draggable:tt,destination:nt,newPageBorderBoxCenter:ft,viewport:ot.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(pt){var mt=getClientFromPageBorderBoxCenter({pageBorderBoxCenter:ft,draggable:tt,viewport:ot});return{clientSelection:mt,impact:dt,scrollJumpRequest:null}}var xt=subtract(ft,st),gt=speculativelyIncrease({impact:dt,viewport:ot,destination:nt,draggables:rt,maxScrollChange:xt});return{clientSelection:at,impact:gt,scrollJumpRequest:xt}},getKnownActive=function et(_e){var tt=_e.subject.active;return tt||invariant(!1),tt},getBestCrossAxisDroppable=function(et){var _e=et.isMovingForward,tt=et.pageBorderBoxCenter,nt=et.source,rt=et.droppables,it=et.viewport,ot=nt.subject.active;if(!ot)return null;var st=nt.axis,at=isWithin(ot[st.start],ot[st.end]),lt=toDroppableList(rt).filter(function(ut){return ut!==nt}).filter(function(ut){return ut.isEnabled}).filter(function(ut){return!!ut.subject.active}).filter(function(ut){return isPartiallyVisibleThroughFrame(it.frame)(getKnownActive(ut))}).filter(function(ut){var dt=getKnownActive(ut);return _e?ot[st.crossAxisEnd]<dt[st.crossAxisEnd]:dt[st.crossAxisStart]<ot[st.crossAxisStart]}).filter(function(ut){var dt=getKnownActive(ut),ft=isWithin(dt[st.start],dt[st.end]);return at(dt[st.start])||at(dt[st.end])||ft(ot[st.start])||ft(ot[st.end])}).sort(function(ut,dt){var ft=getKnownActive(ut)[st.crossAxisStart],pt=getKnownActive(dt)[st.crossAxisStart];return _e?ft-pt:pt-ft}).filter(function(ut,dt,ft){return getKnownActive(ut)[st.crossAxisStart]===getKnownActive(ft[0])[st.crossAxisStart]});if(!lt.length)return null;if(lt.length===1)return lt[0];var ct=lt.filter(function(ut){var dt=isWithin(getKnownActive(ut)[st.start],getKnownActive(ut)[st.end]);return dt(tt[st.line])});return ct.length===1?ct[0]:ct.length>1?ct.sort(function(ut,dt){return getKnownActive(ut)[st.start]-getKnownActive(dt)[st.start]})[0]:lt.sort(function(ut,dt){var ft=closest(tt,getCorners(getKnownActive(ut))),pt=closest(tt,getCorners(getKnownActive(dt)));return ft!==pt?ft-pt:getKnownActive(ut)[st.start]-getKnownActive(dt)[st.start]})[0]},getCurrentPageBorderBoxCenter=function et(_e,tt){var nt=_e.page.borderBox.center;return didStartAfterCritical(_e.descriptor.id,tt)?subtract(nt,tt.displacedBy.point):nt},getCurrentPageBorderBox=function et(_e,tt){var nt=_e.page.borderBox;return didStartAfterCritical(_e.descriptor.id,tt)?offsetByPosition(nt,negate(tt.displacedBy.point)):nt},getClosestDraggable=function(et){var _e=et.pageBorderBoxCenter,tt=et.viewport,nt=et.destination,rt=et.insideDestination,it=et.afterCritical,ot=rt.filter(function(st){return isTotallyVisible({target:getCurrentPageBorderBox(st,it),destination:nt,viewport:tt.frame,withDroppableDisplacement:!0})}).sort(function(st,at){var lt=distance(_e,withDroppableDisplacement(nt,getCurrentPageBorderBoxCenter(st,it))),ct=distance(_e,withDroppableDisplacement(nt,getCurrentPageBorderBoxCenter(at,it)));return lt<ct?-1:ct<lt?1:st.descriptor.index-at.descriptor.index});return ot[0]||null},getDisplacedBy=memoizeOne(function et(_e,tt){var nt=tt[_e.line];return{value:nt,point:patch(_e.line,nt)}}),getRequiredGrowthForPlaceholder=function et(_e,tt,nt){var rt=_e.axis;if(_e.descriptor.mode==="virtual")return patch(rt.line,tt[rt.line]);var it=_e.subject.page.contentBox[rt.size],ot=getDraggablesInsideDroppable(_e.descriptor.id,nt),st=ot.reduce(function(ct,ut){return ct+ut.client.marginBox[rt.size]},0),at=st+tt[rt.line],lt=at-it;return lt<=0?null:patch(rt.line,lt)},withMaxScroll=function et(_e,tt){return _extends$6({},_e,{scroll:_extends$6({},_e.scroll,{max:tt})})},addPlaceholder=function et(_e,tt,nt){var rt=_e.frame;isHomeOf(tt,_e)&&invariant(!1),_e.subject.withPlaceholder&&invariant(!1);var it=getDisplacedBy(_e.axis,tt.displaceBy).point,ot=getRequiredGrowthForPlaceholder(_e,it,nt),st={placeholderSize:it,increasedBy:ot,oldFrameMaxScroll:_e.frame?_e.frame.scroll.max:null};if(!rt){var at=getSubject({page:_e.subject.page,withPlaceholder:st,axis:_e.axis,frame:_e.frame});return _extends$6({},_e,{subject:at})}var lt=ot?add(rt.scroll.max,ot):rt.scroll.max,ct=withMaxScroll(rt,lt),ut=getSubject({page:_e.subject.page,withPlaceholder:st,axis:_e.axis,frame:ct});return _extends$6({},_e,{subject:ut,frame:ct})},removePlaceholder=function et(_e){var tt=_e.subject.withPlaceholder;tt||invariant(!1);var nt=_e.frame;if(!nt){var rt=getSubject({page:_e.subject.page,axis:_e.axis,frame:null,withPlaceholder:null});return _extends$6({},_e,{subject:rt})}var it=tt.oldFrameMaxScroll;it||invariant(!1);var ot=withMaxScroll(nt,it),st=getSubject({page:_e.subject.page,axis:_e.axis,frame:ot,withPlaceholder:null});return _extends$6({},_e,{subject:st,frame:ot})},moveToNewDroppable=function(et){var _e=et.previousPageBorderBoxCenter,tt=et.moveRelativeTo,nt=et.insideDestination,rt=et.draggable,it=et.draggables,ot=et.destination,st=et.viewport,at=et.afterCritical;if(!tt){if(nt.length)return null;var lt={displaced:emptyGroups,displacedBy:noDisplacedBy,at:{type:"REORDER",destination:{droppableId:ot.descriptor.id,index:0}}},ct=getPageBorderBoxCenterFromImpact({impact:lt,draggable:rt,droppable:ot,draggables:it,afterCritical:at}),ut=isHomeOf(rt,ot)?ot:addPlaceholder(ot,rt,it),dt=isTotallyVisibleInNewLocation({draggable:rt,destination:ut,newPageBorderBoxCenter:ct,viewport:st.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return dt?lt:null}var ft=_e[ot.axis.line]<=tt.page.borderBox.center[ot.axis.line],pt=function(){var xt=tt.descriptor.index;return tt.descriptor.id===rt.descriptor.id||ft?xt:xt+1}(),mt=getDisplacedBy(ot.axis,rt.displaceBy);return calculateReorderImpact({draggable:rt,insideDestination:nt,destination:ot,viewport:st,displacedBy:mt,last:emptyGroups,index:pt})},moveCrossAxis=function(et){var _e=et.isMovingForward,tt=et.previousPageBorderBoxCenter,nt=et.draggable,rt=et.isOver,it=et.draggables,ot=et.droppables,st=et.viewport,at=et.afterCritical,lt=getBestCrossAxisDroppable({isMovingForward:_e,pageBorderBoxCenter:tt,source:rt,droppables:ot,viewport:st});if(!lt)return null;var ct=getDraggablesInsideDroppable(lt.descriptor.id,it),ut=getClosestDraggable({pageBorderBoxCenter:tt,viewport:st,destination:lt,insideDestination:ct,afterCritical:at}),dt=moveToNewDroppable({previousPageBorderBoxCenter:tt,destination:lt,draggable:nt,draggables:it,moveRelativeTo:ut,insideDestination:ct,viewport:st,afterCritical:at});if(!dt)return null;var ft=getPageBorderBoxCenterFromImpact({impact:dt,draggable:nt,droppable:lt,draggables:it,afterCritical:at}),pt=getClientFromPageBorderBoxCenter({pageBorderBoxCenter:ft,draggable:nt,viewport:st});return{clientSelection:pt,impact:dt,scrollJumpRequest:null}},whatIsDraggedOver=function(et){var _e=et.at;return _e?_e.type==="REORDER"?_e.destination.droppableId:_e.combine.droppableId:null},getDroppableOver=function et(_e,tt){var nt=whatIsDraggedOver(_e);return nt?tt[nt]:null},moveInDirection=function(et){var _e=et.state,tt=et.type,nt=getDroppableOver(_e.impact,_e.dimensions.droppables),rt=!!nt,it=_e.dimensions.droppables[_e.critical.droppable.id],ot=nt||it,st=ot.axis.direction,at=st==="vertical"&&(tt==="MOVE_UP"||tt==="MOVE_DOWN")||st==="horizontal"&&(tt==="MOVE_LEFT"||tt==="MOVE_RIGHT");if(at&&!rt)return null;var lt=tt==="MOVE_DOWN"||tt==="MOVE_RIGHT",ct=_e.dimensions.draggables[_e.critical.draggable.id],ut=_e.current.page.borderBoxCenter,dt=_e.dimensions,ft=dt.draggables,pt=dt.droppables;return at?moveToNextPlace({isMovingForward:lt,previousPageBorderBoxCenter:ut,draggable:ct,destination:ot,draggables:ft,viewport:_e.viewport,previousClientSelection:_e.current.client.selection,previousImpact:_e.impact,afterCritical:_e.afterCritical}):moveCrossAxis({isMovingForward:lt,previousPageBorderBoxCenter:ut,draggable:ct,isOver:ot,draggables:ft,droppables:pt,viewport:_e.viewport,afterCritical:_e.afterCritical})};function isMovementAllowed(et){return et.phase==="DRAGGING"||et.phase==="COLLECTING"}function isPositionInFrame(et){var _e=isWithin(et.top,et.bottom),tt=isWithin(et.left,et.right);return function(rt){return _e(rt.y)&&tt(rt.x)}}function getHasOverlap(et,_e){return et.left<_e.right&&et.right>_e.left&&et.top<_e.bottom&&et.bottom>_e.top}function getFurthestAway(et){var _e=et.pageBorderBox,tt=et.draggable,nt=et.candidates,rt=tt.page.borderBox.center,it=nt.map(function(ot){var st=ot.axis,at=patch(ot.axis.line,_e.center[st.line],ot.page.borderBox.center[st.crossAxisLine]);return{id:ot.descriptor.id,distance:distance(rt,at)}}).sort(function(ot,st){return st.distance-ot.distance});return it[0]?it[0].id:null}function getDroppableOver$1(et){var _e=et.pageBorderBox,tt=et.draggable,nt=et.droppables,rt=toDroppableList(nt).filter(function(it){if(!it.isEnabled)return!1;var ot=it.subject.active;if(!ot||!getHasOverlap(_e,ot))return!1;if(isPositionInFrame(ot)(_e.center))return!0;var st=it.axis,at=ot.center[st.crossAxisLine],lt=_e[st.crossAxisStart],ct=_e[st.crossAxisEnd],ut=isWithin(ot[st.crossAxisStart],ot[st.crossAxisEnd]),dt=ut(lt),ft=ut(ct);return!dt&&!ft?!0:dt?lt<at:ct>at});return rt.length?rt.length===1?rt[0].descriptor.id:getFurthestAway({pageBorderBox:_e,draggable:tt,candidates:rt}):null}var offsetRectByPosition=function et(_e,tt){return getRect(offsetByPosition(_e,tt))},withDroppableScroll=function(et,_e){var tt=et.frame;return tt?offsetRectByPosition(_e,tt.scroll.diff.value):_e};function getIsDisplaced(et){var _e=et.displaced,tt=et.id;return!!(_e.visible[tt]||_e.invisible[tt])}function atIndex(et){var _e=et.draggable,tt=et.closest,nt=et.inHomeList;return tt?nt&&tt.descriptor.index>_e.descriptor.index?tt.descriptor.index-1:tt.descriptor.index:null}var getReorderImpact=function(et){var _e=et.pageBorderBoxWithDroppableScroll,tt=et.draggable,nt=et.destination,rt=et.insideDestination,it=et.last,ot=et.viewport,st=et.afterCritical,at=nt.axis,lt=getDisplacedBy(nt.axis,tt.displaceBy),ct=lt.value,ut=_e[at.start],dt=_e[at.end],ft=removeDraggableFromList(tt,rt),pt=find(ft,function(xt){var gt=xt.descriptor.id,ht=xt.page.borderBox.center[at.line],yt=didStartAfterCritical(gt,st),vt=getIsDisplaced({displaced:it,id:gt});return yt?vt?dt<=ht:ut<ht-ct:vt?dt<=ht+ct:ut<ht}),mt=atIndex({draggable:tt,closest:pt,inHomeList:isHomeOf(tt,nt)});return calculateReorderImpact({draggable:tt,insideDestination:rt,destination:nt,viewport:ot,last:it,displacedBy:lt,index:mt})},combineThresholdDivisor=4,getCombineImpact=function(et){var _e=et.draggable,tt=et.pageBorderBoxWithDroppableScroll,nt=et.previousImpact,rt=et.destination,it=et.insideDestination,ot=et.afterCritical;if(!rt.isCombineEnabled)return null;var st=rt.axis,at=getDisplacedBy(rt.axis,_e.displaceBy),lt=at.value,ct=tt[st.start],ut=tt[st.end],dt=removeDraggableFromList(_e,it),ft=find(dt,function(mt){var xt=mt.descriptor.id,gt=mt.page.borderBox,ht=gt[st.size],yt=ht/combineThresholdDivisor,vt=didStartAfterCritical(xt,ot),_t=getIsDisplaced({displaced:nt.displaced,id:xt});return vt?_t?ut>gt[st.start]+yt&&ut<gt[st.end]-yt:ct>gt[st.start]-lt+yt&&ct<gt[st.end]-lt-yt:_t?ut>gt[st.start]+lt+yt&&ut<gt[st.end]+lt-yt:ct>gt[st.start]+yt&&ct<gt[st.end]-yt});if(!ft)return null;var pt={displacedBy:at,displaced:nt.displaced,at:{type:"COMBINE",combine:{draggableId:ft.descriptor.id,droppableId:rt.descriptor.id}}};return pt},getDragImpact=function(et){var _e=et.pageOffset,tt=et.draggable,nt=et.draggables,rt=et.droppables,it=et.previousImpact,ot=et.viewport,st=et.afterCritical,at=offsetRectByPosition(tt.page.borderBox,_e),lt=getDroppableOver$1({pageBorderBox:at,draggable:tt,droppables:rt});if(!lt)return noImpact;var ct=rt[lt],ut=getDraggablesInsideDroppable(ct.descriptor.id,nt),dt=withDroppableScroll(ct,at);return getCombineImpact({pageBorderBoxWithDroppableScroll:dt,draggable:tt,previousImpact:it,destination:ct,insideDestination:ut,afterCritical:st})||getReorderImpact({pageBorderBoxWithDroppableScroll:dt,draggable:tt,destination:ct,insideDestination:ut,last:it.displaced,viewport:ot,afterCritical:st})},patchDroppableMap=function(et,_e){var tt;return _extends$6({},et,(tt={},tt[_e.descriptor.id]=_e,tt))},clearUnusedPlaceholder=function et(_e){var tt=_e.previousImpact,nt=_e.impact,rt=_e.droppables,it=whatIsDraggedOver(tt),ot=whatIsDraggedOver(nt);if(!it||it===ot)return rt;var st=rt[it];if(!st.subject.withPlaceholder)return rt;var at=removePlaceholder(st);return patchDroppableMap(rt,at)},recomputePlaceholders=function(et){var _e=et.draggable,tt=et.draggables,nt=et.droppables,rt=et.previousImpact,it=et.impact,ot=clearUnusedPlaceholder({previousImpact:rt,impact:it,droppables:nt}),st=whatIsDraggedOver(it);if(!st)return ot;var at=nt[st];if(isHomeOf(_e,at)||at.subject.withPlaceholder)return ot;var lt=addPlaceholder(at,_e,tt);return patchDroppableMap(ot,lt)},update=function(et){var _e=et.state,tt=et.clientSelection,nt=et.dimensions,rt=et.viewport,it=et.impact,ot=et.scrollJumpRequest,st=rt||_e.viewport,at=nt||_e.dimensions,lt=tt||_e.current.client.selection,ct=subtract(lt,_e.initial.client.selection),ut={offset:ct,selection:lt,borderBoxCenter:add(_e.initial.client.borderBoxCenter,ct)},dt={selection:add(ut.selection,st.scroll.current),borderBoxCenter:add(ut.borderBoxCenter,st.scroll.current),offset:add(ut.offset,st.scroll.diff.value)},ft={client:ut,page:dt};if(_e.phase==="COLLECTING")return _extends$6({phase:"COLLECTING"},_e,{dimensions:at,viewport:st,current:ft});var pt=at.draggables[_e.critical.draggable.id],mt=it||getDragImpact({pageOffset:dt.offset,draggable:pt,draggables:at.draggables,droppables:at.droppables,previousImpact:_e.impact,viewport:st,afterCritical:_e.afterCritical}),xt=recomputePlaceholders({draggable:pt,impact:mt,previousImpact:_e.impact,draggables:at.draggables,droppables:at.droppables}),gt=_extends$6({},_e,{current:ft,dimensions:{draggables:at.draggables,droppables:xt},impact:mt,viewport:st,scrollJumpRequest:ot||null,forceShouldAnimate:ot?!1:null});return gt};function getDraggables$1(et,_e){return et.map(function(tt){return _e[tt]})}var recompute=function(et){var _e=et.impact,tt=et.viewport,nt=et.draggables,rt=et.destination,it=et.forceShouldAnimate,ot=_e.displaced,st=getDraggables$1(ot.all,nt),at=getDisplacementGroups({afterDragging:st,destination:rt,displacedBy:_e.displacedBy,viewport:tt.frame,forceShouldAnimate:it,last:ot});return _extends$6({},_e,{displaced:at})},getClientBorderBoxCenter=function(et){var _e=et.impact,tt=et.draggable,nt=et.droppable,rt=et.draggables,it=et.viewport,ot=et.afterCritical,st=getPageBorderBoxCenterFromImpact({impact:_e,draggable:tt,draggables:rt,droppable:nt,afterCritical:ot});return getClientFromPageBorderBoxCenter({pageBorderBoxCenter:st,draggable:tt,viewport:it})},refreshSnap=function(et){var _e=et.state,tt=et.dimensions,nt=et.viewport;_e.movementMode!=="SNAP"&&invariant(!1);var rt=_e.impact,it=nt||_e.viewport,ot=tt||_e.dimensions,st=ot.draggables,at=ot.droppables,lt=st[_e.critical.draggable.id],ct=whatIsDraggedOver(rt);ct||invariant(!1);var ut=at[ct],dt=recompute({impact:rt,viewport:it,destination:ut,draggables:st}),ft=getClientBorderBoxCenter({impact:dt,draggable:lt,droppable:ut,draggables:st,viewport:it,afterCritical:_e.afterCritical});return update({impact:dt,clientSelection:ft,state:_e,dimensions:ot,viewport:it})},getHomeLocation=function(et){return{index:et.index,droppableId:et.droppableId}},getLiftEffect=function(et){var _e=et.draggable,tt=et.home,nt=et.draggables,rt=et.viewport,it=getDisplacedBy(tt.axis,_e.displaceBy),ot=getDraggablesInsideDroppable(tt.descriptor.id,nt),st=ot.indexOf(_e);st===-1&&invariant(!1);var at=ot.slice(st+1),lt=at.reduce(function(ft,pt){return ft[pt.descriptor.id]=!0,ft},{}),ct={inVirtualList:tt.descriptor.mode==="virtual",displacedBy:it,effected:lt},ut=getDisplacementGroups({afterDragging:at,destination:tt,displacedBy:it,last:null,viewport:rt.frame,forceShouldAnimate:!1}),dt={displaced:ut,displacedBy:it,at:{type:"REORDER",destination:getHomeLocation(_e.descriptor)}};return{impact:dt,afterCritical:ct}},patchDimensionMap=function(et,_e){return{draggables:et.draggables,droppables:patchDroppableMap(et.droppables,_e)}},offsetDraggable=function(et){var _e=et.draggable,tt=et.offset,nt=et.initialWindowScroll,rt=offset(_e.client,tt),it=withScroll(rt,nt),ot=_extends$6({},_e,{placeholder:_extends$6({},_e.placeholder,{client:rt}),client:rt,page:it});return ot},getFrame=function(et){var _e=et.frame;return _e||invariant(!1),_e},adjustAdditionsForScrollChanges=function(et){var _e=et.additions,tt=et.updatedDroppables,nt=et.viewport,rt=nt.scroll.diff.value;return _e.map(function(it){var ot=it.descriptor.droppableId,st=tt[ot],at=getFrame(st),lt=at.scroll.diff.value,ct=add(rt,lt),ut=offsetDraggable({draggable:it,offset:ct,initialWindowScroll:nt.scroll.initial});return ut})},publishWhileDraggingInVirtual=function(et){var _e=et.state,tt=et.published,nt=tt.modified.map(function(yt){var vt=_e.dimensions.droppables[yt.droppableId],_t=scrollDroppable(vt,yt.scroll);return _t}),rt=_extends$6({},_e.dimensions.droppables,{},toDroppableMap(nt)),it=toDraggableMap(adjustAdditionsForScrollChanges({additions:tt.additions,updatedDroppables:rt,viewport:_e.viewport})),ot=_extends$6({},_e.dimensions.draggables,{},it);tt.removals.forEach(function(yt){delete ot[yt]});var st={droppables:rt,draggables:ot},at=whatIsDraggedOver(_e.impact),lt=at?st.droppables[at]:null,ct=st.draggables[_e.critical.draggable.id],ut=st.droppables[_e.critical.droppable.id],dt=getLiftEffect({draggable:ct,home:ut,draggables:ot,viewport:_e.viewport}),ft=dt.impact,pt=dt.afterCritical,mt=lt&&lt.isCombineEnabled?_e.impact:ft,xt=getDragImpact({pageOffset:_e.current.page.offset,draggable:st.draggables[_e.critical.draggable.id],draggables:st.draggables,droppables:st.droppables,previousImpact:mt,viewport:_e.viewport,afterCritical:pt}),gt=_extends$6({phase:"DRAGGING"},_e,{phase:"DRAGGING",impact:xt,onLiftImpact:ft,dimensions:st,afterCritical:pt,forceShouldAnimate:!1});if(_e.phase==="COLLECTING")return gt;var ht=_extends$6({phase:"DROP_PENDING"},gt,{phase:"DROP_PENDING",reason:_e.reason,isWaiting:!1});return ht},isSnapping=function et(_e){return _e.movementMode==="SNAP"},postDroppableChange=function et(_e,tt,nt){var rt=patchDimensionMap(_e.dimensions,tt);return!isSnapping(_e)||nt?update({state:_e,dimensions:rt}):refreshSnap({state:_e,dimensions:rt})};function removeScrollJumpRequest(et){return et.isDragging&&et.movementMode==="SNAP"?_extends$6({phase:"DRAGGING"},et,{scrollJumpRequest:null}):et}var idle={phase:"IDLE",completed:null,shouldFlush:!1},reducer=function(et,_e){if(et===void 0&&(et=idle),_e.type==="FLUSH")return _extends$6({},idle,{shouldFlush:!0});if(_e.type==="INITIAL_PUBLISH"){et.phase!=="IDLE"&&invariant(!1);var tt=_e.payload,nt=tt.critical,rt=tt.clientSelection,it=tt.viewport,ot=tt.dimensions,st=tt.movementMode,at=ot.draggables[nt.draggable.id],lt=ot.droppables[nt.droppable.id],ct={selection:rt,borderBoxCenter:at.client.borderBox.center,offset:origin},ut={client:ct,page:{selection:add(ct.selection,it.scroll.initial),borderBoxCenter:add(ct.selection,it.scroll.initial),offset:add(ct.selection,it.scroll.diff.value)}},dt=toDroppableList(ot.droppables).every(function(At){return!At.isFixedOnPage}),ft=getLiftEffect({draggable:at,home:lt,draggables:ot.draggables,viewport:it}),pt=ft.impact,mt=ft.afterCritical,xt={phase:"DRAGGING",isDragging:!0,critical:nt,movementMode:st,dimensions:ot,initial:ut,current:ut,isWindowScrollAllowed:dt,impact:pt,afterCritical:mt,onLiftImpact:pt,viewport:it,scrollJumpRequest:null,forceShouldAnimate:null};return xt}if(_e.type==="COLLECTION_STARTING"){if(et.phase==="COLLECTING"||et.phase==="DROP_PENDING")return et;et.phase!=="DRAGGING"&&invariant(!1);var gt=_extends$6({phase:"COLLECTING"},et,{phase:"COLLECTING"});return gt}if(_e.type==="PUBLISH_WHILE_DRAGGING")return et.phase==="COLLECTING"||et.phase==="DROP_PENDING"||invariant(!1),publishWhileDraggingInVirtual({state:et,published:_e.payload});if(_e.type==="MOVE"){if(et.phase==="DROP_PENDING")return et;isMovementAllowed(et)||invariant(!1);var ht=_e.payload.client;return isEqual(ht,et.current.client.selection)?et:update({state:et,clientSelection:ht,impact:isSnapping(et)?et.impact:null})}if(_e.type==="UPDATE_DROPPABLE_SCROLL"){if(et.phase==="DROP_PENDING"||et.phase==="COLLECTING")return removeScrollJumpRequest(et);isMovementAllowed(et)||invariant(!1);var yt=_e.payload,vt=yt.id,_t=yt.newScroll,Et=et.dimensions.droppables[vt];if(!Et)return et;var bt=scrollDroppable(Et,_t);return postDroppableChange(et,bt,!1)}if(_e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(et.phase==="DROP_PENDING")return et;isMovementAllowed(et)||invariant(!1);var St=_e.payload,wt=St.id,Rt=St.isEnabled,Nt=et.dimensions.droppables[wt];Nt||invariant(!1),Nt.isEnabled===Rt&&invariant(!1);var kt=_extends$6({},Nt,{isEnabled:Rt});return postDroppableChange(et,kt,!0)}if(_e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(et.phase==="DROP_PENDING")return et;isMovementAllowed(et)||invariant(!1);var Pt=_e.payload,jt=Pt.id,Wt=Pt.isCombineEnabled,Ht=et.dimensions.droppables[jt];Ht||invariant(!1),Ht.isCombineEnabled===Wt&&invariant(!1);var tn=_extends$6({},Ht,{isCombineEnabled:Wt});return postDroppableChange(et,tn,!0)}if(_e.type==="MOVE_BY_WINDOW_SCROLL"){if(et.phase==="DROP_PENDING"||et.phase==="DROP_ANIMATING")return et;isMovementAllowed(et)||invariant(!1),et.isWindowScrollAllowed||invariant(!1);var Ot=_e.payload.newScroll;if(isEqual(et.viewport.scroll.current,Ot))return removeScrollJumpRequest(et);var Lt=scrollViewport(et.viewport,Ot);return isSnapping(et)?refreshSnap({state:et,viewport:Lt}):update({state:et,viewport:Lt})}if(_e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!isMovementAllowed(et))return et;var Mt=_e.payload.maxScroll;if(isEqual(Mt,et.viewport.scroll.max))return et;var Jt=_extends$6({},et.viewport,{scroll:_extends$6({},et.viewport.scroll,{max:Mt})});return _extends$6({phase:"DRAGGING"},et,{viewport:Jt})}if(_e.type==="MOVE_UP"||_e.type==="MOVE_DOWN"||_e.type==="MOVE_LEFT"||_e.type==="MOVE_RIGHT"){if(et.phase==="COLLECTING"||et.phase==="DROP_PENDING")return et;et.phase!=="DRAGGING"&&invariant(!1);var qt=moveInDirection({state:et,type:_e.type});return qt?update({state:et,impact:qt.impact,clientSelection:qt.clientSelection,scrollJumpRequest:qt.scrollJumpRequest}):et}if(_e.type==="DROP_PENDING"){var on=_e.payload.reason;et.phase!=="COLLECTING"&&invariant(!1);var Kt=_extends$6({phase:"DROP_PENDING"},et,{phase:"DROP_PENDING",isWaiting:!0,reason:on});return Kt}if(_e.type==="DROP_ANIMATE"){var Qt=_e.payload,sn=Qt.completed,hn=Qt.dropDuration,nn=Qt.newHomeClientOffset;et.phase==="DRAGGING"||et.phase==="DROP_PENDING"||invariant(!1);var It={phase:"DROP_ANIMATING",completed:sn,dropDuration:hn,newHomeClientOffset:nn,dimensions:et.dimensions};return It}if(_e.type==="DROP_COMPLETE"){var Tt=_e.payload.completed;return{phase:"IDLE",completed:Tt,shouldFlush:!1}}return et},beforeInitialCapture=function et(_e){return{type:"BEFORE_INITIAL_CAPTURE",payload:_e}},lift=function et(_e){return{type:"LIFT",payload:_e}},initialPublish=function et(_e){return{type:"INITIAL_PUBLISH",payload:_e}},publishWhileDragging=function et(_e){return{type:"PUBLISH_WHILE_DRAGGING",payload:_e}},collectionStarting=function et(){return{type:"COLLECTION_STARTING",payload:null}},updateDroppableScroll=function et(_e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:_e}},updateDroppableIsEnabled=function et(_e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:_e}},updateDroppableIsCombineEnabled=function et(_e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:_e}},move=function et(_e){return{type:"MOVE",payload:_e}},moveByWindowScroll=function et(_e){return{type:"MOVE_BY_WINDOW_SCROLL",payload:_e}},updateViewportMaxScroll=function et(_e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:_e}},moveUp=function et(){return{type:"MOVE_UP",payload:null}},moveDown=function et(){return{type:"MOVE_DOWN",payload:null}},moveRight=function et(){return{type:"MOVE_RIGHT",payload:null}},moveLeft=function et(){return{type:"MOVE_LEFT",payload:null}},flush=function et(){return{type:"FLUSH",payload:null}},animateDrop=function et(_e){return{type:"DROP_ANIMATE",payload:_e}},completeDrop=function et(_e){return{type:"DROP_COMPLETE",payload:_e}},drop=function et(_e){return{type:"DROP",payload:_e}},dropPending=function et(_e){return{type:"DROP_PENDING",payload:_e}},dropAnimationFinished=function et(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},lift$1=function(et){return function(_e){var tt=_e.getState,nt=_e.dispatch;return function(rt){return function(it){if(it.type!=="LIFT"){rt(it);return}var ot=it.payload,st=ot.id,at=ot.clientSelection,lt=ot.movementMode,ct=tt();ct.phase==="DROP_ANIMATING"&&nt(completeDrop({completed:ct.completed})),tt().phase!=="IDLE"&&invariant(!1),nt(flush()),nt(beforeInitialCapture({draggableId:st,movementMode:lt}));var ut={shouldPublishImmediately:lt==="SNAP"},dt={draggableId:st,scrollOptions:ut},ft=et.startPublishing(dt),pt=ft.critical,mt=ft.dimensions,xt=ft.viewport;nt(initialPublish({critical:pt,dimensions:mt,clientSelection:at,movementMode:lt,viewport:xt}))}}}},style=function(et){return function(){return function(_e){return function(tt){tt.type==="INITIAL_PUBLISH"&&et.dragging(),tt.type==="DROP_ANIMATE"&&et.dropping(tt.payload.completed.result.reason),(tt.type==="FLUSH"||tt.type==="DROP_COMPLETE")&&et.resting(),_e(tt)}}}},curves={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},combine={opacity:{drop:0,combining:.7},scale:{drop:.75}},timings={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},outOfTheWayTiming=timings.outOfTheWay+"s "+curves.outOfTheWay,transitions={fluid:"opacity "+outOfTheWayTiming,snap:"transform "+outOfTheWayTiming+", opacity "+outOfTheWayTiming,drop:function et(_e){var tt=_e+"s "+curves.drop;return"transform "+tt+", opacity "+tt},outOfTheWay:"transform "+outOfTheWayTiming,placeholder:"height "+outOfTheWayTiming+", width "+outOfTheWayTiming+", margin "+outOfTheWayTiming},moveTo=function et(_e){return isEqual(_e,origin)?null:"translate("+_e.x+"px, "+_e.y+"px)"},transforms={moveTo,drop:function et(_e,tt){var nt=moveTo(_e);return nt?tt?nt+" scale("+combine.scale.drop+")":nt:null}},minDropTime=timings.minDropTime,maxDropTime=timings.maxDropTime,dropTimeRange=maxDropTime-minDropTime,maxDropTimeAtDistance=1500,cancelDropModifier=.6,getDropDuration=function(et){var _e=et.current,tt=et.destination,nt=et.reason,rt=distance(_e,tt);if(rt<=0)return minDropTime;if(rt>=maxDropTimeAtDistance)return maxDropTime;var it=rt/maxDropTimeAtDistance,ot=minDropTime+dropTimeRange*it,st=nt==="CANCEL"?ot*cancelDropModifier:ot;return Number(st.toFixed(2))},getNewHomeClientOffset=function(et){var _e=et.impact,tt=et.draggable,nt=et.dimensions,rt=et.viewport,it=et.afterCritical,ot=nt.draggables,st=nt.droppables,at=whatIsDraggedOver(_e),lt=at?st[at]:null,ct=st[tt.descriptor.droppableId],ut=getClientBorderBoxCenter({impact:_e,draggable:tt,draggables:ot,afterCritical:it,droppable:lt||ct,viewport:rt}),dt=subtract(ut,tt.client.borderBox.center);return dt},getDropImpact=function(et){var _e=et.draggables,tt=et.reason,nt=et.lastImpact,rt=et.home,it=et.viewport,ot=et.onLiftImpact;if(!nt.at||tt!=="DROP"){var st=recompute({draggables:_e,impact:ot,destination:rt,viewport:it,forceShouldAnimate:!0});return{impact:st,didDropInsideDroppable:!1}}if(nt.at.type==="REORDER")return{impact:nt,didDropInsideDroppable:!0};var at=_extends$6({},nt,{displaced:emptyGroups});return{impact:at,didDropInsideDroppable:!0}},drop$1=function(et){var _e=et.getState,tt=et.dispatch;return function(nt){return function(rt){if(rt.type!=="DROP"){nt(rt);return}var it=_e(),ot=rt.payload.reason;if(it.phase==="COLLECTING"){tt(dropPending({reason:ot}));return}if(it.phase!=="IDLE"){var st=it.phase==="DROP_PENDING"&&it.isWaiting;st&&invariant(!1),it.phase==="DRAGGING"||it.phase==="DROP_PENDING"||invariant(!1);var at=it.critical,lt=it.dimensions,ct=lt.draggables[it.critical.draggable.id],ut=getDropImpact({reason:ot,lastImpact:it.impact,afterCritical:it.afterCritical,onLiftImpact:it.onLiftImpact,home:it.dimensions.droppables[it.critical.droppable.id],viewport:it.viewport,draggables:it.dimensions.draggables}),dt=ut.impact,ft=ut.didDropInsideDroppable,pt=ft?tryGetDestination(dt):null,mt=ft?tryGetCombine(dt):null,xt={index:at.draggable.index,droppableId:at.droppable.id},gt={draggableId:ct.descriptor.id,type:ct.descriptor.type,source:xt,reason:ot,mode:it.movementMode,destination:pt,combine:mt},ht=getNewHomeClientOffset({impact:dt,draggable:ct,dimensions:lt,viewport:it.viewport,afterCritical:it.afterCritical}),yt={critical:it.critical,afterCritical:it.afterCritical,result:gt,impact:dt},vt=!isEqual(it.current.client.offset,ht)||!!gt.combine;if(!vt){tt(completeDrop({completed:yt}));return}var _t=getDropDuration({current:it.current.client.offset,destination:ht,reason:ot}),Et={newHomeClientOffset:ht,dropDuration:_t,completed:yt};tt(animateDrop(Et))}}}},getWindowScroll=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function getWindowScrollBinding(et){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(tt){tt.target!==window&&tt.target!==window.document||et()}}}function getScrollListener(et){var _e=et.onWindowScroll;function tt(){_e(getWindowScroll())}var nt=rafSchd(tt),rt=getWindowScrollBinding(nt),it=noop;function ot(){return it!==noop}function st(){ot()&&invariant(!1),it=bindEvents(window,[rt])}function at(){ot()||invariant(!1),nt.cancel(),it(),it=noop}return{start:st,stop:at,isActive:ot}}var shouldEnd=function et(_e){return _e.type==="DROP_COMPLETE"||_e.type==="DROP_ANIMATE"||_e.type==="FLUSH"},scrollListener=function(et){var _e=getScrollListener({onWindowScroll:function(nt){et.dispatch(moveByWindowScroll({newScroll:nt}))}});return function(tt){return function(nt){!_e.isActive()&&nt.type==="INITIAL_PUBLISH"&&_e.start(),_e.isActive()&&shouldEnd(nt)&&_e.stop(),tt(nt)}}},getExpiringAnnounce=function(et){var _e=!1,tt=!1,nt=setTimeout(function(){tt=!0}),rt=function(ot){_e||tt||(_e=!0,et(ot),clearTimeout(nt))};return rt.wasCalled=function(){return _e},rt},getAsyncMarshal=function(){var et=[],_e=function(it){var ot=findIndex(et,function(lt){return lt.timerId===it});ot===-1&&invariant(!1);var st=et.splice(ot,1),at=st[0];at.callback()},tt=function(it){var ot=setTimeout(function(){return _e(ot)}),st={timerId:ot,callback:it};et.push(st)},nt=function(){if(et.length){var it=[].concat(et);et.length=0,it.forEach(function(ot){clearTimeout(ot.timerId),ot.callback()})}};return{add:tt,flush:nt}},areLocationsEqual=function et(_e,tt){return _e==null&&tt==null?!0:_e==null||tt==null?!1:_e.droppableId===tt.droppableId&&_e.index===tt.index},isCombineEqual=function et(_e,tt){return _e==null&&tt==null?!0:_e==null||tt==null?!1:_e.draggableId===tt.draggableId&&_e.droppableId===tt.droppableId},isCriticalEqual=function et(_e,tt){if(_e===tt)return!0;var nt=_e.draggable.id===tt.draggable.id&&_e.draggable.droppableId===tt.draggable.droppableId&&_e.draggable.type===tt.draggable.type&&_e.draggable.index===tt.draggable.index,rt=_e.droppable.id===tt.droppable.id&&_e.droppable.type===tt.droppable.type;return nt&&rt},withTimings=function et(_e,tt){tt()},getDragStart=function et(_e,tt){return{draggableId:_e.draggable.id,type:_e.droppable.type,source:{droppableId:_e.droppable.id,index:_e.draggable.index},mode:tt}},execute=function et(_e,tt,nt,rt){if(!_e){nt(rt(tt));return}var it=getExpiringAnnounce(nt),ot={announce:it};_e(tt,ot),it.wasCalled()||nt(rt(tt))},getPublisher=function(et,_e){var tt=getAsyncMarshal(),nt=null,rt=function(dt,ft){nt&&invariant(!1),withTimings("onBeforeCapture",function(){var pt=et().onBeforeCapture;if(pt){var mt={draggableId:dt,mode:ft};pt(mt)}})},it=function(dt,ft){nt&&invariant(!1),withTimings("onBeforeDragStart",function(){var pt=et().onBeforeDragStart;pt&&pt(getDragStart(dt,ft))})},ot=function(dt,ft){nt&&invariant(!1);var pt=getDragStart(dt,ft);nt={mode:ft,lastCritical:dt,lastLocation:pt.source,lastCombine:null},tt.add(function(){withTimings("onDragStart",function(){return execute(et().onDragStart,pt,_e,preset.onDragStart)})})},st=function(dt,ft){var pt=tryGetDestination(ft),mt=tryGetCombine(ft);nt||invariant(!1);var xt=!isCriticalEqual(dt,nt.lastCritical);xt&&(nt.lastCritical=dt);var gt=!areLocationsEqual(nt.lastLocation,pt);gt&&(nt.lastLocation=pt);var ht=!isCombineEqual(nt.lastCombine,mt);if(ht&&(nt.lastCombine=mt),!(!xt&&!gt&&!ht)){var yt=_extends$6({},getDragStart(dt,nt.mode),{combine:mt,destination:pt});tt.add(function(){withTimings("onDragUpdate",function(){return execute(et().onDragUpdate,yt,_e,preset.onDragUpdate)})})}},at=function(){nt||invariant(!1),tt.flush()},lt=function(dt){nt||invariant(!1),nt=null,withTimings("onDragEnd",function(){return execute(et().onDragEnd,dt,_e,preset.onDragEnd)})},ct=function(){if(nt){var dt=_extends$6({},getDragStart(nt.lastCritical,nt.mode),{combine:null,destination:null,reason:"CANCEL"});lt(dt)}};return{beforeCapture:rt,beforeStart:it,start:ot,update:st,flush:at,drop:lt,abort:ct}},responders=function(et,_e){var tt=getPublisher(et,_e);return function(nt){return function(rt){return function(it){if(it.type==="BEFORE_INITIAL_CAPTURE"){tt.beforeCapture(it.payload.draggableId,it.payload.movementMode);return}if(it.type==="INITIAL_PUBLISH"){var ot=it.payload.critical;tt.beforeStart(ot,it.payload.movementMode),rt(it),tt.start(ot,it.payload.movementMode);return}if(it.type==="DROP_COMPLETE"){var st=it.payload.completed.result;tt.flush(),rt(it),tt.drop(st);return}if(rt(it),it.type==="FLUSH"){tt.abort();return}var at=nt.getState();at.phase==="DRAGGING"&&tt.update(at.critical,at.impact)}}}},dropAnimationFinish=function(et){return function(_e){return function(tt){if(tt.type!=="DROP_ANIMATION_FINISHED"){_e(tt);return}var nt=et.getState();nt.phase!=="DROP_ANIMATING"&&invariant(!1),et.dispatch(completeDrop({completed:nt.completed}))}}},dropAnimationFlushOnScroll=function(et){var _e=null,tt=null;function nt(){tt&&(cancelAnimationFrame(tt),tt=null),_e&&(_e(),_e=null)}return function(rt){return function(it){if((it.type==="FLUSH"||it.type==="DROP_COMPLETE"||it.type==="DROP_ANIMATION_FINISHED")&&nt(),rt(it),it.type==="DROP_ANIMATE"){var ot={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var at=et.getState();at.phase==="DROP_ANIMATING"&&et.dispatch(dropAnimationFinished())}};tt=requestAnimationFrame(function(){tt=null,_e=bindEvents(window,[ot])})}}}},dimensionMarshalStopper=function(et){return function(){return function(_e){return function(tt){(tt.type==="DROP_COMPLETE"||tt.type==="FLUSH"||tt.type==="DROP_ANIMATE")&&et.stopPublishing(),_e(tt)}}}},focus=function(et){var _e=!1;return function(){return function(tt){return function(nt){if(nt.type==="INITIAL_PUBLISH"){_e=!0,et.tryRecordFocus(nt.payload.critical.draggable.id),tt(nt),et.tryRestoreFocusRecorded();return}if(tt(nt),!!_e){if(nt.type==="FLUSH"){_e=!1,et.tryRestoreFocusRecorded();return}if(nt.type==="DROP_COMPLETE"){_e=!1;var rt=nt.payload.completed.result;rt.combine&&et.tryShiftRecord(rt.draggableId,rt.combine.draggableId),et.tryRestoreFocusRecorded()}}}}}},shouldStop=function et(_e){return _e.type==="DROP_COMPLETE"||_e.type==="DROP_ANIMATE"||_e.type==="FLUSH"},autoScroll=function(et){return function(_e){return function(tt){return function(nt){if(shouldStop(nt)){et.stop(),tt(nt);return}if(nt.type==="INITIAL_PUBLISH"){tt(nt);var rt=_e.getState();rt.phase!=="DRAGGING"&&invariant(!1),et.start(rt);return}tt(nt),et.scroll(_e.getState())}}}},pendingDrop=function(et){return function(_e){return function(tt){if(_e(tt),tt.type==="PUBLISH_WHILE_DRAGGING"){var nt=et.getState();nt.phase==="DROP_PENDING"&&(nt.isWaiting||et.dispatch(drop({reason:nt.reason})))}}}},composeEnhancers=compose,createStore=function(et){var _e=et.dimensionMarshal,tt=et.focusMarshal,nt=et.styleMarshal,rt=et.getResponders,it=et.announce,ot=et.autoScroller;return createStore$1(reducer,composeEnhancers(applyMiddleware(style(nt),dimensionMarshalStopper(_e),lift$1(_e),drop$1,dropAnimationFinish,dropAnimationFlushOnScroll,pendingDrop,autoScroll(ot),scrollListener,focus(tt),responders(rt,it))))},clean$1=function et(){return{additions:{},removals:{},modified:{}}};function createPublisher(et){var _e=et.registry,tt=et.callbacks,nt=clean$1(),rt=null,it=function(){rt||(tt.collectionStarting(),rt=requestAnimationFrame(function(){rt=null;var ct=nt,ut=ct.additions,dt=ct.removals,ft=ct.modified,pt=Object.keys(ut).map(function(gt){return _e.draggable.getById(gt).getDimension(origin)}).sort(function(gt,ht){return gt.descriptor.index-ht.descriptor.index}),mt=Object.keys(ft).map(function(gt){var ht=_e.droppable.getById(gt),yt=ht.callbacks.getScrollWhileDragging();return{droppableId:gt,scroll:yt}}),xt={additions:pt,removals:Object.keys(dt),modified:mt};nt=clean$1(),tt.publish(xt)}))},ot=function(ct){var ut=ct.descriptor.id;nt.additions[ut]=ct,nt.modified[ct.descriptor.droppableId]=!0,nt.removals[ut]&&delete nt.removals[ut],it()},st=function(ct){var ut=ct.descriptor;nt.removals[ut.id]=!0,nt.modified[ut.droppableId]=!0,nt.additions[ut.id]&&delete nt.additions[ut.id],it()},at=function(){rt&&(cancelAnimationFrame(rt),rt=null,nt=clean$1())};return{add:ot,remove:st,stop:at}}var getMaxScroll=function(et){var _e=et.scrollHeight,tt=et.scrollWidth,nt=et.height,rt=et.width,it=subtract({x:tt,y:_e},{x:rt,y:nt}),ot={x:Math.max(0,it.x),y:Math.max(0,it.y)};return ot},getDocumentElement=function(){var et=document.documentElement;return et||invariant(!1),et},getMaxWindowScroll=function(){var et=getDocumentElement(),_e=getMaxScroll({scrollHeight:et.scrollHeight,scrollWidth:et.scrollWidth,width:et.clientWidth,height:et.clientHeight});return _e},getViewport=function(){var et=getWindowScroll(),_e=getMaxWindowScroll(),tt=et.y,nt=et.x,rt=getDocumentElement(),it=rt.clientWidth,ot=rt.clientHeight,st=nt+it,at=tt+ot,lt=getRect({top:tt,left:nt,right:st,bottom:at}),ct={frame:lt,scroll:{initial:et,current:et,max:_e,diff:{value:origin,displacement:origin}}};return ct},getInitialPublish=function(et){var _e=et.critical,tt=et.scrollOptions,nt=et.registry,rt=getViewport(),it=rt.scroll.current,ot=_e.droppable,st=nt.droppable.getAllByType(ot.type).map(function(ut){return ut.callbacks.getDimensionAndWatchScroll(it,tt)}),at=nt.draggable.getAllByType(_e.draggable.type).map(function(ut){return ut.getDimension(it)}),lt={draggables:toDraggableMap(at),droppables:toDroppableMap(st)},ct={dimensions:lt,critical:_e,viewport:rt};return ct};function shouldPublishUpdate(et,_e,tt){if(tt.descriptor.id===_e.id||tt.descriptor.type!==_e.type)return!1;var nt=et.droppable.getById(tt.descriptor.droppableId);return nt.descriptor.mode==="virtual"}var createDimensionMarshal=function(et,_e){var tt=null,nt=createPublisher({callbacks:{publish:_e.publishWhileDragging,collectionStarting:_e.collectionStarting},registry:et}),rt=function(ft,pt){et.droppable.exists(ft)||invariant(!1),tt&&_e.updateDroppableIsEnabled({id:ft,isEnabled:pt})},it=function(ft,pt){tt&&(et.droppable.exists(ft)||invariant(!1),_e.updateDroppableIsCombineEnabled({id:ft,isCombineEnabled:pt}))},ot=function(ft,pt){tt&&(et.droppable.exists(ft)||invariant(!1),_e.updateDroppableScroll({id:ft,newScroll:pt}))},st=function(ft,pt){tt&&et.droppable.getById(ft).callbacks.scroll(pt)},at=function(){if(tt){nt.stop();var ft=tt.critical.droppable;et.droppable.getAllByType(ft.type).forEach(function(pt){return pt.callbacks.dragStopped()}),tt.unsubscribe(),tt=null}},lt=function(ft){tt||invariant(!1);var pt=tt.critical.draggable;ft.type==="ADDITION"&&shouldPublishUpdate(et,pt,ft.value)&&nt.add(ft.value),ft.type==="REMOVAL"&&shouldPublishUpdate(et,pt,ft.value)&&nt.remove(ft.value)},ct=function(ft){tt&&invariant(!1);var pt=et.draggable.getById(ft.draggableId),mt=et.droppable.getById(pt.descriptor.droppableId),xt={draggable:pt.descriptor,droppable:mt.descriptor},gt=et.subscribe(lt);return tt={critical:xt,unsubscribe:gt},getInitialPublish({critical:xt,registry:et,scrollOptions:ft.scrollOptions})},ut={updateDroppableIsEnabled:rt,updateDroppableIsCombineEnabled:it,scrollDroppable:st,updateDroppableScroll:ot,startPublishing:ct,stopPublishing:at};return ut},canStartDrag=function(et,_e){return et.phase==="IDLE"?!0:et.phase!=="DROP_ANIMATING"||et.completed.result.draggableId===_e?!1:et.completed.result.reason==="DROP"},scrollWindow=function(et){window.scrollBy(et.x,et.y)},getScrollableDroppables=memoizeOne(function(et){return toDroppableList(et).filter(function(_e){return!(!_e.isEnabled||!_e.frame)})}),getScrollableDroppableOver=function et(_e,tt){var nt=find(getScrollableDroppables(tt),function(rt){return rt.frame||invariant(!1),isPositionInFrame(rt.frame.pageMarginBox)(_e)});return nt},getBestScrollableDroppable=function(et){var _e=et.center,tt=et.destination,nt=et.droppables;if(tt){var rt=nt[tt];return rt.frame?rt:null}var it=getScrollableDroppableOver(_e,nt);return it},config={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function et(_e){return Math.pow(_e,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},getDistanceThresholds=function(et,_e){var tt=et[_e.size]*config.startFromPercentage,nt=et[_e.size]*config.maxScrollAtPercentage,rt={startScrollingFrom:tt,maxScrollValueAt:nt};return rt},getPercentage=function(et){var _e=et.startOfRange,tt=et.endOfRange,nt=et.current,rt=tt-_e;if(rt===0)return 0;var it=nt-_e,ot=it/rt;return ot},minScroll=1,getValueFromDistance=function(et,_e){if(et>_e.startScrollingFrom)return 0;if(et<=_e.maxScrollValueAt)return config.maxPixelScroll;if(et===_e.startScrollingFrom)return minScroll;var tt=getPercentage({startOfRange:_e.maxScrollValueAt,endOfRange:_e.startScrollingFrom,current:et}),nt=1-tt,rt=config.maxPixelScroll*config.ease(nt);return Math.ceil(rt)},accelerateAt=config.durationDampening.accelerateAt,stopAt=config.durationDampening.stopDampeningAt,dampenValueByTime=function(et,_e){var tt=_e,nt=stopAt,rt=Date.now(),it=rt-tt;if(it>=stopAt)return et;if(it<accelerateAt)return minScroll;var ot=getPercentage({startOfRange:accelerateAt,endOfRange:nt,current:it}),st=et*config.ease(ot);return Math.ceil(st)},getValue=function(et){var _e=et.distanceToEdge,tt=et.thresholds,nt=et.dragStartTime,rt=et.shouldUseTimeDampening,it=getValueFromDistance(_e,tt);return it===0?0:rt?Math.max(dampenValueByTime(it,nt),minScroll):it},getScrollOnAxis=function(et){var _e=et.container,tt=et.distanceToEdges,nt=et.dragStartTime,rt=et.axis,it=et.shouldUseTimeDampening,ot=getDistanceThresholds(_e,rt),st=tt[rt.end]<tt[rt.start];return st?getValue({distanceToEdge:tt[rt.end],thresholds:ot,dragStartTime:nt,shouldUseTimeDampening:it}):-1*getValue({distanceToEdge:tt[rt.start],thresholds:ot,dragStartTime:nt,shouldUseTimeDampening:it})},adjustForSizeLimits=function(et){var _e=et.container,tt=et.subject,nt=et.proposedScroll,rt=tt.height>_e.height,it=tt.width>_e.width;return!it&&!rt?nt:it&&rt?null:{x:it?0:nt.x,y:rt?0:nt.y}},clean$2=apply(function(et){return et===0?0:et}),getScroll=function(et){var _e=et.dragStartTime,tt=et.container,nt=et.subject,rt=et.center,it=et.shouldUseTimeDampening,ot={top:rt.y-tt.top,right:tt.right-rt.x,bottom:tt.bottom-rt.y,left:rt.x-tt.left},st=getScrollOnAxis({container:tt,distanceToEdges:ot,dragStartTime:_e,axis:vertical,shouldUseTimeDampening:it}),at=getScrollOnAxis({container:tt,distanceToEdges:ot,dragStartTime:_e,axis:horizontal,shouldUseTimeDampening:it}),lt=clean$2({x:at,y:st});if(isEqual(lt,origin))return null;var ct=adjustForSizeLimits({container:tt,subject:nt,proposedScroll:lt});return ct?isEqual(ct,origin)?null:ct:null},smallestSigned=apply(function(et){return et===0?0:et>0?1:-1}),getOverlap=function(){var et=function(tt,nt){return tt<0?tt:tt>nt?tt-nt:0};return function(_e){var tt=_e.current,nt=_e.max,rt=_e.change,it=add(tt,rt),ot={x:et(it.x,nt.x),y:et(it.y,nt.y)};return isEqual(ot,origin)?null:ot}}(),canPartiallyScroll=function et(_e){var tt=_e.max,nt=_e.current,rt=_e.change,it={x:Math.max(nt.x,tt.x),y:Math.max(nt.y,tt.y)},ot=smallestSigned(rt),st=getOverlap({max:it,current:nt,change:ot});return!st||ot.x!==0&&st.x===0||ot.y!==0&&st.y===0},canScrollWindow=function et(_e,tt){return canPartiallyScroll({current:_e.scroll.current,max:_e.scroll.max,change:tt})},getWindowOverlap=function et(_e,tt){if(!canScrollWindow(_e,tt))return null;var nt=_e.scroll.max,rt=_e.scroll.current;return getOverlap({current:rt,max:nt,change:tt})},canScrollDroppable=function et(_e,tt){var nt=_e.frame;return nt?canPartiallyScroll({current:nt.scroll.current,max:nt.scroll.max,change:tt}):!1},getDroppableOverlap=function et(_e,tt){var nt=_e.frame;return!nt||!canScrollDroppable(_e,tt)?null:getOverlap({current:nt.scroll.current,max:nt.scroll.max,change:tt})},getWindowScrollChange=function(et){var _e=et.viewport,tt=et.subject,nt=et.center,rt=et.dragStartTime,it=et.shouldUseTimeDampening,ot=getScroll({dragStartTime:rt,container:_e.frame,subject:tt,center:nt,shouldUseTimeDampening:it});return ot&&canScrollWindow(_e,ot)?ot:null},getDroppableScrollChange=function(et){var _e=et.droppable,tt=et.subject,nt=et.center,rt=et.dragStartTime,it=et.shouldUseTimeDampening,ot=_e.frame;if(!ot)return null;var st=getScroll({dragStartTime:rt,container:ot.pageMarginBox,subject:tt,center:nt,shouldUseTimeDampening:it});return st&&canScrollDroppable(_e,st)?st:null},scroll$1=function(et){var _e=et.state,tt=et.dragStartTime,nt=et.shouldUseTimeDampening,rt=et.scrollWindow,it=et.scrollDroppable,ot=_e.current.page.borderBoxCenter,st=_e.dimensions.draggables[_e.critical.draggable.id],at=st.page.marginBox;if(_e.isWindowScrollAllowed){var lt=_e.viewport,ct=getWindowScrollChange({dragStartTime:tt,viewport:lt,subject:at,center:ot,shouldUseTimeDampening:nt});if(ct){rt(ct);return}}var ut=getBestScrollableDroppable({center:ot,destination:whatIsDraggedOver(_e.impact),droppables:_e.dimensions.droppables});if(ut){var dt=getDroppableScrollChange({dragStartTime:tt,droppable:ut,subject:at,center:ot,shouldUseTimeDampening:nt});dt&&it(ut.descriptor.id,dt)}},createFluidScroller=function(et){var _e=et.scrollWindow,tt=et.scrollDroppable,nt=rafSchd(_e),rt=rafSchd(tt),it=null,ot=function(ct){it||invariant(!1);var ut=it,dt=ut.shouldUseTimeDampening,ft=ut.dragStartTime;scroll$1({state:ct,scrollWindow:nt,scrollDroppable:rt,dragStartTime:ft,shouldUseTimeDampening:dt})},st=function(ct){it&&invariant(!1);var ut=Date.now(),dt=!1,ft=function(){dt=!0};scroll$1({state:ct,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:ft,scrollDroppable:ft}),it={dragStartTime:ut,shouldUseTimeDampening:dt},dt&&ot(ct)},at=function(){it&&(nt.cancel(),rt.cancel(),it=null)};return{start:st,stop:at,scroll:ot}},createJumpScroller=function(et){var _e=et.move,tt=et.scrollDroppable,nt=et.scrollWindow,rt=function(lt,ct){var ut=add(lt.current.client.selection,ct);_e({client:ut})},it=function(lt,ct){if(!canScrollDroppable(lt,ct))return ct;var ut=getDroppableOverlap(lt,ct);if(!ut)return tt(lt.descriptor.id,ct),null;var dt=subtract(ct,ut);tt(lt.descriptor.id,dt);var ft=subtract(ct,dt);return ft},ot=function(lt,ct,ut){if(!lt||!canScrollWindow(ct,ut))return ut;var dt=getWindowOverlap(ct,ut);if(!dt)return nt(ut),null;var ft=subtract(ut,dt);nt(ft);var pt=subtract(ut,ft);return pt},st=function(lt){var ct=lt.scrollJumpRequest;if(ct){var ut=whatIsDraggedOver(lt.impact);ut||invariant(!1);var dt=it(lt.dimensions.droppables[ut],ct);if(dt){var ft=lt.viewport,pt=ot(lt.isWindowScrollAllowed,ft,dt);pt&&rt(lt,pt)}}};return st},createAutoScroller=function(et){var _e=et.scrollDroppable,tt=et.scrollWindow,nt=et.move,rt=createFluidScroller({scrollWindow:tt,scrollDroppable:_e}),it=createJumpScroller({move:nt,scrollWindow:tt,scrollDroppable:_e}),ot=function(lt){if(lt.phase==="DRAGGING"){if(lt.movementMode==="FLUID"){rt.scroll(lt);return}lt.scrollJumpRequest&&it(lt)}},st={scroll:ot,start:rt.start,stop:rt.stop};return st},prefix$1="data-rbd",dragHandle=function(){var et=prefix$1+"-drag-handle";return{base:et,draggableId:et+"-draggable-id",contextId:et+"-context-id"}}(),draggable=function(){var et=prefix$1+"-draggable";return{base:et,contextId:et+"-context-id",id:et+"-id"}}(),droppable=function(){var et=prefix$1+"-droppable";return{base:et,contextId:et+"-context-id",id:et+"-id"}}(),scrollContainer={contextId:prefix$1+"-scroll-container-context-id"},makeGetSelector=function et(_e){return function(tt){return"["+tt+'="'+_e+'"]'}},getStyles=function et(_e,tt){return _e.map(function(nt){var rt=nt.styles[tt];return rt?nt.selector+" { "+rt+" }":""}).join(" ")},noPointerEvents="pointer-events: none;",getStyles$1=function(et){var _e=makeGetSelector(et),tt=function(){var st=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:_e(dragHandle.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:st,dragging:noPointerEvents,dropAnimating:st}}}(),nt=function(){var st=`
      transition: `+transitions.outOfTheWay+`;
    `;return{selector:_e(draggable.contextId),styles:{dragging:st,dropAnimating:st,userCancel:st}}}(),rt={selector:_e(droppable.contextId),styles:{always:"overflow-anchor: none;"}},it={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},ot=[nt,tt,rt,it];return{always:getStyles(ot,"always"),resting:getStyles(ot,"resting"),dragging:getStyles(ot,"dragging"),dropAnimating:getStyles(ot,"dropAnimating"),userCancel:getStyles(ot,"userCancel")}},useIsomorphicLayoutEffect=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?reactExports.useLayoutEffect:reactExports.useEffect,getHead=function et(){var _e=document.querySelector("head");return _e||invariant(!1),_e},createStyleEl=function et(_e){var tt=document.createElement("style");return _e&&tt.setAttribute("nonce",_e),tt.type="text/css",tt};function useStyleMarshal(et,_e){var tt=useMemo(function(){return getStyles$1(et)},[et]),nt=reactExports.useRef(null),rt=reactExports.useRef(null),it=useCallback(memoizeOne(function(ut){var dt=rt.current;dt||invariant(!1),dt.textContent=ut}),[]),ot=useCallback(function(ut){var dt=nt.current;dt||invariant(!1),dt.textContent=ut},[]);useIsomorphicLayoutEffect(function(){!nt.current&&!rt.current||invariant(!1);var ut=createStyleEl(_e),dt=createStyleEl(_e);return nt.current=ut,rt.current=dt,ut.setAttribute(prefix$1+"-always",et),dt.setAttribute(prefix$1+"-dynamic",et),getHead().appendChild(ut),getHead().appendChild(dt),ot(tt.always),it(tt.resting),function(){var ft=function(mt){var xt=mt.current;xt||invariant(!1),getHead().removeChild(xt),mt.current=null};ft(nt),ft(rt)}},[_e,ot,it,tt.always,tt.resting,et]);var st=useCallback(function(){return it(tt.dragging)},[it,tt.dragging]),at=useCallback(function(ut){if(ut==="DROP"){it(tt.dropAnimating);return}it(tt.userCancel)},[it,tt.dropAnimating,tt.userCancel]),lt=useCallback(function(){rt.current&&it(tt.resting)},[it,tt.resting]),ct=useMemo(function(){return{dragging:st,dropping:at,resting:lt}},[st,at,lt]);return ct}var getWindowFromEl=function(et){return et&&et.ownerDocument?et.ownerDocument.defaultView:window};function isHtmlElement(et){return et instanceof getWindowFromEl(et).HTMLElement}function findDragHandle(et,_e){var tt="["+dragHandle.contextId+'="'+et+'"]',nt=toArray(document.querySelectorAll(tt));if(!nt.length)return null;var rt=find(nt,function(it){return it.getAttribute(dragHandle.draggableId)===_e});return!rt||!isHtmlElement(rt)?null:rt}function useFocusMarshal(et){var _e=reactExports.useRef({}),tt=reactExports.useRef(null),nt=reactExports.useRef(null),rt=reactExports.useRef(!1),it=useCallback(function(dt,ft){var pt={id:dt,focus:ft};return _e.current[dt]=pt,function(){var xt=_e.current,gt=xt[dt];gt!==pt&&delete xt[dt]}},[]),ot=useCallback(function(dt){var ft=findDragHandle(et,dt);ft&&ft!==document.activeElement&&ft.focus()},[et]),st=useCallback(function(dt,ft){tt.current===dt&&(tt.current=ft)},[]),at=useCallback(function(){nt.current||rt.current&&(nt.current=requestAnimationFrame(function(){nt.current=null;var dt=tt.current;dt&&ot(dt)}))},[ot]),lt=useCallback(function(dt){tt.current=null;var ft=document.activeElement;ft&&ft.getAttribute(dragHandle.draggableId)===dt&&(tt.current=dt)},[]);useIsomorphicLayoutEffect(function(){return rt.current=!0,function(){rt.current=!1;var dt=nt.current;dt&&cancelAnimationFrame(dt)}},[]);var ct=useMemo(function(){return{register:it,tryRecordFocus:lt,tryRestoreFocusRecorded:at,tryShiftRecord:st}},[it,lt,at,st]);return ct}function createRegistry(){var et={draggables:{},droppables:{}},_e=[];function tt(ut){return _e.push(ut),function(){var ft=_e.indexOf(ut);ft!==-1&&_e.splice(ft,1)}}function nt(ut){_e.length&&_e.forEach(function(dt){return dt(ut)})}function rt(ut){return et.draggables[ut]||null}function it(ut){var dt=rt(ut);return dt||invariant(!1),dt}var ot={register:function(dt){et.draggables[dt.descriptor.id]=dt,nt({type:"ADDITION",value:dt})},update:function(dt,ft){var pt=et.draggables[ft.descriptor.id];pt&&pt.uniqueId===dt.uniqueId&&(delete et.draggables[ft.descriptor.id],et.draggables[dt.descriptor.id]=dt)},unregister:function(dt){var ft=dt.descriptor.id,pt=rt(ft);pt&&dt.uniqueId===pt.uniqueId&&(delete et.draggables[ft],nt({type:"REMOVAL",value:dt}))},getById:it,findById:rt,exists:function(dt){return!!rt(dt)},getAllByType:function(dt){return values(et.draggables).filter(function(ft){return ft.descriptor.type===dt})}};function st(ut){return et.droppables[ut]||null}function at(ut){var dt=st(ut);return dt||invariant(!1),dt}var lt={register:function(dt){et.droppables[dt.descriptor.id]=dt},unregister:function(dt){var ft=st(dt.descriptor.id);ft&&dt.uniqueId===ft.uniqueId&&delete et.droppables[dt.descriptor.id]},getById:at,findById:st,exists:function(dt){return!!st(dt)},getAllByType:function(dt){return values(et.droppables).filter(function(ft){return ft.descriptor.type===dt})}};function ct(){et.draggables={},et.droppables={},_e.length=0}return{draggable:ot,droppable:lt,subscribe:tt,clean:ct}}function useRegistry(){var et=useMemo(createRegistry,[]);return reactExports.useEffect(function(){return function(){requestAnimationFrame(et.clean)}},[et]),et}var StoreContext=React.createContext(null),getBodyElement=function(){var et=document.body;return et||invariant(!1),et},visuallyHidden={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},getId=function et(_e){return"rbd-announcement-"+_e};function useAnnouncer(et){var _e=useMemo(function(){return getId(et)},[et]),tt=reactExports.useRef(null);reactExports.useEffect(function(){var it=document.createElement("div");return tt.current=it,it.id=_e,it.setAttribute("aria-live","assertive"),it.setAttribute("aria-atomic","true"),_extends$6(it.style,visuallyHidden),getBodyElement().appendChild(it),function(){setTimeout(function(){var at=getBodyElement();at.contains(it)&&at.removeChild(it),it===tt.current&&(tt.current=null)})}},[_e]);var nt=useCallback(function(rt){var it=tt.current;if(it){it.textContent=rt;return}},[]);return nt}var count=0,defaults={separator:"::"};function useUniqueId(et,_e){return _e===void 0&&(_e=defaults),useMemo(function(){return""+et+_e.separator+count++},[_e.separator,et])}function getElementId(et){var _e=et.contextId,tt=et.uniqueId;return"rbd-hidden-text-"+_e+"-"+tt}function useHiddenTextElement(et){var _e=et.contextId,tt=et.text,nt=useUniqueId("hidden-text",{separator:"-"}),rt=useMemo(function(){return getElementId({contextId:_e,uniqueId:nt})},[nt,_e]);return reactExports.useEffect(function(){var ot=document.createElement("div");return ot.id=rt,ot.textContent=tt,ot.style.display="none",getBodyElement().appendChild(ot),function(){var at=getBodyElement();at.contains(ot)&&at.removeChild(ot)}},[rt,tt]),rt}var AppContext=React.createContext(null);function usePrevious(et){var _e=reactExports.useRef(et);return reactExports.useEffect(function(){_e.current=et}),_e}function create(){var et=null;function _e(){return!!et}function tt(ot){return ot===et}function nt(ot){et&&invariant(!1);var st={abandon:ot};return et=st,st}function rt(){et||invariant(!1),et=null}function it(){et&&(et.abandon(),rt())}return{isClaimed:_e,isActive:tt,claim:nt,release:rt,tryAbandon:it}}var tab=9,enter=13,escape=27,space=32,pageUp=33,pageDown=34,end=35,home=36,arrowLeft=37,arrowUp=38,arrowRight=39,arrowDown=40,_preventedKeys,preventedKeys=(_preventedKeys={},_preventedKeys[enter]=!0,_preventedKeys[tab]=!0,_preventedKeys),preventStandardKeyEvents=function(et){preventedKeys[et.keyCode]&&et.preventDefault()},supportedEventName=function(){var et="visibilitychange";if(typeof document>"u")return et;var _e=[et,"ms"+et,"webkit"+et,"moz"+et,"o"+et],tt=find(_e,function(nt){return"on"+nt in document});return tt||et}(),primaryButton=0,sloppyClickThreshold=5;function isSloppyClickThresholdExceeded(et,_e){return Math.abs(_e.x-et.x)>=sloppyClickThreshold||Math.abs(_e.y-et.y)>=sloppyClickThreshold}var idle$1={type:"IDLE"};function getCaptureBindings(et){var _e=et.cancel,tt=et.completed,nt=et.getPhase,rt=et.setPhase;return[{eventName:"mousemove",fn:function(ot){var st=ot.button,at=ot.clientX,lt=ot.clientY;if(st===primaryButton){var ct={x:at,y:lt},ut=nt();if(ut.type==="DRAGGING"){ot.preventDefault(),ut.actions.move(ct);return}ut.type!=="PENDING"&&invariant(!1);var dt=ut.point;if(isSloppyClickThresholdExceeded(dt,ct)){ot.preventDefault();var ft=ut.actions.fluidLift(ct);rt({type:"DRAGGING",actions:ft})}}}},{eventName:"mouseup",fn:function(ot){var st=nt();if(st.type!=="DRAGGING"){_e();return}ot.preventDefault(),st.actions.drop({shouldBlockNextClick:!0}),tt()}},{eventName:"mousedown",fn:function(ot){nt().type==="DRAGGING"&&ot.preventDefault(),_e()}},{eventName:"keydown",fn:function(ot){var st=nt();if(st.type==="PENDING"){_e();return}if(ot.keyCode===escape){ot.preventDefault(),_e();return}preventStandardKeyEvents(ot)}},{eventName:"resize",fn:_e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){nt().type==="PENDING"&&_e()}},{eventName:"webkitmouseforcedown",fn:function(ot){var st=nt();if(st.type==="IDLE"&&invariant(!1),st.actions.shouldRespectForcePress()){_e();return}ot.preventDefault()}},{eventName:supportedEventName,fn:_e}]}function useMouseSensor(et){var _e=reactExports.useRef(idle$1),tt=reactExports.useRef(noop),nt=useMemo(function(){return{eventName:"mousedown",fn:function(ut){if(!ut.defaultPrevented&&ut.button===primaryButton&&!(ut.ctrlKey||ut.metaKey||ut.shiftKey||ut.altKey)){var dt=et.findClosestDraggableId(ut);if(dt){var ft=et.tryGetLock(dt,ot,{sourceEvent:ut});if(ft){ut.preventDefault();var pt={x:ut.clientX,y:ut.clientY};tt.current(),lt(ft,pt)}}}}}},[et]),rt=useMemo(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(ut){if(!ut.defaultPrevented){var dt=et.findClosestDraggableId(ut);if(dt){var ft=et.findOptionsForDraggable(dt);ft&&(ft.shouldRespectForcePress||et.canGetLock(dt)&&ut.preventDefault())}}}}},[et]),it=useCallback(function(){var ut={passive:!1,capture:!0};tt.current=bindEvents(window,[rt,nt],ut)},[rt,nt]),ot=useCallback(function(){var ct=_e.current;ct.type!=="IDLE"&&(_e.current=idle$1,tt.current(),it())},[it]),st=useCallback(function(){var ct=_e.current;ot(),ct.type==="DRAGGING"&&ct.actions.cancel({shouldBlockNextClick:!0}),ct.type==="PENDING"&&ct.actions.abort()},[ot]),at=useCallback(function(){var ut={capture:!0,passive:!1},dt=getCaptureBindings({cancel:st,completed:ot,getPhase:function(){return _e.current},setPhase:function(pt){_e.current=pt}});tt.current=bindEvents(window,dt,ut)},[st,ot]),lt=useCallback(function(ut,dt){_e.current.type!=="IDLE"&&invariant(!1),_e.current={type:"PENDING",point:dt,actions:ut},at()},[at]);useIsomorphicLayoutEffect(function(){return it(),function(){tt.current()}},[it])}var _scrollJumpKeys;function noop$1(){}var scrollJumpKeys=(_scrollJumpKeys={},_scrollJumpKeys[pageDown]=!0,_scrollJumpKeys[pageUp]=!0,_scrollJumpKeys[home]=!0,_scrollJumpKeys[end]=!0,_scrollJumpKeys);function getDraggingBindings(et,_e){function tt(){_e(),et.cancel()}function nt(){_e(),et.drop()}return[{eventName:"keydown",fn:function(it){if(it.keyCode===escape){it.preventDefault(),tt();return}if(it.keyCode===space){it.preventDefault(),nt();return}if(it.keyCode===arrowDown){it.preventDefault(),et.moveDown();return}if(it.keyCode===arrowUp){it.preventDefault(),et.moveUp();return}if(it.keyCode===arrowRight){it.preventDefault(),et.moveRight();return}if(it.keyCode===arrowLeft){it.preventDefault(),et.moveLeft();return}if(scrollJumpKeys[it.keyCode]){it.preventDefault();return}preventStandardKeyEvents(it)}},{eventName:"mousedown",fn:tt},{eventName:"mouseup",fn:tt},{eventName:"click",fn:tt},{eventName:"touchstart",fn:tt},{eventName:"resize",fn:tt},{eventName:"wheel",fn:tt,options:{passive:!0}},{eventName:supportedEventName,fn:tt}]}function useKeyboardSensor(et){var _e=reactExports.useRef(noop$1),tt=useMemo(function(){return{eventName:"keydown",fn:function(it){if(it.defaultPrevented||it.keyCode!==space)return;var ot=et.findClosestDraggableId(it);if(!ot)return;var st=et.tryGetLock(ot,ct,{sourceEvent:it});if(!st)return;it.preventDefault();var at=!0,lt=st.snapLift();_e.current();function ct(){at||invariant(!1),at=!1,_e.current(),nt()}_e.current=bindEvents(window,getDraggingBindings(lt,ct),{capture:!0,passive:!1})}}},[et]),nt=useCallback(function(){var it={passive:!1,capture:!0};_e.current=bindEvents(window,[tt],it)},[tt]);useIsomorphicLayoutEffect(function(){return nt(),function(){_e.current()}},[nt])}var idle$2={type:"IDLE"},timeForLongPress=120,forcePressThreshold=.15;function getWindowBindings(et){var _e=et.cancel,tt=et.getPhase;return[{eventName:"orientationchange",fn:_e},{eventName:"resize",fn:_e},{eventName:"contextmenu",fn:function(rt){rt.preventDefault()}},{eventName:"keydown",fn:function(rt){if(tt().type!=="DRAGGING"){_e();return}rt.keyCode===escape&&rt.preventDefault(),_e()}},{eventName:supportedEventName,fn:_e}]}function getHandleBindings(et){var _e=et.cancel,tt=et.completed,nt=et.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(it){var ot=nt();if(ot.type!=="DRAGGING"){_e();return}ot.hasMoved=!0;var st=it.touches[0],at=st.clientX,lt=st.clientY,ct={x:at,y:lt};it.preventDefault(),ot.actions.move(ct)}},{eventName:"touchend",fn:function(it){var ot=nt();if(ot.type!=="DRAGGING"){_e();return}it.preventDefault(),ot.actions.drop({shouldBlockNextClick:!0}),tt()}},{eventName:"touchcancel",fn:function(it){if(nt().type!=="DRAGGING"){_e();return}it.preventDefault(),_e()}},{eventName:"touchforcechange",fn:function(it){var ot=nt();ot.type==="IDLE"&&invariant(!1);var st=it.touches[0];if(st){var at=st.force>=forcePressThreshold;if(at){var lt=ot.actions.shouldRespectForcePress();if(ot.type==="PENDING"){lt&&_e();return}if(lt){if(ot.hasMoved){it.preventDefault();return}_e();return}it.preventDefault()}}}},{eventName:supportedEventName,fn:_e}]}function useTouchSensor(et){var _e=reactExports.useRef(idle$2),tt=reactExports.useRef(noop),nt=useCallback(function(){return _e.current},[]),rt=useCallback(function(ft){_e.current=ft},[]),it=useMemo(function(){return{eventName:"touchstart",fn:function(ft){if(!ft.defaultPrevented){var pt=et.findClosestDraggableId(ft);if(pt){var mt=et.tryGetLock(pt,st,{sourceEvent:ft});if(mt){var xt=ft.touches[0],gt=xt.clientX,ht=xt.clientY,yt={x:gt,y:ht};tt.current(),ut(mt,yt)}}}}}},[et]),ot=useCallback(function(){var ft={capture:!0,passive:!1};tt.current=bindEvents(window,[it],ft)},[it]),st=useCallback(function(){var dt=_e.current;dt.type!=="IDLE"&&(dt.type==="PENDING"&&clearTimeout(dt.longPressTimerId),rt(idle$2),tt.current(),ot())},[ot,rt]),at=useCallback(function(){var dt=_e.current;st(),dt.type==="DRAGGING"&&dt.actions.cancel({shouldBlockNextClick:!0}),dt.type==="PENDING"&&dt.actions.abort()},[st]),lt=useCallback(function(){var ft={capture:!0,passive:!1},pt={cancel:at,completed:st,getPhase:nt},mt=bindEvents(window,getHandleBindings(pt),ft),xt=bindEvents(window,getWindowBindings(pt),ft);tt.current=function(){mt(),xt()}},[at,nt,st]),ct=useCallback(function(){var ft=nt();ft.type!=="PENDING"&&invariant(!1);var pt=ft.actions.fluidLift(ft.point);rt({type:"DRAGGING",actions:pt,hasMoved:!1})},[nt,rt]),ut=useCallback(function(ft,pt){nt().type!=="IDLE"&&invariant(!1);var mt=setTimeout(ct,timeForLongPress);rt({type:"PENDING",point:pt,actions:ft,longPressTimerId:mt}),lt()},[lt,nt,rt,ct]);useIsomorphicLayoutEffect(function(){return ot(),function(){tt.current();var pt=nt();pt.type==="PENDING"&&(clearTimeout(pt.longPressTimerId),rt(idle$2))}},[nt,ot,rt]),useIsomorphicLayoutEffect(function(){var ft=bindEvents(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return ft},[])}var interactiveTagNames={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function isAnInteractiveElement(et,_e){if(_e==null)return!1;var tt=!!interactiveTagNames[_e.tagName.toLowerCase()];if(tt)return!0;var nt=_e.getAttribute("contenteditable");return nt==="true"||nt===""?!0:_e===et?!1:isAnInteractiveElement(et,_e.parentElement)}function isEventInInteractiveElement(et,_e){var tt=_e.target;return isHtmlElement(tt)?isAnInteractiveElement(et,tt):!1}var getBorderBoxCenterPosition=function(et){return getRect(et.getBoundingClientRect()).center};function isElement(et){return et instanceof getWindowFromEl(et).Element}var supportedMatchesName=function(){var et="matches";if(typeof document>"u")return et;var _e=[et,"msMatchesSelector","webkitMatchesSelector"],tt=find(_e,function(nt){return nt in Element.prototype});return tt||et}();function closestPonyfill(et,_e){return et==null?null:et[supportedMatchesName](_e)?et:closestPonyfill(et.parentElement,_e)}function closest$1(et,_e){return et.closest?et.closest(_e):closestPonyfill(et,_e)}function getSelector(et){return"["+dragHandle.contextId+'="'+et+'"]'}function findClosestDragHandleFromEvent(et,_e){var tt=_e.target;if(!isElement(tt))return null;var nt=getSelector(et),rt=closest$1(tt,nt);return!rt||!isHtmlElement(rt)?null:rt}function tryGetClosestDraggableIdFromEvent(et,_e){var tt=findClosestDragHandleFromEvent(et,_e);return tt?tt.getAttribute(dragHandle.draggableId):null}function findDraggable(et,_e){var tt="["+draggable.contextId+'="'+et+'"]',nt=toArray(document.querySelectorAll(tt)),rt=find(nt,function(it){return it.getAttribute(draggable.id)===_e});return!rt||!isHtmlElement(rt)?null:rt}function preventDefault(et){et.preventDefault()}function _isActive(et){var _e=et.expected,tt=et.phase,nt=et.isLockActive;return et.shouldWarn,!(!nt()||_e!==tt)}function canStart(et){var _e=et.lockAPI,tt=et.store,nt=et.registry,rt=et.draggableId;if(_e.isClaimed())return!1;var it=nt.draggable.findById(rt);return!(!it||!it.options.isEnabled||!canStartDrag(tt.getState(),rt))}function tryStart(et){var _e=et.lockAPI,tt=et.contextId,nt=et.store,rt=et.registry,it=et.draggableId,ot=et.forceSensorStop,st=et.sourceEvent,at=canStart({lockAPI:_e,store:nt,registry:rt,draggableId:it});if(!at)return null;var lt=rt.draggable.getById(it),ct=findDraggable(tt,lt.descriptor.id);if(!ct||st&&!lt.options.canDragInteractiveElements&&isEventInInteractiveElement(ct,st))return null;var ut=_e.claim(ot||noop),dt="PRE_DRAG";function ft(){return lt.options.shouldRespectForcePress}function pt(){return _e.isActive(ut)}function mt(Et,bt){_isActive({expected:Et,phase:dt,isLockActive:pt,shouldWarn:!0})&&nt.dispatch(bt())}var xt=mt.bind(null,"DRAGGING");function gt(Et){function bt(){_e.release(),dt="COMPLETED"}dt!=="PRE_DRAG"&&(bt(),dt!=="PRE_DRAG"&&invariant(!1)),nt.dispatch(lift(Et.liftActionArgs)),dt="DRAGGING";function St(wt,Rt){if(Rt===void 0&&(Rt={shouldBlockNextClick:!1}),Et.cleanup(),Rt.shouldBlockNextClick){var Nt=bindEvents(window,[{eventName:"click",fn:preventDefault,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(Nt)}bt(),nt.dispatch(drop({reason:wt}))}return _extends$6({isActive:function(){return _isActive({expected:"DRAGGING",phase:dt,isLockActive:pt,shouldWarn:!1})},shouldRespectForcePress:ft,drop:function(Rt){return St("DROP",Rt)},cancel:function(Rt){return St("CANCEL",Rt)}},Et.actions)}function ht(Et){var bt=rafSchd(function(wt){xt(function(){return move({client:wt})})}),St=gt({liftActionArgs:{id:it,clientSelection:Et,movementMode:"FLUID"},cleanup:function(){return bt.cancel()},actions:{move:bt}});return _extends$6({},St,{move:bt})}function yt(){var Et={moveUp:function(){return xt(moveUp)},moveRight:function(){return xt(moveRight)},moveDown:function(){return xt(moveDown)},moveLeft:function(){return xt(moveLeft)}};return gt({liftActionArgs:{id:it,clientSelection:getBorderBoxCenterPosition(ct),movementMode:"SNAP"},cleanup:noop,actions:Et})}function vt(){var Et=_isActive({expected:"PRE_DRAG",phase:dt,isLockActive:pt,shouldWarn:!0});Et&&_e.release()}var _t={isActive:function(){return _isActive({expected:"PRE_DRAG",phase:dt,isLockActive:pt,shouldWarn:!1})},shouldRespectForcePress:ft,fluidLift:ht,snapLift:yt,abort:vt};return _t}var defaultSensors=[useMouseSensor,useKeyboardSensor,useTouchSensor];function useSensorMarshal(et){var _e=et.contextId,tt=et.store,nt=et.registry,rt=et.customSensors,it=et.enableDefaultSensors,ot=[].concat(it?defaultSensors:[],rt||[]),st=reactExports.useState(function(){return create()})[0],at=useCallback(function(ht,yt){ht.isDragging&&!yt.isDragging&&st.tryAbandon()},[st]);useIsomorphicLayoutEffect(function(){var ht=tt.getState(),yt=tt.subscribe(function(){var vt=tt.getState();at(ht,vt),ht=vt});return yt},[st,tt,at]),useIsomorphicLayoutEffect(function(){return st.tryAbandon},[st.tryAbandon]);for(var lt=useCallback(function(gt){return canStart({lockAPI:st,registry:nt,store:tt,draggableId:gt})},[st,nt,tt]),ct=useCallback(function(gt,ht,yt){return tryStart({lockAPI:st,registry:nt,contextId:_e,store:tt,draggableId:gt,forceSensorStop:ht,sourceEvent:yt&&yt.sourceEvent?yt.sourceEvent:null})},[_e,st,nt,tt]),ut=useCallback(function(gt){return tryGetClosestDraggableIdFromEvent(_e,gt)},[_e]),dt=useCallback(function(gt){var ht=nt.draggable.findById(gt);return ht?ht.options:null},[nt.draggable]),ft=useCallback(function(){st.isClaimed()&&(st.tryAbandon(),tt.getState().phase!=="IDLE"&&tt.dispatch(flush()))},[st,tt]),pt=useCallback(st.isClaimed,[st]),mt=useMemo(function(){return{canGetLock:lt,tryGetLock:ct,findClosestDraggableId:ut,findOptionsForDraggable:dt,tryReleaseLock:ft,isLockClaimed:pt}},[lt,ct,ut,dt,ft,pt]),xt=0;xt<ot.length;xt++)ot[xt](mt)}var createResponders=function et(_e){return{onBeforeCapture:_e.onBeforeCapture,onBeforeDragStart:_e.onBeforeDragStart,onDragStart:_e.onDragStart,onDragEnd:_e.onDragEnd,onDragUpdate:_e.onDragUpdate}};function getStore(et){return et.current||invariant(!1),et.current}function App(et){var _e=et.contextId,tt=et.setCallbacks,nt=et.sensors,rt=et.nonce,it=et.dragHandleUsageInstructions,ot=reactExports.useRef(null),st=usePrevious(et),at=useCallback(function(){return createResponders(st.current)},[st]),lt=useAnnouncer(_e),ct=useHiddenTextElement({contextId:_e,text:it}),ut=useStyleMarshal(_e,rt),dt=useCallback(function(wt){getStore(ot).dispatch(wt)},[]),ft=useMemo(function(){return bindActionCreators$1({publishWhileDragging,updateDroppableScroll,updateDroppableIsEnabled,updateDroppableIsCombineEnabled,collectionStarting},dt)},[dt]),pt=useRegistry(),mt=useMemo(function(){return createDimensionMarshal(pt,ft)},[pt,ft]),xt=useMemo(function(){return createAutoScroller(_extends$6({scrollWindow,scrollDroppable:mt.scrollDroppable},bindActionCreators$1({move},dt)))},[mt.scrollDroppable,dt]),gt=useFocusMarshal(_e),ht=useMemo(function(){return createStore({announce:lt,autoScroller:xt,dimensionMarshal:mt,focusMarshal:gt,getResponders:at,styleMarshal:ut})},[lt,xt,mt,gt,at,ut]);ot.current=ht;var yt=useCallback(function(){var wt=getStore(ot),Rt=wt.getState();Rt.phase!=="IDLE"&&wt.dispatch(flush())},[]),vt=useCallback(function(){var wt=getStore(ot).getState();return wt.isDragging||wt.phase==="DROP_ANIMATING"},[]),_t=useMemo(function(){return{isDragging:vt,tryAbort:yt}},[vt,yt]);tt(_t);var Et=useCallback(function(wt){return canStartDrag(getStore(ot).getState(),wt)},[]),bt=useCallback(function(){return isMovementAllowed(getStore(ot).getState())},[]),St=useMemo(function(){return{marshal:mt,focus:gt,contextId:_e,canLift:Et,isMovementAllowed:bt,dragHandleUsageInstructionsId:ct,registry:pt}},[_e,mt,ct,gt,Et,bt,pt]);return useSensorMarshal({contextId:_e,store:ht,registry:pt,customSensors:nt,enableDefaultSensors:et.enableDefaultSensors!==!1}),reactExports.useEffect(function(){return yt},[yt]),React.createElement(AppContext.Provider,{value:St},React.createElement(Provider,{context:StoreContext,store:ht},et.children))}var count$1=0;function useInstanceCount(){return useMemo(function(){return""+count$1++},[])}function DragDropContext(et){var _e=useInstanceCount(),tt=et.dragHandleUsageInstructions||preset.dragHandleUsageInstructions;return React.createElement(ErrorBoundary,null,function(nt){return React.createElement(App,{nonce:et.nonce,contextId:_e,setCallbacks:nt,dragHandleUsageInstructions:tt,enableDefaultSensors:et.enableDefaultSensors,sensors:et.sensors,onBeforeCapture:et.onBeforeCapture,onBeforeDragStart:et.onBeforeDragStart,onDragStart:et.onDragStart,onDragUpdate:et.onDragUpdate,onDragEnd:et.onDragEnd},et.children)})}var isEqual$1=function et(_e){return function(tt){return _e===tt}},isScroll=isEqual$1("scroll"),isAuto=isEqual$1("auto"),isEither=function et(_e,tt){return tt(_e.overflowX)||tt(_e.overflowY)},isElementScrollable=function et(_e){var tt=window.getComputedStyle(_e),nt={overflowX:tt.overflowX,overflowY:tt.overflowY};return isEither(nt,isScroll)||isEither(nt,isAuto)},isBodyScrollable=function et(){return!1},getClosestScrollable=function et(_e){return _e==null?null:_e===document.body?isBodyScrollable()?_e:null:_e===document.documentElement?null:isElementScrollable(_e)?_e:et(_e.parentElement)},getScroll$1=function(et){return{x:et.scrollLeft,y:et.scrollTop}},getIsFixed=function et(_e){if(!_e)return!1;var tt=window.getComputedStyle(_e);return tt.position==="fixed"?!0:et(_e.parentElement)},getEnv=function(et){var _e=getClosestScrollable(et),tt=getIsFixed(et);return{closestScrollable:_e,isFixedOnPage:tt}},getDroppableDimension=function(et){var _e=et.descriptor,tt=et.isEnabled,nt=et.isCombineEnabled,rt=et.isFixedOnPage,it=et.direction,ot=et.client,st=et.page,at=et.closest,lt=function(){if(!at)return null;var ft=at.scrollSize,pt=at.client,mt=getMaxScroll({scrollHeight:ft.scrollHeight,scrollWidth:ft.scrollWidth,height:pt.paddingBox.height,width:pt.paddingBox.width});return{pageMarginBox:at.page.marginBox,frameClient:pt,scrollSize:ft,shouldClipSubject:at.shouldClipSubject,scroll:{initial:at.scroll,current:at.scroll,max:mt,diff:{value:origin,displacement:origin}}}}(),ct=it==="vertical"?vertical:horizontal,ut=getSubject({page:st,withPlaceholder:null,axis:ct,frame:lt}),dt={descriptor:_e,isCombineEnabled:nt,isFixedOnPage:rt,axis:ct,isEnabled:tt,client:ot,page:st,frame:lt,subject:ut};return dt},getClient=function et(_e,tt){var nt=getBox(_e);if(!tt||_e!==tt)return nt;var rt=nt.paddingBox.top-tt.scrollTop,it=nt.paddingBox.left-tt.scrollLeft,ot=rt+tt.scrollHeight,st=it+tt.scrollWidth,at={top:rt,right:st,bottom:ot,left:it},lt=expand(at,nt.border),ct=createBox({borderBox:lt,margin:nt.margin,border:nt.border,padding:nt.padding});return ct},getDimension=function(et){var _e=et.ref,tt=et.descriptor,nt=et.env,rt=et.windowScroll,it=et.direction,ot=et.isDropDisabled,st=et.isCombineEnabled,at=et.shouldClipSubject,lt=nt.closestScrollable,ct=getClient(_e,lt),ut=withScroll(ct,rt),dt=function(){if(!lt)return null;var pt=getBox(lt),mt={scrollHeight:lt.scrollHeight,scrollWidth:lt.scrollWidth};return{client:pt,page:withScroll(pt,rt),scroll:getScroll$1(lt),scrollSize:mt,shouldClipSubject:at}}(),ft=getDroppableDimension({descriptor:tt,isEnabled:!ot,isCombineEnabled:st,isFixedOnPage:nt.isFixedOnPage,direction:it,client:ct,page:ut,closest:dt});return ft},immediate={passive:!1},delayed={passive:!0},getListenerOptions=function(et){return et.shouldPublishImmediately?immediate:delayed};function useRequiredContext(et){var _e=reactExports.useContext(et);return _e||invariant(!1),_e}var getClosestScrollableFromDrag=function et(_e){return _e&&_e.env.closestScrollable||null};function useDroppablePublisher(et){var _e=reactExports.useRef(null),tt=useRequiredContext(AppContext),nt=useUniqueId("droppable"),rt=tt.registry,it=tt.marshal,ot=usePrevious(et),st=useMemo(function(){return{id:et.droppableId,type:et.type,mode:et.mode}},[et.droppableId,et.mode,et.type]),at=reactExports.useRef(st),lt=useMemo(function(){return memoizeOne(function(vt,_t){_e.current||invariant(!1);var Et={x:vt,y:_t};it.updateDroppableScroll(st.id,Et)})},[st.id,it]),ct=useCallback(function(){var vt=_e.current;return!vt||!vt.env.closestScrollable?origin:getScroll$1(vt.env.closestScrollable)},[]),ut=useCallback(function(){var vt=ct();lt(vt.x,vt.y)},[ct,lt]),dt=useMemo(function(){return rafSchd(ut)},[ut]),ft=useCallback(function(){var vt=_e.current,_t=getClosestScrollableFromDrag(vt);vt&&_t||invariant(!1);var Et=vt.scrollOptions;if(Et.shouldPublishImmediately){ut();return}dt()},[dt,ut]),pt=useCallback(function(vt,_t){_e.current&&invariant(!1);var Et=ot.current,bt=Et.getDroppableRef();bt||invariant(!1);var St=getEnv(bt),wt={ref:bt,descriptor:st,env:St,scrollOptions:_t};_e.current=wt;var Rt=getDimension({ref:bt,descriptor:st,env:St,windowScroll:vt,direction:Et.direction,isDropDisabled:Et.isDropDisabled,isCombineEnabled:Et.isCombineEnabled,shouldClipSubject:!Et.ignoreContainerClipping}),Nt=St.closestScrollable;return Nt&&(Nt.setAttribute(scrollContainer.contextId,tt.contextId),Nt.addEventListener("scroll",ft,getListenerOptions(wt.scrollOptions))),Rt},[tt.contextId,st,ft,ot]),mt=useCallback(function(){var vt=_e.current,_t=getClosestScrollableFromDrag(vt);return vt&&_t||invariant(!1),getScroll$1(_t)},[]),xt=useCallback(function(){var vt=_e.current;vt||invariant(!1);var _t=getClosestScrollableFromDrag(vt);_e.current=null,_t&&(dt.cancel(),_t.removeAttribute(scrollContainer.contextId),_t.removeEventListener("scroll",ft,getListenerOptions(vt.scrollOptions)))},[ft,dt]),gt=useCallback(function(vt){var _t=_e.current;_t||invariant(!1);var Et=getClosestScrollableFromDrag(_t);Et||invariant(!1),Et.scrollTop+=vt.y,Et.scrollLeft+=vt.x},[]),ht=useMemo(function(){return{getDimensionAndWatchScroll:pt,getScrollWhileDragging:mt,dragStopped:xt,scroll:gt}},[xt,pt,mt,gt]),yt=useMemo(function(){return{uniqueId:nt,descriptor:st,callbacks:ht}},[ht,st,nt]);useIsomorphicLayoutEffect(function(){return at.current=yt.descriptor,rt.droppable.register(yt),function(){_e.current&&xt(),rt.droppable.unregister(yt)}},[ht,st,xt,yt,it,rt.droppable]),useIsomorphicLayoutEffect(function(){_e.current&&it.updateDroppableIsEnabled(at.current.id,!et.isDropDisabled)},[et.isDropDisabled,it]),useIsomorphicLayoutEffect(function(){_e.current&&it.updateDroppableIsCombineEnabled(at.current.id,et.isCombineEnabled)},[et.isCombineEnabled,it])}function noop$2(){}var empty={width:0,height:0,margin:noSpacing},getSize=function et(_e){var tt=_e.isAnimatingOpenOnMount,nt=_e.placeholder,rt=_e.animate;return tt||rt==="close"?empty:{height:nt.client.borderBox.height,width:nt.client.borderBox.width,margin:nt.client.margin}},getStyle=function et(_e){var tt=_e.isAnimatingOpenOnMount,nt=_e.placeholder,rt=_e.animate,it=getSize({isAnimatingOpenOnMount:tt,placeholder:nt,animate:rt});return{display:nt.display,boxSizing:"border-box",width:it.width,height:it.height,marginTop:it.margin.top,marginRight:it.margin.right,marginBottom:it.margin.bottom,marginLeft:it.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:rt!=="none"?transitions.placeholder:null}};function Placeholder(et){var _e=reactExports.useRef(null),tt=useCallback(function(){_e.current&&(clearTimeout(_e.current),_e.current=null)},[]),nt=et.animate,rt=et.onTransitionEnd,it=et.onClose,ot=et.contextId,st=reactExports.useState(et.animate==="open"),at=st[0],lt=st[1];reactExports.useEffect(function(){return at?nt!=="open"?(tt(),lt(!1),noop$2):_e.current?noop$2:(_e.current=setTimeout(function(){_e.current=null,lt(!1)}),tt):noop$2},[nt,at,tt]);var ct=useCallback(function(dt){dt.propertyName==="height"&&(rt(),nt==="close"&&it())},[nt,it,rt]),ut=getStyle({isAnimatingOpenOnMount:at,animate:et.animate,placeholder:et.placeholder});return React.createElement(et.placeholder.tagName,{style:ut,"data-rbd-placeholder-context-id":ot,onTransitionEnd:ct,ref:et.innerRef})}var Placeholder$1=React.memo(Placeholder),DroppableContext=React.createContext(null),AnimateInOut=function(et){_inheritsLoose(_e,et);function _e(){for(var nt,rt=arguments.length,it=new Array(rt),ot=0;ot<rt;ot++)it[ot]=arguments[ot];return nt=et.call.apply(et,[this].concat(it))||this,nt.state={isVisible:!!nt.props.on,data:nt.props.on,animate:nt.props.shouldAnimate&&nt.props.on?"open":"none"},nt.onClose=function(){nt.state.animate==="close"&&nt.setState({isVisible:!1})},nt}_e.getDerivedStateFromProps=function(rt,it){return rt.shouldAnimate?rt.on?{isVisible:!0,data:rt.on,animate:"open"}:it.isVisible?{isVisible:!0,data:it.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!rt.on,data:rt.on,animate:"none"}};var tt=_e.prototype;return tt.render=function(){if(!this.state.isVisible)return null;var rt={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(rt)},_e}(React.PureComponent),zIndexOptions={dragging:5e3,dropAnimating:4500},getDraggingTransition=function et(_e,tt){return tt?transitions.drop(tt.duration):_e?transitions.snap:transitions.fluid},getDraggingOpacity=function et(_e,tt){return _e?tt?combine.opacity.drop:combine.opacity.combining:null},getShouldDraggingAnimate=function et(_e){return _e.forceShouldAnimate!=null?_e.forceShouldAnimate:_e.mode==="SNAP"};function getDraggingStyle(et){var _e=et.dimension,tt=_e.client,nt=et.offset,rt=et.combineWith,it=et.dropping,ot=!!rt,st=getShouldDraggingAnimate(et),at=!!it,lt=at?transforms.drop(nt,ot):transforms.moveTo(nt),ct={position:"fixed",top:tt.marginBox.top,left:tt.marginBox.left,boxSizing:"border-box",width:tt.borderBox.width,height:tt.borderBox.height,transition:getDraggingTransition(st,it),transform:lt,opacity:getDraggingOpacity(ot,at),zIndex:at?zIndexOptions.dropAnimating:zIndexOptions.dragging,pointerEvents:"none"};return ct}function getSecondaryStyle(et){return{transform:transforms.moveTo(et.offset),transition:et.shouldAnimateDisplacement?null:"none"}}function getStyle$1(et){return et.type==="DRAGGING"?getDraggingStyle(et):getSecondaryStyle(et)}function getDimension$1(et,_e,tt){tt===void 0&&(tt=origin);var nt=window.getComputedStyle(_e),rt=_e.getBoundingClientRect(),it=calculateBox(rt,nt),ot=withScroll(it,tt),st={client:it,tagName:_e.tagName.toLowerCase(),display:nt.display},at={x:it.marginBox.width,y:it.marginBox.height},lt={descriptor:et,placeholder:st,displaceBy:at,client:it,page:ot};return lt}function useDraggablePublisher(et){var _e=useUniqueId("draggable"),tt=et.descriptor,nt=et.registry,rt=et.getDraggableRef,it=et.canDragInteractiveElements,ot=et.shouldRespectForcePress,st=et.isEnabled,at=useMemo(function(){return{canDragInteractiveElements:it,shouldRespectForcePress:ot,isEnabled:st}},[it,st,ot]),lt=useCallback(function(ft){var pt=rt();return pt||invariant(!1),getDimension$1(tt,pt,ft)},[tt,rt]),ct=useMemo(function(){return{uniqueId:_e,descriptor:tt,options:at,getDimension:lt}},[tt,lt,at,_e]),ut=reactExports.useRef(ct),dt=reactExports.useRef(!0);useIsomorphicLayoutEffect(function(){return nt.draggable.register(ut.current),function(){return nt.draggable.unregister(ut.current)}},[nt.draggable]),useIsomorphicLayoutEffect(function(){if(dt.current){dt.current=!1;return}var ft=ut.current;ut.current=ct,nt.draggable.update(ct,ft)},[ct,nt.draggable])}function preventHtml5Dnd(et){et.preventDefault()}function Draggable$1(et){var _e=reactExports.useRef(null),tt=useCallback(function(wt){_e.current=wt},[]),nt=useCallback(function(){return _e.current},[]),rt=useRequiredContext(AppContext),it=rt.contextId,ot=rt.dragHandleUsageInstructionsId,st=rt.registry,at=useRequiredContext(DroppableContext),lt=at.type,ct=at.droppableId,ut=useMemo(function(){return{id:et.draggableId,index:et.index,type:lt,droppableId:ct}},[et.draggableId,et.index,lt,ct]),dt=et.children,ft=et.draggableId,pt=et.isEnabled,mt=et.shouldRespectForcePress,xt=et.canDragInteractiveElements,gt=et.isClone,ht=et.mapped,yt=et.dropAnimationFinished;if(!gt){var vt=useMemo(function(){return{descriptor:ut,registry:st,getDraggableRef:nt,canDragInteractiveElements:xt,shouldRespectForcePress:mt,isEnabled:pt}},[ut,st,nt,xt,mt,pt]);useDraggablePublisher(vt)}var _t=useMemo(function(){return pt?{tabIndex:0,role:"button","aria-describedby":ot,"data-rbd-drag-handle-draggable-id":ft,"data-rbd-drag-handle-context-id":it,draggable:!1,onDragStart:preventHtml5Dnd}:null},[it,ot,ft,pt]),Et=useCallback(function(wt){ht.type==="DRAGGING"&&ht.dropping&&wt.propertyName==="transform"&&yt()},[yt,ht]),bt=useMemo(function(){var wt=getStyle$1(ht),Rt=ht.type==="DRAGGING"&&ht.dropping?Et:null,Nt={innerRef:tt,draggableProps:{"data-rbd-draggable-context-id":it,"data-rbd-draggable-id":ft,style:wt,onTransitionEnd:Rt},dragHandleProps:_t};return Nt},[it,_t,ft,ht,Et,tt]),St=useMemo(function(){return{draggableId:ut.id,type:ut.type,source:{index:ut.index,droppableId:ut.droppableId}}},[ut.droppableId,ut.id,ut.index,ut.type]);return dt(bt,ht.snapshot,St)}var isStrictEqual=function(et,_e){return et===_e},whatIsDraggedOverFromResult=function(et){var _e=et.combine,tt=et.destination;return tt?tt.droppableId:_e?_e.droppableId:null},getCombineWithFromResult=function et(_e){return _e.combine?_e.combine.draggableId:null},getCombineWithFromImpact=function et(_e){return _e.at&&_e.at.type==="COMBINE"?_e.at.combine.draggableId:null};function getDraggableSelector(){var et=memoizeOne(function(rt,it){return{x:rt,y:it}}),_e=memoizeOne(function(rt,it,ot,st,at){return{isDragging:!0,isClone:it,isDropAnimating:!!at,dropAnimation:at,mode:rt,draggingOver:ot,combineWith:st,combineTargetFor:null}}),tt=memoizeOne(function(rt,it,ot,st,at,lt,ct){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:at,combineWith:lt,mode:it,offset:rt,dimension:ot,forceShouldAnimate:ct,snapshot:_e(it,st,at,lt,null)}}}),nt=function(it,ot){if(it.isDragging){if(it.critical.draggable.id!==ot.draggableId)return null;var st=it.current.client.offset,at=it.dimensions.draggables[ot.draggableId],lt=whatIsDraggedOver(it.impact),ct=getCombineWithFromImpact(it.impact),ut=it.forceShouldAnimate;return tt(et(st.x,st.y),it.movementMode,at,ot.isClone,lt,ct,ut)}if(it.phase==="DROP_ANIMATING"){var dt=it.completed;if(dt.result.draggableId!==ot.draggableId)return null;var ft=ot.isClone,pt=it.dimensions.draggables[ot.draggableId],mt=dt.result,xt=mt.mode,gt=whatIsDraggedOverFromResult(mt),ht=getCombineWithFromResult(mt),yt=it.dropDuration,vt={duration:yt,curve:curves.drop,moveTo:it.newHomeClientOffset,opacity:ht?combine.opacity.drop:null,scale:ht?combine.scale.drop:null};return{mapped:{type:"DRAGGING",offset:it.newHomeClientOffset,dimension:pt,dropping:vt,draggingOver:gt,combineWith:ht,mode:xt,forceShouldAnimate:null,snapshot:_e(xt,ft,gt,ht,vt)}}}return null};return nt}function getSecondarySnapshot(et){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:et,combineWith:null}}var atRest={mapped:{type:"SECONDARY",offset:origin,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:getSecondarySnapshot(null)}};function getSecondarySelector(){var et=memoizeOne(function(ot,st){return{x:ot,y:st}}),_e=memoizeOne(getSecondarySnapshot),tt=memoizeOne(function(ot,st,at){return st===void 0&&(st=null),{mapped:{type:"SECONDARY",offset:ot,combineTargetFor:st,shouldAnimateDisplacement:at,snapshot:_e(st)}}}),nt=function(st){return st?tt(origin,st,!0):null},rt=function(st,at,lt,ct){var ut=lt.displaced.visible[st],dt=!!(ct.inVirtualList&&ct.effected[st]),ft=tryGetCombine(lt),pt=ft&&ft.draggableId===st?at:null;if(!ut){if(!dt)return nt(pt);if(lt.displaced.invisible[st])return null;var mt=negate(ct.displacedBy.point),xt=et(mt.x,mt.y);return tt(xt,pt,!0)}if(dt)return nt(pt);var gt=lt.displacedBy.point,ht=et(gt.x,gt.y);return tt(ht,pt,ut.shouldAnimate)},it=function(st,at){if(st.isDragging)return st.critical.draggable.id===at.draggableId?null:rt(at.draggableId,st.critical.draggable.id,st.impact,st.afterCritical);if(st.phase==="DROP_ANIMATING"){var lt=st.completed;return lt.result.draggableId===at.draggableId?null:rt(at.draggableId,lt.result.draggableId,lt.impact,lt.afterCritical)}return null};return it}var makeMapStateToProps=function et(){var _e=getDraggableSelector(),tt=getSecondarySelector(),nt=function(it,ot){return _e(it,ot)||tt(it,ot)||atRest};return nt},mapDispatchToProps={dropAnimationFinished},ConnectedDraggable=connect(makeMapStateToProps,mapDispatchToProps,null,{context:StoreContext,pure:!0,areStatePropsEqual:isStrictEqual})(Draggable$1);function PrivateDraggable(et){var _e=useRequiredContext(DroppableContext),tt=_e.isUsingCloneFor;return tt===et.draggableId&&!et.isClone?null:React.createElement(ConnectedDraggable,et)}function PublicDraggable(et){var _e=typeof et.isDragDisabled=="boolean"?!et.isDragDisabled:!0,tt=!!et.disableInteractiveElementBlocking,nt=!!et.shouldRespectForcePress;return React.createElement(PrivateDraggable,_extends$6({},et,{isClone:!1,isEnabled:_e,canDragInteractiveElements:tt,shouldRespectForcePress:nt}))}function Droppable$1(et){var _e=reactExports.useContext(AppContext);_e||invariant(!1);var tt=_e.contextId,nt=_e.isMovementAllowed,rt=reactExports.useRef(null),it=reactExports.useRef(null),ot=et.children,st=et.droppableId,at=et.type,lt=et.mode,ct=et.direction,ut=et.ignoreContainerClipping,dt=et.isDropDisabled,ft=et.isCombineEnabled,pt=et.snapshot,mt=et.useClone,xt=et.updateViewportMaxScroll,gt=et.getContainerForClone,ht=useCallback(function(){return rt.current},[]),yt=useCallback(function(Nt){rt.current=Nt},[]);useCallback(function(){return it.current},[]);var vt=useCallback(function(Nt){it.current=Nt},[]),_t=useCallback(function(){nt()&&xt({maxScroll:getMaxWindowScroll()})},[nt,xt]);useDroppablePublisher({droppableId:st,type:at,mode:lt,direction:ct,isDropDisabled:dt,isCombineEnabled:ft,ignoreContainerClipping:ut,getDroppableRef:ht});var Et=React.createElement(AnimateInOut,{on:et.placeholder,shouldAnimate:et.shouldAnimatePlaceholder},function(Nt){var kt=Nt.onClose,Pt=Nt.data,jt=Nt.animate;return React.createElement(Placeholder$1,{placeholder:Pt,onClose:kt,innerRef:vt,animate:jt,contextId:tt,onTransitionEnd:_t})}),bt=useMemo(function(){return{innerRef:yt,placeholder:Et,droppableProps:{"data-rbd-droppable-id":st,"data-rbd-droppable-context-id":tt}}},[tt,st,Et,yt]),St=mt?mt.dragging.draggableId:null,wt=useMemo(function(){return{droppableId:st,type:at,isUsingCloneFor:St}},[st,St,at]);function Rt(){if(!mt)return null;var Nt=mt.dragging,kt=mt.render,Pt=React.createElement(PrivateDraggable,{draggableId:Nt.draggableId,index:Nt.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(jt,Wt){return kt(jt,Wt,Nt)});return ReactDOM.createPortal(Pt,gt())}return React.createElement(DroppableContext.Provider,{value:wt},ot(bt,pt),Rt())}var isMatchingType=function et(_e,tt){return _e===tt.droppable.type},getDraggable=function et(_e,tt){return tt.draggables[_e.draggable.id]},makeMapStateToProps$1=function et(){var _e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},tt=_extends$6({},_e,{shouldAnimatePlaceholder:!1}),nt=memoizeOne(function(ot){return{draggableId:ot.id,type:ot.type,source:{index:ot.index,droppableId:ot.droppableId}}}),rt=memoizeOne(function(ot,st,at,lt,ct,ut){var dt=ct.descriptor.id,ft=ct.descriptor.droppableId===ot;if(ft){var pt=ut?{render:ut,dragging:nt(ct.descriptor)}:null,mt={isDraggingOver:at,draggingOverWith:at?dt:null,draggingFromThisWith:dt,isUsingPlaceholder:!0};return{placeholder:ct.placeholder,shouldAnimatePlaceholder:!1,snapshot:mt,useClone:pt}}if(!st)return tt;if(!lt)return _e;var xt={isDraggingOver:at,draggingOverWith:dt,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:ct.placeholder,shouldAnimatePlaceholder:!0,snapshot:xt,useClone:null}}),it=function(st,at){var lt=at.droppableId,ct=at.type,ut=!at.isDropDisabled,dt=at.renderClone;if(st.isDragging){var ft=st.critical;if(!isMatchingType(ct,ft))return tt;var pt=getDraggable(ft,st.dimensions),mt=whatIsDraggedOver(st.impact)===lt;return rt(lt,ut,mt,mt,pt,dt)}if(st.phase==="DROP_ANIMATING"){var xt=st.completed;if(!isMatchingType(ct,xt.critical))return tt;var gt=getDraggable(xt.critical,st.dimensions);return rt(lt,ut,whatIsDraggedOverFromResult(xt.result)===lt,whatIsDraggedOver(xt.impact)===lt,gt,dt)}if(st.phase==="IDLE"&&st.completed&&!st.shouldFlush){var ht=st.completed;if(!isMatchingType(ct,ht.critical))return tt;var yt=whatIsDraggedOver(ht.impact)===lt,vt=!!(ht.impact.at&&ht.impact.at.type==="COMBINE"),_t=ht.critical.droppable.id===lt;return yt?vt?_e:tt:_t?_e:tt}return tt};return it},mapDispatchToProps$1={updateViewportMaxScroll};function getBody(){return document.body||invariant(!1),document.body}var defaultProps={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:getBody},ConnectedDroppable=connect(makeMapStateToProps$1,mapDispatchToProps$1,null,{context:StoreContext,pure:!0,areStatePropsEqual:isStrictEqual})(Droppable$1);ConnectedDroppable.defaultProps=defaultProps;function Droppable({droppableId:et,onDragEnd:_e,children:tt}){return jsxRuntimeExports.jsx(DragDropContext,{onDragEnd:_e,children:jsxRuntimeExports.jsx(ConnectedDroppable,{droppableId:et,children:nt=>jsxRuntimeExports.jsxs("div",{...nt.droppableProps,ref:nt.innerRef,children:[tt,nt.placeholder]})})})}const list="_list_152ky_1",styles$5={list};function CardBlockList({children:et}){return jsxRuntimeExports.jsx("div",{className:styles$5.list,children:et})}const DraggableContext=reactExports.createContext({draggable:!1,dragging:!1});function useDraggableContext(){return reactExports.useContext(DraggableContext)}function Draggable({draggableId:et,index:_e,children:tt}){return jsxRuntimeExports.jsx(PublicDraggable,{draggableId:et,index:_e,children:(nt,rt)=>jsxRuntimeExports.jsx("div",{ref:nt.innerRef,...nt.draggableProps,...nt.dragHandleProps,children:jsxRuntimeExports.jsx(DraggableContext.Provider,{value:{draggable:!0,dragging:rt.isDragging},children:tt})})})}const label="_label_1xm96_1",labelSegment="_labelSegment_1xm96_8",deleteButton="_deleteButton_1xm96_19",editButton="_editButton_1xm96_23",control="_control_1xm96_31",styles$4={label,labelSegment,deleteButton,editButton,control},card="_card_2edte_1",dragging="_dragging_2edte_30",active="_active_2edte_34",disabled="_disabled_2edte_39",styles$3={card,dragging,active,disabled};function CardBlock({variant:et="default",className:_e,draggableId:tt,labelPrefix:nt=void 0,children:rt=void 0,disabled:it=!1,...ot}){const st=useDraggableContext(),at=[styles$3.card,_e],lt=et&&array(et);return lt&&!it&&lt.forEach(ct=>at.push(variants[ct])),it&&at.push(styles$3.disabled),st.dragging&&at.push(styles$3.dragging),jsxRuntimeExports.jsxs("div",{...ot,className:classNames(at),children:[tt!==void 0&&st.draggable&&jsxRuntimeExports.jsx(MdDragIndicator,{})," ",rt]})}function EquipmentCard({equipment:et,disabled:_e=!1,onClick:tt,onDuplicate:nt,onEdit:rt,onDelete:it}){const[ot,st]=reactExports.useState(!1),[at,lt]=reactExports.useState(!1),ct=reactExports.useMemo(()=>et.item.optionSetIds.length>0,[et]),ut=ft=>{st(!0),ft.stopPropagation()},dt=()=>{lt(!0),it==null||it()};return at?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsx(Collapse$1,{in:!ot,onExited:dt,children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(CardBlock,{draggableId:et.uid,disabled:_e,children:jsxRuntimeExports.jsxs("div",{className:styles$4.label,children:[jsxRuntimeExports.jsxs("div",{className:styles$4.labelSegment,onClick:tt,children:[jsxRuntimeExports.jsx("div",{className:styles$4.equipmentName,children:et.name}),ct&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:classNames([styles$4.labelSegment,styles$4.control,styles$4.editButton]),onClick:rt,children:jsxRuntimeExports.jsx(EditIcon,{})})})]}),jsxRuntimeExports.jsxs("div",{className:styles$4.labelSegment,children:["(",jsxRuntimeExports.jsx(Currency,{gp:et.cost}),")"]}),jsxRuntimeExports.jsx("div",{className:classNames([styles$4.labelSegment,styles$4.control,styles$4.deleteButton]),onClick:ut,children:jsxRuntimeExports.jsx(DeleteIcon,{})})]})})})})}const equipmentSummary$1="_equipmentSummary_12c6g_1",eStyles={equipmentSummary:equipmentSummary$1},text="_text_n649o_1",gp="_gp_n649o_5",styles$2={text,gp};function CurrencyDelta({gp:et}){const[_e,tt]=reactExports.useMemo(()=>{if(et===0)return[Intl.NumberFormat().format(0),"gp"];const nt=et>0?"+":"-";let rt=Math.abs(et),it="gp";return rt<1&&(rt=rt*10,it="sp"),rt<1&&(rt=rt*10,it="bp"),[nt+Intl.NumberFormat().format(rt),it]},[et]);return jsxRuntimeExports.jsxs("span",{children:[_e,jsxRuntimeExports.jsx("div",{className:styles$2.gp,children:tt})]})}function EquipmentEditDialog({show:et,value:_e,onConfirm:tt,onCancel:nt}){const rt=useItemDatabase(),[it,ot]=reactExports.useState(_e.options),[st,at]=useAsyncMemo(()=>rt.load(_e.item.itemId),[rt,_e]),lt=reactExports.useMemo(()=>Equipment.create(_e.item,!0,it,rt),[_e,it]);function ct(dt){ot(dt)}function ut(){tt==null||tt(_e.item,it)}return jsxRuntimeExports.jsxs(Modal$1,{show:et,onHide:nt,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,size:"lg",scrollable:!0,fullscreen:"md-down",className:styles$E.dialog,children:[jsxRuntimeExports.jsx(Modal$1.Header,{className:styles$E.title,closeButton:!0,closeVariant:"white",children:jsxRuntimeExports.jsx(Modal$1.Title,{children:_e.name})}),jsxRuntimeExports.jsx(Modal$1.Header,{className:styles$E.header,children:jsxRuntimeExports.jsxs("div",{className:eStyles.equipmentSummary,children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("b",{children:["Weight: ",lt.weight," lbs."]})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("b",{children:["Cost: ",jsxRuntimeExports.jsx(Currency,{gp:lt.cost}),_e.cost!==lt.cost&&jsxRuntimeExports.jsxs("span",{children:[" (",jsxRuntimeExports.jsx(CurrencyDelta,{gp:lt.cost-_e.cost}),")"]})]})})]})}),jsxRuntimeExports.jsx(Modal$1.Body,{className:styles$E.body,children:at?jsxRuntimeExports.jsx(LoadingBlock,{}):jsxRuntimeExports.jsx(EquipmentDescription,{item:st,selectedOptions:it,onChangeOptions:ct})}),jsxRuntimeExports.jsx(Modal$1.Footer,{className:styles$E.footer,children:jsxRuntimeExports.jsx(Button$1,{size:"lg",className:"w-100",onClick:ut,children:"OK"})})]})}function EquipmentList({equipment:et,onDeleteItem:_e,onClickItem:tt,onUpdateItem:nt,onDuplicateItem:rt,onMoveItem:it}){const[ot,st]=reactExports.useState();function at(mt){_e==null||_e(mt)}function lt(mt){tt==null||tt(mt)}function ct(mt){!mt.destination||mt.source.droppableId!==mt.destination.droppableId||mt.destination===mt.source||it==null||it(mt.source.index,mt.destination.index)}function ut(mt){st(mt)}function dt(mt,xt){ot&&(nt==null||nt(ot.uid,mt,xt)),st(void 0)}function ft(){st(void 0)}function pt(mt){rt==null||rt(mt)}return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Droppable,{droppableId:"equipmentSet",onDragEnd:ct,children:jsxRuntimeExports.jsx(CardBlockList,{children:et.map((mt,xt)=>jsxRuntimeExports.jsx(Draggable,{draggableId:mt.uid,index:xt,children:jsxRuntimeExports.jsx(EquipmentCard,{equipment:mt,disabled:!mt.included,onClick:()=>lt(mt.uid),onDuplicate:()=>pt(mt.uid),onEdit:()=>ut(mt),onDelete:()=>at(mt.uid)})},mt.uid))})}),ot&&jsxRuntimeExports.jsx(EquipmentEditDialog,{show:!0,value:ot,onCancel:ft,onConfirm:dt})]})}const equipmentSummary="_equipmentSummary_1xdsz_1",section="_section_1xdsz_9",styles$1={equipmentSummary,section},StartingWealthByLevel={2:1e3,3:3e3,4:6e3,5:10500,6:16e3,7:23500,8:33e3,9:46e3,10:62e3,11:82e3,12:108e3,13:14e4,15:24e4,16:315e3,17:41e4,18:53e4,19:685e3,20:88e4};function SelectBudgetDialog({show:et,value:_e,onConfirm:tt,onCancel:nt}){const[rt,it]=reactExports.useState((_e==null?void 0:_e.toString())??"");reactExports.useEffect(()=>{it((_e==null?void 0:_e.toString())??"")},[_e]);function ot(at){it(at)}function st(at){const lt=(at??rt).trim(),ct=lt!==""?parseInt(lt):void 0;tt==null||tt(ct)}return jsxRuntimeExports.jsxs(Modal$1,{show:et,onHide:nt,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,size:"lg",scrollable:!0,fullscreen:"md-down",className:styles$E.dialog,children:[jsxRuntimeExports.jsx(Modal$1.Header,{className:styles$E.title,closeButton:!0,closeVariant:"white",children:jsxRuntimeExports.jsx(Modal$1.Title,{children:"Select Budget"})}),jsxRuntimeExports.jsxs(Modal$1.Body,{className:styles$E.body,children:[jsxRuntimeExports.jsx("label",{children:"Budget"}),jsxRuntimeExports.jsx(TextInput,{value:rt,onChange:ot,onEnter:st,autoFocus:!0}),jsxRuntimeExports.jsx("label",{children:"New Character Starting Wealth"}),jsxRuntimeExports.jsx(ButtonBlockGroup,{children:Object.entries(StartingWealthByLevel).map(([at,lt])=>jsxRuntimeExports.jsxs(ButtonBlock,{onClick:()=>st(lt.toString()),children:["Level ",at]},at))})]}),jsxRuntimeExports.jsx(Modal$1.Footer,{className:styles$E.footer,children:jsxRuntimeExports.jsx(Button$1,{size:"lg",className:"w-100",onClick:()=>st(),children:"OK"})})]})}const positive="_positive_9qzyz_1",negative="_negative_9qzyz_5",styles={positive,negative};function BudgetRemaining({budget:et,totalCost:_e}){const tt=et-_e,nt=tt<0?styles.negative:styles.positive;return jsxRuntimeExports.jsx("span",{className:nt,children:jsxRuntimeExports.jsx(Currency,{gp:tt})})}function EquipmentSetEditor({loaded:et}){const _e=useItemDatabase(),[tt,nt]=reactExports.useState(et),[rt,it]=reactExports.useState(!1),[ot,st]=reactExports.useState(!1),[at,lt]=reactExports.useState(et.budget),ct=useEquipmentSetStore(),ut=reactExports.useMemo(()=>tt.equipment.filter(Et=>Et.included).map(Et=>Et.cost).reduce((Et,bt)=>Et+bt,0),[tt]),dt=reactExports.useMemo(()=>tt.equipment.filter(Et=>Et.included).map(Et=>Et.weight).reduce((Et,bt)=>Et+bt,0),[tt]);async function ft(Et){const bt=await Et(tt);nt(bt),await ct.save(bt)}function pt(Et){ft(async bt=>(bt.name=Et,bt))}function mt(Et){ft(async bt=>bt.remove(Et))}function xt(Et){ft(async bt=>bt.modify(Et,St=>St.include(!St.included)))}function gt(Et,bt){ft(async St=>St.move(Et,bt))}function ht(Et,bt,St){bt&&ft(async wt=>wt.modify(Et,Rt=>Equipment.create(bt,Rt.included,St,_e)))}function yt(Et){const bt=tt.equipment.findIndex(wt=>wt.uid===Et);if(bt<0)return;const St=tt.equipment[bt];ft(async wt=>wt.add(St.item.itemId,St.options.map(Rt=>Rt.id),bt+1))}function vt(){st(!0)}function _t(Et){st(!1),lt(Et),ft(async bt=>bt.setBudget(Et))}return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("header",{children:"Equipment Set"}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("label",{children:"Equipment Set Name"}),jsxRuntimeExports.jsx(TextInput,{value:tt.name,onChange:pt}),jsxRuntimeExports.jsx("label",{children:"Budget"}),jsxRuntimeExports.jsx(ButtonBlock,{onClick:vt,children:at&&jsxRuntimeExports.jsx(Currency,{gp:at})}),jsxRuntimeExports.jsx(SelectBudgetDialog,{show:ot,value:at,onCancel:()=>st(!1),onConfirm:_t})]}),jsxRuntimeExports.jsx("header",{children:"Equipment List"}),jsxRuntimeExports.jsxs("section",{className:styles$1.section,children:[jsxRuntimeExports.jsxs("div",{className:styles$1.equipmentSummary,children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("b",{children:["Total Weight: ",jsxRuntimeExports.jsx(Quantity,{amount:dt,unit:"lbs."})]})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("b",{children:["Total Cost: ",jsxRuntimeExports.jsx(Currency,{gp:ut})]})}),at&&jsxRuntimeExports.jsxs("div",{children:["(",jsxRuntimeExports.jsx(BudgetRemaining,{budget:at,totalCost:ut})," remaining)"]})]})]}),jsxRuntimeExports.jsx(EquipmentList,{equipment:tt.equipment,onClickItem:xt,onUpdateItem:ht,onDuplicateItem:yt,onDeleteItem:mt,onMoveItem:gt}),jsxRuntimeExports.jsx(ButtonBlock,{variant:"link",onClick:()=>it(!0),children:"+ Add Item"}),jsxRuntimeExports.jsx(EquipmentSearchDialog,{show:rt,onSelect:(Et,bt)=>{it(!1),ft(async St=>Et?St.add(Et.itemId,bt.map(wt=>wt.id)):St)},onCancel:()=>it(!1)})]})]})}function EquipmentSetEdit({loaded:et}){return jsxRuntimeExports.jsxs("main",{children:[jsxRuntimeExports.jsx(EquipmentSetEditor,{loaded:et}),jsxRuntimeExports.jsx("div",{className:"spacer"})]})}async function equipmentSetEditLoader({params:et}){const _e=et.id;if(!_e)throw new Error("No equipment set ID specified");const tt=await withGlobalEquipmentSetStore(),nt=await timedAsync(()=>tt.load(_e),"Loading Equipment Set");if(!nt)throw new Error("Equipment Set not found");const rt=await withGlobalDatabase();if(!rt)throw new Error("Unable to initialize database");return{equipmentSet:nt,equipmentSetStore:tt,database:rt,itemDatabase:await rt.itemDatabase()}}function EquipmentSetEditRoute(){const{equipmentSet:et,equipmentSetStore:_e,database:tt,itemDatabase:nt}=useLoaderData();return jsxRuntimeExports.jsx(DatabaseContext.Provider,{value:tt,children:jsxRuntimeExports.jsx(ItemDatabaseContext.Provider,{value:nt,children:jsxRuntimeExports.jsx(EquipmentSetStoreContext.Provider,{value:_e,children:jsxRuntimeExports.jsx(EquipmentSetEdit,{loaded:et})})})})}const router=createHashRouter([{path:"/",element:jsxRuntimeExports.jsx(EditorLayoutRoute,{}),children:[{index:!0,element:jsxRuntimeExports.jsx(CharacterListRoute,{}),loader:characterListLoader},{path:"login",element:jsxRuntimeExports.jsx(LoginRoute,{}),loader:loginLoader},{path:"character/edit/:id",element:jsxRuntimeExports.jsx(CharacterEditRoute,{}),loader:characterEditLoader},{path:"equipment",element:jsxRuntimeExports.jsx(EquipmentSetListRoute,{}),loader:equipmentSetListLoader},{path:"equipment/edit/:id",element:jsxRuntimeExports.jsx(EquipmentSetEditRoute,{}),loader:equipmentSetEditLoader}]},{path:"character/sheet/:id/:level",element:jsxRuntimeExports.jsx(CharacterSheetRoute,{}),loader:characterSheetLoader}]);client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(RouterProvider,{router}));
